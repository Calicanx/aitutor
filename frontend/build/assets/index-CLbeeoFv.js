const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/subset-shared.chunk-BIQV4vDA.js","assets/khan-B5RQw5PV.js","assets/vendor-ITG08NwX.js","assets/subset-worker.chunk-gnZ3cQjY.js","assets/pica-B_WanH_2.js","assets/ar-SA-G6X2FPQ2-6AiouNm8.js","assets/az-AZ-76LH7QW2-cGfs3yC5.js","assets/bg-BG-XCXSNQG7-De88n0TY.js","assets/bn-BD-2XOGV67Q-BxDS7jbw.js","assets/ca-ES-6MX7JW3Y-g-YVhXE2.js","assets/cs-CZ-2BRQDIVT-BdO1Df40.js","assets/da-DK-5WZEPLOC-_27cHQ-s.js","assets/de-DE-XR44H4JA-B_TLjETf.js","assets/el-GR-BZB4AONW-x454USvI.js","assets/es-ES-U4NZUMDT-CzbBzgJ8.js","assets/eu-ES-A7QVB2H4-CQVFYKPd.js","assets/fa-IR-HGAKTJCU-BXxKAELV.js","assets/fi-FI-Z5N7JZ37-DhPKnT67.js","assets/fr-FR-RHASNOE6-Bx24ci5h.js","assets/gl-ES-HMX3MZ6V-CXq7RGdw.js","assets/he-IL-6SHJWFNN-DM6UvFHw.js","assets/hi-IN-IWLTKZ5I-p1zNFcgz.js","assets/hu-HU-A5ZG7DT2-CwsUrbhN.js","assets/id-ID-SAP4L64H-Cop4TcCc.js","assets/it-IT-JPQ66NNP-DLC4Ykk5.js","assets/ja-JP-DBVTYXUO-DAwm2gor.js","assets/kaa-6HZHGXH3-DlHHmpE9.js","assets/kab-KAB-ZGHBKWFO-B74LBuIP.js","assets/kk-KZ-P5N5QNE5-DxO2qDXg.js","assets/km-KH-HSX4SM5Z-DQ5_OW2c.js","assets/ko-KR-MTYHY66A-W449jJan.js","assets/ku-TR-6OUDTVRD-Cmc4nUPS.js","assets/lt-LT-XHIRWOB4-DGmyWXAO.js","assets/lv-LV-5QDEKY6T-CZ7hOv58.js","assets/mr-IN-CRQNXWMA-BKk-yDd9.js","assets/my-MM-5M5IBNSE-BXDtjKec.js","assets/nb-NO-T6EIAALU-cczhLa74.js","assets/nl-NL-IS3SIHDZ-Bm9ap6K-.js","assets/nn-NO-6E72VCQL-mBzWr1kB.js","assets/oc-FR-POXYY2M6-oxQh5ixn.js","assets/pa-IN-N4M65BXN-D2jKzlJf.js","assets/pl-PL-T2D74RX3-CjGvx3hZ.js","assets/pt-BR-5N22H2LF-Cb_0ZihV.js","assets/pt-PT-UZXXM6DQ-Dwd47JVy.js","assets/ro-RO-JPDTUUEW-DzoVO3Cm.js","assets/ru-RU-B4JR7IUQ-BbBcsIBZ.js","assets/si-LK-N5RQ5JYF-CW6V4cIy.js","assets/sk-SK-C5VTKIMK-BGs18HKx.js","assets/sl-SI-NN7IZMDC-BZpMAmdo.js","assets/sv-SE-XGPEYMSR-DuQbVOl4.js","assets/ta-IN-2NMHFXQM-D5ut9Ody.js","assets/th-TH-HPSO5L25-nn2cACys.js","assets/tr-TR-DEFEU3FU-B-fWluCi.js","assets/uk-UA-QMV73CPH-BAgYUo6d.js","assets/vi-VN-M7AON7JQ-BiEnX1Ky.js","assets/zh-CN-LNUGB5OW-B7kxi2FR.js","assets/zh-HK-E62DVLB3-BA-jPmFF.js","assets/zh-TW-RAJ6MFWO-BI5vwXpf.js","assets/index-B0KF03Tm.js","assets/SidePanel-CvuyAJOg.js","assets/textarea-D4jRRfYG.js","assets/index-M2YaF2x6.js","assets/chevron-down-hnA8vWtd.js","assets/SidePanel-CWT5W09a.css","assets/GradingSidebar-DhcjkR6F.js","assets/ScratchpadCapture-DkvIJpRa.js","assets/FloatingControlPanel-Cj8_Rx1Y.js","assets/label-C6gqt1if.js","assets/genai-DDPItglK.js","assets/FloatingControlPanel-jlcqRP0c.css","assets/LoginPage-C5u_ymsQ.js","assets/LoginPage-DDuuGTZn.css","assets/LandingPageWrapper-g1CwXX90.js","assets/LandingPageWrapper-C5kRGHld.css"])))=>i.map(i=>d[i]);
import{j as e,r as t,R as n,b as r,g as i,d as s,e as a,i as o,f as l,h as c,K as d,P as u,E as h,$ as p,a as f,k as m,l as g,m as b,n as U,o as y,p as x,q as v,C as w,S,s as E,t as k,u as C,v as _,w as M,x as I,y as j,z as T,A as R,B as P,D as A,F as N,G as D,H as L,I as O,J as F,L as z,M as B,N as H,O as $,Q as W,T as X,U as V,W as G,X as Y,Y as q,Z,a0 as K,a1 as Q,a2 as J,a3 as ee,a4 as te,a5 as ne,a6 as re,a7 as ie,a8 as se,a9 as ae,aa as oe,ab as le,ac as ce,ad as de,ae as ue,af as he,ag as pe,ah as fe,ai as me,aj as ge,ak as be,al as Ue,am as ye,an as xe,ao as ve,ap as we,aq as Se,ar as Ee,as as ke,at as Ce,au as _e,av as Me,aw as Ie,ax as je,ay as Te,az as Re,aA as Pe,aB as Ae,aC as Ne,aD as De,aE as Le,aF as Oe,aG as Fe,aH as ze,aI as Be,aJ as He,aK as $e,aL as We,aM as Xe,aN as Ve,aO as Ge,aP as Ye,aQ as qe,aR as Ze,aS as Ke,aT as Qe,aU as Je,aV as et,aW as tt,aX as nt,aY as rt,aZ as it,a_ as st,a$ as at,b0 as ot,b1 as lt,b2 as ct,b3 as dt,b4 as ut,b5 as ht,b6 as pt,b7 as ft,b8 as mt,b9 as gt,ba as bt}from"./khan-B5RQw5PV.js";import{a as Ut,g as yt,c as xt,b as vt,j as wt,R as St,$ as Et,r as kt,P as Ct,i as _t,d as Mt,B as It,S as jt,k as Tt}from"./vendor-ITG08NwX.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const Rt={},Pt=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),i=n?.nonce||n?.getAttribute("nonce");r=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in Rt)return;Rt[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,i&&r.setAttribute("nonce",i),document.head.appendChild(r),t?new Promise((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})};var At,Nt={};var Dt=function(){if(At)return Nt;At=1;var e=Ut();return Nt.createRoot=e.createRoot,Nt.hydrateRoot=e.hydrateRoot,Nt}();const Lt=yt(Dt);var Ot,Ft={exports:{}};var zt=(Ot||(Ot=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,r,s,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new i(r,s||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,a=new Array(s);i<s;i++)a[i]=r[i].fn;return a},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,i,s,a){var o=n?n+e:e;if(!this._events[o])return!1;var l,c,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,i),!0;case 5:return d.fn.call(d.context,t,r,i,s),!0;case 6:return d.fn.call(d.context,t,r,i,s,a),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var h,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,r);break;case 4:d[c].fn.call(d[c].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];d[c].fn.apply(d[c].context,l)}}return!0},o.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,i){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||i&&!o.once||r&&o.context!==r||a(this,s);else{for(var l=0,c=[],d=o.length;l<d;l++)(o[l].fn!==t||i&&!o[l].once||r&&o[l].context!==r)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(Ft)),Ft.exports);const Bt=yt(zt),Ht=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),$t="-",Wt=[],Xt=e=>{const t=Yt(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{if(e.startsWith("[")&&e.endsWith("]"))return Gt(e);const n=e.split($t),r=""===n[0]&&n.length>1?1:0;return Vt(n,r,t)},getConflictingClassGroupIds:(e,t)=>{if(t){const t=r[e],i=n[e];return t?i?((e,t)=>{const n=new Array(e.length+t.length);for(let r=0;r<e.length;r++)n[r]=e[r];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n})(i,t):t:i||Wt}return n[e]||Wt}}},Vt=(e,t,n)=>{if(0===e.length-t)return n.classGroupId;const r=e[t],i=n.nextPart.get(r);if(i){const n=Vt(e,t+1,i);if(n)return n}const s=n.validators;if(null===s)return;const a=0===t?e.join($t):e.slice(t).join($t),o=s.length;for(let l=0;l<o;l++){const e=s[l];if(e.validator(a))return e.classGroupId}},Gt=e=>-1===e.slice(1,-1).indexOf(":")?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),r=t.slice(0,n);return r?"arbitrary.."+r:void 0})(),Yt=e=>{const{theme:t,classGroups:n}=e;return qt(n,t)},qt=(e,t)=>{const n=Ht();for(const r in e){const i=e[r];Zt(i,n,r,t)}return n},Zt=(e,t,n,r)=>{const i=e.length;for(let s=0;s<i;s++){const i=e[s];Kt(i,t,n,r)}},Kt=(e,t,n,r)=>{"string"!=typeof e?"function"!=typeof e?en(e,t,n,r):Jt(e,t,n,r):Qt(e,t,n)},Qt=(e,t,n)=>{(""===e?t:tn(t,e)).classGroupId=n},Jt=(e,t,n,r)=>{nn(e)?Zt(e(r),t,n,r):(null===t.validators&&(t.validators=[]),t.validators.push(((e,t)=>({classGroupId:e,validator:t}))(n,e)))},en=(e,t,n,r)=>{const i=Object.entries(e),s=i.length;for(let a=0;a<s;a++){const[e,s]=i[a];Zt(s,tn(t,e),n,r)}},tn=(e,t)=>{let n=e;const r=t.split($t),i=r.length;for(let s=0;s<i;s++){const e=r[s];let t=n.nextPart.get(e);t||(t=Ht(),n.nextPart.set(e,t)),n=t}return n},nn=e=>"isThemeGetter"in e&&!0===e.isThemeGetter,rn=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),r=Object.create(null);const i=(i,s)=>{n[i]=s,t++,t>e&&(t=0,r=n,n=Object.create(null))};return{get(e){let t=n[e];return void 0!==t?t:void 0!==(t=r[e])?(i(e,t),t):void 0},set(e,t){e in n?n[e]=t:i(e,t)}}},sn=[],an=(e,t,n,r,i)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),on=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=e=>{const t=[];let n,r=0,i=0,s=0;const a=e.length;for(let d=0;d<a;d++){const a=e[d];if(0===r&&0===i){if(":"===a){t.push(e.slice(s,d)),s=d+1;continue}if("/"===a){n=d;continue}}"["===a?r++:"]"===a?r--:"("===a?i++:")"===a&&i--}const o=0===t.length?e:e.slice(s);let l=o,c=!1;o.endsWith("!")?(l=o.slice(0,-1),c=!0):o.startsWith("!")&&(l=o.slice(1),c=!0);return an(t,c,l,n&&n>s?n-s:void 0)};if(t){const e=t+":",n=r;r=t=>t.startsWith(e)?n(t.slice(e.length)):an(sn,!1,t,void 0,!0)}if(n){const e=r;r=t=>n({className:t,parseClassName:e})}return r},ln=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((e,n)=>{t.set(e,1e6+n)}),e=>{const n=[];let r=[];for(let i=0;i<e.length;i++){const s=e[i],a="["===s[0],o=t.has(s);a||o?(r.length>0&&(r.sort(),n.push(...r),r=[]),n.push(s)):r.push(s)}return r.length>0&&(r.sort(),n.push(...r)),n}},cn=/\s+/,dn=e=>{if("string"==typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=dn(e[r]))&&(n&&(n+=" "),n+=t);return n},un=[],hn=e=>{const t=t=>t[e]||un;return t.isThemeGetter=!0,t},pn=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,fn=/^\((?:(\w[\w-]*):)?(.+)\)$/i,mn=/^\d+\/\d+$/,gn=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,bn=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Un=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,yn=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,xn=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,vn=e=>mn.test(e),wn=e=>!!e&&!Number.isNaN(Number(e)),Sn=e=>!!e&&Number.isInteger(Number(e)),En=e=>e.endsWith("%")&&wn(e.slice(0,-1)),kn=e=>gn.test(e),Cn=()=>!0,_n=e=>bn.test(e)&&!Un.test(e),Mn=()=>!1,In=e=>yn.test(e),jn=e=>xn.test(e),Tn=e=>!Pn(e)&&!Fn(e),Rn=e=>Vn(e,Zn,Mn),Pn=e=>pn.test(e),An=e=>Vn(e,Kn,_n),Nn=e=>Vn(e,Qn,wn),Dn=e=>Vn(e,Yn,Mn),Ln=e=>Vn(e,qn,jn),On=e=>Vn(e,er,In),Fn=e=>fn.test(e),zn=e=>Gn(e,Kn),Bn=e=>Gn(e,Jn),Hn=e=>Gn(e,Yn),$n=e=>Gn(e,Zn),Wn=e=>Gn(e,qn),Xn=e=>Gn(e,er,!0),Vn=(e,t,n)=>{const r=pn.exec(e);return!!r&&(r[1]?t(r[1]):n(r[2]))},Gn=(e,t,n=!1)=>{const r=fn.exec(e);return!!r&&(r[1]?t(r[1]):n)},Yn=e=>"position"===e||"percentage"===e,qn=e=>"image"===e||"url"===e,Zn=e=>"length"===e||"size"===e||"bg-size"===e,Kn=e=>"length"===e,Qn=e=>"number"===e,Jn=e=>"family-name"===e,er=e=>"shadow"===e,tr=((e,...t)=>{let n,r,i,s;const a=e=>{const t=r(e);if(t)return t;const s=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=t,a=[],o=e.trim().split(cn);let l="";for(let c=o.length-1;c>=0;c-=1){const e=o[c],{isExternal:t,modifiers:d,hasImportantModifier:u,baseClassName:h,maybePostfixModifierPosition:p}=n(e);if(t){l=e+(l.length>0?" "+l:l);continue}let f=!!p,m=r(f?h.substring(0,p):h);if(!m){if(!f){l=e+(l.length>0?" "+l:l);continue}if(m=r(h),!m){l=e+(l.length>0?" "+l:l);continue}f=!1}const g=0===d.length?"":1===d.length?d[0]:s(d).join(":"),b=u?g+"!":g,U=b+m;if(a.indexOf(U)>-1)continue;a.push(U);const y=i(m,f);for(let n=0;n<y.length;++n){const e=y[n];a.push(b+e)}l=e+(l.length>0?" "+l:l)}return l})(e,n);return i(e,s),s};return s=o=>{const l=t.reduce((e,t)=>t(e),e());return n=(e=>({cache:rn(e.cacheSize),parseClassName:on(e),sortModifiers:ln(e),...Xt(e)}))(l),r=n.cache.get,i=n.cache.set,s=a,a(o)},(...e)=>s(((...e)=>{let t,n,r=0,i="";for(;r<e.length;)(t=e[r++])&&(n=dn(t))&&(i&&(i+=" "),i+=n);return i})(...e))})(()=>{const e=hn("color"),t=hn("font"),n=hn("text"),r=hn("font-weight"),i=hn("tracking"),s=hn("leading"),a=hn("breakpoint"),o=hn("container"),l=hn("spacing"),c=hn("radius"),d=hn("shadow"),u=hn("inset-shadow"),h=hn("text-shadow"),p=hn("drop-shadow"),f=hn("blur"),m=hn("perspective"),g=hn("aspect"),b=hn("ease"),U=hn("animate"),y=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Fn,Pn],x=()=>[Fn,Pn,l],v=()=>[vn,"full","auto",...x()],w=()=>[Sn,"none","subgrid",Fn,Pn],S=()=>["auto",{span:["full",Sn,Fn,Pn]},Sn,Fn,Pn],E=()=>[Sn,"auto",Fn,Pn],k=()=>["auto","min","max","fr",Fn,Pn],C=()=>["auto",...x()],_=()=>[vn,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...x()],M=()=>[e,Fn,Pn],I=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Hn,Dn,{position:[Fn,Pn]}],j=()=>["auto","cover","contain",$n,Rn,{size:[Fn,Pn]}],T=()=>[En,zn,An],R=()=>["","none","full",c,Fn,Pn],P=()=>["",wn,zn,An],A=()=>[wn,En,Hn,Dn],N=()=>["","none",f,Fn,Pn],D=()=>["none",wn,Fn,Pn],L=()=>["none",wn,Fn,Pn],O=()=>[wn,Fn,Pn],F=()=>[vn,"full",...x()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[kn],breakpoint:[kn],color:[Cn],container:[kn],"drop-shadow":[kn],ease:["in","out","in-out"],font:[Tn],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[kn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[kn],shadow:[kn],spacing:["px",wn],text:[kn],"text-shadow":[kn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",vn,Pn,Fn,g]}],container:["container"],columns:[{columns:[wn,Pn,Fn,o]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:y()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:v()}],"inset-x":[{"inset-x":v()}],"inset-y":[{"inset-y":v()}],start:[{start:v()}],end:[{end:v()}],top:[{top:v()}],right:[{right:v()}],bottom:[{bottom:v()}],left:[{left:v()}],visibility:["visible","invisible","collapse"],z:[{z:[Sn,"auto",Fn,Pn]}],basis:[{basis:[vn,"full","auto",o,...x()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[wn,vn,"auto","initial","none",Pn]}],grow:[{grow:["",wn,Fn,Pn]}],shrink:[{shrink:["",wn,Fn,Pn]}],order:[{order:[Sn,"first","last","none",Fn,Pn]}],"grid-cols":[{"grid-cols":w()}],"col-start-end":[{col:S()}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":w()}],"row-start-end":[{row:S()}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":k()}],"auto-rows":[{"auto-rows":k()}],gap:[{gap:x()}],"gap-x":[{"gap-x":x()}],"gap-y":[{"gap-y":x()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:x()}],px:[{px:x()}],py:[{py:x()}],ps:[{ps:x()}],pe:[{pe:x()}],pt:[{pt:x()}],pr:[{pr:x()}],pb:[{pb:x()}],pl:[{pl:x()}],m:[{m:C()}],mx:[{mx:C()}],my:[{my:C()}],ms:[{ms:C()}],me:[{me:C()}],mt:[{mt:C()}],mr:[{mr:C()}],mb:[{mb:C()}],ml:[{ml:C()}],"space-x":[{"space-x":x()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":x()}],"space-y-reverse":["space-y-reverse"],size:[{size:_()}],w:[{w:[o,"screen",..._()]}],"min-w":[{"min-w":[o,"screen","none",..._()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},..._()]}],h:[{h:["screen","lh",..._()]}],"min-h":[{"min-h":["screen","lh","none",..._()]}],"max-h":[{"max-h":["screen","lh",..._()]}],"font-size":[{text:["base",n,zn,An]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Fn,Nn]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",En,Pn]}],"font-family":[{font:[Bn,Pn,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Fn,Pn]}],"line-clamp":[{"line-clamp":[wn,"none",Fn,Nn]}],leading:[{leading:[s,...x()]}],"list-image":[{"list-image":["none",Fn,Pn]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Fn,Pn]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:M()}],"text-color":[{text:M()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[wn,"from-font","auto",Fn,An]}],"text-decoration-color":[{decoration:M()}],"underline-offset":[{"underline-offset":[wn,"auto",Fn,Pn]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Fn,Pn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Fn,Pn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:I()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:j()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Sn,Fn,Pn],radial:["",Fn,Pn],conic:[Sn,Fn,Pn]},Wn,Ln]}],"bg-color":[{bg:M()}],"gradient-from-pos":[{from:T()}],"gradient-via-pos":[{via:T()}],"gradient-to-pos":[{to:T()}],"gradient-from":[{from:M()}],"gradient-via":[{via:M()}],"gradient-to":[{to:M()}],rounded:[{rounded:R()}],"rounded-s":[{"rounded-s":R()}],"rounded-e":[{"rounded-e":R()}],"rounded-t":[{"rounded-t":R()}],"rounded-r":[{"rounded-r":R()}],"rounded-b":[{"rounded-b":R()}],"rounded-l":[{"rounded-l":R()}],"rounded-ss":[{"rounded-ss":R()}],"rounded-se":[{"rounded-se":R()}],"rounded-ee":[{"rounded-ee":R()}],"rounded-es":[{"rounded-es":R()}],"rounded-tl":[{"rounded-tl":R()}],"rounded-tr":[{"rounded-tr":R()}],"rounded-br":[{"rounded-br":R()}],"rounded-bl":[{"rounded-bl":R()}],"border-w":[{border:P()}],"border-w-x":[{"border-x":P()}],"border-w-y":[{"border-y":P()}],"border-w-s":[{"border-s":P()}],"border-w-e":[{"border-e":P()}],"border-w-t":[{"border-t":P()}],"border-w-r":[{"border-r":P()}],"border-w-b":[{"border-b":P()}],"border-w-l":[{"border-l":P()}],"divide-x":[{"divide-x":P()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":P()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:M()}],"border-color-x":[{"border-x":M()}],"border-color-y":[{"border-y":M()}],"border-color-s":[{"border-s":M()}],"border-color-e":[{"border-e":M()}],"border-color-t":[{"border-t":M()}],"border-color-r":[{"border-r":M()}],"border-color-b":[{"border-b":M()}],"border-color-l":[{"border-l":M()}],"divide-color":[{divide:M()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[wn,Fn,Pn]}],"outline-w":[{outline:["",wn,zn,An]}],"outline-color":[{outline:M()}],shadow:[{shadow:["","none",d,Xn,On]}],"shadow-color":[{shadow:M()}],"inset-shadow":[{"inset-shadow":["none",u,Xn,On]}],"inset-shadow-color":[{"inset-shadow":M()}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:M()}],"ring-offset-w":[{"ring-offset":[wn,An]}],"ring-offset-color":[{"ring-offset":M()}],"inset-ring-w":[{"inset-ring":P()}],"inset-ring-color":[{"inset-ring":M()}],"text-shadow":[{"text-shadow":["none",h,Xn,On]}],"text-shadow-color":[{"text-shadow":M()}],opacity:[{opacity:[wn,Fn,Pn]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[wn]}],"mask-image-linear-from-pos":[{"mask-linear-from":A()}],"mask-image-linear-to-pos":[{"mask-linear-to":A()}],"mask-image-linear-from-color":[{"mask-linear-from":M()}],"mask-image-linear-to-color":[{"mask-linear-to":M()}],"mask-image-t-from-pos":[{"mask-t-from":A()}],"mask-image-t-to-pos":[{"mask-t-to":A()}],"mask-image-t-from-color":[{"mask-t-from":M()}],"mask-image-t-to-color":[{"mask-t-to":M()}],"mask-image-r-from-pos":[{"mask-r-from":A()}],"mask-image-r-to-pos":[{"mask-r-to":A()}],"mask-image-r-from-color":[{"mask-r-from":M()}],"mask-image-r-to-color":[{"mask-r-to":M()}],"mask-image-b-from-pos":[{"mask-b-from":A()}],"mask-image-b-to-pos":[{"mask-b-to":A()}],"mask-image-b-from-color":[{"mask-b-from":M()}],"mask-image-b-to-color":[{"mask-b-to":M()}],"mask-image-l-from-pos":[{"mask-l-from":A()}],"mask-image-l-to-pos":[{"mask-l-to":A()}],"mask-image-l-from-color":[{"mask-l-from":M()}],"mask-image-l-to-color":[{"mask-l-to":M()}],"mask-image-x-from-pos":[{"mask-x-from":A()}],"mask-image-x-to-pos":[{"mask-x-to":A()}],"mask-image-x-from-color":[{"mask-x-from":M()}],"mask-image-x-to-color":[{"mask-x-to":M()}],"mask-image-y-from-pos":[{"mask-y-from":A()}],"mask-image-y-to-pos":[{"mask-y-to":A()}],"mask-image-y-from-color":[{"mask-y-from":M()}],"mask-image-y-to-color":[{"mask-y-to":M()}],"mask-image-radial":[{"mask-radial":[Fn,Pn]}],"mask-image-radial-from-pos":[{"mask-radial-from":A()}],"mask-image-radial-to-pos":[{"mask-radial-to":A()}],"mask-image-radial-from-color":[{"mask-radial-from":M()}],"mask-image-radial-to-color":[{"mask-radial-to":M()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[wn]}],"mask-image-conic-from-pos":[{"mask-conic-from":A()}],"mask-image-conic-to-pos":[{"mask-conic-to":A()}],"mask-image-conic-from-color":[{"mask-conic-from":M()}],"mask-image-conic-to-color":[{"mask-conic-to":M()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:I()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:j()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Fn,Pn]}],filter:[{filter:["","none",Fn,Pn]}],blur:[{blur:N()}],brightness:[{brightness:[wn,Fn,Pn]}],contrast:[{contrast:[wn,Fn,Pn]}],"drop-shadow":[{"drop-shadow":["","none",p,Xn,On]}],"drop-shadow-color":[{"drop-shadow":M()}],grayscale:[{grayscale:["",wn,Fn,Pn]}],"hue-rotate":[{"hue-rotate":[wn,Fn,Pn]}],invert:[{invert:["",wn,Fn,Pn]}],saturate:[{saturate:[wn,Fn,Pn]}],sepia:[{sepia:["",wn,Fn,Pn]}],"backdrop-filter":[{"backdrop-filter":["","none",Fn,Pn]}],"backdrop-blur":[{"backdrop-blur":N()}],"backdrop-brightness":[{"backdrop-brightness":[wn,Fn,Pn]}],"backdrop-contrast":[{"backdrop-contrast":[wn,Fn,Pn]}],"backdrop-grayscale":[{"backdrop-grayscale":["",wn,Fn,Pn]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[wn,Fn,Pn]}],"backdrop-invert":[{"backdrop-invert":["",wn,Fn,Pn]}],"backdrop-opacity":[{"backdrop-opacity":[wn,Fn,Pn]}],"backdrop-saturate":[{"backdrop-saturate":[wn,Fn,Pn]}],"backdrop-sepia":[{"backdrop-sepia":["",wn,Fn,Pn]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":x()}],"border-spacing-x":[{"border-spacing-x":x()}],"border-spacing-y":[{"border-spacing-y":x()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Fn,Pn]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[wn,"initial",Fn,Pn]}],ease:[{ease:["linear","initial",b,Fn,Pn]}],delay:[{delay:[wn,Fn,Pn]}],animate:[{animate:["none",U,Fn,Pn]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,Fn,Pn]}],"perspective-origin":[{"perspective-origin":y()}],rotate:[{rotate:D()}],"rotate-x":[{"rotate-x":D()}],"rotate-y":[{"rotate-y":D()}],"rotate-z":[{"rotate-z":D()}],scale:[{scale:L()}],"scale-x":[{"scale-x":L()}],"scale-y":[{"scale-y":L()}],"scale-z":[{"scale-z":L()}],"scale-3d":["scale-3d"],skew:[{skew:O()}],"skew-x":[{"skew-x":O()}],"skew-y":[{"skew-y":O()}],transform:[{transform:[Fn,Pn,"","none","gpu","cpu"]}],"transform-origin":[{origin:y()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:F()}],"translate-x":[{"translate-x":F()}],"translate-y":[{"translate-y":F()}],"translate-z":[{"translate-z":F()}],"translate-none":["translate-none"],accent:[{accent:M()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:M()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Fn,Pn]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Fn,Pn]}],fill:[{fill:["none",...M()]}],"stroke-w":[{stroke:[wn,zn,An,Nn]}],stroke:[{stroke:["none",...M()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function nr(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=nr(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function rr(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=nr(e))&&(r&&(r+=" "),r+=t);return r}function ir(...e){return tr(rr(e))}const sr=new Map,ar=(()=>{const e=new Promise(e=>{window.addEventListener("pointerdown",e,{once:!0}),window.addEventListener("keydown",e,{once:!0})});return async t=>{try{const e=new Audio;if(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",await e.play(),t?.id&&sr.has(t.id)){const e=sr.get(t.id);if(e)return e}const n=new AudioContext(t);return t?.id&&sr.set(t.id,n),n}catch(lA){if(await e,t?.id&&sr.has(t.id)){const e=sr.get(t.id);if(e)return e}const r=new AudioContext(t);return t?.id&&sr.set(t.id,r),r}}})();var or,lr={exports:{}};var cr,dr,ur=(or||(or=1,cr=lr,dr=lr.exports,function(){var e,t="Expected a function",n="__lodash_hash_undefined__",r="__lodash_placeholder__",i=32,s=128,a=256,o=1/0,l=9007199254740991,c=NaN,d=4294967295,u=[["ary",s],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",i],["partialRight",64],["rearg",a]],h="[object Arguments]",p="[object Array]",f="[object Boolean]",m="[object Date]",g="[object Error]",b="[object Function]",U="[object GeneratorFunction]",y="[object Map]",x="[object Number]",v="[object Object]",w="[object Promise]",S="[object RegExp]",E="[object Set]",k="[object String]",C="[object Symbol]",_="[object WeakMap]",M="[object ArrayBuffer]",I="[object DataView]",j="[object Float32Array]",T="[object Float64Array]",R="[object Int8Array]",P="[object Int16Array]",A="[object Int32Array]",N="[object Uint8Array]",D="[object Uint8ClampedArray]",L="[object Uint16Array]",O="[object Uint32Array]",F=/\b__p \+= '';/g,z=/\b(__p \+=) '' \+/g,B=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/&(?:amp|lt|gt|quot|#39);/g,$=/[&<>"']/g,W=RegExp(H.source),X=RegExp($.source),V=/<%-([\s\S]+?)%>/g,G=/<%([\s\S]+?)%>/g,Y=/<%=([\s\S]+?)%>/g,q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Z=/^\w*$/,K=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Q=/[\\^$.*+?()[\]{}|]/g,J=RegExp(Q.source),ee=/^\s+/,te=/\s/,ne=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,re=/\{\n\/\* \[wrapped with (.+)\] \*/,ie=/,? & /,se=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ae=/[()=,{}\[\]\/\s]/,oe=/\\(\\)?/g,le=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ce=/\w*$/,de=/^[-+]0x[0-9a-f]+$/i,ue=/^0b[01]+$/i,he=/^\[object .+?Constructor\]$/,pe=/^0o[0-7]+$/i,fe=/^(?:0|[1-9]\d*)$/,me=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ge=/($^)/,be=/['\n\r\u2028\u2029\\]/g,Ue="\\ud800-\\udfff",ye="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",xe="\\u2700-\\u27bf",ve="a-z\\xdf-\\xf6\\xf8-\\xff",we="A-Z\\xc0-\\xd6\\xd8-\\xde",Se="\\ufe0e\\ufe0f",Ee="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ke="['’]",Ce="["+Ue+"]",_e="["+Ee+"]",Me="["+ye+"]",Ie="\\d+",je="["+xe+"]",Te="["+ve+"]",Re="[^"+Ue+Ee+Ie+xe+ve+we+"]",Pe="\\ud83c[\\udffb-\\udfff]",Ae="[^"+Ue+"]",Ne="(?:\\ud83c[\\udde6-\\uddff]){2}",De="[\\ud800-\\udbff][\\udc00-\\udfff]",Le="["+we+"]",Oe="\\u200d",Fe="(?:"+Te+"|"+Re+")",ze="(?:"+Le+"|"+Re+")",Be="(?:['’](?:d|ll|m|re|s|t|ve))?",He="(?:['’](?:D|LL|M|RE|S|T|VE))?",$e="(?:"+Me+"|"+Pe+")?",We="["+Se+"]?",Xe=We+$e+"(?:"+Oe+"(?:"+[Ae,Ne,De].join("|")+")"+We+$e+")*",Ve="(?:"+[je,Ne,De].join("|")+")"+Xe,Ge="(?:"+[Ae+Me+"?",Me,Ne,De,Ce].join("|")+")",Ye=RegExp(ke,"g"),qe=RegExp(Me,"g"),Ze=RegExp(Pe+"(?="+Pe+")|"+Ge+Xe,"g"),Ke=RegExp([Le+"?"+Te+"+"+Be+"(?="+[_e,Le,"$"].join("|")+")",ze+"+"+He+"(?="+[_e,Le+Fe,"$"].join("|")+")",Le+"?"+Fe+"+"+Be,Le+"+"+He,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ie,Ve].join("|"),"g"),Qe=RegExp("["+Oe+Ue+ye+Se+"]"),Je=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,et=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tt=-1,nt={};nt[j]=nt[T]=nt[R]=nt[P]=nt[A]=nt[N]=nt[D]=nt[L]=nt[O]=!0,nt[h]=nt[p]=nt[M]=nt[f]=nt[I]=nt[m]=nt[g]=nt[b]=nt[y]=nt[x]=nt[v]=nt[S]=nt[E]=nt[k]=nt[_]=!1;var rt={};rt[h]=rt[p]=rt[M]=rt[I]=rt[f]=rt[m]=rt[j]=rt[T]=rt[R]=rt[P]=rt[A]=rt[y]=rt[x]=rt[v]=rt[S]=rt[E]=rt[k]=rt[C]=rt[N]=rt[D]=rt[L]=rt[O]=!0,rt[g]=rt[b]=rt[_]=!1;var it={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},st=parseFloat,at=parseInt,ot="object"==typeof xt&&xt&&xt.Object===Object&&xt,lt="object"==typeof self&&self&&self.Object===Object&&self,ct=ot||lt||Function("return this")(),dt=dr&&!dr.nodeType&&dr,ut=dt&&cr&&!cr.nodeType&&cr,ht=ut&&ut.exports===dt,pt=ht&&ot.process,ft=function(){try{var e=ut&&ut.require&&ut.require("util").types;return e||pt&&pt.binding&&pt.binding("util")}catch(lA){}}(),mt=ft&&ft.isArrayBuffer,gt=ft&&ft.isDate,bt=ft&&ft.isMap,Ut=ft&&ft.isRegExp,yt=ft&&ft.isSet,vt=ft&&ft.isTypedArray;function wt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function St(e,t,n,r){for(var i=-1,s=null==e?0:e.length;++i<s;){var a=e[i];t(r,a,n(a),e)}return r}function Et(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function kt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Ct(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function _t(e,t){for(var n=-1,r=null==e?0:e.length,i=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[i++]=a)}return s}function Mt(e,t){return!(null==e||!e.length)&&Ot(e,t,0)>-1}function It(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function jt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Tt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Rt(e,t,n,r){var i=-1,s=null==e?0:e.length;for(r&&s&&(n=e[++i]);++i<s;)n=t(n,e[i],i,e);return n}function Pt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function At(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Nt=Ht("length");function Dt(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function Lt(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1}function Ot(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Lt(e,zt,n)}function Ft(e,t,n,r){for(var i=n-1,s=e.length;++i<s;)if(r(e[i],t))return i;return-1}function zt(e){return e!=e}function Bt(e,t){var n=null==e?0:e.length;return n?Xt(e,t)/n:c}function Ht(t){return function(n){return null==n?e:n[t]}}function $t(t){return function(n){return null==t?e:t[n]}}function Wt(e,t,n,r,i){return i(e,function(e,i,s){n=r?(r=!1,e):t(n,e,i,s)}),n}function Xt(t,n){for(var r,i=-1,s=t.length;++i<s;){var a=n(t[i]);a!==e&&(r=r===e?a:r+a)}return r}function Vt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Gt(e){return e?e.slice(0,dn(e)+1).replace(ee,""):e}function Yt(e){return function(t){return e(t)}}function qt(e,t){return jt(t,function(t){return e[t]})}function Zt(e,t){return e.has(t)}function Kt(e,t){for(var n=-1,r=e.length;++n<r&&Ot(t,e[n],0)>-1;);return n}function Qt(e,t){for(var n=e.length;n--&&Ot(t,e[n],0)>-1;);return n}var Jt=$t({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),en=$t({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function tn(e){return"\\"+it[e]}function nn(e){return Qe.test(e)}function rn(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function sn(e,t){return function(n){return e(t(n))}}function an(e,t){for(var n=-1,i=e.length,s=0,a=[];++n<i;){var o=e[n];o!==t&&o!==r||(e[n]=r,a[s++]=n)}return a}function on(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function ln(e){return nn(e)?function(e){for(var t=Ze.lastIndex=0;Ze.test(e);)++t;return t}(e):Nt(e)}function cn(e){return nn(e)?function(e){return e.match(Ze)||[]}(e):function(e){return e.split("")}(e)}function dn(e){for(var t=e.length;t--&&te.test(e.charAt(t)););return t}var un=$t({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),hn=function te(Ue){var ye,xe=(Ue=null==Ue?ct:hn.defaults(ct.Object(),Ue,hn.pick(ct,et))).Array,ve=Ue.Date,we=Ue.Error,Se=Ue.Function,Ee=Ue.Math,ke=Ue.Object,Ce=Ue.RegExp,_e=Ue.String,Me=Ue.TypeError,Ie=xe.prototype,je=Se.prototype,Te=ke.prototype,Re=Ue["__core-js_shared__"],Pe=je.toString,Ae=Te.hasOwnProperty,Ne=0,De=(ye=/[^.]+$/.exec(Re&&Re.keys&&Re.keys.IE_PROTO||""))?"Symbol(src)_1."+ye:"",Le=Te.toString,Oe=Pe.call(ke),Fe=ct._,ze=Ce("^"+Pe.call(Ae).replace(Q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=ht?Ue.Buffer:e,He=Ue.Symbol,$e=Ue.Uint8Array,We=Be?Be.allocUnsafe:e,Xe=sn(ke.getPrototypeOf,ke),Ve=ke.create,Ge=Te.propertyIsEnumerable,Ze=Ie.splice,Qe=He?He.isConcatSpreadable:e,it=He?He.iterator:e,ot=He?He.toStringTag:e,lt=function(){try{var e=cs(ke,"defineProperty");return e({},"",{}),e}catch(lA){}}(),dt=Ue.clearTimeout!==ct.clearTimeout&&Ue.clearTimeout,ut=ve&&ve.now!==ct.Date.now&&ve.now,pt=Ue.setTimeout!==ct.setTimeout&&Ue.setTimeout,ft=Ee.ceil,xt=Ee.floor,Nt=ke.getOwnPropertySymbols,$t=Be?Be.isBuffer:e,pn=Ue.isFinite,fn=Ie.join,mn=sn(ke.keys,ke),gn=Ee.max,bn=Ee.min,Un=ve.now,yn=Ue.parseInt,xn=Ee.random,vn=Ie.reverse,wn=cs(Ue,"DataView"),Sn=cs(Ue,"Map"),En=cs(Ue,"Promise"),kn=cs(Ue,"Set"),Cn=cs(Ue,"WeakMap"),_n=cs(ke,"create"),Mn=Cn&&new Cn,In={},jn=Os(wn),Tn=Os(Sn),Rn=Os(En),Pn=Os(kn),An=Os(Cn),Nn=He?He.prototype:e,Dn=Nn?Nn.valueOf:e,Ln=Nn?Nn.toString:e;function On(e){if(to(e)&&!Wa(e)&&!(e instanceof Hn)){if(e instanceof Bn)return e;if(Ae.call(e,"__wrapped__"))return Fs(e)}return new Bn(e)}var Fn=function(){function t(){}return function(n){if(!eo(n))return{};if(Ve)return Ve(n);t.prototype=n;var r=new t;return t.prototype=e,r}}();function zn(){}function Bn(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=e}function Hn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function $n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Xn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Vn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Xn;++t<n;)this.add(e[t])}function Gn(e){var t=this.__data__=new Wn(e);this.size=t.size}function Yn(e,t){var n=Wa(e),r=!n&&$a(e),i=!n&&!r&&Ya(e),s=!n&&!r&&!i&&co(e),a=n||r||i||s,o=a?Vt(e.length,_e):[],l=o.length;for(var c in e)!t&&!Ae.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||gs(c,l))||o.push(c);return o}function qn(t){var n=t.length;return n?t[Vr(0,n-1)]:e}function Zn(e,t){return Rs(_i(e),sr(t,0,e.length))}function Kn(e){return Rs(_i(e))}function Qn(t,n,r){(r!==e&&!za(t[n],r)||r===e&&!(n in t))&&rr(t,n,r)}function Jn(t,n,r){var i=t[n];Ae.call(t,n)&&za(i,r)&&(r!==e||n in t)||rr(t,n,r)}function er(e,t){for(var n=e.length;n--;)if(za(e[n][0],t))return n;return-1}function tr(e,t,n,r){return dr(e,function(e,i,s){t(r,e,n(e),s)}),r}function nr(e,t){return e&&Mi(t,Ro(t),e)}function rr(e,t,n){"__proto__"==t&&lt?lt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ir(t,n){for(var r=-1,i=n.length,s=xe(i),a=null==t;++r<i;)s[r]=a?e:_o(t,n[r]);return s}function sr(t,n,r){return t==t&&(r!==e&&(t=t<=r?t:r),n!==e&&(t=t>=n?t:n)),t}function ar(t,n,r,i,s,a){var o,l=1&n,c=2&n,d=4&n;if(r&&(o=s?r(t,i,s,a):r(t)),o!==e)return o;if(!eo(t))return t;var u=Wa(t);if(u){if(o=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Ae.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(t),!l)return _i(t,o)}else{var p=hs(t),g=p==b||p==U;if(Ya(t))return vi(t,l);if(p==v||p==h||g&&!s){if(o=c||g?{}:fs(t),!l)return c?function(e,t){return Mi(e,us(e),t)}(t,function(e,t){return e&&Mi(t,Po(t),e)}(o,t)):function(e,t){return Mi(e,ds(e),t)}(t,nr(o,t))}else{if(!rt[p])return s?t:{};o=function(e,t,n){var r,i=e.constructor;switch(t){case M:return wi(e);case f:case m:return new i(+e);case I:return function(e,t){var n=t?wi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case j:case T:case R:case P:case A:case N:case D:case L:case O:return Si(e,n);case y:return new i;case x:case k:return new i(e);case S:return function(e){var t=new e.constructor(e.source,ce.exec(e));return t.lastIndex=e.lastIndex,t}(e);case E:return new i;case C:return r=e,Dn?ke(Dn.call(r)):{}}}(t,p,l)}}a||(a=new Gn);var w=a.get(t);if(w)return w;a.set(t,o),ao(t)?t.forEach(function(e){o.add(ar(e,n,r,e,t,a))}):no(t)&&t.forEach(function(e,i){o.set(i,ar(e,n,r,i,t,a))});var _=u?e:(d?c?ns:ts:c?Po:Ro)(t);return Et(_||t,function(e,i){_&&(e=t[i=e]),Jn(o,i,ar(e,n,r,i,t,a))}),o}function or(t,n,r){var i=r.length;if(null==t)return!i;for(t=ke(t);i--;){var s=r[i],a=n[s],o=t[s];if(o===e&&!(s in t)||!a(o))return!1}return!0}function lr(n,r,i){if("function"!=typeof n)throw new Me(t);return Ms(function(){n.apply(e,i)},r)}function cr(e,t,n,r){var i=-1,s=Mt,a=!0,o=e.length,l=[],c=t.length;if(!o)return l;n&&(t=jt(t,Yt(n))),r?(s=It,a=!1):t.length>=200&&(s=Zt,a=!1,t=new Vn(t));e:for(;++i<o;){var d=e[i],u=null==n?d:n(d);if(d=r||0!==d?d:0,a&&u==u){for(var h=c;h--;)if(t[h]===u)continue e;l.push(d)}else s(t,u,r)||l.push(d)}return l}On.templateSettings={escape:V,evaluate:G,interpolate:Y,variable:"",imports:{_:On}},On.prototype=zn.prototype,On.prototype.constructor=On,Bn.prototype=Fn(zn.prototype),Bn.prototype.constructor=Bn,Hn.prototype=Fn(zn.prototype),Hn.prototype.constructor=Hn,$n.prototype.clear=function(){this.__data__=_n?_n(null):{},this.size=0},$n.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},$n.prototype.get=function(t){var r=this.__data__;if(_n){var i=r[t];return i===n?e:i}return Ae.call(r,t)?r[t]:e},$n.prototype.has=function(t){var n=this.__data__;return _n?n[t]!==e:Ae.call(n,t)},$n.prototype.set=function(t,r){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=_n&&r===e?n:r,this},Wn.prototype.clear=function(){this.__data__=[],this.size=0},Wn.prototype.delete=function(e){var t=this.__data__,n=er(t,e);return!(n<0||(n==t.length-1?t.pop():Ze.call(t,n,1),--this.size,0))},Wn.prototype.get=function(t){var n=this.__data__,r=er(n,t);return r<0?e:n[r][1]},Wn.prototype.has=function(e){return er(this.__data__,e)>-1},Wn.prototype.set=function(e,t){var n=this.__data__,r=er(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Xn.prototype.clear=function(){this.size=0,this.__data__={hash:new $n,map:new(Sn||Wn),string:new $n}},Xn.prototype.delete=function(e){var t=os(this,e).delete(e);return this.size-=t?1:0,t},Xn.prototype.get=function(e){return os(this,e).get(e)},Xn.prototype.has=function(e){return os(this,e).has(e)},Xn.prototype.set=function(e,t){var n=os(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Vn.prototype.add=Vn.prototype.push=function(e){return this.__data__.set(e,n),this},Vn.prototype.has=function(e){return this.__data__.has(e)},Gn.prototype.clear=function(){this.__data__=new Wn,this.size=0},Gn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Gn.prototype.get=function(e){return this.__data__.get(e)},Gn.prototype.has=function(e){return this.__data__.has(e)},Gn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Wn){var r=n.__data__;if(!Sn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Xn(r)}return n.set(e,t),this.size=n.size,this};var dr=Ti(Ur),ur=Ti(yr,!0);function hr(e,t){var n=!0;return dr(e,function(e,r,i){return n=!!t(e,r,i)}),n}function pr(t,n,r){for(var i=-1,s=t.length;++i<s;){var a=t[i],o=n(a);if(null!=o&&(l===e?o==o&&!lo(o):r(o,l)))var l=o,c=a}return c}function fr(e,t){var n=[];return dr(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function mr(e,t,n,r,i){var s=-1,a=e.length;for(n||(n=ms),i||(i=[]);++s<a;){var o=e[s];t>0&&n(o)?t>1?mr(o,t-1,n,r,i):Tt(i,o):r||(i[i.length]=o)}return i}var gr=Ri(),br=Ri(!0);function Ur(e,t){return e&&gr(e,t,Ro)}function yr(e,t){return e&&br(e,t,Ro)}function xr(e,t){return _t(t,function(t){return Ka(e[t])})}function vr(t,n){for(var r=0,i=(n=bi(n,t)).length;null!=t&&r<i;)t=t[Ls(n[r++])];return r&&r==i?t:e}function wr(e,t,n){var r=t(e);return Wa(e)?r:Tt(r,n(e))}function Sr(t){return null==t?t===e?"[object Undefined]":"[object Null]":ot&&ot in ke(t)?function(t){var n=Ae.call(t,ot),r=t[ot];try{t[ot]=e;var i=!0}catch(lA){}var s=Le.call(t);return i&&(n?t[ot]=r:delete t[ot]),s}(t):function(e){return Le.call(e)}(t)}function Er(e,t){return e>t}function kr(e,t){return null!=e&&Ae.call(e,t)}function Cr(e,t){return null!=e&&t in ke(e)}function _r(t,n,r){for(var i=r?It:Mt,s=t[0].length,a=t.length,o=a,l=xe(a),c=1/0,d=[];o--;){var u=t[o];o&&n&&(u=jt(u,Yt(n))),c=bn(u.length,c),l[o]=!r&&(n||s>=120&&u.length>=120)?new Vn(o&&u):e}u=t[0];var h=-1,p=l[0];e:for(;++h<s&&d.length<c;){var f=u[h],m=n?n(f):f;if(f=r||0!==f?f:0,!(p?Zt(p,m):i(d,m,r))){for(o=a;--o;){var g=l[o];if(!(g?Zt(g,m):i(t[o],m,r)))continue e}p&&p.push(m),d.push(f)}}return d}function Mr(t,n,r){var i=null==(t=ks(t,n=bi(n,t)))?t:t[Ls(Zs(n))];return null==i?e:wt(i,t,r)}function Ir(e){return to(e)&&Sr(e)==h}function jr(t,n,r,i,s){return t===n||(null==t||null==n||!to(t)&&!to(n)?t!=t&&n!=n:function(t,n,r,i,s,a){var o=Wa(t),l=Wa(n),c=o?p:hs(t),d=l?p:hs(n),u=(c=c==h?v:c)==v,b=(d=d==h?v:d)==v,U=c==d;if(U&&Ya(t)){if(!Ya(n))return!1;o=!0,u=!1}if(U&&!u)return a||(a=new Gn),o||co(t)?Ji(t,n,r,i,s,a):function(e,t,n,r,i,s,a){switch(n){case I:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case M:return!(e.byteLength!=t.byteLength||!s(new $e(e),new $e(t)));case f:case m:case x:return za(+e,+t);case g:return e.name==t.name&&e.message==t.message;case S:case k:return e==t+"";case y:var o=rn;case E:var l=1&r;if(o||(o=on),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var d=Ji(o(e),o(t),r,i,s,a);return a.delete(e),d;case C:if(Dn)return Dn.call(e)==Dn.call(t)}return!1}(t,n,c,r,i,s,a);if(!(1&r)){var w=u&&Ae.call(t,"__wrapped__"),_=b&&Ae.call(n,"__wrapped__");if(w||_){var j=w?t.value():t,T=_?n.value():n;return a||(a=new Gn),s(j,T,r,i,a)}}return!!U&&(a||(a=new Gn),function(t,n,r,i,s,a){var o=1&r,l=ts(t),c=l.length,d=ts(n),u=d.length;if(c!=u&&!o)return!1;for(var h=c;h--;){var p=l[h];if(!(o?p in n:Ae.call(n,p)))return!1}var f=a.get(t),m=a.get(n);if(f&&m)return f==n&&m==t;var g=!0;a.set(t,n),a.set(n,t);for(var b=o;++h<c;){var U=t[p=l[h]],y=n[p];if(i)var x=o?i(y,U,p,n,t,a):i(U,y,p,t,n,a);if(!(x===e?U===y||s(U,y,r,i,a):x)){g=!1;break}b||(b="constructor"==p)}if(g&&!b){var v=t.constructor,w=n.constructor;v==w||!("constructor"in t)||!("constructor"in n)||"function"==typeof v&&v instanceof v&&"function"==typeof w&&w instanceof w||(g=!1)}return a.delete(t),a.delete(n),g}(t,n,r,i,s,a))}(t,n,r,i,jr,s))}function Tr(t,n,r,i){var s=r.length,a=s,o=!i;if(null==t)return!a;for(t=ke(t);s--;){var l=r[s];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++s<a;){var c=(l=r[s])[0],d=t[c],u=l[1];if(o&&l[2]){if(d===e&&!(c in t))return!1}else{var h=new Gn;if(i)var p=i(d,u,c,t,n,h);if(!(p===e?jr(u,d,3,i,h):p))return!1}}return!0}function Rr(e){return!(!eo(e)||(t=e,De&&De in t))&&(Ka(e)?ze:he).test(Os(e));var t}function Pr(e){return"function"==typeof e?e:null==e?il:"object"==typeof e?Wa(e)?Fr(e[0],e[1]):Or(e):pl(e)}function Ar(e){if(!vs(e))return mn(e);var t=[];for(var n in ke(e))Ae.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Nr(e){if(!eo(e))return function(e){var t=[];if(null!=e)for(var n in ke(e))t.push(n);return t}(e);var t=vs(e),n=[];for(var r in e)("constructor"!=r||!t&&Ae.call(e,r))&&n.push(r);return n}function Dr(e,t){return e<t}function Lr(e,t){var n=-1,r=Va(e)?xe(e.length):[];return dr(e,function(e,i,s){r[++n]=t(e,i,s)}),r}function Or(e){var t=ls(e);return 1==t.length&&t[0][2]?Ss(t[0][0],t[0][1]):function(n){return n===e||Tr(n,e,t)}}function Fr(t,n){return Us(t)&&ws(n)?Ss(Ls(t),n):function(r){var i=_o(r,t);return i===e&&i===n?Mo(r,t):jr(n,i,3)}}function zr(t,n,r,i,s){t!==n&&gr(n,function(a,o){if(s||(s=new Gn),eo(a))!function(t,n,r,i,s,a,o){var l=Cs(t,r),c=Cs(n,r),d=o.get(c);if(d)Qn(t,r,d);else{var u=a?a(l,c,r+"",t,n,o):e,h=u===e;if(h){var p=Wa(c),f=!p&&Ya(c),m=!p&&!f&&co(c);u=c,p||f||m?Wa(l)?u=l:Ga(l)?u=_i(l):f?(h=!1,u=vi(c,!0)):m?(h=!1,u=Si(c,!0)):u=[]:io(c)||$a(c)?(u=l,$a(l)?u=Uo(l):eo(l)&&!Ka(l)||(u=fs(c))):h=!1}h&&(o.set(c,u),s(u,c,i,a,o),o.delete(c)),Qn(t,r,u)}}(t,n,o,r,zr,i,s);else{var l=i?i(Cs(t,o),a,o+"",t,n,s):e;l===e&&(l=a),Qn(t,o,l)}},Po)}function Br(t,n){var r=t.length;if(r)return gs(n+=n<0?r:0,r)?t[n]:e}function Hr(e,t,n){t=t.length?jt(t,function(e){return Wa(e)?function(t){return vr(t,1===e.length?e[0]:e)}:e}):[il];var r=-1;return t=jt(t,Yt(as())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Lr(e,function(e,n,i){return{criteria:jt(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,s=t.criteria,a=i.length,o=n.length;++r<a;){var l=Ei(i[r],s[r]);if(l)return r>=o?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)})}function $r(e,t,n){for(var r=-1,i=t.length,s={};++r<i;){var a=t[r],o=vr(e,a);n(o,a)&&Kr(s,bi(a,e),o)}return s}function Wr(e,t,n,r){var i=r?Ft:Ot,s=-1,a=t.length,o=e;for(e===t&&(t=_i(t)),n&&(o=jt(e,Yt(n)));++s<a;)for(var l=0,c=t[s],d=n?n(c):c;(l=i(o,d,l,r))>-1;)o!==e&&Ze.call(o,l,1),Ze.call(e,l,1);return e}function Xr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==s){var s=i;gs(i)?Ze.call(e,i,1):ci(e,i)}}return e}function Vr(e,t){return e+xt(xn()*(t-e+1))}function Gr(e,t){var n="";if(!e||t<1||t>l)return n;do{t%2&&(n+=e),(t=xt(t/2))&&(e+=e)}while(t);return n}function Yr(e,t){return Is(Es(e,t,il),e+"")}function qr(e){return qn(Bo(e))}function Zr(e,t){var n=Bo(e);return Rs(n,sr(t,0,n.length))}function Kr(t,n,r,i){if(!eo(t))return t;for(var s=-1,a=(n=bi(n,t)).length,o=a-1,l=t;null!=l&&++s<a;){var c=Ls(n[s]),d=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(s!=o){var u=l[c];(d=i?i(u,c,l):e)===e&&(d=eo(u)?u:gs(n[s+1])?[]:{})}Jn(l,c,d),l=l[c]}return t}var Qr=Mn?function(e,t){return Mn.set(e,t),e}:il,Jr=lt?function(e,t){return lt(e,"toString",{configurable:!0,enumerable:!1,value:tl(t),writable:!0})}:il;function ei(e){return Rs(Bo(e))}function ti(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=xe(i);++r<i;)s[r]=e[r+t];return s}function ni(e,t){var n;return dr(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function ri(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var s=r+i>>>1,a=e[s];null!==a&&!lo(a)&&(n?a<=t:a<t)?r=s+1:i=s}return i}return ii(e,t,il,n)}function ii(t,n,r,i){var s=0,a=null==t?0:t.length;if(0===a)return 0;for(var o=(n=r(n))!=n,l=null===n,c=lo(n),d=n===e;s<a;){var u=xt((s+a)/2),h=r(t[u]),p=h!==e,f=null===h,m=h==h,g=lo(h);if(o)var b=i||m;else b=d?m&&(i||p):l?m&&p&&(i||!f):c?m&&p&&!f&&(i||!g):!f&&!g&&(i?h<=n:h<n);b?s=u+1:a=u}return bn(a,4294967294)}function si(e,t){for(var n=-1,r=e.length,i=0,s=[];++n<r;){var a=e[n],o=t?t(a):a;if(!n||!za(o,l)){var l=o;s[i++]=0===a?0:a}}return s}function ai(e){return"number"==typeof e?e:lo(e)?c:+e}function oi(e){if("string"==typeof e)return e;if(Wa(e))return jt(e,oi)+"";if(lo(e))return Ln?Ln.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function li(e,t,n){var r=-1,i=Mt,s=e.length,a=!0,o=[],l=o;if(n)a=!1,i=It;else if(s>=200){var c=t?null:Gi(e);if(c)return on(c);a=!1,i=Zt,l=new Vn}else l=t?[]:o;e:for(;++r<s;){var d=e[r],u=t?t(d):d;if(d=n||0!==d?d:0,a&&u==u){for(var h=l.length;h--;)if(l[h]===u)continue e;t&&l.push(u),o.push(d)}else i(l,u,n)||(l!==o&&l.push(u),o.push(d))}return o}function ci(e,t){return null==(e=ks(e,t=bi(t,e)))||delete e[Ls(Zs(t))]}function di(e,t,n,r){return Kr(e,t,n(vr(e,t)),r)}function ui(e,t,n,r){for(var i=e.length,s=r?i:-1;(r?s--:++s<i)&&t(e[s],s,e););return n?ti(e,r?0:s,r?s+1:i):ti(e,r?s+1:0,r?i:s)}function hi(e,t){var n=e;return n instanceof Hn&&(n=n.value()),Rt(t,function(e,t){return t.func.apply(t.thisArg,Tt([e],t.args))},n)}function pi(e,t,n){var r=e.length;if(r<2)return r?li(e[0]):[];for(var i=-1,s=xe(r);++i<r;)for(var a=e[i],o=-1;++o<r;)o!=i&&(s[i]=cr(s[i]||a,e[o],t,n));return li(mr(s,1),t,n)}function fi(t,n,r){for(var i=-1,s=t.length,a=n.length,o={};++i<s;){var l=i<a?n[i]:e;r(o,t[i],l)}return o}function mi(e){return Ga(e)?e:[]}function gi(e){return"function"==typeof e?e:il}function bi(e,t){return Wa(e)?e:Us(e,t)?[e]:Ds(yo(e))}var Ui=Yr;function yi(t,n,r){var i=t.length;return r=r===e?i:r,!n&&r>=i?t:ti(t,n,r)}var xi=dt||function(e){return ct.clearTimeout(e)};function vi(e,t){if(t)return e.slice();var n=e.length,r=We?We(n):new e.constructor(n);return e.copy(r),r}function wi(e){var t=new e.constructor(e.byteLength);return new $e(t).set(new $e(e)),t}function Si(e,t){var n=t?wi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ei(t,n){if(t!==n){var r=t!==e,i=null===t,s=t==t,a=lo(t),o=n!==e,l=null===n,c=n==n,d=lo(n);if(!l&&!d&&!a&&t>n||a&&o&&c&&!l&&!d||i&&o&&c||!r&&c||!s)return 1;if(!i&&!a&&!d&&t<n||d&&r&&s&&!i&&!a||l&&r&&s||!o&&s||!c)return-1}return 0}function ki(e,t,n,r){for(var i=-1,s=e.length,a=n.length,o=-1,l=t.length,c=gn(s-a,0),d=xe(l+c),u=!r;++o<l;)d[o]=t[o];for(;++i<a;)(u||i<s)&&(d[n[i]]=e[i]);for(;c--;)d[o++]=e[i++];return d}function Ci(e,t,n,r){for(var i=-1,s=e.length,a=-1,o=n.length,l=-1,c=t.length,d=gn(s-o,0),u=xe(d+c),h=!r;++i<d;)u[i]=e[i];for(var p=i;++l<c;)u[p+l]=t[l];for(;++a<o;)(h||i<s)&&(u[p+n[a]]=e[i++]);return u}function _i(e,t){var n=-1,r=e.length;for(t||(t=xe(r));++n<r;)t[n]=e[n];return t}function Mi(t,n,r,i){var s=!r;r||(r={});for(var a=-1,o=n.length;++a<o;){var l=n[a],c=i?i(r[l],t[l],l,r,t):e;c===e&&(c=t[l]),s?rr(r,l,c):Jn(r,l,c)}return r}function Ii(e,t){return function(n,r){var i=Wa(n)?St:tr,s=t?t():{};return i(n,e,as(r,2),s)}}function ji(t){return Yr(function(n,r){var i=-1,s=r.length,a=s>1?r[s-1]:e,o=s>2?r[2]:e;for(a=t.length>3&&"function"==typeof a?(s--,a):e,o&&bs(r[0],r[1],o)&&(a=s<3?e:a,s=1),n=ke(n);++i<s;){var l=r[i];l&&t(n,l,i,a)}return n})}function Ti(e,t){return function(n,r){if(null==n)return n;if(!Va(n))return e(n,r);for(var i=n.length,s=t?i:-1,a=ke(n);(t?s--:++s<i)&&!1!==r(a[s],s,a););return n}}function Ri(e){return function(t,n,r){for(var i=-1,s=ke(t),a=r(t),o=a.length;o--;){var l=a[e?o:++i];if(!1===n(s[l],l,s))break}return t}}function Pi(t){return function(n){var r=nn(n=yo(n))?cn(n):e,i=r?r[0]:n.charAt(0),s=r?yi(r,1).join(""):n.slice(1);return i[t]()+s}}function Ai(e){return function(t){return Rt(Qo(Wo(t).replace(Ye,"")),e,"")}}function Ni(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Fn(e.prototype),r=e.apply(n,t);return eo(r)?r:n}}function Di(t){return function(n,r,i){var s=ke(n);if(!Va(n)){var a=as(r,3);n=Ro(n),r=function(e){return a(s[e],e,s)}}var o=t(n,r,i);return o>-1?s[a?n[o]:o]:e}}function Li(n){return es(function(r){var i=r.length,s=i,a=Bn.prototype.thru;for(n&&r.reverse();s--;){var o=r[s];if("function"!=typeof o)throw new Me(t);if(a&&!l&&"wrapper"==is(o))var l=new Bn([],!0)}for(s=l?s:i;++s<i;){var c=is(o=r[s]),d="wrapper"==c?rs(o):e;l=d&&ys(d[0])&&424==d[1]&&!d[4].length&&1==d[9]?l[is(d[0])].apply(l,d[3]):1==o.length&&ys(o)?l[c]():l.thru(o)}return function(){var e=arguments,t=e[0];if(l&&1==e.length&&Wa(t))return l.plant(t).value();for(var n=0,s=i?r[n].apply(this,e):t;++n<i;)s=r[n].call(this,s);return s}})}function Oi(t,n,r,i,a,o,l,c,d,u){var h=n&s,p=1&n,f=2&n,m=24&n,g=512&n,b=f?e:Ni(t);return function s(){for(var U=arguments.length,y=xe(U),x=U;x--;)y[x]=arguments[x];if(m)var v=ss(s),w=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(y,v);if(i&&(y=ki(y,i,a,m)),o&&(y=Ci(y,o,l,m)),U-=w,m&&U<u){var S=an(y,v);return Xi(t,n,Oi,s.placeholder,r,y,S,c,d,u-U)}var E=p?r:this,k=f?E[t]:t;return U=y.length,c?y=function(t,n){for(var r=t.length,i=bn(n.length,r),s=_i(t);i--;){var a=n[i];t[i]=gs(a,r)?s[a]:e}return t}(y,c):g&&U>1&&y.reverse(),h&&d<U&&(y.length=d),this&&this!==ct&&this instanceof s&&(k=b||Ni(k)),k.apply(E,y)}}function Fi(e,t){return function(n,r){return function(e,t,n,r){return Ur(e,function(e,i,s){t(r,n(e),i,s)}),r}(n,e,t(r),{})}}function zi(t,n){return function(r,i){var s;if(r===e&&i===e)return n;if(r!==e&&(s=r),i!==e){if(s===e)return i;"string"==typeof r||"string"==typeof i?(r=oi(r),i=oi(i)):(r=ai(r),i=ai(i)),s=t(r,i)}return s}}function Bi(e){return es(function(t){return t=jt(t,Yt(as())),Yr(function(n){var r=this;return e(t,function(e){return wt(e,r,n)})})})}function Hi(t,n){var r=(n=n===e?" ":oi(n)).length;if(r<2)return r?Gr(n,t):n;var i=Gr(n,ft(t/ln(n)));return nn(n)?yi(cn(i),0,t).join(""):i.slice(0,t)}function $i(t){return function(n,r,i){return i&&"number"!=typeof i&&bs(n,r,i)&&(r=i=e),n=fo(n),r===e?(r=n,n=0):r=fo(r),function(e,t,n,r){for(var i=-1,s=gn(ft((t-e)/(n||1)),0),a=xe(s);s--;)a[r?s:++i]=e,e+=n;return a}(n,r,i=i===e?n<r?1:-1:fo(i),t)}}function Wi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=bo(t),n=bo(n)),e(t,n)}}function Xi(t,n,r,s,a,o,l,c,d,u){var h=8&n;n|=h?i:64,4&(n&=~(h?64:i))||(n&=-4);var p=[t,n,a,h?o:e,h?l:e,h?e:o,h?e:l,c,d,u],f=r.apply(e,p);return ys(t)&&_s(f,p),f.placeholder=s,js(f,t,n)}function Vi(e){var t=Ee[e];return function(e,n){if(e=bo(e),(n=null==n?0:bn(mo(n),292))&&pn(e)){var r=(yo(e)+"e").split("e");return+((r=(yo(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Gi=kn&&1/on(new kn([,-0]))[1]==o?function(e){return new kn(e)}:cl;function Yi(e){return function(t){var n=hs(t);return n==y?rn(t):n==E?function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}(t):function(e,t){return jt(t,function(t){return[t,e[t]]})}(t,e(t))}}function qi(n,o,l,c,d,u,h,p){var f=2&o;if(!f&&"function"!=typeof n)throw new Me(t);var m=c?c.length:0;if(m||(o&=-97,c=d=e),h=h===e?h:gn(mo(h),0),p=p===e?p:mo(p),m-=d?d.length:0,64&o){var g=c,b=d;c=d=e}var U=f?e:rs(n),y=[n,o,l,c,d,g,b,u,h,p];if(U&&function(e,t){var n=e[1],i=t[1],o=n|i,l=o<131,c=i==s&&8==n||i==s&&n==a&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==n;if(!l&&!c)return e;1&i&&(e[2]=t[2],o|=1&n?0:4);var d=t[3];if(d){var u=e[3];e[3]=u?ki(u,d,t[4]):d,e[4]=u?an(e[3],r):t[4]}(d=t[5])&&(u=e[5],e[5]=u?Ci(u,d,t[6]):d,e[6]=u?an(e[5],r):t[6]),(d=t[7])&&(e[7]=d),i&s&&(e[8]=null==e[8]?t[8]:bn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o}(y,U),n=y[0],o=y[1],l=y[2],c=y[3],d=y[4],!(p=y[9]=y[9]===e?f?0:n.length:gn(y[9]-m,0))&&24&o&&(o&=-25),o&&1!=o)x=8==o||16==o?function(t,n,r){var i=Ni(t);return function s(){for(var a=arguments.length,o=xe(a),l=a,c=ss(s);l--;)o[l]=arguments[l];var d=a<3&&o[0]!==c&&o[a-1]!==c?[]:an(o,c);return(a-=d.length)<r?Xi(t,n,Oi,s.placeholder,e,o,d,e,e,r-a):wt(this&&this!==ct&&this instanceof s?i:t,this,o)}}(n,o,p):o!=i&&33!=o||d.length?Oi.apply(e,y):function(e,t,n,r){var i=1&t,s=Ni(e);return function t(){for(var a=-1,o=arguments.length,l=-1,c=r.length,d=xe(c+o),u=this&&this!==ct&&this instanceof t?s:e;++l<c;)d[l]=r[l];for(;o--;)d[l++]=arguments[++a];return wt(u,i?n:this,d)}}(n,o,l,c);else var x=function(e,t,n){var r=1&t,i=Ni(e);return function t(){return(this&&this!==ct&&this instanceof t?i:e).apply(r?n:this,arguments)}}(n,o,l);return js((U?Qr:_s)(x,y),n,o)}function Zi(t,n,r,i){return t===e||za(t,Te[r])&&!Ae.call(i,r)?n:t}function Ki(t,n,r,i,s,a){return eo(t)&&eo(n)&&(a.set(n,t),zr(t,n,e,Ki,a),a.delete(n)),t}function Qi(t){return io(t)?e:t}function Ji(t,n,r,i,s,a){var o=1&r,l=t.length,c=n.length;if(l!=c&&!(o&&c>l))return!1;var d=a.get(t),u=a.get(n);if(d&&u)return d==n&&u==t;var h=-1,p=!0,f=2&r?new Vn:e;for(a.set(t,n),a.set(n,t);++h<l;){var m=t[h],g=n[h];if(i)var b=o?i(g,m,h,n,t,a):i(m,g,h,t,n,a);if(b!==e){if(b)continue;p=!1;break}if(f){if(!At(n,function(e,t){if(!Zt(f,t)&&(m===e||s(m,e,r,i,a)))return f.push(t)})){p=!1;break}}else if(m!==g&&!s(m,g,r,i,a)){p=!1;break}}return a.delete(t),a.delete(n),p}function es(t){return Is(Es(t,e,Xs),t+"")}function ts(e){return wr(e,Ro,ds)}function ns(e){return wr(e,Po,us)}var rs=Mn?function(e){return Mn.get(e)}:cl;function is(e){for(var t=e.name+"",n=In[t],r=Ae.call(In,t)?n.length:0;r--;){var i=n[r],s=i.func;if(null==s||s==e)return i.name}return t}function ss(e){return(Ae.call(On,"placeholder")?On:e).placeholder}function as(){var e=On.iteratee||sl;return e=e===sl?Pr:e,arguments.length?e(arguments[0],arguments[1]):e}function os(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function ls(e){for(var t=Ro(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,ws(i)]}return t}function cs(t,n){var r=function(t,n){return null==t?e:t[n]}(t,n);return Rr(r)?r:e}var ds=Nt?function(e){return null==e?[]:(e=ke(e),_t(Nt(e),function(t){return Ge.call(e,t)}))}:gl,us=Nt?function(e){for(var t=[];e;)Tt(t,ds(e)),e=Xe(e);return t}:gl,hs=Sr;function ps(e,t,n){for(var r=-1,i=(t=bi(t,e)).length,s=!1;++r<i;){var a=Ls(t[r]);if(!(s=null!=e&&n(e,a)))break;e=e[a]}return s||++r!=i?s:!!(i=null==e?0:e.length)&&Ja(i)&&gs(a,i)&&(Wa(e)||$a(e))}function fs(e){return"function"!=typeof e.constructor||vs(e)?{}:Fn(Xe(e))}function ms(e){return Wa(e)||$a(e)||!!(Qe&&e&&e[Qe])}function gs(e,t){var n=typeof e;return!!(t=null==t?l:t)&&("number"==n||"symbol"!=n&&fe.test(e))&&e>-1&&e%1==0&&e<t}function bs(e,t,n){if(!eo(n))return!1;var r=typeof t;return!!("number"==r?Va(n)&&gs(t,n.length):"string"==r&&t in n)&&za(n[t],e)}function Us(e,t){if(Wa(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!lo(e))||Z.test(e)||!q.test(e)||null!=t&&e in ke(t)}function ys(e){var t=is(e),n=On[t];if("function"!=typeof n||!(t in Hn.prototype))return!1;if(e===n)return!0;var r=rs(n);return!!r&&e===r[0]}(wn&&hs(new wn(new ArrayBuffer(1)))!=I||Sn&&hs(new Sn)!=y||En&&hs(En.resolve())!=w||kn&&hs(new kn)!=E||Cn&&hs(new Cn)!=_)&&(hs=function(t){var n=Sr(t),r=n==v?t.constructor:e,i=r?Os(r):"";if(i)switch(i){case jn:return I;case Tn:return y;case Rn:return w;case Pn:return E;case An:return _}return n});var xs=Re?Ka:bl;function vs(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Te)}function ws(e){return e==e&&!eo(e)}function Ss(t,n){return function(r){return null!=r&&r[t]===n&&(n!==e||t in ke(r))}}function Es(t,n,r){return n=gn(n===e?t.length-1:n,0),function(){for(var e=arguments,i=-1,s=gn(e.length-n,0),a=xe(s);++i<s;)a[i]=e[n+i];i=-1;for(var o=xe(n+1);++i<n;)o[i]=e[i];return o[n]=r(a),wt(t,this,o)}}function ks(e,t){return t.length<2?e:vr(e,ti(t,0,-1))}function Cs(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var _s=Ts(Qr),Ms=pt||function(e,t){return ct.setTimeout(e,t)},Is=Ts(Jr);function js(e,t,n){var r=t+"";return Is(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ne,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Et(u,function(n){var r="_."+n[0];t&n[1]&&!Mt(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(re);return t?t[1].split(ie):[]}(r),n)))}function Ts(t){var n=0,r=0;return function(){var i=Un(),s=16-(i-r);if(r=i,s>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(e,arguments)}}function Rs(t,n){var r=-1,i=t.length,s=i-1;for(n=n===e?i:n;++r<n;){var a=Vr(r,s),o=t[a];t[a]=t[r],t[r]=o}return t.length=n,t}var Ps,As,Ns,Ds=(Ps=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(K,function(e,n,r,i){t.push(r?i.replace(oe,"$1"):n||e)}),t},As=Aa(Ps,function(e){return 500===Ns.size&&Ns.clear(),e}),Ns=As.cache,As);function Ls(e){if("string"==typeof e||lo(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Os(e){if(null!=e){try{return Pe.call(e)}catch(lA){}try{return e+""}catch(lA){}}return""}function Fs(e){if(e instanceof Hn)return e.clone();var t=new Bn(e.__wrapped__,e.__chain__);return t.__actions__=_i(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var zs=Yr(function(e,t){return Ga(e)?cr(e,mr(t,1,Ga,!0)):[]}),Bs=Yr(function(t,n){var r=Zs(n);return Ga(r)&&(r=e),Ga(t)?cr(t,mr(n,1,Ga,!0),as(r,2)):[]}),Hs=Yr(function(t,n){var r=Zs(n);return Ga(r)&&(r=e),Ga(t)?cr(t,mr(n,1,Ga,!0),e,r):[]});function $s(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:mo(n);return i<0&&(i=gn(r+i,0)),Lt(e,as(t,3),i)}function Ws(t,n,r){var i=null==t?0:t.length;if(!i)return-1;var s=i-1;return r!==e&&(s=mo(r),s=r<0?gn(i+s,0):bn(s,i-1)),Lt(t,as(n,3),s,!0)}function Xs(e){return null!=e&&e.length?mr(e,1):[]}function Vs(t){return t&&t.length?t[0]:e}var Gs=Yr(function(e){var t=jt(e,mi);return t.length&&t[0]===e[0]?_r(t):[]}),Ys=Yr(function(t){var n=Zs(t),r=jt(t,mi);return n===Zs(r)?n=e:r.pop(),r.length&&r[0]===t[0]?_r(r,as(n,2)):[]}),qs=Yr(function(t){var n=Zs(t),r=jt(t,mi);return(n="function"==typeof n?n:e)&&r.pop(),r.length&&r[0]===t[0]?_r(r,e,n):[]});function Zs(t){var n=null==t?0:t.length;return n?t[n-1]:e}var Ks=Yr(Qs);function Qs(e,t){return e&&e.length&&t&&t.length?Wr(e,t):e}var Js=es(function(e,t){var n=null==e?0:e.length,r=ir(e,t);return Xr(e,jt(t,function(e){return gs(e,n)?+e:e}).sort(Ei)),r});function ea(e){return null==e?e:vn.call(e)}var ta=Yr(function(e){return li(mr(e,1,Ga,!0))}),na=Yr(function(t){var n=Zs(t);return Ga(n)&&(n=e),li(mr(t,1,Ga,!0),as(n,2))}),ra=Yr(function(t){var n=Zs(t);return n="function"==typeof n?n:e,li(mr(t,1,Ga,!0),e,n)});function ia(e){if(!e||!e.length)return[];var t=0;return e=_t(e,function(e){if(Ga(e))return t=gn(e.length,t),!0}),Vt(t,function(t){return jt(e,Ht(t))})}function sa(t,n){if(!t||!t.length)return[];var r=ia(t);return null==n?r:jt(r,function(t){return wt(n,e,t)})}var aa=Yr(function(e,t){return Ga(e)?cr(e,t):[]}),oa=Yr(function(e){return pi(_t(e,Ga))}),la=Yr(function(t){var n=Zs(t);return Ga(n)&&(n=e),pi(_t(t,Ga),as(n,2))}),ca=Yr(function(t){var n=Zs(t);return n="function"==typeof n?n:e,pi(_t(t,Ga),e,n)}),da=Yr(ia),ua=Yr(function(t){var n=t.length,r=n>1?t[n-1]:e;return r="function"==typeof r?(t.pop(),r):e,sa(t,r)});function ha(e){var t=On(e);return t.__chain__=!0,t}function pa(e,t){return t(e)}var fa=es(function(t){var n=t.length,r=n?t[0]:0,i=this.__wrapped__,s=function(e){return ir(e,t)};return!(n>1||this.__actions__.length)&&i instanceof Hn&&gs(r)?((i=i.slice(r,+r+(n?1:0))).__actions__.push({func:pa,args:[s],thisArg:e}),new Bn(i,this.__chain__).thru(function(t){return n&&!t.length&&t.push(e),t})):this.thru(s)}),ma=Ii(function(e,t,n){Ae.call(e,n)?++e[n]:rr(e,n,1)}),ga=Di($s),ba=Di(Ws);function Ua(e,t){return(Wa(e)?Et:dr)(e,as(t,3))}function ya(e,t){return(Wa(e)?kt:ur)(e,as(t,3))}var xa=Ii(function(e,t,n){Ae.call(e,n)?e[n].push(t):rr(e,n,[t])}),va=Yr(function(e,t,n){var r=-1,i="function"==typeof t,s=Va(e)?xe(e.length):[];return dr(e,function(e){s[++r]=i?wt(t,e,n):Mr(e,t,n)}),s}),wa=Ii(function(e,t,n){rr(e,n,t)});function Sa(e,t){return(Wa(e)?jt:Lr)(e,as(t,3))}var Ea=Ii(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),ka=Yr(function(e,t){if(null==e)return[];var n=t.length;return n>1&&bs(e,t[0],t[1])?t=[]:n>2&&bs(t[0],t[1],t[2])&&(t=[t[0]]),Hr(e,mr(t,1),[])}),Ca=ut||function(){return ct.Date.now()};function _a(t,n,r){return n=r?e:n,n=t&&null==n?t.length:n,qi(t,s,e,e,e,e,n)}function Ma(n,r){var i;if("function"!=typeof r)throw new Me(t);return n=mo(n),function(){return--n>0&&(i=r.apply(this,arguments)),n<=1&&(r=e),i}}var Ia=Yr(function(e,t,n){var r=1;if(n.length){var s=an(n,ss(Ia));r|=i}return qi(e,r,t,n,s)}),ja=Yr(function(e,t,n){var r=3;if(n.length){var s=an(n,ss(ja));r|=i}return qi(t,r,e,n,s)});function Ta(n,r,i){var s,a,o,l,c,d,u=0,h=!1,p=!1,f=!0;if("function"!=typeof n)throw new Me(t);function m(t){var r=s,i=a;return s=a=e,u=t,l=n.apply(i,r)}function g(t){var n=t-d;return d===e||n>=r||n<0||p&&t-u>=o}function b(){var e=Ca();if(g(e))return U(e);c=Ms(b,function(e){var t=r-(e-d);return p?bn(t,o-(e-u)):t}(e))}function U(t){return c=e,f&&s?m(t):(s=a=e,l)}function y(){var t=Ca(),n=g(t);if(s=arguments,a=this,d=t,n){if(c===e)return function(e){return u=e,c=Ms(b,r),h?m(e):l}(d);if(p)return xi(c),c=Ms(b,r),m(d)}return c===e&&(c=Ms(b,r)),l}return r=bo(r)||0,eo(i)&&(h=!!i.leading,o=(p="maxWait"in i)?gn(bo(i.maxWait)||0,r):o,f="trailing"in i?!!i.trailing:f),y.cancel=function(){c!==e&&xi(c),u=0,s=d=a=c=e},y.flush=function(){return c===e?l:U(Ca())},y}var Ra=Yr(function(e,t){return lr(e,1,t)}),Pa=Yr(function(e,t,n){return lr(e,bo(t)||0,n)});function Aa(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new Me(t);var r=function(){var t=arguments,i=n?n.apply(this,t):t[0],s=r.cache;if(s.has(i))return s.get(i);var a=e.apply(this,t);return r.cache=s.set(i,a)||s,a};return r.cache=new(Aa.Cache||Xn),r}function Na(e){if("function"!=typeof e)throw new Me(t);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Aa.Cache=Xn;var Da=Ui(function(e,t){var n=(t=1==t.length&&Wa(t[0])?jt(t[0],Yt(as())):jt(mr(t,1),Yt(as()))).length;return Yr(function(r){for(var i=-1,s=bn(r.length,n);++i<s;)r[i]=t[i].call(this,r[i]);return wt(e,this,r)})}),La=Yr(function(t,n){var r=an(n,ss(La));return qi(t,i,e,n,r)}),Oa=Yr(function(t,n){var r=an(n,ss(Oa));return qi(t,64,e,n,r)}),Fa=es(function(t,n){return qi(t,a,e,e,e,n)});function za(e,t){return e===t||e!=e&&t!=t}var Ba=Wi(Er),Ha=Wi(function(e,t){return e>=t}),$a=Ir(function(){return arguments}())?Ir:function(e){return to(e)&&Ae.call(e,"callee")&&!Ge.call(e,"callee")},Wa=xe.isArray,Xa=mt?Yt(mt):function(e){return to(e)&&Sr(e)==M};function Va(e){return null!=e&&Ja(e.length)&&!Ka(e)}function Ga(e){return to(e)&&Va(e)}var Ya=$t||bl,qa=gt?Yt(gt):function(e){return to(e)&&Sr(e)==m};function Za(e){if(!to(e))return!1;var t=Sr(e);return t==g||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!io(e)}function Ka(e){if(!eo(e))return!1;var t=Sr(e);return t==b||t==U||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Qa(e){return"number"==typeof e&&e==mo(e)}function Ja(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=l}function eo(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function to(e){return null!=e&&"object"==typeof e}var no=bt?Yt(bt):function(e){return to(e)&&hs(e)==y};function ro(e){return"number"==typeof e||to(e)&&Sr(e)==x}function io(e){if(!to(e)||Sr(e)!=v)return!1;var t=Xe(e);if(null===t)return!0;var n=Ae.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Pe.call(n)==Oe}var so=Ut?Yt(Ut):function(e){return to(e)&&Sr(e)==S},ao=yt?Yt(yt):function(e){return to(e)&&hs(e)==E};function oo(e){return"string"==typeof e||!Wa(e)&&to(e)&&Sr(e)==k}function lo(e){return"symbol"==typeof e||to(e)&&Sr(e)==C}var co=vt?Yt(vt):function(e){return to(e)&&Ja(e.length)&&!!nt[Sr(e)]},uo=Wi(Dr),ho=Wi(function(e,t){return e<=t});function po(e){if(!e)return[];if(Va(e))return oo(e)?cn(e):_i(e);if(it&&e[it])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[it]());var t=hs(e);return(t==y?rn:t==E?on:Bo)(e)}function fo(e){return e?(e=bo(e))===o||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function mo(e){var t=fo(e),n=t%1;return t==t?n?t-n:t:0}function go(e){return e?sr(mo(e),0,d):0}function bo(e){if("number"==typeof e)return e;if(lo(e))return c;if(eo(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=eo(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Gt(e);var n=ue.test(e);return n||pe.test(e)?at(e.slice(2),n?2:8):de.test(e)?c:+e}function Uo(e){return Mi(e,Po(e))}function yo(e){return null==e?"":oi(e)}var xo=ji(function(e,t){if(vs(t)||Va(t))Mi(t,Ro(t),e);else for(var n in t)Ae.call(t,n)&&Jn(e,n,t[n])}),vo=ji(function(e,t){Mi(t,Po(t),e)}),wo=ji(function(e,t,n,r){Mi(t,Po(t),e,r)}),So=ji(function(e,t,n,r){Mi(t,Ro(t),e,r)}),Eo=es(ir),ko=Yr(function(t,n){t=ke(t);var r=-1,i=n.length,s=i>2?n[2]:e;for(s&&bs(n[0],n[1],s)&&(i=1);++r<i;)for(var a=n[r],o=Po(a),l=-1,c=o.length;++l<c;){var d=o[l],u=t[d];(u===e||za(u,Te[d])&&!Ae.call(t,d))&&(t[d]=a[d])}return t}),Co=Yr(function(t){return t.push(e,Ki),wt(No,e,t)});function _o(t,n,r){var i=null==t?e:vr(t,n);return i===e?r:i}function Mo(e,t){return null!=e&&ps(e,t,Cr)}var Io=Fi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Le.call(t)),e[t]=n},tl(il)),jo=Fi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Le.call(t)),Ae.call(e,t)?e[t].push(n):e[t]=[n]},as),To=Yr(Mr);function Ro(e){return Va(e)?Yn(e):Ar(e)}function Po(e){return Va(e)?Yn(e,!0):Nr(e)}var Ao=ji(function(e,t,n){zr(e,t,n)}),No=ji(function(e,t,n,r){zr(e,t,n,r)}),Do=es(function(e,t){var n={};if(null==e)return n;var r=!1;t=jt(t,function(t){return t=bi(t,e),r||(r=t.length>1),t}),Mi(e,ns(e),n),r&&(n=ar(n,7,Qi));for(var i=t.length;i--;)ci(n,t[i]);return n}),Lo=es(function(e,t){return null==e?{}:function(e,t){return $r(e,t,function(t,n){return Mo(e,n)})}(e,t)});function Oo(e,t){if(null==e)return{};var n=jt(ns(e),function(e){return[e]});return t=as(t),$r(e,n,function(e,n){return t(e,n[0])})}var Fo=Yi(Ro),zo=Yi(Po);function Bo(e){return null==e?[]:qt(e,Ro(e))}var Ho=Ai(function(e,t,n){return t=t.toLowerCase(),e+(n?$o(t):t)});function $o(e){return Ko(yo(e).toLowerCase())}function Wo(e){return(e=yo(e))&&e.replace(me,Jt).replace(qe,"")}var Xo=Ai(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Vo=Ai(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Go=Pi("toLowerCase"),Yo=Ai(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),qo=Ai(function(e,t,n){return e+(n?" ":"")+Ko(t)}),Zo=Ai(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Ko=Pi("toUpperCase");function Qo(t,n,r){return t=yo(t),(n=r?e:n)===e?function(e){return Je.test(e)}(t)?function(e){return e.match(Ke)||[]}(t):function(e){return e.match(se)||[]}(t):t.match(n)||[]}var Jo=Yr(function(t,n){try{return wt(t,e,n)}catch(lA){return Za(lA)?lA:new we(lA)}}),el=es(function(e,t){return Et(t,function(t){t=Ls(t),rr(e,t,Ia(e[t],e))}),e});function tl(e){return function(){return e}}var nl=Li(),rl=Li(!0);function il(e){return e}function sl(e){return Pr("function"==typeof e?e:ar(e,1))}var al=Yr(function(e,t){return function(n){return Mr(n,e,t)}}),ol=Yr(function(e,t){return function(n){return Mr(e,n,t)}});function ll(e,t,n){var r=Ro(t),i=xr(t,r);null!=n||eo(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=xr(t,Ro(t)));var s=!(eo(n)&&"chain"in n&&!n.chain),a=Ka(e);return Et(i,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(s||t){var n=e(this.__wrapped__);return(n.__actions__=_i(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Tt([this.value()],arguments))})}),e}function cl(){}var dl=Bi(jt),ul=Bi(Ct),hl=Bi(At);function pl(e){return Us(e)?Ht(Ls(e)):function(e){return function(t){return vr(t,e)}}(e)}var fl=$i(),ml=$i(!0);function gl(){return[]}function bl(){return!1}var Ul,yl=zi(function(e,t){return e+t},0),xl=Vi("ceil"),vl=zi(function(e,t){return e/t},1),wl=Vi("floor"),Sl=zi(function(e,t){return e*t},1),El=Vi("round"),kl=zi(function(e,t){return e-t},0);return On.after=function(e,n){if("function"!=typeof n)throw new Me(t);return e=mo(e),function(){if(--e<1)return n.apply(this,arguments)}},On.ary=_a,On.assign=xo,On.assignIn=vo,On.assignInWith=wo,On.assignWith=So,On.at=Eo,On.before=Ma,On.bind=Ia,On.bindAll=el,On.bindKey=ja,On.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Wa(e)?e:[e]},On.chain=ha,On.chunk=function(t,n,r){n=(r?bs(t,n,r):n===e)?1:gn(mo(n),0);var i=null==t?0:t.length;if(!i||n<1)return[];for(var s=0,a=0,o=xe(ft(i/n));s<i;)o[a++]=ti(t,s,s+=n);return o},On.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var s=e[t];s&&(i[r++]=s)}return i},On.concat=function(){var e=arguments.length;if(!e)return[];for(var t=xe(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Tt(Wa(n)?_i(n):[n],mr(t,1))},On.cond=function(e){var n=null==e?0:e.length,r=as();return e=n?jt(e,function(e){if("function"!=typeof e[1])throw new Me(t);return[r(e[0]),e[1]]}):[],Yr(function(t){for(var r=-1;++r<n;){var i=e[r];if(wt(i[0],this,t))return wt(i[1],this,t)}})},On.conforms=function(e){return function(e){var t=Ro(e);return function(n){return or(n,e,t)}}(ar(e,1))},On.constant=tl,On.countBy=ma,On.create=function(e,t){var n=Fn(e);return null==t?n:nr(n,t)},On.curry=function t(n,r,i){var s=qi(n,8,e,e,e,e,e,r=i?e:r);return s.placeholder=t.placeholder,s},On.curryRight=function t(n,r,i){var s=qi(n,16,e,e,e,e,e,r=i?e:r);return s.placeholder=t.placeholder,s},On.debounce=Ta,On.defaults=ko,On.defaultsDeep=Co,On.defer=Ra,On.delay=Pa,On.difference=zs,On.differenceBy=Bs,On.differenceWith=Hs,On.drop=function(t,n,r){var i=null==t?0:t.length;return i?ti(t,(n=r||n===e?1:mo(n))<0?0:n,i):[]},On.dropRight=function(t,n,r){var i=null==t?0:t.length;return i?ti(t,0,(n=i-(n=r||n===e?1:mo(n)))<0?0:n):[]},On.dropRightWhile=function(e,t){return e&&e.length?ui(e,as(t,3),!0,!0):[]},On.dropWhile=function(e,t){return e&&e.length?ui(e,as(t,3),!0):[]},On.fill=function(t,n,r,i){var s=null==t?0:t.length;return s?(r&&"number"!=typeof r&&bs(t,n,r)&&(r=0,i=s),function(t,n,r,i){var s=t.length;for((r=mo(r))<0&&(r=-r>s?0:s+r),(i=i===e||i>s?s:mo(i))<0&&(i+=s),i=r>i?0:go(i);r<i;)t[r++]=n;return t}(t,n,r,i)):[]},On.filter=function(e,t){return(Wa(e)?_t:fr)(e,as(t,3))},On.flatMap=function(e,t){return mr(Sa(e,t),1)},On.flatMapDeep=function(e,t){return mr(Sa(e,t),o)},On.flatMapDepth=function(t,n,r){return r=r===e?1:mo(r),mr(Sa(t,n),r)},On.flatten=Xs,On.flattenDeep=function(e){return null!=e&&e.length?mr(e,o):[]},On.flattenDepth=function(t,n){return null!=t&&t.length?mr(t,n=n===e?1:mo(n)):[]},On.flip=function(e){return qi(e,512)},On.flow=nl,On.flowRight=rl,On.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},On.functions=function(e){return null==e?[]:xr(e,Ro(e))},On.functionsIn=function(e){return null==e?[]:xr(e,Po(e))},On.groupBy=xa,On.initial=function(e){return null!=e&&e.length?ti(e,0,-1):[]},On.intersection=Gs,On.intersectionBy=Ys,On.intersectionWith=qs,On.invert=Io,On.invertBy=jo,On.invokeMap=va,On.iteratee=sl,On.keyBy=wa,On.keys=Ro,On.keysIn=Po,On.map=Sa,On.mapKeys=function(e,t){var n={};return t=as(t,3),Ur(e,function(e,r,i){rr(n,t(e,r,i),e)}),n},On.mapValues=function(e,t){var n={};return t=as(t,3),Ur(e,function(e,r,i){rr(n,r,t(e,r,i))}),n},On.matches=function(e){return Or(ar(e,1))},On.matchesProperty=function(e,t){return Fr(e,ar(t,1))},On.memoize=Aa,On.merge=Ao,On.mergeWith=No,On.method=al,On.methodOf=ol,On.mixin=ll,On.negate=Na,On.nthArg=function(e){return e=mo(e),Yr(function(t){return Br(t,e)})},On.omit=Do,On.omitBy=function(e,t){return Oo(e,Na(as(t)))},On.once=function(e){return Ma(2,e)},On.orderBy=function(t,n,r,i){return null==t?[]:(Wa(n)||(n=null==n?[]:[n]),Wa(r=i?e:r)||(r=null==r?[]:[r]),Hr(t,n,r))},On.over=dl,On.overArgs=Da,On.overEvery=ul,On.overSome=hl,On.partial=La,On.partialRight=Oa,On.partition=Ea,On.pick=Lo,On.pickBy=Oo,On.property=pl,On.propertyOf=function(t){return function(n){return null==t?e:vr(t,n)}},On.pull=Ks,On.pullAll=Qs,On.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Wr(e,t,as(n,2)):e},On.pullAllWith=function(t,n,r){return t&&t.length&&n&&n.length?Wr(t,n,e,r):t},On.pullAt=Js,On.range=fl,On.rangeRight=ml,On.rearg=Fa,On.reject=function(e,t){return(Wa(e)?_t:fr)(e,Na(as(t,3)))},On.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],s=e.length;for(t=as(t,3);++r<s;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Xr(e,i),n},On.rest=function(n,r){if("function"!=typeof n)throw new Me(t);return Yr(n,r=r===e?r:mo(r))},On.reverse=ea,On.sampleSize=function(t,n,r){return n=(r?bs(t,n,r):n===e)?1:mo(n),(Wa(t)?Zn:Zr)(t,n)},On.set=function(e,t,n){return null==e?e:Kr(e,t,n)},On.setWith=function(t,n,r,i){return i="function"==typeof i?i:e,null==t?t:Kr(t,n,r,i)},On.shuffle=function(e){return(Wa(e)?Kn:ei)(e)},On.slice=function(t,n,r){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&bs(t,n,r)?(n=0,r=i):(n=null==n?0:mo(n),r=r===e?i:mo(r)),ti(t,n,r)):[]},On.sortBy=ka,On.sortedUniq=function(e){return e&&e.length?si(e):[]},On.sortedUniqBy=function(e,t){return e&&e.length?si(e,as(t,2)):[]},On.split=function(t,n,r){return r&&"number"!=typeof r&&bs(t,n,r)&&(n=r=e),(r=r===e?d:r>>>0)?(t=yo(t))&&("string"==typeof n||null!=n&&!so(n))&&!(n=oi(n))&&nn(t)?yi(cn(t),0,r):t.split(n,r):[]},On.spread=function(e,n){if("function"!=typeof e)throw new Me(t);return n=null==n?0:gn(mo(n),0),Yr(function(t){var r=t[n],i=yi(t,0,n);return r&&Tt(i,r),wt(e,this,i)})},On.tail=function(e){var t=null==e?0:e.length;return t?ti(e,1,t):[]},On.take=function(t,n,r){return t&&t.length?ti(t,0,(n=r||n===e?1:mo(n))<0?0:n):[]},On.takeRight=function(t,n,r){var i=null==t?0:t.length;return i?ti(t,(n=i-(n=r||n===e?1:mo(n)))<0?0:n,i):[]},On.takeRightWhile=function(e,t){return e&&e.length?ui(e,as(t,3),!1,!0):[]},On.takeWhile=function(e,t){return e&&e.length?ui(e,as(t,3)):[]},On.tap=function(e,t){return t(e),e},On.throttle=function(e,n,r){var i=!0,s=!0;if("function"!=typeof e)throw new Me(t);return eo(r)&&(i="leading"in r?!!r.leading:i,s="trailing"in r?!!r.trailing:s),Ta(e,n,{leading:i,maxWait:n,trailing:s})},On.thru=pa,On.toArray=po,On.toPairs=Fo,On.toPairsIn=zo,On.toPath=function(e){return Wa(e)?jt(e,Ls):lo(e)?[e]:_i(Ds(yo(e)))},On.toPlainObject=Uo,On.transform=function(e,t,n){var r=Wa(e),i=r||Ya(e)||co(e);if(t=as(t,4),null==n){var s=e&&e.constructor;n=i?r?new s:[]:eo(e)&&Ka(s)?Fn(Xe(e)):{}}return(i?Et:Ur)(e,function(e,r,i){return t(n,e,r,i)}),n},On.unary=function(e){return _a(e,1)},On.union=ta,On.unionBy=na,On.unionWith=ra,On.uniq=function(e){return e&&e.length?li(e):[]},On.uniqBy=function(e,t){return e&&e.length?li(e,as(t,2)):[]},On.uniqWith=function(t,n){return n="function"==typeof n?n:e,t&&t.length?li(t,e,n):[]},On.unset=function(e,t){return null==e||ci(e,t)},On.unzip=ia,On.unzipWith=sa,On.update=function(e,t,n){return null==e?e:di(e,t,gi(n))},On.updateWith=function(t,n,r,i){return i="function"==typeof i?i:e,null==t?t:di(t,n,gi(r),i)},On.values=Bo,On.valuesIn=function(e){return null==e?[]:qt(e,Po(e))},On.without=aa,On.words=Qo,On.wrap=function(e,t){return La(gi(t),e)},On.xor=oa,On.xorBy=la,On.xorWith=ca,On.zip=da,On.zipObject=function(e,t){return fi(e||[],t||[],Jn)},On.zipObjectDeep=function(e,t){return fi(e||[],t||[],Kr)},On.zipWith=ua,On.entries=Fo,On.entriesIn=zo,On.extend=vo,On.extendWith=wo,ll(On,On),On.add=yl,On.attempt=Jo,On.camelCase=Ho,On.capitalize=$o,On.ceil=xl,On.clamp=function(t,n,r){return r===e&&(r=n,n=e),r!==e&&(r=(r=bo(r))==r?r:0),n!==e&&(n=(n=bo(n))==n?n:0),sr(bo(t),n,r)},On.clone=function(e){return ar(e,4)},On.cloneDeep=function(e){return ar(e,5)},On.cloneDeepWith=function(t,n){return ar(t,5,n="function"==typeof n?n:e)},On.cloneWith=function(t,n){return ar(t,4,n="function"==typeof n?n:e)},On.conformsTo=function(e,t){return null==t||or(e,t,Ro(t))},On.deburr=Wo,On.defaultTo=function(e,t){return null==e||e!=e?t:e},On.divide=vl,On.endsWith=function(t,n,r){t=yo(t),n=oi(n);var i=t.length,s=r=r===e?i:sr(mo(r),0,i);return(r-=n.length)>=0&&t.slice(r,s)==n},On.eq=za,On.escape=function(e){return(e=yo(e))&&X.test(e)?e.replace($,en):e},On.escapeRegExp=function(e){return(e=yo(e))&&J.test(e)?e.replace(Q,"\\$&"):e},On.every=function(t,n,r){var i=Wa(t)?Ct:hr;return r&&bs(t,n,r)&&(n=e),i(t,as(n,3))},On.find=ga,On.findIndex=$s,On.findKey=function(e,t){return Dt(e,as(t,3),Ur)},On.findLast=ba,On.findLastIndex=Ws,On.findLastKey=function(e,t){return Dt(e,as(t,3),yr)},On.floor=wl,On.forEach=Ua,On.forEachRight=ya,On.forIn=function(e,t){return null==e?e:gr(e,as(t,3),Po)},On.forInRight=function(e,t){return null==e?e:br(e,as(t,3),Po)},On.forOwn=function(e,t){return e&&Ur(e,as(t,3))},On.forOwnRight=function(e,t){return e&&yr(e,as(t,3))},On.get=_o,On.gt=Ba,On.gte=Ha,On.has=function(e,t){return null!=e&&ps(e,t,kr)},On.hasIn=Mo,On.head=Vs,On.identity=il,On.includes=function(e,t,n,r){e=Va(e)?e:Bo(e),n=n&&!r?mo(n):0;var i=e.length;return n<0&&(n=gn(i+n,0)),oo(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Ot(e,t,n)>-1},On.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:mo(n);return i<0&&(i=gn(r+i,0)),Ot(e,t,i)},On.inRange=function(t,n,r){return n=fo(n),r===e?(r=n,n=0):r=fo(r),function(e,t,n){return e>=bn(t,n)&&e<gn(t,n)}(t=bo(t),n,r)},On.invoke=To,On.isArguments=$a,On.isArray=Wa,On.isArrayBuffer=Xa,On.isArrayLike=Va,On.isArrayLikeObject=Ga,On.isBoolean=function(e){return!0===e||!1===e||to(e)&&Sr(e)==f},On.isBuffer=Ya,On.isDate=qa,On.isElement=function(e){return to(e)&&1===e.nodeType&&!io(e)},On.isEmpty=function(e){if(null==e)return!0;if(Va(e)&&(Wa(e)||"string"==typeof e||"function"==typeof e.splice||Ya(e)||co(e)||$a(e)))return!e.length;var t=hs(e);if(t==y||t==E)return!e.size;if(vs(e))return!Ar(e).length;for(var n in e)if(Ae.call(e,n))return!1;return!0},On.isEqual=function(e,t){return jr(e,t)},On.isEqualWith=function(t,n,r){var i=(r="function"==typeof r?r:e)?r(t,n):e;return i===e?jr(t,n,e,r):!!i},On.isError=Za,On.isFinite=function(e){return"number"==typeof e&&pn(e)},On.isFunction=Ka,On.isInteger=Qa,On.isLength=Ja,On.isMap=no,On.isMatch=function(e,t){return e===t||Tr(e,t,ls(t))},On.isMatchWith=function(t,n,r){return r="function"==typeof r?r:e,Tr(t,n,ls(n),r)},On.isNaN=function(e){return ro(e)&&e!=+e},On.isNative=function(e){if(xs(e))throw new we("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Rr(e)},On.isNil=function(e){return null==e},On.isNull=function(e){return null===e},On.isNumber=ro,On.isObject=eo,On.isObjectLike=to,On.isPlainObject=io,On.isRegExp=so,On.isSafeInteger=function(e){return Qa(e)&&e>=-9007199254740991&&e<=l},On.isSet=ao,On.isString=oo,On.isSymbol=lo,On.isTypedArray=co,On.isUndefined=function(t){return t===e},On.isWeakMap=function(e){return to(e)&&hs(e)==_},On.isWeakSet=function(e){return to(e)&&"[object WeakSet]"==Sr(e)},On.join=function(e,t){return null==e?"":fn.call(e,t)},On.kebabCase=Xo,On.last=Zs,On.lastIndexOf=function(t,n,r){var i=null==t?0:t.length;if(!i)return-1;var s=i;return r!==e&&(s=(s=mo(r))<0?gn(i+s,0):bn(s,i-1)),n==n?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(t,n,s):Lt(t,zt,s,!0)},On.lowerCase=Vo,On.lowerFirst=Go,On.lt=uo,On.lte=ho,On.max=function(t){return t&&t.length?pr(t,il,Er):e},On.maxBy=function(t,n){return t&&t.length?pr(t,as(n,2),Er):e},On.mean=function(e){return Bt(e,il)},On.meanBy=function(e,t){return Bt(e,as(t,2))},On.min=function(t){return t&&t.length?pr(t,il,Dr):e},On.minBy=function(t,n){return t&&t.length?pr(t,as(n,2),Dr):e},On.stubArray=gl,On.stubFalse=bl,On.stubObject=function(){return{}},On.stubString=function(){return""},On.stubTrue=function(){return!0},On.multiply=Sl,On.nth=function(t,n){return t&&t.length?Br(t,mo(n)):e},On.noConflict=function(){return ct._===this&&(ct._=Fe),this},On.noop=cl,On.now=Ca,On.pad=function(e,t,n){e=yo(e);var r=(t=mo(t))?ln(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Hi(xt(i),n)+e+Hi(ft(i),n)},On.padEnd=function(e,t,n){e=yo(e);var r=(t=mo(t))?ln(e):0;return t&&r<t?e+Hi(t-r,n):e},On.padStart=function(e,t,n){e=yo(e);var r=(t=mo(t))?ln(e):0;return t&&r<t?Hi(t-r,n)+e:e},On.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),yn(yo(e).replace(ee,""),t||0)},On.random=function(t,n,r){if(r&&"boolean"!=typeof r&&bs(t,n,r)&&(n=r=e),r===e&&("boolean"==typeof n?(r=n,n=e):"boolean"==typeof t&&(r=t,t=e)),t===e&&n===e?(t=0,n=1):(t=fo(t),n===e?(n=t,t=0):n=fo(n)),t>n){var i=t;t=n,n=i}if(r||t%1||n%1){var s=xn();return bn(t+s*(n-t+st("1e-"+((s+"").length-1))),n)}return Vr(t,n)},On.reduce=function(e,t,n){var r=Wa(e)?Rt:Wt,i=arguments.length<3;return r(e,as(t,4),n,i,dr)},On.reduceRight=function(e,t,n){var r=Wa(e)?Pt:Wt,i=arguments.length<3;return r(e,as(t,4),n,i,ur)},On.repeat=function(t,n,r){return n=(r?bs(t,n,r):n===e)?1:mo(n),Gr(yo(t),n)},On.replace=function(){var e=arguments,t=yo(e[0]);return e.length<3?t:t.replace(e[1],e[2])},On.result=function(t,n,r){var i=-1,s=(n=bi(n,t)).length;for(s||(s=1,t=e);++i<s;){var a=null==t?e:t[Ls(n[i])];a===e&&(i=s,a=r),t=Ka(a)?a.call(t):a}return t},On.round=El,On.runInContext=te,On.sample=function(e){return(Wa(e)?qn:qr)(e)},On.size=function(e){if(null==e)return 0;if(Va(e))return oo(e)?ln(e):e.length;var t=hs(e);return t==y||t==E?e.size:Ar(e).length},On.snakeCase=Yo,On.some=function(t,n,r){var i=Wa(t)?At:ni;return r&&bs(t,n,r)&&(n=e),i(t,as(n,3))},On.sortedIndex=function(e,t){return ri(e,t)},On.sortedIndexBy=function(e,t,n){return ii(e,t,as(n,2))},On.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ri(e,t);if(r<n&&za(e[r],t))return r}return-1},On.sortedLastIndex=function(e,t){return ri(e,t,!0)},On.sortedLastIndexBy=function(e,t,n){return ii(e,t,as(n,2),!0)},On.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=ri(e,t,!0)-1;if(za(e[n],t))return n}return-1},On.startCase=qo,On.startsWith=function(e,t,n){return e=yo(e),n=null==n?0:sr(mo(n),0,e.length),t=oi(t),e.slice(n,n+t.length)==t},On.subtract=kl,On.sum=function(e){return e&&e.length?Xt(e,il):0},On.sumBy=function(e,t){return e&&e.length?Xt(e,as(t,2)):0},On.template=function(t,n,r){var i=On.templateSettings;r&&bs(t,n,r)&&(n=e),t=yo(t),n=wo({},n,i,Zi);var s,a,o=wo({},n.imports,i.imports,Zi),l=Ro(o),c=qt(o,l),d=0,u=n.interpolate||ge,h="__p += '",p=Ce((n.escape||ge).source+"|"+u.source+"|"+(u===Y?le:ge).source+"|"+(n.evaluate||ge).source+"|$","g"),f="//# sourceURL="+(Ae.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tt+"]")+"\n";t.replace(p,function(e,n,r,i,o,l){return r||(r=i),h+=t.slice(d,l).replace(be,tn),n&&(s=!0,h+="' +\n__e("+n+") +\n'"),o&&(a=!0,h+="';\n"+o+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),d=l+e.length,e}),h+="';\n";var m=Ae.call(n,"variable")&&n.variable;if(m){if(ae.test(m))throw new we("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(a?h.replace(F,""):h).replace(z,"$1").replace(B,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Jo(function(){return Se(l,f+"return "+h).apply(e,c)});if(g.source=h,Za(g))throw g;return g},On.times=function(e,t){if((e=mo(e))<1||e>l)return[];var n=d,r=bn(e,d);t=as(t),e-=d;for(var i=Vt(r,t);++n<e;)t(n);return i},On.toFinite=fo,On.toInteger=mo,On.toLength=go,On.toLower=function(e){return yo(e).toLowerCase()},On.toNumber=bo,On.toSafeInteger=function(e){return e?sr(mo(e),-9007199254740991,l):0===e?e:0},On.toString=yo,On.toUpper=function(e){return yo(e).toUpperCase()},On.trim=function(t,n,r){if((t=yo(t))&&(r||n===e))return Gt(t);if(!t||!(n=oi(n)))return t;var i=cn(t),s=cn(n);return yi(i,Kt(i,s),Qt(i,s)+1).join("")},On.trimEnd=function(t,n,r){if((t=yo(t))&&(r||n===e))return t.slice(0,dn(t)+1);if(!t||!(n=oi(n)))return t;var i=cn(t);return yi(i,0,Qt(i,cn(n))+1).join("")},On.trimStart=function(t,n,r){if((t=yo(t))&&(r||n===e))return t.replace(ee,"");if(!t||!(n=oi(n)))return t;var i=cn(t);return yi(i,Kt(i,cn(n))).join("")},On.truncate=function(t,n){var r=30,i="...";if(eo(n)){var s="separator"in n?n.separator:s;r="length"in n?mo(n.length):r,i="omission"in n?oi(n.omission):i}var a=(t=yo(t)).length;if(nn(t)){var o=cn(t);a=o.length}if(r>=a)return t;var l=r-ln(i);if(l<1)return i;var c=o?yi(o,0,l).join(""):t.slice(0,l);if(s===e)return c+i;if(o&&(l+=c.length-l),so(s)){if(t.slice(l).search(s)){var d,u=c;for(s.global||(s=Ce(s.source,yo(ce.exec(s))+"g")),s.lastIndex=0;d=s.exec(u);)var h=d.index;c=c.slice(0,h===e?l:h)}}else if(t.indexOf(oi(s),l)!=l){var p=c.lastIndexOf(s);p>-1&&(c=c.slice(0,p))}return c+i},On.unescape=function(e){return(e=yo(e))&&W.test(e)?e.replace(H,un):e},On.uniqueId=function(e){var t=++Ne;return yo(e)+t},On.upperCase=Zo,On.upperFirst=Ko,On.each=Ua,On.eachRight=ya,On.first=Vs,ll(On,(Ul={},Ur(On,function(e,t){Ae.call(On.prototype,t)||(Ul[t]=e)}),Ul),{chain:!1}),On.VERSION="4.17.21",Et(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){On[e].placeholder=On}),Et(["drop","take"],function(t,n){Hn.prototype[t]=function(r){r=r===e?1:gn(mo(r),0);var i=this.__filtered__&&!n?new Hn(this):this.clone();return i.__filtered__?i.__takeCount__=bn(r,i.__takeCount__):i.__views__.push({size:bn(r,d),type:t+(i.__dir__<0?"Right":"")}),i},Hn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Et(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;Hn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:as(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),Et(["head","last"],function(e,t){var n="take"+(t?"Right":"");Hn.prototype[e]=function(){return this[n](1).value()[0]}}),Et(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Hn.prototype[e]=function(){return this.__filtered__?new Hn(this):this[n](1)}}),Hn.prototype.compact=function(){return this.filter(il)},Hn.prototype.find=function(e){return this.filter(e).head()},Hn.prototype.findLast=function(e){return this.reverse().find(e)},Hn.prototype.invokeMap=Yr(function(e,t){return"function"==typeof e?new Hn(this):this.map(function(n){return Mr(n,e,t)})}),Hn.prototype.reject=function(e){return this.filter(Na(as(e)))},Hn.prototype.slice=function(t,n){t=mo(t);var r=this;return r.__filtered__&&(t>0||n<0)?new Hn(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),n!==e&&(r=(n=mo(n))<0?r.dropRight(-n):r.take(n-t)),r)},Hn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Hn.prototype.toArray=function(){return this.take(d)},Ur(Hn.prototype,function(t,n){var r=/^(?:filter|find|map|reject)|While$/.test(n),i=/^(?:head|last)$/.test(n),s=On[i?"take"+("last"==n?"Right":""):n],a=i||/^find/.test(n);s&&(On.prototype[n]=function(){var n=this.__wrapped__,o=i?[1]:arguments,l=n instanceof Hn,c=o[0],d=l||Wa(n),u=function(e){var t=s.apply(On,Tt([e],o));return i&&h?t[0]:t};d&&r&&"function"==typeof c&&1!=c.length&&(l=d=!1);var h=this.__chain__,p=!!this.__actions__.length,f=a&&!h,m=l&&!p;if(!a&&d){n=m?n:new Hn(this);var g=t.apply(n,o);return g.__actions__.push({func:pa,args:[u],thisArg:e}),new Bn(g,h)}return f&&m?t.apply(this,o):(g=this.thru(u),f?i?g.value()[0]:g.value():g)})}),Et(["pop","push","shift","sort","splice","unshift"],function(e){var t=Ie[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);On.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Wa(i)?i:[],e)}return this[n](function(n){return t.apply(Wa(n)?n:[],e)})}}),Ur(Hn.prototype,function(e,t){var n=On[t];if(n){var r=n.name+"";Ae.call(In,r)||(In[r]=[]),In[r].push({name:t,func:n})}}),In[Oi(e,2).name]=[{name:"wrapper",func:e}],Hn.prototype.clone=function(){var e=new Hn(this.__wrapped__);return e.__actions__=_i(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=_i(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=_i(this.__views__),e},Hn.prototype.reverse=function(){if(this.__filtered__){var e=new Hn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Hn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Wa(e),r=t<0,i=n?e.length:0,s=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var s=n[r],a=s.size;switch(s.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=bn(t,e+a);break;case"takeRight":e=gn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=s.start,o=s.end,l=o-a,c=r?o:a-1,d=this.__iteratees__,u=d.length,h=0,p=bn(l,this.__takeCount__);if(!n||!r&&i==l&&p==l)return hi(e,this.__actions__);var f=[];e:for(;l--&&h<p;){for(var m=-1,g=e[c+=t];++m<u;){var b=d[m],U=b.iteratee,y=b.type,x=U(g);if(2==y)g=x;else if(!x){if(1==y)continue e;break e}}f[h++]=g}return f},On.prototype.at=fa,On.prototype.chain=function(){return ha(this)},On.prototype.commit=function(){return new Bn(this.value(),this.__chain__)},On.prototype.next=function(){this.__values__===e&&(this.__values__=po(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?e:this.__values__[this.__index__++]}},On.prototype.plant=function(t){for(var n,r=this;r instanceof zn;){var i=Fs(r);i.__index__=0,i.__values__=e,n?s.__wrapped__=i:n=i;var s=i;r=r.__wrapped__}return s.__wrapped__=t,n},On.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Hn){var n=t;return this.__actions__.length&&(n=new Hn(this)),(n=n.reverse()).__actions__.push({func:pa,args:[ea],thisArg:e}),new Bn(n,this.__chain__)}return this.thru(ea)},On.prototype.toJSON=On.prototype.valueOf=On.prototype.value=function(){return hi(this.__wrapped__,this.__actions__)},On.prototype.first=On.prototype.head,it&&(On.prototype[it]=function(){return this}),On}();ut?((ut.exports=hn)._=hn,dt._=hn):ct._=hn}.call(lr.exports)),lr.exports);const hr="jwt_token",pr={getToken:()=>localStorage.getItem(hr),setToken:e=>{localStorage.setItem(hr,e)},removeToken:()=>{localStorage.removeItem(hr)},hasToken:()=>!!localStorage.getItem(hr)};class fr extends Bt{ws=null;_status="disconnected";config=null;get status(){return this._status}get session(){return this.ws?{}:null}getConfig(){return{...this.config}}constructor(){super(),this.send=this.send.bind(this)}log(e,t){const n={date:new Date,type:e,message:t};this.emit("log",n)}async connect(e){if("connected"===this._status||"connecting"===this._status)return!1;this._status="connecting",this.config=e;const t=pr.getToken();if(!t){this._status="disconnected";const e=new ErrorEvent("error",{message:"Authentication required"});return this.emit("error",e),!1}const n=`ws://localhost:8767?token=${encodeURIComponent(t)}`;return this.ws=new WebSocket(n),this.ws.onopen=()=>{this.ws.send(JSON.stringify({type:"connect",config:e}))},this.ws.onmessage=e=>{try{const t=JSON.parse(e.data);if("open"===t.type)this._status="connected",this.log("client.open","Connected"),this.emit("open");else if("close"===t.type){this._status="disconnected";const e=new CloseEvent("close",{reason:t.reason});this.log("server.close","disconnected "+(t.reason?`with reason: ${t.reason}`:"")),this.emit("close",e)}else if("error"===t.type){const e=new ErrorEvent("error",{message:t.error});this.log("server.error",t.error),this.emit("error",e)}else"message"===t.type&&this.processGeminiMessage(t.data)}catch(t){}},this.ws.onerror=e=>{this._status="disconnected"},this.ws.onclose=()=>{"disconnected"!==this._status&&(this._status="disconnected",this.emit("close",new CloseEvent("close")))},!0}processGeminiMessage(e){if(e.setupComplete)return this.log("server.send","setupComplete"),void this.emit("setupcomplete");if(e.toolCall)return this.log("server.toolCall",e),void this.emit("toolcall",e.toolCall);if(e.toolCallCancellation)return this.log("server.toolCallCancellation",e),void this.emit("toolcallcancellation",e.toolCallCancellation);if(e.serverContent){const{serverContent:t}=e;if("interrupted"in t)return this.log("server.content","interrupted"),void this.emit("interrupted");if("turnComplete"in t&&(this.log("server.content","turnComplete"),this.emit("turncomplete")),"modelTurn"in t){let n=t.modelTurn?.parts||[];const r=n.filter(e=>e.inlineData&&e.inlineData.mimeType?.startsWith("audio/pcm")),i=r.map(e=>e.inlineData?.data),s=ur.difference(n,r);if(i.forEach(e=>{if(e){const t=function(e){var t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer}(e);this.emit("audio",t),this.log("server.audio",`buffer (${t.byteLength})`)}}),!s.length)return;n=s;const a={modelTurn:{parts:n}};this.emit("content",a),this.log("server.content",e)}}}disconnect(){return!!this.ws&&(this.ws.send(JSON.stringify({type:"disconnect"})),this.ws.close(),this.ws=null,this._status="disconnected",this.log("client.close","Disconnected"),!0)}sendRealtimeInput(e){if(!this.ws||"connected"!==this._status)return;let t=!1,n=!1;for(const i of e)if(this.ws.send(JSON.stringify({type:"realtimeInput",data:i})),i.mimeType.includes("audio")&&(t=!0),i.mimeType.includes("image")&&(n=!0),t&&n)break;const r=t&&n?"audio + video":t?"audio":n?"video":"unknown";this.log("client.realtimeInput",r)}sendToolResponse(e){this.ws&&"connected"===this._status&&e.functionResponses&&e.functionResponses.length&&(this.ws.send(JSON.stringify({type:"toolResponse",data:e})),this.log("client.toolResponse",e))}send(e,t=!0){this.ws&&"connected"===this._status&&(this.ws.send(JSON.stringify({type:"send",parts:Array.isArray(e)?e:[e],turnComplete:t})),this.log("client.send",{turns:Array.isArray(e)?e:[e],turnComplete:t}))}}const mr=new Map,gr=(e,t)=>{const n=new Blob([`registerProcessor("${e}", ${t})`],{type:"application/javascript"});return URL.createObjectURL(n)};class br{constructor(e){this.context=e,this.gainNode=this.context.createGain(),this.source=this.context.createBufferSource(),this.gainNode.connect(this.context.destination),this.addPCM16=this.addPCM16.bind(this)}sampleRate=24e3;bufferSize=7680;audioQueue=[];isPlaying=!1;isStreamComplete=!1;checkInterval=null;scheduledTime=0;initialBufferTime=.1;gainNode;source;endOfQueueAudioSource=null;onComplete=()=>{};async addWorklet(e,t,n){let r=mr.get(this.context);if(r&&r[e])return r[e].handlers.push(n),Promise.resolve(this);r||(mr.set(this.context,{}),r=mr.get(this.context)),r[e]={handlers:[n]};const i=gr(e,t);await this.context.audioWorklet.addModule(i);const s=new AudioWorkletNode(this.context,e);return r[e].node=s,this}_processPCM16Chunk(e){const t=new Float32Array(e.length/2),n=new DataView(e.buffer);for(let r=0;r<e.length/2;r++)try{const e=n.getInt16(2*r,!0);t[r]=e/32768}catch(lA){}return t}addPCM16(e){this.isStreamComplete=!1;let t=this._processPCM16Chunk(e);for(;t.length>=this.bufferSize;){const e=t.slice(0,this.bufferSize);this.audioQueue.push(e),t=t.slice(this.bufferSize)}t.length>0&&this.audioQueue.push(t),this.isPlaying||(this.isPlaying=!0,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.scheduleNextBuffer())}createAudioBuffer(e){const t=this.context.createBuffer(1,e.length,this.sampleRate);return t.getChannelData(0).set(e),t}scheduleNextBuffer(){for(;this.audioQueue.length>0&&this.scheduledTime<this.context.currentTime+.2;){const e=this.audioQueue.shift(),t=this.createAudioBuffer(e),n=this.context.createBufferSource();0===this.audioQueue.length&&(this.endOfQueueAudioSource&&(this.endOfQueueAudioSource.onended=null),this.endOfQueueAudioSource=n,n.onended=()=>{this.audioQueue.length||this.endOfQueueAudioSource!==n||(this.endOfQueueAudioSource=null,this.onComplete())}),n.buffer=t,n.connect(this.gainNode);const r=mr.get(this.context);r&&Object.entries(r).forEach(([e,t])=>{const{node:r,handlers:i}=t;r&&(n.connect(r),r.port.onmessage=function(e){i.forEach(t=>{t.call(r.port,e)})},r.connect(this.context.destination))});const i=Math.max(this.scheduledTime,this.context.currentTime);n.start(i),this.scheduledTime=i+t.duration}if(0===this.audioQueue.length)this.isStreamComplete?(this.isPlaying=!1,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)):this.checkInterval||(this.checkInterval=window.setInterval(()=>{this.audioQueue.length>0&&this.scheduleNextBuffer()},100));else{const e=1e3*(this.scheduledTime-this.context.currentTime);setTimeout(()=>this.scheduleNextBuffer(),Math.max(0,e-50))}}stop(){this.isPlaying=!1,this.isStreamComplete=!0,this.audioQueue=[],this.scheduledTime=this.context.currentTime,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.gainNode.gain.linearRampToValueAtTime(0,this.context.currentTime+.1),setTimeout(()=>{this.gainNode.disconnect(),this.gainNode=this.context.createGain(),this.gainNode.connect(this.context.destination)},200)}async resume(){"suspended"===this.context.state&&await this.context.resume(),this.isStreamComplete=!1,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.gainNode.gain.setValueAtTime(1,this.context.currentTime)}complete(){this.isStreamComplete=!0,this.onComplete()}}const Ur="\n  class VolMeter extends AudioWorkletProcessor {\n    volume\n    updateIntervalInMS\n    nextUpdateFrame\n\n    constructor() {\n      super()\n      this.volume = 0\n      this.updateIntervalInMS = 25\n      this.nextUpdateFrame = this.updateIntervalInMS\n      this.port.onmessage = event => {\n        if (event.data.updateIntervalInMS) {\n          this.updateIntervalInMS = event.data.updateIntervalInMS\n        }\n      }\n    }\n\n    get intervalInFrames() {\n      return (this.updateIntervalInMS / 1000) * sampleRate\n    }\n\n    process(inputs) {\n      const input = inputs[0]\n\n      if (input.length > 0) {\n        const samples = input[0]\n        let sum = 0\n        let rms = 0\n\n        for (let i = 0; i < samples.length; ++i) {\n          sum += samples[i] * samples[i]\n        }\n\n        rms = Math.sqrt(sum / samples.length)\n        this.volume = Math.max(rms, this.volume * 0.7)\n\n        this.nextUpdateFrame -= samples.length\n        if (this.nextUpdateFrame < 0) {\n          this.nextUpdateFrame += this.intervalInFrames\n          this.port.postMessage({volume: this.volume})\n        }\n      }\n\n      return true\n    }\n  }";const yr=vt.createContext(void 0),xr=({children:t})=>{const n=function(){const e=vt.useMemo(()=>new fr,[]),t=vt.useRef(null),[n,r]=vt.useState({}),[i,s]=vt.useState(!1),[a,o]=vt.useState(0);vt.useEffect(()=>{t.current||ar({id:"audio-out"}).then(e=>{t.current=new br(e);let n=0;t.current.addWorklet("vumeter-out",Ur,e=>{const t=Date.now();t-n>=100&&(o(e.data.volume),n=t)}).then(()=>{})})},[t]),vt.useEffect(()=>{const n=()=>{s(!0)},r=()=>{s(!1)},i=e=>{},a=()=>t.current?.stop(),o=e=>t.current?.addPCM16(new Uint8Array(e));return e.on("error",i).on("open",n).on("close",r).on("interrupted",a).on("audio",o),()=>{e.off("error",i).off("open",n).off("close",r).off("interrupted",a).off("audio",o).disconnect()}},[e]);const l=vt.useCallback(async()=>{if(!n)throw new Error("config has not been set");e.disconnect(),await e.connect(n)},[e,n]),c=vt.useCallback(async()=>{e.disconnect(),s(!1)},[s,e]),d=vt.useCallback(()=>{t.current?.stop()},[]);return{client:e,config:n,setConfig:r,connected:i,connect:l,disconnect:c,interruptAudio:d,volume:a}}();return e.jsx(yr.Provider,{value:n,children:t})},vr=()=>{const e=vt.useContext(yr);if(!e)throw new Error("useLiveAPIContext must be used wihin a LiveAPIProvider");return e};let wr=null;const Sr={async fetch(e,t={}){const n=await fetch(e,t);if(401===n.status){if(wr)try{await wr.logout()}catch(r){}pr.removeToken()}return n},async get(e,t={}){return this.fetch(e,{...t,method:"GET"})},async post(e,t,n={}){const r={"Content-Type":"application/json",...n.headers};return this.fetch(e,{...n,method:"POST",headers:r,body:t?JSON.stringify(t):void 0})},async put(e,t,n={}){const r={"Content-Type":"application/json",...n.headers};return this.fetch(e,{...n,method:"PUT",headers:r,body:t?JSON.stringify(t):void 0})},async delete(e,t={}){return this.fetch(e,{...t,method:"DELETE"})}},Er="http://localhost:8003";const kr=new class{async getGoogleAuthUrl(){const e=await fetch(`${Er}/auth/google`);if(!e.ok)throw new Error("Failed to get Google auth URL");return e.json()}async completeSetup(e,t,n,r){const i=await fetch(`${Er}/auth/complete-setup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({setup_token:e,user_type:t,age:n,subjects:r.subjects,learning_goals:r.learningGoals,interests:r.interests,learning_style:r.learningStyle})});if(!i.ok){const e=await i.json();throw new Error(e.detail||"Setup failed")}return i.json()}async getCurrentUser(e){const t=await Sr.fetch(`${Er}/auth/me`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to get current user");return t.json()}async logout(){const e=localStorage.getItem("jwt_token");if(e)try{await Sr.fetch(`${Er}/auth/logout`,{method:"POST",headers:{Authorization:`Bearer ${e}`}})}catch(t){}}},Cr=vt.createContext(void 0),_r=()=>{const e=vt.useContext(Cr);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Mr=({children:t})=>{const[n,r]=vt.useState(null),[i,s]=vt.useState(!0),a=async()=>{await kr.logout(),pr.removeToken(),r(null)},o=async()=>{const e=pr.getToken();if(!e)return r(null),void s(!1);try{const t=await kr.getCurrentUser(e);r(t)}catch(t){pr.removeToken(),r(null)}finally{s(!1)}};vt.useEffect(()=>{pr.getToken()?o():s(!1)},[]),vt.useEffect(()=>{wr={logout:a}},[a]);const l={user:n,isAuthenticated:!!n,isLoading:i,login:(e,t)=>{pr.setToken(e),r(t)},logout:a,refreshUser:o};return e.jsx(Cr.Provider,{value:l,children:t})},Ir=({children:t})=>{const{isAuthenticated:n,isLoading:r}=_r();return r?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#FFFDF5"},children:e.jsx("div",{style:{padding:"24px 32px",border:"4px solid #000000",background:"#FFFDF5",boxShadow:"8px 8px 0px 0px #000000",fontSize:"18px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.05em",color:"#000000"},children:"Loading..."})}):n?e.jsx(e.Fragment,{children:t}):e.jsx(wt,{to:"/login"})};var jr={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Tr=St.createContext&&St.createContext(jr),Rr=["attr","size","title"];function Pr(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ar(){return Ar=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ar.apply(this,arguments)}function Nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nr(Object(n),!0).forEach(function(t){Lr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Lr(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Or(e){return e&&e.map((e,t)=>St.createElement(e.tag,Dr({key:t},e.attr),Or(e.child)))}function Fr(e){return t=>St.createElement(zr,Ar({attr:Dr({},e.attr)},t),Or(e.child))}function zr(e){var t=t=>{var n,{attr:r,size:i,title:s}=e,a=Pr(e,Rr),o=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),St.createElement("svg",Ar({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,a,{className:n,style:Dr(Dr({color:e.color||t.color},t.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&St.createElement("title",null,s),e.children)};return void 0!==Tr?St.createElement(Tr.Consumer,null,e=>t(e)):t(jr)}function Br(e){return Fr({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 5H13V19H5V5ZM19 19H15V5H19V19ZM4 3C3.44772 3 3 3.44772 3 4V20C3 20.5523 3.44772 21 4 21H20C20.5523 21 21 20.5523 21 20V4C21 3.44772 20.5523 3 20 3H4ZM7 12L11 8.5V15.5L7 12Z"},child:[]}]})(e)}function Hr(e){return Fr({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 5H13V19H5V5ZM19 19H15V5H19V19ZM4 3C3.44772 3 3 3.44772 3 4V20C3 20.5523 3.44772 21 4 21H20C20.5523 21 21 20.5523 21 20V4C21 3.44772 20.5523 3 20 3H4ZM11 12L7 8.5V15.5L11 12Z"},child:[]}]})(e)}function $r(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function Wr(...e){return t=>{let n=!1;const r=e.map(e=>{const r=$r(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){const n=r[t];"function"==typeof n?n():$r(e[t],null)}}}}function Xr(...e){return vt.useCallback(Wr(...e),e)}var Vr=Symbol.for("react.lazy"),Gr=Et[" use ".trim().toString()];function Yr(e){return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===Vr&&"_payload"in e&&("object"==typeof(t=e._payload)&&null!==t&&"then"in t);var t}function qr(t){const n=Kr(t),r=vt.forwardRef((t,r)=>{let{children:i,...s}=t;Yr(i)&&"function"==typeof Gr&&(i=Gr(i._payload));const a=vt.Children.toArray(i),o=a.find(Jr);if(o){const t=o.props.children,i=a.map(e=>e===o?vt.Children.count(t)>1?vt.Children.only(null):vt.isValidElement(t)?t.props.children:null:e);return e.jsx(n,{...s,ref:r,children:vt.isValidElement(t)?vt.cloneElement(t,void 0,i):null})}return e.jsx(n,{...s,ref:r,children:i})});return r.displayName=`${t}.Slot`,r}var Zr=qr("Slot");function Kr(e){const t=vt.forwardRef((e,t)=>{let{children:n,...r}=e;if(Yr(n)&&"function"==typeof Gr&&(n=Gr(n._payload)),vt.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),i=function(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(n[r]=i):"style"===r?n[r]={...i,...s}:"className"===r&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==vt.Fragment&&(i.ref=t?Wr(t,e):e),vt.cloneElement(n,i)}return vt.Children.count(n)>1?vt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Qr=Symbol("radix.slottable");function Jr(e){return vt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Qr}const ei=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,ti=rr,ni=(e,t)=>n=>{var r;if(null==(null==t?void 0:t.variants))return ti(e,null==n?void 0:n.class,null==n?void 0:n.className);const{variants:i,defaultVariants:s}=t,a=Object.keys(i).map(e=>{const t=null==n?void 0:n[e],r=null==s?void 0:s[e];if(null===t)return null;const a=ei(t)||ei(r);return i[e][a]}),o=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{}),l=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r,...i}=t;return Object.entries(i).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...s,...o}[t]):{...s,...o}[t]===n})?[...e,n,r]:e},[]);return ti(e,a,l,null==n?void 0:n.class,null==n?void 0:n.className)},ri=ni("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),ii=vt.forwardRef(({className:t,variant:n,size:r,asChild:i=!1,...s},a)=>{const o=i?Zr:"button";return e.jsx(o,{className:ir(ri({variant:n,size:r,className:t})),ref:a,...s})});ii.displayName="Button";const si=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},ai=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),oi=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var li={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ci=vt.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},l)=>vt.createElement("svg",{ref:l,...li,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:ai("lucide",i),...!s&&!oi(o)&&{"aria-hidden":"true"},...o},[...a.map(([e,t])=>vt.createElement(e,t)),...Array.isArray(s)?s:[s]])),di=(e,t)=>{const n=vt.forwardRef(({className:n,...r},i)=>{return vt.createElement(ci,{ref:i,iconNode:t,className:ai(`lucide-${s=si(e),s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...r});var s});return n.displayName=si(e),n},ui=di("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),hi=di("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),pi=di("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),fi=di("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),mi=di("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),gi=di("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),bi=di("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),Ui=di("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),yi=di("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),xi=di("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),vi=di("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),wi=di("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Si=vt.createContext({theme:"system",setTheme:()=>null});function Ei({children:t,defaultTheme:n="system",storageKey:r="ai-tutor-theme",...i}){const[s,a]=vt.useState(()=>localStorage.getItem(r)||n);vt.useEffect(()=>{const e=window.document.documentElement;if(e.classList.remove("light","dark"),"system"===s){const t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";return void e.classList.add(t)}e.classList.add(s)},[s]);const o={theme:s,setTheme:e=>{localStorage.setItem(r,e),a(e)}};return e.jsx(Si.Provider,{...i,value:o,children:t})}function ki(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e?.(r),!1===n||!r.defaultPrevented)return t?.(r)}}function Ci(t,n=[]){let r=[];const i=()=>{const e=r.map(e=>vt.createContext(e));return function(n){const r=n?.[t]||e;return vt.useMemo(()=>({[`__scope${t}`]:{...n,[t]:r}}),[n,r])}};return i.scopeName=t,[function(n,i){const s=vt.createContext(i),a=r.length;r=[...r,i];const o=n=>{const{scope:r,children:i,...o}=n,l=r?.[t]?.[a]||s,c=vt.useMemo(()=>o,Object.values(o));return e.jsx(l.Provider,{value:c,children:i})};return o.displayName=n+"Provider",[o,function(e,r){const o=r?.[t]?.[a]||s,l=vt.useContext(o);if(l)return l;if(void 0!==i)return i;throw new Error(`\`${e}\` must be used within \`${n}\``)}]},_i(i,...n)]}function _i(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=n.reduce((t,{useScope:n,scopeName:r})=>({...t,...n(e)[`__scope${r}`]}),{});return vt.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}var Mi=globalThis?.document?vt.useLayoutEffect:()=>{},Ii=Et[" useInsertionEffect ".trim().toString()]||Mi;function ji({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[i,s,a]=function({defaultProp:e,onChange:t}){const[n,r]=vt.useState(e),i=vt.useRef(n),s=vt.useRef(t);return Ii(()=>{s.current=t},[t]),vt.useEffect(()=>{i.current!==n&&(s.current?.(n),i.current=n)},[n,i]),[n,r,s]}({defaultProp:t,onChange:n}),o=void 0!==e,l=o?e:i;{const t=vt.useRef(void 0!==e);vt.useEffect(()=>{const e=t.current;if(e!==o){}t.current=o},[o,r])}const c=vt.useCallback(t=>{if(o){const n=function(e){return"function"==typeof e}(t)?t(e):t;n!==e&&a.current?.(n)}else s(t)},[o,e,s,a]);return[l,c]}function Ti(t){const n=Ri(t),r=vt.forwardRef((t,r)=>{const{children:i,...s}=t,a=vt.Children.toArray(i),o=a.find(Ai);if(o){const t=o.props.children,i=a.map(e=>e===o?vt.Children.count(t)>1?vt.Children.only(null):vt.isValidElement(t)?t.props.children:null:e);return e.jsx(n,{...s,ref:r,children:vt.isValidElement(t)?vt.cloneElement(t,void 0,i):null})}return e.jsx(n,{...s,ref:r,children:i})});return r.displayName=`${t}.Slot`,r}function Ri(e){const t=vt.forwardRef((e,t)=>{const{children:n,...r}=e;if(vt.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),i=function(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(n[r]=i):"style"===r?n[r]={...i,...s}:"className"===r&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==vt.Fragment&&(i.ref=t?Wr(t,e):e),vt.cloneElement(n,i)}return vt.Children.count(n)>1?vt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Pi=Symbol("radix.slottable");function Ai(e){return vt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Pi}var Ni=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((t,n)=>{const r=Ti(`Primitive.${n}`),i=vt.forwardRef((t,i)=>{const{asChild:s,...a}=t,o=s?r:n;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),e.jsx(o,{...a,ref:i})});return i.displayName=`Primitive.${n}`,{...t,[n]:i}},{});function Di(e,n){e&&t.flushSync(()=>e.dispatchEvent(n))}function Li(t){const n=Oi(t),r=vt.forwardRef((t,r)=>{const{children:i,...s}=t,a=vt.Children.toArray(i),o=a.find(zi);if(o){const t=o.props.children,i=a.map(e=>e===o?vt.Children.count(t)>1?vt.Children.only(null):vt.isValidElement(t)?t.props.children:null:e);return e.jsx(n,{...s,ref:r,children:vt.isValidElement(t)?vt.cloneElement(t,void 0,i):null})}return e.jsx(n,{...s,ref:r,children:i})});return r.displayName=`${t}.Slot`,r}function Oi(e){const t=vt.forwardRef((e,t)=>{const{children:n,...r}=e;if(vt.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),i=function(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(n[r]=i):"style"===r?n[r]={...i,...s}:"className"===r&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==vt.Fragment&&(i.ref=t?Wr(t,e):e),vt.cloneElement(n,i)}return vt.Children.count(n)>1?vt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Fi=Symbol("radix.slottable");function zi(e){return vt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Fi}function Bi(t){const n=t+"CollectionProvider",[r,i]=Ci(n),[s,a]=r(n,{collectionRef:{current:null},itemMap:new Map}),o=t=>{const{scope:n,children:r}=t,i=St.useRef(null),a=St.useRef(new Map).current;return e.jsx(s,{scope:n,itemMap:a,collectionRef:i,children:r})};o.displayName=n;const l=t+"CollectionSlot",c=Li(l),d=St.forwardRef((t,n)=>{const{scope:r,children:i}=t,s=Xr(n,a(l,r).collectionRef);return e.jsx(c,{ref:s,children:i})});d.displayName=l;const u=t+"CollectionItemSlot",h="data-radix-collection-item",p=Li(u),f=St.forwardRef((t,n)=>{const{scope:r,children:i,...s}=t,o=St.useRef(null),l=Xr(n,o),c=a(u,r);return St.useEffect(()=>(c.itemMap.set(o,{ref:o,...s}),()=>{c.itemMap.delete(o)})),e.jsx(p,{[h]:"",ref:l,children:i})});return f.displayName=u,[{Provider:o,Slot:d,ItemSlot:f},function(e){const n=a(t+"CollectionConsumer",e);return St.useCallback(()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${h}]`));return Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current))},[n.collectionRef,n.itemMap])},i]}var Hi=vt.createContext(void 0);function $i(e){const t=vt.useContext(Hi);return e||t||"ltr"}function Wi(e){const t=vt.useRef(e);return vt.useEffect(()=>{t.current=e}),vt.useMemo(()=>(...e)=>t.current?.(...e),[])}var Xi,Vi="dismissableLayer.update",Gi="dismissableLayer.pointerDownOutside",Yi="dismissableLayer.focusOutside",qi=vt.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Zi=vt.forwardRef((t,n)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,d=vt.useContext(qi),[u,h]=vt.useState(null),p=u?.ownerDocument??globalThis?.document,[,f]=vt.useState({}),m=Xr(n,e=>h(e)),g=Array.from(d.layers),[b]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),U=g.indexOf(b),y=u?g.indexOf(u):-1,x=d.layersWithOutsidePointerEventsDisabled.size>0,v=y>=U,w=function(e,t=globalThis?.document){const n=Wi(e),r=vt.useRef(!1),i=vt.useRef(()=>{});return vt.useEffect(()=>{const e=e=>{if(e.target&&!r.current){let r=function(){Qi(Gi,n,s,{discrete:!0})};const s={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",i.current),i.current=r,t.addEventListener("click",i.current,{once:!0})):r()}else t.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",e),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}(e=>{const t=e.target,n=[...d.branches].some(e=>e.contains(t));v&&!n&&(s?.(e),o?.(e),e.defaultPrevented||l?.())},p),S=function(e,t=globalThis?.document){const n=Wi(e),r=vt.useRef(!1);return vt.useEffect(()=>{const e=e=>{if(e.target&&!r.current){Qi(Yi,n,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}(e=>{const t=e.target;[...d.branches].some(e=>e.contains(t))||(a?.(e),o?.(e),e.defaultPrevented||l?.())},p);return function(e,t=globalThis?.document){const n=Wi(e);vt.useEffect(()=>{const e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[n,t])}(e=>{y===d.layers.size-1&&(i?.(e),!e.defaultPrevented&&l&&(e.preventDefault(),l()))},p),vt.useEffect(()=>{if(u)return r&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(Xi=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),Ki(),()=>{r&&1===d.layersWithOutsidePointerEventsDisabled.size&&(p.body.style.pointerEvents=Xi)}},[u,p,r,d]),vt.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),Ki())},[u,d]),vt.useEffect(()=>{const e=()=>f({});return document.addEventListener(Vi,e),()=>document.removeEventListener(Vi,e)},[]),e.jsx(Ni.div,{...c,ref:m,style:{pointerEvents:x?v?"auto":"none":void 0,...t.style},onFocusCapture:ki(t.onFocusCapture,S.onFocusCapture),onBlurCapture:ki(t.onBlurCapture,S.onBlurCapture),onPointerDownCapture:ki(t.onPointerDownCapture,w.onPointerDownCapture)})});Zi.displayName="DismissableLayer";function Ki(){const e=new CustomEvent(Vi);document.dispatchEvent(e)}function Qi(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?Di(i,s):i.dispatchEvent(s)}vt.forwardRef((t,n)=>{const r=vt.useContext(qi),i=vt.useRef(null),s=Xr(n,i);return vt.useEffect(()=>{const e=i.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),e.jsx(Ni.div,{...t,ref:s})}).displayName="DismissableLayerBranch";var Ji=0;function es(){vt.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??ts()),document.body.insertAdjacentElement("beforeend",e[1]??ts()),Ji++,()=>{1===Ji&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ji--}},[])}function ts(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ns="focusScope.autoFocusOnMount",rs="focusScope.autoFocusOnUnmount",is={bubbles:!1,cancelable:!0},ss=vt.forwardRef((t,n)=>{const{loop:r=!1,trapped:i=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=t,[l,c]=vt.useState(null),d=Wi(s),u=Wi(a),h=vt.useRef(null),p=Xr(n,e=>c(e)),f=vt.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;vt.useEffect(()=>{if(i){let e=function(e){if(f.paused||!l)return;const t=e.target;l.contains(t)?h.current=t:cs(h.current,{select:!0})},t=function(e){if(f.paused||!l)return;const t=e.relatedTarget;null!==t&&(l.contains(t)||cs(h.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&cs(l)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(n);return l&&r.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[i,l,f.paused]),vt.useEffect(()=>{if(l){ds.add(f);const t=document.activeElement;if(!l.contains(t)){const n=new CustomEvent(ns,is);l.addEventListener(ns,d),l.dispatchEvent(n),n.defaultPrevented||(!function(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(cs(r,{select:t}),document.activeElement!==n)return}((e=as(l),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&cs(l))}return()=>{l.removeEventListener(ns,d),setTimeout(()=>{const e=new CustomEvent(rs,is);l.addEventListener(rs,u),l.dispatchEvent(e),e.defaultPrevented||cs(t??document.body,{select:!0}),l.removeEventListener(rs,u),ds.remove(f)},0)}}var e},[l,d,u,f]);const m=vt.useCallback(e=>{if(!r&&!i)return;if(f.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){const t=e.currentTarget,[i,s]=function(e){const t=as(e),n=os(t,e),r=os(t.reverse(),e);return[n,r]}(t);i&&s?e.shiftKey||n!==s?e.shiftKey&&n===i&&(e.preventDefault(),r&&cs(s,{select:!0})):(e.preventDefault(),r&&cs(i,{select:!0})):n===t&&e.preventDefault()}},[r,i,f.paused]);return e.jsx(Ni.div,{tabIndex:-1,...o,ref:p,onKeyDown:m})});function as(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function os(e,t){for(const n of e)if(!ls(n,{upTo:t}))return n}function ls(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function cs(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}ss.displayName="FocusScope";var ds=function(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=us(e,t),e.unshift(t)},remove(t){e=us(e,t),e[0]?.resume()}}}();function us(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}var hs=Et[" useId ".trim().toString()]||(()=>{}),ps=0;function fs(e){const[t,n]=vt.useState(hs());return Mi(()=>{n(e=>e??String(ps++))},[e]),t?`radix-${t}`:""}const ms=["top","right","bottom","left"],gs=Math.min,bs=Math.max,Us=Math.round,ys=Math.floor,xs=e=>({x:e,y:e}),vs={left:"right",right:"left",bottom:"top",top:"bottom"},ws={start:"end",end:"start"};function Ss(e,t,n){return bs(e,gs(t,n))}function Es(e,t){return"function"==typeof e?e(t):e}function ks(e){return e.split("-")[0]}function Cs(e){return e.split("-")[1]}function _s(e){return"x"===e?"y":"x"}function Ms(e){return"y"===e?"height":"width"}const Is=new Set(["top","bottom"]);function js(e){return Is.has(ks(e))?"y":"x"}function Ts(e){return _s(js(e))}function Rs(e){return e.replace(/start|end/g,e=>ws[e])}const Ps=["left","right"],As=["right","left"],Ns=["top","bottom"],Ds=["bottom","top"];function Ls(e,t,n,r){const i=Cs(e);let s=function(e,t,n){switch(e){case"top":case"bottom":return n?t?As:Ps:t?Ps:As;case"left":case"right":return t?Ns:Ds;default:return[]}}(ks(e),"start"===n,r);return i&&(s=s.map(e=>e+"-"+i),t&&(s=s.concat(s.map(Rs)))),s}function Os(e){return e.replace(/left|right|bottom|top/g,e=>vs[e])}function Fs(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function zs(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Bs(e,t,n){let{reference:r,floating:i}=e;const s=js(t),a=Ts(t),o=Ms(a),l=ks(t),c="y"===s,d=r.x+r.width/2-i.width/2,u=r.y+r.height/2-i.height/2,h=r[o]/2-i[o]/2;let p;switch(l){case"top":p={x:d,y:r.y-i.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:u};break;case"left":p={x:r.x-i.width,y:u};break;default:p={x:r.x,y:r.y}}switch(Cs(t)){case"start":p[a]-=h*(n&&c?-1:1);break;case"end":p[a]+=h*(n&&c?-1:1)}return p}async function Hs(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:s,rects:a,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:p=0}=Es(t,e),f=Fs(p),m=o[h?"floating"===u?"reference":"floating":u],g=zs(await s.getClippingRect({element:null==(n=await(null==s.isElement?void 0:s.isElement(m)))||n?m:m.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),b="floating"===u?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,U=await(null==s.getOffsetParent?void 0:s.getOffsetParent(o.floating)),y=await(null==s.isElement?void 0:s.isElement(U))&&await(null==s.getScale?void 0:s.getScale(U))||{x:1,y:1},x=zs(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:b,offsetParent:U,strategy:l}):b);return{top:(g.top-x.top+f.top)/y.y,bottom:(x.bottom-g.bottom+f.bottom)/y.y,left:(g.left-x.left+f.left)/y.x,right:(x.right-g.right+f.right)/y.x}}function $s(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Ws(e){return ms.some(t=>e[t]>=0)}const Xs=new Set(["left","top"]);function Vs(){return"undefined"!=typeof window}function Gs(e){return Zs(e)?(e.nodeName||"").toLowerCase():"#document"}function Ys(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function qs(e){var t;return null==(t=(Zs(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Zs(e){return!!Vs()&&(e instanceof Node||e instanceof Ys(e).Node)}function Ks(e){return!!Vs()&&(e instanceof Element||e instanceof Ys(e).Element)}function Qs(e){return!!Vs()&&(e instanceof HTMLElement||e instanceof Ys(e).HTMLElement)}function Js(e){return!(!Vs()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof Ys(e).ShadowRoot)}const ea=new Set(["inline","contents"]);function ta(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=pa(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!ea.has(i)}const na=new Set(["table","td","th"]);function ra(e){return na.has(Gs(e))}const ia=[":popover-open",":modal"];function sa(e){return ia.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const aa=["transform","translate","scale","rotate","perspective"],oa=["transform","translate","scale","rotate","perspective","filter"],la=["paint","layout","strict","content"];function ca(e){const t=da(),n=Ks(e)?pa(e):e;return aa.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||oa.some(e=>(n.willChange||"").includes(e))||la.some(e=>(n.contain||"").includes(e))}function da(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const ua=new Set(["html","body","#document"]);function ha(e){return ua.has(Gs(e))}function pa(e){return Ys(e).getComputedStyle(e)}function fa(e){return Ks(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ma(e){if("html"===Gs(e))return e;const t=e.assignedSlot||e.parentNode||Js(e)&&e.host||qs(e);return Js(t)?t.host:t}function ga(e){const t=ma(e);return ha(t)?e.ownerDocument?e.ownerDocument.body:e.body:Qs(t)&&ta(t)?t:ga(t)}function ba(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=ga(e),s=i===(null==(r=e.ownerDocument)?void 0:r.body),a=Ys(i);if(s){const e=Ua(a);return t.concat(a,a.visualViewport||[],ta(i)?i:[],e&&n?ba(e):[])}return t.concat(i,ba(i,[],n))}function Ua(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ya(e){const t=pa(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Qs(e),s=i?e.offsetWidth:n,a=i?e.offsetHeight:r,o=Us(n)!==s||Us(r)!==a;return o&&(n=s,r=a),{width:n,height:r,$:o}}function xa(e){return Ks(e)?e:e.contextElement}function va(e){const t=xa(e);if(!Qs(t))return xs(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=ya(t);let a=(s?Us(n.width):n.width)/r,o=(s?Us(n.height):n.height)/i;return a&&Number.isFinite(a)||(a=1),o&&Number.isFinite(o)||(o=1),{x:a,y:o}}const wa=xs(0);function Sa(e){const t=Ys(e);return da()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:wa}function Ea(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),s=xa(e);let a=xs(1);t&&(r?Ks(r)&&(a=va(r)):a=va(e));const o=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==Ys(e))&&t}(s,n,r)?Sa(s):xs(0);let l=(i.left+o.x)/a.x,c=(i.top+o.y)/a.y,d=i.width/a.x,u=i.height/a.y;if(s){const e=Ys(s),t=r&&Ks(r)?Ys(r):r;let n=e,i=Ua(n);for(;i&&r&&t!==n;){const e=va(i),t=i.getBoundingClientRect(),r=pa(i),s=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,a=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,d*=e.x,u*=e.y,l+=s,c+=a,n=Ys(i),i=Ua(n)}}return zs({width:d,height:u,x:l,y:c})}function ka(e,t){const n=fa(e).scrollLeft;return t?t.left+n:Ea(qs(e)).left+n}function Ca(e,t){const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-ka(e,n),y:n.top+t.scrollTop}}const _a=new Set(["absolute","fixed"]);function Ma(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=Ys(e),r=qs(e),i=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;const e=da();(!e||e&&"fixed"===t)&&(o=i.offsetLeft,l=i.offsetTop)}const c=ka(r);if(c<=0){const e=r.ownerDocument,t=e.body,n=getComputedStyle(t),i="CSS1Compat"===e.compatMode&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,a=Math.abs(r.clientWidth-t.clientWidth-i);a<=25&&(s-=a)}else c<=25&&(s+=c);return{width:s,height:a,x:o,y:l}}(e,n);else if("document"===t)r=function(e){const t=qs(e),n=fa(e),r=e.ownerDocument.body,i=bs(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=bs(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+ka(e);const o=-n.scrollTop;return"rtl"===pa(r).direction&&(a+=bs(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:o}}(qs(e));else if(Ks(t))r=function(e,t){const n=Ea(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Qs(e)?va(e):xs(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:i*s.x,y:r*s.y}}(t,n);else{const n=Sa(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return zs(r)}function Ia(e,t){const n=ma(e);return!(n===t||!Ks(n)||ha(n))&&("fixed"===pa(n).position||Ia(n,t))}function ja(e,t,n){const r=Qs(t),i=qs(t),s="fixed"===n,a=Ea(e,!0,s,t);let o={scrollLeft:0,scrollTop:0};const l=xs(0);function c(){l.x=ka(i)}if(r||!r&&!s)if(("body"!==Gs(t)||ta(i))&&(o=fa(t)),r){const e=Ea(t,!0,s,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&c();s&&!r&&i&&c();const d=!i||r||s?xs(0):Ca(i,o);return{x:a.left+o.scrollLeft-l.x-d.x,y:a.top+o.scrollTop-l.y-d.y,width:a.width,height:a.height}}function Ta(e){return"static"===pa(e).position}function Ra(e,t){if(!Qs(e)||"fixed"===pa(e).position)return null;if(t)return t(e);let n=e.offsetParent;return qs(e)===n&&(n=n.ownerDocument.body),n}function Pa(e,t){const n=Ys(e);if(sa(e))return n;if(!Qs(e)){let t=ma(e);for(;t&&!ha(t);){if(Ks(t)&&!Ta(t))return t;t=ma(t)}return n}let r=Ra(e,t);for(;r&&ra(r)&&Ta(r);)r=Ra(r,t);return r&&ha(r)&&Ta(r)&&!ca(r)?n:r||function(e){let t=ma(e);for(;Qs(t)&&!ha(t);){if(ca(t))return t;if(sa(t))return null;t=ma(t)}return null}(e)||n}const Aa={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s="fixed"===i,a=qs(r),o=!!t&&sa(t.floating);if(r===a||o&&s)return n;let l={scrollLeft:0,scrollTop:0},c=xs(1);const d=xs(0),u=Qs(r);if((u||!u&&!s)&&(("body"!==Gs(r)||ta(a))&&(l=fa(r)),Qs(r))){const e=Ea(r);c=va(r),d.x=e.x+r.clientLeft,d.y=e.y+r.clientTop}const h=!a||u||s?xs(0):Ca(a,l);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+h.x,y:n.y*c.y-l.scrollTop*c.y+d.y+h.y}},getDocumentElement:qs,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[..."clippingAncestors"===n?sa(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=ba(e,[],!1).filter(e=>Ks(e)&&"body"!==Gs(e)),i=null;const s="fixed"===pa(e).position;let a=s?ma(e):e;for(;Ks(a)&&!ha(a);){const t=pa(a),n=ca(a);n||"fixed"!==t.position||(i=null),(s?!n&&!i:!n&&"static"===t.position&&i&&_a.has(i.position)||ta(a)&&!n&&Ia(e,a))?r=r.filter(e=>e!==a):i=t,a=ma(a)}return t.set(e,r),r}(t,this._c):[].concat(n),r],a=s[0],o=s.reduce((e,n)=>{const r=Ma(t,n,i);return e.top=bs(r.top,e.top),e.right=gs(r.right,e.right),e.bottom=gs(r.bottom,e.bottom),e.left=bs(r.left,e.left),e},Ma(t,a,i));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:Pa,getElementRects:async function(e){const t=this.getOffsetParent||Pa,n=this.getDimensions,r=await n(e.floating);return{reference:ja(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=ya(e);return{width:t,height:n}},getScale:va,isElement:Ks,isRTL:function(e){return"rtl"===pa(e).direction}};function Na(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Da(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:o="function"==typeof IntersectionObserver,animationFrame:l=!1}=r,c=xa(e),d=i||s?[...c?ba(c):[],...ba(t)]:[];d.forEach(e=>{i&&e.addEventListener("scroll",n,{passive:!0}),s&&e.addEventListener("resize",n)});const u=c&&o?function(e,t){let n,r=null;const i=qs(e);function s(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function a(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),s();const c=e.getBoundingClientRect(),{left:d,top:u,width:h,height:p}=c;if(o||t(),!h||!p)return;const f={rootMargin:-ys(u)+"px "+-ys(i.clientWidth-(d+h))+"px "+-ys(i.clientHeight-(u+p))+"px "+-ys(d)+"px",threshold:bs(0,gs(1,l))||1};let m=!0;function g(t){const r=t[0].intersectionRatio;if(r!==l){if(!m)return a();r?a(!1,r):n=setTimeout(()=>{a(!1,1e-7)},1e3)}1!==r||Na(c,e.getBoundingClientRect())||a(),m=!1}try{r=new IntersectionObserver(g,{...f,root:i.ownerDocument})}catch(b){r=new IntersectionObserver(g,f)}r.observe(e)}(!0),s}(c,n):null;let h,p=-1,f=null;a&&(f=new ResizeObserver(e=>{let[r]=e;r&&r.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;null==(e=f)||e.observe(t)})),n()}),c&&!l&&f.observe(c),f.observe(t));let m=l?Ea(e):null;return l&&function t(){const r=Ea(e);m&&!Na(m,r)&&n();m=r,h=requestAnimationFrame(t)}(),n(),()=>{var e;d.forEach(e=>{i&&e.removeEventListener("scroll",n),s&&e.removeEventListener("resize",n)}),null==u||u(),null==(e=f)||e.disconnect(),f=null,l&&cancelAnimationFrame(h)}}const La=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:a,middlewareData:o}=t,l=await async function(e,t){const{placement:n,platform:r,elements:i}=e,s=await(null==r.isRTL?void 0:r.isRTL(i.floating)),a=ks(n),o=Cs(n),l="y"===js(n),c=Xs.has(a)?-1:1,d=s&&l?-1:1,u=Es(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:f}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return o&&"number"==typeof f&&(p="end"===o?-1*f:f),l?{x:p*d,y:h*c}:{x:h*c,y:p*d}}(t,e);return a===(null==(n=o.offset)?void 0:n.placement)&&null!=(r=o.arrow)&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:a}}}}},Oa=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=Es(e,t),c={x:n,y:r},d=await Hs(t,l),u=js(ks(i)),h=_s(u);let p=c[h],f=c[u];if(s){const e="y"===h?"bottom":"right";p=Ss(p+d["y"===h?"top":"left"],p,p-d[e])}if(a){const e="y"===u?"bottom":"right";f=Ss(f+d["y"===u?"top":"left"],f,f-d[e])}const m=o.fn({...t,[h]:p,[u]:f});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[h]:s,[u]:a}}}}}},Fa=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:m=!0,...g}=Es(e,t);if(null!=(n=s.arrow)&&n.alignmentOffset)return{};const b=ks(i),U=js(o),y=ks(o)===o,x=await(null==l.isRTL?void 0:l.isRTL(c.floating)),v=h||(y||!m?[Os(o)]:function(e){const t=Os(e);return[Rs(e),t,Rs(t)]}(o)),w="none"!==f;!h&&w&&v.push(...Ls(o,m,f,x));const S=[o,...v],E=await Hs(t,g),k=[];let C=(null==(r=s.flip)?void 0:r.overflows)||[];if(d&&k.push(E[b]),u){const e=function(e,t,n){void 0===n&&(n=!1);const r=Cs(e),i=Ts(e),s=Ms(i);let a="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=Os(a)),[a,Os(a)]}(i,a,x);k.push(E[e[0]],E[e[1]])}if(C=[...C,{placement:i,overflows:k}],!k.every(e=>e<=0)){var _,M;const e=((null==(_=s.flip)?void 0:_.index)||0)+1,t=S[e];if(t){if(!("alignment"===u&&U!==js(t))||C.every(e=>js(e.placement)!==U||e.overflows[0]>0))return{data:{index:e,overflows:C},reset:{placement:t}}}let n=null==(M=C.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:M.placement;if(!n)switch(p){case"bestFit":{var I;const e=null==(I=C.filter(e=>{if(w){const t=js(e.placement);return t===U||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:I[0];e&&(n=e);break}case"initialPlacement":n=o}if(i!==n)return{reset:{placement:n}}}return{}}}},za=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:a,elements:o}=t,{apply:l=()=>{},...c}=Es(e,t),d=await Hs(t,c),u=ks(i),h=Cs(i),p="y"===js(i),{width:f,height:m}=s.floating;let g,b;"top"===u||"bottom"===u?(g=u,b=h===(await(null==a.isRTL?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(b=u,g="end"===h?"top":"bottom");const U=m-d.top-d.bottom,y=f-d.left-d.right,x=gs(m-d[g],U),v=gs(f-d[b],y),w=!t.middlewareData.shift;let S=x,E=v;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(E=y),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(S=U),w&&!h){const e=bs(d.left,0),t=bs(d.right,0),n=bs(d.top,0),r=bs(d.bottom,0);p?E=f-2*(0!==e||0!==t?e+t:bs(d.left,d.right)):S=m-2*(0!==n||0!==r?n+r:bs(d.top,d.bottom))}await l({...t,availableWidth:E,availableHeight:S});const k=await a.getDimensions(o.floating);return f!==k.width||m!==k.height?{reset:{rects:!0}}:{}}}},Ba=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=Es(e,t);switch(r){case"referenceHidden":{const e=$s(await Hs(t,{...i,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:Ws(e)}}}case"escaped":{const e=$s(await Hs(t,{...i,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:Ws(e)}}}default:return{}}}}},Ha=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:a,elements:o,middlewareData:l}=t,{element:c,padding:d=0}=Es(e,t)||{};if(null==c)return{};const u=Fs(d),h={x:n,y:r},p=Ts(i),f=Ms(p),m=await a.getDimensions(c),g="y"===p,b=g?"top":"left",U=g?"bottom":"right",y=g?"clientHeight":"clientWidth",x=s.reference[f]+s.reference[p]-h[p]-s.floating[f],v=h[p]-s.reference[p],w=await(null==a.getOffsetParent?void 0:a.getOffsetParent(c));let S=w?w[y]:0;S&&await(null==a.isElement?void 0:a.isElement(w))||(S=o.floating[y]||s.floating[f]);const E=x/2-v/2,k=S/2-m[f]/2-1,C=gs(u[b],k),_=gs(u[U],k),M=C,I=S-m[f]-_,j=S/2-m[f]/2+E,T=Ss(M,j,I),R=!l.arrow&&null!=Cs(i)&&j!==T&&s.reference[f]/2-(j<M?C:_)-m[f]/2<0,P=R?j<M?j-M:j-I:0;return{[p]:h[p]+P,data:{[p]:T,centerOffset:j-T-P,...R&&{alignmentOffset:P}},reset:R}}}),$a=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:a}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=Es(e,t),d={x:n,y:r},u=js(i),h=_s(u);let p=d[h],f=d[u];const m=Es(o,t),g="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const e="y"===h?"height":"width",t=s.reference[h]-s.floating[e]+g.mainAxis,n=s.reference[h]+s.reference[e]-g.mainAxis;p<t?p=t:p>n&&(p=n)}if(c){var b,U;const e="y"===h?"width":"height",t=Xs.has(ks(i)),n=s.reference[u]-s.floating[e]+(t&&(null==(b=a.offset)?void 0:b[u])||0)+(t?0:g.crossAxis),r=s.reference[u]+s.reference[e]+(t?0:(null==(U=a.offset)?void 0:U[u])||0)-(t?g.crossAxis:0);f<n?f=n:f>r&&(f=r)}return{[h]:p,[u]:f}}}},Wa=(e,t,n)=>{const r=new Map,i={platform:Aa,...n},s={...i.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=n,o=s.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(t));let c=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:u}=Bs(c,r,l),h=r,p={},f=0;for(let m=0;m<o.length;m++){const{name:n,fn:s}=o[m],{x:g,y:b,data:U,reset:y}=await s({x:d,y:u,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:c,platform:a,elements:{reference:e,floating:t}});d=null!=g?g:d,u=null!=b?b:u,p={...p,[n]:{...p[n],...U}},y&&f<=50&&(f++,"object"==typeof y&&(y.placement&&(h=y.placement),y.rects&&(c=!0===y.rects?await a.getElementRects({reference:e,floating:t,strategy:i}):y.rects),({x:d,y:u}=Bs(c,h,l))),m=-1)}return{x:d,y:u,placement:h,strategy:i,middlewareData:p}})(e,t,{...i,platform:s})};var Xa="undefined"!=typeof document?vt.useLayoutEffect:function(){};function Va(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!Va(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){const n=i[r];if(("_owner"!==n||!e.$$typeof)&&!Va(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function Ga(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ya(e,t){const n=Ga(e);return Math.round(t*n)/n}function qa(e){const t=vt.useRef(e);return Xa(()=>{t.current=e}),t}function Za(e){void 0===e&&(e={});const{placement:n="bottom",strategy:r="absolute",middleware:i=[],platform:s,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,h]=vt.useState({x:0,y:0,strategy:r,placement:n,middlewareData:{},isPositioned:!1}),[p,f]=vt.useState(i);Va(p,i)||f(i);const[m,g]=vt.useState(null),[b,U]=vt.useState(null),y=vt.useCallback(e=>{e!==S.current&&(S.current=e,g(e))},[]),x=vt.useCallback(e=>{e!==E.current&&(E.current=e,U(e))},[]),v=a||m,w=o||b,S=vt.useRef(null),E=vt.useRef(null),k=vt.useRef(u),C=null!=c,_=qa(c),M=qa(s),I=qa(d),j=vt.useCallback(()=>{if(!S.current||!E.current)return;const e={placement:n,strategy:r,middleware:p};M.current&&(e.platform=M.current),Wa(S.current,E.current,e).then(e=>{const n={...e,isPositioned:!1!==I.current};T.current&&!Va(k.current,n)&&(k.current=n,t.flushSync(()=>{h(n)}))})},[p,n,r,M,I]);Xa(()=>{!1===d&&k.current.isPositioned&&(k.current.isPositioned=!1,h(e=>({...e,isPositioned:!1})))},[d]);const T=vt.useRef(!1);Xa(()=>(T.current=!0,()=>{T.current=!1}),[]),Xa(()=>{if(v&&(S.current=v),w&&(E.current=w),v&&w){if(_.current)return _.current(v,w,j);j()}},[v,w,j,_,C]);const R=vt.useMemo(()=>({reference:S,floating:E,setReference:y,setFloating:x}),[y,x]),P=vt.useMemo(()=>({reference:v,floating:w}),[v,w]),A=vt.useMemo(()=>{const e={position:r,left:0,top:0};if(!P.floating)return e;const t=Ya(P.floating,u.x),n=Ya(P.floating,u.y);return l?{...e,transform:"translate("+t+"px, "+n+"px)",...Ga(P.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}},[r,l,P.floating,u.x,u.y]);return vt.useMemo(()=>({...u,update:j,refs:R,elements:P,floatingStyles:A}),[u,j,R,P,A])}const Ka=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"==typeof e?e(t):e;return n&&(i=n,{}.hasOwnProperty.call(i,"current"))?null!=n.current?Ha({element:n.current,padding:r}).fn(t):{}:n?Ha({element:n,padding:r}).fn(t):{};var i}}),Qa=(e,t)=>({...La(e),options:[e,t]}),Ja=(e,t)=>({...Oa(e),options:[e,t]}),eo=(e,t)=>({...$a(e),options:[e,t]}),to=(e,t)=>({...Fa(e),options:[e,t]}),no=(e,t)=>({...za(e),options:[e,t]}),ro=(e,t)=>({...Ba(e),options:[e,t]}),io=(e,t)=>({...Ka(e),options:[e,t]});var so=vt.forwardRef((t,n)=>{const{children:r,width:i=10,height:s=5,...a}=t;return e.jsx(Ni.svg,{...a,ref:n,width:i,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});so.displayName="Arrow";var ao=so;function oo(e){const[t,n]=vt.useState(void 0);return Mi(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const r=t[0];let i,s;if("borderBoxSize"in r){const e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;i=t.inlineSize,s=t.blockSize}else i=e.offsetWidth,s=e.offsetHeight;n({width:i,height:s})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),t}var lo="Popper",[co,uo]=Ci(lo),[ho,po]=co(lo),fo=t=>{const{__scopePopper:n,children:r}=t,[i,s]=vt.useState(null);return e.jsx(ho,{scope:n,anchor:i,onAnchorChange:s,children:r})};fo.displayName=lo;var mo="PopperAnchor",go=vt.forwardRef((t,n)=>{const{__scopePopper:r,virtualRef:i,...s}=t,a=po(mo,r),o=vt.useRef(null),l=Xr(n,o),c=vt.useRef(null);return vt.useEffect(()=>{const e=c.current;c.current=i?.current||o.current,e!==c.current&&a.onAnchorChange(c.current)}),i?null:e.jsx(Ni.div,{...s,ref:l})});go.displayName=mo;var bo="PopperContent",[Uo,yo]=co(bo),xo=vt.forwardRef((t,n)=>{const{__scopePopper:r,side:i="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:f="optimized",onPlaced:m,...g}=t,b=po(bo,r),[U,y]=vt.useState(null),x=Xr(n,e=>y(e)),[v,w]=vt.useState(null),S=oo(v),E=S?.width??0,k=S?.height??0,C=i+("center"!==a?"-"+a:""),_="number"==typeof u?u:{top:0,right:0,bottom:0,left:0,...u},M=Array.isArray(d)?d:[d],I=M.length>0,j={padding:_,boundary:M.filter(Eo),altBoundary:I},{refs:T,floatingStyles:R,placement:P,isPositioned:A,middlewareData:N}=Za({strategy:"fixed",placement:C,whileElementsMounted:(...e)=>Da(...e,{animationFrame:"always"===f}),elements:{reference:b.anchor},middleware:[Qa({mainAxis:s+k,alignmentAxis:o}),c&&Ja({mainAxis:!0,crossAxis:!1,limiter:"partial"===h?eo():void 0,...j}),c&&to({...j}),no({...j,apply:({elements:e,rects:t,availableWidth:n,availableHeight:r})=>{const{width:i,height:s}=t.reference,a=e.floating.style;a.setProperty("--radix-popper-available-width",`${n}px`),a.setProperty("--radix-popper-available-height",`${r}px`),a.setProperty("--radix-popper-anchor-width",`${i}px`),a.setProperty("--radix-popper-anchor-height",`${s}px`)}}),v&&io({element:v,padding:l}),ko({arrowWidth:E,arrowHeight:k}),p&&ro({strategy:"referenceHidden",...j})]}),[D,L]=Co(P),O=Wi(m);Mi(()=>{A&&O?.()},[A,O]);const F=N.arrow?.x,z=N.arrow?.y,B=0!==N.arrow?.centerOffset,[H,$]=vt.useState();return Mi(()=>{U&&$(window.getComputedStyle(U).zIndex)},[U]),e.jsx("div",{ref:T.setFloating,"data-radix-popper-content-wrapper":"",style:{...R,transform:A?R.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:H,"--radix-popper-transform-origin":[N.transformOrigin?.x,N.transformOrigin?.y].join(" "),...N.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(Uo,{scope:r,placedSide:D,onArrowChange:w,arrowX:F,arrowY:z,shouldHideArrow:B,children:e.jsx(Ni.div,{"data-side":D,"data-align":L,...g,ref:x,style:{...g.style,animation:A?void 0:"none"}})})})});xo.displayName=bo;var vo="PopperArrow",wo={top:"bottom",right:"left",bottom:"top",left:"right"},So=vt.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,s=yo(vo,r),a=wo[s.placedSide];return e.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:e.jsx(ao,{...i,ref:n,style:{...i.style,display:"block"}})})});function Eo(e){return null!==e}So.displayName=vo;var ko=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:i}=t,s=0!==i.arrow?.centerOffset,a=s?0:e.arrowWidth,o=s?0:e.arrowHeight,[l,c]=Co(n),d={start:"0%",center:"50%",end:"100%"}[c],u=(i.arrow?.x??0)+a/2,h=(i.arrow?.y??0)+o/2;let p="",f="";return"bottom"===l?(p=s?d:`${u}px`,f=-o+"px"):"top"===l?(p=s?d:`${u}px`,f=`${r.floating.height+o}px`):"right"===l?(p=-o+"px",f=s?d:`${h}px`):"left"===l&&(p=`${r.floating.width+o}px`,f=s?d:`${h}px`),{data:{x:p,y:f}}}});function Co(e){const[t,n="center"]=e.split("-");return[t,n]}var _o=fo,Mo=go,Io=xo,jo=So,To=vt.forwardRef((t,r)=>{const{container:i,...s}=t,[a,o]=vt.useState(!1);Mi(()=>o(!0),[]);const l=i||a&&globalThis?.document?.body;return l?n.createPortal(e.jsx(Ni.div,{...s,ref:r}),l):null});To.displayName="Portal";var Ro=e=>{const{present:t,children:n}=e,r=function(e){const[t,n]=vt.useState(),r=vt.useRef(null),i=vt.useRef(e),s=vt.useRef("none"),a=e?"mounted":"unmounted",[o,l]=function(e,t){return vt.useReducer((e,n)=>t[e][n]??e,e)}(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return vt.useEffect(()=>{const e=Po(r.current);s.current="mounted"===o?e:"none"},[o]),Mi(()=>{const t=r.current,n=i.current;if(n!==e){const r=s.current,a=Po(t);if(e)l("MOUNT");else if("none"===a||"none"===t?.display)l("UNMOUNT");else{l(n&&r!==a?"ANIMATION_OUT":"UNMOUNT")}i.current=e}},[e,l]),Mi(()=>{if(t){let e;const n=t.ownerDocument.defaultView??window,a=s=>{const a=Po(r.current).includes(CSS.escape(s.animationName));if(s.target===t&&a&&(l("ANIMATION_END"),!i.current)){const r=t.style.animationFillMode;t.style.animationFillMode="forwards",e=n.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=r)})}},o=e=>{e.target===t&&(s.current=Po(r.current))};return t.addEventListener("animationstart",o),t.addEventListener("animationcancel",a),t.addEventListener("animationend",a),()=>{n.clearTimeout(e),t.removeEventListener("animationstart",o),t.removeEventListener("animationcancel",a),t.removeEventListener("animationend",a)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:vt.useCallback(e=>{r.current=e?getComputedStyle(e):null,n(e)},[])}}(t),i="function"==typeof n?n({present:r.isPresent}):vt.Children.only(n),s=Xr(r.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(i));return"function"==typeof n||r.isPresent?vt.cloneElement(i,{ref:s}):null};function Po(e){return e?.animationName||"none"}Ro.displayName="Presence";var Ao="rovingFocusGroup.onEntryFocus",No={bubbles:!1,cancelable:!0},Do="RovingFocusGroup",[Lo,Oo,Fo]=Bi(Do),[zo,Bo]=Ci(Do,[Fo]),[Ho,$o]=zo(Do),Wo=vt.forwardRef((t,n)=>e.jsx(Lo.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Lo.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Xo,{...t,ref:n})})}));Wo.displayName=Do;var Xo=vt.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:r,orientation:i,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=t,p=vt.useRef(null),f=Xr(n,p),m=$i(a),[g,b]=ji({prop:o,defaultProp:l??null,onChange:c,caller:Do}),[U,y]=vt.useState(!1),x=Wi(d),v=Oo(r),w=vt.useRef(!1),[S,E]=vt.useState(0);return vt.useEffect(()=>{const e=p.current;if(e)return e.addEventListener(Ao,x),()=>e.removeEventListener(Ao,x)},[x]),e.jsx(Ho,{scope:r,orientation:i,dir:m,loop:s,currentTabStopId:g,onItemFocus:vt.useCallback(e=>b(e),[b]),onItemShiftTab:vt.useCallback(()=>y(!0),[]),onFocusableItemAdd:vt.useCallback(()=>E(e=>e+1),[]),onFocusableItemRemove:vt.useCallback(()=>E(e=>e-1),[]),children:e.jsx(Ni.div,{tabIndex:U||0===S?-1:0,"data-orientation":i,...h,ref:f,style:{outline:"none",...t.style},onMouseDown:ki(t.onMouseDown,()=>{w.current=!0}),onFocus:ki(t.onFocus,e=>{const t=!w.current;if(e.target===e.currentTarget&&t&&!U){const t=new CustomEvent(Ao,No);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=v().filter(e=>e.focusable);qo([e.find(e=>e.active),e.find(e=>e.id===g),...e].filter(Boolean).map(e=>e.ref.current),u)}}w.current=!1}),onBlur:ki(t.onBlur,()=>y(!1))})})}),Vo="RovingFocusGroupItem",Go=vt.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:r,focusable:i=!0,active:s=!1,tabStopId:a,children:o,...l}=t,c=fs(),d=a||c,u=$o(Vo,r),h=u.currentTabStopId===d,p=Oo(r),{onFocusableItemAdd:f,onFocusableItemRemove:m,currentTabStopId:g}=u;return vt.useEffect(()=>{if(i)return f(),()=>m()},[i,f,m]),e.jsx(Lo.ItemSlot,{scope:r,id:d,focusable:i,active:s,children:e.jsx(Ni.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...l,ref:n,onMouseDown:ki(t.onMouseDown,e=>{i?u.onItemFocus(d):e.preventDefault()}),onFocus:ki(t.onFocus,()=>u.onItemFocus(d)),onKeyDown:ki(t.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void u.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:Yo[r]}(e,u.orientation,u.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let i=p().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)i.reverse();else if("prev"===t||"next"===t){"prev"===t&&i.reverse();const s=i.indexOf(e.currentTarget);i=u.loop?(r=s+1,(n=i).map((e,t)=>n[(r+t)%n.length])):i.slice(s+1)}setTimeout(()=>qo(i))}var n,r}),children:"function"==typeof o?o({isCurrentTabStop:h,hasTabStop:null!=g}):o})})});Go.displayName=Vo;var Yo={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function qo(e,t=!1){const n=document.activeElement;for(const r of e){if(r===n)return;if(r.focus({preventScroll:t}),document.activeElement!==n)return}}var Zo=Wo,Ko=Go;function Qo(t){const n=Jo(t),r=vt.forwardRef((t,r)=>{const{children:i,...s}=t,a=vt.Children.toArray(i),o=a.find(tl);if(o){const t=o.props.children,i=a.map(e=>e===o?vt.Children.count(t)>1?vt.Children.only(null):vt.isValidElement(t)?t.props.children:null:e);return e.jsx(n,{...s,ref:r,children:vt.isValidElement(t)?vt.cloneElement(t,void 0,i):null})}return e.jsx(n,{...s,ref:r,children:i})});return r.displayName=`${t}.Slot`,r}function Jo(e){const t=vt.forwardRef((e,t)=>{const{children:n,...r}=e;if(vt.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),i=function(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(n[r]=i):"style"===r?n[r]={...i,...s}:"className"===r&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==vt.Fragment&&(i.ref=t?Wr(t,e):e),vt.cloneElement(n,i)}return vt.Children.count(n)>1?vt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var el=Symbol("radix.slottable");function tl(e){return vt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===el}var nl=new WeakMap,rl=new WeakMap,il={},sl=0,al=function(e){return e&&(e.host||al(e.parentNode))},ol=function(e,t,n,r){var i=function(e,t){return t.map(function(t){if(e.contains(t))return t;var n=al(t);return n&&e.contains(n)?n:null}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);il[n]||(il[n]=new WeakMap);var s=il[n],a=[],o=new Set,l=new Set(i),c=function(e){e&&!o.has(e)&&(o.add(e),c(e.parentNode))};i.forEach(c);var d=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(o.has(e))d(e);else try{var t=e.getAttribute(r),i=null!==t&&"false"!==t,l=(nl.get(e)||0)+1,c=(s.get(e)||0)+1;nl.set(e,l),s.set(e,c),a.push(e),1===l&&i&&rl.set(e,!0),1===c&&e.setAttribute(n,"true"),i||e.setAttribute(r,"true")}catch(lA){}})};return d(t),o.clear(),sl++,function(){a.forEach(function(e){var t=nl.get(e)-1,i=s.get(e)-1;nl.set(e,t),s.set(e,i),t||(rl.has(e)||e.removeAttribute(r),rl.delete(e)),i||e.removeAttribute(n)}),--sl||(nl=new WeakMap,nl=new WeakMap,rl=new WeakMap,il={})}},ll=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),ol(r,i,n,"aria-hidden")):function(){return null}},cl=function(){return cl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},cl.apply(this,arguments)};function dl(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}"function"==typeof SuppressedError&&SuppressedError;var ul="right-scroll-bar-position",hl="width-before-scroll-bar";function pl(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var fl="undefined"!=typeof window?vt.useLayoutEffect:vt.useEffect,ml=new WeakMap;function gl(e,t){var n,r,i,s=(n=null,r=function(t){return e.forEach(function(e){return pl(e,t)})},(i=vt.useState(function(){return{value:n,callback:r,facade:{get current(){return i.value},set current(e){var t=i.value;t!==e&&(i.value=e,i.callback(e,t))}}}})[0]).callback=r,i.facade);return fl(function(){var t=ml.get(s);if(t){var n=new Set(t),r=new Set(e),i=s.current;n.forEach(function(e){r.has(e)||pl(e,null)}),r.forEach(function(e){n.has(e)||pl(e,i)})}ml.set(s,e)},[e]),s}function bl(e){return e}var Ul=function(e){var t=e.sideCar,n=dl(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return vt.createElement(r,cl({},n))};Ul.isSideCarExport=!0;var yl=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=bl);var n=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var i=t(e,r);return n.push(i),function(){n=n.filter(function(e){return e!==i})}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var i=n;n=[],i.forEach(e),t=n}var s=function(){var n=t;t=[],n.forEach(e)},a=function(){return Promise.resolve().then(s)};a(),n={push:function(e){t.push(e),a()},filter:function(e){return t=t.filter(e),n}}}}}(null);return t.options=cl({async:!0,ssr:!1},e),t}(),xl=function(){},vl=vt.forwardRef(function(e,t){var n=vt.useRef(null),r=vt.useState({onScrollCapture:xl,onWheelCapture:xl,onTouchMoveCapture:xl}),i=r[0],s=r[1],a=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,d=e.enabled,u=e.shards,h=e.sideCar,p=e.noRelative,f=e.noIsolation,m=e.inert,g=e.allowPinchZoom,b=e.as,U=void 0===b?"div":b,y=e.gapMode,x=dl(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),v=h,w=gl([n,t]),S=cl(cl({},x),i);return vt.createElement(vt.Fragment,null,d&&vt.createElement(v,{sideCar:yl,removeScrollBar:c,shards:u,noRelative:p,noIsolation:f,inert:m,setCallbacks:s,allowPinchZoom:!!g,lockRef:n,gapMode:y}),a?vt.cloneElement(vt.Children.only(o),cl(cl({},S),{ref:w})):vt.createElement(U,cl({},S,{className:l,ref:w}),o))});vl.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},vl.classNames={fullWidth:hl,zeroRight:ul};function wl(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var Sl=function(){var e=0,t=null;return{add:function(n){var r,i;0==e&&(t=wl())&&(i=n,(r=t).styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},El=function(){var e,t=(e=Sl(),function(t,n){vt.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])});return function(e){var n=e.styles,r=e.dynamic;return t(n,r),null}},kl={left:0,top:0,right:0,gap:0},Cl=function(e){return parseInt(e||"",10)||0},_l=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return kl;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[Cl(n),Cl(r),Cl(i)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Ml=El(),Il="data-scroll-locked",jl=function(e,t,n,r){var i=e.left,s=e.top,a=e.right,o=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(o,"px ").concat(r,";\n  }\n  body[").concat(Il,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(a,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(ul," {\n    right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(hl," {\n    margin-right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(ul," .").concat(ul," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(hl," .").concat(hl," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(Il,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},Tl=function(){var e=parseInt(document.body.getAttribute(Il)||"0",10);return isFinite(e)?e:0},Rl=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=void 0===r?"margin":r;vt.useEffect(function(){return document.body.setAttribute(Il,(Tl()+1).toString()),function(){var e=Tl()-1;e<=0?document.body.removeAttribute(Il):document.body.setAttribute(Il,e.toString())}},[]);var s=vt.useMemo(function(){return _l(i)},[i]);return vt.createElement(Ml,{styles:jl(s,!t,i,n?"":"!important")})},Pl=!1;if("undefined"!=typeof window)try{var Al=Object.defineProperty({},"passive",{get:function(){return Pl=!0,!0}});window.addEventListener("test",Al,Al),window.removeEventListener("test",Al,Al)}catch(Ooe){Pl=!1}var Nl=!!Pl&&{passive:!1},Dl=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},Ll=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),Ol(e,r)){var i=Fl(e,r);if(i[1]>i[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Ol=function(e,t){return"v"===e?function(e){return Dl(e,"overflowY")}(t):function(e){return Dl(e,"overflowX")}(t)},Fl=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},zl=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Bl=function(e){return[e.deltaX,e.deltaY]},Hl=function(e){return e&&"current"in e?e.current:e},$l=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},Wl=0,Xl=[];function Vl(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Gl=(Yl=function(e){var t=vt.useRef([]),n=vt.useRef([0,0]),r=vt.useRef(),i=vt.useState(Wl++)[0],s=vt.useState(El)[0],a=vt.useRef(e);vt.useEffect(function(){a.current=e},[e]),vt.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(Hl),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var o=vt.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!a.current.allowPinchZoom;var i,s=zl(e),o=n.current,l="deltaX"in e?e.deltaX:o[0]-s[0],c="deltaY"in e?e.deltaY:o[1]-s[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var h=window.getSelection(),p=h&&h.anchorNode;if(p&&(p===d||p.contains(d)))return!1;var f=Ll(u,d);if(!f)return!0;if(f?i=u:(i="v"===u?"h":"v",f=Ll(u,d)),!f)return!1;if(!r.current&&"changedTouches"in e&&(l||c)&&(r.current=i),!i)return!0;var m=r.current||i;return function(e,t,n,r){var i=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),s=i*r,a=n.target,o=t.contains(a),l=!1,c=s>0,d=0,u=0;do{if(!a)break;var h=Fl(e,a),p=h[0],f=h[1]-h[2]-i*p;(p||f)&&Ol(e,a)&&(d+=f,u+=p);var m=a.parentNode;a=m&&m.nodeType===Node.DOCUMENT_FRAGMENT_NODE?m.host:m}while(!o&&a!==document.body||o&&(t.contains(a)||t===a));return(c&&Math.abs(d)<1||!c&&Math.abs(u)<1)&&(l=!0),l}(m,t,e,"h"===m?l:c)},[]),l=vt.useCallback(function(e){var n=e;if(Xl.length&&Xl[Xl.length-1]===s){var r="deltaY"in n?Bl(n):zl(n),i=t.current.filter(function(e){return e.name===n.type&&(e.target===n.target||n.target===e.shadowParent)&&(t=e.delta,i=r,t[0]===i[0]&&t[1]===i[1]);var t,i})[0];if(i&&i.should)n.cancelable&&n.preventDefault();else if(!i){var l=(a.current.shards||[]).map(Hl).filter(Boolean).filter(function(e){return e.contains(n.target)});(l.length>0?o(n,l[0]):!a.current.noIsolation)&&n.cancelable&&n.preventDefault()}}},[]),c=vt.useCallback(function(e,n,r,i){var s={name:e,delta:n,target:r,should:i,shadowParent:Vl(r)};t.current.push(s),setTimeout(function(){t.current=t.current.filter(function(e){return e!==s})},1)},[]),d=vt.useCallback(function(e){n.current=zl(e),r.current=void 0},[]),u=vt.useCallback(function(t){c(t.type,Bl(t),t.target,o(t,e.lockRef.current))},[]),h=vt.useCallback(function(t){c(t.type,zl(t),t.target,o(t,e.lockRef.current))},[]);vt.useEffect(function(){return Xl.push(s),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Nl),document.addEventListener("touchmove",l,Nl),document.addEventListener("touchstart",d,Nl),function(){Xl=Xl.filter(function(e){return e!==s}),document.removeEventListener("wheel",l,Nl),document.removeEventListener("touchmove",l,Nl),document.removeEventListener("touchstart",d,Nl)}},[]);var p=e.removeScrollBar,f=e.inert;return vt.createElement(vt.Fragment,null,f?vt.createElement(s,{styles:$l(i)}):null,p?vt.createElement(Rl,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},yl.useMedium(Yl),Ul);var Yl,ql=vt.forwardRef(function(e,t){return vt.createElement(vl,cl({},e,{ref:t,sideCar:Gl}))});ql.classNames=vl.classNames;var Zl=["Enter"," "],Kl=["ArrowUp","PageDown","End"],Ql=["ArrowDown","PageUp","Home",...Kl],Jl={ltr:[...Zl,"ArrowRight"],rtl:[...Zl,"ArrowLeft"]},ec={ltr:["ArrowLeft"],rtl:["ArrowRight"]},tc="Menu",[nc,rc,ic]=Bi(tc),[sc,ac]=Ci(tc,[ic,uo,Bo]),oc=uo(),lc=Bo(),[cc,dc]=sc(tc),[uc,hc]=sc(tc),pc=t=>{const{__scopeMenu:n,open:r=!1,children:i,dir:s,onOpenChange:a,modal:o=!0}=t,l=oc(n),[c,d]=vt.useState(null),u=vt.useRef(!1),h=Wi(a),p=$i(s);return vt.useEffect(()=>{const e=()=>{u.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>u.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),e.jsx(_o,{...l,children:e.jsx(cc,{scope:n,open:r,onOpenChange:h,content:c,onContentChange:d,children:e.jsx(uc,{scope:n,onClose:vt.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:p,modal:o,children:i})})})};pc.displayName=tc;var fc=vt.forwardRef((t,n)=>{const{__scopeMenu:r,...i}=t,s=oc(r);return e.jsx(Mo,{...s,...i,ref:n})});fc.displayName="MenuAnchor";var mc="MenuPortal",[gc,bc]=sc(mc,{forceMount:void 0}),Uc=t=>{const{__scopeMenu:n,forceMount:r,children:i,container:s}=t,a=dc(mc,n);return e.jsx(gc,{scope:n,forceMount:r,children:e.jsx(Ro,{present:r||a.open,children:e.jsx(To,{asChild:!0,container:s,children:i})})})};Uc.displayName=mc;var yc="MenuContent",[xc,vc]=sc(yc),wc=vt.forwardRef((t,n)=>{const r=bc(yc,t.__scopeMenu),{forceMount:i=r.forceMount,...s}=t,a=dc(yc,t.__scopeMenu),o=hc(yc,t.__scopeMenu);return e.jsx(nc.Provider,{scope:t.__scopeMenu,children:e.jsx(Ro,{present:i||a.open,children:e.jsx(nc.Slot,{scope:t.__scopeMenu,children:o.modal?e.jsx(Sc,{...s,ref:n}):e.jsx(Ec,{...s,ref:n})})})})}),Sc=vt.forwardRef((t,n)=>{const r=dc(yc,t.__scopeMenu),i=vt.useRef(null),s=Xr(n,i);return vt.useEffect(()=>{const e=i.current;if(e)return ll(e)},[]),e.jsx(Cc,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:ki(t.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),Ec=vt.forwardRef((t,n)=>{const r=dc(yc,t.__scopeMenu);return e.jsx(Cc,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),kc=Qo("MenuContent.ScrollLock"),Cc=vt.forwardRef((t,n)=>{const{__scopeMenu:r,loop:i=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:p,onDismiss:f,disableOutsideScroll:m,...g}=t,b=dc(yc,r),U=hc(yc,r),y=oc(r),x=lc(r),v=rc(r),[w,S]=vt.useState(null),E=vt.useRef(null),k=Xr(n,E,b.onContentChange),C=vt.useRef(0),_=vt.useRef(""),M=vt.useRef(0),I=vt.useRef(null),j=vt.useRef("right"),T=vt.useRef(0),R=m?ql:vt.Fragment,P=m?{as:kc,allowPinchZoom:!0}:void 0,A=e=>{const t=_.current+e,n=v().filter(e=>!e.disabled),r=document.activeElement,i=n.find(e=>e.ref.current===r)?.textValue,s=function(e,t,n){const r=t.length>1&&Array.from(t).every(e=>e===t[0]),i=r?t[0]:t,s=n?e.indexOf(n):-1;let a=(o=e,l=Math.max(s,0),o.map((e,t)=>o[(l+t)%o.length]));var o,l;1===i.length&&(a=a.filter(e=>e!==n));const c=a.find(e=>e.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}(n.map(e=>e.textValue),t,i),a=n.find(e=>e.textValue===s)?.ref.current;!function e(t){_.current=t,window.clearTimeout(C.current),""!==t&&(C.current=window.setTimeout(()=>e(""),1e3))}(t),a&&setTimeout(()=>a.focus())};vt.useEffect(()=>()=>window.clearTimeout(C.current),[]),es();const N=vt.useCallback(e=>j.current===I.current?.side&&function(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return function(e,t){const{x:n,y:r}=e;let i=!1;for(let s=0,a=t.length-1;s<t.length;a=s++){const e=t[s],o=t[a],l=e.x,c=e.y,d=o.x,u=o.y;c>r!=u>r&&n<(d-l)*(r-c)/(u-c)+l&&(i=!i)}return i}(n,t)}(e,I.current?.area),[]);return e.jsx(xc,{scope:r,searchRef:_,onItemEnter:vt.useCallback(e=>{N(e)&&e.preventDefault()},[N]),onItemLeave:vt.useCallback(e=>{N(e)||(E.current?.focus(),S(null))},[N]),onTriggerLeave:vt.useCallback(e=>{N(e)&&e.preventDefault()},[N]),pointerGraceTimerRef:M,onPointerGraceIntentChange:vt.useCallback(e=>{I.current=e},[]),children:e.jsx(R,{...P,children:e.jsx(ss,{asChild:!0,trapped:s,onMountAutoFocus:ki(a,e=>{e.preventDefault(),E.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:e.jsx(Zi,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:p,onDismiss:f,children:e.jsx(Zo,{asChild:!0,...x,dir:U.dir,orientation:"vertical",loop:i,currentTabStopId:w,onCurrentTabStopIdChange:S,onEntryFocus:ki(c,e=>{U.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(Io,{role:"menu","aria-orientation":"vertical","data-state":Qc(b.open),"data-radix-menu-content":"",dir:U.dir,...y,...g,ref:k,style:{outline:"none",...g.style},onKeyDown:ki(g.onKeyDown,e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,r=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!n&&r&&A(e.key));const i=E.current;if(e.target!==i)return;if(!Ql.includes(e.key))return;e.preventDefault();const s=v().filter(e=>!e.disabled).map(e=>e.ref.current);Kl.includes(e.key)&&s.reverse(),function(e){const t=document.activeElement;for(const n of e){if(n===t)return;if(n.focus(),document.activeElement!==t)return}}(s)}),onBlur:ki(t.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(C.current),_.current="")}),onPointerMove:ki(t.onPointerMove,td(e=>{const t=e.target,n=T.current!==e.clientX;if(e.currentTarget.contains(t)&&n){const t=e.clientX>T.current?"right":"left";j.current=t,T.current=e.clientX}}))})})})})})})});wc.displayName=yc;var _c=vt.forwardRef((t,n)=>{const{__scopeMenu:r,...i}=t;return e.jsx(Ni.div,{role:"group",...i,ref:n})});_c.displayName="MenuGroup";var Mc=vt.forwardRef((t,n)=>{const{__scopeMenu:r,...i}=t;return e.jsx(Ni.div,{...i,ref:n})});Mc.displayName="MenuLabel";var Ic="MenuItem",jc="menu.itemSelect",Tc=vt.forwardRef((t,n)=>{const{disabled:r=!1,onSelect:i,...s}=t,a=vt.useRef(null),o=hc(Ic,t.__scopeMenu),l=vc(Ic,t.__scopeMenu),c=Xr(n,a),d=vt.useRef(!1);return e.jsx(Rc,{...s,ref:c,disabled:r,onClick:ki(t.onClick,()=>{const e=a.current;if(!r&&e){const t=new CustomEvent(jc,{bubbles:!0,cancelable:!0});e.addEventListener(jc,e=>i?.(e),{once:!0}),Di(e,t),t.defaultPrevented?d.current=!1:o.onClose()}}),onPointerDown:e=>{t.onPointerDown?.(e),d.current=!0},onPointerUp:ki(t.onPointerUp,e=>{d.current||e.currentTarget?.click()}),onKeyDown:ki(t.onKeyDown,e=>{const t=""!==l.searchRef.current;r||t&&" "===e.key||Zl.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});Tc.displayName=Ic;var Rc=vt.forwardRef((t,n)=>{const{__scopeMenu:r,disabled:i=!1,textValue:s,...a}=t,o=vc(Ic,r),l=lc(r),c=vt.useRef(null),d=Xr(n,c),[u,h]=vt.useState(!1),[p,f]=vt.useState("");return vt.useEffect(()=>{const e=c.current;e&&f((e.textContent??"").trim())},[a.children]),e.jsx(nc.ItemSlot,{scope:r,disabled:i,textValue:s??p,children:e.jsx(Ko,{asChild:!0,...l,focusable:!i,children:e.jsx(Ni.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...a,ref:d,onPointerMove:ki(t.onPointerMove,td(e=>{if(i)o.onItemLeave(e);else if(o.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}})),onPointerLeave:ki(t.onPointerLeave,td(e=>o.onItemLeave(e))),onFocus:ki(t.onFocus,()=>h(!0)),onBlur:ki(t.onBlur,()=>h(!1))})})})}),Pc=vt.forwardRef((t,n)=>{const{checked:r=!1,onCheckedChange:i,...s}=t;return e.jsx(Bc,{scope:t.__scopeMenu,checked:r,children:e.jsx(Tc,{role:"menuitemcheckbox","aria-checked":Jc(r)?"mixed":r,...s,ref:n,"data-state":ed(r),onSelect:ki(s.onSelect,()=>i?.(!!Jc(r)||!r),{checkForDefaultPrevented:!1})})})});Pc.displayName="MenuCheckboxItem";var Ac="MenuRadioGroup",[Nc,Dc]=sc(Ac,{value:void 0,onValueChange:()=>{}}),Lc=vt.forwardRef((t,n)=>{const{value:r,onValueChange:i,...s}=t,a=Wi(i);return e.jsx(Nc,{scope:t.__scopeMenu,value:r,onValueChange:a,children:e.jsx(_c,{...s,ref:n})})});Lc.displayName=Ac;var Oc="MenuRadioItem",Fc=vt.forwardRef((t,n)=>{const{value:r,...i}=t,s=Dc(Oc,t.__scopeMenu),a=r===s.value;return e.jsx(Bc,{scope:t.__scopeMenu,checked:a,children:e.jsx(Tc,{role:"menuitemradio","aria-checked":a,...i,ref:n,"data-state":ed(a),onSelect:ki(i.onSelect,()=>s.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});Fc.displayName=Oc;var zc="MenuItemIndicator",[Bc,Hc]=sc(zc,{checked:!1}),$c=vt.forwardRef((t,n)=>{const{__scopeMenu:r,forceMount:i,...s}=t,a=Hc(zc,r);return e.jsx(Ro,{present:i||Jc(a.checked)||!0===a.checked,children:e.jsx(Ni.span,{...s,ref:n,"data-state":ed(a.checked)})})});$c.displayName=zc;var Wc=vt.forwardRef((t,n)=>{const{__scopeMenu:r,...i}=t;return e.jsx(Ni.div,{role:"separator","aria-orientation":"horizontal",...i,ref:n})});Wc.displayName="MenuSeparator";var Xc=vt.forwardRef((t,n)=>{const{__scopeMenu:r,...i}=t,s=oc(r);return e.jsx(jo,{...s,...i,ref:n})});Xc.displayName="MenuArrow";var[Vc,Gc]=sc("MenuSub"),Yc="MenuSubTrigger",qc=vt.forwardRef((t,n)=>{const r=dc(Yc,t.__scopeMenu),i=hc(Yc,t.__scopeMenu),s=Gc(Yc,t.__scopeMenu),a=vc(Yc,t.__scopeMenu),o=vt.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,d={__scopeMenu:t.__scopeMenu},u=vt.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return vt.useEffect(()=>u,[u]),vt.useEffect(()=>{const e=l.current;return()=>{window.clearTimeout(e),c(null)}},[l,c]),e.jsx(fc,{asChild:!0,...d,children:e.jsx(Rc,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":Qc(r.open),...t,ref:Wr(n,s.onTriggerChange),onClick:e=>{t.onClick?.(e),t.disabled||e.defaultPrevented||(e.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:ki(t.onPointerMove,td(e=>{a.onItemEnter(e),e.defaultPrevented||t.disabled||r.open||o.current||(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:ki(t.onPointerLeave,td(e=>{u();const t=r.content?.getBoundingClientRect();if(t){const n=r.content?.dataset.side,i="right"===n,s=i?-5:5,o=t[i?"left":"right"],c=t[i?"right":"left"];a.onPointerGraceIntentChange({area:[{x:e.clientX+s,y:e.clientY},{x:o,y:t.top},{x:c,y:t.top},{x:c,y:t.bottom},{x:o,y:t.bottom}],side:n}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(e),e.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:ki(t.onKeyDown,e=>{const n=""!==a.searchRef.current;t.disabled||n&&" "===e.key||Jl[i.dir].includes(e.key)&&(r.onOpenChange(!0),r.content?.focus(),e.preventDefault())})})})});qc.displayName=Yc;var Zc="MenuSubContent",Kc=vt.forwardRef((t,n)=>{const r=bc(yc,t.__scopeMenu),{forceMount:i=r.forceMount,...s}=t,a=dc(yc,t.__scopeMenu),o=hc(yc,t.__scopeMenu),l=Gc(Zc,t.__scopeMenu),c=vt.useRef(null),d=Xr(n,c);return e.jsx(nc.Provider,{scope:t.__scopeMenu,children:e.jsx(Ro,{present:i||a.open,children:e.jsx(nc.Slot,{scope:t.__scopeMenu,children:e.jsx(Cc,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:d,align:"start",side:"rtl"===o.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{o.isUsingKeyboardRef.current&&c.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:ki(t.onFocusOutside,e=>{e.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:ki(t.onEscapeKeyDown,e=>{o.onClose(),e.preventDefault()}),onKeyDown:ki(t.onKeyDown,e=>{const t=e.currentTarget.contains(e.target),n=ec[o.dir].includes(e.key);t&&n&&(a.onOpenChange(!1),l.trigger?.focus(),e.preventDefault())})})})})})});function Qc(e){return e?"open":"closed"}function Jc(e){return"indeterminate"===e}function ed(e){return Jc(e)?"indeterminate":e?"checked":"unchecked"}function td(e){return t=>"mouse"===t.pointerType?e(t):void 0}Kc.displayName=Zc;var nd=pc,rd=fc,id=Uc,sd=wc,ad=_c,od=Mc,ld=Tc,cd=Pc,dd=Lc,ud=Fc,hd=$c,pd=Wc,fd=Xc,md=qc,gd=Kc,bd="DropdownMenu",[Ud]=Ci(bd,[ac]),yd=ac(),[xd,vd]=Ud(bd),wd=t=>{const{__scopeDropdownMenu:n,children:r,dir:i,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=t,c=yd(n),d=vt.useRef(null),[u,h]=ji({prop:s,defaultProp:a??!1,onChange:o,caller:bd});return e.jsx(xd,{scope:n,triggerId:fs(),triggerRef:d,contentId:fs(),open:u,onOpenChange:h,onOpenToggle:vt.useCallback(()=>h(e=>!e),[h]),modal:l,children:e.jsx(nd,{...c,open:u,onOpenChange:h,dir:i,modal:l,children:r})})};wd.displayName=bd;var Sd="DropdownMenuTrigger",Ed=vt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,disabled:i=!1,...s}=t,a=vd(Sd,r),o=yd(r);return e.jsx(rd,{asChild:!0,...o,children:e.jsx(Ni.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...s,ref:Wr(n,a.triggerRef),onPointerDown:ki(t.onPointerDown,e=>{i||0!==e.button||!1!==e.ctrlKey||(a.onOpenToggle(),a.open||e.preventDefault())}),onKeyDown:ki(t.onKeyDown,e=>{i||(["Enter"," "].includes(e.key)&&a.onOpenToggle(),"ArrowDown"===e.key&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});Ed.displayName=Sd;var kd=t=>{const{__scopeDropdownMenu:n,...r}=t,i=yd(n);return e.jsx(id,{...i,...r})};kd.displayName="DropdownMenuPortal";var Cd="DropdownMenuContent",_d=vt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,s=vd(Cd,r),a=yd(r),o=vt.useRef(!1);return e.jsx(sd,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...i,ref:n,onCloseAutoFocus:ki(t.onCloseAutoFocus,e=>{o.current||s.triggerRef.current?.focus(),o.current=!1,e.preventDefault()}),onInteractOutside:ki(t.onInteractOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;s.modal&&!r||(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});_d.displayName=Cd;var Md=vt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,s=yd(r);return e.jsx(ad,{...s,...i,ref:n})});Md.displayName="DropdownMenuGroup";var Id=vt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,s=yd(r);return e.jsx(od,{...s,...i,ref:n})});Id.displayName="DropdownMenuLabel";var jd=vt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,s=yd(r);return e.jsx(ld,{...s,...i,ref:n})});jd.displayName="DropdownMenuItem";var Td=vt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,s=yd(r);return e.jsx(cd,{...s,...i,ref:n})});Td.displayName="DropdownMenuCheckboxItem";vt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,s=yd(r);return e.jsx(dd,{...s,...i,ref:n})}).displayName="DropdownMenuRadioGroup";var Rd=vt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,s=yd(r);return e.jsx(ud,{...s,...i,ref:n})});Rd.displayName="DropdownMenuRadioItem";var Pd=vt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,s=yd(r);return e.jsx(hd,{...s,...i,ref:n})});Pd.displayName="DropdownMenuItemIndicator";var Ad=vt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,s=yd(r);return e.jsx(pd,{...s,...i,ref:n})});Ad.displayName="DropdownMenuSeparator";vt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,s=yd(r);return e.jsx(fd,{...s,...i,ref:n})}).displayName="DropdownMenuArrow";var Nd=vt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,s=yd(r);return e.jsx(md,{...s,...i,ref:n})});Nd.displayName="DropdownMenuSubTrigger";var Dd=vt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,s=yd(r);return e.jsx(gd,{...s,...i,ref:n,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Dd.displayName="DropdownMenuSubContent";var Ld=kd,Od=_d,Fd=Id,zd=jd,Bd=Td,Hd=Rd,$d=Pd,Wd=Ad,Xd=Nd,Vd=Dd;const Gd=wd,Yd=Ed,qd=Md;vt.forwardRef(({className:t,inset:n,children:r,...i},s)=>e.jsxs(Xd,{ref:s,className:ir("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",t),...i,children:[r,e.jsx(hi,{className:"ml-auto"})]})).displayName=Xd.displayName;vt.forwardRef(({className:t,...n},r)=>e.jsx(Vd,{ref:r,className:ir("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...n})).displayName=Vd.displayName;const Zd=vt.forwardRef(({className:t,sideOffset:n=4,...r},i)=>e.jsx(Ld,{children:e.jsx(Od,{ref:i,sideOffset:n,className:ir("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...r})}));Zd.displayName=Od.displayName;const Kd=vt.forwardRef(({className:t,inset:n,...r},i)=>e.jsx(zd,{ref:i,className:ir("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",n&&"pl-8",t),...r}));Kd.displayName=zd.displayName;vt.forwardRef(({className:t,children:n,checked:r,...i},s)=>e.jsxs(Bd,{ref:s,className:ir("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...i,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx($d,{children:e.jsx(ui,{className:"h-4 w-4"})})}),n]})).displayName=Bd.displayName;vt.forwardRef(({className:t,children:n,...r},i)=>e.jsxs(Hd,{ref:i,className:ir("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx($d,{children:e.jsx(mi,{className:"h-2 w-2 fill-current"})})}),n]})).displayName=Hd.displayName;const Qd=vt.forwardRef(({className:t,inset:n,...r},i)=>e.jsx(Fd,{ref:i,className:ir("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",t),...r}));Qd.displayName=Fd.displayName;const Jd=vt.forwardRef(({className:t,...n},r)=>e.jsx(Wd,{ref:r,className:ir("-mx-1 my-1 h-px bg-muted",t),...n}));function eu(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=n.reduce((t,{useScope:n,scopeName:r})=>({...t,...n(e)[`__scope${r}`]}),{});return vt.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}Jd.displayName=Wd.displayName;var tu,nu,ru=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((t,n)=>{const r=qr(`Primitive.${n}`),i=vt.forwardRef((t,i)=>{const{asChild:s,...a}=t,o=s?r:n;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),e.jsx(o,{...a,ref:i})});return i.displayName=`Primitive.${n}`,{...t,[n]:i}},{}),iu={exports:{}},su={};function au(){return nu||(nu=1,iu.exports=function(){if(tu)return su;tu=1;var e=kt(),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useState,r=e.useEffect,i=e.useLayoutEffect,s=e.useDebugValue;function a(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!t(e,r)}catch(i){return!0}}var o="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var o=t(),l=n({inst:{value:o,getSnapshot:t}}),c=l[0].inst,d=l[1];return i(function(){c.value=o,c.getSnapshot=t,a(c)&&d({inst:c})},[e,o,t]),r(function(){return a(c)&&d({inst:c}),e(function(){a(c)&&d({inst:c})})},[e]),s(o),o};return su.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:o,su}()),iu.exports}var ou=au();function lu(){return()=>{}}var cu="Avatar",[du]=function(t,n=[]){let r=[];const i=()=>{const e=r.map(e=>vt.createContext(e));return function(n){const r=n?.[t]||e;return vt.useMemo(()=>({[`__scope${t}`]:{...n,[t]:r}}),[n,r])}};return i.scopeName=t,[function(n,i){const s=vt.createContext(i);s.displayName=n+"Context";const a=r.length;r=[...r,i];const o=n=>{const{scope:r,children:i,...o}=n,l=r?.[t]?.[a]||s,c=vt.useMemo(()=>o,Object.values(o));return e.jsx(l.Provider,{value:c,children:i})};return o.displayName=n+"Provider",[o,function(e,r){const o=r?.[t]?.[a]||s,l=vt.useContext(o);if(l)return l;if(void 0!==i)return i;throw new Error(`\`${e}\` must be used within \`${n}\``)}]},eu(i,...n)]}(cu),[uu,hu]=du(cu),pu=vt.forwardRef((t,n)=>{const{__scopeAvatar:r,...i}=t,[s,a]=vt.useState("idle");return e.jsx(uu,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:e.jsx(ru.span,{...i,ref:n})})});pu.displayName=cu;var fu="AvatarImage",mu=vt.forwardRef((t,n)=>{const{__scopeAvatar:r,src:i,onLoadingStatusChange:s=()=>{},...a}=t,o=hu(fu,r),l=function(e,{referrerPolicy:t,crossOrigin:n}){const r=ou.useSyncExternalStore(lu,()=>!0,()=>!1),i=vt.useRef(null),s=r?(i.current||(i.current=new window.Image),i.current):null,[a,o]=vt.useState(()=>Uu(s,e));return Mi(()=>{o(Uu(s,e))},[s,e]),Mi(()=>{const e=e=>()=>{o(e)};if(!s)return;const r=e("loaded"),i=e("error");return s.addEventListener("load",r),s.addEventListener("error",i),t&&(s.referrerPolicy=t),"string"==typeof n&&(s.crossOrigin=n),()=>{s.removeEventListener("load",r),s.removeEventListener("error",i)}},[s,n,t]),a}(i,a),c=Wi(e=>{s(e),o.onImageLoadingStatusChange(e)});return Mi(()=>{"idle"!==l&&c(l)},[l,c]),"loaded"===l?e.jsx(ru.img,{...a,ref:n,src:i}):null});mu.displayName=fu;var gu="AvatarFallback",bu=vt.forwardRef((t,n)=>{const{__scopeAvatar:r,delayMs:i,...s}=t,a=hu(gu,r),[o,l]=vt.useState(void 0===i);return vt.useEffect(()=>{if(void 0!==i){const e=window.setTimeout(()=>l(!0),i);return()=>window.clearTimeout(e)}},[i]),o&&"loaded"!==a.imageLoadingStatus?e.jsx(ru.span,{...s,ref:n}):null});function Uu(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}bu.displayName=gu;var yu=pu,xu=mu,vu=bu;const wu=vt.forwardRef(({className:t,...n},r)=>e.jsx(yu,{ref:r,className:ir("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...n}));wu.displayName=yu.displayName;const Su=vt.forwardRef(({className:t,...n},r)=>e.jsx(xu,{ref:r,className:ir("aspect-square h-full w-full",t),...n}));Su.displayName=xu.displayName;const Eu=vt.forwardRef(({className:t,...n},r)=>e.jsx(vu,{ref:r,className:ir("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...n}));function ku({sidebarOpen:t,onToggleSidebar:n}){const{theme:r,setTheme:i}=(()=>{const e=vt.useContext(Si);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e})();return e.jsxs("header",{className:"fixed top-0 left-0 right-0 h-[44px] lg:h-[48px] bg-[#FFFDF5] dark:bg-[#000000] border-b-[3px] lg:border-b-[4px] border-black dark:border-white z-40 flex items-center justify-between px-2 md:px-4 lg:px-5 shadow-[0_2px_0_0_rgba(0,0,0,1)] lg:shadow-[0_2px_0_0_rgba(0,0,0,1)] dark:shadow-[0_2px_0_0_rgba(255,255,255,0.3)]",children:[e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 group cursor-pointer",children:[e.jsx("div",{className:"relative flex items-center justify-center w-7 h-7 md:w-8 md:h-8 lg:w-9 lg:h-9 border-[2px] lg:border-[3px] border-black dark:border-white bg-[#FFD93D] group-hover:translate-x-0.5 group-hover:translate-y-0.5 transition-transform duration-100",children:e.jsx("span",{className:"material-symbols-outlined text-base md:text-lg text-black group-hover:rotate-12 transition-transform duration-300 font-black",children:"smart_toy"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-sm md:text-base lg:text-base font-black text-black dark:text-white uppercase tracking-tight leading-none",children:"AI TUTOR"}),e.jsxs("span",{className:"text-[7px] md:text-[8px] lg:text-[8px] font-bold text-black tracking-wider uppercase flex items-center gap-0.5 md:gap-1 bg-[#C4B5FD] px-1 md:px-1.5 py-0.5 border-[1.5px] border-black dark:border-white -ml-0.5 md:-ml-1",children:[e.jsx(xi,{className:"w-1.5 h-1.5 md:w-2 md:h-2"}),e.jsx("span",{className:"hidden sm:inline",children:"INTERACTIVE"}),e.jsx("span",{className:"sm:hidden",children:"AI"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsxs(ii,{type:"button",variant:"ghost",size:"icon",className:"w-7 h-7 md:w-8 md:h-8 lg:w-8 lg:h-8 border-[2px] border-black dark:border-white bg-[#FFFDF5] dark:bg-[#000000] hover:bg-[#FFD93D] dark:hover:bg-[#FFD93D] hover:translate-x-0.5 hover:translate-y-0.5 hover:shadow-none shadow-[1px_1px_0_0_rgba(0,0,0,1)] lg:shadow-[1px_1px_0_0_rgba(0,0,0,1)] dark:shadow-[1px_1px_0_0_rgba(255,255,255,0.3)] transition-all duration-100 text-black dark:text-white dark:hover:text-black",onClick:()=>i("dark"===r?"light":"dark"),children:[e.jsx(vi,{className:"h-[0.9rem] w-[0.9rem] md:h-[1rem] md:w-[1rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),e.jsx(Ui,{className:"absolute h-[0.9rem] w-[0.9rem] md:h-[1rem] md:w-[1rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx("span",{className:"sr-only",children:"Toggle theme"})]}),e.jsxs(Gd,{children:[e.jsx(Yd,{asChild:!0,children:e.jsx(ii,{variant:"ghost",className:"relative h-7 w-7 md:h-8 md:w-8 lg:h-8 lg:w-8 p-0 border-[2px] border-black dark:border-white bg-[#FF6B6B] hover:bg-[#FF6B6B] hover:translate-x-0.5 hover:translate-y-0.5 hover:shadow-none shadow-[1px_1px_0_0_rgba(0,0,0,1)] lg:shadow-[1px_1px_0_0_rgba(0,0,0,1)] dark:shadow-[1px_1px_0_0_rgba(255,255,255,0.3)] transition-all duration-100",children:e.jsxs(wu,{className:"h-full w-full border-none",children:[e.jsx(Su,{src:"https://github.com/shadcn.png",alt:"@shadcn"}),e.jsx(Eu,{className:"bg-transparent text-white font-black text-xs",children:"CN"})]})})}),e.jsxs(Zd,{className:"w-48 md:w-56",align:"end",forceMount:!0,children:[e.jsx(Qd,{className:"font-normal",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"User"}),e.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:"user@example.com"})]})}),e.jsx(Jd,{}),e.jsxs(qd,{children:[e.jsxs(Kd,{children:[e.jsx(wi,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Account"})]}),e.jsxs(Kd,{children:[e.jsx(yi,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Settings"})]})]}),e.jsx(Jd,{}),e.jsxs(Kd,{className:"text-[#FF6B6B] focus:text-[#FF6B6B]",children:[e.jsx(bi,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Log out"})]})]})]}),e.jsx(ii,{type:"button",variant:"ghost",size:"icon",className:"w-7 h-7 md:w-8 md:h-8 lg:w-8 lg:h-8 border-[2px] border-black dark:border-white bg-[#FFD93D] hover:bg-[#FFD93D] hover:translate-x-0.5 hover:translate-y-0.5 hover:shadow-none shadow-[1px_1px_0_0_rgba(0,0,0,1)] lg:shadow-[1px_1px_0_0_rgba(0,0,0,1)] dark:shadow-[1px_1px_0_0_rgba(255,255,255,0.3)] transition-all duration-100 text-black",onClick:n,children:t?e.jsx(Br,{className:"w-4 h-4 lg:w-[1.1rem] lg:h-[1.1rem] font-black"}):e.jsx(Hr,{className:"w-4 h-4 lg:w-[1.1rem] lg:h-[1.1rem] font-black"})})]})]})}Eu.displayName=vu.displayName;const Cu=["#FF6B6B","#FFD93D","#C4B5FD"];function _u(){const[t,n]=vt.useState([]);vt.useEffect(()=>{n((()=>{const e=[],t=["circle","square","triangle"];for(let n=0;n<12;n++){const n=t[Math.floor(Math.random()*t.length)],r=Cu[Math.floor(Math.random()*Cu.length)],i=Math.floor(29*Math.random())+29,s=Math.floor(120*Math.random())-10,a=Math.floor(120*Math.random())-10;e.push({type:n,color:r,size:i,x:s,y:a})}return e})())},[]);return e.jsx("div",{className:"background-shapes",children:t.map((t,n)=>((t,n)=>{const r="currentColor";switch(t.type){case"circle":return e.jsx("svg",{width:t.size,height:t.size,style:{position:"absolute",left:`${t.x}%`,top:`${t.y}%`},children:e.jsx("circle",{cx:t.size/2,cy:t.size/2,r:t.size/2-5,fill:t.color,stroke:r,strokeWidth:3})},n);case"square":return e.jsx("svg",{width:t.size,height:t.size,style:{position:"absolute",left:`${t.x}%`,top:`${t.y}%`},children:e.jsx("rect",{x:5,y:5,width:t.size-10,height:t.size-10,fill:t.color,stroke:r,strokeWidth:3})},n);case"rectangle":return e.jsx("svg",{width:t.width,height:t.height,style:{position:"absolute",left:`${t.x}%`,top:`${t.y}%`},children:e.jsx("rect",{x:5,y:5,width:(t.width||t.size)-10,height:(t.height||t.size)-10,fill:t.color,stroke:r,strokeWidth:3})},n);case"triangle":const i=t.size,s=5,a=`\n          ${i/2},${s}\n          ${i-s},${i-s}\n          ${s},${i-s}\n        `;return e.jsx("svg",{width:t.size,height:t.size,style:{position:"absolute",left:`${t.x}%`,top:`${t.y}%`},children:e.jsx("polygon",{points:a,fill:t.color,stroke:r,strokeWidth:3})},n);default:return null}})(t,n))})}const Mu=vt.forwardRef(({className:t,...n},r)=>e.jsx("div",{ref:r,className:ir("rounded-xl border bg-card text-card-foreground shadow",t),...n}));Mu.displayName="Card";const Iu=vt.forwardRef(({className:t,...n},r)=>e.jsx("div",{ref:r,className:ir("flex flex-col space-y-1.5 p-6",t),...n}));Iu.displayName="CardHeader";const ju=vt.forwardRef(({className:t,...n},r)=>e.jsx("div",{ref:r,className:ir("font-semibold leading-none tracking-tight",t),...n}));ju.displayName="CardTitle";const Tu=vt.forwardRef(({className:t,...n},r)=>e.jsx("div",{ref:r,className:ir("text-sm text-muted-foreground",t),...n}));Tu.displayName="CardDescription";const Ru=vt.forwardRef(({className:t,...n},r)=>e.jsx("div",{ref:r,className:ir("p-6 pt-0",t),...n}));Ru.displayName="CardContent";const Pu=vt.forwardRef(({className:t,...n},r)=>e.jsx("div",{ref:r,className:ir("flex items-center p-6 pt-0",t),...n}));Pu.displayName="CardFooter";const Au=vt.createContext({assetStatuses:{},setAssetStatus:(e,t)=>{}}),Nu={characterCount:({used:e,num:t})=>1===t?`${e} / ${t} Character`:`${e} / ${t} Characters`,closeKeypad:"close math keypad",openKeypad:"open math keypad",mathInputBox:"Math input box",removeHighlight:"Remove highlight",addHighlight:"Add highlight",hintPos:({pos:e})=>`Hint #${e}`,errorRendering:({error:e})=>`Error rendering: ${e}`,APPROXIMATED_PI_ERROR:"Your answer is close, but you may have approximated pi. Enter your answer as a multiple of pi, like <code>12\\ \\text{pi}</code> or <code>2/3\\ \\text{pi}</code>",EXTRA_SYMBOLS_ERROR:"We could not understand your answer. Please check your answer for extra text or symbols.",NEEDS_TO_BE_SIMPLFIED_ERROR:"Your answer is almost correct, but it needs to be simplified.",MISSING_PERCENT_ERROR:"Your answer is almost correct, but it is missing a <code>\\%</code> at the end.",MULTIPLICATION_SIGN_ERROR:"I'm a computer. I only understand multiplication if you use an asterisk (*) as the multiplication sign.",USER_INPUT_EMPTY:"Your answer is empty.",USER_INPUT_TOO_LONG:"Please shorten your response.",WRONG_CASE_ERROR:"Your answer includes use of a variable with the wrong case.",WRONG_LETTER_ERROR:"Your answer includes a wrong variable letter.",invalidSelection:"Make sure you select something for every row.",ERROR_TITLE:"Oops!",ERROR_MESSAGE:"Sorry, I don't understand that!",hints:"Hints",getAnotherHint:"Get another hint",deprecatedStandin:"Sorry, this part of the question is no longer available. 😅 Don't worry, you won't be graded on this part. Keep going!",keepTrying:"Keep trying",tryAgain:"Try again",check:"Check",correctExcited:"Correct!",nextQuestion:"Next question",skipToTitle:({title:e})=>`Skip to ${e}`,current:"Current",correct:"Correct",correctSelected:"Correct (selected)",incorrect:"Incorrect",incorrectSelected:"Incorrect (selected)",hideExplanation:"Hide explanation",explain:"Explain",INVALID_MESSAGE_PREFIX:"We couldn't grade your answer.",DEFAULT_INVALID_MESSAGE_1:"It looks like you left something blank or ",DEFAULT_INVALID_MESSAGE_2:"entered in an invalid answer.",integerExample:"an integer, like $6$",properExample:"a *proper* fraction, like $1/2$ or $6/10$",simplifiedProperExample:"a *simplified proper* fraction, like $3/5$",improperExample:"an *improper* fraction, like $10/7$ or $14/8$",simplifiedImproperExample:"a *simplified improper* fraction, like $7/4$",mixedExample:"a mixed number, like $1\\ 3/4$",decimalExample:"an *exact* decimal, like $0.75$",percentExample:"a percent, like $12.34\\%$",piExample:"a multiple of pi, like $12\\ \\text{pi}$ or $2/3\\ \\text{pi}$",yourAnswer:"**Your answer should be** ",yourAnswerLabel:"Your answer:",addPoints:"Click to add points",addVertices:"Click to add vertices",tapMultiple:"Tap each dot on the image to select all answers that apply.",tapSingle:"Tap each dot on the image to select an answer.",clickMultiple:"Click each dot on the image to select all answers that apply.",clickSingle:"Click each dot on the image to select an answer.",choices:"Choices:",answers:({num:e})=>1===e?`${e} answer`:`${e} answers`,hideAnswersToggleLabel:"Hide answer choices",moves:({num:e})=>`Moves: ${e}`,clickTiles:"Click on the tiles to change the lights.",turnOffLights:"You must turn on all of the lights to continue.",fillAllCells:"Make sure you fill in all cells in the matrix.",molecularDrawing:({content:e})=>`A molecular structure drawing. SMILES notation: ${e}`,switchDirection:"Switch direction",circleOpen:"Make circle open",circleFilled:"Make circle filled",numDivisions:"Number of divisions:",divisions:({divRangeString:e})=>`Please make sure the number of divisions is in the range ${e}.`,lineRange:({lineRange:e})=>`lines ${e}`,lineNumber:({lineNumber:e})=>`line ${e}`,symbolPassage:({questionSymbol:e,questionNumber:t})=>`The symbol ${e} indicates that question ${t} references this portion of the passage.`,symbolQuestion:({sentenceSymbol:e})=>` The symbol ${e} indicates that the following sentence is referenced in a question.`,lineLabel:"Line",beginningPassage:"Beginning of reading passage.",beginningFootnotes:"Beginning of reading passage footnotes.",endPassage:"End of reading passage.",questionMarker:({number:e})=>`[Marker for question ${e}]`,circleMarker:({number:e})=>`[Circle marker ${e}]`,sentenceMarker:({number:e})=>`[Sentence ${e}]`,dragHandles:"Drag handles to make graph",tapAddPoints:"Tap to add points",false:"False",true:"True",no:"No",yes:"Yes",chooseCorrectNum:"Please choose the correct number of answers.",notNoneOfTheAbove:"'None of the above' may not be selected when other answers are selected.",noneOfTheAbove:"None of the above",chooseNumAnswers:({numCorrect:e})=>`Choose ${e} answers:`,chooseAllAnswers:"Choose all answers that apply:",chooseOneAnswer:"Choose 1 answer:",choiceCheckedCorrect:({letter:e})=>`(Choice ${e}, Checked, Correct)`,choiceCorrect:({letter:e})=>`(Choice ${e}, Correct)`,choiceCheckedIncorrect:({letter:e})=>`(Choice ${e}, Checked, Incorrect)`,choiceIncorrect:({letter:e})=>`(Choice ${e}, Incorrect)`,choiceChecked:({letter:e})=>`(Choice ${e}, Checked)`,choice:({letter:e})=>`(Choice ${e})`,bringBack:"Bring back",openMenuForChoice:({letter:e})=>`Open menu for Choice ${e}`,letters:"A B C D E F G H I J K L M N O P Q R S T U V W X Y Z",scrollAnswers:"Scroll Answers",scrollStart:"Scroll to view start of the content",scrollEnd:"Scroll to view the end of the content",rightArrow:"Reaction arrow pointing to the right.",dontUnderstandUnits:"I couldn't understand those units.",checkSigFigs:"Check your significant figures.",answerNumericallyIncorrect:"That answer is numerically incorrect.",checkUnits:"Check your units.",dontUnderstand:"I don't understand that",loading:"Loading...",videoTranscript:"See video transcript",somethingWrong:"Something went wrong.",videoWrapper:"Khan Academy video wrapper",mathInputTitle:"mathematics keyboard",mathInputDescription:"Use keyboard/mouse to interact with math-based input fields",sin:"sin",cos:"cos",tan:"tan",simulationLoadFail:"Sorry, this simulation cannot load.",simulationLocaleWarning:"Sorry, this simulation isn't available in your language.",selectAnAnswer:"Select an answer",srGraphInstructions:"Use the Tab key to move through the interactive elements in the graph. When an interactive element has focus, use Control + Shift + Arrows to move it.",srUnlimitedGraphInstructions:"Press Shift + Enter to interact with the graph. Use the Tab key to move through the interactive elements in the graph and access the graph Action Bar. When an interactive element has focus, use Control + Shift + Arrows to move it or use the Delete key to remove it from the graph. Use the buttons in the Action Bar to add or adjust elements within the graph.",graphKeyboardPrompt:"Press Shift + Enter to interact with the graph",addPoint:"Add Point",removePoint:"Remove Point",closePolygon:"Close shape",openPolygon:"Re-open shape",srPointAtCoordinates:({num:e,x:t,y:n})=>`Point ${e} at ${t} comma ${n}.`,srInteractiveElements:({elements:e})=>`Interactive elements: ${e}`,srNoInteractiveElements:"No interactive elements",srCircleGraph:"A circle on a coordinate plane.",srCircleShape:({centerX:e,centerY:t})=>`Circle. The center point is at ${e} comma ${t}.`,srCircleRadiusPointRight:({radiusPointX:e,radiusPointY:t})=>`Right radius endpoint at ${e} comma ${t}.`,srCircleRadiusPointLeft:({radiusPointX:e,radiusPointY:t})=>`Left radius endpoint at ${e} comma ${t}.`,srCircleRadius:({radius:e})=>`Circle radius is ${e}.`,srCircleOuterPoints:({point1X:e,point1Y:t,point2X:n,point2Y:r,point3X:i,point3Y:s,point4X:a,point4Y:o})=>`Points on the circle at ${e} comma ${t}, ${n} comma ${r}, ${i} comma ${s}, ${a} comma ${o}.`,srLinearGraph:"A line on a coordinate plane.",srLinearGraphPoints:({point1X:e,point1Y:t,point2X:n,point2Y:r})=>`The line has two points, point 1 at ${e} comma ${t} and point 2 at ${n} comma ${r}.`,srLinearGraphSlopeIncreasing:"Its slope increases from left to right.",srLinearGraphSlopeDecreasing:"Its slope decreases from left to right.",srLinearGraphSlopeHorizontal:"Its slope is zero.",srLinearGraphSlopeVertical:"Its slope is undefined.",srLinearGraphXOnlyIntercept:({xIntercept:e})=>`The line crosses the X-axis at ${e} comma 0.`,srLinearGraphYOnlyIntercept:({yIntercept:e})=>`The line crosses the Y-axis at 0 comma ${e}.`,srLinearGraphBothIntercepts:({xIntercept:e,yIntercept:t})=>`The line crosses the X-axis at ${e} comma 0 and the Y-axis at 0 comma ${t}.`,srLinearGraphOriginIntercept:"The line crosses the X and Y axes at the graph's origin.",srLinearGrabHandle:({point1X:e,point1Y:t,point2X:n,point2Y:r})=>`Line going through point ${e} comma ${t} and point ${n} comma ${r}.`,srAngleStartingSide:({x:e,y:t})=>`Point 3, starting side at ${e} comma ${t}.`,srAngleEndingSide:({x:e,y:t})=>`Point 2, ending side at ${e} comma ${t}.`,srAngleVertexWithAngleMeasure:({x:e,y:t,angleMeasure:n})=>`Point 1, vertex at ${e} comma ${t}. Angle ${n} degrees.`,srAngleGraphAriaLabel:"An angle on a coordinate plane.",srAngleGraphAriaDescription:({angleMeasure:e,vertexX:t,vertexY:n,startingSideX:r,startingSideY:i,endingSideX:s,endingSideY:a})=>`The angle measure is ${e} degrees with a vertex at ${t} comma ${n}, a point on the starting side at ${r} comma ${i} and a point on the ending side at ${s} comma ${a}.`,srAngleInteractiveElements:({vertexX:e,vertexY:t,startingSideX:n,startingSideY:r,endingSideX:i,endingSideY:s})=>`An angle formed by 3 points. The vertex is at ${e} comma ${t}. The starting side point is at ${n} comma ${r}. The ending side point is at ${i} comma ${s}.`,srSingleSegmentGraphAriaLabel:"A line segment on a coordinate plane.",srMultipleSegmentGraphAriaLabel:({countOfSegments:e})=>`${e} segments on a coordinate plane.`,srMultipleSegmentIndividualLabel:({point1X:e,point1Y:t,point2X:n,point2Y:r,indexOfSegment:i})=>`Segment ${i}: Endpoint 1 at ${e} comma ${t}. Endpoint 2 at ${n} comma ${r}.`,srSingleSegmentLabel:({point1X:e,point1Y:t,point2X:n,point2Y:r})=>`Endpoint 1 at ${e} comma ${t}. Endpoint 2 at ${n} comma ${r}.`,srSegmentLength:({length:e})=>`Segment length ${e} units.`,srSingleSegmentGraphEndpointAriaLabel:({endpointNumber:e,x:t,y:n})=>`Endpoint ${e} at ${t} comma ${n}.`,srMultipleSegmentGraphEndpointAriaLabel:({endpointNumber:e,x:t,y:n,indexOfSegment:r})=>`Endpoint ${e} on segment ${r} at ${t} comma ${n}.`,srSegmentGrabHandle:({point1X:e,point1Y:t,point2X:n,point2Y:r})=>`Segment from ${e} comma ${t} to ${n} comma ${r}.`,srLinearSystemGraph:"Two lines on a coordinate plane.",srLinearSystemPoints:({lineNumber:e,point1X:t,point1Y:n,point2X:r,point2Y:i})=>`Line ${e} has two points, point 1 at ${t} comma ${n} and point 2 at ${r} comma ${i}.`,srLinearSystemPoint:({lineNumber:e,pointSequence:t,x:n,y:r})=>`Point ${t} on line ${e} at ${n} comma ${r}.`,srLinearSystemGrabHandle:({lineNumber:e,point1X:t,point1Y:n,point2X:r,point2Y:i})=>`Line ${e} going through point ${t} comma ${n} and point ${r} comma ${i}.`,srLinearSystemIntersection:({x:e,y:t})=>`Line 1 and line 2 intersect at point ${e} comma ${t}.`,srLinearSystemParallel:"Line 1 and line 2 are parallel.",srRayGraph:"A ray on a coordinate plane.",srRayPoints:({point1X:e,point1Y:t,point2X:n,point2Y:r})=>`The endpoint is at ${e} comma ${t} and the ray goes through point ${n} comma ${r}.`,srRayGrabHandle:({point1X:e,point1Y:t,point2X:n,point2Y:r})=>`Ray with endpoint ${e} comma ${t} going through point ${n} comma ${r}.`,srRayEndpoint:({x:e,y:t})=>`Endpoint at ${e} comma ${t}.`,srRayTerminalPoint:({x:e,y:t})=>`Through point at ${e} comma ${t}.`,srQuadraticGraph:"A parabola on a 4-quadrant coordinate plane.",srQuadraticFaceUp:"The parabola opens upward.",srQuadraticFaceDown:"The parabola opens downward.",srQuadraticGraphVertexOrigin:"Vertex is at the origin.",srQuadraticGraphVertexXAxis:"Vertex is on the X-axis.",srQuadraticGraphVertexYAxis:"Vertex is on the Y-axis.",srQuadraticGraphVertexQuadrant:({quadrant:e})=>`Vertex is in quadrant ${e}.`,srQuadraticTwoXIntercepts:({intercept1:e,intercept2:t})=>`The X-intercepts are at ${e} comma 0 and ${t} comma 0.`,srQuadraticOneXIntercept:({intercept:e})=>`The X-intercept is at ${e} comma 0.`,srQuadraticYIntercept:({intercept:e})=>`The Y-intercept is at 0 comma ${e}.`,srQuadraticPointOrigin:({pointNumber:e})=>`Point ${e} on parabola at the origin.`,srQuadraticPointAxis:({pointNumber:e,x:t,y:n})=>`Point ${e} on parabola at ${t} comma ${n}.`,srQuadraticPointQuadrant:({pointNumber:e,x:t,y:n,quadrant:r})=>`Point ${e} on parabola in quadrant ${r} at ${t} comma ${n}.`,srQuadraticInteractiveElements:({point1X:e,point1Y:t,point2X:n,point2Y:r,point3X:i,point3Y:s})=>`Parabola with points at ${e} comma ${t}, ${n} comma ${r}, and ${i} comma ${s}.`,srPolygonGraph:"A polygon.",srPolygonGraphCoordinatePlane:"A polygon on a coordinate plane.",srPolygonGraphPointsNum:({num:e})=>`The polygon has ${e} points.`,srPolygonGraphPointsOne:"The polygon has 1 point.",srPolygonElementsNum:({num:e})=>`A polygon with ${e} points.`,srPolygonElementsOne:"A polygon with 1 point.",srPolygonPointAngleApprox:({angle:e})=>`Angle approximately equal to ${e} degrees.`,srPolygonPointAngle:({angle:e})=>`Angle equal to ${e} degrees.`,srPolygonSideLength:({pointNum:e,length:t})=>`A line segment, length equal to ${t} units, connects to point ${e}.`,srPolygonSideLengthApprox:({pointNum:e,length:t})=>`A line segment, length approximately equal to ${t} units, connects to point ${e}.`,srUnlimitedPolygonEmpty:"An empty coordinate plane.",srSinusoidGraph:"A sinusoid function on a coordinate plane.",srSinusoidRootPoint:({x:e,y:t})=>`Midline intersection at ${e} comma ${t}.`,srSinusoidMaxPoint:({x:e,y:t})=>`Maximum point at ${e} comma ${t}.`,srSinusoidMinPoint:({x:e,y:t})=>`Minimum point at ${e} comma ${t}.`,srSinusoidFlatPoint:({x:e,y:t})=>`Line through point at ${e} comma ${t}.`,srSinusoidDescription:({minValue:e,maxValue:t,cycleStart:n,cycleEnd:r})=>`The graph shows a wave with a minimum value of ${e} and a maximum value of ${t}. The wave completes a full cycle from ${n} to ${r}.`,srSinusoidInteractiveElements:({point1X:e,point1Y:t,point2X:n,point2Y:r})=>`Sinusoid graph with midline intersection point at ${e} comma ${t} and extremum point at ${n} comma ${r}.`},Du={MISSING_PERCENT_ERROR:"MISSING_PERCENT_ERROR",NEEDS_TO_BE_SIMPLIFIED_ERROR:"NEEDS_TO_BE_SIMPLFIED_ERROR",APPROXIMATED_PI_ERROR:"APPROXIMATED_PI_ERROR",EXTRA_SYMBOLS_ERROR:"EXTRA_SYMBOLS_ERROR",WRONG_CASE_ERROR:"WRONG_CASE_ERROR",WRONG_LETTER_ERROR:"WRONG_LETTER_ERROR",MULTIPLICATION_SIGN_ERROR:"MULTIPLICATION_SIGN_ERROR",INVALID_SELECTION_ERROR:"invalidSelection",CHOOSE_CORRECT_NUM_ERROR:"chooseCorrectNum",NOT_NONE_ABOVE_ERROR:"notNoneOfTheAbove",FILL_ALL_CELLS_ERROR:"fillAllCells",USER_INPUT_EMPTY:"USER_INPUT_EMPTY",USER_INPUT_TOO_LONG:"USER_INPUT_TOO_LONG"};const Lu={strings:Nu||{},locale:"en"},Ou=vt.createContext(Lu);function Fu({children:t,strings:n,locale:r}){return e.jsx(Ou.Provider,{value:{strings:n,locale:r},children:t})}const zu=()=>vt.useContext(Ou);let Bu=null;const Hu=()=>{if(Bu)return Bu;throw new Error(["Perseus has not been provided required dependencies.","setDependencies(dependencies) must be called first.","Make sure Perseus is being imported from javascript/perseus/perseus.js."].join("\n"))},$u=vt.createContext({analytics:{onAnalyticsEvent:async()=>{}},useVideo:()=>{throw new Error("useVideo dependency not provided in Perseus dependencies")}}),Wu=()=>vt.useContext($u);let Xu=!1;const Vu=function(e,t,n){return Array.isArray(e)?r.map(e,function(e){return Vu(e,t)}):t.call(n,e)};const Gu=/^\[\[\u2603 (([a-z-]+) ([0-9]+))\]\]/,Yu=new RegExp(Gu.source+"$"),qu="x".split(/(.)/g).length?function(e,t){return e.split(t)}:function(e,t){const n=[];let r,i=t.lastIndex=0;for(;r=t.exec(e);){const t=r;n.push(e.slice(i,t.index)),n.push(...t.slice(1)),i=t.index+t[0].length}return n.push(e.slice(i)),n};function Zu(e){return Array(e).fill("")}function Ku(e,t){const n=e*t,r=e,i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=Math.floor(r/i);return n<25?e:n<50?5===s?e:e/2:1===s?e/2:2===s?e/4:5===s?e/5:void 0}function Qu(e,t){return t/(e[1]-e[0])}function Ju(e,t){let n=Math.pow(10,Math.floor(Math.log(e/t)/Math.LN10));const r=t/e*n;return r<=.15?n*=10:r<=.35?n*=5:r<=.75&&(n*=2),n}const eh=(e,t)=>{const n=t[1]-t[0],r=n/e;return r<=10?e:r<=20?2*e:Ju(n,10)};const th={pointerDown:!1,currentTouchIdentifier:null};const nh={inputPathsEqual:function(e,t){return null==e||null==t?null==e==(null==t):e.length===t.length&&e.every((e,n)=>t[n]===e)},nestedMap:Vu,rWidgetRule:Gu,rTypeFromWidgetId:/^([a-z-]+) ([0-9]+)$/,rWidgetParts:Yu,snowman:"☃",split:qu,firstNumericalParse:function(e){let t;return d.predicate.createValidatorFunctional(function(e){return t=e,!0},{simplify:"optional",inexact:!0,forms:"integer, proper, improper, pi, log, mixed, decimal"})(e),t},stringArrayOfSize:Zu,stringArrayOfSize2D:function(e){const{rows:t,columns:n}=e;return Zu(t).map(()=>Zu(n))},gridDimensionConfig:function(e,t,n,r){const i=Qu(t,n);return{scale:i,tickStep:e/r,unityLabel:e*i>30}},getGridStep:function(e,t,n){return r(2).times(function(r){const i=Qu(e[r],n);return Ku(t[r],i)})},snapStepFromGridStep:function(e){return[e[0]/2,e[1]/2]},scaleFromExtent:Qu,tickStepFromExtent:function(e,t){const n=e[1]-e[0];let r;return r=15<n&&n<=20?23:n>100||n<5?10:16,Ju(n,r*(t/500))},gridStepFromTickStep:Ku,tickStepFromNumTicks:Ju,constrainedTickStepsFromTickSteps:function(e,t){return[eh(e[0],t[0]),eh(e[1],t[1])]},parseQueryString:function(e){e=e||window.location.search.substring(1);const t={},n=/\+/g,r=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(n," "))};let s;for(;s=r.exec(e);){const e=s;t[i(e[1])]=i(e[2])}return t},updateQueryString:function(e,t,n){n=encodeURIComponent(n);const r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),i=-1!==e.indexOf("?")?"&":"?";return e.match(r)?e.replace(r,"$1"+t+"="+n+"$2"):e+i+t+"="+n},strongEncodeURIComponent:function(e){return encodeURIComponent(e).replace(/['()!]/g,window.escape).replace(/\*/g,"%2A")},touchHandlers:th,resetTouchHandlers:function(){Object.assign(th,{pointerDown:!1,currentTouchIdentifier:null})},extractPointerLocation:function(e){let t;if(th.pointerDown){if(null!=th.currentTouchIdentifier){const n=e.changedTouches?e.changedTouches.length:0;for(let r=0;r<n;r++)e.changedTouches[r].identifier===th.currentTouchIdentifier&&(t=e.changedTouches[r])}else t=e;const n="touchend"===e.type||"touchcancel"===e.type;t&&n&&(th.pointerDown=!1,th.currentTouchIdentifier=null)}else th.pointerDown=!0,e.changedTouches?(t=e.changedTouches[0],th.currentTouchIdentifier=t.identifier):t=e;if(t)return{left:t.pageX,top:t.pageY}},supportsPassiveEvents:()=>{try{const e=Object.defineProperty({},"passive",{get:function(){Xu=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch{}return Xu},captureScratchpadTouchStart:function(e){e.stopPropagation()},getImageSize:function(e,t){const n=new Image;n.onload=function(){0===n.width&&0===n.height?(document.body?.appendChild(n),r.defer(function(){t(n.clientWidth,n.clientHeight),document.body?.removeChild(n)})):t(n.width,n.height)},n.src=l(e)},getImageSizeModern:c,getRealImageUrl:l,isLabeledSVG:o,getBaseUrl:a,getSvgUrl:s,getDataUrl:i,textarea:{getWordBeforeCursor:function(e){const t=e.value,n=e.selectionStart-1,r=Math.max(t.lastIndexOf("\n",n),t.lastIndexOf(" ",n))+1;return{string:t.substring(r,n+1),pos:{start:r,end:n}}},moveCursor:function(e,t){e.selectionStart=t,e.selectionEnd=t}},unescapeMathMode:e=>e.startsWith("$")&&e.endsWith("$")?e.slice(1,-1):e},rh=(e,t)=>{Hu().Log.log(e,t)},ih=(e,t,n)=>{Hu().Log.error(e,t,n)},sh=/^file\+graphie:/,ah=/\/([^/]+)$/;function oh(){const{JIPT:e,kaLocale:t}=Hu();return e.useJIPT?"en-pt":t}function lh(){return"en"!==oh()}const ch=/\/(?=[^/]+$)/;const dh={};function uh(e,t){const n=function(e){const t=e.match(ah);if(null==t)throw new u("not a valid URL",h.InvalidInput);return t&&t[1]}(e),r=dh[n];if(null!=r)if(r.loaded){const{data:e,localized:n}=r;t(e,n)}else r.dataCallbacks.push(t);else{const r={loaded:!1,dataCallbacks:[t],localized:lh()};dh[n]=r;const i=async(e,t)=>{const i=await fetch(e);if(!i?.ok)return void t();const s=await i.text(),a=function(e,t,n){const r=t.match(new RegExp(`^(?:svgData|svgOtherData)${e}\\((.+)\\);$`)),i=r?r[1]:t;try{return JSON.parse(i)}catch(s){return n(s),null}}(n,s,t=>{ih("Failed to parse JSONP for svg-image",h.Service,{cause:t,loggedMetadata:{dataUrl:nh.getDataUrl(e),jsonp:s}})});if(!a)return;const o=dh[n]={...dh[n],loaded:!0,data:a};o.dataCallbacks.forEach(e=>{e(o.data,r.localized)})},s=(t,n,r)=>{ih("Data load failed for svg-image",h.Service,{cause:r,loggedMetadata:{dataUrl:nh.getDataUrl(e),status:n}})};lh()?(r.localized=!1,i(function(e){if(sh.test(e))return nh.getDataUrl(e);const[t,n]=nh.getBaseUrl(e).split(ch);return`${t}/${oh()}/${n}-data.json`}(e),()=>i(nh.getDataUrl(e),s))):i(nh.getDataUrl(e),s)}}function hh(e,t){const n=window.scrollX,r=window.scrollY,i=document.querySelector("meta[name=viewport]");i?i.setAttribute("content",e):p("head").append(`<meta name="viewport" content="${e}">`),document.body.style.opacity=.9999,setTimeout(()=>{document.body.style.opacity=1,window.scrollTo(n,r),null!=t&&setTimeout(t,0)},0)}function ph(){}function fh(e,t){this._fullHeight=this._fullWidth=this._overlay=null,this._targetImage=e,this._enableMobilePinch=t,this._$body=p(document.body)}p.fn.emulateTransitionEnd=function(e){let t=!1;const n=this;p(this).one("bsTransitionEnd",function(){t=!0});return setTimeout(function(){t||p(n).trigger(p.support.transition.end)},e),this},p(function(){p.support.transition=function(){const e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(const n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}(),p.support.transition&&(p.event.special.bsTransitionEnd={bindType:p.support.transition.end,delegateType:p.support.transition.end,handle:function(e){if(p(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})}),ph.prototype._initialize=function(e){this._$document||(this._activeZoom=this._initialScrollPosition=this._initialTouchPosition=this._touchMoveListener=null,this._$document=p(document),this._$window=p(window),this._$body=p(document.body),this._boundClick=p.proxy(this._clickHandler,this),this._enableMobilePinch=e)},ph.prototype.handleZoomClick=function(e,t){this._initialize(t);const n=e.target;if(n&&"IMG"===n.tagName&&!this._$body.hasClass("zoom-overlay-open"))return e.metaKey||e.ctrlKey?window.open(e.target.src,"_blank"):void(!t&&n.width>=window.innerWidth-fh.getOffset()||(this._activeZoomClose(!0),t?hh("width=device-width, initial-scale=1, minimum-scale=1",()=>this._zoom(n)):this._zoom(n),t||(this._$window.on("scroll.zoom",p.proxy(this._scrollHandler,this)),this._$document.on("keyup.zoom",p.proxy(this._keyHandler,this)),this._$document.on("touchstart.zoom",p.proxy(this._touchStart,this))),document.addEventListener("click",this._boundClick,!0),e.stopPropagation()))},ph.prototype._zoom=function(e){this._activeZoom=new fh(e,this._enableMobilePinch),this._activeZoom.zoomImage()},ph.prototype._activeZoomClose=function(e){this._activeZoom&&(e?(this._activeZoom.dispose(),this._disposeActiveZoom()):hh("width=device-width, initial-scale=1, minimum-scale=1,\n            maximum-scale=1",()=>{this._activeZoom&&(this._activeZoom.close(),this._disposeActiveZoom())}))},ph.prototype._disposeActiveZoom=function(){this._$window.off(".zoom"),this._$document.off(".zoom"),document.removeEventListener("click",this._boundClick,!0),this._activeZoom=null},ph.prototype._scrollHandler=function(e){null===this._initialScrollPosition&&(this._initialScrollPosition=window.scrollY);const t=this._initialScrollPosition-window.scrollY;Math.abs(t)>=40&&this._activeZoomClose()},ph.prototype._keyHandler=function(e){[27,13,32].includes(e.keyCode)&&this._activeZoomClose()},ph.prototype._clickHandler=function(e){e.stopPropagation(),e.preventDefault(),this._activeZoomClose()},ph.prototype._touchStart=function(e){this._initialTouchPosition=e.originalEvent.touches[0].pageY,p(e.target).on("touchmove.zoom",p.proxy(this._touchMove,this))},ph.prototype._touchMove=function(e){Math.abs(e.originalEvent.touches[0].pageY-this._initialTouchPosition)>10&&(this._activeZoomClose(),p(e.target).off("touchmove.zoom"))},fh._OFFSET=80,fh._MAX_WIDTH=2560,fh._MAX_HEIGHT=4096,fh.getOffset=function(e){return e?0:fh._OFFSET},fh.prototype.getOffset=function(){return fh.getOffset(this._enableMobilePinch)},fh.prototype.zoomImage=function(){const e=document.createElement("img"),t=p(e);e.onload=function(){this._fullHeight=Number(e.height),this._fullWidth=Number(e.width);const n=this._imageOffset=p(this._targetImage).offset(),r=this._left=n.left-p(window).scrollLeft(),i=this._top=n.top-p(window).scrollTop();t.css({left:r,top:i,width:this._targetImage.width,height:this._targetImage.height}),this._zoomOriginal()}.bind(this),e.src=this._targetImage.src,e.alt=this._targetImage.alt,e.tabIndex=0,e.role="button",this.$zoomedImage=t},fh.prototype._zoomOriginal=function(){this.$zoomedImage.addClass("zoom-img").attr("data-action","zoom-out"),p(this._targetImage).css("visibility","hidden"),this._backdrop=document.createElement("div"),this._backdrop.className="zoom-backdrop",document.body?.appendChild(this._backdrop),this._overlay=document.createElement("div"),this._overlay.className="zoom-overlay",document.body?.appendChild(this._overlay),this._overlay?.appendChild(this.$zoomedImage[0]),this._calculateZoom(),this._triggerAnimation()},fh.prototype._calculateZoom=function(){const e=this._fullWidth,t=this._fullHeight,n=window.innerHeight-this.getOffset(),r=window.innerWidth-this.getOffset(),i=e/this._targetImage.width,s=e/t,a=r/n;this._imgScaleFactor=e<r&&t<n?i:s<a?n/t*i:r/(e??0)*i},fh.prototype._triggerAnimation=function(){const e=p(window).scrollTop()+window.innerHeight/2,t=p(window).scrollLeft()+window.innerWidth/2,n=this._imgScaleFactor,r=this._imageOffset.top+this._targetImage.height/2,i=this._imageOffset.left+this._targetImage.width/2;this._translateY=(e-r)/n,this._translateX=(t-i)/n,this._zoomedInTransformString=`\n        scale(${n})\n        translate3d(${this._translateX}px, ${this._translateY}px, 0)\n    `,this.$zoomedImage.css({transform:this._zoomedInTransformString}).addClass("zoom-transition").one(p.support.transition.end,p.proxy(this._onZoomInFinish,this)).emulateTransitionEnd(300),this._$body.addClass("zoom-overlay-open")},fh.prototype._onZoomInFinish=function(){const e=this._targetImage.height*this._imgScaleFactor,t=this._targetImage.width*this._imgScaleFactor;let n=0,r=0,i=0,s=0,a=0,o=0;t<window.innerWidth?(n="50%",i=-t/2):a=(t-window.innerWidth)/2,e<window.innerHeight?(r="50%",s=-e/2):o=(e-window.innerHeight)/2,this.$zoomedImage.css({height:e,left:n,marginLeft:i,marginTop:s,top:r,transform:"",width:t}).removeClass("zoom-transition"),p(this._overlay).scrollLeft(a).scrollTop(o)},fh.prototype.close=function(){this._$body.removeClass("zoom-overlay-open").addClass("zoom-overlay-transitioning"),this.$zoomedImage.css({height:this._targetImage.height,left:this._left,marginLeft:0,marginTop:0,top:this._top,transform:this._zoomedInTransformString,width:this._targetImage.width}).removeClass("zoom-transition"),p(this._overlay).scrollLeft(0).scrollTop(0),setTimeout(()=>{this.$zoomedImage.css({transform:"scale(1)"}).addClass("zoom-transition").one(p.support.transition.end,p.proxy(this.dispose,this)).emulateTransitionEnd(300)},10)},fh.prototype.dispose=function(){this.$zoomedImage&&this.$zoomedImage[0].parentNode&&(this.$zoomedImage.remove(),this.$zoomedImage=null,this._overlay.parentNode.removeChild(this._overlay),this._backdrop.parentNode.removeChild(this._backdrop),this._$body.removeClass("zoom-overlay-transitioning")),p(this._targetImage).css("visibility","visible"),this._targetImage.focus()};const mh=new ph,gh="'Lato', sans-serif",bh="'Lato-Bold', 'Lato', sans-serif",Uh="#71B307",yh="#FFFFFF",xh="#F6F7F7",vh="#D6D8DA",wh="#BABEC2",Sh="#888D93",Eh="#21242c",kh="#F9F9F9",Ch=16,_h=-16,Mh=16,Ih={defaultBoxSize:400,defaultBoxSizeSmall:288},jh="#f86700",Th="#df5c00",Rh="#c75300",Ph="#be2612",Ah="#BABEC2",Nh=Object.freeze(Object.defineProperty({__proto__:null,articleMaxWidthInPx:688,articleMaxWidthTableInPx:512,baseFontFamily:gh,baseUnitPx:Mh,boldFontFamily:bh,checkedColor:"#71B307",circleSize:24,gray17:Eh,gray68:Sh,gray76:wh,gray85:vh,gray97:xh,hintBorderWidth:4,interactiveSizes:Ih,kaGreen:Uh,negativePhoneMargin:_h,phoneMargin:Ch,publishBlockingErrorColor:Ph,pureLgMax:"1279px",pureLgMin:"1024px",pureMdMax:"1023px",pureMdMin:"768px",pureSmMax:"767px",pureSmMin:"568px",pureXlMin:"1280px",pureXsMax:"567px",radioBorderColor:Ah,radioMarginWidth:2,tableBackgroundAccent:kh,warningColor:jh,warningColorActive:Rh,warningColorHover:Th,white:yh},Symbol.toStringTag,{value:"Module"}));class Dh extends vt.Component{_isMounted=!1;static defaultProps={className:"",constrainHeight:!1,allowFullBleed:!1};state={viewportHeight:null,viewportWidth:null};componentDidMount(){this._isMounted=!0,window.innerHeight<480?setTimeout(this._cacheViewportSize,800):this._cacheViewportSize()}componentWillUnmount(){this._isMounted=!1}_cacheViewportSize=()=>{this._isMounted&&this.setState({viewportHeight:Math.max(480,window.innerHeight),viewportWidth:window.innerWidth})};render(){const t=this.props.width/this.props.height,n=e.jsx("div",{style:{paddingBottom:100*(1/t).toFixed(4)+"%"}});let{width:r,height:i}=this.props;if(this.props.constrainHeight&&this.state.viewportHeight){const e=2/3*this.state.viewportHeight;this.props.height>=e&&(i=e,r=e*t)}const s={maxWidth:r,maxHeight:i},a=f("fixed-to-responsive",this.props.className),o=e.jsxs("div",{className:a,style:s,children:[n,this.props.children]});return this.props.allowFullBleed&&this.state.viewportWidth&&r>=this.state.viewportWidth?e.jsx("div",{style:{marginLeft:_h,marginRight:_h},children:o}):o}}m("@khanacademy/kmath","2.2.18");const Lh=Math.pow(2,-42);function Oh(e){return r.isNumber(e)&&!r.isNaN(e)}function Fh(e,t,n){return null==e||null==t?e===t:e===t||(null==n&&(n=1e-9),Math.abs(e-t)<n)}function zh(e,t){return Fh(Math.round(e),e,t)}function Bh(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}function Hh(e,t){return Math.round(e/t)*t}function $h(e,t){return Math.floor(e/t)*t}function Wh(e,t){return Math.ceil(e/t)*t}function Xh(e,t=Lh,n=1e3){let r=[1,0],i=[0,1],s=Math.floor(e),a=e-s;for(;i[0]<=n;){if(Fh(r[0]/i[0],e,t))return[r[0],i[0]];r=[s*r[0]+r[1],r[0]],i=[s*i[0]+i[1],i[0]],s=Math.floor(1/a),a=1/a-s}return[e,1]}var Vh=Object.freeze({__proto__:null,DEFAULT_TOLERANCE:1e-9,EPSILON:Lh,ceilTo:Wh,equal:Fh,floorTo:$h,is:Oh,isInteger:zh,round:Bh,roundTo:Hh,sign:function(e,t){return Fh(e,0,t)?0:Math.abs(e)/e},toFraction:Xh});function Gh(e){return e.reduce((e,t)=>e+t,0)}function Yh(e){return e.reduce((e,t)=>e*t,1)}function qh(...e){const t=Math.min(...e.map(e=>e.length)),n=[];for(let r=0;r<t;r++)n.push(e.map(e=>e[r]));return n}function Zh(e,t){return!!Array.isArray(e)&&((void 0===t||e.length===t)&&e.every(Oh))}function Kh(e){return rp(e,1/Qh(e))}function Qh(e){return Math.sqrt(Jh(e,e))}function Jh(e,t){return Gh(qh(e,t).map(Yh))}function ep(...e){return qh(...e).map(Gh)}function tp(e,t){return qh(e,t).map(e=>e[0]-e[1])}function np(e){return e.map(e=>-e)}function rp(e,t){return e.map(e=>e*t)}function ip(e,t,n){return e.length===t.length&&qh(e,t).every(e=>Fh(e[0],e[1],n))}function sp(e,t,n){return!(!Fh(Qh(e),0,n)&&!Fh(Qh(t),0,n))||ip(e=Kh(e),t=Kh(t),n)}function ap(e,t,n){return sp(e,t,n)||sp(e,np(t),n)}function op(e){const t=Qh(e);let n=Math.atan2(e[1],e[0]);return n<0&&(n+=2*Math.PI),[t,n]}function lp(e){const t=op(e);return[t[0],180*t[1]/Math.PI]}function cp(e,t=0){return[e*Math.cos(t),e*Math.sin(t)]}function dp(e,t=0){return cp(e,t*Math.PI/180)}function up(e,t){const n=op(e),r=n[1]+t;return cp(n[0],r)}function hp(e,t){const n=lp(e),r=n[1]+t;return dp(n[0],r)}function pp(e,t){return Math.acos(Jh(e,t)/(Qh(e)*Qh(t)))}function fp(e,t){return rp(t,Jh(e,t)/Jh(t,t))}function mp(e,t){return e.map((e,n)=>Bh(e,t[n]||t))}function gp(e,t){return e.map((e,n)=>Hh(e,t[n]||t))}function bp(e,t){return e.map((e,n)=>$h(e,t[n]||t))}function Up(e,t){return e.map((e,n)=>Wh(e,t[n]||t))}var yp=Object.freeze({__proto__:null,add:ep,angleDeg:function(e,t){return 180*pp(e,t)/Math.PI},angleRad:pp,cartFromPolarDeg:dp,cartFromPolarRad:cp,ceilTo:Up,codirectional:sp,collinear:ap,dot:Jh,equal:ip,floorTo:bp,is:Zh,length:Qh,map:function(e,t){return[t(e[0],0),t(e[1],1)]},negate:np,normalize:Kh,polarDegFromCart:lp,polarRadFromCart:op,projection:fp,rotateDeg:hp,rotateRad:up,round:mp,roundTo:gp,scale:rp,subtract:tp,zip:qh});function xp(e,t){const n=tp(t[1],t[0]),r=tp(e,t[0]);return Qh(tp(fp(r,n),r))}function vp(e,t){const n=tp(t[1],t[0]),r=tp(e,t[0]),i=tp(rp(fp(r,n),2),r);return ep(t[0],i)}const wp=Zh,Sp=ep,Ep=ep,kp=tp,Cp=ip,_p=op,Mp=lp,Ip=cp,jp=dp,Tp=mp,Rp=gp,Pp=bp,Ap=Up;var Np=Object.freeze({__proto__:null,addVector:Sp,addVectors:Ep,cartFromPolarDeg:jp,cartFromPolarRad:Ip,ceilTo:Ap,compare:function(e,t,n){if(e.length!==t.length)return e.length-t.length;for(let r=0;r<e.length;r++)if(!Fh(e[r],t[r],n))return e[r]-t[r];return 0},distanceToLine:xp,distanceToPoint:function(e,t){return Qh(tp(e,t))},equal:Cp,floorTo:Pp,is:wp,polarDegFromCart:Mp,polarRadFromCart:_p,reflectOverLine:vp,rotateDeg:function(e,t,n){return void 0===n?hp(e,t):ep(n,hp(tp(e,n),t))},rotateRad:function(e,t,n){return void 0===n?up(e,t):ep(n,up(tp(e,n),t))},round:Tp,roundTo:Rp,subtractVector:kp});var Dp=Object.freeze({__proto__:null,distanceToPoint:function(e,t){return xp(t,e)},equal:function(e,t,n){const r=tp(e[1],e[0]);return!!ap(r,tp(t[1],t[0]),n)&&(!!Cp(e[0],t[0])||ap(r,tp(t[0],e[0]),n))},midpoint:function(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]},reflectPoint:function(e,t){return vp(t,e)}});const Lp={cleanMath:function(e){return"string"==typeof e?e.replace(/\+\s*-/g,"- ").replace(/-\s*-/g,"+ ").replace(/\^1/g,""):e},bound:function(e){return 0===e?e:e<0?-Lp.bound(-e):Math.max(1e-6,Math.min(e,1e20))},factorial:function(e){return e<=1?e:e*Lp.factorial(e-1)},getGCD:function(e,t){if(arguments.length>2){const t=[].slice.call(arguments,1);return Lp.getGCD(e,Lp.getGCD(...t))}let n;for(e=Math.abs(e),t=Math.abs(t);t;)n=e%t,e=t,t=n;return e},getLCM:function(e,t){if(arguments.length>2){const t=[].slice.call(arguments,1);return Lp.getLCM(e,Lp.getLCM(...t))}return Math.abs(e*t)/Lp.getGCD(e,t)},primes:[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97],isPrime:function(e){if(e<=1)return!1;if(e<101)return!!p.grep(Lp.primes,function(t,n){return Math.abs(t-e)<=.5}).length;if(e<=1||e>2&&e%2==0)return!1;for(let t=3,n=Math.sqrt(e);t<=n;t+=2)if(e%t===0)return!1;return!0},getPrimeFactorization:function(e){if(1===e)return[];if(Lp.isPrime(e))return[e];const t=Math.sqrt(e);for(let n=2;n<=t;n++)if(e%n===0)return p.merge(Lp.getPrimeFactorization(n),Lp.getPrimeFactorization(e/n))},roundToNearest:function(e,t){return Math.round(t/e)*e},roundTo:function(e,t){const n=Math.pow(10,e).toFixed(5);return Math.round((t*n).toFixed(5))/n},toFixedApprox:function(e,t){const n=e.toFixed(t);return Fh(+n,e)?n:"\\approx "+n},roundToApprox:function(e,t){const n=Lp.roundTo(t,e);return Fh(n,e)?String(n):Lp.toFixedApprox(e,t)},toFraction:function(e,t){if(null==t&&(t=Math.pow(2,-46)),e<0||e>1){let n=e%1;n+=n<0?1:0;const r=Lp.toFraction(n,t);return r[0]+=Math.round(e-n)*r[1],r}if(Math.abs(Math.round(Number(e))-e)<=t)return[Math.round(e),1];let n=0,r=1,i=1,s=1,a=1,o=2;for(;;){if(Math.abs(Number(a/o)-e)<=t)return[a,o];a/o<e?(n=a,r=o):(i=a,s=o),a=n+i,o=r+s}},getNumericFormat:function(e){if((e=(e=p.trim(e)).replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1")).match(/^[+-]?\d+$/))return"integer";if(e.match(/^[+-]?\d+\s+\d+\s*\/\s*\d+$/))return"mixed";const t=e.match(/^[+-]?(\d+)\s*\/\s*(\d+)$/);return t?parseFloat(t[1])>parseFloat(t[2])?"improper":"proper":e.replace(/[,. ]/g,"").match(/^\d+$/)?"decimal":e.match(/(pi?|\u03c0|t(?:au)?|\u03c4|pau)/)?"pi":null},toNumericString:function(e,t){if(null==e)return"";if(0===e)return"0";if("percent"===t)return 100*e+"%";if("pi"===t){const t=Xh(e/Math.PI),n=Math.abs(t[0]),r=t[1];if(zh(n)){return(e<0?"-":"")+(1===n?"":n)+"π"+(1===r?"":"/"+r)}}if(r(["proper","improper","mixed","fraction"]).contains(t)){const n=Xh(e),r=Math.abs(n[0]),i=n[1],s=e<0?"-":"";if(1===i)return s+r;if("mixed"===t){const e=r%i,t=(r-e)/i;return s+(t?t+" ":"")+e+"/"+i}return s+r+"/"+i}return String(e)}};function Op(e,t){return e+t}function Fp(e){return b(e,0)?0:e>0?1:-1}function zp(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}function Bp(e,t,n){return n[0]<=Math.max(e[0],t[0])&&n[0]>=Math.min(e[0],t[0])&&n[1]<=Math.max(e[1],t[1])&&n[1]>=Math.min(e[1],t[1])}function Hp(e,t){const n=[[e[0],e[1],t[0]],[e[0],e[1],t[1]],[t[0],t[1],e[0]],[t[0],t[1],e[1]]],i=r.map(n,function(e){return Fp(zp(...e))});if(i[0]!==i[1]&&i[2]!==i[3])return!0;for(let r=0;r<4;r++)if(0===i[r]&&Bp(...n[r]))return!0;return!1}function $p(e,t){return r.map(r.zip(e,t),function(e){return e[0]-e[1]})}function Wp(e){const t=r.zip(e,e.slice(1).concat(e.slice(0,1))),n=r.map(t,function(e){const t=e[0],n=e[1];return(n[0]-t[0])*(n[1]+t[1])});return n.reduce(Op,0)>0}function Xp(e){return Math.sqrt(r.reduce(e,function(e,t){return e+Math.pow(t,2)},0))}function Vp(e){return r.zip(e,Yp(e)).map(function(e){return Xp($p(...e))})}function Gp(e){const t=r.zip(Yp(e,-1),e,Yp(e,1)),n=r.map(t,function(e){const t=$p(e[1],e[0]),n=$p(e[2],e[1]),i=Math.acos((s=t,a=n,r.reduce(r.zip(s,a),function(e,t){return e+t[0]*t[1]},0)/(Xp(t)*Xp(n))));var s,a;return Fp(zp(...e))>0?i:-i}),i=r.reduce(n,function(e,t){return e+t},0);return r.map(n,function(e){return i>0?Math.PI-e:Math.PI+e})}function Yp(e,t){return t=void 0===t?1:t%e.length,e.slice(t).concat(e.slice(0,t))}function qp(e,t){const n=e[0][0],r=e[0][1],i=e[1][0],s=e[1][1],a=t[0][0],o=t[0][1],l=t[1][0],c=t[1][1],d=(n-i)*(o-c)-(r-s)*(a-l);if(Math.abs(d)<1e-9)return null;return[((n*s-r*i)*(a-l)-(n-i)*(a*c-o*l))/d,((n*s-r*i)*(o-c)-(r-s)*(a*c-o*l))/d]}var Zp=Object.freeze({__proto__:null,angleMeasures:Gp,canonicalSineCoefficients:function([e,t,n,r]){e<0&&(e*=-1,t*=-1,n*=-1);const i=2*Math.PI;for(t<0&&(t*=-1,n*=-1,n+=i/2);n>0;)n-=i;for(;n<0;)n+=i;return[e,t,n,r]},ccw:zp,clockwise:Wp,collinear:function(e,t,n){return b(zp(e,t,n),0)},getLineEquation:function(e,t){if(b(e[0],t[0]))return"x = "+e[0].toFixed(3);const n=(t[1]-e[1])/(t[0]-e[0]),r=e[1]-n*e[0];return"y = "+n.toFixed(3)+"x + "+r.toFixed(3)},getLineIntersection:qp,getLineIntersectionString:function(e,t){const n=qp(e,t);if(null===n)return"Lines are parallel";const[r,i]=n;return"Intersection: ("+r.toFixed(3)+", "+i.toFixed(3)+")"},intersects:Hp,lawOfCosines:function(e,t,n){return 180*Math.acos((e*e+t*t-n*n)/(2*e*t))/Math.PI},magnitude:Xp,polygonSidesIntersect:function(e){for(let t=0;t<e.length;t++)for(let n=t+1;n<e.length;n++){if(Cp(e[t],e[n]))return!0;const r=(t+1)%e.length,i=(n+1)%e.length;if(r===n||i===t)continue;if(Hp([e[t],e[r]],[e[n],e[i]]))return!0}return!1},reverseVector:function(e){return[-e[0],-e[1]]},rotate:Yp,sign:Fp,similar:function(e,t,n){if(e.length!==t.length)return!1;const i=e.length,s=Gp(e),a=Gp(t),o=Vp(e),l=Vp(t);for(let c=0;c<2*i;c++){let e=a.slice(),t=l.slice();if(c>=i&&(e.reverse(),t.reverse(),t=Yp(t,1)),e=Yp(e,c),t=Yp(t,c),g(s,e)){const e=r.zip(o,t),i=r.map(e,function(e){return e[0]/e[1]}),s=r.all(i,function(e){return b(i[0],e)}),a=r.all(e,function(e){return Fh(e[0],e[1],n)});if(s&&a)return!0}}return!1},vector:$p});const Kp=(e,t)=>{const n=e[0]-t[0],r=e[1]-t[1];return n||r?(180+180*Math.atan2(-r,-n)/Math.PI+360)%360:0};var Qp=Object.freeze({__proto__:null,calculateAngleInDegrees:function([e,t]){return 180*Math.atan2(t,e)/Math.PI},convertDegreesToRadians:function(e){return e/180*Math.PI},convertRadiansToDegrees:function(e){const t=e/Math.PI*180;return Number(t.toPrecision(15))},getAngleFromVertex:Kp,getClockwiseAngle:(e,t=!1)=>{const n=[...e],r=!Wp([n[0],n[2],n[1]])||t?n.reverse():n;return(Kp(r[0],r[1])+360-Kp(r[2],r[1]))%360},polar:function(e,t){return"number"==typeof e&&(e=[e,e]),t=t*Math.PI/180,[e[0]*Math.cos(t),e[1]*Math.sin(t)]}});var Jp=Object.freeze({__proto__:null,getQuadraticCoefficients:function(e){const t=e[0],n=e[1],r=e[2],i=(t[0]-n[0])*(t[0]-r[0])*(n[0]-r[0]);if(0===i)return;return[(r[0]*(n[1]-t[1])+n[0]*(t[1]-r[1])+t[0]*(r[1]-n[1]))/i,(r[0]*r[0]*(t[1]-n[1])+n[0]*n[0]*(r[1]-t[1])+t[0]*t[0]*(n[1]-r[1]))/i,(n[0]*r[0]*(n[0]-r[0])*t[1]+r[0]*t[0]*(r[0]-t[0])*n[1]+t[0]*n[0]*(t[0]-n[0])*r[1])/i]},getSinusoidCoefficients:function(e){const t=e[0],n=e[1],r=n[1]-t[1],i=Math.PI/(2*(n[0]-t[0]));return[r,i,t[0]*i,t[1]]}});function ef(e,t){return e+":"+t}const tf={_fireEvent:function(e,...t){for(const n of e)n.call(this,...t)},_applyConstraints:function(e,t,n){let i=!1;return r.reduce(this.state.constraints,(e,r)=>{if(!1===e)return!1;if(i)return e;const s=r.call(this,e,t,{onSkipRemaining:()=>{i=!0},...n});if(!1===s)return!1;if(Np.is(s,2))return s;if(!0===s||null==s)return e;throw new u("Constraint returned invalid result: "+s,h.Internal)},e,this)},draw:function(){const e=this.cloneState();tf._fireEvent.call(this,this.state.draw,e,this.prevState),this.prevState=e},listen:function(e,t,n){this._listenerMap=this._listenerMap||{};const r=ef(e,t),i=this._listenerMap[r]=this._listenerMap[r]||this.state[e].length;this.state[e][i]=n},unlisten:function(e,t){this._listenerMap=this._listenerMap||{};const n=ef(e,t),i=this._listenerMap[n];if(void 0!==i){this.state[e].splice(i,1),delete this._listenerMap[n];const t=r.keys(this._listenerMap);r.each(t,function(t){(function(e){return e.split(":")[0]})(t)===e&&this._listenerMap[t]>i&&this._listenerMap[t]--},this)}}};let nf=null;let rf=null;const sf=["add","modify","draw","remove","constraints","onMoveStart","onMove","onMoveEnd","onClick"],af={assert:function(e,t){if(!e)throw new u("Assertion Error"+(t?": "+t:""),h.Internal)},createGettersFor:function(e,t){r.each(r.keys(t),function(t){void 0===e.prototype[t]&&(e.prototype[t]=function(){return this.state[t]})})},addMovableHelperMethodsTo:function(e){r.each(tf,function(t,n){void 0===e.prototype[n]&&(e.prototype[n]=t)})},arrayify:function(e){return null==e?[]:r.isArray(e)?r.filter(r.flatten(e),r.identity):[e]},normalizeOptions:function(e){const t={...e};return sf.forEach(function(n){void 0!==e[n]&&(t[n]=af.arrayify(e[n]))}),t},getPrefixedTransform:function(){return nf=nf||function(){const e=document.createElement("div");let t=null;return r.each(["transform","msTransform","MozTransform","WebkitTransform","OTransform"],function(n){void 0!==e.style[n]&&(t=n)}),t}(),nf},getCanUse3dTransform:function(){return null==rf&&(rf=function(){const e=document.createElement("div"),t=af.getPrefixedTransform();return e.style[t]="translateZ(0px)",!!e.style[t]}()),rf}};var of,lf={exports:{}};var cf=(of||(of=1,window,lf.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){var r,i;r=[n(2)],void 0===(i=function(e){function t(r){if(t.is(r,"function"))return n?r():e.on("raphael.DOMload",r);if(t.is(r,j))return t._engine.create[p](t,r.splice(0,3+t.is(r[0],I))).add(r);var i=Array.prototype.slice.call(arguments,0);if(t.is(i[i.length-1],"function")){var s=i.pop();return n?s.call(t._engine.create[p](t,i)):e.on("raphael.DOMload",function(){s.call(t._engine.create[p](t,i))})}return t._engine.create[p](t,arguments)}t.version="2.3.0",t.eve=e;var n,r,i,s,a=/[, ]+/,o={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},l=/\{(\d+)\}/g,c="hasOwnProperty",d={doc:document,win:window},u={was:Object.prototype[c].call(d.win,"Raphael"),is:d.win.Raphael},h=function(){this.ca=this.customAttributes={}},p="apply",f="concat",m="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,g="",b=" ",U=String,y="split",x="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[y](b),v={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},w=U.prototype.toLowerCase,S=Math,E=S.max,k=S.min,C=S.abs,_=S.pow,M=S.PI,I="number",j="array",T=Object.prototype.toString,R=(t._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),P={NaN:1,Infinity:1,"-Infinity":1},A=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,N=S.round,D=parseFloat,L=parseInt,O=U.prototype.toUpperCase,F=t._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},z=t._availableAnimAttrs={blur:I,"clip-rect":"csv",cx:I,cy:I,fill:"colour","fill-opacity":I,"font-size":I,height:I,opacity:I,path:"path",r:I,rx:I,ry:I,stroke:"colour","stroke-opacity":I,"stroke-width":I,transform:"transform",width:I,x:I,y:I},B=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,H={hs:1,rg:1},$=/,?([achlmqrstvxz]),?/gi,W=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,X=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,V=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,G=(t._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),Y=function(e,t){return D(e)-D(t)},q=function(e){return e},Z=t._rectPath=function(e,t,n,r,i){return i?[["M",e+i,t],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]]:[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]]},K=function(e,t,n,r){return null==r&&(r=n),[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]]},Q=t._getPath={path:function(e){return e.attr("path")},circle:function(e){var t=e.attrs;return K(t.cx,t.cy,t.r)},ellipse:function(e){var t=e.attrs;return K(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=e.attrs;return Z(t.x,t.y,t.width,t.height,t.r)},image:function(e){var t=e.attrs;return Z(t.x,t.y,t.width,t.height)},text:function(e){var t=e._getBBox();return Z(t.x,t.y,t.width,t.height)},set:function(e){var t=e._getBBox();return Z(t.x,t.y,t.width,t.height)}},J=t.mapPath=function(e,t){if(!t)return e;var n,r,i,s,a,o,l;for(i=0,a=(e=_e(e)).length;i<a;i++)for(s=1,o=(l=e[i]).length;s<o;s+=2)n=t.x(l[s],l[s+1]),r=t.y(l[s],l[s+1]),l[s]=n,l[s+1]=r;return e};if(t._g=d,t.type=d.win.SVGAngle||d.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==t.type){var ee,te=d.doc.createElement("div");if(te.innerHTML='<v:shape adj="1"/>',(ee=te.firstChild).style.behavior="url(#default#VML)",!ee||"object"!=typeof ee.adj)return t.type=g;te=null}function ne(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)e[c](n)&&(t[n]=ne(e[n]));return t}t.svg=!(t.vml="VML"==t.type),t._Paper=h,t.fn=r=h.prototype=t.prototype,t._id=0,t.is=function(e,t){return"finite"==(t=w.call(t))?!P[c](+e):"array"==t?e instanceof Array:"null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||"array"==t&&Array.isArray&&Array.isArray(e)||T.call(e).slice(8,-1).toLowerCase()==t},t.angle=function(e,n,r,i,s,a){if(null==s){var o=e-r,l=n-i;return o||l?(180+180*S.atan2(-l,-o)/M+360)%360:0}return t.angle(e,n,s,a)-t.angle(r,i,s,a)},t.rad=function(e){return e%360*M/180},t.deg=function(e){return Math.round(180*e/M%360*1e3)/1e3},t.snapTo=function(e,n,r){if(r=t.is(r,"finite")?r:10,t.is(e,j)){for(var i=e.length;i--;)if(C(e[i]-n)<=r)return e[i]}else{var s=n%(e=+e);if(s<r)return n-s;if(s>e-r)return n-s+e}return n},t.createUUID=(i=/[xy]/g,s=function(e){var t=16*S.random()|0;return("x"==e?t:3&t|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(i,s).toUpperCase()}),t.setWindow=function(n){e("raphael.setWindow",t,d.win,n),d.win=n,d.doc=d.win.document,t._engine.initWin&&t._engine.initWin(d.win)};var re=function(e){if(t.vml){var n,r=/^\s+|\s+$/g;try{var i=new ActiveXObject("htmlfile");i.write("<body>"),i.close(),n=i.body}catch(o){n=createPopup().document.body}var s=n.createTextRange();re=ce(function(e){try{n.style.color=U(e).replace(r,g);var t=s.queryCommandValue("ForeColor");return"#"+("000000"+(t=(255&t)<<16|65280&t|(16711680&t)>>>16).toString(16)).slice(-6)}catch(i){return"none"}})}else{var a=d.doc.createElement("i");a.title="Raphaël Colour Picker",a.style.display="none",d.doc.body.appendChild(a),re=ce(function(e){return a.style.color=e,d.doc.defaultView.getComputedStyle(a,g).getPropertyValue("color")})}return re(e)},ie=function(){return"hsb("+[this.h,this.s,this.b]+")"},se=function(){return"hsl("+[this.h,this.s,this.l]+")"},ae=function(){return this.hex},oe=function(e,n,r){if(null==n&&t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(r=e.b,n=e.g,e=e.r),null==n&&t.is(e,"string")){var i=t.getRGB(e);e=i.r,n=i.g,r=i.b}return(e>1||n>1||r>1)&&(e/=255,n/=255,r/=255),[e,n,r]},le=function(e,n,r,i){var s={r:e*=255,g:n*=255,b:r*=255,hex:t.rgb(e,n,r),toString:ae};return t.is(i,"finite")&&(s.opacity=i),s};function ce(e,t,n){return function r(){var i=Array.prototype.slice.call(arguments,0),s=i.join("␀"),a=r.cache=r.cache||{},o=r.count=r.count||[];return a[c](s)?(function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}(o,s),n?n(a[s]):a[s]):(o.length>=1e3&&delete a[o.shift()],o.push(s),a[s]=e[p](t,i),n?n(a[s]):a[s])}}function de(){return this.hex}function ue(e,t){for(var n=[],r=0,i=e.length;i-2*!t>r;r+=2){var s=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4==r?s[3]={x:+e[0],y:+e[1]}:i-2==r&&(s[2]={x:+e[0],y:+e[1]},s[3]={x:+e[2],y:+e[3]}):s[0]={x:+e[i-2],y:+e[i-1]}:i-4==r?s[3]=s[2]:r||(s[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-s[0].x+6*s[1].x+s[2].x)/6,(-s[0].y+6*s[1].y+s[2].y)/6,(s[1].x+6*s[2].x-s[3].x)/6,(s[1].y+6*s[2].y-s[3].y)/6,s[2].x,s[2].y])}return n}t.color=function(e){var n;return t.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(n=t.hsb2rgb(e),e.r=n.r,e.g=n.g,e.b=n.b,e.hex=n.hex):t.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(n=t.hsl2rgb(e),e.r=n.r,e.g=n.g,e.b=n.b,e.hex=n.hex):(t.is(e,"string")&&(e=t.getRGB(e)),t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(n=t.rgb2hsl(e),e.h=n.h,e.s=n.s,e.l=n.l,n=t.rgb2hsb(e),e.v=n.b):(e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1),e.toString=ae,e},t.hsb2rgb=function(e,t,n,r){var i,s,a,o,l;return this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(n=e.b,t=e.s,r=e.o,e=e.h),o=(l=n*t)*(1-C((e=(e*=360)%360/60)%2-1)),i=s=a=n-l,le(i+=[l,o,0,0,o,l][e=~~e],s+=[o,l,l,o,0,0][e],a+=[0,0,o,l,l,o][e],r)},t.hsl2rgb=function(e,t,n,r){var i,s,a,o,l;return this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(n=e.l,t=e.s,e=e.h),(e>1||t>1||n>1)&&(e/=360,t/=100,n/=100),o=(l=2*t*(n<.5?n:1-n))*(1-C((e=(e*=360)%360/60)%2-1)),i=s=a=n-l/2,le(i+=[l,o,0,0,o,l][e=~~e],s+=[o,l,l,o,0,0][e],a+=[0,0,o,l,l,o][e],r)},t.rgb2hsb=function(e,t,n){var r,i;return e=(n=oe(e,t,n))[0],t=n[1],n=n[2],{h:((0==(i=(r=E(e,t,n))-k(e,t,n))?null:r==e?(t-n)/i:r==t?(n-e)/i+2:(e-t)/i+4)+360)%6*60/360,s:0==i?0:i/r,b:r,toString:ie}},t.rgb2hsl=function(e,t,n){var r,i,s,a;return e=(n=oe(e,t,n))[0],t=n[1],n=n[2],r=((i=E(e,t,n))+(s=k(e,t,n)))/2,{h:((0==(a=i-s)?null:i==e?(t-n)/a:i==t?(n-e)/a+2:(e-t)/a+4)+360)%6*60/360,s:0==a?0:r<.5?a/(2*r):a/(2-2*r),l:r,toString:se}},t._path2string=function(){return this.join(",").replace($,"$1")},t._preload=function(e,t){var n=d.doc.createElement("img");n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){t.call(this),this.onload=null,d.doc.body.removeChild(this)},n.onerror=function(){d.doc.body.removeChild(this)},d.doc.body.appendChild(n),n.src=e},t.getRGB=ce(function(e){if(!e||(e=U(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:de};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:de};!H[c](e.toLowerCase().substring(0,2))&&"#"!=e.charAt()&&(e=re(e));var n,r,i,s,a,o,l=e.match(R);return l?(l[2]&&(i=L(l[2].substring(5),16),r=L(l[2].substring(3,5),16),n=L(l[2].substring(1,3),16)),l[3]&&(i=L((a=l[3].charAt(3))+a,16),r=L((a=l[3].charAt(2))+a,16),n=L((a=l[3].charAt(1))+a,16)),l[4]&&(o=l[4][y](B),n=D(o[0]),"%"==o[0].slice(-1)&&(n*=2.55),r=D(o[1]),"%"==o[1].slice(-1)&&(r*=2.55),i=D(o[2]),"%"==o[2].slice(-1)&&(i*=2.55),"rgba"==l[1].toLowerCase().slice(0,4)&&(s=D(o[3])),o[3]&&"%"==o[3].slice(-1)&&(s/=100)),l[5]?(o=l[5][y](B),n=D(o[0]),"%"==o[0].slice(-1)&&(n*=2.55),r=D(o[1]),"%"==o[1].slice(-1)&&(r*=2.55),i=D(o[2]),"%"==o[2].slice(-1)&&(i*=2.55),("deg"==o[0].slice(-3)||"°"==o[0].slice(-1))&&(n/=360),"hsba"==l[1].toLowerCase().slice(0,4)&&(s=D(o[3])),o[3]&&"%"==o[3].slice(-1)&&(s/=100),t.hsb2rgb(n,r,i,s)):l[6]?(o=l[6][y](B),n=D(o[0]),"%"==o[0].slice(-1)&&(n*=2.55),r=D(o[1]),"%"==o[1].slice(-1)&&(r*=2.55),i=D(o[2]),"%"==o[2].slice(-1)&&(i*=2.55),("deg"==o[0].slice(-3)||"°"==o[0].slice(-1))&&(n/=360),"hsla"==l[1].toLowerCase().slice(0,4)&&(s=D(o[3])),o[3]&&"%"==o[3].slice(-1)&&(s/=100),t.hsl2rgb(n,r,i,s)):((l={r:n,g:r,b:i,toString:de}).hex="#"+(16777216|i|r<<8|n<<16).toString(16).slice(1),t.is(s,"finite")&&(l.opacity=s),l)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:de}},t),t.hsb=ce(function(e,n,r){return t.hsb2rgb(e,n,r).hex}),t.hsl=ce(function(e,n,r){return t.hsl2rgb(e,n,r).hex}),t.rgb=ce(function(e,t,n){function r(e){return e+.5|0}return"#"+(16777216|r(n)|r(t)<<8|r(e)<<16).toString(16).slice(1)}),t.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},n=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),n.hex},t.getColor.reset=function(){delete this.start},t.parsePathString=function(e){if(!e)return null;var n=he(e);if(n.arr)return ye(n.arr);var r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},i=[];return t.is(e,j)&&t.is(e[0],j)&&(i=ye(e)),i.length||U(e).replace(W,function(e,t,n){var s=[],a=t.toLowerCase();if(n.replace(V,function(e,t){t&&s.push(+t)}),"m"==a&&s.length>2&&(i.push([t][f](s.splice(0,2))),a="l",t="m"==t?"l":"L"),"r"==a)i.push([t][f](s));else for(;s.length>=r[a]&&(i.push([t][f](s.splice(0,r[a]))),r[a]););}),i.toString=t._path2string,n.arr=ye(i),i},t.parseTransformString=ce(function(e){if(!e)return null;var n=[];return t.is(e,j)&&t.is(e[0],j)&&(n=ye(e)),n.length||U(e).replace(X,function(e,t,r){var i=[];w.call(t),r.replace(V,function(e,t){t&&i.push(+t)}),n.push([t][f](i))}),n.toString=t._path2string,n},this,function(e){if(!e)return e;for(var t=[],n=0;n<e.length;n++){for(var r=[],i=0;i<e[n].length;i++)r.push(e[n][i]);t.push(r)}return t});var he=function(e){var t=he.ps=he.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)t[c](n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]};function pe(e,t,n,r,i){return e*(e*(-3*t+9*n-9*r+3*i)+6*t-12*n+6*r)-3*t+3*n}function fe(e,t,n,r,i,s,a,o,l){null==l&&(l=1);for(var c=(l=l>1?1:l<0?0:l)/2,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],u=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,p=0;p<12;p++){var f=c*d[p]+c,m=pe(f,e,n,i,a),g=pe(f,t,r,s,o),b=m*m+g*g;h+=u[p]*S.sqrt(b)}return c*h}function me(e,t,n,r,i,s,a,o){if(!(E(e,n)<k(i,a)||k(e,n)>E(i,a)||E(t,r)<k(s,o)||k(t,r)>E(s,o))){var l=(e-n)*(s-o)-(t-r)*(i-a);if(l){var c=((e*r-t*n)*(i-a)-(e-n)*(i*o-s*a))/l,d=((e*r-t*n)*(s-o)-(t-r)*(i*o-s*a))/l,u=+c.toFixed(2),h=+d.toFixed(2);if(!(u<+k(e,n).toFixed(2)||u>+E(e,n).toFixed(2)||u<+k(i,a).toFixed(2)||u>+E(i,a).toFixed(2)||h<+k(t,r).toFixed(2)||h>+E(t,r).toFixed(2)||h<+k(s,o).toFixed(2)||h>+E(s,o).toFixed(2)))return{x:c,y:d}}}}function ge(e,n,r){var i=t.bezierBBox(e),s=t.bezierBBox(n);if(!t.isBBoxIntersect(i,s))return r?0:[];for(var a=fe.apply(0,e),o=fe.apply(0,n),l=E(~~(a/5),1),c=E(~~(o/5),1),d=[],u=[],h={},p=r?0:[],f=0;f<l+1;f++){var m=t.findDotsAtSegment.apply(t,e.concat(f/l));d.push({x:m.x,y:m.y,t:f/l})}for(f=0;f<c+1;f++)m=t.findDotsAtSegment.apply(t,n.concat(f/c)),u.push({x:m.x,y:m.y,t:f/c});for(f=0;f<l;f++)for(var g=0;g<c;g++){var b=d[f],U=d[f+1],y=u[g],x=u[g+1],v=C(U.x-b.x)<.001?"y":"x",w=C(x.x-y.x)<.001?"y":"x",S=me(b.x,b.y,U.x,U.y,y.x,y.y,x.x,x.y);if(S){if(h[S.x.toFixed(4)]==S.y.toFixed(4))continue;h[S.x.toFixed(4)]=S.y.toFixed(4);var _=b.t+C((S[v]-b[v])/(U[v]-b[v]))*(U.t-b.t),M=y.t+C((S[w]-y[w])/(x[w]-y[w]))*(x.t-y.t);_>=0&&_<=1.001&&M>=0&&M<=1.001&&(r?p++:p.push({x:S.x,y:S.y,t1:k(_,1),t2:k(M,1)}))}}return p}function be(e,n,r){e=t._path2curve(e),n=t._path2curve(n);for(var i,s,a,o,l,c,d,u,h,p,f=r?0:[],m=0,g=e.length;m<g;m++){var b=e[m];if("M"==b[0])i=l=b[1],s=c=b[2];else{"C"==b[0]?(h=[i,s].concat(b.slice(1)),i=h[6],s=h[7]):(h=[i,s,i,s,l,c,l,c],i=l,s=c);for(var U=0,y=n.length;U<y;U++){var x=n[U];if("M"==x[0])a=d=x[1],o=u=x[2];else{"C"==x[0]?(p=[a,o].concat(x.slice(1)),a=p[6],o=p[7]):(p=[a,o,a,o,d,u,d,u],a=d,o=u);var v=ge(h,p,r);if(r)f+=v;else{for(var w=0,S=v.length;w<S;w++)v[w].segment1=m,v[w].segment2=U,v[w].bez1=h,v[w].bez2=p;f=f.concat(v)}}}}}return f}t.findDotsAtSegment=function(e,t,n,r,i,s,a,o,l){var c=1-l,d=_(c,3),u=_(c,2),h=l*l,p=h*l,f=d*e+3*u*l*n+3*c*l*l*i+p*a,m=d*t+3*u*l*r+3*c*l*l*s+p*o,g=e+2*l*(n-e)+h*(i-2*n+e),b=t+2*l*(r-t)+h*(s-2*r+t),U=n+2*l*(i-n)+h*(a-2*i+n),y=r+2*l*(s-r)+h*(o-2*s+r),x=c*e+l*n,v=c*t+l*r,w=c*i+l*a,E=c*s+l*o,k=90-180*S.atan2(g-U,b-y)/M;return(g>U||b<y)&&(k+=180),{x:f,y:m,m:{x:g,y:b},n:{x:U,y:y},start:{x:x,y:v},end:{x:w,y:E},alpha:k}},t.bezierBBox=function(e,n,r,i,s,a,o,l){t.is(e,"array")||(e=[e,n,r,i,s,a,o,l]);var c=Ce.apply(null,e);return{x:c.min.x,y:c.min.y,x2:c.max.x,y2:c.max.y,width:c.max.x-c.min.x,height:c.max.y-c.min.y}},t.isPointInsideBBox=function(e,t,n){return t>=e.x&&t<=e.x2&&n>=e.y&&n<=e.y2},t.isBBoxIntersect=function(e,n){var r=t.isPointInsideBBox;return r(n,e.x,e.y)||r(n,e.x2,e.y)||r(n,e.x,e.y2)||r(n,e.x2,e.y2)||r(e,n.x,n.y)||r(e,n.x2,n.y)||r(e,n.x,n.y2)||r(e,n.x2,n.y2)||(e.x<n.x2&&e.x>n.x||n.x<e.x2&&n.x>e.x)&&(e.y<n.y2&&e.y>n.y||n.y<e.y2&&n.y>e.y)},t.pathIntersection=function(e,t){return be(e,t)},t.pathIntersectionNumber=function(e,t){return be(e,t,1)},t.isPointInsidePath=function(e,n,r){var i=t.pathBBox(e);return t.isPointInsideBBox(i,n,r)&&be(e,[["M",n,r],["H",i.x2+10]],1)%2==1},t._removedFactory=function(t){return function(){e("raphael.log",null,"Raphaël: you are calling to method “"+t+"” of removed object",t)}};var Ue=t.pathBBox=function(e){var t=he(e);if(t.bbox)return ne(t.bbox);if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var n,r=0,i=0,s=[],a=[],o=0,l=(e=_e(e)).length;o<l;o++)if("M"==(n=e[o])[0])r=n[1],i=n[2],s.push(r),a.push(i);else{var c=Ce(r,i,n[1],n[2],n[3],n[4],n[5],n[6]);s=s[f](c.min.x,c.max.x),a=a[f](c.min.y,c.max.y),r=n[5],i=n[6]}var d=k[p](0,s),u=k[p](0,a),h=E[p](0,s),m=E[p](0,a),g=h-d,b=m-u,U={x:d,y:u,x2:h,y2:m,width:g,height:b,cx:d+g/2,cy:u+b/2};return t.bbox=ne(U),U},ye=function(e){var n=ne(e);return n.toString=t._path2string,n},xe=t._pathToRelative=function(e){var n=he(e);if(n.rel)return ye(n.rel);t.is(e,j)&&t.is(e&&e[0],j)||(e=t.parsePathString(e));var r=[],i=0,s=0,a=0,o=0,l=0;"M"==e[0][0]&&(a=i=e[0][1],o=s=e[0][2],l++,r.push(["M",i,s]));for(var c=l,d=e.length;c<d;c++){var u=r[c]=[],h=e[c];if(h[0]!=w.call(h[0]))switch(u[0]=w.call(h[0]),u[0]){case"a":u[1]=h[1],u[2]=h[2],u[3]=h[3],u[4]=h[4],u[5]=h[5],u[6]=+(h[6]-i).toFixed(3),u[7]=+(h[7]-s).toFixed(3);break;case"v":u[1]=+(h[1]-s).toFixed(3);break;case"m":a=h[1],o=h[2];default:for(var p=1,f=h.length;p<f;p++)u[p]=+(h[p]-(p%2?i:s)).toFixed(3)}else{u=r[c]=[],"m"==h[0]&&(a=h[1]+i,o=h[2]+s);for(var m=0,g=h.length;m<g;m++)r[c][m]=h[m]}var b=r[c].length;switch(r[c][0]){case"z":i=a,s=o;break;case"h":i+=+r[c][b-1];break;case"v":s+=+r[c][b-1];break;default:i+=+r[c][b-2],s+=+r[c][b-1]}}return r.toString=t._path2string,n.rel=ye(r),r},ve=t._pathToAbsolute=function(e){var n=he(e);if(n.abs)return ye(n.abs);if(t.is(e,j)&&t.is(e&&e[0],j)||(e=t.parsePathString(e)),!e||!e.length)return[["M",0,0]];var r=[],i=0,s=0,a=0,o=0,l=0;"M"==e[0][0]&&(a=i=+e[0][1],o=s=+e[0][2],l++,r[0]=["M",i,s]);for(var c,d,u=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),h=l,p=e.length;h<p;h++){if(r.push(c=[]),(d=e[h])[0]!=O.call(d[0]))switch(c[0]=O.call(d[0]),c[0]){case"A":c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=+(d[6]+i),c[7]=+(d[7]+s);break;case"V":c[1]=+d[1]+s;break;case"H":c[1]=+d[1]+i;break;case"R":for(var m=[i,s][f](d.slice(1)),g=2,b=m.length;g<b;g++)m[g]=+m[g]+i,m[++g]=+m[g]+s;r.pop(),r=r[f](ue(m,u));break;case"M":a=+d[1]+i,o=+d[2]+s;default:for(g=1,b=d.length;g<b;g++)c[g]=+d[g]+(g%2?i:s)}else if("R"==d[0])m=[i,s][f](d.slice(1)),r.pop(),r=r[f](ue(m,u)),c=["R"][f](d.slice(-2));else for(var U=0,y=d.length;U<y;U++)c[U]=d[U];switch(c[0]){case"Z":i=a,s=o;break;case"H":i=c[1];break;case"V":s=c[1];break;case"M":a=c[c.length-2],o=c[c.length-1];default:i=c[c.length-2],s=c[c.length-1]}}return r.toString=t._path2string,n.abs=ye(r),r},we=function(e,t,n,r){return[e,t,n,r,n,r]},Se=function(e,t,n,r,i,s){return[1/3*e+2/3*n,1/3*t+2/3*r,1/3*i+2/3*n,1/3*s+2/3*r,i,s]},Ee=function(e,t,n,r,i,s,a,o,l,c){var d,u=120*M/180,h=M/180*(+i||0),p=[],m=ce(function(e,t,n){return{x:e*S.cos(n)-t*S.sin(n),y:e*S.sin(n)+t*S.cos(n)}});if(c)_=c[0],I=c[1],E=c[2],k=c[3];else{e=(d=m(e,t,-h)).x,t=d.y;var g=(e-(o=(d=m(o,l,-h)).x))/2,b=(t-(l=d.y))/2,U=g*g/(n*n)+b*b/(r*r);U>1&&(n*=U=S.sqrt(U),r*=U);var x=n*n,v=r*r,w=(s==a?-1:1)*S.sqrt(C((x*v-x*b*b-v*g*g)/(x*b*b+v*g*g))),E=w*n*b/r+(e+o)/2,k=w*-r*g/n+(t+l)/2,_=S.asin(((t-k)/r).toFixed(9)),I=S.asin(((l-k)/r).toFixed(9));(_=e<E?M-_:_)<0&&(_=2*M+_),(I=o<E?M-I:I)<0&&(I=2*M+I),a&&_>I&&(_-=2*M),!a&&I>_&&(I-=2*M)}var j=I-_;if(C(j)>u){var T=I,R=o,P=l;I=_+u*(a&&I>_?1:-1),o=E+n*S.cos(I),l=k+r*S.sin(I),p=Ee(o,l,n,r,i,0,a,R,P,[I,T,E,k])}j=I-_;var A=S.cos(_),N=S.sin(_),D=S.cos(I),L=S.sin(I),O=S.tan(j/4),F=4/3*n*O,z=4/3*r*O,B=[e,t],H=[e+F*N,t-z*A],$=[o+F*L,l-z*D],W=[o,l];if(H[0]=2*B[0]-H[0],H[1]=2*B[1]-H[1],c)return[H,$,W][f](p);for(var X=[],V=0,G=(p=[H,$,W][f](p).join()[y](",")).length;V<G;V++)X[V]=V%2?m(p[V-1],p[V],h).y:m(p[V],p[V+1],h).x;return X},ke=function(e,t,n,r,i,s,a,o,l){var c=1-l;return{x:_(c,3)*e+3*_(c,2)*l*n+3*c*l*l*i+_(l,3)*a,y:_(c,3)*t+3*_(c,2)*l*r+3*c*l*l*s+_(l,3)*o}},Ce=ce(function(e,t,n,r,i,s,a,o){var l,c=i-2*n+e-(a-2*i+n),d=2*(n-e)-2*(i-n),u=e-n,h=(-d+S.sqrt(d*d-4*c*u))/2/c,f=(-d-S.sqrt(d*d-4*c*u))/2/c,m=[t,o],g=[e,a];return C(h)>"1e12"&&(h=.5),C(f)>"1e12"&&(f=.5),h>0&&h<1&&(l=ke(e,t,n,r,i,s,a,o,h),g.push(l.x),m.push(l.y)),f>0&&f<1&&(l=ke(e,t,n,r,i,s,a,o,f),g.push(l.x),m.push(l.y)),c=s-2*r+t-(o-2*s+r),u=t-r,h=(-(d=2*(r-t)-2*(s-r))+S.sqrt(d*d-4*c*u))/2/c,f=(-d-S.sqrt(d*d-4*c*u))/2/c,C(h)>"1e12"&&(h=.5),C(f)>"1e12"&&(f=.5),h>0&&h<1&&(l=ke(e,t,n,r,i,s,a,o,h),g.push(l.x),m.push(l.y)),f>0&&f<1&&(l=ke(e,t,n,r,i,s,a,o,f),g.push(l.x),m.push(l.y)),{min:{x:k[p](0,g),y:k[p](0,m)},max:{x:E[p](0,g),y:E[p](0,m)}}}),_e=t._path2curve=ce(function(e,t){var n=!t&&he(e);if(!t&&n.curve)return ye(n.curve);for(var r=ve(e),i=t&&ve(t),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=function(e,t,n){var r,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"][f](Ee[p](0,[t.x,t.y][f](e.slice(1))));break;case"S":"C"==n||"S"==n?(r=2*t.x-t.bx,i=2*t.y-t.by):(r=t.x,i=t.y),e=["C",r,i][f](e.slice(1));break;case"T":"Q"==n||"T"==n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"][f](Se(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"][f](Se(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"][f](we(t.x,t.y,e[1],e[2]));break;case"H":e=["C"][f](we(t.x,t.y,e[1],t.y));break;case"V":e=["C"][f](we(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"][f](we(t.x,t.y,t.X,t.Y))}return e},l=function(e,t){if(e[t].length>7){e[t].shift();for(var n=e[t];n.length;)d[t]="A",i&&(u[t]="A"),e.splice(t++,0,["C"][f](n.splice(0,6)));e.splice(t,1),b=E(r.length,i&&i.length||0)}},c=function(e,t,n,s,a){e&&t&&"M"==e[a][0]&&"M"!=t[a][0]&&(t.splice(a,0,["M",s.x,s.y]),n.bx=0,n.by=0,n.x=e[a][1],n.y=e[a][2],b=E(r.length,i&&i.length||0))},d=[],u=[],h="",m="",g=0,b=E(r.length,i&&i.length||0);g<b;g++){r[g]&&(h=r[g][0]),"C"!=h&&(d[g]=h,g&&(m=d[g-1])),r[g]=o(r[g],s,m),"A"!=d[g]&&"C"==h&&(d[g]="C"),l(r,g),i&&(i[g]&&(h=i[g][0]),"C"!=h&&(u[g]=h,g&&(m=u[g-1])),i[g]=o(i[g],a,m),"A"!=u[g]&&"C"==h&&(u[g]="C"),l(i,g)),c(r,i,s,a,g),c(i,r,a,s,g);var U=r[g],y=i&&i[g],x=U.length,v=i&&y.length;s.x=U[x-2],s.y=U[x-1],s.bx=D(U[x-4])||s.x,s.by=D(U[x-3])||s.y,a.bx=i&&(D(y[v-4])||a.x),a.by=i&&(D(y[v-3])||a.y),a.x=i&&y[v-2],a.y=i&&y[v-1]}return i||(n.curve=ye(r)),i?[r,i]:r},null,ye),Me=(t._parseDots=ce(function(e){for(var n=[],r=0,i=e.length;r<i;r++){var s={},a=e[r].match(/^([^:]*):?([\d\.]*)/);if(s.color=t.getRGB(a[1]),s.color.error)return null;s.opacity=s.color.opacity,s.color=s.color.hex,a[2]&&(s.offset=a[2]+"%"),n.push(s)}for(r=1,i=n.length-1;r<i;r++)if(!n[r].offset){for(var o=D(n[r-1].offset||0),l=0,c=r+1;c<i;c++)if(n[c].offset){l=n[c].offset;break}l||(l=100,c=i);for(var d=((l=D(l))-o)/(c-r+1);r<c;r++)o+=d,n[r].offset=o+"%"}return n}),t._tear=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)}),Ie=(t._tofront=function(e,t){t.top!==e&&(Me(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e)},t._toback=function(e,t){t.bottom!==e&&(Me(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e)},t._insertafter=function(e,t,n){Me(e,n),t==n.top&&(n.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},t._insertbefore=function(e,t,n){Me(e,n),t==n.bottom&&(n.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},t.toMatrix=function(e,t){var n=Ue(e),r={_:{transform:g},getBBox:function(){return n}};return je(r,t),r.matrix}),je=(t.transformPath=function(e,t){return J(e,Ie(e,t))},t._extractTransform=function(e,n){if(null==n)return e._.transform;n=U(n).replace(/\.{3}|\u2026/g,e._.transform||g);var r,i,s=t.parseTransformString(n),a=0,o=1,l=1,c=e._,d=new Pe;if(c.transform=s||[],s)for(var u=0,h=s.length;u<h;u++){var p,f,m,b,y,x=s[u],v=x.length,w=U(x[0]).toLowerCase(),S=x[0]!=w,E=S?d.invert():0;"t"==w&&3==v?S?(p=E.x(0,0),f=E.y(0,0),m=E.x(x[1],x[2]),b=E.y(x[1],x[2]),d.translate(m-p,b-f)):d.translate(x[1],x[2]):"r"==w?2==v?(y=y||e.getBBox(1),d.rotate(x[1],y.x+y.width/2,y.y+y.height/2),a+=x[1]):4==v&&(S?(m=E.x(x[2],x[3]),b=E.y(x[2],x[3]),d.rotate(x[1],m,b)):d.rotate(x[1],x[2],x[3]),a+=x[1]):"s"==w?2==v||3==v?(y=y||e.getBBox(1),d.scale(x[1],x[v-1],y.x+y.width/2,y.y+y.height/2),o*=x[1],l*=x[v-1]):5==v&&(S?(m=E.x(x[3],x[4]),b=E.y(x[3],x[4]),d.scale(x[1],x[2],m,b)):d.scale(x[1],x[2],x[3],x[4]),o*=x[1],l*=x[2]):"m"==w&&7==v&&d.add(x[1],x[2],x[3],x[4],x[5],x[6]),c.dirtyT=1,e.matrix=d}e.matrix=d,c.sx=o,c.sy=l,c.deg=a,c.dx=r=d.e,c.dy=i=d.f,1==o&&1==l&&!a&&c.bbox?(c.bbox.x+=+r,c.bbox.y+=+i):c.dirtyT=1}),Te=function(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}},Re=t._equaliseTransform=function(e,n){n=U(n).replace(/\.{3}|\u2026/g,e),e=t.parseTransformString(e)||[],n=t.parseTransformString(n)||[];for(var r,i,s,a,o=E(e.length,n.length),l=[],c=[],d=0;d<o;d++){if(s=e[d]||Te(n[d]),a=n[d]||Te(s),s[0]!=a[0]||"r"==s[0].toLowerCase()&&(s[2]!=a[2]||s[3]!=a[3])||"s"==s[0].toLowerCase()&&(s[3]!=a[3]||s[4]!=a[4]))return;for(l[d]=[],c[d]=[],r=0,i=E(s.length,a.length);r<i;r++)r in s&&(l[d][r]=s[r]),r in a&&(c[d][r]=a[r])}return{from:l,to:c}};function Pe(e,t,n,r,i,s){null!=e?(this.a=+e,this.b=+t,this.c=+n,this.d=+r,this.e=+i,this.f=+s):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}t._getContainer=function(e,n,r,i){var s;if(null!=(s=null!=i||t.is(e,"object")?e:d.doc.getElementById(e)))return s.tagName?null==n?{container:s,width:s.style.pixelWidth||s.offsetWidth,height:s.style.pixelHeight||s.offsetHeight}:{container:s,width:n,height:r}:{container:1,x:e,y:n,width:r,height:i}},t.pathToRelative=xe,t._engine={},t.path2curve=_e,t.matrix=function(e,t,n,r,i,s){return new Pe(e,t,n,r,i,s)},function(e){function n(e){return e[0]*e[0]+e[1]*e[1]}function r(e){var t=S.sqrt(n(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}e.add=function(e,t,n,r,i,s){var a,o,l,c,d=[[],[],[]],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],h=[[e,n,i],[t,r,s],[0,0,1]];for(e&&e instanceof Pe&&(h=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),a=0;a<3;a++)for(o=0;o<3;o++){for(c=0,l=0;l<3;l++)c+=u[a][l]*h[l][o];d[a][o]=c}this.a=d[0][0],this.b=d[1][0],this.c=d[0][1],this.d=d[1][1],this.e=d[0][2],this.f=d[1][2]},e.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new Pe(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},e.clone=function(){return new Pe(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(e,t){this.add(1,0,0,1,e,t)},e.scale=function(e,t,n,r){null==t&&(t=e),(n||r)&&this.add(1,0,0,1,n,r),this.add(e,0,0,t,0,0),(n||r)&&this.add(1,0,0,1,-n,-r)},e.rotate=function(e,n,r){e=t.rad(e),n=n||0,r=r||0;var i=+S.cos(e).toFixed(9),s=+S.sin(e).toFixed(9);this.add(i,s,-s,i,n,r),this.add(1,0,0,1,-n,-r)},e.x=function(e,t){return e*this.a+t*this.c+this.e},e.y=function(e,t){return e*this.b+t*this.d+this.f},e.get=function(e){return+this[U.fromCharCode(97+e)].toFixed(4)},e.toString=function(){return t.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var i=[[this.a,this.c],[this.b,this.d]];e.scalex=S.sqrt(n(i[0])),r(i[0]),e.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*e.shear,i[1][1]-i[0][1]*e.shear],e.scaley=S.sqrt(n(i[1])),r(i[1]),e.shear/=e.scaley;var s=-i[0][1],a=i[1][1];return a<0?(e.rotate=t.deg(S.acos(a)),s<0&&(e.rotate=360-e.rotate)):e.rotate=t.deg(S.asin(s)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},e.toTransformString=function(e){var t=e||this[y]();return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[t.dx,t.dy]:g)+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:g)+(t.rotate?"r"+[t.rotate,0,0]:g)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(Pe.prototype);for(var Ae=function(){this.returnValue=!1},Ne=function(){return this.originalEvent.preventDefault()},De=function(){this.cancelBubble=!0},Le=function(){return this.originalEvent.stopPropagation()},Oe=function(e){var t=d.doc.documentElement.scrollTop||d.doc.body.scrollTop,n=d.doc.documentElement.scrollLeft||d.doc.body.scrollLeft;return{x:e.clientX+n,y:e.clientY+t}},Fe=d.doc.addEventListener?function(e,t,n,r){var i=function(e){var t=Oe(e);return n.call(r,e,t.x,t.y)};if(e.addEventListener(t,i,!1),m&&v[t]){var s=function(t){for(var i=Oe(t),s=t,a=0,o=t.targetTouches&&t.targetTouches.length;a<o;a++)if(t.targetTouches[a].target==e){(t=t.targetTouches[a]).originalEvent=s,t.preventDefault=Ne,t.stopPropagation=Le;break}return n.call(r,t,i.x,i.y)};e.addEventListener(v[t],s,!1)}return function(){return e.removeEventListener(t,i,!1),m&&v[t]&&e.removeEventListener(v[t],s,!1),!0}}:d.doc.attachEvent?function(e,t,n,r){var i=function(e){e=e||d.win.event;var t=d.doc.documentElement.scrollTop||d.doc.body.scrollTop,i=d.doc.documentElement.scrollLeft||d.doc.body.scrollLeft,s=e.clientX+i,a=e.clientY+t;return e.preventDefault=e.preventDefault||Ae,e.stopPropagation=e.stopPropagation||De,n.call(r,e,s,a)};return e.attachEvent("on"+t,i),function(){return e.detachEvent("on"+t,i),!0}}:void 0,ze=[],Be=function(t){for(var n,r=t.clientX,i=t.clientY,s=d.doc.documentElement.scrollTop||d.doc.body.scrollTop,a=d.doc.documentElement.scrollLeft||d.doc.body.scrollLeft,o=ze.length;o--;){if(n=ze[o],m&&t.touches){for(var l,c=t.touches.length;c--;)if((l=t.touches[c]).identifier==n.el._drag.id){r=l.clientX,i=l.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var u,h=n.el.node,p=h.nextSibling,f=h.parentNode,g=h.style.display;d.win.opera&&f.removeChild(h),h.style.display="none",u=n.el.paper.getElementByPoint(r,i),h.style.display=g,d.win.opera&&(p?f.insertBefore(h,p):f.appendChild(h)),u&&e("raphael.drag.over."+n.el.id,n.el,u),r+=a,i+=s,e("raphael.drag.move."+n.el.id,n.move_scope||n.el,r-n.el._drag.x,i-n.el._drag.y,r,i,t)}},He=function(n){t.unmousemove(Be).unmouseup(He);for(var r,i=ze.length;i--;)(r=ze[i]).el._drag={},e("raphael.drag.end."+r.el.id,r.end_scope||r.start_scope||r.move_scope||r.el,n);ze=[]},$e=t.el={},We=x.length;We--;)!function(e){t[e]=$e[e]=function(n,r){return t.is(n,"function")&&(this.events=this.events||[],this.events.push({name:e,f:n,unbind:Fe(this.shape||this.node||d.doc,e,n,r||this)})),this},t["un"+e]=$e["un"+e]=function(n){for(var r=this.events||[],i=r.length;i--;)r[i].name!=e||!t.is(n,"undefined")&&r[i].f!=n||(r[i].unbind(),r.splice(i,1),!r.length&&delete this.events);return this}}(x[We]);$e.data=function(n,r){var i=G[this.id]=G[this.id]||{};if(0==arguments.length)return i;if(1==arguments.length){if(t.is(n,"object")){for(var s in n)n[c](s)&&this.data(s,n[s]);return this}return e("raphael.data.get."+this.id,this,i[n],n),i[n]}return i[n]=r,e("raphael.data.set."+this.id,this,r,n),this},$e.removeData=function(e){return null==e?delete G[this.id]:G[this.id]&&delete G[this.id][e],this},$e.getData=function(){return ne(G[this.id]||{})},$e.hover=function(e,t,n,r){return this.mouseover(e,n).mouseout(t,r||n)},$e.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var Xe=[];function Ve(){return this.x+b+this.y+b+this.width+" × "+this.height}$e.drag=function(n,r,i,s,a,o){function l(l){(l.originalEvent||l).preventDefault();var c=l.clientX,u=l.clientY,h=d.doc.documentElement.scrollTop||d.doc.body.scrollTop,p=d.doc.documentElement.scrollLeft||d.doc.body.scrollLeft;if(this._drag.id=l.identifier,m&&l.touches)for(var f,g=l.touches.length;g--;)if(f=l.touches[g],this._drag.id=f.identifier,f.identifier==this._drag.id){c=f.clientX,u=f.clientY;break}this._drag.x=c+p,this._drag.y=u+h,!ze.length&&t.mousemove(Be).mouseup(He),ze.push({el:this,move_scope:s,start_scope:a,end_scope:o}),r&&e.on("raphael.drag.start."+this.id,r),n&&e.on("raphael.drag.move."+this.id,n),i&&e.on("raphael.drag.end."+this.id,i),e("raphael.drag.start."+this.id,a||s||this,this._drag.x,this._drag.y,l)}return this._drag={},Xe.push({el:this,start:l}),this.mousedown(l),this},$e.onDragOver=function(t){t?e.on("raphael.drag.over."+this.id,t):e.unbind("raphael.drag.over."+this.id)},$e.undrag=function(){for(var n=Xe.length;n--;)Xe[n].el==this&&(this.unmousedown(Xe[n].start),Xe.splice(n,1),e.unbind("raphael.drag.*."+this.id));!Xe.length&&t.unmousemove(Be).unmouseup(He),ze=[]},r.circle=function(e,n,r){var i=t._engine.circle(this,e||0,n||0,r||0);return this.__set__&&this.__set__.push(i),i},r.rect=function(e,n,r,i,s){var a=t._engine.rect(this,e||0,n||0,r||0,i||0,s||0);return this.__set__&&this.__set__.push(a),a},r.ellipse=function(e,n,r,i){var s=t._engine.ellipse(this,e||0,n||0,r||0,i||0);return this.__set__&&this.__set__.push(s),s},r.path=function(e){e&&!t.is(e,"string")&&!t.is(e[0],j)&&(e+=g);var n=t._engine.path(t.format[p](t,arguments),this);return this.__set__&&this.__set__.push(n),n},r.image=function(e,n,r,i,s){var a=t._engine.image(this,e||"about:blank",n||0,r||0,i||0,s||0);return this.__set__&&this.__set__.push(a),a},r.text=function(e,n,r){var i=t._engine.text(this,e||0,n||0,U(r));return this.__set__&&this.__set__.push(i),i},r.set=function(e){!t.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var n=new ut(e);return this.__set__&&this.__set__.push(n),n.paper=this,n.type="set",n},r.setStart=function(e){this.__set__=e||this.set()},r.setFinish=function(e){var t=this.__set__;return delete this.__set__,t},r.getSize=function(){var e=this.canvas.parentNode;return{width:e.offsetWidth,height:e.offsetHeight}},r.setSize=function(e,n){return t._engine.setSize.call(this,e,n)},r.setViewBox=function(e,n,r,i,s){return t._engine.setViewBox.call(this,e,n,r,i,s)},r.top=r.bottom=null,r.raphael=t,r.getElementByPoint=function(e,t){var n,r,i,s,a,o,l,c=this.canvas,u=d.doc.elementFromPoint(e,t);if(d.win.opera&&"svg"==u.tagName){var h=(r=(n=c).getBoundingClientRect(),s=(i=n.ownerDocument).body,o=(a=i.documentElement).clientTop||s.clientTop||0,l=a.clientLeft||s.clientLeft||0,{y:r.top+(d.win.pageYOffset||a.scrollTop||s.scrollTop)-o,x:r.left+(d.win.pageXOffset||a.scrollLeft||s.scrollLeft)-l}),p=c.createSVGRect();p.x=e-h.x,p.y=t-h.y,p.width=p.height=1;var f=c.getIntersectionList(p,null);f.length&&(u=f[f.length-1])}if(!u)return null;for(;u.parentNode&&u!=c.parentNode&&!u.raphael;)u=u.parentNode;return u==this.canvas.parentNode&&(u=c),u&&u.raphael?this.getById(u.raphaelid):null},r.getElementsByBBox=function(e){var n=this.set();return this.forEach(function(r){t.isBBoxIntersect(r.getBBox(),e)&&n.push(r)}),n},r.getById=function(e){for(var t=this.bottom;t;){if(t.id==e)return t;t=t.next}return null},r.forEach=function(e,t){for(var n=this.bottom;n;){if(!1===e.call(t,n))return this;n=n.next}return this},r.getElementsByPoint=function(e,t){var n=this.set();return this.forEach(function(r){r.isPointInside(e,t)&&n.push(r)}),n},$e.isPointInside=function(e,n){var r=this.realPath=Q[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(r=t.transformPath(r,this.attr("transform"))),t.isPointInsidePath(r,e,n)},$e.getBBox=function(e){if(this.removed)return{};var t=this._;return e?(!t.dirty&&t.bboxwt||(this.realPath=Q[this.type](this),t.bboxwt=Ue(this.realPath),t.bboxwt.toString=Ve,t.dirty=0),t.bboxwt):((t.dirty||t.dirtyT||!t.bbox)&&(!t.dirty&&this.realPath||(t.bboxwt=0,this.realPath=Q[this.type](this)),t.bbox=Ue(J(this.realPath,this.matrix)),t.bbox.toString=Ve,t.dirty=t.dirtyT=0),t.bbox)},$e.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},$e.glow=function(e){if("text"==this.type)return null;var t={width:((e=e||{}).width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:null==e.opacity?.5:e.opacity,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},n=t.width/2,r=this.paper,i=r.set(),s=this.realPath||Q[this.type](this);s=this.matrix?J(s,this.matrix):s;for(var a=1;a<n+1;a++)i.push(r.path(s).attr({stroke:t.color,fill:t.fill?t.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(t.width/n*a).toFixed(3),opacity:+(t.opacity/n).toFixed(3)}));return i.insertBefore(this).translate(t.offsetx,t.offsety)};var Ge=function(e,n,r,i,s,a,o,l,c){return null==c?fe(e,n,r,i,s,a,o,l):t.findDotsAtSegment(e,n,r,i,s,a,o,l,function(e,t,n,r,i,s,a,o,l){if(!(l<0||fe(e,t,n,r,i,s,a,o)<l)){var c,d=.5,u=1-d;for(c=fe(e,t,n,r,i,s,a,o,u);C(c-l)>.01;)c=fe(e,t,n,r,i,s,a,o,u+=(c<l?1:-1)*(d/=2));return u}}(e,n,r,i,s,a,o,l,c))},Ye=function(e,n){return function(r,i,s){for(var a,o,l,c,d,u="",h={},p=0,f=0,m=(r=_e(r)).length;f<m;f++){if("M"==(l=r[f])[0])a=+l[1],o=+l[2];else{if(p+(c=Ge(a,o,l[1],l[2],l[3],l[4],l[5],l[6]))>i){if(n&&!h.start){if(u+=["C"+(d=Ge(a,o,l[1],l[2],l[3],l[4],l[5],l[6],i-p)).start.x,d.start.y,d.m.x,d.m.y,d.x,d.y],s)return u;h.start=u,u=["M"+d.x,d.y+"C"+d.n.x,d.n.y,d.end.x,d.end.y,l[5],l[6]].join(),p+=c,a=+l[5],o=+l[6];continue}if(!e&&!n)return{x:(d=Ge(a,o,l[1],l[2],l[3],l[4],l[5],l[6],i-p)).x,y:d.y,alpha:d.alpha}}p+=c,a=+l[5],o=+l[6]}u+=l.shift()+l}return h.end=u,(d=e?p:n?h:t.findDotsAtSegment(a,o,l[0],l[1],l[2],l[3],l[4],l[5],1)).alpha&&(d={x:d.x,y:d.y,alpha:d.alpha}),d}},qe=Ye(1),Ze=Ye(),Ke=Ye(0,1);t.getTotalLength=qe,t.getPointAtLength=Ze,t.getSubpath=function(e,t,n){if(this.getTotalLength(e)-n<1e-6)return Ke(e,t).end;var r=Ke(e,n,1);return t?Ke(r,t).end:r},$e.getTotalLength=function(){var e=this.getPath();if(e)return this.node.getTotalLength?this.node.getTotalLength():qe(e)},$e.getPointAtLength=function(e){var t=this.getPath();if(t)return Ze(t,e)},$e.getPath=function(){var e,n=t._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return n&&(e=n(this)),e},$e.getSubpath=function(e,n){var r=this.getPath();if(r)return t.getSubpath(r,e,n)};var Qe=t.easing_formulas={linear:function(e){return e},"<":function(e){return _(e,1.7)},">":function(e){return _(e,.48)},"<>":function(e){var t=.48-e/1.04,n=S.sqrt(.1734+t*t),r=n-t,i=-n-t,s=_(C(r),1/3)*(r<0?-1:1)+_(C(i),1/3)*(i<0?-1:1)+.5;return 3*(1-s)*s*s+s*s*s},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},elastic:function(e){return e==!!e?e:_(2,-10*e)*S.sin(2*M*(e-.075)/.3)+1},bounce:function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375}};Qe.easeIn=Qe["ease-in"]=Qe["<"],Qe.easeOut=Qe["ease-out"]=Qe[">"],Qe.easeInOut=Qe["ease-in-out"]=Qe["<>"],Qe["back-in"]=Qe.backIn,Qe["back-out"]=Qe.backOut;var Je=[],et=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16)},tt=function(){for(var n=+new Date,r=0;r<Je.length;r++){var i=Je[r];if(!i.el.removed&&!i.paused){var s,a,o=n-i.start,l=i.ms,d=i.easing,u=i.from,h=i.diff,p=i.to,m=(i.t,i.el),g={},U={};if(i.initstatus?(o=(i.initstatus*i.anim.top-i.prev)/(i.percent-i.prev)*l,i.status=i.initstatus,delete i.initstatus,i.stop&&Je.splice(r--,1)):i.status=(i.prev+(i.percent-i.prev)*(o/l))/i.anim.top,!(o<0))if(o<l){var y=d(o/l);for(var x in u)if(u[c](x)){switch(z[x]){case I:s=+u[x]+y*l*h[x];break;case"colour":s="rgb("+[nt(N(u[x].r+y*l*h[x].r)),nt(N(u[x].g+y*l*h[x].g)),nt(N(u[x].b+y*l*h[x].b))].join(",")+")";break;case"path":s=[];for(var v=0,w=u[x].length;v<w;v++){s[v]=[u[x][v][0]];for(var S=1,E=u[x][v].length;S<E;S++)s[v][S]=+u[x][v][S]+y*l*h[x][v][S];s[v]=s[v].join(b)}s=s.join(b);break;case"transform":if(h[x].real)for(s=[],v=0,w=u[x].length;v<w;v++)for(s[v]=[u[x][v][0]],S=1,E=u[x][v].length;S<E;S++)s[v][S]=u[x][v][S]+y*l*h[x][v][S];else{var k=function(e){return+u[x][e]+y*l*h[x][e]};s=[["m",k(0),k(1),k(2),k(3),k(4),k(5)]]}break;case"csv":if("clip-rect"==x)for(s=[],v=4;v--;)s[v]=+u[x][v]+y*l*h[x][v];break;default:var C=[][f](u[x]);for(s=[],v=m.paper.customAttributes[x].length;v--;)s[v]=+C[v]+y*l*h[x][v]}g[x]=s}m.attr(g),function(t,n,r){setTimeout(function(){e("raphael.anim.frame."+t,n,r)})}(m.id,m,i.anim)}else{if(function(n,r,i){setTimeout(function(){e("raphael.anim.frame."+r.id,r,i),e("raphael.anim.finish."+r.id,r,i),t.is(n,"function")&&n.call(r)})}(i.callback,m,i.anim),m.attr(p),Je.splice(r--,1),i.repeat>1&&!i.next){for(a in p)p[c](a)&&(U[a]=i.totalOrigin[a]);i.el.attr(U),st(i.anim,i.el,i.anim.percents[0],null,i.totalOrigin,i.repeat-1)}i.next&&!i.stop&&st(i.anim,i.el,i.next,null,i.totalOrigin,i.repeat)}}}Je.length&&et(tt)},nt=function(e){return e>255?255:e<0?0:e};function rt(e,t,n,r,i,s){var a,o=3*t,l=3*(r-t)-o,c=1-o-l,d=3*n,u=3*(i-n)-d,h=1-d-u;function p(e){return((c*e+l)*e+o)*e}return a=function(e,t){var n,r,i,s,a,d;for(i=e,d=0;d<8;d++){if(s=p(i)-e,C(s)<t)return i;if(C(a=(3*c*i+2*l)*i+o)<1e-6)break;i-=s/a}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(s=p(i),C(s-e)<t)return i;e>s?n=i:r=i,i=(r-n)/2+n}return i}(e,1/(200*s)),((h*a+u)*a+d)*a}function it(e,t){var n=[],r={};if(this.ms=t,this.times=1,e){for(var i in e)e[c](i)&&(r[D(i)]=e[i],n.push(D(i)));n.sort(Y)}this.anim=r,this.top=n[n.length-1],this.percents=n}function st(n,r,i,s,o,l){i=D(i);var d,u,h,p,m,g,b=n.ms,x={},v={},w={};if(s)for(E=0,k=Je.length;E<k;E++){var S=Je[E];if(S.el.id==r.id&&S.anim==n){S.percent!=i?(Je.splice(E,1),h=1):u=S,r.attr(S.totalOrigin);break}}else s=+v;for(var E=0,k=n.percents.length;E<k;E++){if(n.percents[E]==i||n.percents[E]>s*n.top){i=n.percents[E],m=n.percents[E-1]||0,b=b/n.top*(i-m),p=n.percents[E+1],d=n.anim[i];break}s&&r.attr(n.anim[n.percents[E]])}if(d){if(u)u.initstatus=s,u.start=new Date-u.ms*s;else{for(var C in d)if(d[c](C)&&(z[c](C)||r.paper.customAttributes[c](C)))switch(x[C]=r.attr(C),null==x[C]&&(x[C]=F[C]),v[C]=d[C],z[C]){case I:w[C]=(v[C]-x[C])/b;break;case"colour":x[C]=t.getRGB(x[C]);var _=t.getRGB(v[C]);w[C]={r:(_.r-x[C].r)/b,g:(_.g-x[C].g)/b,b:(_.b-x[C].b)/b};break;case"path":var M=_e(x[C],v[C]),j=M[1];for(x[C]=M[0],w[C]=[],E=0,k=x[C].length;E<k;E++){w[C][E]=[0];for(var T=1,R=x[C][E].length;T<R;T++)w[C][E][T]=(j[E][T]-x[C][E][T])/b}break;case"transform":var P=r._,N=Re(P[C],v[C]);if(N)for(x[C]=N.from,v[C]=N.to,w[C]=[],w[C].real=!0,E=0,k=x[C].length;E<k;E++)for(w[C][E]=[x[C][E][0]],T=1,R=x[C][E].length;T<R;T++)w[C][E][T]=(v[C][E][T]-x[C][E][T])/b;else{var L=r.matrix||new Pe,O={_:{transform:P.transform},getBBox:function(){return r.getBBox(1)}};x[C]=[L.a,L.b,L.c,L.d,L.e,L.f],je(O,v[C]),v[C]=O._.transform,w[C]=[(O.matrix.a-L.a)/b,(O.matrix.b-L.b)/b,(O.matrix.c-L.c)/b,(O.matrix.d-L.d)/b,(O.matrix.e-L.e)/b,(O.matrix.f-L.f)/b]}break;case"csv":var B=U(d[C])[y](a),H=U(x[C])[y](a);if("clip-rect"==C)for(x[C]=H,w[C]=[],E=H.length;E--;)w[C][E]=(B[E]-x[C][E])/b;v[C]=B;break;default:for(B=[][f](d[C]),H=[][f](x[C]),w[C]=[],E=r.paper.customAttributes[C].length;E--;)w[C][E]=((B[E]||0)-(H[E]||0))/b}var $=d.easing,W=t.easing_formulas[$];if(!W)if((W=U($).match(A))&&5==W.length){var X=W;W=function(e){return rt(e,+X[1],+X[2],+X[3],+X[4],b)}}else W=q;if(S={anim:n,percent:i,timestamp:g=d.start||n.start||+new Date,start:g+(n.del||0),status:0,initstatus:s||0,stop:!1,ms:b,easing:W,from:x,diff:w,to:v,el:r,callback:d.callback,prev:m,next:p,repeat:l||n.times,origin:r.attr(),totalOrigin:o},Je.push(S),s&&!u&&!h&&(S.stop=!0,S.start=new Date-b*s,1==Je.length))return tt();h&&(S.start=new Date-S.ms*s),1==Je.length&&et(tt)}e("raphael.anim.start."+r.id,r,n)}}function at(e){for(var t=0;t<Je.length;t++)Je[t].el.paper==e&&Je.splice(t--,1)}$e.animateWith=function(e,n,r,i,s,a){if(this.removed)return a&&a.call(this),this;var o=r instanceof it?r:t.animation(r,i,s,a);st(o,this,o.percents[0],null,this.attr());for(var l=0,c=Je.length;l<c;l++)if(Je[l].anim==n&&Je[l].el==e){Je[c-1].start=Je[l].start;break}return this},$e.onAnimation=function(t){return t?e.on("raphael.anim.frame."+this.id,t):e.unbind("raphael.anim.frame."+this.id),this},it.prototype.delay=function(e){var t=new it(this.anim,this.ms);return t.times=this.times,t.del=+e||0,t},it.prototype.repeat=function(e){var t=new it(this.anim,this.ms);return t.del=this.del,t.times=S.floor(E(e,0))||1,t},t.animation=function(e,n,r,i){if(e instanceof it)return e;!t.is(r,"function")&&r||(i=i||r||null,r=null),e=Object(e),n=+n||0;var s,a,o={};for(a in e)e[c](a)&&D(a)!=a&&D(a)+"%"!=a&&(s=!0,o[a]=e[a]);if(s)return r&&(o.easing=r),i&&(o.callback=i),new it({100:o},n);if(i){var l=0;for(var d in e){var u=L(d);e[c](d)&&u>l&&(l=u)}!e[l+="%"].callback&&(e[l].callback=i)}return new it(e,n)},$e.animate=function(e,n,r,i){if(this.removed)return i&&i.call(this),this;var s=e instanceof it?e:t.animation(e,n,r,i);return st(s,this,s.percents[0],null,this.attr()),this},$e.setTime=function(e,t){return e&&null!=t&&this.status(e,k(t,e.ms)/e.ms),this},$e.status=function(e,t){var n,r,i=[],s=0;if(null!=t)return st(e,this,-1,k(t,1)),this;for(n=Je.length;s<n;s++)if((r=Je[s]).el.id==this.id&&(!e||r.anim==e)){if(e)return r.status;i.push({anim:r.anim,status:r.status})}return e?0:i},$e.pause=function(t){for(var n=0;n<Je.length;n++)Je[n].el.id!=this.id||t&&Je[n].anim!=t||!1!==e("raphael.anim.pause."+this.id,this,Je[n].anim)&&(Je[n].paused=!0);return this},$e.resume=function(t){for(var n=0;n<Je.length;n++)if(Je[n].el.id==this.id&&(!t||Je[n].anim==t)){var r=Je[n];!1!==e("raphael.anim.resume."+this.id,this,r.anim)&&(delete r.paused,this.status(r.anim,r.status))}return this},$e.stop=function(t){for(var n=0;n<Je.length;n++)Je[n].el.id!=this.id||t&&Je[n].anim!=t||!1!==e("raphael.anim.stop."+this.id,this,Je[n].anim)&&Je.splice(n--,1);return this},e.on("raphael.remove",at),e.on("raphael.clear",at),$e.toString=function(){return"Raphaël’s object"};var ot,lt,ct,dt,ut=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var t=0,n=e.length;t<n;t++)!e[t]||e[t].constructor!=$e.constructor&&e[t].constructor!=ut||(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},ht=ut.prototype;for(var pt in ht.push=function(){for(var e,t,n=0,r=arguments.length;n<r;n++)!(e=arguments[n])||e.constructor!=$e.constructor&&e.constructor!=ut||(this[t=this.items.length]=this.items[t]=e,this.length++);return this},ht.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},ht.forEach=function(e,t){for(var n=0,r=this.items.length;n<r;n++)if(!1===e.call(t,this.items[n],n))return this;return this},$e)$e[c](pt)&&(ht[pt]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e][p](n,t)})}}(pt));return ht.attr=function(e,n){if(e&&t.is(e,j)&&t.is(e[0],"object"))for(var r=0,i=e.length;r<i;r++)this.items[r].attr(e[r]);else for(var s=0,a=this.items.length;s<a;s++)this.items[s].attr(e,n);return this},ht.clear=function(){for(;this.length;)this.pop()},ht.splice=function(e,t,n){e=e<0?E(this.length+e,0):e,t=E(0,k(this.length-e,t));var r,i=[],s=[],a=[];for(r=2;r<arguments.length;r++)a.push(arguments[r]);for(r=0;r<t;r++)s.push(this[e+r]);for(;r<this.length-e;r++)i.push(this[e+r]);var o=a.length;for(r=0;r<o+i.length;r++)this.items[e+r]=this[e+r]=r<o?a[r]:i[r-o];for(r=this.items.length=this.length-=t-o;this[r];)delete this[r++];return new ut(s)},ht.exclude=function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]==e)return this.splice(t,1),!0},ht.animate=function(e,n,r,i){(t.is(r,"function")||!r)&&(i=r||null);var s,a,o=this.items.length,l=o,c=this;if(!o)return this;i&&(a=function(){! --o&&i.call(c)}),r=t.is(r,"string")?r:a;var d=t.animation(e,n,r,a);for(s=this.items[--l].animate(d);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(s,d,d),this.items[l]&&!this.items[l].removed||o--;return this},ht.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},ht.getBBox=function(){for(var e=[],t=[],n=[],r=[],i=this.items.length;i--;)if(!this.items[i].removed){var s=this.items[i].getBBox();e.push(s.x),t.push(s.y),n.push(s.x+s.width),r.push(s.y+s.height)}return{x:e=k[p](0,e),y:t=k[p](0,t),x2:n=E[p](0,n),y2:r=E[p](0,r),width:n-e,height:r-t}},ht.clone=function(e){e=this.paper.set();for(var t=0,n=this.items.length;t<n;t++)e.push(this.items[t].clone());return e},ht.toString=function(){return"Raphaël‘s set"},ht.glow=function(e){var t=this.paper.set();return this.forEach(function(n,r){var i=n.glow(e);null!=i&&i.forEach(function(e,n){t.push(e)})}),t},ht.isPointInside=function(e,t){var n=!1;return this.forEach(function(r){if(r.isPointInside(e,t))return n=!0,!1}),n},t.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},n=e.face["font-family"];for(var r in e.face)e.face[c](r)&&(t.face[r]=e.face[r]);if(this.fonts[n]?this.fonts[n].push(t):this.fonts[n]=[t],!e.svg)for(var i in t.face["units-per-em"]=L(e.face["units-per-em"],10),e.glyphs)if(e.glyphs[c](i)){var s=e.glyphs[i];if(t.glyphs[i]={w:s.w,k:{},d:s.d&&"M"+s.d.replace(/[mlcxtrv]/g,function(e){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[e]||"M"})+"z"},s.k)for(var a in s.k)s[c](a)&&(t.glyphs[i].k[a]=s.k[a])}return e},r.getFont=function(e,n,r,i){if(i=i||"normal",r=r||"normal",n=+n||{normal:400,bold:700,lighter:300,bolder:800}[n]||400,t.fonts){var s,a=t.fonts[e];if(!a){var o=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,g)+"(\\s|$)","i");for(var l in t.fonts)if(t.fonts[c](l)&&o.test(l)){a=t.fonts[l];break}}if(a)for(var d=0,u=a.length;d<u&&((s=a[d]).face["font-weight"]!=n||s.face["font-style"]!=r&&s.face["font-style"]||s.face["font-stretch"]!=i);d++);return s}},r.print=function(e,n,r,i,s,o,l,c){o=o||"middle",l=E(k(l||0,1),-1),c=E(k(c||1,3),1);var d,u=U(r)[y](g),h=0,p=0,f=g;if(t.is(i,"string")&&(i=this.getFont(i)),i){d=(s||16)/i.face["units-per-em"];for(var m=i.face.bbox[y](a),b=+m[0],x=m[3]-m[1],v=0,w=+m[1]+("baseline"==o?x+ +i.face.descent:x/2),S=0,C=u.length;S<C;S++){if("\n"==u[S])h=0,M=0,p=0,v+=x*c;else{var _=p&&i.glyphs[u[S-1]]||{},M=i.glyphs[u[S]];h+=p?(_.w||i.w)+(_.k&&_.k[u[S]]||0)+i.w*l:0,p=1}M&&M.d&&(f+=t.transformPath(M.d,["t",h*d,v*d,"s",d,d,b,w,"t",(e-b)/d,(n-w)/d]))}}return this.path(f).attr({fill:"#000",stroke:"none"})},r.add=function(e){if(t.is(e,"array"))for(var n,r=this.set(),i=0,s=e.length;i<s;i++)n=e[i]||{},o[c](n.type)&&r.push(this[n.type]().attr(n));return r},t.format=function(e,n){var r=t.is(n,j)?[0][f](n):arguments;return e&&t.is(e,"string")&&r.length-1&&(e=e.replace(l,function(e,t){return null==r[++t]?g:r[t]})),e||g},t.fullfill=(ot=/\{([^\}]+)\}/g,lt=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(e,t){return String(e).replace(ot,function(e,n){return r=e,s=i=t,n.replace(lt,function(e,t,n,r,i){t=t||r,s&&(t in s&&(s=s[t]),"function"==typeof s&&i&&(s=s()))}),s=(null==s||s==i?r:s)+"";var r,i,s})}),t.ninja=function(){if(u.was)d.win.Raphael=u.is;else{window.Raphael=void 0;try{delete window.Raphael}catch(e){}}return t},t.st=ht,e.on("raphael.DOMload",function(){n=!0}),null==(ct=document).readyState&&ct.addEventListener&&(ct.addEventListener("DOMContentLoaded",dt=function(){ct.removeEventListener("DOMContentLoaded",dt,!1),ct.readyState="complete"},!1),ct.readyState="loading"),function e(){/in/.test(ct.readyState)?setTimeout(e,9):t.eve("raphael.DOMload")}(),t}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(3),n(4)],void 0===(i=function(e){return e}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i,s,a,o,l,c,d,u,h,p,f,m,g;a="hasOwnProperty",o=/[\.\/]/,l=/\s*,\s*/,c=function(e,t){return e-t},d={n:{}},u=function(){for(var e=0,t=this.length;e<t;e++)if(void 0!==this[e])return this[e]},h=function(){for(var e=this.length;--e;)if(void 0!==this[e])return this[e]},p=Object.prototype.toString,f=String,m=Array.isArray||function(e){return e instanceof Array||"[object Array]"==p.call(e)},(g=function(e,t){var n,r=s,a=Array.prototype.slice.call(arguments,2),o=g.listeners(e),l=0,d=[],p={},f=[],m=i;f.firstDefined=u,f.lastDefined=h,i=e,s=0;for(var b=0,U=o.length;b<U;b++)"zIndex"in o[b]&&(d.push(o[b].zIndex),o[b].zIndex<0&&(p[o[b].zIndex]=o[b]));for(d.sort(c);d[l]<0;)if(n=p[d[l++]],f.push(n.apply(t,a)),s)return s=r,f;for(b=0;b<U;b++)if("zIndex"in(n=o[b]))if(n.zIndex==d[l]){if(f.push(n.apply(t,a)),s)break;do{if((n=p[d[++l]])&&f.push(n.apply(t,a)),s)break}while(n)}else p[n.zIndex]=n;else if(f.push(n.apply(t,a)),s)break;return s=r,i=m,f})._events=d,g.listeners=function(e){var t,n,r,i,s,a,l,c,u=m(e)?e:e.split(o),h=d,p=[h],f=[];for(i=0,s=u.length;i<s;i++){for(c=[],a=0,l=p.length;a<l;a++)for(n=[(h=p[a].n)[u[i]],h["*"]],r=2;r--;)(t=n[r])&&(c.push(t),f=f.concat(t.f||[]));p=c}return f},g.separator=function(e){e?(e="["+(e=f(e).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",o=new RegExp(e)):o=/[\.\/]/},g.on=function(e,t){if("function"!=typeof t)return function(){};for(var n=m(e)?m(e[0])?e:[e]:f(e).split(l),r=0,i=n.length;r<i;r++)!function(e){for(var n,r=m(e)?e:f(e).split(o),i=d,s=0,a=r.length;s<a;s++)i=(i=i.n).hasOwnProperty(r[s])&&i[r[s]]||(i[r[s]]={n:{}});for(i.f=i.f||[],s=0,a=i.f.length;s<a;s++)if(i.f[s]==t){n=!0;break}!n&&i.f.push(t)}(n[r]);return function(e){+e==+e&&(t.zIndex=+e)}},g.f=function(e){var t=[].slice.call(arguments,1);return function(){g.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},g.stop=function(){s=1},g.nt=function(e){var t=m(i)?i.join("."):i;return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},g.nts=function(){return m(i)?i:i.split(o)},g.off=g.unbind=function(e,t){if(e){var n=m(e)?m(e[0])?e:[e]:f(e).split(l);if(n.length>1)for(var r=0,i=n.length;r<i;r++)g.off(n[r],t);else{n=m(e)?e:f(e).split(o);var s,c,u,h,p,b=[d];for(r=0,i=n.length;r<i;r++)for(h=0;h<b.length;h+=u.length-2){if(u=[h,1],s=b[h].n,"*"!=n[r])s[n[r]]&&u.push(s[n[r]]);else for(c in s)s[a](c)&&u.push(s[c]);b.splice.apply(b,u)}for(r=0,i=b.length;r<i;r++)for(s=b[r];s.n;){if(t){if(s.f){for(h=0,p=s.f.length;h<p;h++)if(s.f[h]==t){s.f.splice(h,1);break}!s.f.length&&delete s.f}for(c in s.n)if(s.n[a](c)&&s.n[c].f){var U=s.n[c].f;for(h=0,p=U.length;h<p;h++)if(U[h]==t){U.splice(h,1);break}!U.length&&delete s.n[c].f}}else for(c in delete s.f,s.n)s.n[a](c)&&s.n[c].f&&delete s.n[c].f;s=s.n}}}else g._events=d={n:{}}},g.once=function(e,t){var n=function(){return g.off(e,n),t.apply(this,arguments)};return g.on(e,n)},g.version="0.5.0",g.toString=function(){return"You are running Eve 0.5.0"},e.exports?e.exports=g:void 0===(r=function(){return g}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(0)],void 0===(i=function(e){if(!e||e.svg){var t="hasOwnProperty",n=String,r=parseFloat,i=parseInt,s=Math,a=s.max,o=s.abs,l=s.pow,c=/[, ]+/,d=e.eve,u="",h=" ",p="http://www.w3.org/1999/xlink",f={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},m={};e.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var g=function(r,i){if(i)for(var s in"string"==typeof r&&(r=g(r)),i)i[t](s)&&("xlink:"==s.substring(0,6)?r.setAttributeNS(p,s.substring(6),n(i[s])):r.setAttribute(s,n(i[s])));else(r=e._g.doc.createElementNS("http://www.w3.org/2000/svg",r)).style&&(r.style.webkitTapHighlightColor="rgba(0,0,0,0)");return r},b=function(t,i){var c="linear",d=t.id+i,h=.5,p=.5,f=t.node,m=t.paper,b=f.style,y=e._g.doc.getElementById(d);if(!y){if(i=(i=n(i).replace(e._radial_gradient,function(e,t,n){if(c="radial",t&&n){h=r(t);var i=2*((p=r(n))>.5)-1;l(h-.5,2)+l(p-.5,2)>.25&&(p=s.sqrt(.25-l(h-.5,2))*i+.5)&&.5!=p&&(p=p.toFixed(5)-1e-5*i)}return u})).split(/\s*\-\s*/),"linear"==c){var x=i.shift();if(x=-r(x),isNaN(x))return null;var v=[0,0,s.cos(e.rad(x)),s.sin(e.rad(x))],w=1/(a(o(v[2]),o(v[3]))||1);v[2]*=w,v[3]*=w,v[2]<0&&(v[0]=-v[2],v[2]=0),v[3]<0&&(v[1]=-v[3],v[3]=0)}var S=e._parseDots(i);if(!S)return null;if(d=d.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&d!=t.gradient.id&&(m.defs.removeChild(t.gradient),delete t.gradient),!t.gradient){y=g(c+"Gradient",{id:d}),t.gradient=y,g(y,"radial"==c?{fx:h,fy:p}:{x1:v[0],y1:v[1],x2:v[2],y2:v[3],gradientTransform:t.matrix.invert()}),m.defs.appendChild(y);for(var E=0,k=S.length;E<k;E++)y.appendChild(g("stop",{offset:S[E].offset?S[E].offset:E?"100%":"0%","stop-color":S[E].color||"#fff","stop-opacity":isFinite(S[E].opacity)?S[E].opacity:1}))}}return g(f,{fill:U(d),opacity:1,"fill-opacity":1}),b.fill=u,b.opacity=1,b.fillOpacity=1,1},U=function(e){if((t=document.documentMode)&&(9===t||10===t))return"url('#"+e+"')";var t,n=document.location;return"url('"+n.protocol+"//"+n.host+n.pathname+n.search+"#"+e+"')"},y=function(e){var t=e.getBBox(1);g(e.pattern,{patternTransform:e.matrix.invert()+" translate("+t.x+","+t.y+")"})},x=function(r,i,s){if("path"==r.type){for(var a,o,l,c,d,h=n(i).toLowerCase().split("-"),p=r.paper,b=s?"end":"start",U=r.node,y=r.attrs,x=y["stroke-width"],v=h.length,w="classic",S=3,E=3,k=5;v--;)switch(h[v]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":w=h[v];break;case"wide":E=5;break;case"narrow":E=2;break;case"long":S=5;break;case"short":S=2}if("open"==w?(S+=2,E+=2,k+=2,l=1,c=s?4:1,d={fill:"none",stroke:y.stroke}):(c=l=S/2,d={fill:y.stroke,stroke:"none"}),r._.arrows?s?(r._.arrows.endPath&&m[r._.arrows.endPath]--,r._.arrows.endMarker&&m[r._.arrows.endMarker]--):(r._.arrows.startPath&&m[r._.arrows.startPath]--,r._.arrows.startMarker&&m[r._.arrows.startMarker]--):r._.arrows={},"none"!=w){var C="raphael-marker-"+w,_="raphael-marker-"+b+w+S+E+"-obj"+r.id;e._g.doc.getElementById(C)?m[C]++:(p.defs.appendChild(g(g("path"),{"stroke-linecap":"round",d:f[w],id:C})),m[C]=1);var M,I=e._g.doc.getElementById(_);I?(m[_]++,M=I.getElementsByTagName("use")[0]):(I=g(g("marker"),{id:_,markerHeight:E,markerWidth:S,orient:"auto",refX:c,refY:E/2}),M=g(g("use"),{"xlink:href":"#"+C,transform:(s?"rotate(180 "+S/2+" "+E/2+") ":u)+"scale("+S/k+","+E/k+")","stroke-width":(1/((S/k+E/k)/2)).toFixed(4)}),I.appendChild(M),p.defs.appendChild(I),m[_]=1),g(M,d);var j=l*("diamond"!=w&&"oval"!=w);s?(a=r._.arrows.startdx*x||0,o=e.getTotalLength(y.path)-j*x):(a=j*x,o=e.getTotalLength(y.path)-(r._.arrows.enddx*x||0)),(d={})["marker-"+b]="url(#"+_+")",(o||a)&&(d.d=e.getSubpath(y.path,a,o)),g(U,d),r._.arrows[b+"Path"]=C,r._.arrows[b+"Marker"]=_,r._.arrows[b+"dx"]=j,r._.arrows[b+"Type"]=w,r._.arrows[b+"String"]=i}else s?(a=r._.arrows.startdx*x||0,o=e.getTotalLength(y.path)-a):(a=0,o=e.getTotalLength(y.path)-(r._.arrows.enddx*x||0)),r._.arrows[b+"Path"]&&g(U,{d:e.getSubpath(y.path,a,o)}),delete r._.arrows[b+"Path"],delete r._.arrows[b+"Marker"],delete r._.arrows[b+"dx"],delete r._.arrows[b+"Type"],delete r._.arrows[b+"String"];for(d in m)if(m[t](d)&&!m[d]){var T=e._g.doc.getElementById(d);T&&T.parentNode.removeChild(T)}}},v={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},w=function(e,t,r){if(t=v[n(t).toLowerCase()]){for(var i=e.attrs["stroke-width"]||"1",s={round:i,square:i,butt:0}[e.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,a=[],o=t.length;o--;)a[o]=t[o]*i+(o%2?1:-1)*s;g(e.node,{"stroke-dasharray":a.join(",")})}else g(e.node,{"stroke-dasharray":"none"})},S=function(r,s){var l=r.node,d=r.attrs,h=l.style.visibility;for(var f in l.style.visibility="hidden",s)if(s[t](f)){if(!e._availableAttrs[t](f))continue;var m=s[f];switch(d[f]=m,f){case"blur":r.blur(m);break;case"title":var U=l.getElementsByTagName("title");if(U.length&&(U=U[0]))U.firstChild.nodeValue=m;else{U=g("title");var v=e._g.doc.createTextNode(m);U.appendChild(v),l.appendChild(U)}break;case"href":case"target":var S=l.parentNode;if("a"!=S.tagName.toLowerCase()){var k=g("a");S.insertBefore(k,l),k.appendChild(l),S=k}"target"==f?S.setAttributeNS(p,"show","blank"==m?"new":m):S.setAttributeNS(p,f,m);break;case"cursor":l.style.cursor=m;break;case"transform":r.transform(m);break;case"arrow-start":x(r,m);break;case"arrow-end":x(r,m,1);break;case"clip-rect":var C=n(m).split(c);if(4==C.length){r.clip&&r.clip.parentNode.parentNode.removeChild(r.clip.parentNode);var _=g("clipPath"),M=g("rect");_.id=e.createUUID(),g(M,{x:C[0],y:C[1],width:C[2],height:C[3]}),_.appendChild(M),r.paper.defs.appendChild(_),g(l,{"clip-path":"url(#"+_.id+")"}),r.clip=M}if(!m){var I=l.getAttribute("clip-path");if(I){var j=e._g.doc.getElementById(I.replace(/(^url\(#|\)$)/g,u));j&&j.parentNode.removeChild(j),g(l,{"clip-path":u}),delete r.clip}}break;case"path":"path"==r.type&&(g(l,{d:m?d.path=e._pathToAbsolute(m):"M0,0"}),r._.dirty=1,r._.arrows&&("startString"in r._.arrows&&x(r,r._.arrows.startString),"endString"in r._.arrows&&x(r,r._.arrows.endString,1)));break;case"width":if(l.setAttribute(f,m),r._.dirty=1,!d.fx)break;f="x",m=d.x;case"x":d.fx&&(m=-d.x-(d.width||0));case"rx":if("rx"==f&&"rect"==r.type)break;case"cx":l.setAttribute(f,m),r.pattern&&y(r),r._.dirty=1;break;case"height":if(l.setAttribute(f,m),r._.dirty=1,!d.fy)break;f="y",m=d.y;case"y":d.fy&&(m=-d.y-(d.height||0));case"ry":if("ry"==f&&"rect"==r.type)break;case"cy":l.setAttribute(f,m),r.pattern&&y(r),r._.dirty=1;break;case"r":"rect"==r.type?g(l,{rx:m,ry:m}):l.setAttribute(f,m),r._.dirty=1;break;case"src":"image"==r.type&&l.setAttributeNS(p,"href",m);break;case"stroke-width":1==r._.sx&&1==r._.sy||(m/=a(o(r._.sx),o(r._.sy))||1),l.setAttribute(f,m),d["stroke-dasharray"]&&w(r,d["stroke-dasharray"],s),r._.arrows&&("startString"in r._.arrows&&x(r,r._.arrows.startString),"endString"in r._.arrows&&x(r,r._.arrows.endString,1));break;case"stroke-dasharray":w(r,m,s);break;case"fill":var T=n(m).match(e._ISURL);if(T){_=g("pattern");var R=g("image");_.id=e.createUUID(),g(_,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),g(R,{x:0,y:0,"xlink:href":T[1]}),_.appendChild(R),function(t){e._preload(T[1],function(){var e=this.offsetWidth,n=this.offsetHeight;g(t,{width:e,height:n}),g(R,{width:e,height:n})})}(_),r.paper.defs.appendChild(_),g(l,{fill:"url(#"+_.id+")"}),r.pattern=_,r.pattern&&y(r);break}var P=e.getRGB(m);if(P.error){if(("circle"==r.type||"ellipse"==r.type||"r"!=n(m).charAt())&&b(r,m)){if("opacity"in d||"fill-opacity"in d){var A=e._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,u));if(A){var N=A.getElementsByTagName("stop");g(N[N.length-1],{"stop-opacity":("opacity"in d?d.opacity:1)*("fill-opacity"in d?d["fill-opacity"]:1)})}}d.gradient=m,d.fill="none";break}}else delete s.gradient,delete d.gradient,!e.is(d.opacity,"undefined")&&e.is(s.opacity,"undefined")&&g(l,{opacity:d.opacity}),!e.is(d["fill-opacity"],"undefined")&&e.is(s["fill-opacity"],"undefined")&&g(l,{"fill-opacity":d["fill-opacity"]});P[t]("opacity")&&g(l,{"fill-opacity":P.opacity>1?P.opacity/100:P.opacity});case"stroke":P=e.getRGB(m),l.setAttribute(f,P.hex),"stroke"==f&&P[t]("opacity")&&g(l,{"stroke-opacity":P.opacity>1?P.opacity/100:P.opacity}),"stroke"==f&&r._.arrows&&("startString"in r._.arrows&&x(r,r._.arrows.startString),"endString"in r._.arrows&&x(r,r._.arrows.endString,1));break;case"gradient":("circle"==r.type||"ellipse"==r.type||"r"!=n(m).charAt())&&b(r,m);break;case"opacity":d.gradient&&!d[t]("stroke-opacity")&&g(l,{"stroke-opacity":m>1?m/100:m});case"fill-opacity":if(d.gradient){(A=e._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,u)))&&(N=A.getElementsByTagName("stop"),g(N[N.length-1],{"stop-opacity":m}));break}default:"font-size"==f&&(m=i(m,10)+"px");var D=f.replace(/(\-.)/g,function(e){return e.substring(1).toUpperCase()});l.style[D]=m,r._.dirty=1,l.setAttribute(f,m)}}E(r,s),l.style.visibility=h},E=function(r,s){if("text"==r.type&&(s[t]("text")||s[t]("font")||s[t]("font-size")||s[t]("x")||s[t]("y"))){var a=r.attrs,o=r.node,l=o.firstChild?i(e._g.doc.defaultView.getComputedStyle(o.firstChild,u).getPropertyValue("font-size"),10):10;if(s[t]("text")){for(a.text=s.text;o.firstChild;)o.removeChild(o.firstChild);for(var c,d=n(s.text).split("\n"),h=[],p=0,f=d.length;p<f;p++)c=g("tspan"),p&&g(c,{dy:1.2*l,x:a.x}),c.appendChild(e._g.doc.createTextNode(d[p])),o.appendChild(c),h[p]=c}else for(p=0,f=(h=o.getElementsByTagName("tspan")).length;p<f;p++)p?g(h[p],{dy:1.2*l,x:a.x}):g(h[0],{dy:0});g(o,{x:a.x,y:a.y}),r._.dirty=1;var m=r._getBBox(),b=a.y-(m.y+m.height/2);b&&e.is(b,"finite")&&g(h[0],{dy:b})}},k=function(e){return e.parentNode&&"a"===e.parentNode.tagName.toLowerCase()?e.parentNode:e},C=function(t,n){this[0]=this.node=t,t.raphael=!0,this.id=("0000"+(Math.random()*Math.pow(36,5)|0).toString(36)).slice(-5),t.raphaelid=this.id,this.matrix=e.matrix(),this.realPath=null,this.paper=n,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},_=e.el;C.prototype=_,_.constructor=C,e._engine.path=function(e,t){var n=g("path");t.canvas&&t.canvas.appendChild(n);var r=new C(n,t);return r.type="path",S(r,{fill:"none",stroke:"#000",path:e}),r},_.rotate=function(e,t,i){if(this.removed)return this;if((e=n(e).split(c)).length-1&&(t=r(e[1]),i=r(e[2])),e=r(e[0]),null==i&&(t=i),null==t||null==i){var s=this.getBBox(1);t=s.x+s.width/2,i=s.y+s.height/2}return this.transform(this._.transform.concat([["r",e,t,i]])),this},_.scale=function(e,t,i,s){if(this.removed)return this;if((e=n(e).split(c)).length-1&&(t=r(e[1]),i=r(e[2]),s=r(e[3])),e=r(e[0]),null==t&&(t=e),null==s&&(i=s),null==i||null==s)var a=this.getBBox(1);return i=null==i?a.x+a.width/2:i,s=null==s?a.y+a.height/2:s,this.transform(this._.transform.concat([["s",e,t,i,s]])),this},_.translate=function(e,t){return this.removed||((e=n(e).split(c)).length-1&&(t=r(e[1])),e=r(e[0])||0,t=+t||0,this.transform(this._.transform.concat([["t",e,t]]))),this},_.transform=function(n){var r=this._;if(null==n)return r.transform;if(e._extractTransform(this,n),this.clip&&g(this.clip,{transform:this.matrix.invert()}),this.pattern&&y(this),this.node&&g(this.node,{transform:this.matrix}),1!=r.sx||1!=r.sy){var i=this.attrs[t]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":i})}return this},_.hide=function(){return this.removed||(this.node.style.display="none"),this},_.show=function(){return this.removed||(this.node.style.display=""),this},_.remove=function(){var t=k(this.node);if(!this.removed&&t.parentNode){var n=this.paper;for(var r in n.__set__&&n.__set__.exclude(this),d.unbind("raphael.*.*."+this.id),this.gradient&&n.defs.removeChild(this.gradient),e._tear(this,n),t.parentNode.removeChild(t),this.removeData(),this)this[r]="function"==typeof this[r]?e._removedFactory(r):null;this.removed=!0}},_._getBBox=function(){if("none"==this.node.style.display){this.show();var e=!0}var t,n=!1;this.paper.canvas.parentElement?t=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(t=this.paper.canvas.parentNode.style),t&&"none"==t.display&&(n=!0,t.display="");var r={};try{r=this.node.getBBox()}catch(i){r={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{r=r||{},n&&(t.display="none")}return e&&this.hide(),r},_.attr=function(n,r){if(this.removed)return this;if(null==n){var i={};for(var s in this.attrs)this.attrs[t](s)&&(i[s]=this.attrs[s]);return i.gradient&&"none"==i.fill&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(null==r&&e.is(n,"string")){if("fill"==n&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==n)return this._.transform;for(var a=n.split(c),o={},l=0,u=a.length;l<u;l++)(n=a[l])in this.attrs?o[n]=this.attrs[n]:e.is(this.paper.customAttributes[n],"function")?o[n]=this.paper.customAttributes[n].def:o[n]=e._availableAttrs[n];return u-1?o:o[a[0]]}if(null==r&&e.is(n,"array")){for(o={},l=0,u=n.length;l<u;l++)o[n[l]]=this.attr(n[l]);return o}if(null!=r){var h={};h[n]=r}else null!=n&&e.is(n,"object")&&(h=n);for(var p in h)d("raphael.attr."+p+"."+this.id,this,h[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&h[t](p)&&e.is(this.paper.customAttributes[p],"function")){var f=this.paper.customAttributes[p].apply(this,[].concat(h[p]));for(var m in this.attrs[p]=h[p],f)f[t](m)&&(h[m]=f[m])}return S(this,h),this},_.toFront=function(){if(this.removed)return this;var t=k(this.node);t.parentNode.appendChild(t);var n=this.paper;return n.top!=this&&e._tofront(this,n),this},_.toBack=function(){if(this.removed)return this;var t=k(this.node),n=t.parentNode;return n.insertBefore(t,n.firstChild),e._toback(this,this.paper),this.paper,this},_.insertAfter=function(t){if(this.removed||!t)return this;var n=k(this.node),r=k(t.node||t[t.length-1].node);return r.nextSibling?r.parentNode.insertBefore(n,r.nextSibling):r.parentNode.appendChild(n),e._insertafter(this,t,this.paper),this},_.insertBefore=function(t){if(this.removed||!t)return this;var n=k(this.node),r=k(t.node||t[0].node);return r.parentNode.insertBefore(n,r),e._insertbefore(this,t,this.paper),this},_.blur=function(t){var n=this;if(0!=+t){var r=g("filter"),i=g("feGaussianBlur");n.attrs.blur=t,r.id=e.createUUID(),g(i,{stdDeviation:+t||1.5}),r.appendChild(i),n.paper.defs.appendChild(r),n._blur=r,g(n.node,{filter:"url(#"+r.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter");return n},e._engine.circle=function(e,t,n,r){var i=g("circle");e.canvas&&e.canvas.appendChild(i);var s=new C(i,e);return s.attrs={cx:t,cy:n,r:r,fill:"none",stroke:"#000"},s.type="circle",g(i,s.attrs),s},e._engine.rect=function(e,t,n,r,i,s){var a=g("rect");e.canvas&&e.canvas.appendChild(a);var o=new C(a,e);return o.attrs={x:t,y:n,width:r,height:i,rx:s||0,ry:s||0,fill:"none",stroke:"#000"},o.type="rect",g(a,o.attrs),o},e._engine.ellipse=function(e,t,n,r,i){var s=g("ellipse");e.canvas&&e.canvas.appendChild(s);var a=new C(s,e);return a.attrs={cx:t,cy:n,rx:r,ry:i,fill:"none",stroke:"#000"},a.type="ellipse",g(s,a.attrs),a},e._engine.image=function(e,t,n,r,i,s){var a=g("image");g(a,{x:n,y:r,width:i,height:s,preserveAspectRatio:"none"}),a.setAttributeNS(p,"href",t),e.canvas&&e.canvas.appendChild(a);var o=new C(a,e);return o.attrs={x:n,y:r,width:i,height:s,src:t},o.type="image",o},e._engine.text=function(t,n,r,i){var s=g("text");t.canvas&&t.canvas.appendChild(s);var a=new C(s,t);return a.attrs={x:n,y:r,"text-anchor":"middle",text:i,"font-family":e._availableAttrs["font-family"],"font-size":e._availableAttrs["font-size"],stroke:"none",fill:"#000"},a.type="text",S(a,a.attrs),a},e._engine.setSize=function(e,t){return this.width=e||this.width,this.height=t||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},e._engine.create=function(){var t=e._getContainer.apply(0,arguments),n=t&&t.container;if(!n)throw new Error("SVG container not found.");var r,i=t.x,s=t.y,a=t.width,o=t.height,l=g("svg"),c="overflow:hidden;";return i=i||0,s=s||0,g(l,{height:o=o||342,version:1.1,width:a=a||512,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),1==n?(l.style.cssText=c+"position:absolute;left:"+i+"px;top:"+s+"px",e._g.doc.body.appendChild(l),r=1):(l.style.cssText=c+"position:relative",n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l)),(n=new e._Paper).width=a,n.height=o,n.canvas=l,n.clear(),n._left=n._top=0,r&&(n.renderfix=function(){}),n.renderfix(),n},e._engine.setViewBox=function(e,t,n,r,i){d("raphael.setViewBox",this,this._viewBox,[e,t,n,r,i]);var s,o,l=this.getSize(),c=a(n/l.width,r/l.height),u=this.top,p=i?"xMidYMid meet":"xMinYMin";for(null==e?(this._vbSize&&(c=1),delete this._vbSize,s="0 0 "+this.width+h+this.height):(this._vbSize=c,s=e+h+t+h+n+h+r),g(this.canvas,{viewBox:s,preserveAspectRatio:p});c&&u;)o="stroke-width"in u.attrs?u.attrs["stroke-width"]:1,u.attr({"stroke-width":o}),u._.dirty=1,u._.dirtyT=1,u=u.prev;return this._viewBox=[e,t,n,r,!!i],this},e.prototype.renderfix=function(){var e,t=this.canvas,n=t.style;try{e=t.getScreenCTM()||t.createSVGMatrix()}catch(s){e=t.createSVGMatrix()}var r=-e.e%1,i=-e.f%1;(r||i)&&(r&&(this._left=(this._left+r)%1,n.left=this._left+"px"),i&&(this._top=(this._top+i)%1,n.top=this._top+"px"))},e.prototype.clear=function(){e.eve("raphael.clear",this);for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=g("desc")).appendChild(e._g.doc.createTextNode("Created with Raphaël "+e.version)),t.appendChild(this.desc),t.appendChild(this.defs=g("defs"))},e.prototype.remove=function(){for(var t in d("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?e._removedFactory(t):null};var M=e.st;for(var I in _)_[t](I)&&!M[t](I)&&(M[I]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e].apply(n,t)})}}(I))}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0)],void 0===(i=function(e){if(!e||e.vml){var t="hasOwnProperty",n=String,r=parseFloat,i=Math,s=i.round,a=i.max,o=i.min,l=i.abs,c=/[, ]+/,d=e.eve,u=" ",h="",p={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},f=/([clmz]),?([^clmz]*)/gi,m=/ progid:\S+Blur\([^\)]+\)/g,g=/-?[^,\s-]+/g,b="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",U=21600,y={path:1,rect:1,image:1},x={circle:1,ellipse:1},v=function(t,n,r){var i=e.matrix();return i.rotate(-t,.5,.5),{dx:i.x(n,r),dy:i.y(n,r)}},w=function(e,t,n,r,i,s){var a=e._,o=e.matrix,c=a.fillpos,d=e.node,h=d.style,p=1,f="",m=U/t,g=U/n;if(h.visibility="hidden",t&&n){if(d.coordsize=l(m)+u+l(g),h.rotation=s*(t*n<0?-1:1),s){var b=v(s,r,i);r=b.dx,i=b.dy}if(t<0&&(f+="x"),n<0&&(f+=" y")&&(p=-1),h.flip=f,d.coordorigin=r*-m+u+i*-g,c||a.fillsize){var y=d.getElementsByTagName("fill");y=y&&y[0],d.removeChild(y),c&&(b=v(s,o.x(c[0],c[1]),o.y(c[0],c[1])),y.position=b.dx*p+u+b.dy*p),a.fillsize&&(y.size=a.fillsize[0]*l(t)+u+a.fillsize[1]*l(n)),d.appendChild(y)}h.visibility="visible"}};e.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var S,E=function(e,t,r){for(var i=n(t).toLowerCase().split("-"),s=r?"end":"start",a=i.length,o="classic",l="medium",c="medium";a--;)switch(i[a]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":o=i[a];break;case"wide":case"narrow":c=i[a];break;case"long":case"short":l=i[a]}var d=e.node.getElementsByTagName("stroke")[0];d[s+"arrow"]=o,d[s+"arrowlength"]=l,d[s+"arrowwidth"]=c},k=function(i,l){i.attrs=i.attrs||{};var d=i.node,m=i.attrs,b=d.style,v=y[i.type]&&(l.x!=m.x||l.y!=m.y||l.width!=m.width||l.height!=m.height||l.cx!=m.cx||l.cy!=m.cy||l.rx!=m.rx||l.ry!=m.ry||l.r!=m.r),k=x[i.type]&&(m.cx!=l.cx||m.cy!=l.cy||m.r!=l.r||m.rx!=l.rx||m.ry!=l.ry),_=i;for(var M in l)l[t](M)&&(m[M]=l[M]);if(v&&(m.path=e._getPath[i.type](i),i._.dirty=1),l.href&&(d.href=l.href),l.title&&(d.title=l.title),l.target&&(d.target=l.target),l.cursor&&(b.cursor=l.cursor),"blur"in l&&i.blur(l.blur),(l.path&&"path"==i.type||v)&&(d.path=function(t){var r=/[ahqstv]/gi,i=e._pathToAbsolute;if(n(t).match(r)&&(i=e._path2curve),r=/[clmz]/g,i==e._pathToAbsolute&&!n(t).match(r)){var a=n(t).replace(f,function(e,t,n){var r=[],i="m"==t.toLowerCase(),a=p[t];return n.replace(g,function(e){i&&2==r.length&&(a+=r+p["m"==t?"l":"L"],r=[]),r.push(s(e*U))}),a+r});return a}var o,l,c=i(t);a=[];for(var d=0,m=c.length;d<m;d++){o=c[d],"z"==(l=c[d][0].toLowerCase())&&(l="x");for(var b=1,y=o.length;b<y;b++)l+=s(o[b]*U)+(b!=y-1?",":h);a.push(l)}return a.join(u)}(~n(m.path).toLowerCase().indexOf("r")?e._pathToAbsolute(m.path):m.path),i._.dirty=1,"image"==i.type&&(i._.fillpos=[m.x,m.y],i._.fillsize=[m.width,m.height],w(i,1,1,0,0,0))),"transform"in l&&i.transform(l.transform),k){var I=+m.cx,j=+m.cy,T=+m.rx||+m.r||0,R=+m.ry||+m.r||0;d.path=e.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",s((I-T)*U),s((j-R)*U),s((I+T)*U),s((j+R)*U),s(I*U)),i._.dirty=1}if("clip-rect"in l){var P=n(l["clip-rect"]).split(c);if(4==P.length){P[2]=+P[2]+ +P[0],P[3]=+P[3]+ +P[1];var A=d.clipRect||e._g.doc.createElement("div"),N=A.style;N.clip=e.format("rect({1}px {2}px {3}px {0}px)",P),d.clipRect||(N.position="absolute",N.top=0,N.left=0,N.width=i.paper.width+"px",N.height=i.paper.height+"px",d.parentNode.insertBefore(A,d),A.appendChild(d),d.clipRect=A)}l["clip-rect"]||d.clipRect&&(d.clipRect.style.clip="auto")}if(i.textpath){var D=i.textpath.style;l.font&&(D.font=l.font),l["font-family"]&&(D.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,h)+'"'),l["font-size"]&&(D.fontSize=l["font-size"]),l["font-weight"]&&(D.fontWeight=l["font-weight"]),l["font-style"]&&(D.fontStyle=l["font-style"])}if("arrow-start"in l&&E(_,l["arrow-start"]),"arrow-end"in l&&E(_,l["arrow-end"],1),null!=l.opacity||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var L=d.getElementsByTagName("fill");if(!(L=L&&L[0])&&(L=S("fill")),"image"==i.type&&l.src&&(L.src=l.src),l.fill&&(L.on=!0),null!=L.on&&"none"!=l.fill&&null!==l.fill||(L.on=!1),L.on&&l.fill){var O=n(l.fill).match(e._ISURL);if(O){L.parentNode==d&&d.removeChild(L),L.rotate=!0,L.src=O[1],L.type="tile";var F=i.getBBox(1);L.position=F.x+u+F.y,i._.fillpos=[F.x,F.y],e._preload(O[1],function(){i._.fillsize=[this.offsetWidth,this.offsetHeight]})}else L.color=e.getRGB(l.fill).hex,L.src=h,L.type="solid",e.getRGB(l.fill).error&&(_.type in{circle:1,ellipse:1}||"r"!=n(l.fill).charAt())&&C(_,l.fill,L)&&(m.fill="none",m.gradient=l.fill,L.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var z=((+m["fill-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+e.getRGB(l.fill).o+1||2)-1);z=o(a(z,0),1),L.opacity=z,L.src&&(L.color="none")}d.appendChild(L);var B=d.getElementsByTagName("stroke")&&d.getElementsByTagName("stroke")[0],H=!1;!B&&(H=B=S("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(B.on=!0),("none"==l.stroke||null===l.stroke||null==B.on||0==l.stroke||0==l["stroke-width"])&&(B.on=!1);var $=e.getRGB(l.stroke);B.on&&l.stroke&&(B.color=$.hex),z=((+m["stroke-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+$.o+1||2)-1);var W=.75*(r(l["stroke-width"])||1);if(z=o(a(z,0),1),null==l["stroke-width"]&&(W=m["stroke-width"]),l["stroke-width"]&&(B.weight=W),W&&W<1&&(z*=W)&&(B.weight=1),B.opacity=z,l["stroke-linejoin"]&&(B.joinstyle=l["stroke-linejoin"]||"miter"),B.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(B.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),"stroke-dasharray"in l){var X={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};B.dashstyle=X[t](l["stroke-dasharray"])?X[l["stroke-dasharray"]]:h}H&&d.appendChild(B)}if("text"==_.type){_.paper.canvas.style.display=h;var V=_.paper.span,G=m.font&&m.font.match(/\d+(?:\.\d*)?(?=px)/);b=V.style,m.font&&(b.font=m.font),m["font-family"]&&(b.fontFamily=m["font-family"]),m["font-weight"]&&(b.fontWeight=m["font-weight"]),m["font-style"]&&(b.fontStyle=m["font-style"]),G=r(m["font-size"]||G&&G[0])||10,b.fontSize=100*G+"px",_.textpath.string&&(V.innerHTML=n(_.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var Y=V.getBoundingClientRect();_.W=m.w=(Y.right-Y.left)/100,_.H=m.h=(Y.bottom-Y.top)/100,_.X=m.x,_.Y=m.y+_.H/2,("x"in l||"y"in l)&&(_.path.v=e.format("m{0},{1}l{2},{1}",s(m.x*U),s(m.y*U),s(m.x*U)+1));for(var q=["x","y","text","font","font-family","font-weight","font-style","font-size"],Z=0,K=q.length;Z<K;Z++)if(q[Z]in l){_._.dirty=1;break}switch(m["text-anchor"]){case"start":_.textpath.style["v-text-align"]="left",_.bbx=_.W/2;break;case"end":_.textpath.style["v-text-align"]="right",_.bbx=-_.W/2;break;default:_.textpath.style["v-text-align"]="center",_.bbx=0}_.textpath.style["v-text-kern"]=!0}},C=function(t,s,a){t.attrs=t.attrs||{},t.attrs;var o=Math.pow,l="linear",c=".5 .5";if(t.attrs.gradient=s,s=(s=n(s).replace(e._radial_gradient,function(e,t,n){return l="radial",t&&n&&(t=r(t),n=r(n),o(t-.5,2)+o(n-.5,2)>.25&&(n=i.sqrt(.25-o(t-.5,2))*(2*(n>.5)-1)+.5),c=t+u+n),h})).split(/\s*\-\s*/),"linear"==l){var d=s.shift();if(d=-r(d),isNaN(d))return null}var p=e._parseDots(s);if(!p)return null;if(t=t.shape||t.node,p.length){t.removeChild(a),a.on=!0,a.method="none",a.color=p[0].color,a.color2=p[p.length-1].color;for(var f=[],m=0,g=p.length;m<g;m++)p[m].offset&&f.push(p[m].offset+u+p[m].color);a.colors=f.length?f.join():"0% "+a.color,"radial"==l?(a.type="gradientTitle",a.focus="100%",a.focussize="0 0",a.focusposition=c,a.angle=0):(a.type="gradient",a.angle=(270-d)%360),t.appendChild(a)}return 1},_=function(t,n){this[0]=this.node=t,t.raphael=!0,this.id=e._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=n,this.matrix=e.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},M=e.el;_.prototype=M,M.constructor=_,M.transform=function(t){if(null==t)return this._.transform;var r,i=this.paper._viewBoxShift,s=i?"s"+[i.scale,i.scale]+"-1-1t"+[i.dx,i.dy]:h;i&&(r=t=n(t).replace(/\.{3}|\u2026/g,this._.transform||h)),e._extractTransform(this,s+t);var a,o=this.matrix.clone(),l=this.skew,c=this.node,d=~n(this.attrs.fill).indexOf("-"),p=!n(this.attrs.fill).indexOf("url(");if(o.translate(1,1),p||d||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",a=o.split(),d&&a.noRotation||!a.isSimple){c.style.filter=o.toFilter();var f=this.getBBox(),m=this.getBBox(1),g=f.x-m.x,b=f.y-m.y;c.coordorigin=g*-U+u+b*-U,w(this,1,1,g,b,0)}else c.style.filter=h,w(this,a.scalex,a.scaley,a.dx,a.dy,a.rotate);else c.style.filter=h,l.matrix=n(o),l.offset=o.offset();return null!==r&&(this._.transform=r,e._extractTransform(this,r)),this},M.rotate=function(e,t,i){if(this.removed)return this;if(null!=e){if((e=n(e).split(c)).length-1&&(t=r(e[1]),i=r(e[2])),e=r(e[0]),null==i&&(t=i),null==t||null==i){var s=this.getBBox(1);t=s.x+s.width/2,i=s.y+s.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",e,t,i]])),this}},M.translate=function(e,t){return this.removed||((e=n(e).split(c)).length-1&&(t=r(e[1])),e=r(e[0])||0,t=+t||0,this._.bbox&&(this._.bbox.x+=e,this._.bbox.y+=t),this.transform(this._.transform.concat([["t",e,t]]))),this},M.scale=function(e,t,i,s){if(this.removed)return this;if((e=n(e).split(c)).length-1&&(t=r(e[1]),i=r(e[2]),s=r(e[3]),isNaN(i)&&(i=null),isNaN(s)&&(s=null)),e=r(e[0]),null==t&&(t=e),null==s&&(i=s),null==i||null==s)var a=this.getBBox(1);return i=null==i?a.x+a.width/2:i,s=null==s?a.y+a.height/2:s,this.transform(this._.transform.concat([["s",e,t,i,s]])),this._.dirtyT=1,this},M.hide=function(){return!this.removed&&(this.node.style.display="none"),this},M.show=function(){return!this.removed&&(this.node.style.display=h),this},M.auxGetBBox=e.el.getBBox,M.getBBox=function(){var e=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var t={},n=1/this.paper._viewBoxShift.scale;return t.x=e.x-this.paper._viewBoxShift.dx,t.x*=n,t.y=e.y-this.paper._viewBoxShift.dy,t.y*=n,t.width=e.width*n,t.height=e.height*n,t.x2=t.x+t.width,t.y2=t.y+t.height,t}return e},M._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},M.remove=function(){if(!this.removed&&this.node.parentNode){for(var t in this.paper.__set__&&this.paper.__set__.exclude(this),e.eve.unbind("raphael.*.*."+this.id),e._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[t]="function"==typeof this[t]?e._removedFactory(t):null;this.removed=!0}},M.attr=function(n,r){if(this.removed)return this;if(null==n){var i={};for(var s in this.attrs)this.attrs[t](s)&&(i[s]=this.attrs[s]);return i.gradient&&"none"==i.fill&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(null==r&&e.is(n,"string")){if("fill"==n&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var a=n.split(c),o={},l=0,u=a.length;l<u;l++)(n=a[l])in this.attrs?o[n]=this.attrs[n]:e.is(this.paper.customAttributes[n],"function")?o[n]=this.paper.customAttributes[n].def:o[n]=e._availableAttrs[n];return u-1?o:o[a[0]]}if(this.attrs&&null==r&&e.is(n,"array")){for(o={},l=0,u=n.length;l<u;l++)o[n[l]]=this.attr(n[l]);return o}var h;for(var p in null!=r&&((h={})[n]=r),null==r&&e.is(n,"object")&&(h=n),h)d("raphael.attr."+p+"."+this.id,this,h[p]);if(h){for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&h[t](p)&&e.is(this.paper.customAttributes[p],"function")){var f=this.paper.customAttributes[p].apply(this,[].concat(h[p]));for(var m in this.attrs[p]=h[p],f)f[t](m)&&(h[m]=f[m])}h.text&&"text"==this.type&&(this.textpath.string=h.text),k(this,h)}return this},M.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&e._tofront(this,this.paper),this},M.toBack=function(){return this.removed||this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),e._toback(this,this.paper)),this},M.insertAfter=function(t){return this.removed||(t.constructor==e.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),e._insertafter(this,t,this.paper)),this},M.insertBefore=function(t){return this.removed||(t.constructor==e.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),e._insertbefore(this,t,this.paper)),this},M.blur=function(t){var n=this.node.runtimeStyle,r=n.filter;return r=r.replace(m,h),0!=+t?(this.attrs.blur=t,n.filter=r+u+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+t||1.5)+")",n.margin=e.format("-{0}px 0 0 -{0}px",s(+t||1.5))):(n.filter=r,n.margin=0,delete this.attrs.blur),this},e._engine.path=function(e,t){var n=S("shape");n.style.cssText=b,n.coordsize=U+u+U,n.coordorigin=t.coordorigin;var r=new _(n,t),i={fill:"none",stroke:"#000"};e&&(i.path=e),r.type="path",r.path=[],r.Path=h,k(r,i),t.canvas&&t.canvas.appendChild(n);var s=S("skew");return s.on=!0,n.appendChild(s),r.skew=s,r.transform(h),r},e._engine.rect=function(t,n,r,i,s,a){var o=e._rectPath(n,r,i,s,a),l=t.path(o),c=l.attrs;return l.X=c.x=n,l.Y=c.y=r,l.W=c.width=i,l.H=c.height=s,c.r=a,c.path=o,l.type="rect",l},e._engine.ellipse=function(e,t,n,r,i){var s=e.path();return s.attrs,s.X=t-r,s.Y=n-i,s.W=2*r,s.H=2*i,s.type="ellipse",k(s,{cx:t,cy:n,rx:r,ry:i}),s},e._engine.circle=function(e,t,n,r){var i=e.path();return i.attrs,i.X=t-r,i.Y=n-r,i.W=i.H=2*r,i.type="circle",k(i,{cx:t,cy:n,r:r}),i},e._engine.image=function(t,n,r,i,s,a){var o=e._rectPath(r,i,s,a),l=t.path(o).attr({stroke:"none"}),c=l.attrs,d=l.node,u=d.getElementsByTagName("fill")[0];return c.src=n,l.X=c.x=r,l.Y=c.y=i,l.W=c.width=s,l.H=c.height=a,c.path=o,l.type="image",u.parentNode==d&&d.removeChild(u),u.rotate=!0,u.src=n,u.type="tile",l._.fillpos=[r,i],l._.fillsize=[s,a],d.appendChild(u),w(l,1,1,0,0,0),l},e._engine.text=function(t,r,i,a){var o=S("shape"),l=S("path"),c=S("textpath");r=r||0,i=i||0,a=a||"",l.v=e.format("m{0},{1}l{2},{1}",s(r*U),s(i*U),s(r*U)+1),l.textpathok=!0,c.string=n(a),c.on=!0,o.style.cssText=b,o.coordsize=U+u+U,o.coordorigin="0 0";var d=new _(o,t),p={fill:"#000",stroke:"none",font:e._availableAttrs.font,text:a};d.shape=o,d.path=l,d.textpath=c,d.type="text",d.attrs.text=n(a),d.attrs.x=r,d.attrs.y=i,d.attrs.w=1,d.attrs.h=1,k(d,p),o.appendChild(c),o.appendChild(l),t.canvas.appendChild(o);var f=S("skew");return f.on=!0,o.appendChild(f),d.skew=f,d.transform(h),d},e._engine.setSize=function(t,n){var r=this.canvas.style;return this.width=t,this.height=n,t==+t&&(t+="px"),n==+n&&(n+="px"),r.width=t,r.height=n,r.clip="rect(0 "+t+" "+n+" 0)",this._viewBox&&e._engine.setViewBox.apply(this,this._viewBox),this},e._engine.setViewBox=function(t,n,r,i,s){e.eve("raphael.setViewBox",this,this._viewBox,[t,n,r,i,s]);var a,o,l=this.getSize(),c=l.width,d=l.height;return s&&(r*(a=d/i)<c&&(t-=(c-r*a)/2/a),i*(o=c/r)<d&&(n-=(d-i*o)/2/o)),this._viewBox=[t,n,r,i,!!s],this._viewBoxShift={dx:-t,dy:-n,scale:l},this.forEach(function(e){e.transform("...")}),this},e._engine.initWin=function(e){var t=e.document;t.styleSheets.length<31?t.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):t.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!t.namespaces.rvml&&t.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),S=function(e){return t.createElement("<rvml:"+e+' class="rvml">')}}catch(n){S=function(e){return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},e._engine.initWin(e._g.win),e._engine.create=function(){var t=e._getContainer.apply(0,arguments),n=t.container,r=t.height,i=t.width,s=t.x,a=t.y;if(!n)throw new Error("VML container not found.");var o=new e._Paper,l=o.canvas=e._g.doc.createElement("div"),c=l.style;return s=s||0,a=a||0,i=i||512,r=r||342,o.width=i,o.height=r,i==+i&&(i+="px"),r==+r&&(r+="px"),o.coordsize=216e5+u+216e5,o.coordorigin="0 0",o.span=e._g.doc.createElement("span"),o.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(o.span),c.cssText=e.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",i,r),1==n?(e._g.doc.body.appendChild(l),c.left=s+"px",c.top=a+"px",c.position="absolute"):n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l),o.renderfix=function(){},o},e.prototype.clear=function(){e.eve("raphael.clear",this),this.canvas.innerHTML=h,this.span=e._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},e.prototype.remove=function(){for(var t in e.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?e._removedFactory(t):null;return!0};var I=e.st;for(var j in M)M[t](j)&&!I[t](j)&&(I[j]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e].apply(n,t)})}}(j))}}.apply(t,r))||(e.exports=i)}])),lf.exports);const df=yt(cf),uf={BLUE:U.blue,GREEN:U.green,GRAY:"gray",BLACK:"black",LIGHT_BLUE:"#9AB8ED",BLUE_C:"#63D9EA",GRAY_C:"#E3E5E6",GRAY_F:"#888D93",GRAY_G:"#626569",KA_GREEN:"#71B307",_BACKGROUND:"#FDFDFD",INTERACTING:U.green,INTERACTIVE:U.green,DYNAMIC:U.blue};class hf{raphael;xScale;yScale;bounds;constructor(e,t,n){this.raphael=e,this.bounds=n,this.xScale=t[0],this.yScale=t[1],this.setScale(t)}scaleVector=e=>{if("number"==typeof e)return this.scaleVector([e,e]);const t=e[0],n=e[1];return[t*this.xScale,n*this.yScale]};scalePoint=e=>{if("number"==typeof e)return this.scalePoint([e,e]);const t=e[0],n=e[1];return[(t-this.bounds.xMin)*this.xScale,(this.bounds.yMax-n)*this.yScale]};unscalePoint=e=>{if("number"==typeof e)return this.unscalePoint([e,e]);const t=e[0],n=e[1];return[t/this.xScale+this.bounds.xMin,this.bounds.yMax-n/this.yScale]};unscaleVector=e=>"number"==typeof e?this.unscaleVector([e,e]):[e[0]/this.xScale,e[1]/this.yScale];setScale=e=>{"number"==typeof e&&(e=[e,e]),this.xScale=e[0],this.yScale=e[1],this.raphael.setSize(...this.canvasDimensions())};canvasDimensions=()=>[this.bounds.width()*this.xScale,this.bounds.height()*this.yScale];pixelsPerUnitX=()=>this.xScale;pixelsPerUnitY=()=>this.yScale}class pf{xMin;xMax;yMin;yMax;constructor(e,t){this.xMin=e[0],this.xMax=e[1],this.yMin=t[0],this.yMax=t[1]}width(){return this.xMax-this.xMin}height(){return this.yMax-this.yMin}}const ff=new WeakMap;function mf(t,n){const r=e.jsx(y,{throwIfNested:!1,children:t});let i=ff.get(n);null==i&&(i=Dt.createRoot(n),ff.set(n,i)),i.render(r)}const gf={processMath:async function(e,t,n,r){const i=p(e);if(null==i.attr("data-math-formula")||n){const e=function(e,t){const n=p(e).find("."+t);return 0===n.length?p("<span>").addClass(t).appendTo(p(e)):n}(i,"tex-holder");null==t&&i.attr("data-math-formula")&&(t=i.attr("data-math-formula")),t=null!=t?t+"":"",t=Lp.cleanMath(t),i.attr("data-math-formula",t);const{TeX:n}=await Hu();mf(vt.createElement(n,{children:t,onRender:r}),e[0])}}},{processMath:bf}=gf;function Uf(e,t){return"number"==typeof e&&(e=[e,e]),t=t*Math.PI/180,[e[0]*Math.cos(t),e[1]*Math.sin(t)]}let yf=class{el;#e;#t;raphael;mouselayer;_mouselayerWrapper;_visiblelayerWrapper;isMobile=!1;currentStyle={"stroke-width":2,fill:"none"};range;scale;dimensions;xpixels;ypixels;isDragging;constructor(e){this.el=e,p(e).css("position","relative"),this.raphael=df(e),p(e).attr("aria-hidden","true"),p(e).children("div").css("position","absolute")}init(e){let t=e.scale||[40,40];if(t="number"==typeof t?[t,t]:t,null==e.range)throw new u("range should be specified in graph init",h.Internal);this.#e=new pf(...e.range),this.#t=new hf(this.raphael,t,this.bounds());const[n,r]=this.drawingTransform().canvasDimensions();return p(this.el).css({width:n,height:r}),this.range=e.range,this.scale=t,this.dimensions=[n,r],this.xpixels=n,this.ypixels=r,this.isMobile=e.isMobile??!1,this}graphInit(e){e=e||{};for(const[C,_]of x(e))C.match(/.*Opacity$/)||"range"===C||"number"!=typeof _||(e[C]=[_,_]),"range"!==C&&"gridRange"!==C||(e[C]=vf(e[C]));const t=vf(e.range||[[-10,10],[-10,10]]),n=vf(e.gridRange||t),r=e.scale||[20,20],i=null==e.grid||e.grid,s=e.gridOpacity||.1,a=function(e){if(Array.isArray(e))return e;return[e,e]}(e.gridStep||[1,1]),o=null==e.axes||e.axes,l=e.axisArrows||"",c=e.axisOpacity||1,d=e.axisCenter||[Math.min(Math.max(t[0][0],0),t[0][1]),Math.min(Math.max(t[1][0],0),t[1][1])],u=null!=e.axisLabels&&e.axisLabels,h=null==e.ticks||e.ticks,p=e.tickStep||[2,2],f=e.tickLen||[5,5],m=e.tickOpacity||1,g=e.labels||e.labelStep||!1,b=e.labelStep||[1,1],U=e.labelOpacity||1;let y=e.unityLabels||!1;const v=e.labelFormat||function(e){return e};let w=e.xLabelFormat||v,S=e.yLabelFormat||v;const E=[[t[0][0]-(t[0][0]>0?1:0),t[0][1]+(t[0][1]<0?1:0)],[t[1][0]-(t[1][0]>0?1:0),t[1][1]+(t[1][1]<0?1:0)]];Array.isArray(y)||(y=[y,y]);const k=function(e){return function(t){return(e(t)+"").replace(/-(\d)/g,"\\llap{-}$1")}};if(w=k(w),S=k(S),this.init({range:E,scale:r,isMobile:e.isMobile}),i&&this.grid(n[0],n[1],{stroke:e.isMobile?uf.GRAY_C:"#000000",opacity:e.isMobile?1:s,step:a,strokeWidth:e.isMobile?1:2}),o){if("<->"===l||!0===l){const r=this;this.style({stroke:e.isMobile?uf.GRAY_G:"#000000",opacity:e.isMobile?1:c,strokeWidth:e.isMobile?1:2,arrows:"->"},function(){t[1][0]<0&&t[1][1]>0&&(r.path([d,[n[0][0],d[1]]]),r.path([d,[n[0][1],d[1]]])),t[0][0]<0&&t[0][1]>0&&(r.path([d,[d[0],n[1][0]]]),r.path([d,[d[0],n[1][1]]]))})}else if("->"===l||""===l){const e=this;this.style({stroke:"#000000",opacity:c,strokeWidth:2,arrows:l},function(){e.path([[n[0][0],d[1]],[n[0][1],d[1]]]),e.path([[d[0],n[1][0]],[d[0],n[1][1]]])})}u&&2===u.length&&(this.label([n[0][1],d[1]],u[0],"right"),this.label([d[0],n[1][1]],u[1],"above"))}if(h){const i=e.isMobile,s=this;this.style({stroke:e.isMobile?uf.GRAY_G:"#000000",opacity:e.isMobile?1:m,strokeWidth:1},()=>{let e=a[0]*p[0],o=f[0]/r[1],c=n[0][0],u=n[0][1];if(t[1][0]<0&&t[1][1]>0){for(let t=e+d[0];t<=u;t+=e)(t<u||!l)&&s.line([t,-o+d[1]],[t,i?0:o+d[1]]);for(let t=-e+d[0];t>=c;t-=e)(t>c||!l)&&s.line([t,-o+d[1]],[t,i?0:o+d[1]])}if(e=a[1]*p[1],o=f[1]/r[0],c=n[1][0],u=n[1][1],t[0][0]<0&&t[0][1]>0){for(let t=e+d[1];t<=u;t+=e)(t<u||!l)&&this.line([-o+d[0],t],[i?0:o+d[0],t]);for(let t=-e+d[1];t>=c;t-=e)(t>c||!l)&&this.line([-o+d[0],t],[i?0:o+d[0],t])}})}if(g){const t=this;this.style({stroke:e.isMobile?uf.GRAY_G:"#000000",opacity:e.isMobile?1:U},function(){let e=a[0]*p[0]*b[0],r=n[0][0],i=n[0][1];const s=d[0]<0?"above":"below",o=d[0]<0?"right":"left",c=0===d[0]&&0!==d[1],u=0!==d[0]&&0===d[1],h=0!==d[0]||0!==d[1],f=y[0]||h,m=y[1]||h;for(let n=(c?0:e)+d[0];n<=i;n+=e)(n<i||!l)&&t.label([n,d[1]],w(n),s);for(let n=-e*(f?1:2)+d[0];n>=r;n-=e)(n>r||!l)&&t.label([n,d[1]],w(n),s);e=a[1]*p[1]*b[1],r=n[1][0],i=n[1][1];for(let n=(u?0:e)+d[1];n<=i;n+=e)(n<i||!l)&&t.label([d[0],n],S(n),o);for(let n=-e*(m?1:2)+d[1];n>=r;n-=e)(n>r||!l)&&t.label([d[0],n],S(n),o)})}}drawingTransform(){if(null==this.#t)throw new Error("Can't get drawingTransform of an uninitialized Graphie");return this.#t}bounds(){if(null==this.#e)throw new Error("Can't get bounds of an uninitialized Graphie");return this.#e}style(e,t){const n=this.processAttributes(e);if("function"==typeof t){const e=this.currentStyle;this.currentStyle={...this.currentStyle,...n};const r=t.call(this);return this.currentStyle=e,r}Object.assign(this.currentStyle,n)}grid(e,t,n){return this.withStyle(n,()=>{const n=this.currentStyle.step||[1,1],r=this.raphael.set();let i=n[0]*Math.ceil(e[0]/n[0]);for(;i<=e[1];i+=n[0])r.push(this.line([i,t[0]],[i,t[1]]));let s=n[1]*Math.ceil(t[0]/n[1]);for(;s<=t[1];s+=n[1])r.push(this.line([e[0],s],[e[1],s]));return r})}arc(e,t,n,r,i,s){return this.withStyle(s,()=>{n=(n%360+360)%360,r=(r%360+360)%360;const s=this.scalePoint(e),a=this.scaleVector(t),o=Uf(t,n),l=Uf(t,r),c=e=>Vh.round(e,6),d=this.scalePoint([c(e[0]+o[0]),c(e[1]+o[1])]),u=this.scalePoint([c(e[0]+l[0]),c(e[1]+l[1])]),h=((r-n)%360+360)%360>180;return this.raphael.path("M"+d.join(" ")+"A"+a.join(" ")+" 0 "+(h?1:0)+" 0 "+u.join(" ")+(i?"L"+s.join(" ")+"z":""))})}circle(e,t,n){return this.withStyle(n,()=>this.raphael.ellipse(...this.scalePoint(e),...this.scaleVector([t,t])))}rect(e,t,n,r,i){return this.withStyle(i,()=>{const i=this.scalePoint([e,t+r]),s=this.scaleVector([n,r]),a=this.raphael.rect(...i.concat(s));return this.isMobile&&(a.node.style.shapeRendering="crispEdges"),a})}ellipse(e,t,n){return this.withStyle(n,()=>this.raphael.ellipse(...this.scalePoint(e).concat(this.scaleVector(t))))}fixedEllipse(e,t,n,r,i){return this.withStyle(i,()=>{const i=this.scalePoint(e),s=this.scaleVector(t),a=2*s[0]*n+r,o=2*s[1]*n+r,l=i[0]-a/2,c=i[1]-o/2,d=document.createElement("div");p(d).css({position:"absolute",width:a+"px",height:o+"px",left:l+"px",top:c+"px"});return{wrapper:d,visibleShape:df(d,a,o).ellipse(a/2,o/2,s[0],s[1])}})}unstyledPath(e){const t=this.raphael.path(this.svgPath(e));return t.graphiePath=e,t}path(e,t){return this.withStyle(t,()=>this.unstyledPath(e))}fixedPath(e,t,n){e=e.map(this.scalePoint),t=t?this.scalePoint(t):null,n=n||this.svgPath;const r=e.map(e=>e[0]),i=e.map(e=>e[1]),s=Math.min(...r),a=Math.max(...r),o=Math.min(...i),l=Math.max(...i),c=[4,4],d=[s,o];e=e.map(function(e){return yp.add(yp.subtract(e,d),yp.scale(c,.5))});const u=a-s+c[0],h=l-o+c[1],f=d[0]-c[0]/2,m=d[1]-c[1]/2,g=document.createElement("div");p(g).css({position:"absolute",width:u+"px",height:h+"px",left:f+"px",top:m+"px",transformOrigin:t?u/2+t[0]+"px "+(h/2+t[1])+"px":null});return{wrapper:g,visibleShape:df(g,u,h).path(n(e))}}scaledPath(e,t){return this.withStyle(t,()=>{const t=this.raphael.path(this.svgPath(e,!0));return t.graphiePath=e,t})}line(e,t,n){return this.withStyle(n,()=>{const n=this.unstyledPath([e,t]);return this.isMobile&&(n.node.style.shapeRendering="crispEdges"),n})}parabola(e,t,n,r){return this.withStyle(r,()=>this.raphael.path(this.svgParabolaPath(e,t,n)))}fixedLine(e,t,n){const r=[n,n];e=this.scalePoint(e),t=this.scalePoint(t);const i=[Math.min(e[0],t[0]),Math.min(e[1],t[1])];e=yp.add(yp.subtract(e,i),yp.scale(r,.5)),t=yp.add(yp.subtract(t,i),yp.scale(r,.5));const s=i[0]-r[0]/2,a=i[1]-r[1]/2,o=Math.abs(e[0]-t[0])+r[0],l=Math.abs(e[1]-t[1])+r[1],c=document.createElement("div");p(c).css({position:"absolute",width:o+"px",height:l+"px",left:s+"px",top:a+"px",transformOrigin:e[0]+"px "+e[1]+"px"});const d=df(c,o,l),u="M"+e[0]+" "+e[1]+" L"+t[0]+" "+t[1],h=d.path(u);return h.graphiePath=[e,t],{wrapper:c,visibleShape:h}}sinusoid(e,t,n,r,i){return this.withStyle(i,()=>this.raphael.path(this.svgSinusoidPath(e,t,n,r)))}label=(e,t,n,r,i)=>{const s="object"==typeof r?r:i,a="boolean"!=typeof r||r;return this.withStyle(s,()=>{const r=p("<span>").addClass("graphie-label"),i=this.currentStyle["label-distance"];r.css({position:"absolute",padding:(null!=i?i:7)+"px",color:"black"}).data("labelDirection",n).appendTo(this.el),r.setPosition=e=>{const t=this.scalePoint(e);r.css({left:t[0],top:t[1]})},r.setPosition(e);const s=r[0];return r.processMath=function(e,t){bf(s,e,t,function(){const e=s.scrollWidth,t=s.scrollHeight;Sf(s,[e,t])})},r.processText=function(e){r.html(e);const t=s.scrollWidth,n=s.scrollHeight;Sf(s,[t,n])},a?r.processMath(t,!1):r.processText(t),r})};plotParametric(e,t,n){return this.withStyle(n,()=>{const n=t=>{return n=e(t),Math.abs(n[1])>5e5?[n[0],Math.min(Math.max(n[1],-5e5),5e5)]:n;var n},r=t[0],i=t[1];let s=(i-r)/(this.currentStyle["plot-points"]||800);0===s&&(s=1);const a=this.raphael.set();let o=[],l=n(r)[1];for(let e=r;e<=i;e+=s){const t=n(e),r=t[1];r>0!=l>0&&Math.abs(r-l)>2*this.drawingTransform().pixelsPerUnitY()||isNaN(r)?(a.push(this.unstyledPath(o)),o=[]):o.push(t),l=r}return a.push(this.unstyledPath(o)),a})}plot(e,t,n){return this.withStyle(n,()=>{const n=t[0],r=t[1];this.currentStyle["plot-points"]||(this.currentStyle["plot-points"]=2*(r-n)*this.drawingTransform().pixelsPerUnitX());return this.plotParametric(t=>[t,e(t)],t)})}svgPath=(e,t)=>e.map((e,n)=>{if(!0===e)return"z";const r=t?e:this.scalePoint(e);return(0===n?"M":"L")+Lp.bound(r[0])+" "+Lp.bound(r[1])}).join("");svgParabolaPath=(e,t,n)=>{const r=function(r){return(e*r+t)*r+n};if(0===e){const e=[[this.bounds().xMin,r(this.bounds().xMin)],[this.bounds().xMax,r(this.bounds().xMax)]];return this.svgPath(e)}const i=-t/(2*e),s=i+Math.max(Math.abs(i-this.bounds().xMin),Math.abs(i-this.bounds().xMax)),a=[i,r(i)],o=[s,r(s)],l=[a[0],a[1]-(o[1]-a[1])],c=Math.abs(a[0]-o[0]),d=[[a[0]-c,o[1]],l,[a[0]+c,o[1]]].map(this.scalePoint).flat().map(Lp.bound);return"M"+d[0]+","+d[1]+" Q"+d[2]+","+d[3]+" "+d[4]+","+d[5]};svgSinusoidPath=(e,t,n,r)=>{const i=Math.abs(Math.PI/(2*t)),s=function(i){return e*Math.sin(t*i-n)+r},a=function(r){return e*t*Math.cos(n-t*r)},o=(e,t)=>{const n=e+i*t,r=n+i,o=[n,2*n/3+1*r/3,1*n/3+2*r/3,r],l=[s(n),s(n)+a(n)*(r-n)/3,s(r)-a(r)*(r-n)/3,s(r)];return yp.zip(o,l).map(this.scalePoint)},l=this.bounds().width(),c=Math.ceil(l/i)+1;let d=n/t;const u=d-this.bounds().xMin;d-=i*Math.ceil(u/i);let h=o(d,0),p="M"+h[0][0]+","+h[0][1]+" C"+h[1][0]+","+h[1][1]+" "+h[2][0]+","+h[2][1]+" "+h[3][0]+","+h[3][1];for(let f=1;f<c;f++)h=o(d,f),p+=" C"+h[1][0]+","+h[1][1]+" "+h[2][0]+","+h[2][1]+" "+h[3][0]+","+h[3][1];return p};withStyle(e,t){const n=this.currentStyle;this.currentStyle={...this.currentStyle,...this.processAttributes(e)};const r=this.postprocessDrawingResult(t());return this.currentStyle=n,r}postprocessDrawingResult(e){const t=e.constructor.prototype;return t===df.el||t===df.st?(e.attr(this.currentStyle),this.currentStyle.arrows&&(e=this.addArrowheads(e))):e instanceof p&&e.css({...this.currentStyle,...wf}),e}addArrowheads(e){const t=e.constructor.prototype;if(t===df.el){if("path"===e.type&&void 0===e.arrowheadsDrawn){const t=.6+.4*e.attr("stroke-width"),n=e.getTotalLength(),r=this.raphael.set(),i=this.raphael.path(this.isMobile?"M-4,4 C-4,4 -0.25,0 -0.25,0 C-0.25,0 -4,-4 -4,-4":"M-3 4 C-2.75 2.5 0 0.25 0.75 0C0 -0.25 -2.75 -2.5 -3 -4"),s=e.getPointAtLength(n-.4),a=e.getPointAtLength(n-.75*t),o=180*Math.atan2(s.y-a.y,s.x-a.x)/Math.PI,l=e.attr();delete l.path;let c=e.getSubpath(0,n-.75*t);return c=this.raphael.path(c).attr(l),c.arrowheadsDrawn=!0,e.remove(),i.rotate(o,this.isMobile?1e-5:.75,0).scale(t,t,.75,0).translate(a.x,a.y).attr(l).attr({"stroke-linejoin":"round","stroke-linecap":"round"}),i.arrowheadsDrawn=!0,r.push(c),r.push(i),r}}else if(t===df.st)for(let n=0,r=e.items.length;n<r;n++)this.addArrowheads(e.items[n]);return e}scalePoint=e=>this.drawingTransform().scalePoint(e);scaleVector=e=>this.drawingTransform().scaleVector(e);unscalePoint=e=>this.drawingTransform().unscalePoint(e);unscaleVector=e=>this.drawingTransform().unscaleVector(e);processAttributes(e){const t={scale:e=>{this.drawingTransform().setScale(e)},clipRect:e=>{const t=e[0],n=e[1];return t[1]+=n[1],{"clip-rect":this.scalePoint(t).concat(this.scaleVector(n)).join(" ")}},strokeWidth:function(e){return{"stroke-width":parseFloat(e)}},rx:e=>({rx:this.scaleVector([e,0])[0]}),ry:e=>({ry:this.scaleVector([0,e])[1]}),r:e=>{const t=this.scaleVector([e,e]);return{rx:t[0],ry:t[1]}}},n={};return Object.entries(e||{}).forEach(function([e,r]){const i=t[e];if("function"==typeof i)Object.assign(n,i(r));else{const t=String(e).replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase();n[t]=r}}),n}addMouseLayer(e){const t={allowScratchpad:!1,setDrawingAreaAvailable:function(){},...e};if(this.mouselayer=df(this.el,this.xpixels,this.ypixels),p(this.mouselayer.canvas).css("z-index",2),t.onClick||t.onMouseDown||t.onMouseMove||t.onMouseOver||t.onMouseOut){const e=this.mouselayer.rect(0,0,this.xpixels,this.ypixels).attr({fill:"#000",opacity:0});let n=!1;if(p(this.mouselayer.canvas).on("vmousedown",r=>{if(r.target===e[0]){if(t.onMouseDown&&t.onMouseDown(this.getMouseCoord(r)),n=!0,t.onMouseMove){const e=t.onMouseMove;p(document).bind("vmousemove.mouseLayer",t=>{n&&(t.preventDefault(),e(this.getMouseCoord(t)))})}p(document).bind("vmouseup.mouseLayer",e=>{p(document).unbind(".mouseLayer"),n&&t.onClick&&t.onClick(this.getMouseCoord(e)),n=!1})}}),t.onMouseOver){const e=t.onMouseOver;p(this.mouselayer.canvas).on("vmouseover",t=>{e(this.getMouseCoord(t))})}if(t.onMouseOut){const e=t.onMouseOut;p(this.mouselayer.canvas).on("vmouseout",t=>{e(this.getMouseCoord(t))})}}t.allowScratchpad||t.setDrawingAreaAvailable?.(!1),this._mouselayerWrapper=document.createElement("div"),p(this._mouselayerWrapper).css({position:"absolute",left:0,top:0,zIndex:2}),this._visiblelayerWrapper=document.createElement("div"),p(this._visiblelayerWrapper).css({position:"absolute",left:0,top:0});const n=this.el;n.appendChild(this._visiblelayerWrapper),n.appendChild(this._mouselayerWrapper),this.addToMouseLayerWrapper=e=>{this._mouselayerWrapper?.appendChild(e)},this.addToVisibleLayerWrapper=e=>{this._visiblelayerWrapper?.appendChild(e)}}addToMouseLayerWrapper(e){throw new Error("addToMouseLayerWrapper is not ready. Call addMouseLayer() first.")}addToVisibleLayerWrapper(e){throw new Error("addToVisibleLayerWrapper is not ready. Call addMouseLayer() first.")}getMousePx(e){const t=p(this.el).offset();return[e.pageX-t.left,e.pageY-t.top]}getMouseCoord(e){return this.unscalePoint(this.getMousePx(e))}};const xf={center:[-.5,-.5],above:[-.5,-1],"above right":[0,-1],right:[0,-.5],"below right":[0,0],below:[-.5,0],"below left":[-1,0],left:[-1,-.5],"above left":[-1,-1]};function vf(e){function t(e){return"number"==typeof e?[-e,e]:e}if(null==e)return e;const[n,r]=(i=e,Array.isArray(i)?i:[i,i]);var i;return[t(n),t(r)]}const wf={"stroke-width":null},Sf=function(e,t){const n=p(e),r=n.data("labelDirection");let[i,s]=t;if(0===i&&0===s&&([i,s]=[1,1],rh("Label size was 0x0 in graphie.js; using 1x1 instead")),n.css("visibility",""),"number"==typeof r){const e=Math.cos(r),t=Math.sin(r),a=Math.min(i/2/Math.abs(e),s/2/Math.abs(t));n.css({marginLeft:-i/2+e*a,marginTop:-s/2-t*a})}else{const t=e.scrollHeight===s,a=n.closest(".svg-image"),o=n.closest(".graphie"),l=a.length>0?a:o;l.css("line-height","normal"),t&&e.scrollHeight!==s&&(s=e.scrollHeight);const c=l.css(["max-width","width"])??{"max-width":"0px"},d="none"!==c["max-width"]?c["max-width"]:c.width;let u=(l.width()??0)/parseInt(d.replace(/px$/,""))*100;(isNaN(u)||0===u)&&(u=100);const h=n.css("padding")??"0px",p="none"!==h?h:"0px",f=Math.round(parseInt(p.replace(/px$/,""))*u)/100,m=xf[r||"center"],g={marginLeft:Math.round(i*m[0]*u)/100,marginTop:Math.round(s*m[1]*u)/100,padding:`${f}px`};1!==u&&(g.fontSize=Math.round(100*u)/100+"%"),n.css(g)}},Ef={Graphie:yf,createGraphie:function(e){return new yf(e)},unscaledSvgPath:function(e){return!0===e[0]?"":e.map(function(e,t){return!0===e?"z":(0===t?"M":"L")+e[0]+" "+e[1]}).join("")},getDistance:function(e,t){return Np.distanceToPoint(e,t)},findAngleDeprecated:function(e,t,n){if(void 0===n){const n=e[0]-t[0],r=e[1]-t[1];return n||r?(180+180*Math.atan2(-r,-n)/Math.PI+360)%360:0}return Ef.findAngleDeprecated(e,n)-Ef.findAngleDeprecated(t,n)},graphs:{}};!function(e,t,n){if(void 0!==e){var r="virtualMouseBindings",i="virtualTouchID",s="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),a="clientX clientY pageX pageY screenX screenY".split(" "),o=e.event.mouseHooks?e.event.mouseHooks.props:[],l=(e.event.props||[]).concat(o),c={},d=0,u=0,h=0,p=!1,f=[],m=!1,g=!1,b="addEventListener"in n,U=e(n),y=1,x=0;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var v=0;v<s.length;v++)e.event.special[s[v]]=D(s[v]);b&&n.addEventListener("click",function(t){var n,r,s,a,o,l=f.length,c=t.target;if(l)for(n=t.clientX,r=t.clientY,threshold=e.vmouse.clickDistanceThreshold,s=c;s;){for(a=0;a<l;a++)if(o=f[a],s===c&&Math.abs(o.x-n)<threshold&&Math.abs(o.y-r)<threshold||e.data(s,i)===o.touchID)return t.preventDefault(),void t.stopPropagation();s=s.parentNode}},!0)}function w(e){for(;e&&void 0!==e.originalEvent;)e=e.originalEvent;return e}function S(t){for(var n,i,s={};t;){for(i in n=e.data(t,r))n[i]&&(s[i]=s.hasVirtualBinding=!0);t=t.parentNode}return s}function E(){g=!0}function k(){g=!1}function C(){_(),d=setTimeout(function(){d=0,x=0,f.length=0,m=!1,E()},e.vmouse.resetTimerDuration)}function _(){d&&(clearTimeout(d),d=0)}function M(t,n,i){var s;return(i&&i[t]||!i&&function(t,n){for(var i;t;){if((i=e.data(t,r))&&(!n||i[n]))return t;t=t.parentNode}return null}(n.target,t))&&(s=function(t,n){var r,i,s,o,c,d,u,h,p,f=t.type;if((t=e.Event(t)).type=n,r=t.originalEvent,i=e.event.props,f.search(/mouse/)>-1&&(i=l),r)for(u=i.length;u;)t[o=i[--u]]=r[o];if(f.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1),-1!==f.search(/^touch/)&&(f=(s=w(r)).touches,c=s.changedTouches,d=f&&f.length?f[0]:c&&c.length?c[0]:void 0))for(h=0,p=a.length;h<p;h++)t[o=a[h]]=d[o];return t}(n,t),e(n.target).trigger(s)),s}function I(t){var n=e.data(t.target,i);if(!(m||x&&x===n)){var r=M("v"+t.type,t);r&&(r.isDefaultPrevented()&&t.preventDefault(),r.isPropagationStopped()&&t.stopPropagation(),r.isImmediatePropagationStopped()&&t.stopImmediatePropagation())}}function j(t){var n,r,s=w(t).touches;if(s&&1===s.length&&(r=S(n=t.target)).hasVirtualBinding){x=y++,e.data(n,i,x),_(),k(),p=!1;var a=w(t).touches[0];u=a.pageX,h=a.pageY,M("vmouseover",t,r),M("vmousedown",t,r)}}function T(e){g||(p||M("vmousecancel",e,S(e.target)),p=!0,C())}function R(t){if(!g){var n=w(t).touches[0],r=s,i=e.vmouse.moveDistanceThreshold,s=s||Math.abs(n.pageX-u)>i||Math.abs(n.pageY-h)>i,a=S(t.target);s&&!r&&M("vmousecancel",t,a),M("vmousemove",t,a),C()}}function P(e){if(!g){E();var t,n=S(e.target);if(M("vmouseup",e,n),!p){var r=M("vclick",e,n);r&&r.isDefaultPrevented()&&(t=w(e).changedTouches[0],f.push({touchID:x,x:t.clientX,y:t.clientY}),m=!0)}M("vmouseout",e,n),p=!1,C()}}function A(t){var n,i=e.data(t,r);if(i)for(n in i)if(i[n])return!0;return!1}function N(){}function D(t){var n=t.substr(1);return{setup:function(i,s){A(this)||e.data(this,r,{}),e.data(this,r)[t]=!0,c[t]=(c[t]||0)+1,1===c[t]&&U.bind(n,I),e(this).bind(n,N),b&&(c.touchstart=(c.touchstart||0)+1,1===c.touchstart&&U.bind("touchstart",j).bind("touchend",P).bind("touchmove",R).bind("scroll",T))},teardown:function(i,s){--c[t],c[t]||U.unbind(n,I),b&&(--c.touchstart,c.touchstart||U.unbind("touchstart",j).unbind("touchmove",R).unbind("touchend",P).unbind("scroll",T));var a=e(this),o=e.data(this,r);o&&(o[t]=!1),a.unbind(n,N),A(this)||a.removeData(r)}}}}(p,window,document);const kf=function(e,t,n){const r=e.range[0][1]-e.range[0][0]+(e.range[1][1]-e.range[1][0]),i=e.unscaleVector(yp.cartFromPolarDeg(1,n)),s=yp.scale(yp.normalize(i),r),a=yp.add(t,s),o=yp.polarDegFromCart(i)[1];return e.constrainToBoundsOnAngle(a,4,o*Math.PI/180)};class Cf{graphie;initialPoint;constructor(e,t){this.graphie=e,this.initialPoint=t}transform(e){const t=af.getPrefixedTransform();this.wrapper.style[t]=e}toFront(){const e=this.wrapper.parentNode;e&&e.appendChild(this.wrapper)}toBack(){const e=this.wrapper.parentNode;null!=e&&e.firstChild!==this.wrapper&&e.insertBefore(this.wrapper,e.firstChild)}remove(){this.visibleShape.remove(),p(this.wrapper).remove()}getMouseTarget(){return this.visibleShape[0]}moveTo(e){const t=yp.subtract(this.graphie.scalePoint(e),this.graphie.scalePoint(this.initialPoint)),n=af.getCanUse3dTransform(),r="translateX("+t[0]+"px) translateY("+t[1]+"px)"+(n?" translateZ(0)":"");this.transform(r)}hide(){this.visibleShape.hide()}show(){this.visibleShape.show()}attr(...e){this.visibleShape.attr(...e)}animate(...e){this.visibleShape.animate(...e)}}const _f={center:null,createPath:null,mouselayer:!1};class Mf extends Cf{wrapper;visibleShape;constructor(e,t,n){const i=e.scalePoint(r.head(t));super(e,i),n=r.extend({},_f,n);const s=e.fixedPath(t,n.center,n.createPath);this.wrapper=s.wrapper,this.visibleShape=s.visibleShape,n.mouselayer?(this.wrapper.style.touchAction="none",this.graphie.addToMouseLayerWrapper(this.wrapper)):this.graphie.addToVisibleLayerWrapper(this.wrapper)}}let If=class e extends Mf{static scale=1.4;center;constructor(t,n){const i=[.75,0];super(t,[[-3,4],[-2.75,2.5],[0,.25],i,[0,-.25],[-2.75,-2.5],[-3,-4]].map(t=>{const n=yp.subtract(t,i),r=yp.scale(n,e.scale);return yp.add(i,r)}).map(t.unscalePoint),{center:t.unscalePoint(i),createPath:jf}),this.center=i,this.attr(r.extend({"stroke-linejoin":"round","stroke-linecap":"round","stroke-dasharray":""},n))}toCoordAtAngle(t,n){const r=this.graphie.scalePoint(kf(this.graphie,t,n));this.transform("translateX("+(r[0]+e.scale*this.center[0])+"px) translateY("+(r[1]+e.scale*this.center[1])+"px) translateZ(0) rotate("+(360-Lp.bound(n))+"deg)")}};const jf=function(e){let t="M"+e[0][0]+" "+e[0][1];for(let n=1;n<e.length;n+=3)t+="C"+e[n][0]+" "+e[n][1]+" "+e[n+1][0]+" "+e[n+1][1]+" "+e[n+2][0]+" "+e[n+2][1];return t},Tf={maxScale:1,mouselayer:!1,shadow:!1,disableMouseEventsOnWrapper:!1};class Rf extends Cf{initialPoint;wrapper;visibleShape;constructor(e,t,n,i){super(e,t),i=r.extend({},Tf,i);const s=e.fixedEllipse(t,n,i.maxScale,i.padding);if(this.visibleShape=s.visibleShape,this.wrapper=s.wrapper,this.graphie=e,this.initialPoint=t,i.interactiveKindForTesting&&this.wrapper.setAttribute("data-interactive-kind-for-testing",i.interactiveKindForTesting),i.mouselayer?(this.wrapper.style.touchAction="none",this.graphie.addToMouseLayerWrapper(this.wrapper)):this.graphie.addToVisibleLayerWrapper(this.wrapper),i.shadow){const e="drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.5))";this.wrapper.style.filter=e,this.moveTo=function(e){const t=yp.subtract(this.graphie.scalePoint(e),this.graphie.scalePoint(this.initialPoint)),n=af.getCanUse3dTransform(),r="translateX("+Math.round(t[0])+"px) translateY("+Math.round(t[1])+"px)"+(n?" translateZ(0)":"");this.transform(r)}}i.disableMouseEventsOnWrapper&&(this.wrapper.style.pointerEvents="none",this.visibleShape.node.style.pointerEvents="auto")}}const Pf={thickness:2,mouselayer:!1};class Af extends Cf{initialLength;wrapper;visibleShape;constructor(e,t,n,i){const s=[e.range[0][0],0],a=[e.range[0][1],0],o=e.scalePoint(s);super(e,o),i=r.extend({},Pf,i);const l=e.fixedLine(s,a,i.thickness);this.wrapper=l.wrapper,this.visibleShape=l.visibleShape,i.interactiveKindForTesting&&this.wrapper.setAttribute("data-interactive-kind-for-testing",i.interactiveKindForTesting),this.visibleShape.attr(i.normalStyle),this.initialPoint=o,this.initialLength=Np.distanceToPoint(e.scalePoint(s),e.scalePoint(a)),i.mouselayer?(this.wrapper.style.touchAction="none",this.graphie.addToMouseLayerWrapper(this.wrapper)):this.graphie.addToVisibleLayerWrapper(this.wrapper),this.moveTo(t,n)}getMouseTarget(){return this.wrapper}moveTo(e,t){const n=this.graphie.scalePoint(e),r=this.graphie.scalePoint(t),i=yp.polarDegFromCart(yp.subtract(r,n)),s=i[0],a=Lp.bound(i[1]),o=yp.subtract(n,this.initialPoint),l=Lp.bound(s/this.initialLength),c=af.getCanUse3dTransform(),d="translateX("+o[0]+"px) translateY("+o[1]+"px) "+(c?" translateZ(0)":"")+"rotate("+a+"deg) scaleX("+l+") scaleY(1)";this.transform(d)}}const{clockwise:Nf,reverseVector:Df}=Zp;function Lf(e){const t=11.374597405497571;return 58.919514629750836*Math.exp(-.037587715462826674*e)+t}function Of(e,t){return[e*Math.cos(t),e*Math.sin(t)*-1]}function Ff(e,t){return Of(e,t*Math.PI/180)}let zf=!1;const Bf={animate:function(){},attr:function(){},remove:function(){}};function Hf(e,t){this.set=e.raphael.set(),this.cx=t[0],this.cy=t[1];const n=this,r=e.unscaleVector(180.5)[0],i=e.scalePoint([this.cx-r,this.cy+r-e.unscaleVector(10.5)[1]]),s=e.mouselayer.image("https://ka-perseus-graphie.s3.amazonaws.com/e9d032f2ab8b95979f674fbfa67056442ba1ff6a.png",i[0],i[1],360,180);this.set.push(s),s.node.addEventListener("touchstart",function(e){e.preventDefault()},{passive:!1});const a=function(n,i){const s=e.scaleVector(r);s[0]-=16,s[1]-=16;const a=e.scalePoint(t);return Math.sin((n+90)*Math.PI/180)*(s[0]+i)+a[0]+","+(Math.cos((n+90)*Math.PI/180)*(s[1]+i)+a[1])},o=e.raphael.path(" M"+a(180,6)+" L"+a(180,2)+" L"+a(183,10)+" L"+a(180,18)+" L"+a(180,14)+" A"+(e.scaleVector(r)[0]+10)+","+(e.scaleVector(r)[1]+10)+",0,0,1,"+a(170,14)+" L"+a(170,18)+" L"+a(167,10)+" L"+a(170,2)+" L"+a(170,6)+" A"+(e.scaleVector(r)[0]+10)+","+(e.scaleVector(r)[1]+10)+",0,0,0,"+a(180,6)+" Z").attr({stroke:null,fill:uf.INTERACTIVE});this.set.push(o),this.centerPoint=e.addMovablePoint({coord:t,visible:!1}),this.rotateHandle=e.addMovablePoint({bounded:!1,coord:[Math.sin(275*Math.PI/180)*r+this.cx,Math.cos(275*Math.PI/180)*r+this.cy],onMove:function(e,t){const r=180*Math.atan2(n.centerPoint.coord[1]-t,n.centerPoint.coord[0]-e)/Math.PI;n.rotate(-r-5,!0)}}),this.rotateHandle.constraints.fixedDistance.dist=r,this.rotateHandle.constraints.fixedDistance.point=this.centerPoint,this.rotateHandle.visibleShape.remove(),this.rotateHandle.mouseTarget.attr({scale:2});let l=!1,c=!1;const d=function(){return c||l},u=p(this.rotateHandle.mouseTarget.getMouseTarget());u.bind("vmousedown",function(e){l=!0,u.css("cursor","-webkit-grabbing"),u.css("cursor","grabbing"),o.animate({scale:1.5,fill:uf.INTERACTING},50),p(document).bind("vmouseup.rotateHandle",function(e){l=!1,u.css("cursor","-webkit-grab"),u.css("cursor","grab"),d()||o.animate({scale:1,fill:uf.INTERACTIVE},50),p(document).unbind("vmouseup.rotateHandle")})}),u.bind("vmouseover",function(e){c=!0,o.animate({scale:1.5,fill:uf.INTERACTING},50)}),u.bind("vmouseout",function(e){c=!1,d()||o.animate({scale:1,fill:uf.INTERACTIVE},50)});const h=p.map(this.set,function(e){return e.node});return this.makeTranslatable=function(){p(h).css("cursor","move"),u.css("cursor","-webkit-grab"),u.css("cursor","grab"),p(h).bind("vmousedown",function(t){t.preventDefault();let r=t.pageX-p(e.raphael.canvas.parentNode).offset().left,i=t.pageY-p(e.raphael.canvas.parentNode).offset().top;p(document).bind("vmousemove.protractor",function(t){let s=t.pageX-p(e.raphael.canvas.parentNode).offset().left,a=t.pageY-p(e.raphael.canvas.parentNode).offset().top;s=Math.max(10,Math.min(e.xpixels-10,s)),a=Math.max(10,Math.min(e.ypixels-10,a));const o=s-r,l=a-i;p.each(n.set.items,function(){this.translate(o,l)}),n.centerPoint.setCoord([n.centerPoint.coord[0]+o/e.scale[0],n.centerPoint.coord[1]-l/e.scale[1]]),n.rotateHandle.setCoord([n.rotateHandle.coord[0]+o/e.scale[0],n.rotateHandle.coord[1]-l/e.scale[1]]),r=s,i=a}),p(document).one("vmouseup",function(e){p(document).unbind("vmousemove.protractor")})})},this.rotation=0,this.rotate=function(t,n){const r=e.scalePoint(this.centerPoint.coord);return n&&(this.rotation=0),this.set.rotate(this.rotation+t,r[0],r[1]),this.rotation=this.rotation+t,this},this.moveTo=function(t,r){const i=e.scalePoint(n.centerPoint.coord),s=e.scalePoint([t,r]),a=2*Ef.getDistance(i,s);p({x:i[0],y:i[1]}).animate({x:s[0],y:s[1]},{duration:a,step:function(t,r){let i=0,s=0;"x"===r.prop?i=t-e.scalePoint(n.centerPoint.coord)[0]:"y"===r.prop&&(s=t-e.scalePoint(n.centerPoint.coord)[1]),p.each(n.set.items,function(){this.translate(i,s)}),n.centerPoint.setCoord([n.centerPoint.coord[0]+i/e.scale[0],n.centerPoint.coord[1]-s/e.scale[1]]),n.rotateHandle.setCoord([n.rotateHandle.coord[0]+i/e.scale[0],n.rotateHandle.coord[1]-s/e.scale[1]])}})},this.rotateTo=function(e){Math.abs(this.rotation-e)>180&&(this.rotation+=360);const t=5*Math.abs(this.rotation-e);p({0:this.rotation}).animate({0:e},{duration:t,step:function(e,t){n.rotate(e,!0),n.rotateHandle.setCoord([Math.sin((e+275)*Math.PI/180)*r+n.centerPoint.coord[0],Math.cos((e+275)*Math.PI/180)*r+n.centerPoint.coord[1]])}})},this.remove=function(){this.set.remove()},this.makeTranslatable(),this}function $f(e,t){r.defaults(t,{center:[0,0],pixelsPerUnit:40,ticksPerUnit:10,units:10,label:"",style:{fill:null,stroke:uf.GRAY}});const n=r.extend({},t.style,{strokeWidth:1}),i=r.extend({},t.style,{strokeWidth:2}),s=t.units*t.pixelsPerUnit,a=e.unscalePoint(yp.subtract(e.scalePoint(t.center),yp.scale([s,-50],.5))),o=t.pixelsPerUnit/e.scale[0],l=50/e.scale[0],c=yp.add(a,[t.units*o,l]);let d;if(10===t.ticksPerUnit)d={10:1,5:.55,1:.35};else{const e=[1,.6,.45,.3];d={};for(let n=t.ticksPerUnit;n>=1;n/=2)d[n]=1*(e.shift()||.2)}const u=r.keys(d).sort(function(e,t){return t-e});const h=a[0],f=a[1],m=c[0],g=c[1],b=t.units*t.ticksPerUnit+1,U=e.raphael.set(),y=1/e.scale[0];U.push(e.line([h-y,f],[m+y,f],i)),U.push(e.line([h-y,g],[m+y,g],i)),r.times(b,function(r){const s=r/t.ticksPerUnit,a=h+s*o,c=function(e){for(let t=0;t<u.length;t++){const n=u[t];if(e%n===0)return d[n]}return 0}(r)*l,p=0===r||r===b-1?i:n;if(U.push(e.line([a,f],[a,f+c],p)),s%1==0){const n=e.scalePoint([a,g]);let r,i;0===s?(r=t.label,i={mm:13,cm:11,m:8,km:11,in:8,ft:8,yd:10,mi:10}[r]||3*r.toString().length):(r=s,i=-3*(s.toString().length+1));const o=e.raphael.text(n[0]+i,n[1]+10,r);o.attr({"font-family":"KaTeX_Main","font-size":"12px",color:"#444"}),U.push(o)}});const x=e.mouselayer.path(e.svgPath([a,[h,g],c,[m,f],!0]));x.attr({fill:"#000",opacity:0,stroke:"#000","stroke-width":2}),U.push(x),x.node.addEventListener("touchstart",function(e){e.preventDefault()},{passive:!1});const v=p.map(U,function(e){return e.node});p(v).css("cursor","move"),p(v).bind("vmousedown",function(t){t.preventDefault();let n=t.pageX-p(e.raphael.canvas.parentNode).offset().left,r=t.pageY-p(e.raphael.canvas.parentNode).offset().top;p(document).bind("vmousemove.ruler",function(t){let i=t.pageX-p(e.raphael.canvas.parentNode).offset().left,s=t.pageY-p(e.raphael.canvas.parentNode).offset().top;i=Math.max(10,Math.min(e.xpixels-10,i)),s=Math.max(10,Math.min(e.ypixels-10,s));const a=i-n,o=s-r;U.translate(a,o),w.setCoord([w.coord[0]+a/e.scale[0],w.coord[1]-o/e.scale[1]]),S.setCoord([S.coord[0]+a/e.scale[0],S.coord[1]-o/e.scale[1]]),n=i,r=s}),p(document).one("vmouseup",function(e){p(document).unbind("vmousemove.ruler")})});const w=e.addMovablePoint({coord:a,normalStyle:{fill:uf.INTERACTIVE,"fill-opacity":0,stroke:uf.INTERACTIVE},highlightStyle:{fill:uf.INTERACTING,"fill-opacity":.1,stroke:uf.INTERACTING},pointSize:6,onMove:function(t,n){const r=S.coord[1]-n,i=S.coord[0]-t,s=180*Math.atan2(r,i)/Math.PI,a=yp.scale(yp.add([t,n],S.coord),.5),o=e.scalePoint(a),l=yp.scale(yp.add(w.coord,S.coord),.5),c=e.scalePoint(l),d=yp.subtract(o,c);U.rotate(-s,c[0],c[1]),U.translate(d[0],d[1])}}),S=e.addMovablePoint({coord:[m,f],normalStyle:{fill:uf.INTERACTIVE,"fill-opacity":0,stroke:uf.INTERACTIVE},highlightStyle:{fill:uf.INTERACTING,"fill-opacity":.1,stroke:uf.INTERACTING},pointSize:6,onMove:function(t,n){const r=n-w.coord[1],i=t-w.coord[0],s=180*Math.atan2(r,i)/Math.PI,a=yp.scale(yp.add([t,n],w.coord),.5),o=e.scalePoint(a),l=yp.scale(yp.add(w.coord,S.coord),.5),c=e.scalePoint(l),d=yp.subtract(o,c);U.rotate(-s,c[0],c[1]),U.translate(d[0],d[1])}});return w.constraints.fixedDistance.dist=s/e.scale[0],w.constraints.fixedDistance.point=S,S.constraints.fixedDistance.dist=s/e.scale[0],S.constraints.fixedDistance.point=w,this.remove=function(){U.remove(),w.remove(),S.remove()},this}function Wf(e,t){if(this.graphie=e,r.extend(this,t),r.defaults(this,{normalStyle:{stroke:uf.INTERACTIVE,"stroke-width":2,fill:uf.INTERACTIVE},highlightStyle:{stroke:uf.INTERACTING,"stroke-width":2,fill:uf.INTERACTING},labelStyle:{stroke:uf.DYNAMIC,"stroke-width":1,color:uf.DYNAMIC},angleStyle:{stroke:uf.DYNAMIC,"stroke-width":1,color:uf.DYNAMIC},allowReflex:!0}),!this.points||3!==this.points.length)throw new u("MovableAngle requires 3 points",h.InvalidInput);this.points=r.map(t.points,function(t){return r.isArray(t)?e.addMovablePoint({coord:t,visible:!1,constraints:{fixed:!0},normalStyle:this.normalStyle}):t},this),this.coords=r.pluck(this.points,"coord"),null==this.reflex&&(this.allowReflex?this.reflex=this._getClockwiseAngle(this.coords)>180:this.reflex=!1),this.rays=r.map([0,2],function(t){return e.addMovableLineSegment({pointA:this.points[1],pointZ:this.points[t],fixed:!0,extendRay:!0})},this),this.temp=[],this.labeledAngle=e.label([0,0],"","center",this.labelStyle),this.fixed||(this.addMoveHandlers(),this.addHighlightHandlers()),this.update()}r.extend(Ef.Graphie.prototype,{labelAngle:function(e){const t=this;r.defaults(e,{point1:[0,0],vertex:[0,0],point3:[0,0],label:null,numArcs:1,showRightAngleMarker:!0,pushOut:0,clockwise:!1,style:{}});let n=void 0===e.text?"":e.text;const i=e.vertex,s=t.scalePoint(i);let a,o;e.clockwise?(a=e.point1,o=e.point3):(a=e.point3,o=e.point1);const l=Ef.findAngleDeprecated(a,i),c=Ef.findAngleDeprecated(o,i),d=(c+360-l)%360,u=(l+d/2)%360;let h=5*e.pushOut+Lf(d);const p=[];if(Math.abs(d-90)<1e-9&&e.showRightAngleMarker){const n=yp.add(s,Ff(h,l)),i=yp.add(s,Ff(h,c));h*=Math.SQRT2;const a=yp.add(s,Ff(h,u));r.each([n,i],function(n){p.push(t.scaledPath([n,a],e.style))})}else r.times(e.numArcs,function(n){p.push(t.arc(i,t.unscaleVector(h),l,c,e.style)),h+=3});if(n){const r=n.match(/\$deg(\d)?/);if(r){const e=r[1]||1;n=n.replace(r[0],Lp.toFixedApprox(d,e)+"^{\\circ}")}const i=Ff(h+15,u),a=yp.add(s,i),o=t.unscalePoint(a);e.label?(e.label.setPosition(o),e.label.processMath(n,!0)):t.label(o,n,"center",e.style)}return p},labelSide:function(e){const t=this;let n,i;r.defaults(e,{point1:[0,0],point2:[0,0],label:null,text:"",numTicks:0,numArrows:0,clockwise:!1,style:{}}),e.clockwise?(n=e.point1,i=e.point2):(n=e.point2,i=e.point1);const s=[(n[0]+i[0])/2,(n[1]+i[1])/2],a=t.scalePoint(s),o=Math.atan2(i[1]-n[1],i[0]-n[0]),l=o+Math.PI/2,c=[];let d=0;if(e.numTicks){const n=e.numTicks,i=5,s=5,u=r.extend({},e.style,{strokeWidth:2});r.times(n,function(e){const r=Of(i*(e-(n-1)/2),o),d=Of(s,l),h=[yp.add(a,r,d),yp.add(a,r,Df(d))];c.push(t.scaledPath(h,u))}),d+=i*(n-1)+15}if(e.numArrows){const s=e.numArrows,l=[n,i].sort(function(e,t){return e[1]===t[1]?e[0]-t[0]:e[1]-t[1]})[0],u=t.scalePoint(l),h=r.extend({},e.style,{arrows:"->",strokeWidth:2}),p=5;r.times(s,function(e){let r=Of(d+p*e,o);l!==n&&(r=Df(r));const i=yp.add(a,r);c.push(t.scaledPath([u,i],h))})}let u=e.text;if(u){const r=u.match(/\$len(\d)?/);if(r){const e=Ef.getDistance(n,i),t=r[1]||1;u=u.replace(r[0],Lp.toFixedApprox(e,t))}const s=Of(20,l),o=yp.add(a,s),c=t.unscalePoint(o);e.label?(e.label.setPosition(c),e.label.processMath(u,!0)):t.label(c,u,"center",e.style)}return c},labelVertex:function(e){const t=this;if(r.defaults(e,{point1:null,vertex:[0,0],point3:null,label:null,text:"",clockwise:!1,style:{}}),!e.text)return;const n=e.vertex,i=t.scalePoint(n);let s,a;e.clockwise?(s=e.point1,a=e.point3):(s=e.point3,a=e.point1);let o,l=135;if(s&&a){const e=Ef.findAngleDeprecated(s,n);l=(Ef.findAngleDeprecated(a,n)+360-e)%360,o=(e+l/2+180)%360}else if(s){o=Ef.findAngleDeprecated(n,s)+90}else if(a){o=Ef.findAngleDeprecated(a,n)+90}else o=135;const c=Ff(10+Lf(360-l),o),d=yp.add(i,c),u=t.unscalePoint(d);e.label?(e.label.setPosition(u),e.label.processMath(e.text,!0)):t.label(u,e.text,"center",e.style)},addMovablePoint:function(e){const t=p.extend(!0,{graph:this,coord:[0,0],snapX:0,snapY:0,pointSize:4,highlight:!1,dragging:!1,visible:!0,bounded:!0,constraints:{fixed:!1,constrainX:!1,constrainY:!1,fixedAngle:{},fixedDistance:{}},lineStarts:[],lineEnds:[],polygonVertices:[],normalStyle:{},highlightStyle:{fill:uf.INTERACTING,stroke:uf.INTERACTING},labelStyle:{color:uf.INTERACTIVE},vertexLabel:"",mouseTarget:null},e),n=t.constraints.fixed?uf.DYNAMIC:uf.INTERACTIVE;t.normalStyle=r.extend({},{fill:n,stroke:n},e.normalStyle),void 0!==e.coordX&&(t.coord[0]=e.coordX),void 0!==e.coordY&&(t.coord[1]=e.coordY);const i=t.graph,s=function(e){t.visible&&t.bounded&&!t.constraints.fixed&&(e=i.constrainToBounds(e,10));let n=e[0],r=e[1];if(0!==t.snapX&&(n=Math.round(n/t.snapX)*t.snapX),0!==t.snapY&&(r=Math.round(r/t.snapY)*t.snapY),t.constraints.fixedDistance.snapPoints){const s=i.scalePoint(e);let a=s[0],o=s[1];const l=2*Math.PI/t.constraints.fixedDistance.snapPoints,c=t.constraints.fixedDistance.dist,d=t.constraints.fixedDistance.point,u=(d[0]-i.range[0][0])*i.scale[0],h=(-d[1]+i.range[1][1])*i.scale[1];let p=a-u,f=-o+h,m=Math.atan(f/p);p<0&&(m+=Math.PI),m=Math.round(m/l)*l,p=c*Math.cos(m),f=c*Math.sin(m),a=p+u,o=-f+h,n=Lp.roundTo(5,a/i.scale[0]+i.range[0][0]),r=Lp.roundTo(5,i.range[1][1]-o/i.scale[1])}return t.applyConstraint([n,r])};t.applyConstraint=function(e,n,r){let i=e.slice();const s={};if(r?p.extend(s,{fixed:!1,constrainX:!1,constrainY:!1,fixedAngle:{},fixedDistance:{}},n):p.extend(s,this.constraints,n),s.constrainX)i=[this.coord[0],e[1]];else if(s.constrainY)i=[e[0],this.coord[1]];else if("number"==typeof s.fixedAngle.angle&&"number"==typeof s.fixedDistance.dist){const e=s.fixedAngle.vertex.coord||s.fixedAngle.vertex,t=s.fixedAngle.ref.coord||s.fixedAngle.ref,n=s.fixedDistance.point.coord||s.fixedDistance.point,r=(s.fixedAngle.angle+Ef.findAngleDeprecated(t,e))*Math.PI/180,a=s.fixedDistance.dist;i[0]=a*Math.cos(r)+n[0],i[1]=a*Math.sin(r)+n[1]}else if("number"==typeof s.fixedAngle.angle){const t=s.fixedAngle.vertex.coord||s.fixedAngle.vertex,n=s.fixedAngle.ref.coord||s.fixedAngle.ref,r=(s.fixedAngle.angle+Ef.findAngleDeprecated(n,t))*Math.PI/180,a=Ef.findAngleDeprecated(e,t)*Math.PI/180;let o=Ef.getDistance(e,t)*Math.cos(r-a);o=o<1?1:o,i[0]=o*Math.cos(r)+t[0],i[1]=o*Math.sin(r)+t[1]}else if("number"==typeof s.fixedDistance.dist){const t=s.fixedDistance.point.coord||s.fixedDistance.point;let n=Ef.findAngleDeprecated(e,t);const r=s.fixedDistance.dist;n=n*Math.PI/180,i[0]=r*Math.cos(n)+t[0],i[1]=r*Math.sin(n)+t[1]}else s.fixed&&(i=t.coord);return i},t.coord=s(t.coord);if(t.visible&&i.style(t.normalStyle,function(){const e=[t.pointSize/i.scale[0],t.pointSize/i.scale[1]],n={maxScale:2,padding:2};t.visibleShape=new Rf(i,t.coord,e,n),t.visibleShape.attr(r.omit(t.normalStyle,"scale")),t.visibleShape.toFront()}),t.normalStyle.scale=1,t.highlightStyle.scale=2,t.vertexLabel&&(t.labeledVertex=this.label([0,0],"","center",t.labelStyle)),t.drawLabel=function(){t.vertexLabel&&t.graph.labelVertex({vertex:t.coord,label:t.labeledVertex,text:t.vertexLabel,style:t.labelStyle})},t.drawLabel(),t.grab=function(e){e=e||[0,0],p(document).bind("vmousemove.point vmouseup.point",function(n){n.preventDefault(),t.dragging=!0,zf=!0;let a=yp.add(i.getMouseCoord(n),e);a=s(a);let o,l,c=a[0],d=a[1];if("vmousemove"===n.type){let e=!0;if(r.isFunction(t.onMove)){const n=t.onMove(c,d);!1===n&&(e=!1),r.isArray(n)&&(c=n[0],d=n[1])}if(o=(c-i.range[0][0])*i.scale[0],l=(-d+i.range[1][1])*i.scale[1],e){const e=i.unscalePoint([o,l]);t.visibleShape.moveTo(e),t.mouseTarget.moveTo(e),t.coord=[c,d],t.updateLineEnds(),p(t).trigger("move")}t.drawLabel()}else if("vmouseup"===n.type){if(p(document).unbind(".point"),t.dragging=!1,zf=!1,r.isFunction(t.onMoveEnd)){const e=t.onMoveEnd(c,d);if(r.isArray(e)){c=e[0],d=e[1],o=(c-i.range[0][0])*i.scale[0],l=(-d+i.range[1][1])*i.scale[1];const n=i.unscalePoint([o,l]);t.visibleShape.moveTo(n),t.mouseTarget.moveTo(n),t.coord=[c,d]}}t.highlight||(t.visibleShape.animate(t.normalStyle,50),t.onUnhighlight&&t.onUnhighlight())}})},t.visible&&!t.constraints.fixed){if(!t.mouseTarget){const e=i.unscaleVector(16),n={mouselayer:!0,padding:0,disableMouseEventsOnWrapper:!0,interactiveKindForTesting:"movable-point"};t.mouseTarget=new Rf(i,t.coord,e,n),t.mouseTarget.attr({fill:"#000",opacity:0})}const e=p(t.mouseTarget.getMouseTarget());e.css("cursor","move"),e.bind("vmousedown vmouseover vmouseout",function(e){if("vmouseover"===e.type)t.highlight=!0,zf||(t.visibleShape.animate(t.highlightStyle,50),t.onHighlight&&t.onHighlight());else if("vmouseout"===e.type)t.highlight=!1,t.dragging||zf||(t.visibleShape.animate(t.normalStyle,50),t.onUnhighlight&&t.onUnhighlight());else if("vmousedown"===e.type&&(1===e.which||0===e.which)){e.preventDefault();const n=t.coord,r=i.getMouseCoord(e),s=!("ontouchstart"in window)?[0,0]:yp.subtract(n,r);t.grab(s)}})}return t.moveTo=function(e,n,i){const s=5*Ef.getDistance(this.graph.scalePoint([e,n]),this.graph.scalePoint(this.coord)),a=i&&function(e){t.coord=e,t.updateLineEnds()};this.visibleShape.animateTo([e,n],s,a),this.mouseTarget.animateTo([e,n],s,a),this.coord=[e,n],r.isFunction(this.onMove)&&this.onMove(e,n)},t.updateLineEnds=function(){p(this.lineStarts).each(function(){this.coordA=t.coord,this.transform()}),p(this.lineEnds).each(function(){this.coordZ=t.coord,this.transform()}),p(this.polygonVertices).each(function(){this.transform()})},t.setCoord=function(e){this.visible&&(this.visibleShape.moveTo(e),null!=this.mouseTarget&&this.mouseTarget.moveTo(e)),this.coord=e.slice()},t.setCoordConstrained=function(e){this.setCoord(s(e))},t.toBack=function(){this.visible&&(null!=this.mouseTarget&&this.mouseTarget.toBack(),this.visibleShape.toBack())},t.toFront=function(){this.visible&&(null!=this.mouseTarget&&this.mouseTarget.toFront(),this.visibleShape.toFront())},t.remove=function(){this.visibleShape&&this.visibleShape.remove(),this.mouseTarget&&this.mouseTarget.remove(),this.labeledVertex&&this.labeledVertex.remove()},t},addMovableLineSegment:function(e){const t=p.extend({graph:this,coordA:[0,0],coordZ:[1,1],snapX:0,snapY:0,fixed:!1,ticks:0,normalStyle:{},highlightStyle:{stroke:uf.INTERACTING,"stroke-width":6},labelStyle:{stroke:uf.INTERACTIVE,color:uf.INTERACTIVE},highlight:!1,dragging:!1,tick:[],extendLine:!1,extendRay:!1,constraints:{fixed:!1,constrainX:!1,constrainY:!1},sideLabel:"",vertexLabels:[],numArrows:0,numTicks:0,movePointsWithLine:!1},e),n=t.fixed?uf.DYNAMIC:uf.INTERACTIVE;t.normalStyle=r.extend({},{"stroke-width":2,stroke:n},e.normalStyle),t.arrowStyle=r.extend({},t.normalStyle,{color:t.normalStyle.stroke}),void 0!==e.pointA?(t.coordA=e.pointA.coord,t.pointA.lineStarts.push(t)):void 0!==e.coordA&&(t.coordA=e.coordA.slice()),void 0!==e.pointZ?(t.coordZ=e.pointZ.coord,t.pointZ.lineEnds.push(t)):void 0!==e.coordA&&(t.coordA=t.coordA.slice());const i=t.graph;i.style(t.normalStyle);for(let r=0;r<t.ticks;++r)t.tick[r]=Bf;let s=Ef.unscaledSvgPath([[0,0],[1,0]]);for(let r=0;r<t.ticks;++r){const e=.5-(t.ticks-1+2*r)/i.scale[0];s+=Ef.unscaledSvgPath([[e,-7],[e,7]])}if(e={thickness:Math.max(t.normalStyle["stroke-width"],t.highlightStyle["stroke-width"])},t.visibleLine=new Af(i,[0,0],[1,0],e),t.visibleLine.attr(t.normalStyle),!t.fixed){const e={thickness:30,mouselayer:!0,interactiveKindForTesting:"movable-line"};t.mouseTarget=new Af(i,[0,0],[1,0],e),t.mouseTarget.attr({fill:"#000",opacity:0})}if(t.transform=function(e){e&&("object"==typeof this.pointA&&(this.coordA=this.pointA.coord),"object"==typeof this.pointZ&&(this.coordZ=this.pointZ.coord));const n=function(e,n,r){const i=(e=t.graph).range[0][1]-e.range[0][0]+(e.range[1][1]-e.range[1][0]),s=e.unscaleVector(yp.cartFromPolarDeg(1,r)),a=yp.scale(yp.normalize(s),i),o=yp.add(n,a),l=yp.polarDegFromCart(s)[1];return e.constrainToBoundsOnAngle(o,4,l*Math.PI/180)},s=function(e){const t=e.graph.scalePoint(e.coordA),n=e.graph.scalePoint(e.coordZ);return yp.polarDegFromCart(yp.subtract(n,t))[1]}(this);let a=this.coordA,o=this.coordZ;this.extendLine?(a=n(i,a,360-s),o=n(i,o,(540-s)%360)):this.extendRay&&(o=n(i,a,360-s));const l=[this.visibleLine];this.fixed||l.push(this.mouseTarget),r.each(l,function(e){e.moveTo(a,o)}),null==this._arrows&&(this._arrows=[],this.extendLine?(this._arrows.push(new If(i,this.normalStyle)),this._arrows.push(new If(i,this.normalStyle))):this.extendRay&&this._arrows.push(new If(i,this.normalStyle)));const c=[this.coordA,this.coordZ],d=[360-s,(540-s)%360];r.each(this._arrows,function(e,t){e.toCoordAtAngle(c[t],d[t])}),r.invoke(this.temp,"remove"),this.temp=[];const u=this.coordA[0]<this.coordZ[0]||this.coordA[0]===this.coordZ[0]&&this.coordA[1]>this.coordZ[1];this.sideLabel&&this.temp.push(this.graph.labelSide({point1:this.coordA,point2:this.coordZ,label:this.labeledSide,text:this.sideLabel,numArrows:this.numArrows,numTicks:this.numTicks,clockwise:u,style:this.labelStyle})),this.vertexLabels.length&&(this.graph.labelVertex({vertex:this.coordA,point3:this.coordZ,label:this.labeledVertices[0],text:this.vertexLabels[0],clockwise:u,style:this.labelStyle}),this.graph.labelVertex({point1:this.coordA,vertex:this.coordZ,label:this.labeledVertices[1],text:this.vertexLabels[1],clockwise:u,style:this.labelStyle})),this.temp=r.flatten(this.temp)},t.toBack=function(){t.fixed||t.mouseTarget.toBack(),t.visibleLine.toBack()},t.toFront=function(){t.fixed||t.mouseTarget.toFront(),t.visibleLine.toFront()},t.remove=function(){t.fixed||t.mouseTarget.remove(),t.visibleLine.remove(),t.labeledSide&&t.labeledSide.remove(),t.labeledVertices&&r.invoke(t.labeledVertices,"remove"),t._arrows&&r.invoke(t._arrows,"remove"),t.temp.length&&r.invoke(t.temp,"remove")},t.hide=function(){t.visibleLine.hide(),t.temp.length&&r.invoke(t.temp,"hide"),t._arrows&&r.invoke(t._arrows,"hide")},t.show=function(){t.visibleLine.show(),t.temp.length&&r.invoke(t.temp,"show"),t._arrows&&r.invoke(t._arrows,"show")},t.sideLabel&&(t.labeledSide=this.label([0,0],"","center",t.labelStyle)),t.vertexLabels.length&&(t.labeledVertices=r.map(t.vertexLabels,function(e){return this.label([0,0],"","center",t.labelStyle)},this)),!t.fixed&&!t.constraints.fixed){const e=p(t.mouseTarget.getMouseTarget());e.css("cursor","move"),e.bind("vmousedown vmouseover vmouseout",function(e){if("vmouseover"===e.type)zf||(t.highlight=!0,t.visibleLine.animate(t.highlightStyle,50),t.arrowStyle=r.extend({},t.arrowStyle,{color:t.highlightStyle.stroke,stroke:t.highlightStyle.stroke}),t.transform());else if("vmouseout"===e.type)t.highlight=!1,t.dragging||(t.visibleLine.animate(t.normalStyle,50),t.arrowStyle=r.extend({},t.arrowStyle,{color:t.normalStyle.stroke,stroke:t.normalStyle.stroke}),t.transform());else if("vmousedown"===e.type&&(1===e.which||0===e.which)){e.preventDefault();let n=(e.pageX-p(i.raphael.canvas.parentNode).offset().left)/i.scale[0]+i.range[0][0],s=i.range[1][1]-(e.pageY-p(i.raphael.canvas.parentNode).offset().top)/i.scale[1];t.snapX>0&&(n=Math.round(n/t.snapX)*t.snapX),t.snapY>0&&(s=Math.round(s/t.snapY)*t.snapY);const a=[t.coordA[0]-n,t.coordA[1]-s],o=[t.coordZ[0]-n,t.coordZ[1]-s],l=-Math.min(i.scaleVector(a)[0],i.scaleVector(o)[0]),c=Math.max(i.scaleVector(a)[0],i.scaleVector(o)[0]),d=Math.max(i.scaleVector(a)[1],i.scaleVector(o)[1]),u=-Math.min(i.scaleVector(a)[1],i.scaleVector(o)[1]);p(document).bind("vmousemove.lineSegment vmouseup.lineSegment",function(e){e.preventDefault(),t.dragging=!0,zf=!0;let n=e.pageX-p(i.raphael.canvas.parentNode).offset().left,s=e.pageY-p(i.raphael.canvas.parentNode).offset().top;n=Math.max(l+10,Math.min(i.xpixels-10-c,n)),s=Math.max(d+10,Math.min(i.ypixels-10-u,s));let h=n/i.scale[0]+i.range[0][0],f=i.range[1][1]-s/i.scale[1];if(t.snapX>0&&(h=Math.round(h/t.snapX)*t.snapX),t.snapY>0&&(f=Math.round(f/t.snapY)*t.snapY),"vmousemove"===e.type){t.constraints.constrainX&&(h=t.coordA[0]-a[0]),t.constraints.constrainY&&(f=t.coordA[1]-a[1]);const e=h+a[0]-t.coordA[0],n=f+a[1]-t.coordA[1];t.coordA=[h+a[0],f+a[1]],t.coordZ=[h+o[0],f+o[1]],t.transform(),t.movePointsWithLine&&("object"==typeof t.pointA&&t.pointA.setCoord([t.pointA.coord[0]+e,t.pointA.coord[1]+n]),"object"==typeof t.pointZ&&t.pointZ.setCoord([t.pointZ.coord[0]+e,t.pointZ.coord[1]+n])),r.isFunction(t.onMove)&&t.onMove(e,n)}else"vmouseup"===e.type&&(p(document).unbind(".lineSegment"),t.dragging=!1,zf=!1,t.highlight||(t.visibleLine.animate(t.normalStyle,50),t.arrowStyle=r.extend({},t.arrowStyle,{color:t.normalStyle.stroke,stroke:t.normalStyle.stroke}),t.transform()),r.isFunction(t.onMoveEnd)&&t.onMoveEnd());p(t).trigger("move")})}})}return void 0!==t.pointA&&t.pointA.toFront(),void 0!==t.pointZ&&t.pointZ.toFront(),t.transform(),t},addMovablePolygon:function(e){const t=this,n=p.extend({snapX:0,snapY:0,fixed:!1,constrainToGraph:!0,normalStyle:{},highlightStyle:{stroke:uf.INTERACTING,"stroke-width":2,fill:uf.INTERACTING,"fill-opacity":.05},pointHighlightStyle:{fill:uf.INTERACTING,stroke:uf.INTERACTING},labelStyle:{stroke:uf.DYNAMIC,"stroke-width":1,color:uf.DYNAMIC},angleLabels:[],showRightAngleMarkers:[],sideLabels:[],vertexLabels:[],numArcs:[],numArrows:[],numTicks:[],updateOnPointMove:!0,closed:!0},r.omit(e,"points")),i=n.fixed?uf.DYNAMIC:uf.INTERACTIVE;n.normalStyle=r.extend({"stroke-width":2,"fill-opacity":0,fill:i,stroke:i},e.normalStyle),n.points=e.points;const s=function(e){return!r.isArray(e)};if(n.update=function(){const e=n.points.length;n.coords=r.map(n.points,function(e,t){return s(e)?e.coord:e}),n.left=r.min(r.pluck(n.coords,0)),n.right=r.max(r.pluck(n.coords,0)),n.top=r.max(r.pluck(n.coords,1)),n.bottom=r.min(r.pluck(n.coords,1));let i=r.map(n.coords,function(e){return t.scalePoint(e)});n.closed?i.push(!0):i=i.concat(r.clone(i).reverse()),n.path=Ef.unscaledSvgPath(i),r.invoke(n.temp,"remove"),n.temp=[];const a=Nf(n.coords);(n.angleLabels.length||n.showRightAngleMarkers.length)&&r.each(n.labeledAngles,function(r,i){n.temp.push(t.labelAngle({point1:n.coords[(i-1+e)%e],vertex:n.coords[i],point3:n.coords[(i+1)%e],label:r,text:n.angleLabels[i],showRightAngleMarker:n.showRightAngleMarkers[i],numArcs:n.numArcs[i],clockwise:a,style:n.labelStyle}))}),n.sideLabels.length&&r.each(n.labeledSides,function(r,i){n.temp.push(t.labelSide({point1:n.coords[i],point2:n.coords[(i+1)%e],label:r,text:n.sideLabels[i],numArrows:n.numArrows[i],numTicks:n.numTicks[i],clockwise:a,style:n.labelStyle}))}),n.vertexLabels.length&&r.each(n.labeledVertices,function(r,i){t.labelVertex({point1:n.coords[(i-1+e)%e],vertex:n.coords[i],point3:n.coords[(i+1)%e],label:r,text:n.vertexLabels[i],clockwise:a,style:n.labelStyle})}),n.temp=r.flatten(n.temp)},n.transform=function(){n.update(),n.visibleShape.attr({path:n.path}),n.fixed||n.mouseTarget.attr({path:n.path})},n.remove=function(){n.visibleShape.remove(),n.fixed||n.mouseTarget.remove(),n.labeledAngles&&r.invoke(n.labeledAngles,"remove"),n.labeledSides&&r.invoke(n.labeledSides,"remove"),n.labeledVertices&&r.invoke(n.labeledVertices,"remove"),n.temp.length&&r.invoke(n.temp,"remove")},n.toBack=function(){n.fixed||n.mouseTarget.toBack(),n.visibleShape.toBack()},n.toFront=function(){n.fixed||n.mouseTarget.toFront(),n.visibleShape.toFront()},n.updateOnPointMove&&r.each(r.filter(n.points,s),function(e){e.polygonVertices.push(n)}),n.coords=new Array(n.points.length),n.angleLabels.length){const e=Math.max(n.angleLabels.length,n.showRightAngleMarkers.length);n.labeledAngles=r.times(e,function(){return this.label([0,0],"","center",n.labelStyle)},this)}return n.sideLabels.length&&(n.labeledSides=r.map(n.sideLabels,function(e){return this.label([0,0],"","center",n.labelStyle)},this)),n.vertexLabels.length&&(n.labeledVertices=r.map(n.vertexLabels,function(e){return this.label([0,0],"","center",n.labelStyle)},this)),n.update(),n.visibleShape=t.raphael.path(n.path),n.visibleShape.attr(n.normalStyle),n.fixed||(n.mouseTarget=t.mouselayer.path(n.path),n.mouseTarget.attr({fill:"#000",opacity:0,cursor:"move"}),p(n.mouseTarget[0]).bind("vmousedown vmouseover vmouseout",function(e){if("vmouseover"===e.type)zf&&!n.dragging||(n.highlight=!0,n.visibleShape.animate(n.highlightStyle,50),r.each(r.filter(n.points,s),function(e){e.visibleShape.animate(n.pointHighlightStyle,50)}));else if("vmouseout"===e.type){if(n.highlight=!1,!n.dragging){n.visibleShape.animate(n.normalStyle,50);const e=r.filter(n.points,s);r.any(r.pluck(e,"dragging"))||r.each(e,function(e){e.visibleShape.animate(e.normalStyle,50)})}}else if("vmousedown"===e.type&&(1===e.which||0===e.which)){e.preventDefault(),r.each(r.filter(n.points,s),function(e){e.dragging=!0});let i=(e.pageX-p(t.raphael.canvas.parentNode).offset().left)/t.scale[0]+t.range[0][0],a=t.range[1][1]-(e.pageY-p(t.raphael.canvas.parentNode).offset().top)/t.scale[1];n.snapX>0&&(i=Math.round(i/n.snapX)*n.snapX),n.snapY>0&&(a=Math.round(a/n.snapY)*n.snapY);let o=i,l=a;const c=n.coords.slice(),d=(i-n.left)*t.scale[0],u=(n.right-i)*t.scale[0],h=(n.top-a)*t.scale[1],f=(a-n.bottom)*t.scale[1];p(document).bind("vmousemove.polygon vmouseup.polygon",function(e){e.preventDefault(),n.dragging=!0,zf=!0;let m=e.pageX-p(t.raphael.canvas.parentNode).offset().left,g=e.pageY-p(t.raphael.canvas.parentNode).offset().top;n.constrainToGraph&&(m=Math.max(d+10,Math.min(t.xpixels-10-u,m)),g=Math.max(h+10,Math.min(t.ypixels-10-f,g)));let b=m/t.scale[0]+t.range[0][0],U=t.range[1][1]-g/t.scale[1];if(n.snapX>0&&(b=Math.round(b/n.snapX)*n.snapX),n.snapY>0&&(U=Math.round(U/n.snapY)*n.snapY),"vmousemove"===e.type){let e=b-i,t=U-a,d=!0;if(r.isFunction(n.onMove)){const s=n.onMove(e,t);!1===s?d=!1:r.isArray(s)&&(e=s[0],t=s[1],b=i+e,U=a+t)}const u=function(n){return[c[n][0]+e,c[n][1]+t]};d&&(r.each(n.points,function(e,t){s(e)?e.setCoord(u(t)):n.points[t]=u(t)}),n.transform(),p(n).trigger("move"),o=b,l=U)}else if("vmouseup"===e.type){p(document).unbind(".polygon");const e=r.filter(n.points,s);r.each(e,function(e){e.dragging=!1}),n.dragging=!1,zf=!1,n.highlight||(n.visibleShape.animate(n.normalStyle,50),r.each(e,function(e){e.visibleShape.animate(e.normalStyle,50)})),r.isFunction(n.onMoveEnd)&&n.onMoveEnd(o-i,l-a)}})}})),r.invoke(r.filter(n.points,s),"toFront"),n},constrainToBounds:function(e,t){const n=this.unscalePoint([t,this.ypixels-t]),r=this.unscalePoint([this.xpixels-t,t]);return[Math.max(n[0],Math.min(r[0],e[0])),Math.max(n[1],Math.min(r[1],e[1]))]},constrainToBoundsOnAngle:function(e,t,n){const r=this.unscalePoint([t,this.ypixels-t]),i=this.unscalePoint([this.xpixels-t,t]);let s=e.slice();return s[0]<r[0]?s=[r[0],s[1]+(r[0]-s[0])*Math.tan(n)]:s[0]>i[0]&&(s=[i[0],s[1]-(s[0]-i[0])*Math.tan(n)]),s[1]<r[1]?s=[s[0]+(r[1]-s[1])/Math.tan(n),r[1]]:s[1]>i[1]&&(s=[s[0]-(s[1]-i[1])/Math.tan(n),i[1]]),s},addMovableAngle:function(e){return new Wf(this,e)},addCircleGraph:function(e){const t=this,n=p.extend({center:[0,0],radius:2,snapX:.5,snapY:.5,snapRadius:.5,minRadius:1,centerConstraints:{},centerNormalStyle:{},centerHighlightStyle:{stroke:uf.INTERACTING,fill:uf.INTERACTING},circleNormalStyle:{stroke:uf.INTERACTIVE,"fill-opacity":0},circleHighlightStyle:{stroke:uf.INTERACTING,fill:uf.INTERACTING,"fill-opacity":.05}},e),i=n.centerConstraints.fixed?uf.DYNAMIC:uf.INTERACTIVE,s=e?e.centerNormalStyle:null;n.centerNormalStyle=r.extend({},{fill:i,stroke:i},s),n.centerPoint=t.addMovablePoint({graph:t,coord:n.center,normalStyle:n.centerNormalStyle,snapX:n.snapX,snapY:n.snapY,constraints:n.centerConstraints}),n.circ=t.circle(n.center,n.radius,n.circleNormalStyle),n.perim=t.mouselayer.circle(t.scalePoint(n.center)[0],t.scalePoint(n.center)[1],t.scaleVector(n.radius)[0]).attr({"stroke-width":20,opacity:.002}),n.centerConstraints.fixed||p(n.centerPoint.mouseTarget.getMouseTarget()).on("vmouseover vmouseout",function(e){n.centerPoint.highlight||n.centerPoint.dragging?n.circ.animate(n.circleHighlightStyle,50):n.circ.animate(n.circleNormalStyle,50)}),n.toFront=function(){n.circ.toFront(),n.perim.toFront(),n.centerPoint.visibleShape.toFront(),n.centerConstraints.fixed||n.centerPoint.mouseTarget.toFront()},n.centerPoint.onMove=function(e,r){n.toFront(),n.circ.attr({cx:t.scalePoint(e)[0],cy:t.scalePoint(r)[1]}),n.perim.attr({cx:t.scalePoint(e)[0],cy:t.scalePoint(r)[1]}),n.onMove&&n.onMove(e,r)},p(n.centerPoint).on("move",function(){n.center=this.coord,p(n).trigger("move")}),n.setCenter=function(e,t){n.centerPoint.setCoord([e,t]),n.centerPoint.onMove(e,t),n.center=[e,t]},n.setRadius=function(e){n.radius=e,n.perim.attr({r:t.scaleVector(e)[0]}),n.circ.attr({rx:t.scaleVector(e)[0],ry:t.scaleVector(e)[1]})},n.remove=function(){n.centerPoint.remove(),n.circ.remove(),n.perim.remove()};const a=[[-1*Math.PI,-.875*Math.PI,"ew-resize"],[-.875*Math.PI,-.625*Math.PI,"nesw-resize"],[-.625*Math.PI,-.375*Math.PI,"ns-resize"],[-.375*Math.PI,-.125*Math.PI,"nwse-resize"],[-.125*Math.PI,.125*Math.PI,"ew-resize"],[.125*Math.PI,.375*Math.PI,"nesw-resize"],[.375*Math.PI,.625*Math.PI,"ns-resize"],[.625*Math.PI,.875*Math.PI,"nwse-resize"],[.875*Math.PI,1*Math.PI,"ew-resize"]];return p(n.perim.node).on("vmousemove",e=>{let[t,r]=this.getMouseCoord(e);t-=n.center[0],r-=n.center[1];const i=Math.atan2(r,t);a.forEach(function(e){const[t,r,s]=e;i>=t&&i<r&&p(n.perim.node).css("cursor",s)})}),p(n.perim.node).css("cursor","nesw-resize"),n.perim.node.addEventListener("touchstart",function(e){e.preventDefault()},{passive:!1}),p(n.perim.node).on("vmouseover vmouseout vmousedown",function(e){if("vmouseover"===e.type)n.highlight=!0,zf||(n.circ.animate(n.circleHighlightStyle,50),n.centerPoint.visibleShape.animate(n.centerHighlightStyle,50));else if("vmouseout"===e.type)n.highlight=!1,n.dragging||n.centerPoint.dragging||(n.circ.animate(n.circleNormalStyle,50),n.centerPoint.visibleShape.animate(n.centerNormalStyle,50));else if("vmousedown"===e.type&&(1===e.which||0===e.which)){e.preventDefault(),n.toFront();const i=n.radius;p(document).on("vmousemove vmouseup",function(e){if(e.preventDefault(),n.dragging=!0,zf=!0,"vmousemove"===e.type){const i=t.constrainToBounds(t.getMouseCoord(e),10);let s=Ef.getDistance(n.centerPoint.coord,i);s=Math.max(n.minRadius,Math.round(s/n.snapRadius)*n.snapRadius);const a=n.radius;let o=!0;if(n.onResize){const e=n.onResize(s,a);r.isNumber(e)?s=e:!1===e&&(o=!1)}o&&(n.setRadius(s),p(n).trigger("move"))}else"vmouseup"===e.type&&(p(document).off("vmousemove vmouseup"),n.dragging=!1,zf=!1,n.onResizeEnd&&n.onResizeEnd(n.radius,i))})}}),n},addRotateHandle:function(){return function(e){const t=this;let n=e.center;const i=e.radius,s=e.lengthAngle||30,a=e.hideArrow||!1,o=e.mouseTarget,l=r.uniqueId("rotateHandle");r.isArray(n)&&(n={coord:n});const c=t.addMovablePoint({coord:Np.addVector(n.coord,yp.cartFromPolarDeg(i,e.angleDeg||0)),constraints:{fixedDistance:{dist:i,point:n}},mouseTarget:o});n.toFront();let d,u=n.coord,h=c.coord,f=h,m=!1,g=!1;const b=function(r){if(a)return;const i=yp.subtract(r,n.coord),o=yp.polarDegFromCart(i)[1];d&&d.remove(),d=function(e,t,n,r,i,s,a){const o=function(r,i){const a=n+i,o=yp.cartFromPolarDeg(a,s+r),l=yp.add(t,o),c=e.scalePoint(l);return c[0]+","+c[1]},l=e.scaleVector(n-r),c=e.scaleVector(n+r);return e.raphael.path(" M"+o(i,-r)+" L"+o(i,-3*r)+" L"+o(2*i,0)+" L"+o(i,3*r)+" L"+o(i,r)+" A"+c[0]+","+c[1]+",0,0,1,"+o(-i,r)+" L"+o(-i,3*r)+" L"+o(-2*i,0)+" L"+o(-i,-3*r)+" L"+o(-i,-r)+" A"+l[0]+","+l[1]+",0,0,0,"+o(i,-r)+" Z").attr({stroke:null,fill:a?uf.INTERACTING:uf.INTERACTIVE})}(t,n.coord,e.radius,m||g?e.hoverWidth/2:e.width/2,s,o,m||g)};p(n).on("move."+l,function(){const e=yp.subtract(n.coord,u);c.setCoord(yp.add(c.coord,e)),b(c.coord),u=n.coord,c.constraints.fixedDistance.point=n,h=c.coord}),c.onMove=function(t,r){m||(f=h,m=!0);let i=[t,r];if(e.onMove){const t=yp.polarDegFromCart(yp.subtract(h,n.coord)),r=yp.polarDegFromCart(yp.subtract(i,n.coord)),s=t[1],a=r[1];let o=e.onMove(a,s);null!=o&&!0!==o&&(!1===o&&(o=s),i=yp.add(n.coord,yp.cartFromPolarDeg(t[0],o)))}return b(i),h=i,i},c.onMoveEnd=function(){if(m=!1,b(c.coord),e.onMoveEnd){const t=yp.polarDegFromCart(yp.subtract(f,n.coord)),r=yp.polarDegFromCart(yp.subtract(c.coord,n.coord));e.onMoveEnd(r[1],t[1])}},c.visibleShape.remove(),o||c.mouseTarget.attr({scale:2});const U=p(c.mouseTarget.getMouseTarget());U.bind("vmouseover",function(e){g=!0,b(c.coord)}),U.bind("vmouseout",function(e){g=!1,b(c.coord)}),b(c.coord);const y=c.remove;return c.remove=function(){y.call(c),d&&d.remove(),p(n).off("move."+l)},c.update=function(){b(c.coord)},c}}(),addReflectButton:function(){return function(e){const t=this,n=e.line,i=t.addMovablePoint({constraints:e.constraints,coord:Dp.midpoint([n.pointA.coord,n.pointZ.coord]),snapX:t.snap[0],snapY:t.snap[1],onMove:function(e,t){return!1},onMoveEnd:function(t,n){e.onMoveEnd&&e.onMoveEnd.call(this,t,n)}});let s,a=!1,o=!1;const l=function(){return a},c=r.map([0,1],function(t){const n=t?e.highlightStyle:e.normalStyle;return r.map([0,1],function(e){return r.defaults({"fill-opacity":e},n)})}),d=function(e){return o&&(e=!e),c[+l()][+e]},u=function(n,r){s&&s.remove(),s=function(e,t,n,r,i,s,a){Np.equal(n[0],n[1])&&(n=[n[0],Np.addVector(n[0],[1,1])]);const o=yp.normalize(yp.subtract(n[1],n[0])),l=yp.scale(o,r/2),c=yp.scale(o,i),d=yp.rotateDeg(c,90),u=yp.rotateDeg(c,-90),h=yp.negate(l),p=yp.rotateDeg(l,90),f=yp.rotateDeg(l,-90),m=Np.addVectors(t,d),g=Np.addVectors(t,u),b=Np.addVectors(t,d,l,p),U=Np.addVectors(t,d,h,p),y=Np.addVectors(t,u,l,f),x=Np.addVectors(t,u,h,f),v=e.path([m,b,U,!0],s),w=e.path([g,y,x,!0],a);return{remove:function(){v.remove(),w.remove()}}}(t,n,r,l()?1.5*e.size:e.size,l()?.125*e.size:.25,d(0),d(1))},h=function(e,t){e=e||n.pointA.coord,t=t||n.pointZ.coord;const r=Dp.midpoint([e,t]);i.setCoord(r),u(r,[e,t])};p(n).on("move",r.bind(h,i,null,null));const f=p(i.mouseTarget.getMouseTarget());f.on("vclick",function(){!1!==e.onClick()&&(o=!o,u(i.coord,[n.pointA.coord,n.pointZ.coord]))}),n.pointA.toFront(),n.pointZ.toFront(),i.visibleShape.remove();const m=t.scaleVector(e.size)[0]/20;i.mouseTarget.attr({scale:1.5*m}),f.css("cursor","pointer"),f.bind("vmouseover",function(e){a=!0,u(i.coord,[n.pointA.coord,n.pointZ.coord])}),f.bind("vmouseout",function(e){a=!1,u(i.coord,[n.pointA.coord,n.pointZ.coord])});const g=i.remove;return i.remove=function(){s.remove(),g.call(i)},i.update=h,i.isFlipped=function(){return o},h(),i}}(),protractor:function(e){return new Hf(this,e)},ruler:function(e){return new $f(this,e||{})},addPoints:yp.add}),r.extend(Wf.prototype,{points:[],snapDegrees:0,snapOffsetDeg:0,angleLabel:"",numArcs:1,pushOut:0,fixed:!1,addMoveHandlers:function(){const e=this.graphie;function t(t,n){return Ef.getDistance(e.scalePoint(t),e.scalePoint(n))<30}const n=this.points;n[1].onMove=function(i,s){const a=n[1].coord,o=[i,s],l=yp.add(o,Df(a));let c=!0;const d={};return r.each([0,2],function(r){const i=n[r].coord;let s=yp.add(i,l),a=Ef.findAngleDeprecated(o,s);a*=Math.PI/180,s=e.constrainToBoundsOnAngle(s,10,a),d[r]=s,t(o,s)&&(c=!1)}),c&&r.each(d,function(e,t){n[t].setCoord(e)}),c};const i=this.snapDegrees,s=this.snapOffsetDeg;r.each([0,2],function(e){n[e].onMove=function(e,r){const a=[e,r],o=n[1].coord;if(t(o,a))return!1;if(i){let e=Ef.findAngleDeprecated(a,o);e=Math.round((e-s)/i)*i+s;const t=Ef.getDistance(a,o);return yp.add(o,Uf(t,e))}return!0}}),p(n).on("move",function(){this.update(),p(this).trigger("move")}.bind(this))},addHighlightHandlers:function(){const e=this.points[1];e.onHighlight=function(){r.each(this.points,function(e){e.visibleShape.animate(this.highlightStyle,50)},this),r.each(this.rays,function(e){e.visibleLine.animate(this.highlightStyle,50),e.arrowStyle=r.extend({},e.arrowStyle,{color:this.highlightStyle.stroke,stroke:this.highlightStyle.stroke})},this),this.angleStyle=r.extend({},this.angleStyle,{color:this.highlightStyle.stroke,stroke:this.highlightStyle.stroke}),this.update()}.bind(this),e.onUnhighlight=function(){r.each(this.points,function(e){e.visibleShape.animate(this.normalStyle,50)},this),r.each(this.rays,function(e){e.visibleLine.animate(e.normalStyle,50),e.arrowStyle=r.extend({},e.arrowStyle,{color:e.normalStyle.stroke,stroke:e.normalStyle.stroke})},this),this.angleStyle=r.extend({},this.angleStyle,{color:uf.DYNAMIC,stroke:uf.DYNAMIC}),this.update()}.bind(this)},_getClockwiseAngle:function(e){return Ef.findAngleDeprecated(e[2],e[0],e[1])+0},isReflex:function(){return this.reflex},isClockwise:function(){return this._getClockwiseAngle(this.coords)>180===this.reflex},getClockwiseCoords:function(){return this.isClockwise()?r.clone(this.coords):r.clone(this.coords).reverse()},update:function(e){const t=this.coords;this.coords=r.pluck(this.points,"coord"),r.invoke(this.points,"updateLineEnds");const n=this._getClockwiseAngle(t),i=this._getClockwiseAngle(this.coords),s=n>180,a=i>180;this.allowReflex&&(null==e&&(e=s!==a&&Math.abs(i-n)<180),e&&(this.reflex=!this.reflex)),r.invoke(this.temp,"remove"),this.temp=this.graphie.labelAngle({point1:this.coords[0],vertex:this.coords[1],point3:this.coords[2],label:this.labeledAngle,text:this.angleLabel,numArcs:this.numArcs,pushOut:this.pushOut,clockwise:this.reflex===a,style:this.angleStyle})},remove:function(){r.invoke(this.rays,"remove"),r.invoke(this.temp,"remove"),this.labeledAngle.remove()}});const Xf=nh.nestedMap;function Vf(e){r.extend(this,e)}const Gf=function(){throw new u("Abstract method! Must be implemented by Graphie Movable"+this.constructor.displayName,h.NotAllowed)};r.extend(Vf.prototype,{movableProps:[],add:Gf,modify:Gf,remove:Gf,toFront:function(){},componentDidMount:function(){}});const Yf=function(e){const t=function(e){if(!(this instanceof t))throw new u("Use createElement or JSX with graphie movables",h.NotAllowed);return this.props=function(e,t){return r.extend({},e,{children:r.filter(r.flatten(t),r.identity)})}(e,e.children||[]),this};return e.displayName=e.displayName||r.uniqueId("GraphieClass"),t.displayName=e.displayName,t.prototype=new Vf(e),t.prototype.constructor=t,t},qf={GraphieMovable:Vf,createClass:Yf,createSimpleClass:function(e){return Yf({displayName:e.name||r.uniqueId("GraphieSimpleClass"),movableProps:["children"],add:function(t){this._elements=e(t,this.props),this._prevProps=this.props},modify:function(e){if(!g(this.props,this._prevProps))return this.remove(),this.add(e),this._prevProps=this.props,"reordered"},remove:function(){Xf(this._elements,e=>{e&&e.remove()}),this._elements=null,this._prevProps=null},toFront:function(){Xf(this._elements,e=>{r.isFunction(e.toFront)&&e.toFront()})}})}},Zf=af.normalizeOptions,Kf=af.assert,Qf={cursor:null},Jf={added:!1,isHovering:!1,isMouseOver:!1,isDragging:!1,mouseTarget:null};class em{graphie;state;prevState;_listenerMap={};constructor(e,t){this.graphie=e,this.state={id:r.uniqueId("movable")},this.modify({...Jf,...t})}modify(e){this.update({...this._createDefaultState(),...e})}_createDefaultState(){return{id:this.state.id,add:[],modify:[],draw:[],remove:[],onMoveStart:[],onMove:[],onMoveEnd:[],onClick:[],...Qf}}update(e){const t=this.graphie,n=this.cloneState(),r=Object.assign(this.state,Zf(e));if(r.mouseTarget&&!n.mouseTarget){let e;e=r.mouseTarget.getMouseTarget?p(r.mouseTarget.getMouseTarget()):p(r.mouseTarget[0]);!("ontouchstart"in window)&&(e.on("vmouseover",()=>{r.isMouseOver=!0,t.isDragging||(r.isHovering=!0),this.state.added&&this.draw()}),e.on("vmouseout",()=>{r.isMouseOver=!1,r.isDragging||(r.isHovering=!1),this.state.added&&this.draw()})),e[0].addEventListener("touchstart",function(e){e.preventDefault()},{passive:!1}),e.on("vmousedown",e=>{if(0!==e.which&&1!==e.which)return;e.preventDefault();const n=t.getMouseCoord(e);this.grab(n)})}if(r.mouseTarget&&void 0!==r.cursor){let e;e=r.mouseTarget.getMouseTarget?p(r.mouseTarget.getMouseTarget()):p(r.mouseTarget[0]),e.css("cursor",r.cursor||"")}r.added||(this._fireEvent(r.modify,this.cloneState(),{}),r.added=!0,this.prevState=this.cloneState()),this._fireEvent(r.modify,this.cloneState(),this.prevState)}cloneState(){return{...this.state}}_fireEvent(e,...t){if(null!=e)for(const n of e)n.call(this,...t)}draw(){const e=this.cloneState();this._fireEvent(this.state.draw,e,this.prevState),this.prevState=e}grab(e){Kf(Np.is(e));const t=this.graphie,n=this.state;n.isHovering=!0,n.isDragging=!0,t.isDragging=!0;const r=e;let i=r;this._fireEvent(n.onMoveStart,r,r);const s=e=>{e.preventDefault();const r=t.getMouseCoord(e);this._fireEvent(n.onMove,r,i),this.draw(),i=r},a=()=>{p(document).unbind("vmousemove",s),p(document).unbind("vmouseup",a),n.isHovering&&this._fireEvent(n.onClick,i,r),n.isHovering=this.state.isMouseOver,n.isDragging=!1,t.isDragging=!1,this._fireEvent(n.onMoveEnd,i,r),this.draw()};p(document).bind("vmousemove",s),p(document).bind("vmouseup",a)}_applyConstraints(e,t,n){let r=!1;return(this.state.constraints??[]).reduce((e,i)=>{if(!1===e)return!1;if(r)return e;const s=i.call(this,e,t,{onSkipRemaining:()=>{r=!0},...n});if(!1===s)return!1;if(Np.is(s,2))return s;if(!0===s||null==s)return e;throw new u("Constraint returned invalid result: "+s,h.Internal)},e)}toBack(){this.state.mouseTarget&&this.state.mouseTarget.toBack()}toFront(){this.state.mouseTarget&&this.state.mouseTarget.toFront()}listen(e,t,n){this._listenerMap=this._listenerMap||{};const r=tm(e,t),i=this._listenerMap[r]=this._listenerMap[r]||this.state[e].length;this.state[e][i]=n}unlisten(e,t){this._listenerMap=this._listenerMap||{};const n=tm(e,t),i=this._listenerMap[n];if(void 0!==i){this.state[e].splice(i,1),delete this._listenerMap[n];r.keys(this._listenerMap).forEach(t=>{(function(e){return e.split(":")[0]})(t)===e&&this._listenerMap[t]>i&&this._listenerMap[t]--})}}remove(){this.state.added=!1,this._fireEvent(this.state.remove),this.state.mouseTarget&&(p(this.state.mouseTarget).off(),this.state.mouseTarget.remove(),this.state.mouseTarget=null)}cursor(){return this.state.cursor}added(){return this.state.added}isHovering(){return this.state.isHovering}isMouseOver(){return this.state.isMouseOver}isDragging(){return this.state.isDragging}mouseTarget(){return this.state.mouseTarget}}function tm(e,t){return e+":"+t}const nm=function(e){const t=e.graphie.scalePoint(e.coord(0)),n=e.graphie.scalePoint(e.coord(1));return yp.polarDegFromCart(yp.subtract(n,t))[1]},rm={draw:function(){this.draw()},pointsToFront:function(e){r.invoke(e.points,"toFront")}};rm.standard=[rm.draw,rm.pointsToFront];const im={draw:function(){this.draw()}};im.standard=[im.draw];const sm={basic:function(e){const t=this.graphie;let n=this.coord(0),i=this.coord(1);if(!this.state.visibleShape){const e={thickness:10};this.state.visibleShape=new Af(t,n,i,e),this.state.visibleShape.attr(this.normalStyle()),this.state.visibleShape.toFront(),this.mouseTarget()&&this.mouseTarget().toFront()}const s=nm(this);e.extendLine?(n=kf(t,n,360-s),i=kf(t,i,(540-s)%360)):e.extendRay&&(i=kf(t,i,360-s));const a=[this.state.visibleShape];this.mouseTarget()&&a.push(this.mouseTarget()),r.each(a,function(e){e.moveTo(n,i)})},arrows:function(e){null==this._arrows&&(this._arrows=[],e.extendLine?(this._arrows.push(new If(this.graphie,this.normalStyle())),this._arrows.push(new If(this.graphie,this.normalStyle()))):e.extendRay&&this._arrows.push(new If(this.graphie,this.normalStyle())));const t=nm(this),n=[360-t,(540-t)%360];r.each(this._arrows,function(e,t){e.toCoordAtAngle(this.coord(t),n[t])},this)},highlight:function(e,t){e.isHovering&&!t.isHovering?e.visibleShape.animate(e.highlightStyle,50):!e.isHovering&&t.isHovering&&e.visibleShape.animate(e.normalStyle,50)}};sm.standard=[sm.basic,sm.arrows,sm.highlight];const am={basic:function(){this.state.visibleShape&&this.state.visibleShape.remove()},arrows:function(){null!=this._arrows&&r.invoke(this._arrows,"remove"),this._arrows=null}};am.standard=[am.basic,am.arrows];const om={fixed:function(){return function(){return!1}},snap:function(e){return function(t,n){if(null===e)return!0;let r=yp.subtract(t,n);return e=e||this.graphie.snap,r=Np.roundTo(r,e),yp.add(n,r)}},bound:function(e,t,n){return void 0===n&&(n=void 0===e?10:0),function(i,s){const a=this.graphie,o=yp.subtract(i,s);e=e||a.range,void 0===t&&(t=a.snap);let l=a.unscalePoint([n,a.ypixels-n]),c=a.unscalePoint([a.xpixels-n,n]);t&&(l=Np.ceilTo(l,t),c=Np.floorTo(c,t));const d=r.map(this.coords(),function(e,t){const n=yp.subtract(c,e);return[yp.subtract(l,e),n]}),u=r.reduce(d,function(e,t){const n=t[0],r=t[1];return[Math.max(n[0],Math.min(r[0],e[0])),Math.max(n[1],Math.min(r[1],e[1]))]},o);return yp.add(s,u)}},standard:null},lm={updatePoints:function(e,t){const n=yp.subtract(e,t);r.each(this.state.points,function(e){e.setCoord(yp.add(e.coord(),n))})},standard:null},cm={add:rm,modify:im,draw:sm,remove:am,onMoveStart:{standard:null},constraints:om,onMove:lm,onMoveEnd:{standard:null}},dm=af.assert,um=af.normalizeOptions,hm={points:null,static:!1,cursor:"move",normalStyle:null,highlightStyle:null,extendLine:!1,extendRay:!1},pm={visibleShape:null,mouseTarget:null},fm=function(e,t,n){dm(null!=e),dm(null!=n),r.extend(this,{graphie:e,movable:t,state:{id:r.uniqueId("movableLine")}}),this.modify(r.extend({},pm,n))};r.extend(fm,cm),af.createGettersFor(fm,r.extend({},hm,pm)),af.addMovableHelperMethodsTo(fm),r.extend(fm.prototype,{cloneState:function(){return r.extend(this.movable.cloneState(),{coords:this.coords()},this.state)},_createDefaultState:function(){return r.extend({id:this.state.id},um(v(cm,"standard")),hm)},modify:function(e){this.update(r.extend(this._createDefaultState(),e))},update:function(e){const t=this,n=this.graphie,i=t.state=r.extend(t.state,um(e)),s=i.static?uf.DYNAMIC:uf.INTERACTIVE;if(i.normalStyle=r.extend({stroke:s,"stroke-width":2},i.normalStyle),i.highlightStyle=r.extend({stroke:uf.INTERACTING,"stroke-width":3},i.highlightStyle),!i.static&&!i.mouseTarget){const e={thickness:30,mouselayer:!0,interactiveKindForTesting:"movable-line"};i.mouseTarget=new Af(n,this.coord(0),this.coord(1),e),i.mouseTarget.attr({fill:"#000",opacity:0})}i.static&&i.mouseTarget&&(i.mouseTarget.remove(),i.mouseTarget=null),t.movable.modify(r.extend({},i,{mouseTarget:i.mouseTarget,add:null,modify:null,draw:t.draw.bind(t),remove:null,onMoveStart:function(){t._initialRefCoord=t.coord(0),t._prevRefCoord=t._initialRefCoord,t._totalDelta=[0,0],t._fireEvent(t.state.onMoveStart,t.coord(0),t.coord(0))},onMove:function(e,n){const r=yp.subtract(e,n);t._totalDelta=yp.add(t._totalDelta,r);let i=yp.add(t._initialRefCoord,t._totalDelta);i=t._applyConstraints(i,t._prevRefCoord),!1!==i&&(t._fireEvent(t.state.onMove,i,t._prevRefCoord),t._prevRefCoord=i)},onMoveEnd:function(){t._fireEvent(t.state.onMoveEnd,t._prevRefCoord,t._initialRefCoord)}})),i.added||(t.prevState={},t._fireEvent(i.add,t.cloneState(),t.prevState),i.added=!0,r.invoke(i.points,"listen","onMove",i.id,t.draw.bind(t)),t.prevState=t.cloneState()),t._fireEvent(i.modify,t.cloneState(),t.prevState)},coords:function(){return r.invoke(this.state.points,"coord")},point:function(e){return this.state.points[e]},coord:function(e){return this.point(e).coord()},remove:function(){this.state.added=!1,this._fireEvent(this.state.remove),this.points&&r.invoke(this.points,"unlisten","onMove",this.state.id),this.movable&&this.movable.remove()},toBack:function(){this.movable.toBack(),this.state.visibleShape&&this.state.visibleShape.toBack()},toFront:function(){this.state.visibleShape&&this.state.visibleShape.toFront(),this.movable.toFront()},isHovering:function(){return this.movable.isHovering()},isDragging:function(){return this.movable.isDragging()},mouseTarget:function(){return this.movable.mouseTarget()}});const mm=({path:t,width:n,height:r,style:i={},title:s})=>e.jsxs("svg",{role:"img","aria-hidden":!s,style:{verticalAlign:"middle",...i},width:n/r+"em",height:"1em",viewBox:`0 0 ${n} ${r}`,children:[!!s&&e.jsx("title",{children:s}),e.jsx("path",{d:t,fill:"currentColor"})]}),gm={path:"M8.70710678,12.2928932 C8.31658249,11.9023689 7.68341751,11.9023689 7.29289322,12.2928932 C6.90236893,12.6834175 6.90236893,13.3165825 7.29289322,13.7071068 L9.82842712,16.2426407 C10.2207367,16.6349502 10.8574274,16.6328935 11.2471942,16.2380576 L16.7116603,10.7025237 C17.0996535,10.3094846 17.0955629,9.67633279 16.7025237,9.28833966 C16.3094846,8.90034653 15.6763328,8.90443714 15.2883397,9.29747629 L10.5309507,14.1167372 L8.70710678,12.2928932 Z",width:24,height:24},bm={path:"M99.669 13.048q0 3.36-2.352 5.712l-41.664 41.664q-2.408 2.408-5.88 2.408t-5.712-2.408l-41.664-41.664q-2.408-2.24-2.408-5.712t2.408-5.88l4.76-4.816q2.52-2.352 5.88-2.352t5.656 2.352l31.136 31.136 31.08-31.136q2.352-2.352 5.712-2.352t5.88 2.352l4.816 4.816q2.352 2.52 2.352 5.88z",width:100,height:63.034},Um={path:"M100.035 50.046q.057 13.623-6.669 25.137t-18.24 18.183-25.08 6.669-25.137-6.726q-11.514-6.726-18.183-18.183-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.669 25.137z",width:100,height:100},ym={path:"M50.046 8.322q-8.493 0-16.188 3.306-15.561 6.669-22.173 22.23-3.363 7.695-3.363 16.188t3.306 16.188 8.949 13.281q5.586 5.586 13.281 8.892t16.188 3.306 16.188-3.306 13.281-8.892 8.892-13.281 3.306-16.188-3.306-16.188-8.892-13.281-13.281-8.949q-7.695-3.306-16.188-3.306zm0 91.713q-13.623 0-25.137-6.726t-18.183-18.183q-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.726 25.137-6.726 25.137-18.24 18.126q-11.514 6.726-25.08 6.726z",width:100,height:99.944},xm={path:"M37.964 76.048q-2.576 0-4.368-1.792l-31.864-31.864q-1.792-1.792-1.792-4.368t1.792-4.368l8.736-8.68q1.792-1.792 4.368-1.792t4.312 1.792l18.816 18.872 42-42.056q1.792-1.792 4.368-1.792t4.312 1.792l8.736 8.736q1.792 1.792 1.792 4.368t-1.792 4.312l-55.048 55.048q-1.792 1.792-4.368 1.792z",width:100,height:76.637},vm={path:"M100.464 80.808q0 3.404-2.368 5.772l-11.47 11.544q-2.368 2.368-5.772 2.368t-5.698-2.368l-24.864-24.864-24.864 24.864q-2.368 2.368-5.772 2.368t-5.772-2.368l-11.47-11.544q-2.368-2.368-2.368-5.772t2.368-5.698l24.864-24.864-24.864-24.864q-2.368-2.368-2.368-5.772t2.368-5.772l11.47-11.47q2.368-2.368 5.772-2.368t5.772 2.368l24.864 24.864 24.864-24.864q2.294-2.368 5.698-2.368t5.772 2.368l11.47 11.47q2.368 2.368 2.368 5.772t-2.368 5.772l-24.864 24.864 24.864 24.864q2.368 2.294 2.368 5.698z",width:100,height:100},wm={path:"M15.1052249,9.55978547 L22.0028147,9.55978545 C23.6568673,9.55978545 23.9349557,10.3753626 22.6181351,11.3858845 L16.9943688,15.7015366 L19.2518801,22.8294455 C19.7526645,24.4106317 19.0984455,24.8825885 17.769353,23.8673293 L12.0490577,19.4977438 L6.5116497,23.8422153 C5.20921411,24.8640642 4.53299569,24.4067544 5.00266927,22.8160582 L7.10332364,15.7015366 L1.42794544,11.3634306 C0.110226041,10.3562014 0.383967283,9.54239221 2.0409646,9.54574013 L8.9924676,9.55978547 L11.1485117,2.72669438 C11.6458693,1.15043244 12.4548928,1.15900049 12.9494787,2.72669438 L15.1052249,9.55978547 Z",width:24,height:24},Sm={path:"M3.74890556,17.9799506 C2.19251241,16.1970909 1.10103636,13.4971457 1.13090903,11.1491783 C1.17160478,7.95052637 4.01704076,0.865059407 11.7028044,0.865059407 C19.388568,0.865059407 22.3026521,7.35203035 22.3026521,11.5879453 C22.3026521,15.8238603 19.386629,20.5574509 13.6832464,21.7131548 L13.6757539,17.3722171 C17.0812986,16.2190517 18.331158,14.1944123 18.3311578,11.5879451 C18.3311574,8.16554692 15.6664205,5.03476549 11.7028048,5.20494205 C7.73918903,5.37511861 5.59244567,8.66930079 5.59244567,11.1491783 C5.59244567,12.9090077 6.11128139,14.1753512 6.93640437,15.3053215 L8.14052356,14.2949456 C8.98559348,13.5858477 9.6994861,13.9070448 9.73489556,15.0076413 L9.91284941,20.5388014 C9.94832683,21.6415103 9.09967118,22.3514475 8.02194403,22.1254594 L2.60571602,20.9897332 C1.5259204,20.7633114 1.34338662,19.9984207 2.18070755,19.295825 L3.74890556,17.9799506 Z",width:23,height:23},Em={path:"M31.293 37.506q2.052 0 2.052 2.109l0 37.506q0 1.995-2.052 2.109l-4.218 0q-.912-.057-1.482-.627t-.57-1.482l0-37.506q0-2.109 2.052-2.109l4.218 0zm18.753 2.109l0 37.506q0 .912-.57 1.482t-1.539.627l-4.161 0q-1.995 0-2.109-2.109l0-37.506q.057-.912.627-1.482t1.482-.627l4.161 0q.969.057 1.539.627t.57 1.482zm14.592-2.109q2.052 0 2.052 2.109l0 37.506q0 1.995-2.052 2.109l-4.161 0q-.969-.057-1.539-.627t-.57-1.482l0-37.506q0-2.109 2.109-2.109l4.161 0zm10.431 49.248l0-61.731l-58.368 0l0 61.731q.057 2.679.969 3.819t1.083 1.14l54.207 0q.171 0 1.14-1.083t.969-3.876zm-43.776-70.11l29.184 0l-3.135-7.581q-.456-.57-1.14-.741l-20.634 0q-.627.114-1.083.741zm-31.293 2.109q0-1.995 2.109-2.109l20.121 0l4.56-10.83q.969-2.394 3.477-4.104 2.565-1.71 5.187-1.71l20.805 0q2.622 0 5.187 1.71t3.477 4.104l4.56 10.83l20.178 0q.912.057 1.482.627t.57 1.482l0 4.161q0 1.995-2.052 2.109l-6.27 0l0 61.731q0 5.415-3.078 9.348t-7.353 3.933l-54.207 0q-4.275 0-7.353-3.819t-3.078-9.177l0-62.016l-6.213 0q-.969 0-1.539-.57t-.57-1.539l0-4.161z",width:91.681,height:100},km={path:"M8,13 L16,13 C16.5522847,13 17,12.5522847 17,12 C17,11.4477153 16.5522847,11 16,11 L8,11 C7.44771525,11 7,11.4477153 7,12 C7,12.5522847 7.44771525,13 8,13 Z",width:24,height:24},Cm={constrain:function(){this.constrain()}};Cm.standard=[Cm.constrain];const _m={draw:function(){this.draw()}};_m.standard=[_m.draw];const Mm={basic:function(e,t){const n=this.graphie;if(!this.state.visibleShape){const t=[this.pointSize()/n.scale[0],this.pointSize()/n.scale[1]],i={maxScale:Math.max(this.highlightStyle().scale,this.normalStyle().scale),padding:10,shadow:e.shadow};this.state.visibleShape=new Rf(n,this.coord(),t,i),this.state.visibleShape.attr(r.omit(this.normalStyle(),"scale")),this.state.visibleShape.toFront(),this.mouseTarget()&&this.mouseTarget().toFront()}e.normalStyle===t.normalStyle||r.isEqual(e.normalStyle,t.normalStyle)||this.state.visibleShape.attr(this.normalStyle()),this.state.visibleShape.moveTo(this.coord()),this.mouseTarget()&&this.mouseTarget().moveTo(this.coord())},highlight:function(e,t){e.isHovering&&!t.isHovering?e.visibleShape.animate(this.highlightStyle(),50):!e.isHovering&&t.isHovering&&e.visibleShape.animate(this.normalStyle(),50)}};Mm.standard=[Mm.basic,Mm.highlight];const Im={basic:function(){this.state.visibleShape&&(this.state.visibleShape.remove(),this.state.visibleShape=null)}};Im.standard=Im.basic;const jm={fixed:function(){return function(){return!1}},snap:function(e){return function(t){return null===e||Np.roundTo(t,e||this.graphie.snap)}},bound:function(e,t,n){const r=void 0===n?void 0===e?10:0:n;return function(n,i,s){const a=this.graphie;e=e||a.range,void 0===t&&(t=a.snap);let o=a.unscalePoint([r,a.ypixels-r]),l=a.unscalePoint([a.xpixels-r,r]);if(t&&(o=Np.ceilTo(o,t),l=Np.floorTo(l,t)),s&&s.onOutOfBounds)return(n[0]>l[0]||n[0]<o[0]||n[1]>l[1]||n[1]<o[1])&&(s.onSkipRemaining(),s.onOutOfBounds()),n;return[Math.max(o[0],Math.min(l[0],n[0])),Math.max(o[1],Math.min(l[1],n[1]))]}},standard:null},Tm={add:Cm,modify:_m,draw:Mm,remove:Im,onMoveStart:{standard:null},constraints:jm,onMove:{standard:null},onMoveEnd:{standard:null},onClick:{standard:null}},Rm=af.assert,Pm=af.normalizeOptions,{processMath:Am}=gf,Nm={coord:[0,0],pointSize:4,static:!1,cursor:"move",normalStyle:null,highlightStyle:null,shadow:!1,tooltip:!1},Dm={added:!1,hasMoved:!1,visibleShape:null,outOfBounds:!1,mouseTarget:null,touchOffset:null},Lm=[];let Om=class{graphie;movable;state;prevState;_tooltip;_listenerMap={};constructor(e,t,n){this.graphie=e,this.movable=t,this.state={id:r.uniqueId("movablePoint")},this.modify({...Dm,...n})}modify(e){this.update(r.extend(this._createDefaultState(),e))}_createDefaultState(){return{id:this.state.id,...Pm(v(Tm,"standard")),...Nm}}cloneState(){return{...this.movable.cloneState(),...this.state}}update(t){const n=this,i=n.graphie,s=r.extend(n.state,Pm(t));Rm(Np.is(s.coord));const a=s.static?uf.DYNAMIC:uf.INTERACTIVE;if(s.normalStyle=r.extend({fill:a,stroke:a,scale:1},s.normalStyle),s.highlightStyle=r.extend({fill:uf.INTERACTING,stroke:uf.INTERACTING,scale:2},s.highlightStyle),!s.static&&!s.mouseTarget){const e=n.state.coord,t=i.unscaleVector(24),r={mouselayer:!0,padding:0,interactiveKindForTesting:"movable-point"};s.mouseTarget=new Rf(i,e,t,r),s.mouseTarget.attr({fill:"#000",opacity:0})}const o=()=>{this._showTooltip(t=>{mf(e.jsx("span",{style:{fontSize:"2em"},children:e.jsx(mm,{...Em,style:{position:"static",color:uf.INTERACTIVE,marginLeft:9,marginRight:9}})}),t)})};let l=s.coord;n.movable.modify(r.extend({},s,{add:null,modify:null,draw:n.draw.bind(n),remove:null,onMoveStart:e=>{if(s.hasMoved=!1,l=s.coord,null==s.touchOffset){const t=!("ontouchstart"in window);s.touchOffset=t?[0,0]:yp.subtract(l,e)}const t=s.visibleShape.wrapper;if(s.shadow){const e="none";t.style.filter=e}if(s.showHairlines&&s.showHairlines(s.coord),Lm.forEach(e=>e()),s.tooltip&&(s.xOnlyTooltip?this._showTooltip(`${s.coord[0]}`):this._showTooltip(`(${s.coord[0]}, ${s.coord[1]})`),s.shadow)){const e="drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.5))";t.getElementsByClassName("tooltip-content")[0].style.filter=e}n._fireEvent(s.onMoveStart,l,l),n.draw()},onMove:(e,t)=>{const r=yp.add(e,s.touchOffset);n.moveTo(r),s.showHairlines&&(this.state.outOfBounds?s.hideHairlines():s.showHairlines(s.coord)),s.tooltip&&(this.state.outOfBounds||(s.xOnlyTooltip?this._showTooltip(`${s.coord[0]}`):this._showTooltip(`(${s.coord[0]}, ${s.coord[1]})`))),s.onRemove&&this.state.outOfBounds&&o()},onMoveEnd:()=>{n.isHovering()&&!s.hasMoved&&n._fireEvent(s.onClick,s.coord,l);const e=s.visibleShape.wrapper;if(s.shadow){const t="drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.5))";e.style.filter=t}if(s.hideHairlines&&s.hideHairlines(),s.hasMoved)this._hideTooltip();else if(s.onRemove){o();e.getElementsByClassName("tooltip-content")[0].style.filter="none",this._tooltip.firstChild.addEventListener("touchstart",e=>{e.stopPropagation()},!0),this._tooltip.firstChild.addEventListener("touchend",e=>{s.onRemove(),e.stopPropagation()},!0)}else s.tooltip&&this._hideTooltip();s.outOfBounds&&s.onRemove(),n._fireEvent(s.onMoveEnd,s.coord,l),s.hasMoved=!1,s.touchOffset=null,n.draw()}})),s.added||(n.prevState={},n._fireEvent(s.add,n.cloneState(),n.prevState),s.added=!0,n.prevState=n.cloneState()),n._fireEvent(s.modify,n.cloneState(),n.prevState)}draw(){const e=this.cloneState();this._fireEvent(this.state.draw,e,this.prevState),this.prevState=e}constrain(){const e=this._applyConstraints(this.coord(),this.coord());return Np.is(e)&&this.setCoord(e),!1!==e}_fireEvent(e,...t){for(const n of e)n.call(this,...t)}_applyConstraints(e,t,n){let r=!1;return this.state.constraints.reduce((e,i)=>{if(!1===e)return!1;if(r)return e;const s=i.call(this,e,t,{onSkipRemaining:()=>{r=!0},...n});if(!1===s)return!1;if(Np.is(s,2))return s;if(!0===s||null==s)return e;throw new u("Constraint returned invalid result: "+s,h.Internal)},e)}_showTooltip(e){this._tooltip||(this._tooltip=document.createElement("div"),this._tooltip.className="tooltip-content",this.state.visibleShape.wrapper.className="tooltip",this.state.visibleShape.wrapper.appendChild(this._tooltip),Lm.push(()=>{this.state.added&&this._hideTooltip()})),this._tooltip.firstChild&&this._tooltip.removeChild(this._tooltip.firstChild),this.state.visibleShape.wrapper.className="tooltip visible",this._tooltip.appendChild(document.createElement("span")),"string"==typeof e?Am(this._tooltip.firstChild,e,!1):"function"==typeof e?e(this._tooltip.firstChild):this._tooltip.firstChild.appendChild(e)}_hideTooltip(){this._tooltip&&(this.state.visibleShape.wrapper.className="tooltip")}coord(){return this.state.coord}setCoord(e){Rm(Np.is(e,2)),this.state.coord=r.clone(e),this.draw()}setCoordConstrained(e){Rm(Np.is(e,2));const t=this._applyConstraints(e,this.coord());!1!==t&&(this.state.coord=r.clone(t),this.draw())}listen(e,t,n){this._listenerMap=this._listenerMap||{};const r=Fm(e,t),i=this._listenerMap[r]=this._listenerMap[r]||this.state[e].length;this.state[e][i]=n}unlisten(e,t){this._listenerMap=this._listenerMap||{};const n=Fm(e,t),i=this._listenerMap[n];if(void 0!==i){this.state[e].splice(i,1),delete this._listenerMap[n];const t=r.keys(this._listenerMap);r.each(t,t=>{(function(e){return e.split(":")[0]})(t)===e&&this._listenerMap[t]>i&&this._listenerMap[t]--},this)}}grab(e){this.state.touchOffset=[0,0],this.movable.grab(e),this.moveTo(e)}moveTo(e){const t=this.state;this.state.outOfBounds=!1;const n=this._applyConstraints(e,t.coord,t.onRemove?{onOutOfBounds:()=>{this.state.outOfBounds=!0},onSkipRemaining:()=>{}}:{onSkipRemaining:()=>{}});if(!1!==n&&(Np.is(n)&&(e=n),!Np.equal(e,t.coord))){const n=t.coord;t.coord=e,t.hasMoved=!0,this._fireEvent(t.onMove,t.coord,n),this.draw()}}remove(){this.state.added=!1,this._fireEvent(this.state.remove),this.movable&&this.movable.remove(),this.state.mouseTarget=null}pointSize(){return this.state.pointSize}static(){return this.state.static}cursor(){return this.state.cursor}normalStyle(){return this.state.normalStyle}highlightStyle(){return this.state.highlightStyle}shadow(){return this.state.shadow}tooltip(){return this.state.tooltip}added(){return this.state.added}hasMoved(){return this.state.hasMoved}visibleShape(){return this.state.visibleShape}outOfBounds(){return this.state.outOfBounds}mouseTarget(){return this.state.mouseTarget}touchOffset(){return this.state.touchOffset}isHovering(){return this.movable.isHovering()}isDragging(){return this.movable.isDragging()}toBack(){this.movable.toBack(),this.state.visibleShape&&this.state.visibleShape.toBack()}toFront(){this.state.visibleShape&&this.state.visibleShape.toFront(),this.movable.toFront()}static add=Tm.add;static modify=Tm.modify;static draw=Tm.draw;static remove=Tm.remove;static onMoveStart=Tm.onMoveStart;static constraints=Tm.constraints;static onMove=Tm.onMove;static onMoveEnd=Tm.onMoveEnd;static onClick=Tm.onClick};function Fm(e,t){return e+":"+t}function zm(e){const t=r.zip(e,e.slice(1).concat(e.slice(0,1))),n=r.map(t,function(e){const t=e[0],n=e[1];return(n[0]-t[0])*(n[1]+t[1])});return i=n,r.reduce(i,function(e,t){return e+t},0)>0;var i}const Bm={constrain:function(){this.constrain()},pointsToFront:function(e){r.invoke(e.points,"toFront")}};Bm.standard=[Bm.constrain,Bm.pointsToFront];const Hm={draw:function(){this.draw()}};Hm.standard=[Hm.draw];const $m={basic:function(e,t){const n=this.graphie,i=this.path(e);this.state.visibleShape||(this.state.visibleShape=n.raphael.path(i),this.state.visibleShape.attr(this.normalStyle())),e.normalStyle===t.normalStyle||r.isEqual(e.normalStyle,t.normalStyle)||this.state.visibleShape.attr(this.normalStyle()),this.state.visibleShape.attr({path:i}),this.mouseTarget()&&this.mouseTarget().attr({path:i})},labels:function(e,t){const n=this.graphie,i=this,s=r.invoke(e.points,"coord"),a=zm(s),o=s.length;null!=i.state._labelCache&&r.invoke(i.state._labelCache,"remove"),i.state._labelCache=[],(e.angleLabels.length||e.showRightAngleMarkers.length)&&(null==i.state._labeledAngles&&(i.state._labeledAngles=r.times(Math.max(e.angleLabels.length,e.showRightAngleMarkers.length),function(){return n.label([0,0],"","center",e.labelStyle)})),r.each(i.state._labeledAngles,function(t,r){i.state._labelCache.push(n.labelAngle({point1:s[(r-1+o)%o],vertex:s[r],point3:s[(r+1)%o],label:t,text:e.angleLabels[r],showRightAngleMarker:e.showRightAngleMarkers[r],numArcs:e.numArcs[r],clockwise:a,style:e.labelStyle}))})),e.sideLabels.length&&(null==i.state._labeledSides&&(i.state._labeledSides=r.map(e.sideLabels,function(t){return n.label([0,0],"","center",e.labelStyle)})),r.each(i.state._labeledSides,function(t,r){i.state._labelCache.push(n.labelSide({point1:s[r],point2:s[(r+1)%o],label:t,text:e.sideLabels[r],numArrows:e.numArrows[r],numTicks:e.numTicks[r],clockwise:a,style:e.labelStyle}))})),e.vertexLabels.length&&(null==i.state._labeledVertices&&(i.state._labeledVertices=r.map(e.vertexLabels,function(t){return n.label([0,0],"","center",e.labelStyle)})),r.each(i.state._labeledVertices,function(t,r){i.state._labelCache.push(n.labelVertex({point1:s[(r-1+o)%o],vertex:s[r],point3:s[(r+1)%o],label:t,text:e.vertexLabels[r],clockwise:a,style:e.labelStyle}))})),i.state._labelCache=r.flatten(i.state._labelCache)},highlight:function(e,t){e.isHovering&&!t.isHovering?e.visibleShape.animate(this.highlightStyle(),50):!e.isHovering&&t.isHovering&&e.visibleShape.animate(this.normalStyle(),50)}};$m.standard=[$m.basic,$m.labels,$m.highlight];const Wm={basic:function(){this.state.visibleShape&&this.state.visibleShape.remove()},labels:function(){const e=[this.state._labeledSides,this.state._labeledVertices,this.state._labeledAngles,this.state._labelCache];r.each(e,function(e){null!=e&&e.length&&r.invoke(e,"remove")})}};Wm.standard=[Wm.basic,Wm.labels];const Xm={fixed:function(){return function(){return!1}},snap:function(e){return function(t){return null===e||(e=e||this.graphie.snap,Np.roundTo(t,e))}},bound:function(e,t,n){return void 0===n&&(n=void 0===e?10:0),function(i,s){const a=this.graphie,o=yp.subtract(i,s);e=e||a.range,void 0===t&&(t=a.snap);let l=a.unscalePoint([n,a.ypixels-n]),c=a.unscalePoint([a.xpixels-n,n]);t&&(l=Np.ceilTo(l,t),c=Np.floorTo(c,t));const d=r.map(this.coords(),function(e,t){const n=yp.subtract(c,e);return[yp.subtract(l,e),n]}),u=r.reduce(d,function(e,t){const n=t[0],r=t[1];return[Math.max(n[0],Math.min(r[0],e[0])),Math.max(n[1],Math.min(r[1],e[1]))]},o);return yp.add(s,u)}},standard:null},Vm={updatePoints:function(e,t){const n=yp.subtract(e,t);r.each(this.state.points,function(e){e.setCoord(yp.add(e.coord(),n))})},standard:null},Gm={add:Bm,modify:Hm,draw:$m,remove:Wm,onMoveStart:{standard:null},constraints:Xm,onMove:Vm,onMoveEnd:{standard:null},onClick:{standard:null}},Ym=af.assert,qm=af.normalizeOptions,Zm={points:null,angleLabels:[],showRightAngleMarkers:[],sideLabels:[],vertexLabels:[],numArcs:[],numArrows:[],numTicks:[],closed:!0,static:!1,cursor:"move",normalStyle:null,highlightStyle:null,labelStyle:null},Km={added:!1,hasMoved:!1,visibleShape:null,mouseTarget:null},Qm=function(e,t,n){Ym(null!=e),Ym(null!=n),r.extend(this,{graphie:e,movable:t,state:{id:r.uniqueId("movablePolygon")}}),this.modify(r.extend({},Km,n))};r.extend(Qm,Gm),af.createGettersFor(Qm,r.extend({},Zm,Km)),af.addMovableHelperMethodsTo(Qm),r.extend(Qm.prototype,{cloneState:function(){return r.extend(this.movable.cloneState(),this.state)},_createDefaultState:function(){return r.extend({id:this.state.id},qm(v(Gm,"standard")),Zm)},modify:function(e){this.update(r.extend(this._createDefaultState(),e))},update:function(e){const t=this,n=t.graphie,i=r.extend(t.state,qm(e)),s=i.static?uf.DYNAMIC:uf.INTERACTIVE;i.normalStyle=r.extend({},i.normalStyle,{"stroke-width":2,"fill-opacity":0,fill:s,stroke:s},e.normalStyle),i.highlightStyle=r.extend({},{stroke:uf.INTERACTING,"stroke-width":2,fill:uf.INTERACTING,"fill-opacity":.05},i.highlightStyle),i.labelStyle=r.extend({},{stroke:uf.DYNAMIC,"stroke-width":1,color:uf.DYNAMIC},i.labelStyle),i.static||i.mouseTarget||(i.mouseTarget=n.mouselayer.path(this.path()),i.mouseTarget.attr({fill:"#000",opacity:0,cursor:"move"})),t.movable.modify(r.extend({},i,{modify:null,draw:t.draw.bind(t),remove:null,onMoveStart:function(){t._initialRefCoord=t.coord(0),t._prevRefCoord=t._initialRefCoord,t._totalDelta=[0,0],t._fireEvent(t.state.onMoveStart,t.coord(0),t.coord(0))},onMove:function(e,n){const r=yp.subtract(e,n);t._totalDelta=yp.add(t._totalDelta,r);let i=yp.add(t._initialRefCoord,t._totalDelta);i=t._applyConstraints(i,t._prevRefCoord),!1!==i&&(t._fireEvent(t.state.onMove,i,t._prevRefCoord),t._prevRefCoord=i)},onMoveEnd:function(){t._fireEvent(t.state.onMoveEnd,t._prevRefCoord,t._initialRefCoord)}})),r.invoke(i.points,"listen","onMove",i.id,t.draw.bind(t)),i.added||(t.prevState={},t._fireEvent(i.add,t.cloneState(),t.prevState),i.added=!0,t.prevState=t.cloneState()),t._fireEvent(i.modify,t.cloneState(),t.prevState)},path:function(e){const t=this.graphie;e=e||this.state;let n=r.map(e.points,function(e){return t.scalePoint(e.coord())});return e.closed?n.push(!0):n=n.concat(r.clone(n).reverse()),Ef.unscaledSvgPath(n)},coords:function(){return r.invoke(this.state.points,"coord")},point:function(e){return this.state.points[e]},coord:function(e){return this.point(e).coord()},remove:function(){this.state.added=!1,this._fireEvent(this.state.remove),this.state.points&&r.invoke(this.state.points,"unlisten","onMove",this.state.id),this.movable&&this.movable.remove(),this.state.mouseTarget=null},constrain:function(){if(null==this.points||0===this.points.length)return;const e=this.coord(0),t=this._applyConstraints(e,e);!1!==t&&this._fireEvent(this.state.onMove,t,e)},normalStyle:function(){return r.clone(this.state.normalStyle)},highlightStyle:function(){return r.clone(this.state.highlightStyle)},toBack:function(){this.movable.toBack(),this.state.visibleShape&&this.state.visibleShape.toBack()},toFront:function(){this.state.visibleShape&&this.state.visibleShape.toFront(),this.movable.toFront()},isHovering:function(){return this.movable.isHovering()},isDragging:function(){return this.movable.isDragging()},mouseTarget:function(){return this.movable.mouseTarget()}});const Jm={MovablePoint:Om,addMovablePoint:function(e,t){const n=new em(e,{});return new Om(e,n,t)},MovableLine:fm,addMovableLine:function(e,t){const n=new em(e,{});return new fm(e,n,t)},MovablePolygon:Qm,addMovablePolygon:function(e,t){const n=new em(e,{});return new Qm(e,n,t)},addMaybeMobileMovablePoint:function(e,t){const n=e.props.apiOptions.isMobile,r=n?{stroke:"#ffffff","stroke-width":3,fill:uf.INTERACTIVE}:{stroke:uf.INTERACTIVE,fill:uf.INTERACTIVE},i=Object.assign(r,t.normalStyle),s=Object.assign(n?{...r,"stroke-width":0,scale:.75}:{},t.highlightStyle),a=Object.assign({normalStyle:i,highlightStyle:s,shadow:n,tooltip:n&&e.props.showTooltips,showHairlines:e.showHairlines,hideHairlines:e.hideHairlines},n?{pointSize:7}:{});return Jm.addMovablePoint(e.graphie,Object.assign(t,a))}},eg=qf.createClass({displayName:"MovablePoint",movableProps:["children"],_getProps:function(){if(this.props.isMobile){const e=this.props.isMobile,t=e?{stroke:"#ffffff","stroke-width":3,fill:uf.INTERACTIVE}:{stroke:uf.INTERACTIVE,fill:uf.INTERACTIVE},n=e?Object.assign(t,this.props.mobileStyleOverride||{}):Object.assign(t,this.props.normalStyle),r=e?{...t,"stroke-width":0,scale:.75}:this.props.highlightStyle,i=Object.assign({normalStyle:n,highlightStyle:r,shadow:e,tooltip:e&&this.props.showTooltips},e?{pointSize:7}:{});return Object.assign(this.props,i)}return this.props},add:function(e){this.point=Jm.addMovablePoint(e,this._getProps())},modify:function(){this.point.modify(this._getProps())},remove:function(){this.point.remove()},toFront:function(){this.point.toFront()},grab:function(e){this.point.grab(e)}});r.extend(eg,Jm.MovablePoint);const tg=qf.createClass({displayName:"MovableLine",movableProps:["children"],add:function(e){const t=r.pluck(this.props.children,"point"),n=r.extend({},this.props,{points:t});this.line=Jm.addMovableLine(e,n)},modify:function(){const e=r.pluck(this.props.children,"point"),t=r.extend({},this.props,{points:e});this.line.modify(t)},remove:function(){this.line.remove()},toFront:function(){this.line.toFront()}});r.extend(tg,Jm.MovableLine);const ng=qf.createSimpleClass((e,t)=>{let n=t.coord;t.unscaled&&(n=e.unscalePoint(n));let r=null;return Hu().JIPT.useJIPT?(r=e.label(n,t.text,t.direction,!1,t.style),Hu().graphieMovablesJiptLabels.addLabel(r,t.tex)):r=e.label(n,t.text,t.direction,t.tex,t.style),r}),rg=qf.createClass({displayName:"Line",movableProps:["children"],add:function(e){const t=this.props;this.graphie=e,this.line=this.graphie.line(t.start,t.end,t.style)},modify:function(){const e=this.props,t=this.graphie.svgPath([e.start,e.end]);this.line.attr(r.extend({},e.style,{path:t}))},remove:function(){this.line.remove()},toFront:function(){this.line.toFront()}}),ig=qf.createClass({displayName:"Parabola",movableProps:["children"],add:function(e){const t=this.props;this.graphie=e,this.parabola=this.graphie.parabola(t.a,t.b,t.c,t.style)},modify:function(){const e=this.props,t=this.graphie.svgParabolaPath(e.a,e.b,e.c);this.parabola.attr(r.extend({},e.style,{path:t}))},remove:function(){this.parabola.remove()},toFront:function(){this.parabola.toFront()}}),sg=qf.createClass({displayName:"Sinusoid",movableProps:["children"],add:function(e){const t=this.props;this.graphie=e,this.sinusoid=this.graphie.sinusoid(t.a,t.b,t.c,t.d,t.style)},modify:function(){const e=this.props,t=this.graphie.svgSinusoidPath(e.a,e.b,e.c,e.d);this.sinusoid.attr(r.extend({},e.style,{path:t}))},remove:function(){this.sinusoid.remove()},toFront:function(){this.sinusoid.toFront()}}),ag=qf.createSimpleClass((e,t)=>e.plot(t.fn,t.range,t.style)),og=qf.createSimpleClass((e,t)=>e.plotParametric(t.fn,t.range,t.style)),lg=qf.createSimpleClass((e,t)=>e.ellipse(t.coord,e.unscaleVector([4,4]),{fill:t.color||uf.BLACK,stroke:t.color||uf.BLACK})),cg=qf.createClass({displayName:"Path",movableProps:["children"],add:function(e){const t=this.props;this.graphie=e,this.path=this.graphie.path(t.coords,t.style)},modify:function(){const e=this.props,t=this.graphie.svgPath(e.coords);this.path.attr({path:t})},remove:function(){this.path.remove()},toFront:function(){this.path.toFront()}}),dg={Arc:qf.createSimpleClass((e,t)=>{let n=t.center,r=t.radius;return t.unscaled&&(n=e.unscalePoint(n),r=e.unscaleVector(r)),e.arc(n,r,t.startAngle,t.endAngle,t.sector,t.style)}),Circle:qf.createSimpleClass((e,t)=>e.circle(t.center,t.radius,t.style)),Label:ng,Line:rg,MovableLine:tg,MovablePoint:eg,Parabola:ig,Path:cg,Plot:ag,PlotParametric:og,Point:lg,Sinusoid:sg,Rect:qf.createSimpleClass((e,t)=>e.rect(t.x,t.y,t.width,t.height,t.style))},ug=qf.GraphieMovable,hg=Ef.createGraphie,{nestedMap:pg}=nh,{assert:fg}=af;class mg extends vt.Component{graphieDivRef=vt.createRef();_graphie=new yf(document.createElement("div"));_movables={};movables={};static defaultProps={range:[[-10,10],[-10,10]],options:{},responsive:!1,addMouseLayer:!0};componentDidMount(){this._setupGraphie(),this._updateMovables()}shouldComponentUpdate(e){return!r.isEqual(this.props,e)}componentDidUpdate(e){this.props.setup!==e.setup&&ih("<Graphie> was given a new setup function. This is a bad idea; please refactor your code to give the same setup function reference to <Graphie> on every render.",h.Internal),g(this.props.options,e.options)&&g(this.props.box,e.box)&&g(this.props.range,e.range)||this._setupGraphie(),this._updateMovables()}getGraphie=()=>this._graphie;_range=()=>{const e=e=>e[0]>=e[1]?[-10,10]:e;return[e(this.props.range[0]),e(this.props.range[1])]};_box=()=>{const e=e=>e>0?e:340;return[e(this.props.box[0]),e(this.props.box[1])]};_scale=()=>{const e=this._box(),t=this._range();return e.map((e,n)=>e/(t[n][1]-t[n][0]))};_setupGraphie=()=>{this._removeMovables();const e=this.graphieDivRef.current;if(null==e||e instanceof Text)throw new Error("No graphie container div found");e.innerHTML="";const t=this._graphie=hg(e);t.init({range:this._range(),scale:this._scale(),isMobile:this.props.isMobile}),this.props.addMouseLayer&&t.addMouseLayer({onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,onMouseMove:this.props.onMouseMove,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable}),t.snap=this.props.options.snapStep||[1,1],this.props.responsive&&(p(e).css({width:"100%",height:"100%"}),t.raphael.setSize("100%","100%")),this.props.setup(t,r.extend({range:this._range(),scale:this._scale()},this.props.options))};_removeMovables=()=>{r.invoke(this._movables,"remove"),this._movables={}};_renderMovables=(e,t)=>{const n=t.graphie,i=t.oldMovables,s=t.newMovables,a=e=>{r.each(e.movableProps,n=>{e.props[n]=this._renderMovables(e.props[n],t)})};let o=!1;return pg(e,e=>{if(!e)return t.nextKey++,e;const r=new e.type(e.props);fg(r instanceof ug,"All children of a Graphie component must be Graphie movables");const l=e.key,c=null==l?"_no_id_"+t.nextKey:l;t.nextKey++;const d=e.ref;a(r);const u=i[c];if(u)if(r.constructor===u.constructor){u.props=r.props;"reordered"===u.modify(n)&&(o=!0),s[c]=u}else null==l&&ih("Replacing a <Graphie> child with a child of a different type. Please add keys to your <Graphie> children",h.Internal),u.remove(),r.add(n),o=!0,s[c]=r;else r.add(n),o=!0,s[c]=r;return o&&s[c].toFront(),d&&(this.movables[d]=s[c]),s[c]})};_updateMovables=()=>{const e=this._graphie,t=this._movables,n={};this._movables=n,this.movables={},this._renderMovables(this.props.children,{nextKey:1,graphie:e,oldMovables:t,newMovables:n}),r.each(t,(e,t)=>{n[t]||e.remove()})};render(){return e.jsx("div",{className:"graphie-container",children:e.jsx("div",{className:"graphie",ref:this.graphieDivRef})})}}r.extend(mg,qf),r.extend(mg,dg);const gg="pending",bg="loading",Ug="loaded",yg="failed";class xg extends vt.Component{img;constructor(e){super(e),this.state={status:e.src?bg:gg}}componentDidMount(){this.state.status===bg&&this.createLoader()}UNSAFE_componentWillReceiveProps(e){this.props.src!==e.src&&this.setState({status:e.src?bg:gg})}componentDidUpdate(e,t){this.state.status!==bg||this.img||this.createLoader(),t.status!==this.state.status&&this.props.onUpdate(this.state.status)}componentWillUnmount(){this.destroyLoader()}createLoader=()=>{this.destroyLoader(),this.img=new Image,this.img.onload=this.handleLoad,this.img.onerror=this.handleError,this.img.src=this.props.src};destroyLoader=()=>{this.img&&(this.img.onload=null,this.img.onerror=null,this.img=null)};handleLoad=e=>{this.destroyLoader(),this.setState({status:Ug}),this.props.onLoad&&this.props.onLoad(e)};handleError=e=>{this.destroyLoader(),this.setState({status:yg}),this.props.onError&&this.props.onError(e)};renderImg=()=>{const{src:t,imgProps:n}=this.props;let r,i;null!=n.onClick&&(r=e=>{13!==e.keyCode&&32!==e.keyCode||n.onClick?.(e)},i=e=>{32===e.keyCode&&e.preventDefault()});const s=Hu().staticUrl,a=null!==n.onClick?"button":"img";return e.jsx("img",{tabIndex:0,role:a,src:s(t),onKeyUp:r,onKeyDown:i,...n})};render(){switch(this.state.status){case Ug:return this.renderImg();case yg:if(this.props.children)return this.props.children;break;default:if(this.props.preloader)return this.props.preloader()}return null}}function vg(e){return/\.(jpg|jpeg)$/i.test(e)}function wg(t){return e.jsx("span",{style:{top:0,left:0,width:"100%",height:"100%",position:"absolute",minWidth:"20px",display:"flex",justifyContent:"center",alignContent:"center"},children:e.jsx(w,{size:"medium"})})}class Sg extends vt.Component{_isMounted;static defaultProps={constrainHeight:!1,onUpdate:()=>{},responsive:!0,src:"",scale:1,zoomToFullSizeOnMobile:!1,setAssetStatus:(e,t)=>{}};constructor(e){super(e),e.setAssetStatus(e.src,!1),this._isMounted=!1,this.state={imageLoaded:!1,imageDimensions:null,dataLoaded:!1,labelDataIsLocalized:!1,labels:[],labelsRendered:{},range:[[0,0],[0,0]]}}componentDidMount(){this._isMounted=!0,nh.isLabeledSVG(this.props.src)&&this.loadResources()}UNSAFE_componentWillReceiveProps(e){this.props.src!==e.src&&this.setState({imageLoaded:!1,dataLoaded:!1})}shouldComponentUpdate(e,t){if(!r.isEqual(this.props,e))return!0;return this.isLoadedInState(this.state)!==this.isLoadedInState(t)}componentDidUpdate(e,t){const n=this.isLoadedInState(t),r=this.isLoadedInState(this.state);nh.isLabeledSVG(this.props.src)&&!r&&this.loadResources(),!n&&r&&this.props.setAssetStatus(this.props.src,!0)}componentWillUnmount(){this._isMounted=!1}isLoadedInState(e){return nh.isLabeledSVG(this.props.src)?e.imageLoaded&&e.dataLoaded:e.imageLoaded}loadResources(){uh(this.props.src,(e,t)=>{if(this._isMounted&&e.labels&&e.range){const n={};e.labels.forEach(e=>{n[e.content]=!1}),this.setState({dataLoaded:!0,labelDataIsLocalized:t,labelsRendered:n,labels:e.labels,range:e.range})}})}sizeProvided(){return null!=this.props.width&&null!=this.props.height}onImageLoad=()=>{this.sizeProvided()?this.setState({imageLoaded:!0}):nh.getImageSize(this.props.src,(e,t)=>{this._isMounted&&this.setState({imageLoaded:!0,imageDimensions:[e,t]})})};setupGraphie=(e,t)=>{r.map(t.labels,t=>{const{JIPT:n}=Hu();if(n.useJIPT&&this.state.labelDataIsLocalized){const n=e.label(t.coordinates,t.content,t.alignment,!1);Hu().svgImageJiptLabels.addLabel(n,t.typesetAsMath)}else if(t.coordinates){const n=1!==this.props.scale?{"font-size":100*this.props.scale+"%"}:null,i=e.label(t.coordinates,t.content,t.alignment,t.typesetAsMath,n),s=i[0].style;let a=this._tryGetPixels(s.top),o=this._tryGetPixels(s.left);if(null===a||null===o){const e=i.position();a=e.top,o=e.left}const l=(this.props.height||0)*this.props.scale,c=(this.props.width||0)*this.props.scale;i.css({top:a/l*100+"%",left:o/c*100+"%"}),r.each(t.style,(e,t)=>{i.css(t,e)})}this.setState({labelsRendered:{...this.state.labelsRendered,[t.content]:!0}})})};_tryGetPixels(e){return(e=e||"").endsWith("px")&&parseFloat(e)||null}_handleZoomClick=e=>{(p(e.target).width()<this.props.width||this.props.zoomToFullSizeOnMobile)&&mh.handleZoomClick(e,this.props.zoomToFullSizeOnMobile),this.props.trackInteraction?.()};handleUpdate=e=>{this.props.onUpdate(),nh.isLabeledSVG(this.props.src)||"loaded"!==e||this.setState({imageLoaded:!0})};render(){const t=this.props.src,n={alt:this.props.alt,title:this.props.title},i=this.props.width&&this.props.width*this.props.scale,s=this.props.height&&this.props.height*this.props.scale,a={width:i,height:s},o=this.props.responsive&&!(!i||!s);let l;this.props.extraGraphie&&this.props.extraGraphie.labels.length&&(l=e.jsx(mg,{box:this.props.extraGraphie.box,range:this.props.extraGraphie.range,options:{labels:this.props.extraGraphie.labels},responsive:!0,addMouseLayer:!1,setup:this.setupGraphie}));const c=void 0===this.props.preloader?wg:this.props.preloader,d=c?()=>c(a):null;if(!nh.isLabeledSVG(t)){if(o){const r=f({zoomable:(i||0)>700,"svg-image":!0});return n.onClick=this._handleZoomClick,e.jsxs(Dh,{className:r,width:i,height:s,constrainHeight:this.props.constrainHeight,allowFullBleed:this.props.allowFullBleed&&vg(t),children:[e.jsx(xg,{src:t,imgProps:n,preloader:d,onUpdate:this.handleUpdate}),l]})}return n.style=a,e.jsx(xg,{src:t,preloader:d,imgProps:n,onUpdate:this.handleUpdate})}const p=nh.getSvgUrl(t);let m;if(this.isLoadedInState(this.state)){let t;if(this.sizeProvided())t=[i,s];else{if(!this.state.imageDimensions)throw new u("svg-image has no dimensions",h.InvalidInput,{metadata:{src:this.props.src}});t=[this.state.imageDimensions[0]*this.props.scale,this.state.imageDimensions[1]*this.props.scale]}m=e.jsx(mg,{ref:"graphie",box:t,scale:[40*this.props.scale,40*this.props.scale],range:this.state.range,options:r.pick(this.state,"labels"),responsive:o,addMouseLayer:!1,setup:this.setupGraphie})}return o?e.jsxs(Dh,{className:"svg-image",width:i,height:s,constrainHeight:this.props.constrainHeight,children:[e.jsx(xg,{src:p,onLoad:this.onImageLoad,onUpdate:this.handleUpdate,preloader:d,imgProps:n}),m,l]}):(n.style=a,e.jsxs("div",{className:"unresponsive-svg-image",style:a,children:[e.jsx(xg,{src:p,onLoad:this.onImageLoad,onUpdate:this.handleUpdate,preloader:d,imgProps:n}),m]}))}}class Eg extends vt.Component{_hasRendered;static defaultProps={onRender:()=>{},setAssetStatus:(e,t)=>{}};constructor(e){super(e),this.props.setAssetStatus(this.props.children,!1),this.state={rendered:!1},this._hasRendered=!1}handleRender=()=>{this.setState({rendered:!0}),this.props.onRender(),this._hasRendered||(this._hasRendered=!0,this.props.setAssetStatus(this.props.children,!0))};render(){const{TeX:t}=Hu();return e.jsx(t,{onRender:this.handleRender,children:this.props.children})}}class kg extends vt.Component{_isMounted;_observer;_measuringInitialized;_originalWidth;_node;static defaultProps={animateHeight:!1,readyToMeasure:!0,disableEntranceAnimation:!1,computeChildBounds:e=>{const t=e.firstElementChild;return{width:t.offsetWidth,height:t.offsetHeight}}};state={visible:!1,marginBottomPx:0,zoomed:!0};componentDidMount(){this._isMounted=!0,this.maybeInitializeMeasuring()}componentDidUpdate(){this.maybeInitializeMeasuring()}componentWillUnmount(){window.removeEventListener("resize",this.reset),this._observer&&this._observer.disconnect(),this._isMounted=!1}reset=()=>{this._isMounted&&this.state.visible&&(this._originalWidth=null,this.setState({visible:!1,compactHeight:null,expandedHeight:null,zoomed:!0},()=>{this.measureAndScaleChildToFit(!1)}))};maybeInitializeMeasuring(){const e=this.props.readyToMeasure&&!this._measuringInitialized;this._isMounted&&e&&(this._measuringInitialized=!0,this._node=n.findDOMNode(this),setTimeout(()=>this.measureAndScaleChildToFit(!1),0),window.MutationObserver&&(this._observer=new MutationObserver(e=>{if(this._isMounted)for(const t of e)if(t.target!==this._node){this.measureAndScaleChildToFit(this.state.zoomed);break}}),this._observer.observe(this._node,{childList:!0,subtree:!0,attributes:!0})),window.addEventListener("resize",this.reset))}stopPropagationIfZoomed=e=>{this.state.zoomed||e.stopPropagation()};measureAndScaleChildToFit(e){if(!this._isMounted)return;let t=this._node,n=t;for(;n&&0===n.offsetWidth;)n=n.parentElement?.closest(".perseus-renderer")??null;n&&(t=n);const r={width:t.offsetWidth,height:t.offsetHeight},i=this.props.computeChildBounds(this._node,r),s=i.width+1,a=i.height+1;if(s>r.width){const t=r.width/s;this.setState({scale:t,zoomed:e,compactHeight:Math.ceil(t*a),expandedHeight:a}),setTimeout(()=>{this._isMounted&&this.setState({visible:!0})})}else this.setState({visible:!0})}handleClickIfZoomed=e=>{this.state.zoomed||(e.stopPropagation(),this.handleClick())};handleClick=()=>{this.setState({zoomed:!this.state.zoomed})};render(){const{visible:t,scale:n,compactHeight:r,expandedHeight:i,zoomed:s}=this.state,{animateHeight:a,disableEntranceAnimation:o}=this.props,l=t?{transitionProperty:a?"opacity transform height":"opacity transform",transitionDuration:"0.3s",transitionTimingFunction:"ease-out"}:{},c=!o&&!t,d=c?" translate(0, 8px)":"",u=c?0:1,h=(n??1).toString(),p={display:"block",width:"100%",height:s?i:r,transform:s?`scale(1, 1) ${d}`:`scale(${h}, ${h}) ${d}`,transformOrigin:"0 0",opacity:u,WebkitTapHighlightColor:"transparent",...l};return e.jsx("span",{onClick:this.handleClick,onClickCapture:this.handleClickIfZoomed,onTouchCancelCapture:this.stopPropagationIfZoomed,onTouchEndCapture:this.stopPropagationIfZoomed,onTouchStartCapture:this.stopPropagationIfZoomed,style:p,children:this.props.children})}}const Cg=(e,t)=>{const n=e.querySelector(".MathJax"),r={width:n.offsetWidth,height:n.offsetHeight};return{width:Math.max(t.width,r.width),height:Math.max(t.height,r.height)}};class _g extends vt.Component{constructor(){super(),this.state={isRendered:!1}}handleRender=()=>{this.setState({isRendered:!0})};render(){return e.jsx(kg,{readyToMeasure:this.state.isRendered,computeChildBounds:Cg,animateHeight:!1,disableEntranceAnimation:!0,children:e.jsx(Au.Consumer,{children:({setAssetStatus:t})=>e.jsx(Eg,{onRender:this.handleRender,setAssetStatus:t,children:this.props.children})})})}}const Mg=vt.createContext({activeDefinitionId:null,setActiveDefinitionId:()=>{}});class Ig extends vt.Component{state={activeDefinitionId:null};setActiveDefinitionId=e=>{this.setState(t=>({activeDefinitionId:e}))};render(){const{children:t}=this.props,{activeDefinitionId:n}=this.state,{setActiveDefinitionId:r}=this;return e.jsx(Mg.Provider,{value:{activeDefinitionId:n,setActiveDefinitionId:r},children:t})}}const jg=Mg.Consumer;class Tg extends vt.Component{constructor(e){super(e),this.state={error:""}}componentDidCatch(e,t){this.setState({error:e.toString()}),this.props.onError?.(e,t),ih("Unhandled Perseus error: "+e.message,h.Internal,{cause:e,loggedMetadata:{componentStack:t&&"componentStack"in t?t.componentStack:"componentStack not provided",...this.props.metadata}})}render(){return this.state.error?e.jsxs("svg",{height:"16",width:"16",viewBox:"0 0 16 16",role:"img",children:[e.jsx("title",{children:"Rendering Error!"}),e.jsx("path",{d:"m8 16c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm0-3c0.55 0 1-0.45 1-1s-0.45-1-1-1-1 0.45-1 1 0.45 1 1 1zm0-9c-0.55 0-1 0.45-1 1v4c0 0.55.45 1 1 1s1-0.45 1-1v-4c0-0.55-0.45-1-1-1z",fill:"#d92916",fillRule:"evenodd"})]}):this.props.children}}function Rg(){}class Pg{_tracked;setting;track;trackApi;widgetID;widgetType;constructor(e,t,n,r){e?(this._tracked=!1,this.trackApi=e,this.widgetType=t,this.widgetID=n,this.setting=r,this.track=this._track):this.track=Rg}_track=e=>{this._tracked&&!this.setting||(this._tracked=!0,this.trackApi({type:this.widgetType,id:this.widgetID,...e}))}}const Ag={fence:{match:S.defaultRules.fence.match,order:1,parse:(e,t,n)=>({type:"codeBlock",lang:e[2]||void 0,content:e[3]})},paragraph:{match:S.defaultRules.paragraph.match,order:2,parse:(e,t,n)=>({content:e[1]})}},Ng=S.parserFor(Ag),Dg=e=>{const t=e.replace(/^\n\s*\n/,"")+"\n\n";return Ng(t,{inline:!1}).map(e=>e.content)},Lg=e=>e.join("\n\n"),Og=["key","ref","containerSizeClass","widgetId","onChange","problemNum","apiOptions","widgetIsOpen","questionCompleted","findWidgets","onRemove","id","onBlur","onFocus","trackInteraction","keypadElement","linterContext","isLastUsedWidget","handleUserInput","analytics","showSolutions","reviewMode","reviewModeRubric","widgetIndex"];const Fg={};function zg(e){if(!Fg[e]){const t=p("<span>").text(e).appendTo("body");Fg[e]=t.width()+5,t.remove()}return Fg[e]}class Bg extends vt.Component{static propTypes={options:Ct.array,layout:Ct.oneOf(["horizontal","vertical"]),onChange:Ct.func.isRequired};static defaultProps={options:[],layout:"horizontal"};state={items:this.props.options.concat("")};UNSAFE_componentWillReceiveProps(e){this.setState({items:e.options.concat("")})}onChange=(e,t)=>{let n=r.clone(this.state.items);n[e]=t.target.value,e===n.length-1&&(n=n.concat("")),this.setState({items:n}),this.props.onChange(r.compact(n))};onKeyDown=(e,t)=>{const i=t.nativeEvent.keyCode;if(8===i&&""===this.state.items[e]){t.preventDefault();const i=r.clone(this.state.items),s=0===e?0:e-1;e!==i.length-1||0!==e&&""===i[s]?(i.splice(e,1),this.setState({items:i},function(){n.findDOMNode(this.refs["input_"+s]).focus()})):n.findDOMNode(this.refs["input_"+s]).focus()}else if(8===i&&1===this.state.items[e].length&&e===this.state.items.length-2){t.preventDefault();const n=r.clone(this.state.items);n.splice(e,1),this.setState({items:n}),this.props.onChange(r.compact(n))}else if(13===i){t.preventDefault();const i=r.clone(this.state.items),s=e+1;e===i.length-2?n.findDOMNode(this.refs["input_"+s]).focus():(i.splice(s,0,""),this.setState({items:i},function(){n.findDOMNode(this.refs["input_"+s]).focus()}))}};render(){const t=["perseus-text-list-editor","perseus-clearfix","layout-"+this.props.layout].join(" "),n=r.map(this.state.items,function(t,n){return e.jsx("li",{children:e.jsx("input",{ref:"input_"+n,type:"text",value:t,onChange:this.onChange.bind(this,n),onKeyDown:this.onKeyDown.bind(this,n),style:{width:zg(t)}})},n)},this);return e.jsx("ul",{className:t,children:n})}}const Hg=[];class $g extends vt.Component{static propTypes={value:Ct.arrayOf(Ct.string),onChange:Ct.func.isRequired,showTitle:Ct.bool.isRequired};static defaultProps={value:Hg,showTitle:!0};render(){return e.jsxs("div",{children:[this.props.showTitle&&e.jsx("div",{style:{fontSize:14},children:"Tags:"}),e.jsx(Bg,{options:this.props.value||Hg,layout:"vertical",onChange:this.props.onChange})]})}}const Wg={propTypes:Ct.shape({isArticle:Ct.bool.isRequired,onFocusChange:Ct.func.isRequired,GroupMetadataEditor:Ct.func.isRequired,showAlignmentOptions:Ct.bool.isRequired,readOnly:Ct.bool.isRequired,answerableCallback:Ct.func,getAnotherHint:Ct.func,interactionCallback:Ct.func,groupAnnotator:Ct.func.isRequired,imagePlaceholder:Ct.node,widgetPlaceholder:Ct.node,baseElements:Ct.shape({Link:Ct.func}),imagePreloader:Ct.func,trackInteraction:Ct.func,customKeypad:Ct.bool,nativeKeypadProxy:Ct.func,isMobile:Ct.bool,isMobileApp:Ct.bool,setDrawingAreaAvailable:Ct.func,hintProgressColor:Ct.string,canScrollPage:Ct.bool,editorChangeDelay:Ct.number}).isRequired,defaults:{isArticle:!1,isMobile:!1,isMobileApp:!1,onFocusChange:function(){},GroupMetadataEditor:$g,showAlignmentOptions:!1,readOnly:!1,groupAnnotator:function(){return null},baseElements:{Link:t=>e.jsx("a",{...t})},setDrawingAreaAvailable:function(){},canScrollPage:!1,editorChangeDelay:0}},Xg="perseus-renderer",Vg="perseus-renderer-two-columns",Gg="perseus-renderer-responsive",Yg="perseus-input",qg="perseus-focused",Zg={OPTION:"perseus-radio-option",SELECTED:"perseus-radio-selected",OPTION_CONTENT:"perseus-radio-option-content"},Kg="perseus-correct",Qg="perseus-incorrect",Jg={path:"M6 11a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0-9a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1z",height:12,width:12};class eb extends vt.Component{_positionTimeout;state={tooltipAbove:!0};componentDidMount(){this._positionTimeout=window.setTimeout(this.getPosition)}componentWillUnmount(){window.clearTimeout(this._positionTimeout)}getPosition=()=>{const e=n.findDOMNode(this).getBoundingClientRect();this.setState({tooltipAbove:e.top>100})};renderLink=t=>{const n=this.state.tooltipAbove;let r,i,s;return 1===this.props.severity?(r=tb.indicatorError,i="Error",s=tb.publishBlockingError):2===this.props.severity?(r=tb.indicatorWarning,i="Warning",s=tb.warning):(r=tb.indicatorGuideline,i="Recommendation",s=tb.warning),e.jsxs("a",{href:`https://khanacademy.org/r/linter-rules#${this.props.ruleName}`,target:"lint-help-window",className:k(t),children:[e.jsx("span",{className:k(tb.indicator,r),children:1===this.props.severity&&e.jsx(mm,{...Jg})}),e.jsxs("div",{className:k(tb.tooltip,n&&tb.tooltipAbove),children:[this.props.message.split("\n\n").map((t,n)=>e.jsxs("p",{className:k(tb.tooltipParagraph),children:[e.jsxs("span",{className:k(s),children:[i,":"," "]}),t]},n)),e.jsx("div",{className:k(tb.tail,n&&tb.tailAbove)})]})]})};render(){const{children:t,inline:n,blockHighlight:r,insideTable:i}=this.props;return i?n?e.jsx("span",{"data-lint-inside-table":"true",children:t}):e.jsx("div",{"data-lint-inside-table":"true",children:t}):r?e.jsxs("span",{className:k(tb.lintContainer,tb.lintContainerBlock),children:[this.renderLink(tb.radioWidgetHoverTarget),e.jsx("span",{children:t})]}):n?e.jsxs("span",{className:k(tb.lintContainer),children:[this.renderLink(tb.inlineHoverTarget),e.jsx("span",{children:t})]}):e.jsxs("div",{className:k(tb.lintContainer),children:[this.renderLink(tb.hoverTarget),e.jsx("div",{children:t})]})}}const tb=E.create({lintContainer:{position:"relative"},lintContainerBlock:{display:"block"},hoverTarget:{position:"absolute",top:0,right:-40,display:"block",width:24,height:24,":hover > span":{backgroundColor:Th},":hover div":{display:"block"},":hover ~ div":{outline:"1px solid "+jh},":hover ~ div div[data-lint-inside-table]":{outline:"1px solid "+jh},":hover ~ div span[data-lint-inside-table]":{backgroundColor:jh,color:yh}},inlineHoverTarget:{float:"right",position:"relative",marginRight:-40,display:"block",width:24,height:24,":hover > span":{backgroundColor:Th},":hover div":{display:"block"},":hover ~ span":{backgroundColor:jh,color:yh}},radioWidgetHoverTarget:{position:"absolute",left:-40,display:"block",width:24,height:24,minWidth:264,":hover > span":{backgroundColor:Th},":hover > div":{display:"block",padding:8,width:280},":hover > div > div":{left:8},":hover ~ span":{backgroundColor:jh,color:yh}},indicator:{alignItems:"center",borderRadius:4,color:"white",display:"flex",fontSize:12,height:8,justifyContent:"center",margin:8,width:8},indicatorError:{backgroundColor:"#be2612",borderRadius:8,height:16,width:16},indicatorWarning:{backgroundColor:"#f86700"},indicatorGuideline:{backgroundColor:"#ffbe26"},tooltip:{position:"absolute",right:-12,display:"none",zIndex:1e3,color:yh,backgroundColor:Eh,opacity:.9,fontFamily:gh,fontSize:"12px",lineHeight:"15px",width:"320px",borderRadius:"4px"},tooltipAbove:{bottom:32},tail:{position:"absolute",top:-12,right:16,width:0,height:0,borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderBottom:"12px solid "+Eh},tailAbove:{bottom:-12,borderBottom:"none",borderTop:"12px solid "+Eh,top:"auto"},tooltipParagraph:{margin:12},warning:{color:jh,fontFamily:bh},publishBlockingError:{color:Ph}}),nb={...C,columns:{...C.columns,react:(t,n,r)=>e.jsxs("div",{className:"perseus-two-columns",children:[e.jsx("div",{className:"perseus-column",children:e.jsx("div",{className:"perseus-column-content",children:n(t.col1,r)})}),e.jsx("div",{className:"perseus-column",children:e.jsx("div",{className:"perseus-column-content",children:n(t.col2,r)})})]},r.key)},crowdinId:{...C.crowdinId,react:(e,t,n)=>e.id},table:{...C.table,react:function(e,t,n){const r=S.defaultRules.table.react(e,t,n);return n.isMobile?vt.cloneElement(r,{tabIndex:0}):r}},titledTable:{...C.titledTable,react:(t,n,r)=>{let i;if(t.table)if("lint"===t.table.type)i="table"===t.table.content?.type?nb.lint.react({...t.table,content:{...t,table:t.table.content}},n,{...r,unwrapTitledTableContents:!0}):nb.lint.react(t.table,n,r);else{const s=S.defaultRules.table.react(t.table,n,r),a=e.jsx("caption",{className:"perseus-table-title",children:n(t.title,r)},"caption");i=vt.cloneElement(s,null,[a,...s.props.children])}else i="//invalid table//";return r.unwrapTitledTableContents?i:e.jsx("div",{className:"perseus-titled-table",children:i},r.key)}},widget:{...C.widget,react:(t,n,r)=>e.jsx("em",{children:`[Widget: ${t.id}]`},r.key)},blockMath:{...C.blockMath,react:(t,n,r)=>{const{TeX:i}=Hu();return e.jsx(i,{children:t.content},r.key)}},math:{...C.math,react:(t,n,r)=>{const{TeX:i}=Hu();return e.jsx(i,{children:t.content},r.key)}},unescapedDollar:{...C.unescapedDollar,react:(e,t,n)=>"$"},link:{...C.link,react:function(e,t,n){const r=S.defaultRules.link.react(e,t,n),i=r.props.href;let s=null;!!i&&i.match(/https?:\/\/[^/]*khanacademy.org|^\//)||(s="noopener noreferrer");const a={...r.props,target:"_blank",href:i,rel:s};return n.baseElements&&n.baseElements.Link?n.baseElements.Link(a):vt.cloneElement(r,a)}},codeBlock:{...C.codeBlock,react:(t,n,r)=>"alt"===t.lang?e.jsx("div",{className:"perseus-markdown-alt perseus-sr-only",children:n(t.content,r)},r.key):S.defaultRules.codeBlock.react(t,n,r)},lint:{...C.lint,react:(t,n,r)=>e.jsx(eb,{message:t.message,ruleName:t.ruleName,inline:rb(t.content),blockHighlight:t.blockHighlight,insideTable:t.insideTable,severity:t.severity,children:n(t.content,r)})}};function rb(e){return!!(e&&e.type&&ib.hasOwnProperty(e.type))}const ib={text:!0,math:!0,unescapedDollar:!0,link:!0,img:!0,strong:!0,u:!0,em:!0,del:!0,code:!0},sb=S.parserFor(nb),ab=(e,t)=>sb(e+"\n\n",{...t,inline:!1}),ob=e=>{if(r.isArray(e))return r.flatten(r.map(e,ob));if(e.content&&r.isString(e.content))return-1!==e.type.toLowerCase().indexOf("code")?["",e.content,""]:[e.content.replace(/\s+/g," ")];const t=r.chain(e).values().flatten().filter(e=>null!=e&&r.has(e,"type")).value();if(!t.length)return[];const n=ob(t);if("paragraph"===e.type&&n.length){n[0]=n[0].replace(/^\s+/,"");const e=n.length-1;n[e]=n[e].replace(/\s+$/,"")}return n},lb={characterCount:e=>{const t=ab(e);return ob(t).join("").length},traverseContent:_,parse:ab,parseInline:(e,t)=>sb(e,{...t,inline:!0}),reactFor:S.reactFor,ruleOutput:S.ruleOutput(nb,"react"),basicOutput:S.reactFor(S.ruleOutput(nb,"react")),sanitizeUrl:S.sanitizeUrl};class cb extends vt.Component{render(){const t=this.props.className?"paragraph "+this.props.className:"paragraph";return e.jsx("div",{className:this.props.inline?this.props.className??void 0:t,"data-perseus-component-index":this.props.translationIndex,"data-perseus-paragraph-index":this.props.paragraphIndex,children:this.props.children})}}class db{previousContent=null;runLinter=M((e,t)=>{"undefined"!=typeof KA&&e!==this.previousContent&&(this.previousContent=e,""!==e?fetch("/api/internal/translations/lint_poentry?preview=1&lang=en",{headers:{"Content-Type":"application/json"},body:JSON.stringify({msgid:e,msgstr:e,format:"perseus_text",filename:""}),method:"POST"}).then(e=>e.status>=400?{status:"error",message:"Could not run i18n linter."}:e.json(),e=>({status:"error",message:"Could not run i18n linter."})).then(e=>{"error"===e.status?t(["Some part of this text makes it untranslatable. The specific message from the i18n linter was: "+e.message.replace(/\n/g," ")]):t([])}):t([]))},1e3);applyLintErrors(e,t){if(t.length){const n=t.join("\n\n");e.unshift({content:{type:"text",content:""},insideTable:!1,message:n,ruleName:"legacy-error",severity:I.Severity.ERROR,type:"lint"})}}}const{interactiveSizes:ub}=Nh,hb="small",pb="medium",fb="large",mb=e=>e===hb?[ub.defaultBoxSizeSmall,ub.defaultBoxSizeSmall]:[ub.defaultBoxSize,ub.defaultBoxSize],gb=new j("Perseus widget registry"),bb=(e,t)=>{gb.set(e,t)},Ub=(e,t)=>{const n=gb.get(t);if(!n){throw new u(`Failed to replace ${e} with ${t}`,h.Internal)}bb(e,n)},yb=e=>gb.get(e)??null;class xb extends vt.Component{widgetRef=vt.createRef();static defaultProps={linterContext:T};state={sizeClass:pb};componentDidMount(){if(this.props.widgetProps.apiOptions.isMobile){const t=n.findDOMNode(this).offsetWidth;this.setState({sizeClass:(e=t,e?e<=512?hb:e<=688?pb:fb:pb)})}var e}UNSAFE_componentWillReceiveProps(e){if(this.props.type!==e.type)throw new Error("WidgetContainer can't change widget type; set a different key instead to recreate the container.")}getWidget=()=>this.widgetRef.current;render(){let t=f({"perseus-widget-container":!0,"widget-highlight":this.props.shouldHighlight,"widget-nohighlight":!this.props.shouldHighlight,"perseus-widget__definition":"definition"===this.props.type});const n=this.props.type,r=navigator.userAgent,i=(e=>{const t=gb.get(e);return null==t?null:t.getWidget?t.getWidget():t.widget})(n);if(null==i)return e.jsx("div",{className:t});let s="null";if("interactive-graph"===n){const e=this.props.widgetProps;s=e.graph?.type??"null"}let a=this.props.widgetProps.alignment;"default"===a&&(a=R.getDefaultAlignment(n)),t+=" widget-"+a;const o=this.props.widgetProps.apiOptions,l=this.props.widgetProps.static||o.readOnly,c={width:"100%",height:"100%",position:"absolute",top:0,left:0,zIndex:3},d=(e=>{const t=gb.get(e);return t&&t.isLintable||!1})(n)?this.props.linterContext:{...this.props.linterContext,highlightLint:!1};return e.jsx("div",{className:t,style:l?{position:"relative",overflow:"visible"}:{},children:e.jsx($u.Consumer,{children:({analytics:t})=>e.jsxs(Tg,{metadata:{widget_type:n,widget_id:this.props.id},onError:e=>{t.onAnalyticsEvent({type:"perseus:widget-rendering-error:ti",payload:{widgetSubType:s,widgetType:n,widgetId:this.props.id,message:e.message,userAgent:r}})},children:[e.jsx(i,{...this.props.widgetProps,linterContext:d,containerSizeClass:this.state.sizeClass,ref:this.widgetRef}),l&&e.jsx("div",{style:c})]})})})}}const vb=/\S/,wb=/(web\+graphie|https):\/\/[^\s]*/,Sb=()=>{},Eb=e=>"container:"+e;class kb extends vt.Component{static contextType=Ou;_currentFocus;_foundTextNodes;_interactionTrackers;_isMounted;_isTwoColumn;_translationLinter;_widgetContainers=new Map;translationIndex;widgetIds;static defaultProps={content:"",widgets:{},images:{},highlightedWidgets:[],questionCompleted:!1,showSolutions:"none",onRender:Sb,onInteractWithWidget:function(){},findExternalWidgets:()=>[],alwaysUpdate:!1,reviewMode:!1,linterContext:T};constructor(e){super(e),this._translationLinter=new db,this.state={jiptContent:null,translationLintErrors:[],lastUsedWidgetId:null,...this._getInitialWidgetState(e)}}componentDidMount(){this._isMounted=!0,this.handleRender({}),this._currentFocus=null,this.props.initializeUserInput?.(this.props.widgets,this.props.problemNum??0),this.props.linterContext.highlightLint&&this._translationLinter.runLinter(this.props.content,this.handletranslationLintErrors)}UNSAFE_componentWillReceiveProps(e){(function(e,t){function n(e){return z({question:{content:e.content,widgets:e.widgets,images:{}},hints:[],answerArea:B()})}return e.problemNum!==t.problemNum||!r.isEqual(n(e),n(t))})(this.props,e)&&(this.props.initializeUserInput?.(e.widgets,e.problemNum??0),this.setState(this._getInitialWidgetState(e)))}shouldComponentUpdate(e,t){if(this.props.alwaysUpdate)return!0;const n=!r.isEqual(this.state,t);return!r.isEqual(this.props,e)||n}componentDidUpdate(e,t){this.handleRender(e),this.props.linterContext.highlightLint&&this._translationLinter.runLinter(this.props.content,this.handletranslationLintErrors)}componentWillUnmount(){this.widgetIds=[],null!=this.translationIndex&&Hu().rendererTranslationComponents.removeComponentAtIndex(this.translationIndex),this._isMounted=!1}getApiOptions=()=>({...Wg.defaults,...this.props.apiOptions});_getInitialWidgetState=e=>({widgetInfo:P(e.widgets)});_getDefaultWidgetInfo=e=>{const t=nh.rTypeFromWidgetId.exec(e);return null==t?{}:{type:t[1],graded:!0,options:{}}};_getWidgetInfo=e=>this.state.widgetInfo[e]||this._getDefaultWidgetInfo(e);renderWidget=(t,n,i)=>{const s=this.state.widgetInfo[n];if(s&&"full-width"===s.alignment&&(i.foundFullWidth=!0),s){const i=s&&s.type||t,a=r.contains(this.props.highlightedWidgets,n);return e.jsx(xb,{id:n,ref:e=>{const t=Eb(n);null!=e?this._widgetContainers.set(t,e):this._widgetContainers.delete(t)},type:i,widgetProps:this.getWidgetProps(n),shouldHighlight:a,linterContext:A(this.props.linterContext,"widget")},Eb(n))}return null};_getWidgetIndexById(e){const t=this.widgetIds.indexOf(e);return t<0?(ih("Unable to get widget index in _getWidgetIndexById",h.Internal,{loggedMetadata:{widgets:JSON.stringify(this.props.widgets),widgetId:JSON.stringify(e)}}),0):t}getWidgetProps(e){const t=this.getApiOptions(),n=this.props.widgets[e].options,i=this.state.widgetInfo[e],s=this.props.reviewMode&&i?i.options:null;this._interactionTrackers||(this._interactionTrackers={});let a=this._interactionTrackers[e];return a||(a=this._interactionTrackers[e]=new Pg(t.trackInteraction,i&&i.type,e,(e=>{const t=gb.get(e);return t&&t.tracking||""})(i&&i.type))),{...n,userInput:this.props.userInput?.[e],widgetId:e,widgetIndex:this._getWidgetIndexById(e),alignment:i&&i.alignment,static:i?.static,problemNum:this.props.problemNum,apiOptions:this.getApiOptions(),keypadElement:this.props.keypadElement,questionCompleted:this.props.questionCompleted,showSolutions:this.props.showSolutions,onFocus:r.partial(this._onWidgetFocus,e),onBlur:r.partial(this._onWidgetBlur,e),findWidgets:this.findWidgets,reviewModeRubric:s,reviewMode:this.props.reviewMode,handleUserInput:t=>{const n={...this.props.userInput,[e]:t},r=N(this.state.widgetInfo,this.widgetIds,n,this.context.locale).length>0;this.props.handleUserInput?.(e,t,r),this.props.onInteractWithWidget(e)},trackInteraction:a.track,isLastUsedWidget:e===this.state.lastUsedWidgetId}}getSerializedState(){return D(this.props.widgets,(e,t)=>{const n=this.getWidgetInstance(t);return n&&n.getSerializedState?function(e){if(null==e)return e;const t={};for(const n of Object.keys(e))Og.includes(n)||(t[n]=e[n]);return t}(n.getSerializedState()):e.options})}findInternalWidgets=e=>{let t;if("string"==typeof e)if(-1!==e.indexOf(" ")){const n=e;t=(e,t,r)=>e===n}else{const n=e;t=(e,t,r)=>t.type===n}else t=e;return this.widgetIds.filter(e=>{const n=this._getWidgetInfo(e),r=this.getWidgetInstance(e);return t(e,n,r)}).map(this.getWidgetInstance)};findWidgets=e=>[...this.findInternalWidgets(e),...this.props.findExternalWidgets(e)];getWidgetInstance=e=>{const t=this._widgetContainers.get(Eb(e));return t?t.getWidget():null};_onWidgetFocus=(e,t=[])=>{if(!r.isArray(t))throw new u("widget props.onFocus focusPath must be an Array, but was"+JSON.stringify(t),h.Internal);this._setCurrentFocus([e].concat(t))};_onWidgetBlur=(e,t)=>{const n=this._currentFocus,i=[e].concat(t);r.isEqual(i,n)&&r.defer(()=>{r.isEqual(this._currentFocus,n)&&this._setCurrentFocus(null)})};getContent=(e,t)=>t.jiptContent||e.content;shouldRenderJiptPlaceholder=(e,t)=>Hu().JIPT.useJIPT&&null==t.jiptContent&&-1!==e.content.indexOf("crwdns");replaceJiptContent=(e,t)=>{if(null==t)this.setState({jiptContent:e});else{/^\s*(`{3,}|~{3,})\s*(\S+)?\s*\n([\s\S]+?)\s*\1\s*$/.test(e)||(/\S\n\s*\n\S/.test(e)?e="$\\large{\\red{\\text{Please translate each paragraph to a single paragraph.}}}$":/^\s*$/.test(e)&&(e="$\\large{\\red{\\text{Translated paragraph is currently empty}}}$"));const n=this.getContent(this.props,this.state),r=Dg(n);r[t]=e,this.setState({jiptContent:Lg(r)})}};outputMarkdown=(t,n)=>{if(r.isArray(t)){const e=n.key,r=[];let i=!1;for(let s=0;s<t.length;s++){n.key=s,n.paragraphIndex=s;const e=this.outputMarkdown(t[s],n),a="string"==typeof e;"string"==typeof e&&i?r[r.length-1]+=e:r.push(e),i=a}return n.key=e,r}this._foundTextNodes=!1,n.foundFullWidth=!1;const i=this.outputNested(t,n);let s;return s=null!=this.translationIndex?null:f({"perseus-paragraph-centered":!this._foundTextNodes,"perseus-paragraph-full-width":n.foundFullWidth&&1===t.content.length}),e.jsx(cb,{className:s,translationIndex:this.translationIndex,paragraphIndex:n.paragraphIndex,inline:this.props.inline,children:e.jsx(Tg,{children:i})},n.key)};outputNested=(e,t)=>{if(r.isArray(e)){const n=t.key,r=[];let i=!1;for(let s=0;s<e.length;s++){t.key=s;const n=this.outputNested(e[s],t),a="string"==typeof n;"string"==typeof n&&i?r[r.length-1]+=n:r.push(n),i=a}return t.key=n,r}return this.outputNode(e,this.outputNested,t)};outputNode=(t,n,i)=>{const s=this.getApiOptions(),a=s.imagePlaceholder;if("widget"===t.type){const n=s.widgetPlaceholder;return n||(this._foundTextNodes=!0,this.widgetIds.includes(t.id)?e.jsx("span",{className:"renderer-widget-error",children:["Widget [[","☃"," ",t.id,"]] already exists."].join("")},i.key):(this.widgetIds.push(t.id),this.renderWidget(t.widgetType,t.id,i)))}if("blockMath"===t.type){const n=t.content.replace(/\{align[*]?\}/g,"{aligned}").replace(/[\u00a0]/g," "),r={overflowX:"auto",overflowY:"hidden",paddingTop:10,paddingBottom:10,marginTop:-10,marginBottom:-10};if(s.isMobile){const t=16,s={marginLeft:-t,marginRight:-t},a={paddingLeft:t,paddingRight:t},o={...r,...Cb.mobileZoomableParentFix};return e.jsx("div",{className:"perseus-block-math",style:s,children:e.jsx(Tg,{children:e.jsx("div",{className:"perseus-block-math-inner",style:{...o,...a},children:e.jsx(_g,{children:n})})})},i.key)}return e.jsx("div",{className:"perseus-block-math",children:e.jsx(Tg,{children:e.jsx("div",{className:"perseus-block-math-inner",style:r,children:e.jsx(Au.Consumer,{children:({setAssetStatus:t})=>e.jsx(Eg,{setAssetStatus:t,children:n})})})})},i.key)}if("math"===t.type){const n=t.content;return e.jsx("span",{style:{whiteSpace:"nowrap"},children:e.jsxs(Tg,{children:[e.jsx("span",{}),e.jsx(Au.Consumer,{children:({setAssetStatus:t})=>e.jsx(Eg,{onRender:this.props.onRender,setAssetStatus:t,children:n})}),e.jsx("span",{})]})},i.key)}if("image"===t.type){if(a)return a;const n=r.has(this.props.images,t.target)?this.props.images[t.target]:null,o=!i.inTable;return e.jsx(Tg,{children:e.jsx(Au.Consumer,{children:({setAssetStatus:r})=>e.jsx(Sg,{setAssetStatus:r,src:lb.sanitizeUrl(t.target),alt:t.alt,title:t.title,responsive:o,onUpdate:this.props.onRender,zoomToFullSizeOnMobile:s.isMobile&&s.isArticle,...n})})},i.key)}if("columns"===t.type)return this._isTwoColumn=!0,e.jsx(Tg,{children:lb.ruleOutput(t,n,i)},i.key);if("text"===t.type)return vb.test(t.content)&&(this._foundTextNodes=!0),a&&wb.test(t.content)?a:t.content;if("table"===t.type||"titledTable"===t.type){const r=lb.ruleOutput(t,n,{...i,isMobile:s.isMobile,inTable:!0});if(!s.isMobile)return r;const a={marginLeft:-16,marginRight:-16},o={...{paddingLeft:0,paddingRight:0},...Cb.mobileZoomableParentFix},l=e.jsx("div",{style:{...o,overflowX:"auto"},children:e.jsx(Tg,{children:e.jsx(kg,{animateHeight:!0,children:r})})});return e.jsx("div",{style:a,children:l})}return e.jsx(Tg,{children:lb.ruleOutput(t,n,i)},i.key)};handleRender=e=>{const t=this.props.onRender,r=e.onRender;if(t!==Sb||r!==Sb){const e=p(n.findDOMNode(this)).find("img");r!==Sb&&e.off("load",r),t!==Sb&&e.on("load",t)}t()};_setCurrentFocus=e=>{const t=this.getApiOptions();if(n=e,i=this._currentFocus,!(null===n||null===i?n===i:r.every(n,(e,t)=>{if(null!=i)return r.isEqual(e,i[t])}))){const n=this._currentFocus;n&&this.blurPath(n),this._currentFocus=e,t.onFocusChange(this._currentFocus,n)}var n,i};focus=()=>{let e,t;for(let n=0;n<this.widgetIds.length;n++){const r=this.widgetIds[n],i=this.getWidgetInstance(r),s=i?.focus?.();if(s){e=r,t=s;break}}if(e){let n;return"object"==typeof t?(n=[e].concat(t.path||[]),ih("Renderer received a focus result of type 'object' instead of the expected type 'boolean'",h.Internal,{loggedMetadata:{focusResult:JSON.stringify(t)}})):n=[e],this._setCurrentFocus(n),!0}};getDOMNodeForPath=e=>{const t=r.first(e),i=r.rest(e),s=this.getWidgetInstance(t);return s?.getDOMNodeForPath?s.getDOMNodeForPath(i):0===i.length?n.findDOMNode(s):void 0};getInputPaths=()=>{const e=[];return this.widgetIds.forEach(t=>{const n=this.getWidgetInstance(t);if(n&&n.getInputPaths){n.getInputPaths().forEach(n=>{const r=[t].concat(n);e.push(r)})}}),e};focusPath=e=>{if(r.isEqual(this._currentFocus,e))return;this._currentFocus&&this.blurPath(this._currentFocus);const t=r.first(e),n=r.rest(e),i=this.getWidgetInstance(t);i?.focusInputPath?.(n)};blurPath=e=>{if(!r.isEqual(this._currentFocus,e))return;const t=r.first(e),n=r.rest(e);if(this.getWidgetInstance(t)){const e=this.getWidgetInstance(t);e?.blurInputPath?.(n)}};blur=()=>{this._currentFocus&&this.blurPath(this._currentFocus)};serialize=()=>{const e={};return r.each(this.state.widgetInfo,function(t,n){const i=this.getWidgetInstance(n).serialize();r.isEmpty(i)||(e[n]=i)},this),e};emptyWidgets(){if(!this.props.userInput)throw new Error("emptyWidgets called without providing userInput to Renderer");return N(this.state.widgetInfo,this.widgetIds,this.props.userInput,this.context.locale)}handleStateUpdate(e,t,n){this.setState(t=>({lastUsedWidgetId:n?t.lastUsedWidgetId:e}),()=>{setTimeout(()=>{const r=t&&t();n||this.props.onInteractWithWidget(e),!1!==r&&this._setCurrentFocus([e])},0)})}getUserInput(){const e=this.props.userInput;if(!e)throw new Error("getUserInput called without providing userInput to Renderer");return this.widgetIds.map(t=>e[t])}getUserInputMap(){const e=this.props.userInput;if(!e)throw new Error("getUserInputMap called without providing userInput to Renderer");return e}getWidgetIds=()=>this.widgetIds;getPromptJSON(){const{content:e}=this.props,t={};return this.widgetIds.forEach(e=>{const n=this.getWidgetInstance(e);t[e]=n?.getPromptJSON?.()||{}}),{content:e,widgets:t}}score(){if(!this.props.userInput)throw new Error("score called without providing userInput to Renderer");const e=L(this.state.widgetInfo,this.widgetIds,this.props.userInput,this.context.locale);return O(e)}handletranslationLintErrors=e=>{this._isMounted&&this.setState({translationLintErrors:e})};render(){const t=this.getApiOptions(),n=this.getContent(this.props,this.state);if(this.widgetIds=[],this.shouldRenderJiptPlaceholder(this.props,this.state)&&(this.translationIndex||(this.translationIndex=Hu().rendererTranslationComponents.addComponent(this)),!t.isArticle))return e.jsx(Ig,{children:e.jsx("div",{"data-perseus-component-index":this.translationIndex,children:n})});this._isTwoColumn=!1;const r=this.props.inline?lb.parseInline(n,{isJipt:null!=this.translationIndex}):lb.parse(n,{isJipt:null!=this.translationIndex});if(this.props.linterContext.highlightLint){const e={content:this.props.content,widgets:this.props.widgets,...this.props.linterContext};F(r,e),this._translationLinter.applyLintErrors(r,[...this.state.translationLintErrors,...this.props.legacyPerseusLint||[]])}const i=this.outputMarkdown(r,{baseElements:t.baseElements}),s=f({[Xg]:!0,[Gg]:!0,[Vg]:this._isTwoColumn});return e.jsx(Ig,{children:e.jsx("div",{className:s,children:i})})}}const Cb={mobileZoomableParentFix:{transform:"translate3d(0,0,0)"}},{pureXsMax:_b,pureSmMax:Mb,pureMdMin:Ib,pureMdMax:jb,pureLgMin:Tb,pureLgMax:Rb,pureXlMin:Pb}=Nh,Ab={md:`@media screen and (min-width: ${Ib}) and (max-width: ${jb})`,xl:`@media screen and (min-width: ${Pb})`,xsOrSmaller:`@media screen and (max-width: ${_b})`,smOrSmaller:`@media screen and (max-width: ${Mb})`,mdOrSmaller:`@media screen and (max-width: ${jb})`,lgOrSmaller:`@media screen and (max-width: ${Rb})`,lgOrLarger:`@media screen and (min-width: ${Tb})`};function Nb(e,t){const n={};return e?(Object.entries(e).forEach(([e,r])=>{const i=yb(r.type);r.static&&i?.getCorrectUserInput?n[e]=i.getCorrectUserInput(r.options):i?.getStartUserInput&&(n[e]=i.getStartUserInput(r.options,t??0))}),n):n}function Db(e){const[t,n]=vt.useState(e.initialUserInput||Nb(e.widgets,e.problemNum??0));return e.children({userInput:t,handleUserInput:function(r,i,s){const a={...t,[r]:i};n(a),e.handleUserInput?.(a,s)},initializeUserInput:function(t,r){n(e.initialUserInput||Nb(t,r))}})}class Lb extends vt.Component{static contextType=Ou;rendererRef=vt.createRef();static defaultProps={linterContext:T};getSerializedState=()=>this.rendererRef.current?.getSerializedState();render(){const{apiOptions:t,className:n,hint:r,lastHint:i,lastRendered:s,pos:a,totalHints:o}=this.props,{isMobile:l}=t,c=f("hint",!l&&"perseus-hint-renderer",l&&k(Ob.newHint),l&&s&&k(Ob.lastRenderedNewHint),i&&"last-hint",s&&"last-rendered",n),d={...t,customKeypad:!1};return e.jsxs("div",{className:c,tabIndex:"-1",children:[!t.isMobile&&e.jsx("span",{className:"perseus-sr-only",children:this.context.strings.hintPos({pos:a+1})}),!t.isMobile&&null!=o&&null!=a&&e.jsx("span",{className:"perseus-hint-label",style:{display:"block",color:t.hintProgressColor},children:`${a+1} / ${o}`}),e.jsx(Db,{widgets:r.widgets,problemNum:0,children:({userInput:t,handleUserInput:n,initializeUserInput:i})=>e.jsx(kb,{ref:this.rendererRef,userInput:t,handleUserInput:n,initializeUserInput:i,widgets:r.widgets,content:r.content||"",images:r.images,apiOptions:d,findExternalWidgets:this.props.findExternalWidgets,linterContext:A(this.props.linterContext,"hint"),strings:this.context.strings})})]})}}const Ob=E.create({newHint:{marginBottom:24,borderLeftColor:xh,borderLeftStyle:"solid",borderLeftWidth:4,[Ab.lgOrSmaller]:{paddingLeft:Mh},[Ab.smOrSmaller]:{paddingLeft:0},":focus":{outline:"none"}},lastRenderedNewHint:{marginBottom:0,borderLeftColor:Uh}}),{radioBorderColor:Fb,checkedColor:zb,circleSize:Bb,radioMarginWidth:Hb}=Nh,$b=E.create({blankBackground:{backgroundColor:"#FDFDFD"},perseusSrOnly:{border:0,clip:"rect(0,0,0,0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1},responsiveLabel:{[Ab.smOrSmaller]:{fontSize:14,lineHeight:1.3},[Ab.md]:{fontSize:17,lineHeight:1.4},[Ab.lgOrLarger]:{fontSize:20,lineHeight:1.4}},responsiveInput:{display:"inline-block",WebkitAppearance:"none",appearance:"none","::-ms-check":{display:"none"},backgroundColor:"#fff",border:"2px solid #fff",boxShadow:`0 0px 0px 1px ${Fb}`,outline:"none",boxSizing:"border-box",flexShrink:0,marginBottom:1,marginLeft:1,marginRight:1,marginTop:1,height:Bb-2,width:Bb-2},responsiveRadioInput:{borderRadius:"50%",":checked":{backgroundColor:zb,border:"none",borderRadius:"50%",boxShadow:`inset 0px 0px 0px 2px white, 0 0px 0px 2px ${zb}`,marginTop:Hb,marginBottom:Hb,marginLeft:Hb,marginRight:Hb,height:Bb-2*Hb,width:Bb-2*Hb}},responsiveRadioInputActive:{backgroundColor:"#fff",border:"2px solid #fff",borderRadius:"50%",boxShadow:`0 0px 0px 2px ${zb}`,marginTop:Hb,marginBottom:Hb,marginLeft:Hb,marginRight:Hb,height:Bb-2*Hb,width:Bb-2*Hb,":checked":{backgroundColor:"#fff"}},disableTextSelection:{userSelect:"none"}});class Wb extends vt.Component{static contextType=Ou;static defaultProps={linterContext:T};state={isFinalHelpPage:!1};componentDidMount(){this._cacheHintImages()}UNSAFE_componentWillReceiveProps(e){e.hintsVisible-this.props.hintsVisible>1&&this.setState({isFinalHelpPage:!0})}componentDidUpdate(e,t){r.isEqual(e.hints,this.props.hints)&&e.hintsVisible===this.props.hintsVisible||this._cacheHintImages();const i=e.hintsVisible||0,s=this.props.hintsVisible||0;if(i<s&&s<=this.props.hints.length&&s>=0){const e=s-1;n.findDOMNode(this.refs["hintRenderer"+e]).focus()}}_hintsVisible=()=>null==this.props.hintsVisible||-1===this.props.hintsVisible?this.props.hints.length:this.props.hintsVisible;_cacheImagesInHint=e=>{r.each(e.images,(e,t)=>{(new Image).src=nh.getRealImageUrl(t)})};_cacheHintImages=()=>{this._hintsVisible()>0?r.each(this.props.hints,this._cacheImagesInHint):this.props.hints.length>0&&this._cacheImagesInHint(this.props.hints[0])};getApiOptions=()=>({...Wg.defaults,...this.props.apiOptions,readOnly:!1});getSerializedState=()=>r.times(this._hintsVisible(),e=>this.refs["hintRenderer"+e].getSerializedState());render(){const t=this.getApiOptions(),n=this._hintsVisible(),r=[],i=this.state.isFinalHelpPage;this.props.hints.slice(0,n).forEach((s,a)=>{const o=a===this.props.hints.length-1&&!/\*\*/.test(s.content),l=a===n-1,c=e.jsx(Lb,{lastHint:o,lastRendered:l,hint:s,pos:a,totalHints:this.props.hints.length,ref:"hintRenderer"+a,apiOptions:t,findExternalWidgets:this.props.findExternalWidgets,linterContext:A(this.props.linterContext,"hints["+a+"]")},"hintRenderer"+a);i?r.push(c):s.replace&&r.length>0?r[r.length-1]=c:r.push(c)});const{getAnotherHint:s}=t,a=s&&n>0&&n<this.props.hints.length,o=`(${n}/${this.props.hints.length})`,l=f(this.props.className,t.isMobile&&n>0&&k(Xb.mobileHintStylesHintsRenderer));return e.jsxs("div",{className:l,children:[t.isMobile&&n>0&&e.jsx("div",{className:k(Xb.mobileHintStylesHintTitle,$b.responsiveLabel),children:this.context.strings.hints}),r,a&&e.jsxs("button",{rel:"button",className:k(Xb.linkButton,Xb.getAnotherHintButton,t.isMobile&&Xb.mobileHintStylesGetAnotherHintButton),onClick:e=>{e.preventDefault(),e.stopPropagation(),s&&s()},children:[e.jsx("span",{className:k(Xb.plusText,t.isMobile&&Xb.mobileHintStylesPlusText),children:"+"}),e.jsxs("span",{className:k(Xb.getAnotherHintText),children:[this.context.strings.getAnotherHint," ",o]})]})]})}}const Xb=E.create({rendererMargins:{marginTop:Mh},linkButton:{cursor:"pointer",border:"none",backgroundColor:"transparent",fontSize:"100%",fontFamily:"inherit",fontWeight:"bold",color:Uh,padding:0,position:"relative"},plusText:{fontSize:20,position:"absolute",top:-3,left:0},getAnotherHintText:{marginLeft:16},mobileHintStylesHintsRenderer:{marginTop:64,border:`solid ${vh}`,borderWidth:"1px 0 0 0",position:"relative",":before":{content:'""',display:"table",clear:"both"},":after":{content:'""',display:"table",clear:"both"}},mobileHintStylesHintTitle:{fontFamily:"inherit",fontStyle:"normal",fontWeight:"bold",color:Eh,paddingTop:Mh,paddingBottom:24,[Ab.lgOrSmaller]:{paddingLeft:0},[Ab.smOrSmaller]:{paddingLeft:20}},getAnotherHintButton:{marginTop:24},mobileHintStylesGetAnotherHintButton:{[Ab.lgOrSmaller]:{paddingLeft:0},[Ab.smOrSmaller]:{paddingLeft:20}},mobileHintStylesPlusText:{[Ab.lgOrSmaller]:{left:0},[Ab.smOrSmaller]:{left:20}}}),Vb=vt.createContext({onRendered:e=>{}});class Gb extends vt.Component{static contextType=Ou;questionRenderer;hintsRenderer;_currentFocus;_fullyRendered;blurTimeoutID;userInput;static defaultProps={apiOptions:{},linterContext:T,onRendered:e=>{}};constructor(e){super(e),this.state={questionCompleted:!1,questionHighlightedWidgets:[],assetStatuses:{}},this._fullyRendered=!1,this.userInput={}}componentDidMount(){this._currentFocus=null,this._fullyRendered=!1,this.maybeCallOnRendered()}UNSAFE_componentWillReceiveProps(e){this.setState({questionHighlightedWidgets:[]})}componentDidUpdate(e,t){const n=this.props.apiOptions.answerableCallback;if(null!=n){n(0===this.questionRenderer.emptyWidgets().length)}if(this.maybeCallOnRendered(),this.props.score&&this.props.score!==e.score){const e=this.questionRenderer.emptyWidgets();this.setState({questionCompleted:this.props.score.correct,questionHighlightedWidgets:e})}}componentWillUnmount(){null!=this.blurTimeoutID&&(clearTimeout(this.blurTimeoutID),this.blurTimeoutID=null)}maybeCallOnRendered(){if(!this._fullyRendered){Object.values(this.state.assetStatuses).every(Boolean)&&(this._fullyRendered=!0,this.props.onRendered(!0))}}_handleFocusChange=(e,t)=>{null!=e?this._setCurrentFocus(e):this._onRendererBlur(t)};_setCurrentFocus(e){const{apiOptions:{isMobile:t,onFocusChange:n},keypadElement:r}=this.props,i=this._currentFocus;this._currentFocus=e;const s=this.getInputPaths(),a=this._currentFocus&&s.some(e=>nh.inputPathsEqual(e,this._currentFocus));null!=n&&setTimeout(()=>{const t=r?.getDOMNode(),s=t&&a?t.getBoundingClientRect().height:0;n(this._currentFocus,i,s,a&&this.questionRenderer.getDOMNodeForPath(e))},0),r&&t&&(a?r.activate():r.dismiss())}_onRendererBlur(e){const t=this._currentFocus;r.isEqual(e,t)&&(this.blurTimeoutID=setTimeout(()=>{r.isEqual(this._currentFocus,t)&&this._setCurrentFocus(null)},0))}focusPath(e){return this.questionRenderer.focusPath(e)}blurPath(e){return this.questionRenderer.blurPath(e)}getDOMNodeForPath(e){return this.questionRenderer.getDOMNodeForPath(e)}getInputPaths(){return this.questionRenderer.getInputPaths()}handleInteractWithWidget=e=>{const t=r.difference(this.state.questionHighlightedWidgets,[e]);this.setState({questionCompleted:!1,questionHighlightedWidgets:t},()=>{this.props.apiOptions?.interactionCallback?.(this.questionRenderer.getUserInputMap())})};focus(){return this.questionRenderer.focus()}blur(){this._currentFocus&&this.blurPath(this._currentFocus)}getNumHints(){return this.props.item.hints.length}getPromptJSON(){return this.questionRenderer.getPromptJSON()}getUserInputLegacy(){return this.questionRenderer.getUserInput()}getUserInput(){return this.userInput}getWidgetIds(){return this.questionRenderer.getWidgetIds()}getSerializedState(){return{question:this.questionRenderer.getSerializedState(),hints:this.hintsRenderer.getSerializedState()}}setAssetStatus=(e,t)=>{const n={...this.state.assetStatuses,[e]:t};this.setState({assetStatuses:n})};render(){const t={...Wg.defaults,...this.props.apiOptions,onFocusChange:this._handleFocusChange},n={assetStatuses:this.state.assetStatuses,setAssetStatus:this.setAssetStatus},r=e.jsx(Au.Provider,{value:n,children:e.jsx(Db,{widgets:this.props.item.question.widgets,problemNum:this.props.problemNum??0,children:({userInput:n,handleUserInput:r,initializeUserInput:i})=>(this.userInput=n,e.jsx(kb,{keypadElement:this.props.keypadElement,problemNum:this.props.problemNum,onInteractWithWidget:this.handleInteractWithWidget,highlightedWidgets:this.state.questionHighlightedWidgets,apiOptions:t,questionCompleted:this.state.questionCompleted,reviewMode:this.props.reviewMode,showSolutions:this.props.showSolutions,ref:e=>{null!=e&&(this.questionRenderer=e)},content:this.props.item.question.content,widgets:this.props.item.question.widgets,images:this.props.item.question.images,linterContext:A(this.props.linterContext,"question"),strings:this.context.strings,...this.props.dependencies,userInput:n,handleUserInput:(e,t,n)=>{r(e,t,n),this.handleInteractWithWidget(e)},initializeUserInput:i}))})}),i=e.jsx(Wb,{hints:this.props.item.hints,hintsVisible:this.props.hintsVisible,apiOptions:t,ref:e=>this.hintsRenderer=e,linterContext:A(this.props.linterContext,"hints"),strings:this.context.strings});return e.jsx($u.Provider,{value:this.props.dependencies,children:e.jsxs("div",{children:[e.jsx("div",{children:r}),e.jsx("div",{className:t.isMobile?void 0:k(Yb.hintsContainer),children:i})]})})}}const Yb=E.create({hintsContainer:{marginLeft:50}});vt.forwardRef(function(t,n){return e.jsx(Vb.Consumer,{children:({onRendered:r})=>e.jsx(Gb,{...t,item:t.item,dependencies:t.dependencies,onRendered:r,ref:n})})});const qb=E.create({srOnly:{border:0,clip:"rect(0,0,0,0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1}}),Zb=(e,t)=>{let n=null;return(...r)=>{n&&clearTimeout(n),n=window.setTimeout(()=>{e(...r)},t)}};class Kb extends vt.Component{static contextType=Ou;context;mouseDown;__mathFieldWrapperRef=null;__mathField=null;static defaultProps={value:"",convertDotToTimes:!1};state={focused:!1,keypadOpen:"always"===this.props.buttonsVisible,cursorContext:W.NONE};componentDidMount(){this.mathField()?.latex(this.props.value)}openKeypad(){"never"!==this.props.buttonsVisible&&this.setState({keypadOpen:!0})}closeKeypad(){this.setState({keypadOpen:!1})}insert=e=>{const t=this.mathField(),{locale:n}=this.context,i={...X(n,this.context.strings),FRAC:e=>{const t=e.latex();e.typedText("/"),e.latex()===t&&e.cmd("\\frac")}}[e];if(i)return i(t,e),void t?.focus();r(e).isFunction()?e(t):"\\"===e[0]?t?.cmd(e).focus():t?.write(e).focus(),t?.focus()};mathField=()=>{if(!this.__mathField&&this.__mathFieldWrapperRef){const{locale:e}=this.context;this.__mathField=V(this.__mathFieldWrapperRef,e,this.props.mathInputStrings,t=>({...t,handlers:{edit:Zb(t=>{let n=t.latex();if(n=n.replace(/<>/g,"\\ne"),te(e,this.props.convertDotToTimes)){n=n.replace(/\\cdot/g,"\\times");const e=t.cursor()[ne.L];e&&"\\cdot "===e.ctrlSeq&&(t.controller().backspace(),t.cmd("\\times"))}else n=n.replace(/\\times/g,"\\cdot");this.props.value!==n&&this.props.onChange(n),this.setState({cursorContext:G(t)})},100),enter:()=>{this.__mathFieldWrapperRef&&p(this.__mathFieldWrapperRef).submit()},upOutOf:e=>{e.typedText("^")}}}))}return this.__mathField?.setAriaLabel(this.props.ariaLabel),this.__mathField};focus=()=>{this.mathField()?.focus(),this.setState({focused:!0})};blur=()=>this.setState({focused:!1});handleKeypadPress=(e,t)=>{const{locale:n}=this.context,r=X(n,this.context.strings)[e],i=this.mathField();i&&(r&&r(i,e),this.setState({cursorContext:G(i)})),"click"===t?.type&&this.focus(),"DISMISS"===e&&this.closeKeypad()};render(){let t=f({"perseus-math-input":!0,"mq-editable-field":!0,"mq-math-mode":!0});const n=Y().slice(0,8);return this.props.className&&(t=t+" "+this.props.className),e.jsx(q,{style:[nU.outerWrapper,this.state.focused&&nU.wrapperFocused],children:e.jsxs("div",{style:{display:"flex",padding:1},onClick:e=>{e.stopPropagation();const t=this.mathField();t&&this.setState({cursorContext:G(t)})},children:[e.jsx("span",{className:t,ref:e=>this.__mathFieldWrapperRef=e,onFocus:()=>this.focus(),onBlur:()=>this.blur()}),e.jsx(Z,{opened:this.state.keypadOpen,dismissEnabled:!0,rootBoundary:"document","aria-label":this.context.strings.mathInputTitle,"aria-describedby":`popover-content-${n}`,content:()=>e.jsxs(e.Fragment,{children:[e.jsx(Q,{id:`popover-content-${n}`,style:qb.srOnly,children:this.context.strings.mathInputDescription}),e.jsx(J,{style:nU.popoverContent,children:e.jsx(ee,{onAnalyticsEvent:this.props.onAnalyticsEvent,extraKeys:this.props.extraKeys,onClickKey:this.handleKeypadPress,cursorContext:this.state.cursorContext,convertDotToTimes:this.props.convertDotToTimes,...this.props.keypadButtonSets??eU(this.props?.buttonSets),showDismiss:!0})})]}),children:"never"===this.props.buttonsVisible?e.jsx(Jb,{hovered:!1,focused:!1,active:!1}):e.jsx(K,{"aria-label":this.state.keypadOpen?this.context.strings.closeKeypad:this.context.strings.openKeypad,role:"button",onClick:()=>this.state.keypadOpen?this.closeKeypad():this.openKeypad(),children:t=>e.jsx(Jb,{active:this.state.keypadOpen,...t})})})]})})}}class Qb extends vt.Component{static contextType=$;context;inputRef=vt.createRef();static defaultProps={ariaLabel:"Math input"};blur(){this.inputRef.current?.blur()}focus(){this.inputRef.current?.focus()}insert(e){this.inputRef.current?.insert(e)}render(){return e.jsx(Kb,{...this.props,ref:this.inputRef,mathInputStrings:this.context.strings})}}const Jb=({hovered:t,focused:n,active:r})=>{let i;switch(!0){case n||r:i=U.white;break;case t:i=U.blue;break;default:i=U.offBlack}const s=r||n?nU.iconActive:nU.iconInactive;return e.jsx(q,{style:[nU.iconContainer,s],children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:i,viewBox:"0 0 256 256",children:e.jsx("path",{d:"M112,72a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16h64A8,8,0,0,1,112,72Zm-8,104H80V152a8,8,0,0,0-16,0v24H40a8,8,0,0,0,0,16H64v24a8,8,0,0,0,16,0V192h24a8,8,0,0,0,0-16Zm48,0h64a8,8,0,0,0,0-16H152a8,8,0,0,0,0,16Zm64,16H152a8,8,0,0,0,0,16h64a8,8,0,0,0,0-16Zm-61.66-90.34a8,8,0,0,0,11.32,0L184,83.31l18.34,18.35a8,8,0,0,0,11.32-11.32L195.31,72l18.35-18.34a8,8,0,0,0-11.32-11.32L184,60.69,165.66,42.34a8,8,0,0,0-11.32,11.32L172.69,72,154.34,90.34A8,8,0,0,0,154.34,101.66Z"})})})},eU=e=>{const t={};return e?(e.forEach(e=>{switch(e){case"advanced relations":t.advancedRelations=!0;break;case"basic relations":t.basicRelations=!0;break;case"basic+div":t.divisionKey=!0;break;case"logarithms":t.logarithms=!0;break;case"prealgebra":t.preAlgebra=!0;break;case"trig":t.trigonometry=!0;break;case"scientific":t.scientific=!0}}),t):t},tU={borderWidth:2,borderColor:U.blue,margin:-1},nU=E.create({iconContainer:{display:"flex",justifyContent:"center",height:"100%",padding:H.xxxSmall_4,borderRadius:1},iconInactive:{border:"2px solid transparent",backgroundColor:U.offBlack8},iconActive:{border:`2px solid ${U.white}`,backgroundColor:U.offBlack64},outerWrapper:{display:"inline-block",borderStyle:"solid",borderWidth:1,borderColor:U.offBlack50,borderRadius:3,background:U.white,":hover":tU},wrapperFocused:tU,popoverContent:{padding:0,paddingBottom:H.xxSmall_6,maxWidth:"initial"}}),rU={arctg:"arctan",cosec:"csc",cossec:"csc",cotg:"cot",ctg:"cot",sen:"sin",tg:"tan"},iU=e=>(e=>e.replace(/\\operatorname{([a-z]+)}/g,(e,t)=>`\\${rU[t]??t} `))(e);class sU extends vt.Component{static contextType=Ou;_textareaId=`expression_textarea_${Date.now()}`;_isMounted=!1;static defaultProps={times:!1,functions:[],buttonSets:["basic","trig","prealgebra","logarithms"],onFocus:()=>{},onBlur:()=>{},apiOptions:Wg.defaults,linterContext:T,userInput:""};displayName="Expression";componentDidMount=()=>{if(this._isMounted=!0,this.refs.input){const e=this.props.apiOptions.customKeypad?".mq-textarea > span":"textarea",t=n.findDOMNode(this.refs.input).querySelector(e);t?.setAttribute("id",this._textareaId)}};componentWillUnmount=()=>{this._isMounted=!1};getUserInput(){return iU(this.props.userInput)}getPromptJSON(){return e=this.props,t=iU(this.props.userInput),{type:"expression",label:e.visibleLabel,userInput:{value:t}};var e,t}changeAndTrack=(e,t)=>{this.props.handleUserInput(iU(e),t),this.props.trackInteraction()};_handleFocus=()=>{this.props.analytics?.onAnalyticsEvent({type:"perseus:expression-focused",payload:null}),this.props.onFocus([])};_handleBlur=()=>{this.props.onBlur([])};focus=()=>(this.props.apiOptions.customKeypad&&this.refs.input.focus(),!0);focusInputPath(e){this.refs.input.focus()}blurInputPath(e){"function"==typeof this.refs.input?.blur&&this.refs.input?.blur()}insert(e){this.refs.input.insert(e)}getInputPaths=()=>[[]];getKeypadConfiguration(){return{keypadType:"EXPRESSION",extraKeys:this.props.extraKeys,times:this.props.times}}getSerializedState(){const{userInput:e,answerForms:t,...n}=this.props;return{...n,value:this.props.userInput,keypadConfiguration:this.getKeypadConfiguration()}}render(){const t=this.getKeypadConfiguration();return this.props.apiOptions.customKeypad?e.jsxs(q,{className:k(aU.mobileLabelInputWrapper),children:[!!this.props.visibleLabel&&e.jsx(ie,{htmlFor:this._textareaId,tag:"label",children:this.props.visibleLabel}),e.jsx(se,{ref:"input",ariaLabel:this.props.ariaLabel||this.context.strings.mathInputBox,value:this.props.userInput,keypadElement:this.props.keypadElement,onChange:this.changeAndTrack,onFocus:()=>{this.props.keypadElement?.configure(t,()=>{this._isMounted&&this._handleFocus()})},onBlur:this._handleBlur})]}):e.jsxs(q,{className:k(aU.desktopLabelInputWrapper),children:[!!this.props.visibleLabel&&e.jsx(ie,{htmlFor:this._textareaId,tag:"label",children:this.props.visibleLabel}),e.jsx("div",{className:"perseus-widget-expression",children:e.jsx(Qb,{ref:"input",value:this.props.userInput,onChange:this.changeAndTrack,convertDotToTimes:this.props.times,buttonSets:this.props.buttonSets,onFocus:this._handleFocus,onBlur:this._handleBlur,ariaLabel:this.props.ariaLabel||this.context.strings.mathInputBox,extraKeys:t.extraKeys,onAnalyticsEvent:this.props.analytics?.onAnalyticsEvent??(async()=>{})})})]})}}const aU=E.create({mobileLabelInputWrapper:{padding:"15px 4px 0"},desktopLabelInputWrapper:{margin:"5px 5px 0"}});const oU={name:"expression",displayName:"Expression / Equation",widget:vt.forwardRef((t,n)=>{const r=Wu();return e.jsx(sU,{ref:n,analytics:r.analytics,...t})}),version:re.version,isLintable:!0,getOneCorrectAnswerFromRubric:function(e){const t=(e.answerForms||[]).filter(e=>"correct"===e.considered);if(0!==t.length)return t[0].value},getStartUserInput:function(){return""},getUserInputFromSerializedState:function(e){return iU(e.value)}};class lU extends vt.Component{static contextType=oe;_isMounted=!1;inputRef=vt.createRef();componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}focus(){this.inputRef.current?.focus(this.context.setKeypadActive)}blur(){this.inputRef.current?.blur()}getValue(){return this.props.value}render(){const t=this,{keypadElement:n,onFocus:r,value:i,...s}=t.props;return e.jsx(se,{ref:this.inputRef,keypadElement:n,onFocus:()=>{n?n.configure({keypadType:"FRACTION"},()=>{t._isMounted&&r?.()}):r?.()},value:null==i?"":""+i,...s})}}lU.propTypes={keypadElement:ae,onFocus:Ct.func,value:Ct.oneOfType([Ct.string,Ct.number])};let cU=0;class dU extends vt.Component{inputRef=vt.createRef();static defaultProps={value:"",disabled:!1};id;constructor(e){super(e),e.id?this.id=e.id:this.id=function(e="input-"){return cU++,`${e}${cU}`}()}_getInput=()=>{if(!this.inputRef.current)throw new u("Input ref accessed before set",h.Internal);return this.inputRef.current};focus=()=>{this._getInput().focus()};blur=()=>{this._getInput().blur()};getValue=()=>this.inputRef.current?.value;getStringValue=()=>this.inputRef.current?.value.toString();setSelectionRange=(e,t)=>{this._getInput().setSelectionRange(e,t)};getSelectionStart=()=>this._getInput().selectionStart;getSelectionEnd=()=>this._getInput().selectionEnd;render(){const{labelText:t,value:n,onFocus:r,onBlur:i,disabled:s,placeholder:a,onKeyDown:o,style:l}=this.props,c=null===n?"":n.toString(),d=t||void 0;return e.jsx(le,{ref:this.inputRef,style:l,disabled:s,id:this.id,value:c,type:"text","aria-label":d,"aria-describedby":this.props["aria-describedby"],onChange:e=>this.props.onChange(e),placeholder:a,testId:"input-with-examples",onFocus:r,onBlur:i,onKeyDown:o,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off"})}}const{captureScratchpadTouchStart:uU}=nh,hU=vt.forwardRef(function({shouldShowExamples:t=!0,onFocus:n=()=>{},onBlur:r=()=>{},disabled:i=!1,linterContext:s=T,className:a="",...o},l){const c=vt.useContext(Ou),d=vt.useRef(null),[u,h]=vt.useState(!1),p=vt.useId(),f=`aria-for-${p}`;vt.useImperativeHandle(l,()=>({current:d.current,focus:()=>{d.current&&d.current.focus()},blur:()=>{d.current&&d.current.blur()}}));const m=()=>{let e=Yg;return u&&(e+=" "+qg),a&&(e+=" "+a),e},g=()=>{n(),h(!0)},b=()=>{r(),h(!1)},U=o.examples.length<=2?o.examples.join(" "):o.examples.map((e,t)=>0===t&&e.startsWith("**")?`${e}\n`:`- ${e}`).join("\n"),y=t&&u;return e.jsx(ce,{content:e.jsx(de,{children:e.jsx("div",{id:p,className:"input-with-examples-tooltip",children:e.jsx(kb,{content:U,linterContext:A(s,"input-with-examples"),strings:c.strings})})}),opened:y,placement:"bottom",children:(()=>{const n=t?`${o.examples[0]}\n                   ${o.examples.slice(1).join(", or\n")}`.replaceAll("*","").replaceAll("$","").replaceAll("\\ \\text{pi}"," pi").replaceAll("\\ "," and "):"",r={id:p,"aria-describedby":t?f:void 0,ref:d,className:m(),labelText:o.labelText,value:o.value,onFocus:g,onBlur:b,disabled:i,style:o.style,onChange:o.onChange,onTouchStart:uU,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:"false"};return e.jsxs(e.Fragment,{children:[e.jsx(dU,{...r}),e.jsx("span",{id:f,style:{display:"none"},children:n})]})})()})}),pU={integer:function(e,t){return t.integerExample},proper:function(e,t){return"optional"===e.simplify?t.properExample:t.simplifiedProperExample},improper:function(e,t){return"optional"===e.simplify?t.improperExample:t.simplifiedImproperExample},mixed:function(e,t){return t.mixedExample},decimal:function(e,t){return t.decimalExample},percent:function(e,t){return t.percentExample},pi:function(e,t){return t.piExample}};class fU extends vt.Component{static contextType=Ou;static defaultProps={size:"normal",answerType:"number",rightAlign:!1,apiOptions:Wg.defaults,linterContext:T,userInput:{currentValue:""}};shouldShowExamples=()=>"number"!==this.props.answerType;handleChange=(e,t)=>{this.props.handleUserInput({currentValue:e},t)};_handleFocus=()=>{this.props.onFocus([])};_handleBlur=()=>{this.props.onBlur([])};focus=()=>(this.refs.input.focus(),!0);focusInputPath=e=>{this.refs.input.focus()};blurInputPath=e=>{"function"==typeof this.refs.input?.blur&&this.refs.input?.blur()};getInputPaths=()=>[[]];getPromptJSON(){return{type:"input-number",options:{simplify:(e=this.props).simplify,answerType:e.answerType},userInput:{value:e.userInput.currentValue}};var e}examples(){const{strings:e}=this.context,t=this.props.answerType,n=ue[t].forms.split(/\s*,\s*/).map(t=>pU[t](this.props,e));return[e.yourAnswer].concat(n)}getSerializedState(){return{alignment:this.props.alignment,static:this.props.static,simplify:this.props.simplify,size:this.props.size,answerType:this.props.answerType,rightAlign:this.props.rightAlign,currentValue:this.props.userInput.currentValue}}render(){if(this.props.apiOptions.customKeypad){const t=e.jsx(lU,{ref:"input",value:this.props.userInput.currentValue,keypadElement:this.props.keypadElement,onChange:this.handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur});return this.props.rightAlign?e.jsx("div",{className:"perseus-input-right-align",children:t}):t}const t=[mU.default,"small"===this.props.size?mU.small:null,this.props.rightAlign?mU.rightAlign:mU.leftAlign];return this.props.reviewMode&&!this.props.userInput.currentValue&&t.push(mU.answerStateUnanswered),e.jsx(hU,{ref:"input",value:this.props.userInput.currentValue,onChange:this.handleChange,style:t,examples:this.examples(),shouldShowExamples:this.shouldShowExamples(),onFocus:this._handleFocus,onBlur:this._handleBlur,id:this.props.widgetId,disabled:this.props.apiOptions.readOnly,linterContext:this.props.linterContext})}}const mU=E.create({default:{width:80,height:"auto",direction:"ltr"},small:{width:40},leftAlign:{paddingLeft:H.xxxSmall_4,paddingRight:0},rightAlign:{textAlign:"right",paddingLeft:0,paddingRight:H.xxxSmall_4},answerStateUnanswered:{backgroundColor:"#eee",border:"solid 1px #999"}});const gU={name:"input-number",displayName:"Input number (deprecated - use numeric input instead)",hidden:!0,widget:fU,isLintable:!0,getOneCorrectAnswerFromRubric:function(e){if(null==e.value)return;let t=String(e.value);return e.inexact&&e.maxError&&(t+=" ± "+e.maxError),t},getStartUserInput:function(){return{currentValue:""}},getUserInputFromSerializedState:function(e){return{currentValue:e.currentValue}}},bU={integer:(e,t)=>t.integerExample,proper:(e,t)=>"optional"===e.simplify?t.properExample:t.simplifiedProperExample,improper:(e,t)=>"optional"===e.simplify?t.improperExample:t.simplifiedImproperExample,mixed:(e,t)=>t.mixedExample,decimal:(e,t)=>t.decimalExample,pi:(e,t)=>t.piExample},UU=(e,t)=>{if(0===e.length)return[];const n=xU(e).map(e=>bU[e.name](e,t));return[t.yourAnswer].concat(n)},yU=e=>{if(0===e.length)return!1;return!(xU(e).map(e=>e.name).length>=Object.keys(bU).length)},xU=function(e){const t=new Set;return e.filter(e=>!t.has(e.name)&&(t.add(e.name),!0))};function vU(e){return null==e?[]:function(e){const t=e.flat(),n=xU(t),r=Object.keys(bU);return n.sort((e,t)=>r.indexOf(e.name)-r.indexOf(t.name))}(e.filter(e=>"correct"===e.status).map(e=>(e.answerForms||[]).map(t=>({simplify:e.simplify,name:t}))))}const wU=vt.forwardRef(function(t,n){const r=vt.useContext(Ou),i=vt.useRef(null),[s,a]=vt.useState(!1);vt.useImperativeHandle(n,()=>({current:i.current,focus:()=>{i.current&&(i.current?.focus(),a(!0))},blur:()=>{i.current&&(i.current?.blur(),a(!1))}}));const o=e=>{t.handleUserInput({currentValue:e}),t.trackInteraction()},l=()=>{t.onFocus([]),a(!0)},c=()=>{t.onBlur([]),a(!1)},d=E.create({inputWithExamples:{borderRadius:"3px",borderWidth:s?"2px":"1px",display:"inline-block",fontFamily:'Symbola, "Times New Roman", serif',fontSize:"18px",height:"32px",lineHeight:"18px",padding:s?"4px":"4px 5px",textAlign:t.rightAlign?"right":"left",width:"small"===t.size?40:80,direction:"ltr"}});if(t.apiOptions.customKeypad){const n=t.rightAlign?"perseus-input-right-align":void 0;return e.jsx("div",{className:n,children:e.jsx(lU,{ref:i,value:t.userInput.currentValue,keypadElement:t.keypadElement,onChange:o,onFocus:l,onBlur:c})})}return e.jsx(hU,{ref:i,value:t.userInput.currentValue,onChange:o,labelText:t.labelText,examples:UU(t.answerForms,r.strings),shouldShowExamples:yU(t.answerForms),onFocus:l,onBlur:c,id:t.widgetId,disabled:t.apiOptions.readOnly,style:d.inputWithExamples})});class SU extends vt.Component{inputRef=vt.createRef();static defaultProps={size:"normal",rightAlign:!1,apiOptions:Wg.defaults,coefficient:!1,answerForms:[],labelText:"",linterContext:T,userInput:{currentValue:""}};focus=()=>(this.inputRef.current?.focus(),!0);focusInputPath=()=>{this.inputRef.current?.focus()};blurInputPath=()=>{this.inputRef.current?.blur()};getInputPaths=()=>[[]];getPromptJSON(){return{type:"numeric-input",label:(e=this.props).labelText,userInput:{value:e.userInput.currentValue}};var e}getSerializedState(){const{userInput:e,answers:t,...n}=this.props;return{...n,currentValue:e.currentValue}}render(){return e.jsx(wU,{...this.props,answerForms:vU(this.props.answers),ref:this.inputRef})}}const EU={name:"numeric-input",displayName:"Numeric input",widget:SU,isLintable:!0,getOneCorrectAnswerFromRubric(e){const t=e.answers.filter(e=>"correct"===e.status).map(e=>{const t=e.answerForms&&e.answerForms[0]?e.answerForms[0]:"decimal";let n=Lp.toNumericString(e.value,t);return e.maxError&&(n+=" ± "+Lp.toNumericString(e.maxError,t)),n});if(0!==t.length)return t[0]},getStartUserInput:function(){return{currentValue:""}},getUserInputFromSerializedState:function(e){return{currentValue:e.currentValue}}},kU=(e,t)=>{const n=(e.choices||[]).map(e=>{const t={value:e.content,id:e.id};return e.rationale&&(t.rationale=e.rationale),t});return{type:"radio",hasNoneOfTheAbove:!!e.hasNoneOfTheAbove,options:n,userInput:{selectedOptions:t?.selectedChoiceIds??[]}}},CU={},_U=new Map;const MU=function({overflowX:t,overflowY:n,children:r,className:i,scrollDescription:s,style:a,role:o="group",id:l,...c}){const{strings:d}=zu(),u=vt.useRef(null),[h,p]=vt.useState(!1),[f,m]=vt.useState(!1),[g,b]=vt.useState(!1),U=vt.useId(),y=l||U,x=vt.useMemo(()=>window.innerWidth<=767?8:5,[]),v=vt.useCallback(e=>{if(!u.current||g)return;b(!0);const t=f&&"start"!==e||!f&&"start"===e?-100:100;u.current.scrollBy({left:t,behavior:"smooth"}),setTimeout(()=>{b(!1)},150)},[f,g]),w=vt.useCallback(()=>{if(!u.current)return;const{scrollLeft:e,scrollWidth:t,clientWidth:n}=u.current,r="rtl"===getComputedStyle(u.current).direction;m(r);const i=t>n+x;let a,o;p(i),r?(a=Math.abs(e)<t-n-x,o=e<-x):(a=e>x,o=e+n<t-x);const l={isScrollable:i,canScrollStart:a,canScrollEnd:o,isRTL:r,scroll:v,scrollDescription:s||d.scrollAnswers};_U.set(y,l)},[y,x,s,d.scrollAnswers,v]);vt.useEffect(()=>{const e=u.current;if(e)return w(),e.addEventListener("scroll",w),window.addEventListener("resize",w),()=>{e.removeEventListener("scroll",w),window.removeEventListener("resize",w),_U.delete(y)}},[r,w,y]);const S={overflowX:h&&"auto"===t?"scroll":t,overflowY:h&&"auto"===n?"scroll":n,scrollbarWidth:"thin",...a};return e.jsx("div",{...c,id:y,role:o,className:i,style:S,ref:u,children:r})};MU.Controls=function({target:t,scrollDescription:n}){const{strings:r}=zu(),[i,s]=vt.useState(null);if(vt.useEffect(()=>{if(!t)return;const e=()=>{const e=_U.get(t);e&&s(e)};e();const n=setInterval(e,100);return()=>{clearInterval(n)}},[t]),!i||!i.isScrollable)return null;const a=n||i.scrollDescription;return e.jsxs("div",{className:CU.scrollButtonsContainer,"aria-live":"polite",role:"group","aria-label":a,children:[e.jsx(he,{icon:i.isRTL?pe:fe,actionType:"neutral",kind:"secondary",size:"small",onClick:()=>i.isRTL?i.scroll("end"):i.scroll("start"),"aria-label":r.scrollStart,disabled:i.isRTL?!i.canScrollEnd:!i.canScrollStart}),e.jsx(he,{icon:i.isRTL?fe:pe,actionType:"neutral",kind:"secondary",size:"small",onClick:()=>i.isRTL?i.scroll("start"):i.scroll("end"),"aria-label":r.scrollEnd,disabled:i.isRTL?!i.canScrollStart:!i.canScrollEnd}),e.jsx(ie,{children:a})]})};const IU={base:"_base_dnwlh_1","is-correct":"_is-correct_dnwlh_37","is-wrong":"_is-wrong_dnwlh_37",icon:"_icon_dnwlh_62","circle-shape":"_circle-shape_dnwlh_103","square-shape":"_square-shape_dnwlh_118"},jU=t=>{const{checked:n,content:r,showCorrectness:i}=t,s=vt.useId(),a=r.labelledBy?`${s} ${r.labelledBy}`:void 0,o=i?"true":"false",l=n&&"correct"===i?ge:n&&"wrong"===i?be:void 0,c=l?e.jsx(me,{"aria-hidden":!0,className:IU.icon,icon:l}):void 0,d=[IU.base,IU[t.shape+"-shape"]];i&&d.push(IU["is-"+i]);const u=i?void 0:e=>{e.stopPropagation(),t.updateChecked(!n)};return e.jsxs("button",{"aria-describedby":r.describedBy,"aria-disabled":o,"aria-pressed":n,"aria-label":r.screenReader,"aria-labelledby":a,className:d.join(" "),id:s,type:"button",ref:t.buttonRef,onClick:u,children:[c,r.visible]})},TU={choice:"_choice_1i100_6","is-correct":"_is-correct_1i100_42","is-wrong":"_is-wrong_1i100_125"},RU=t=>{const n=t.showCorrectness,r=vt.useRef(null),i=t.isMultiSelect?"square":"circle",s=n?void 0:()=>{r.current?.click()},a=[TU.choice].concat(n?[TU["is-"+n]]:[]).join(" ");return e.jsxs("li",{className:a,onClick:s,children:[e.jsx(jU,{buttonRef:r,checked:t.checked,content:t.indicatorContent,shape:i,showCorrectness:n,updateChecked:t.updateChecked}),t.children]})},PU={container:"_container_1kr7k_1",content:"_content_1kr7k_83",instructions:"_instructions_1kr7k_92",rationale:"_rationale_1kr7k_103"};function AU(e,t){const n=t.letters.split(" ");return e<n.length?n[e]:" "}function NU(e){const t=[];if(e.choiceStates){const n=e.choiceStates;for(let r=0;r<n.length;r++)n[r].selected&&t.push(e.choices[r].id);return{selectedChoiceIds:t}}return{selectedChoiceIds:t}}function DU(e,t,n,i){const s=e.map((e,t)=>({...e,originalIndex:t,correct:Boolean(e.correct)}));return function(e){let t=null;const n=e.filter((e,n)=>!e.isNoneOfTheAbove||(t=e,!1));return t&&n.push(t),n}(function(e,t){const n=[[t.false,t.true],[t.no,t.yes]],i=e.map(e=>e.content);return n.some(e=>r.isEqual(i,e))?[e[1],e[0]]:e}(t?Ue(s,i):s,n))}const LU=({choices:t,countChoices:n,multipleSelect:r=!1,numCorrect:i,onChoiceChange:s,reviewMode:a})=>{const{strings:o}=zu(),l=vt.useId(),c=(({multipleSelect:e,countChoices:t,numCorrect:n,strings:r})=>e?ye(e,!!t,n)?r.chooseNumAnswers({numCorrect:String(n)}):r.chooseAllAnswers:r.chooseOneAnswer)({multipleSelect:r,countChoices:n,numCorrect:i,strings:o}),d=a?`${PU.choiceList} ${PU.reviewAnswers}`:PU.choiceList,u=vt.useId()+"-scroll";return e.jsxs(e.Fragment,{children:[e.jsxs("fieldset",{className:PU.container,"data-feature-flag":"feature flag is ON",children:[e.jsx("legend",{id:l,"aria-hidden":"true",className:PU.instructions,children:c}),e.jsx(MU,{id:u,overflowX:"auto",children:e.jsx("ul",{"aria-labelledby":l,className:d,children:e.jsx(OU,{choices:t,i18nStrings:o,onChoiceChange:s,reviewMode:a,multipleSelect:r})})})]}),e.jsx(MU.Controls,{target:u})]})},OU=t=>{const{choices:n,i18nStrings:r,multipleSelect:i,onChoiceChange:s,reviewMode:a}=t,o=vt.useId(),l=n.map((t,n)=>{const l=`${o}-choice-${n+1}`,c=AU(n,r),d={visible:c,screenReader:(a&&t.correct?r.choiceCorrect:r.choice)({letter:c}),labelledBy:l},u=a?t.correct?"correct":"wrong":void 0,h=t.isNoneOfTheAbove?r.noneOfTheAbove:t.content;let p;if(a&&t.hasRationale){const n=`${l}-rationale`;d.describedBy=n;const r="correct"===u?`${PU.rationale} ${PU.isCorrect}`:PU.rationale;p=e.jsx("div",{id:n,className:r,children:t.rationale})}return e.jsx(RU,{checked:t.checked,indicatorContent:d,isMultiSelect:i,showCorrectness:u,updateChecked:e=>{s(t.id,e)},children:e.jsxs("div",{className:PU.content,children:[e.jsx("div",{id:l,children:h}),p]})},t.id)});return e.jsx(e.Fragment,{children:l})};function FU(e,t,n,r){let i;return i="start"===t&&"start"===r?Range.START_TO_START:"start"===t&&"end"===r?Range.END_TO_START:"end"===t&&"start"===r?Range.START_TO_END:Range.END_TO_END,e.compareBoundaryPoints(i,n)}function zU(e,t){const n=e.cloneRange();return n.setEnd(t.endContainer,t.endOffset),n}function BU(e,t){return!(FU(e,"end",t,"start")<0||FU(t,"end",e,"start")<0)}function HU(e,t){return FU(e,"start",t,"start")<=0&&FU(e,"end",t,"end")>=0}function $U(e,t){if(!BU(e,t))return null;return zU(FU(e,"start",t,"start")<0?e:t,FU(e,"end",t,"end")>0?e:t)}function WU(e,t,n,r,i){let s=-1,a=r,o=i,l=0;for(;a<=o;){if(l++,l>2*t.length)throw new Error(`Assertion error: Binary search isn't terminating? lower=${a}, upper=${o}`);const r=Math.floor((a+o)/2);if("first"===n){FU(t[r],"end",e,"start")<=0?a=r+1:(s=r,o=r-1)}else{FU(t[r],"start",e,"end")>=0?o=r-1:(s=r,a=r+1)}}return s}function XU(e,t){const n={};let r=t.domRange,i=t.firstWordIndex,s=t.lastWordIndex;for(const l of Object.keys(e)){const t=e[l],a=$U(t.domRange,r);a?(r=a,i=Math.min(t.firstWordIndex,i),s=Math.max(t.lastWordIndex,s)):n[l]=t}const a={firstWordIndex:i,lastWordIndex:s,domRange:r},o=function(e){const t=`${(new Date).getTime()}`;if(!e.includes(t))return t;let n,r=0;do{n=`${t}-${r}`,r++}while(e.includes(n));return n}(Object.keys(n));return n[o]=a,n}function VU(e,t,n){for(const a of Object.keys(e)){if(HU(e[a].domRange,n))return null}const r=function(e,t){const n=WU(e,t,"first",0,t.length-1);if(n<0)return null;const r=WU(e,t,"last",n,t.length-1);return r<0?null:[n,r]}(n,t);if(!r)return null;const[i,s]=r;return{firstWordIndex:i,lastWordIndex:s,domRange:zU(t[i],t[s])}}function GU(e,t){const{firstWordIndex:n,lastWordIndex:r}=e.range,i=t[n];if(!i)throw new u(`first word index ${i} is out of bounds: must be 0–${t.length-1} inclusive`,h.InvalidInput,{metadata:{firstWord:i,wordRanges:JSON.stringify(t)}});const s=t[r];if(!s)throw new u(`last word index ${s} is out of bounds: must be 0–${t.length-1} inclusive`,h.InvalidInput,{metadata:{lastWord:s,wordRanges:JSON.stringify(t)}});return{firstWordIndex:n,lastWordIndex:r,domRange:zU(i,s)}}function YU(e){const{firstWordIndex:t,lastWordIndex:n}=e;return{range:{type:"word-indexes",firstWordIndex:t,lastWordIndex:n}}}function qU(e,t){return{left:e.left-t.left,top:e.top-t.top}}function ZU({left:e,top:t,width:n,height:r},i){return{...qU({left:e,top:t},i),width:n,height:r}}function KU(e){const t=[];return QU(e.commonAncestorContainer,e,t),t}function QU(e,t,n){const r=new Range;if(r.selectNodeContents(e),e.nodeType===Node.TEXT_NODE){const a=BU(i=t,s=r)?zU(FU(i,"start",s,"start")>0?i:s,FU(i,"end",s,"end")<0?i:s):null;a&&function(e,t,n){const r=e.parentElement,i=window.getComputedStyle(r);let s=null;if("string"==typeof i.lineHeight&&i.lineHeight.endsWith("px")){const e=parseFloat(i.lineHeight);isNaN(e)||(s=e)}const a=Array.from(t.getClientRects());for(const o of a){const e={left:o.left,top:o.top,height:o.height,width:o.width};if(null!==s){const t=s-e.height;e.top-=t,e.height=s}n.push(e)}}(e,a,n)}else if(e.nodeType===Node.ELEMENT_NODE){if(!BU(t,r))return;for(const r of Array.from(e.childNodes))QU(r,t,n)}var i,s}class JU extends vt.PureComponent{state={cachedHighlightRects:this._computeRects(this.props),tooltipIsHovered:!1};UNSAFE_componentWillReceiveProps(e){this.props.highlight===e.highlight&&this.props.offsetParent===e.offsetParent||this.setState({cachedHighlightRects:this._computeRects(e)})}_computeRects(e){const{highlight:t,offsetParent:n}=e,r=KU(t.domRange),{left:i,top:s}=n.getBoundingClientRect();return r.map(e=>ZU(e,{left:i,top:s}))}_rectIsHovered(e,t){const n=qU(t,{left:e.left,top:e.top});return 0<=n.left&&n.left<e.width&&0<=n.top&&n.top<e.height}isHovered(e){if(!e)return!1;const{offsetParent:t}=this.props,{cachedHighlightRects:n}=this.state,{left:r,top:i}=t.getBoundingClientRect(),s=qU(e,{left:r,top:i});return n.some(e=>this._rectIsHovered(e,s))}render(){const t=this.state.cachedHighlightRects;return e.jsx("div",{children:t.map((t,n)=>e.jsx("div",{className:k(ey.highlightRect),style:{position:"absolute",width:t.width,height:t.height,top:t.top,left:t.left,zIndex:this.props.zIndexes.belowContent}},n))})}}const ey=E.create({highlightRect:{background:"#fffabe"}});class ty extends vt.PureComponent{_getFocusRect(){const{focusNode:e,focusOffset:t,offsetParent:n}=this.props,r=document.createRange();r.setStart(e,t),r.setEnd(e,t);const i=r.getClientRects()[0];if(!i)return rh('[Highlighting] Known bug: Could not determine the focus position, so did not show an "Add Highlight" tooltip. https://app.asana.com/0/329800276300868/413878480039713 (see also /r/asana-links)'),null;const{left:s,top:a}=n.getBoundingClientRect();return ZU({left:i.left,top:i.top,width:i.width,height:i.height},{left:s,top:a})}render(){const t=this._getFocusRect();if(!t)return null;const n=e.jsx("div",{className:k(ny.tooltipLabel),onClick:this.props.onClick,children:this.props.label}),r={position:"absolute",left:t.left,top:`calc(${Math.round(t.top)}px + 0.95em)`,height:0};return e.jsx("div",{style:r,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,children:e.jsx(ce,{content:n,opened:!0,children:e.jsx("div",{})})})}}const ny=E.create({tooltipLabel:{userSelect:"none",fontFamily:'"Lato", sans-serif',padding:`10px ${H.medium_16}px`,cursor:"pointer"}});class ry extends vt.PureComponent{static contextType=Ou;state={hoveredHighlightKey:null,hoveringTooltipFor:null};_highlightRenderers={};componentDidMount(){this._updateEditListeners(!1,this.props.editable)}UNSAFE_componentWillReceiveProps(e){this._updateEditListeners(this.props.editable,e.editable),null==this.state.hoveredHighlightKey||this.state.hoveredHighlightKey in e.highlights||this.setState({hoveredHighlightKey:null}),null==this.state.hoveringTooltipFor||this.state.hoveringTooltipFor in e.highlights||this.setState({hoveringTooltipFor:null})}componentWillUnmount(){this._updateEditListeners(this.props.editable,!1)}_updateEditListeners(e,t){!e&&t?window.addEventListener("mousemove",this._handleMouseMove):e&&!t&&(window.removeEventListener("mousemove",this._handleMouseMove),this.setState({hoveredHighlightKey:null,hoveringTooltipFor:null}))}_handleMouseMove=e=>{const t={left:e.clientX,top:e.clientY},n=this._getHoveredHighlightKey(t);this.setState({hoveredHighlightKey:n})};_getHoveredHighlightKey(e){const{hoveringTooltipFor:t}=this.state;if("string"==typeof t)return t;return Object.keys(this.props.highlights).find(t=>{const n=this._highlightRenderers[t];return n&&n.isHovered(e)})}_renderTooltip(){const{hoveredHighlightKey:t}=this.state;if(null==t)return null;const n=this.props.highlights[t];return e.jsx(ty,{label:this.context.strings.removeHighlight,focusNode:n.domRange.endContainer,focusOffset:n.domRange.endOffset,offsetParent:this.props.offsetParent,onClick:()=>this.props.onRemoveHighlight(t),onMouseEnter:()=>this.setState({hoveringTooltipFor:t}),onMouseLeave:()=>this.setState({hoveringTooltipFor:null})})}render(){return e.jsxs("div",{children:[Object.keys(this.props.highlights).map(t=>e.jsx(JU,{ref:e=>{e?this._highlightRenderers[t]=e:delete this._highlightRenderers[t]},highlight:this.props.highlights[t],highlightKey:t,offsetParent:this.props.offsetParent,zIndexes:this.props.zIndexes},t)),this.props.editable&&this._renderTooltip()]})}}class iy extends vt.PureComponent{state={mouseState:"up",trackedSelection:null};componentDidMount(){this._updateListeners(!1,this.props.enabled)}componentDidUpdate(e){this.props.buildHighlight!==e.buildHighlight&&this._updateTrackedSelection(),this._updateListeners(e.enabled,this.props.enabled)}componentWillUnmount(){this._updateListeners(this.props.enabled,!1)}_updateListeners(e,t){!e&&t?(window.addEventListener("mousedown",this._handleMouseDown),window.addEventListener("mouseup",this._handleMouseUp),document.addEventListener("selectionchange",this._handleSelectionChange)):e&&!t&&(window.removeEventListener("mousedown",this._handleMouseDown),window.removeEventListener("mouseup",this._handleMouseUp),document.removeEventListener("selectionchange",this._handleSelectionChange),this.setState({mouseState:"up",trackedSelection:null}))}_computeFocusAndRange(){const e=document.getSelection();if(!e||0===e.rangeCount)return null;const t=e.getRangeAt(0);if(t.collapsed)return null;return{focusNode:e.focusNode,focusOffset:e.focusOffset,range:t}}_updateTrackedSelection(){const e=this._computeFocusAndRange();if(!e)return void this.setState({trackedSelection:null});const{focusNode:t,focusOffset:n,range:r}=e,i=this.props.buildHighlight(r);if(!i)return void this.setState({trackedSelection:null});const s={focusNode:t,focusOffset:n,proposedHighlight:i};this.setState({trackedSelection:s})}_handleSelectionChange=()=>{this._updateTrackedSelection(),"down"===this.state.mouseState&&this.setState({mouseState:"down-and-selecting"})};_handleMouseDown=()=>{this.setState({mouseState:"down"})};_handleMouseUp=()=>{this.setState({mouseState:"up"})};render(){const{mouseState:t,trackedSelection:n}=this.state,r="down-and-selecting"===t;return this.props.children?e.jsx("div",{children:this.props.children(n,r)}):null}}class sy extends vt.PureComponent{static contextType=Ou;_handleAddHighlight(e){this.props.onAddHighlight(e);const t=document.getSelection();t&&t.collapseToEnd()}_selectionIsValid(e){if(!e)return!1;const{contentNode:t}=this.props,n=new Range;n.selectNodeContents(t);const r=new Range;r.setStart(e.focusNode,e.focusOffset),r.collapse(!0);return BU(n,r)}render(){return e.jsx(iy,{buildHighlight:this.props.buildHighlight,enabled:this.props.editable,children:(t,n)=>e.jsxs("div",{children:[e.jsx(ry,{editable:this.props.editable&&!this._selectionIsValid(t),highlights:this.props.highlights,offsetParent:this.props.offsetParent,onRemoveHighlight:this.props.onRemoveHighlight,zIndexes:this.props.zIndexes}),this._selectionIsValid(t)&&!n&&e.jsx(ty,{label:this.context.strings.addHighlight,onClick:()=>this._handleAddHighlight(t.proposedHighlight),focusNode:t.focusNode,focusOffset:t.focusOffset,offsetParent:this.props.offsetParent})]})})}}class ay extends vt.PureComponent{_container;componentDidMount(){this._sendWordsUpdate()}componentDidUpdate(){this._sendWordsUpdate()}_sendWordsUpdate(){this.props.onWordsUpdate(this._getWordRanges())}_getWordRanges(){const e=this._container;if(!e)throw new u("invariant violation: `this._container` is not defined, but this method is only called after mount/update",h.NotAllowed);const t=e.ownerDocument.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,()=>NodeFilter.FILTER_ACCEPT,!1),n=[];let r=null;for(;t.nextNode();){const e=t.currentNode;if(e.nodeType===Node.ELEMENT_NODE){"inline"!==getComputedStyle(e).display&&(r=null)}else if(e.nodeType===Node.TEXT_NODE){const t=e.nodeValue,i=/\S+/g;let s,a=null;for(;null!==(s=i.exec(t));){const i=s.index,o=s.index+s[0].length;let l;0===i&&r?(l=r,l.setEnd(e,o)):(l=e.ownerDocument.createRange(),l.setStart(e,i),l.setEnd(e,o),n.push(l)),o===t.length&&(a=l)}r=a}}return n}render(){return e.jsx("div",{ref:e=>this._container=e,children:this.props.children})}}class oy extends vt.PureComponent{_container;_content;state={wordRanges:[]};_buildHighlight(e){return VU(this._getDOMHighlights(),this.state.wordRanges,e)}_getDOMHighlights(){const{serializedHighlights:e}=this.props,{wordRanges:t}=this.state,n={};for(const r of Object.keys(e))n[r]=GU(e[r],t);return n}_handleAddHighlight=e=>{const t=XU(this._getDOMHighlights(),e),n={};for(const r of Object.keys(t))n[r]=YU(t[r]);this.props.onSerializedHighlightsUpdate(n)};_handleRemoveHighlight=e=>{const{serializedHighlights:t}=this.props,n={...t};delete n[e],this.props.onSerializedHighlightsUpdate(n)};_handleWordsUpdate=e=>{this.setState({wordRanges:e})};render(){const t=this._getDOMHighlights();return e.jsxs("div",{className:k(ly.container),ref:e=>this._container=e,children:[e.jsx("div",{children:this.props.enabled&&this._container&&this._content&&e.jsx(sy,{buildHighlight:e=>this._buildHighlight(e),contentNode:this._content,editable:this.props.editable,highlights:t,offsetParent:this._container,zIndexes:{belowContent:0},onAddHighlight:this._handleAddHighlight,onRemoveHighlight:this._handleRemoveHighlight})}),e.jsx("div",{className:k(ly.content),ref:e=>this._content=e,children:e.jsx(ay,{onWordsUpdate:this._handleWordsUpdate,children:this.props.children})})]})}}const ly=E.create({container:{position:"relative",zIndex:0},content:{position:"relative",zIndex:1}});function cy(){return{currentRef:[],useRefs:!0,lastRef:0,firstSentenceRef:null,firstQuestionRef:null,lastFootnote:{id:0,text:""}}}class dy extends vt.Component{getRefContent=()=>this.props.refContent;render(){return e.jsx("span",{style:gy,children:"_"})}}class uy extends vt.Component{render(){return e.jsx("span",{style:gy,children:"_"})}}const hy=({id:t,number:n})=>{const{strings:r}=zu();return e.jsx("span",{className:"perseus-sr-only",children:r[t]({number:n})},"alt-text")},py={newline:S.defaultRules.newline,paragraph:S.defaultRules.paragraph,escape:S.defaultRules.escape,passageFootnote:{order:S.defaultRules.escape.order+.1,match:S.inlineRegex(/^\^/),parse:(e,t,n)=>{const r=n.lastFootnote.id+1,i={id:r,text:1===r?"*":""+r};return"*"===n.lastFootnote.text&&(n.lastFootnote.text=""+n.lastFootnote.id),n.lastFootnote=i,i},react:(t,n,r)=>e.jsx("sup",{children:t.text},r.key)},refStart:{order:S.defaultRules.escape.order+.2,match:function(e){const t=/^\{\{/.exec(e);if(t){let n=2,r=0;for(;n<e.length;){const t=e.slice(n,n+2);if("{{"===t)r++,n++;else if("}}"===t){if(!(r>0))break;r--,n++}n++}return t[1]=e.slice(2,n),t}return null},parse:(e,t,n)=>{if(!n.useRefs)return{ref:null,refContent:null};const i=n.lastRef+1;n.lastRef=i,n.currentRef.push(i);return{ref:i,refContent:t("(“"+e[1]+"”)\n\n",r.defaults({useRefs:!1},{currentRef:[],useRefs:!0,lastRef:0,firstSentenceRef:null,firstQuestionRef:null,lastFootnote:{id:0,text:""}}))}},react:(t,n,r)=>{const i=t.ref;if(null==i)return null;const s=n(t.refContent,{});return e.jsx(dy,{ref:fy+i,refContent:s},fy+i)}},refEnd:{order:S.defaultRules.escape.order+.3,match:S.inlineRegex(/^\}\}/),parse:(e,t,n)=>{if(!n.useRefs)return{ref:null};return{ref:n.currentRef.pop()||null}},react:(t,n,r)=>null!=t.ref?e.jsx(uy,{ref:my+t.ref},my+t.ref):null},squareLabel:{order:S.defaultRules.escape.order+.4,match:S.inlineRegex(/^\[\[(\w+)\]\]( *)/),parse:(e,t,n)=>(n.firstQuestionRef||(n.firstQuestionRef=e[1]),{content:e[1],space:e[2].length>0}),react:(t,n,r)=>[e.jsx("span",{className:"perseus-passage-square-label",style:by,"aria-hidden":"true",children:e.jsx("span",{style:Uy,children:t.content})},"visual-square"),e.jsx(hy,{id:"questionMarker",number:t.content},"alt-text"),t.space?" ":null]},circleLabel:{order:S.defaultRules.escape.order+.5,match:S.inlineRegex(/^\(\((\w+)\)\)( *)/),parse:(e,t,n)=>({content:e[1],space:e[2].length>0}),react:(t,n,r)=>[e.jsx("span",{className:"perseus-passage-circle-label",style:by,"aria-hidden":!0,children:e.jsx("span",{style:yy,children:t.content})},"visual-circle"),e.jsx(hy,{id:"circleMarker",number:t.content},"alt-text"),t.space?" ":null]},squareBracketRef:{order:S.defaultRules.escape.order+.6,match:S.inlineRegex(/^\[(\d+)\]( *)/),parse:(e,t,n)=>(n.firstSentenceRef||(n.firstSentenceRef=e[1]),{content:e[1],space:e[2].length>0}),react:(t,n,r)=>[e.jsxs("span",{className:"perseus-passage-bracket-label","aria-hidden":"true",children:["[",t.content,"]"]},"visual-brackets"),e.jsx(hy,{id:"sentenceMarker",number:t.content},"alt-text"),t.space?" ":null]},highlight:{order:S.defaultRules.escape.order+.7,match:S.inlineRegex(/^{highlighting.start}(.+?){highlighting.end}/),parse:(e,t,n)=>({content:e[1]}),react:(t,n,r)=>[e.jsx("span",{className:"perseus-highlight",children:t.content},0)]},reviewHighlight:{order:S.defaultRules.escape.order+.7,match:S.inlineRegex(/^{review-highlighting.start}(.+?){review-highlighting.end}/),parse:(e,t,n)=>({content:e[1]}),react:(t,n,r)=>[e.jsx("span",{className:"perseus-review-highlight",children:t.content},0)]},strong:S.defaultRules.strong,u:S.defaultRules.u,em:S.defaultRules.em,del:S.defaultRules.del,text:{...S.defaultRules.text,react:(t,n,r)=>e.jsx("span",{children:t.content},r.key)}},fy="start-ref-",my="end-ref-",gy={display:"inline-block",width:0,visibility:"hidden"},by={display:"inline",whiteSpace:"nowrap"},Uy={display:"inline-block",color:"rgb(255, 255, 255)",backgroundColor:"rgb(90, 90, 90)",paddingLeft:10,paddingRight:10,userSelect:"none",WebkitUserSelect:"none"},yy={display:"inline-block",color:"rgb(255, 255, 255)",backgroundColor:"rgb(90, 90, 90)",userSelect:"none",WebkitUserSelect:"none",width:22,height:22,borderRadius:"50%",textAlign:"center"},xy=S.parserFor(py),vy={parse:(e,t)=>{t=t||{};return xy(e+"\n\n",r.extend(t,{currentRef:[],useRefs:!0,lastRef:0,firstSentenceRef:null,firstQuestionRef:null,lastFootnote:{id:0,text:""}}))},output:S.reactFor(S.ruleOutput(py,"react")),START_REF_PREFIX:fy,END_REF_PREFIX:my,getInitialParseState:cy};class wy extends vt.Component{_line;measureLineHeight(){return this._line?this._line.clientHeight:0}render(){return e.jsx("div",{className:k(Sy.measurer),"aria-hidden":"true",children:e.jsx("div",{ref:e=>this._line=e,className:"paragraph",children:"Line Height Measurement"})})}}const Sy=E.create({measurer:{position:"absolute",top:0,left:0,visibility:"hidden",zIndex:-1}});class Ey extends vt.Component{static contextType=Ou;_contentRef;_lineHeightMeasurerRef;_onResize;_stylesAppiedTimer;static defaultProps={passageTitle:"",passageText:"",footnotes:"",showLineNumbers:!0,linterContext:T};isWidget=!0;state={nLines:null,startLineNumbersAfter:0,stylesAreApplied:!1,highlights:{}};componentDidMount(){this._updateState(),this._onResize=r.throttle(()=>{this.shouldRenderJipt()||(this._lineHeightMeasurerRef?.measureLineHeight(),this._updateState())},500),window.addEventListener("resize",this._onResize),this._stylesAppiedTimer=window.setTimeout(()=>{this.setState({stylesAreApplied:!0})},0)}shouldComponentUpdate(e,t){return!r.isEqual(this.props,e)||!r.isEqual(this.state,t)}componentDidUpdate(){this._updateState()}componentWillUnmount(){window.removeEventListener("resize",this._onResize),clearTimeout(this._stylesAppiedTimer)}_handleSerializedHighlightsUpdate=e=>{this.setState({highlights:e})};_updateState(){this.shouldRenderJipt()||this.setState({nLines:this._measureLines(),startLineNumbersAfter:this._getInitialLineNumber()})}_measureLines(){const e=t.findDOMNode(this._contentRef),n=p(e).height(),r=this._getLineHeight();return Math.round(n/r)}_getInitialLineNumber(){let e=!0;return this.props.findWidgets((t,n)=>"passage"===n.type&&(t===this.props.widgetId&&(e=!1),e)).filter(Cy).map(e=>e.getLineCount()).reduce((e,t)=>e+t,0)}_getLineHeight(){return this._lineHeightMeasurerRef?.measureLineHeight()||0}getLineCount(){return null!=this.state.nLines?this.state.nLines:this._measureLines()}_getStartRefLineNumber(e){const n=vy.START_REF_PREFIX+e,r=this.refs[n];if(!r)return null;const i=p(t.findDOMNode(r));let s=i.next();0===s.length&&(s=i);const a=s.offset().top;return this.state.startLineNumbersAfter+1+this._convertPosToLineNumber(a)}_getEndRefLineNumber(e){const n=vy.END_REF_PREFIX+e,r=this.refs[n];if(!r)return null;const i=p(t.findDOMNode(r));let s=i.prev();0===s.length&&(s=i);const a=s.height(),o=s.offset().top;let l=this._convertPosToLineNumber(o+a);return 0===a&&(l+=1),this.state.startLineNumbersAfter+l}_convertPosToLineNumber(e){const n=t.findDOMNode(this._contentRef),r=e-p(n).offset().top,i=this._getLineHeight();return Math.round(r/i)}_getRefContent(e){const t=vy.START_REF_PREFIX+e,n=this.refs[t];return n?n.getRefContent():null}getReference(e){const t=this._getStartRefLineNumber(e),n=this._getEndRefLineNumber(e);if(null==t||null==n)return null;return{startLine:t,endLine:n,content:this._getRefContent(e)}}getPromptJSON(){return{type:"passage",options:{passageTitle:(e=this.props).passageTitle,passageText:e.passageText,footnotes:e.footnotes}};var e}_renderInstructions(t){const n=t.firstQuestionRef,r=t.firstSentenceRef,{strings:i}=this.context;let s="";n&&(s+=i.symbolPassage({questionSymbol:"[["+n+"]]",questionNumber:n})),r&&(s+=i.symbolQuestion({sentenceSymbol:"["+r+"]"}));const a=vy.parse(s);return e.jsx("div",{className:"perseus-widget-passage-instructions",children:vy.output(a)})}shouldRenderJipt(){const{JIPT:e}=Hu();return e.useJIPT&&-1!==this.props.passageText.indexOf("crwdns")}_renderContent(t){const n=this.state.stylesAreApplied,r=!this.props.reviewMode;return e.jsx(oy,{editable:r,enabled:n,onSerializedHighlightsUpdate:this._handleSerializedHighlightsUpdate,serializedHighlights:this.state.highlights,children:e.jsxs("div",{ref:e=>this._contentRef=e,children:[e.jsx(wy,{ref:e=>this._lineHeightMeasurerRef=e}),vy.output(t)]})})}_hasFootnotes(){const e=this.props.footnotes;return!/^\s*$/.test(e)}_renderFootnotes(){const e=this.props.footnotes,t=vy.parse(e);return vy.output(t)}render(){const{strings:t}=this.context;let n;const i=this.state.nLines;this.props.showLineNumbers&&i&&(n=r.range(1,i+1).map(n=>{const r=n+this.state.startLineNumbersAfter;if(4===r){const n=t.lineLabel;return e.jsx("span",{className:"line-marker",children:n},"line-marker")}return e.jsx("span",{children:r},n)}));const s=vy.getInitialParseState(),a=this.props.passageText.replace(/("{1})([^"]*)("{1})/g,"“$2”"),o=vy.parse(a,s),l=/\S/.test(this.props.passageTitle);return e.jsx("div",{children:e.jsxs("div",{className:"perseus-widget-passage-container",children:[this._renderInstructions(s),e.jsxs("div",{className:"perseus-widget-passage",children:[l&&e.jsx("h3",{className:"passage-title",children:e.jsx(kb,{content:this.props.passageTitle,linterContext:this.props.linterContext,strings:t})}),n&&e.jsx("div",{className:"line-numbers","aria-hidden":!0,children:n}),!l&&e.jsx("h3",{className:"perseus-sr-only",children:t.beginningPassage}),e.jsx("div",{className:"passage-text",children:this.shouldRenderJipt()?e.jsx(kb,{content:this.props.passageText,strings:t}):this._renderContent(o)}),this._hasFootnotes()&&[e.jsx("h4",{className:"perseus-sr-only",children:t.beginningFootnotes},"footnote-start"),e.jsx("div",{className:"footnotes",children:this._renderFootnotes()},"footnotes")],e.jsx("div",{className:"perseus-sr-only",children:t.endPassage})]})]})})}}const ky={name:"passage",displayName:"Passage (SAT only)",hidden:!0,widget:Ey,isLintable:!0};function Cy(e){return e instanceof Ey}class _y extends vt.Component{static contextType=Ou;displayName="PassageRef";_isMounted;_throttledUpdateRange;static defaultProps={passageNumber:1,referenceNumber:1,summaryText:""};isWidget=!0;state={lineRange:null,content:null};componentDidMount(){this._isMounted=!0,this._deferredUpdateRange(),this._throttledUpdateRange=r.throttle(this._deferredUpdateRange,500),window.addEventListener("resize",this._throttledUpdateRange)}shouldComponentUpdate(e,t){return!r.isEqual(this.props,e)||!r.isEqual(this.state,t)}componentDidUpdate(){this._deferredUpdateRange()}componentWillUnmount(){window.removeEventListener("resize",this._throttledUpdateRange),this._isMounted=!1}getPromptJSON(){return{type:"passage-ref",options:{passageNumber:(e=this.props).passageNumber,referenceNumber:e.referenceNumber,summaryText:e.summaryText??""}};var e}_deferredUpdateRange=()=>{r.defer(this._updateRange)};_updateRange=()=>{const e=this.props.findWidgets("passage "+this.props.passageNumber).filter(Cy)[0],t=e?.getReference(this.props.referenceNumber);this._isMounted&&(t?this.setState({lineRange:[t.startLine,t.endLine],content:t.content}):this.setState({lineRange:null,content:null}))};render(){const{strings:t}=this.context,n=this.state.lineRange;let r,i;if(r=n?n[0]===n[1]?t.lineNumber({lineNumber:String(n[0])}):t.lineRange({lineRange:n[0]+"–"+n[1]}):t.lineRange({lineRange:"?–?"}),this.props.summaryText){const t=lb.parseInline(this.props.summaryText);i=e.jsxs("span",{"aria-hidden":!0,children:[" ","(“",lb.basicOutput(t),"”)"]})}else i=null;return e.jsxs("span",{children:[r,i,n&&e.jsx("div",{className:"perseus-sr-only",children:this.state.content})]})}}const My={name:"passage-ref",displayName:"PassageRef (SAT only)",hidden:!0,widget:_y,version:xe.version},Iy=vt.forwardRef(function(t,n){const{choices:r=[],multipleSelect:i=!1,countChoices:s=!1,showSolutions:a="none",choiceStates:o,reviewModeRubric:l,questionCompleted:c,static:d,apiOptions:u,onChange:h,trackInteraction:p,findWidgets:f,reviewMode:m}=t,{strings:g}=zu();vt.useImperativeHandle(n,()=>({getPromptJSON:()=>kU(t,t.userInput)}),[t]);const b=(t="")=>{const{parsedContent:n,extractedWidgets:r}=(e=>{let t=1;const n={};return{parsedContent:e.replace(/\{\{passage-ref (\d+) (\d+)(?: "([^"]*)")?\}\}/g,(e,r,i,s)=>{const a="passage-ref "+t;return t++,n[a]={type:"passage-ref",graded:!1,options:{passageNumber:parseInt(r),referenceNumber:parseInt(i),summaryText:s},version:My.version},"[["+nh.snowman+" "+a+"]]"}),extractedWidgets:n}})(t);return e.jsx(kb,{content:n,widgets:r,findExternalWidgets:f,alwaysUpdate:!0,linterContext:{contentType:"radio",highlightLint:!1,paths:[],stack:[]},strings:g},"choiceContentRenderer")},U=(()=>{const e=(({choices:e,isStatic:t,showSolutions:n,choiceStates:r})=>{const i={selected:!1,readOnly:!1,highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1};return t||"all"===n?e.map(e=>({...i,selected:!!e.correct,readOnly:!0,rationaleShown:!0,correctnessShown:!0})):r||e.map(()=>({...i}))})({choices:r,isStatic:d,showSolutions:a,choiceStates:o});return t=e,r.map((e,n)=>{const r=e.isNoneOfTheAbove&&!e.content?g.noneOfTheAbove:e.content,{selected:i,rationaleShown:s,correctnessShown:a,readOnly:o,previouslyAnswered:d}=t[n],u=l?.choices[n];return{id:e.id,content:b(r),checked:i,correct:void 0===e.correct?!!u&&!!u.correct:e.correct,disabled:o,hasRationale:!!e.rationale,rationale:b(e.rationale),showRationale:s,showCorrectness:a,isNoneOfTheAbove:!!e.isNoneOfTheAbove,revealNoneOfTheAbove:!(!c||!i),previouslyAnswered:d}});var t})(),y=t.numCorrect,x=m||d||"all"===a,v=u.readOnly||x?()=>{}:(e,t)=>{const n=[];if(t&&!i)n.push(e);else if(t&&i){const t=o?o.map((e,t)=>({selected:e.selected,id:r[t].id})).filter(e=>e.selected).map(e=>e.id):[];n.push(...t,e)}else{const t=o?o.map((e,t)=>({selected:e.selected,id:r[t].id})).filter(t=>t.selected&&t.id!==e).map(e=>e.id):[];n.push(...t)}const s=o?o.map(e=>({...e})):r.map(()=>({selected:!1,highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1,readOnly:!1}));s.forEach((e,t)=>{const i=r[t].id;e.selected=n.includes(i)}),h({choiceStates:s}),p()};return e.jsx(LU,{reviewMode:x,multipleSelect:i,countChoices:s,numCorrect:y,choices:U,onChoiceChange:v})});"undefined"==typeof HTMLElement||HTMLElement.prototype.scrollTo||(HTMLElement.prototype.scrollTo=function(e,t){this.scrollLeft=e,this.scrollTop=t});const jy=(e,t)=>{"function"==typeof e.scrollTo?e.scrollTo(0,t):"scrollTop"in e&&(e.scrollTop=t)},Ty=e=>e===document.body||null==e?window:e.scrollHeight>e.clientHeight?e:Ty(e.parentElement),Ry=(e,t)=>{setTimeout(()=>{const t=Ty(e),n=e.getBoundingClientRect(),r=t===window?{top:0,bottom:window.innerHeight}:t.getBoundingClientRect();let i=0;const s=t===window?window.scrollY:t.scrollTop;if(n.bottom>r.bottom){let e=n.bottom-r.bottom;n.top+e<r.top&&(e=n.top-r.top),i=s+e}else if(n.top<r.top){i=s+(n.top-r.top)}((e,t,n=0)=>{const r=e===window?window.pageYOffset:e.scrollTop,i=t,s=i-r,a=n/17;let o=0;const l=setInterval(function(){if(o<a){const t=o/a,n=(1-Math.cos(Math.PI*t))/2;jy(e,r+s*n),o+=1}else jy(e,i),clearInterval(l)},17)})(t,i,750)},0)};const Py=function({visible:t=!0,color:n=Uh,multipleSelect:r=!1,children:i}){const s={borderColor:t?n:"transparent",borderRadius:r?5:"50%"};return e.jsx("span",{"data-testid":"focus-ring",className:k(Ay.ring),style:s,children:i})},Ay=E.create({ring:{margin:"auto",display:"inline-block",borderWidth:2,padding:2,borderStyle:"solid"}}),Ny=24,Dy=E.create({iconWrapper:{display:"inline-block",position:"relative"}});function Ly(t){const{pos:n,showCorrectness:r,correct:i}=t,{strings:s}=zu(),a=AU(n,s);return r?i?e.jsx(mm,{...gm,style:{position:"relative",top:-1}}):e.jsx(mm,{...km}):e.jsx("span",{children:a})}const Oy=function(t){const{checked:n,showCorrectness:r,correct:i,focused:s,hovered:a,multipleSelect:o,pos:l,previouslyAnswered:c,pressed:d}=t,u=n||r&&!i&&c,h=[Fy.choiceBase,o?Fy.multiSelectShape:Fy.singleSelectShape,r?Fy.choiceHasIcon:Fy.choiceHasLetter,u?Fy.choiceIsChecked:Fy.choiceIsUnchecked];return r&&i&&n?h.push(Fy.choiceCorrect):r&&!i&&(n||c)?h.push(Fy.choiceIncorrect):n?h.push(Fy.choiceNeutral):d?h.push(Fy.activeNeutral):h.push(Fy.uncheckedColors),e.jsx("div",{className:k(Dy.iconWrapper),children:e.jsx(Py,{color:U.blue,visible:s||a,multipleSelect:o,children:e.jsx("div",{"data-testid":"choice-icon__library-choice-icon",className:k(...h),"data-is-radio-icon":!0,children:e.jsx("div",{className:k(Fy.innerWrapper),children:e.jsx(Ly,{pos:l,showCorrectness:r,correct:i})})})})})},Fy=E.create({innerWrapper:{width:Ny,height:Ny,display:"flex",alignItems:"center",justifyContent:"center"},choiceBase:{width:Ny,height:Ny,boxSizing:"border-box",borderStyle:"solid",borderWidth:2,fontFamily:gh,fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center"},choiceHasLetter:{fontSize:12},choiceHasIcon:{fontSize:Ny},choiceIsChecked:{color:U.white},choiceIsUnchecked:{color:U.offBlack64},choiceCorrect:{backgroundColor:U.green,borderColor:U.green},choiceIncorrect:{backgroundColor:U.red,borderColor:U.red},choiceNeutral:{backgroundColor:U.blue,borderColor:U.blue},activeNeutral:{color:U.blue,borderColor:U.blue,backgroundColor:"transparent"},multiSelectShape:{borderRadius:3},singleSelectShape:{borderRadius:Ny},uncheckedColors:{borderColor:U.offBlack64}});function zy(e,t,n){return t?e?n.correctSelected:n.correct:e?n.incorrectSelected:n.incorrect}const By=function(t){const{checked:n,correct:r,previouslyAnswered:i,reviewMode:s}=t,{strings:a}=zu();if(!s&&!i)return null;let o;return o=r?Hy.correct:n||i?Hy.incorrectAnswered:Hy.incorrect,e.jsx("div",{className:k(Hy.text,o),children:zy(n,r,a)})},Hy=E.create({text:{alignItems:"center",display:"flex",fontSize:12,height:32,textTransform:"uppercase"},correct:{color:U.green},incorrectAnswered:{color:U.red},incorrect:{color:U.offBlack64}}),$y=function(t){const{disabled:n=!1,checked:r=!1,content:i,showCorrectness:s,multipleSelect:a,onChange:o=e=>{},reviewMode:l,correct:c=!1,apiOptions:d=Wg.defaults,previouslyAnswered:u=!1,pos:h=0,showRationale:p=!1,rationale:m,forwardedRef:g}=t,[b,y]=vt.useState(!1),{strings:x}=zu();function v(e){const t=e.checked??r;o({checked:t})}vt.useEffect(()=>{b&&n&&y(!1)},[n,b,y]);const w=f("description",k(Wy.description)),S=f("perseus-radio-rationale-content",k(Wy.rationale)),E=!l&&d.readOnly,C=function(e,t,n,r,i){return r&&n?t?i.choiceCheckedCorrect({letter:e}):i.choiceCorrect({letter:e}):r&&!n?t?i.choiceCheckedIncorrect({letter:e}):i.choiceIncorrect({letter:e}):t?i.choiceChecked({letter:e}):i.choice({letter:e})}(AU(h,x),r,c,s,x);return e.jsxs("div",{style:{dispay:"flex",flexDirection:"column",color:U.offBlack},className:w,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"row",opacity:E?.5:1,overflowX:"auto",overflowY:"hidden"},children:[e.jsx("div",{className:"perseus-sr-only",children:e.jsxs("label",{children:[C,"   ",i,e.jsx("input",{type:a?"checkbox":"radio",checked:r,onClick:()=>{v({checked:!r})},onChange:()=>{},disabled:n||d.readOnly,tabIndex:-1,className:Zg.OPTION_CONTENT})]})}),e.jsx(K,{onClick:()=>{v({checked:!r})},disabled:n||d.readOnly,style:{flex:1,color:U.offBlack,userSelect:"text"},ref:g,"aria-hidden":"true",children:({hovered:t,focused:n,pressed:o})=>e.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"center",paddingTop:H.xSmall_8,paddingBottom:H.xSmall_8,paddingLeft:H.xSmall_8},children:[e.jsx(Oy,{pos:h,correct:c,pressed:o,focused:n,checked:r,hovered:t,showCorrectness:s,multipleSelect:a,reviewMode:l,previouslyAnswered:u}),e.jsxs("span",{style:{paddingLeft:H.small_12,textAlign:"left",flex:1,paddingTop:4},children:[e.jsx("div",{children:e.jsx(By,{checked:r,correct:c,previouslyAnswered:u,reviewMode:l})}),e.jsx("div",{children:i})]})]})})]}),p&&e.jsx("div",{className:S,"data-testid":`perseus-radio-rationale-content-${h}`,children:m})]})},Wy=E.create({description:{display:"inline-block",width:"100%"},rationale:{display:"block",padding:"16px 16px",paddingTop:0,marginLeft:54,color:U.offBlack64,[Ab.smOrSmaller]:{padding:"12px 16px",paddingTop:0}}}),Xy=vt.forwardRef(function(t,n){return e.jsx($y,{...t,forwardedRef:n})}),Vy=function({content:t,forwardedRef:n,showContent:r=!0,...i}){const{strings:s}=zu(),a={...i,content:r?t:e.jsx(kb,{content:s.noneOfTheAbove,strings:s},"noneOfTheAboveRenderer")};return e.jsx(Xy,{...a,ref:n})},Gy=vt.forwardRef(function(t,n){return e.jsx(Vy,{...t,forwardedRef:n})}),{captureScratchpadTouchStart:Yy}=nh;const qy=function({apiOptions:t,reviewModeRubric:i,reviewMode:s,choices:a,editMode:o=!1,multipleSelect:l=!1,labelWrap:c,countChoices:d,numCorrect:u,isLastUsedWidget:h,onChange:p,registerFocusFunction:m}){const{strings:g}=zu(),b=vt.useRef(),U=vt.useRef([]);function y(e,t){const n=[];if(t&&!l)n.push(e);else if(t&&l){const t=a.filter(e=>e.checked).map(e=>e.id);n.push(...t,e)}else{const t=a.filter(t=>t.checked&&t.id!==e).map(e=>e.id);n.push(...t)}p(n)}vt.useEffect(()=>{if(t.canScrollPage&&h&&i&&!b.current){const e=a.findIndex(e=>e.checked);if(e>=0){const t=U.current[e],r=n.findDOMNode(t.current);r&&Ry(r)}}b.current=i},[t,a,h,i]),m?.(e=>{const t=U.current[e||0],r=n.findDOMNode(t.current);return!!r&&(r.focus(),!0)});const x=t.isMobile,v=a[0].highlighted,w=a[a.length-1].highlighted,S=f("perseus-widget-radio",!o&&"perseus-rendered-radio",k(Zy.radio,Zy.responsiveRadioContainer,v&&x&&Zy.radioContainerFirstHighlighted,w&&x&&Zy.radioContainerLastHighlighted)),E=f("instructions",k(Zy.instructions,x&&Zy.instructionsMobile)),C=function(e,t,n,r){return e?ye(e,!!t,n)?r.chooseNumAnswers({numCorrect:String(n)}):r.chooseAllAnswers:r.chooseOneAnswer}(l,d,u,g),_=k(Zy.responsiveFieldset),M=e.jsxs("fieldset",{className:`perseus-widget-radio-fieldset ${_}`,children:[e.jsx("legend",{className:"perseus-sr-only",children:C}),e.jsx("div",{className:E,"aria-hidden":"true",children:C}),e.jsx("ul",{className:S,style:{listStyle:"none"},children:a.map((n,d)=>{let u=Xy;const h=vt.createRef();U.current[d]=h;const p={id:n.id,apiOptions:t,multipleSelect:l,checked:n.checked,previouslyAnswered:n.previouslyAnswered,reviewMode:s,correct:n.correct,rationale:n.rationale,content:n.content,disabled:t.readOnly||n.disabled,showCorrectness:s||!!n.showCorrectness,showRationale:n.hasRationale&&(s||n.showRationale),pos:d,onChange:e=>{o||y(n.id,e.checked)}};n.isNoneOfTheAbove&&(u=Gy,r.extend(p,{showContent:n.revealNoneOfTheAbove}));const m=a[d+1],g=!!m&&m.highlighted,b=e=>k(Zy.item,Zy.responsiveItem,e&&Zy.selectedItem,e&&n.highlighted&&Zy.aboveBackdrop,e&&n.highlighted&&t.isMobile&&Zy.aboveBackdropMobile,g&&t.isMobile&&Zy.nextHighlighted);let x;b(!0),s&&i&&(x=i.choices[d].correct?Kg:Qg);const v=f(b(n.checked),Zg.OPTION,n.checked&&Zg.SELECTED,x);let w,S=null;return o&&(w=e=>{let t=e.target;for(;t&&t!==S;){if(t.getAttribute("data-is-radio-icon"))return void y(n.id,!n.checked);t=t.parentNode}}),e.jsx("li",{ref:e=>S=e,className:v,onClick:w,onTouchStart:c?void 0:Yy,children:e.jsx(u,{...p,ref:h})},n.id)})})]});return e.jsx("div",{className:k(Zy.responsiveContainer),children:M})},Zy=E.create({instructions:{display:"block",color:Eh,fontSize:14,lineHeight:1.25,fontFamily:"inherit",fontStyle:"normal",fontWeight:"bold",marginBottom:16},instructionsMobile:{fontSize:18,[Ab.smOrSmaller]:{fontSize:16},[Ab.xl]:{fontSize:20}},radio:{padding:0},responsiveRadioContainer:{borderBottom:`1px solid ${Ah}`,borderTop:`1px solid ${Ah}`,width:"auto",[Ab.smOrSmaller]:{marginLeft:_h,marginRight:_h}},radioContainerFirstHighlighted:{borderTop:"1px solid rgba(0, 0, 0, 0)"},radioContainerLastHighlighted:{borderBottom:"1px solid rgba(0, 0, 0, 0)"},item:{marginLeft:20},responsiveItem:{marginLeft:0,padding:0,":not(:last-child)":{borderBottom:`1px solid ${Ah}`}},selectedItem:{background:"white"},aboveBackdrop:{position:"relative",zIndex:1062},aboveBackdropMobile:{boxShadow:"0 0 4px 0 rgba(0, 0, 0, 0.2),0 0 2px 0 rgba(0, 0, 0, 0.1)",":not(:last-child)":{borderBottom:"1px solid rgba(0, 0, 0, 0)"}},nextHighlighted:{":not(:last-child)":{borderBottom:"1px solid rgba(0, 0, 0, 0)"}},responsiveContainer:{overflow:"auto",marginLeft:_h,paddingLeft:Ch},responsiveFieldset:{paddingRight:Ch,minWidth:"auto"}});let Ky=class extends vt.Component{static contextType=Ou;focusFunction;static defaultProps={choices:[],multipleSelect:!1,countChoices:!1,deselectEnabled:!1,linterContext:T,showSolutions:"none"};_renderRenderer=(t="")=>{let n=1;const r={},i=t.replace(/\{\{passage-ref (\d+) (\d+)(?: "([^"]*)")?\}\}/g,(e,t,i,s)=>{const a="passage-ref "+n;return n++,r[a]={type:"passage-ref",graded:!1,options:{passageNumber:parseInt(t),referenceNumber:parseInt(i),summaryText:s},version:My.version},"[["+nh.snowman+" "+a+"]]"});return e.jsx(kb,{content:i,widgets:r,findExternalWidgets:this.props.findWidgets,alwaysUpdate:!0,linterContext:{...this.props.linterContext,blockHighlight:!0},strings:this.context.strings},"choiceContentRenderer")};focus(e){return!!this.focusFunction&&this.focusFunction(e)}registerFocusFunction(e){this.focusFunction=e}updateChoices=e=>{const{choiceStates:t,choices:n}=this.props,r=t?t.map(e=>({...e})):n.map(()=>({selected:!1,highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1,readOnly:!1}));r.forEach((t,r)=>{const i=n[r].id;t.selected=e.includes(i)}),this.props.onChange({choiceStates:r}),this.props.trackInteraction()};getPromptJSON(){return kU(this.props,this.props.userInput)}render(){const{choices:t}=this.props,{strings:n}=this.context;let r;r=this.props.static?t.map(e=>({selected:!!e.correct,crossedOut:!1,readOnly:!0,highlighted:!1,rationaleShown:!0,correctnessShown:!0,previouslyAnswered:!1})):"all"===this.props.showSolutions?t.map(({correct:e})=>({selected:!!e,crossedOut:!1,readOnly:!0,highlighted:!1,rationaleShown:!0,correctnessShown:!0,previouslyAnswered:!1})):this.props.choiceStates?this.props.choiceStates:t.map(()=>({selected:!1,crossedOut:!1,readOnly:!1,highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1}));const i=t.map((e,t)=>{const i=e.isNoneOfTheAbove&&!e.content?n.noneOfTheAbove:e.content,{selected:s,rationaleShown:a,correctnessShown:o,readOnly:l,highlighted:c,previouslyAnswered:d}=r[t],u=this.props.reviewModeRubric?.choices[t];return{id:e.id,content:this._renderRenderer(i),checked:s,correct:void 0===e.correct?!!u&&!!u.correct:e.correct,disabled:l,hasRationale:!!e.rationale,rationale:this._renderRenderer(e.rationale),showRationale:a,showCorrectness:o,isNoneOfTheAbove:!!e.isNoneOfTheAbove,revealNoneOfTheAbove:!(!this.props.questionCompleted||!s),highlighted:c,previouslyAnswered:d}});return e.jsx(qy,{labelWrap:!0,multipleSelect:this.props.multipleSelect,countChoices:this.props.countChoices,numCorrect:this.props.numCorrect,choices:i,onChange:this.updateChoices,reviewModeRubric:this.props.reviewModeRubric,reviewMode:this.props.reviewMode,deselectEnabled:this.props.deselectEnabled,apiOptions:this.props.apiOptions,isLastUsedWidget:this.props.isLastUsedWidget,registerFocusFunction:e=>this.registerFocusFunction(e)})}};function Qy(e){return e.map(()=>({highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1,readOnly:!1}))}const Jy={name:"radio",displayName:"Radio / Multiple choice",widget:class extends Ky{ffIsOn=!1;radioRef=vt.createRef();state={choiceStates:[]};constructor(e){super(e),this.ffIsOn=e.apiOptions.flags?.["new-radio-widget"]??!1,this.state={choiceStates:Qy(e.choices)}}UNSAFE_componentWillUpdate(e){r.isEqual(e.choices,this.props.choices)||this.setState({choiceStates:Qy(e.choices)})}getSerializedState(){const{userInput:e,randomize:t,...n}=this._mergePropsAndState();return{...n,hasNoneOfTheAbove:n.hasNoneOfTheAbove??!1}}getPromptJSON(){return this.radioRef.current.getPromptJSON()}_handleChange(e){const t=e.choiceStates;if(!t)throw new Error("unhandled onChange call in Radio!");this.setState({choiceStates:t.map(e=>{const{selected:t,...n}=e;return{...n}})},()=>{const e=this._mergePropsAndState(),n=NU({...e,choiceStates:ve(e.choiceStates||[]).map((e,n)=>({...e,selected:t[n].selected}))});this.props.handleUserInput(n)})}_mergePropsAndState(){const e=(this.props.problemNum??0)+(this.props.widgetIndex??0),t=[...DU(this.props.choices,this.props.randomize,this.context.strings,e)];return{...this.props,choices:t,choiceStates:this.state.choiceStates&&this.state.choiceStates.length===t.length?this.state.choiceStates.map((e,n)=>{const r=t[n];return{...e,selected:this.props.userInput?.selectedChoiceIds.includes(r.id)??!1}}):t.map((e,t)=>({selected:this.props.userInput?.selectedChoiceIds.includes(e.id)??!1,highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1,readOnly:!1})),onChange:e=>this._handleChange(e)}}focus(e){return!!this.radioRef.current?.focus&&this.radioRef.current.focus(e)}render(){const t=this._mergePropsAndState();return this.ffIsOn?e.jsx(Iy,{ref:this.radioRef,...t}):e.jsx(Ky,{ref:this.radioRef,...t})}},getStartUserInput:function(){return{selectedChoiceIds:[]}},getCorrectUserInput:function(e){return{selectedChoiceIds:e.choices.filter(e=>e.correct).map(e=>e.id)}},version:we.version,isLintable:!0,getUserInputFromSerializedState:e=>NU(e)},ex=[Jy,gU,EU,oU];class tx extends vt.Component{static contextType=Ou;static defaultProps={items:[],categories:[],linterContext:T,userInput:{values:[]}};state={uniqueId:r.uniqueId("perseus_radio_")};getSerializedState(){const{userInput:e,...t}=this.props;return{...t,values:e.values}}getPromptJSON(){return{type:"categorizer",options:{items:(e=this.props).items,categories:e.categories},userInput:{itemToCategoryMapping:e.userInput.values}};var e}_handleUserInput(e,t){const n=[...this.props.userInput.values];n[e]=t,this.props.handleUserInput({values:n}),this.props.trackInteraction()}render(){const t=this,n=this.props.apiOptions.isMobile;let r=this.props.items.map((e,t)=>[e,t]);this.props.randomizeItems&&(r=Ue(r,this.props.problemNum));const i=e.jsxs("table",{className:"categorizer-table "+k(nx.mobileTable),children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("td",{className:k(nx.emptyHeaderCell)}),this.props.categories.map((t,n)=>e.jsx("th",{className:k(nx.header),children:e.jsx(kb,{content:t,linterContext:this.props.linterContext,strings:this.context.strings})},n))]})}),e.jsx("tbody",{children:r.map(r=>{const i=r[0],s=r[1],a=t.state.uniqueId+"_"+s;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(kb,{content:i,linterContext:this.props.linterContext,strings:this.context.strings})}),t.props.categories.map((r,i)=>{const o=t.props.userInput.values[s]===i;return e.jsx("td",{className:"category "+k(nx.cell),children:e.jsxs("div",{role:"button","aria-label":r,onClick:()=>this._handleUserInput(s,i),children:[n&&e.jsx("input",{type:"radio",name:a,className:k($b.responsiveInput,$b.responsiveRadioInput),checked:o,onChange:()=>this._handleUserInput(s,i),onClick:e=>e.stopPropagation()}),!n&&e.jsx("span",{className:k(nx.radioSpan,o&&nx.checkedRadioSpan,this.props.static&&o&&nx.staticCheckedRadioSpan),children:o?e.jsx(mm,{...Um}):e.jsx(mm,{...ym})})]})},i)})]},s)})})]}),s=f({"categorizer-container":!0,"static-mode":this.props.static}),a=this.props.apiOptions.isMobile?[nx.fullBleedContainer]:[];return e.jsx("div",{className:s+" "+k(...a),children:i})}}const nx=E.create({mobileTable:{[Ab.smOrSmaller]:{minWidth:"auto"}},fullBleedContainer:{[Ab.mdOrSmaller]:{marginLeft:-16,marginRight:-16,overflowX:"auto"}},header:{textAlign:"center",verticalAlign:"bottom"},cell:{textAlign:"center",padding:0,color:"#ccc",verticalAlign:"middle"},emptyHeaderCell:{backgroundColor:"inherit",borderBottom:"2px solid #ccc"},radioSpan:{fontSize:30,paddingRight:3,":hover":{color:"#999"}},checkedRadioSpan:{color:"#333"},staticCheckedRadioSpan:{color:"#888"}});const rx={name:"categorizer",displayName:"Categorizer",hidden:!0,widget:tx,getUserInputFromSerializedState:function(e){return{values:e.values}},getCorrectUserInput:function(e){return{values:e.values}},getStartUserInput:function(){return{values:[]}},isLintable:!0};let ix;const sx=e=>new URL(e,(ix||(ix=window.location),ix).origin),ax=e=>sx(e).href,ox=(e,t="")=>({type:e,isSupported:!1,message:t}),{updateQueryString:lx}=nh;class cx extends vt.Component{static defaultProps={showEditor:!1,showButtons:!1,userInput:{status:"incomplete",message:null}};componentDidMount(){p(window).on("message",this.handleMessageEvent)}componentWillUnmount(){p(window).off("message",this.handleMessageEvent)}handleMessageEvent=e=>{let t={};try{t=JSON.parse(e.originalEvent.data)}catch{return}if(r.isUndefined(t.testsPassed))return;const n=t.testsPassed?"correct":"incorrect";this.props.handleUserInput({status:n,message:t.message})};getPromptJSON(){return ox("cs-program")}getSerializedState(){const{userInput:e,alignment:t,...n}=this.props;return{...n,programType:n.programType||null}}render(){if(!this.props.programID)return e.jsx("div",{});let t,n=!1,i=function(e){const{InitialRequestUrl:t}=Hu(),n=`/computer-programming/program/${e}/embedded?embed=yes&author=no`;return(r=t.protocol)&&"file:"===r.toLowerCase()?`https://khanacademy.org${n}`:ax(n);var r}(this.props.programID);const s={height:this.props.height,width:"100%"};if(this.props.showEditor?(i+="&editor=yes",t="perseus-scratchpad-editor"):(i+="&editor=no&width=688",t="perseus-scratchpad","webpage"!==this.props.programType&&(n=!0)),this.props.showButtons?(i+="&buttons=yes",s.height+=67):i+="&buttons=no",this.props.settings){const e={};r.each(this.props.settings,function(t){t.name&&t.value&&(e[t.name]=t.value)}),i=lx(i,"settings",JSON.stringify(e))}const a=["allow-popups","allow-same-origin","allow-scripts","allow-top-navigation"].join(" ");return e.jsx("div",{className:k(n&&dx.container),children:e.jsx("iframe",{sandbox:a,src:i,style:s,className:t,allowFullScreen:!0})})}}const dx=E.create({container:{margin:"auto"}});const ux={name:"cs-program",displayName:"CS Program",widget:cx,hidden:!0,getStartUserInput:function(){return{status:"incomplete",message:null}},getUserInputFromSerializedState:function(e){return{status:e.status,message:e.message}}};class hx extends vt.Component{static contextType=Ou;static defaultProps={togglePrompt:"define me",definition:"definition goes here"};isWidget=!0;getPromptJSON(){return{type:"definition",definition:(e=this.props).definition,togglePrompt:e.togglePrompt};var e}render(){return e.jsx(jg,{children:({activeDefinitionId:t,setActiveDefinitionId:n})=>e.jsx(Z,{content:e.jsx(J,{style:px.tooltipBody,closeButtonVisible:!0,children:e.jsx(kb,{apiOptions:this.props.apiOptions,content:this.props.definition,widgets:this.props.widgets,strings:this.context.strings})}),opened:t===this.props.widgetId,onClose:()=>n(null),placement:"top",children:e.jsx(K,{onClick:()=>{this.props.trackInteraction(),n(this.props.widgetId)},children:({hovered:t,focused:n,pressed:r})=>e.jsx("span",{style:{color:U.blue,borderBottom:t||n||r?`2px solid ${U.blue}`:"none"},children:this.props.togglePrompt})})})})}}const px={tooltipBody:{color:U.offBlack,fontSize:20,fontWeight:500,lineHeight:"30px"}},fx={name:"definition",displayName:"Definition",widget:hx};class mx extends St.Component{static contextType=Ou;isWidget=!0;render(){return e.jsx("div",{style:{paddingTop:8,paddingBottom:8},children:e.jsx(Se,{text:this.context.strings.deprecatedStandin,kind:"info",layout:"full-width"})})}}const gx={name:"deprecated-standin",displayName:"Deprecated Standin",widget:mx,hidden:!0};class bx extends vt.Component{static contextType=Ou;static defaultProps={choices:[],placeholder:"",apiOptions:Wg.defaults,userInput:{value:0}};focus=()=>(n.findDOMNode(this).focus(),!0);_handleChangeEvent=e=>{this._handleChange(parseInt(e.target.value))};_handleChange=e=>{this.props.trackInteraction(),this.props.handleUserInput({value:e})};getPromptJSON(){return{type:"dropdown",options:{items:(e=this.props).choices.map(e=>e.content)},userInput:{selectedIndex:e.userInput.value-1}};var e}getSerializedState(){const{userInput:e,choices:t,...n}=this.props;return{...n,choices:t.map(e=>e.content),selected:e.value}}render(){const t=[e.jsx(Ee,{value:"0",disabled:!0,label:e.jsx(kb,{content:this.props.placeholder,strings:this.context.strings}),labelAsText:this.props.placeholder},"placeholder"),...this.props.choices.map((t,n)=>e.jsx(Ee,{value:String(n+1),label:e.jsx(kb,{content:t.content,strings:this.context.strings}),labelAsText:t.content},String(n+1)))];return e.jsx(ke,{children:n=>e.jsxs(q,{onClick:e=>{e.stopPropagation()},onTouchStart:e=>{e.stopPropagation()},children:[this.props.visibleLabel&&e.jsx(Ce,{tag:"label",htmlFor:n,children:this.props.visibleLabel}),e.jsx(_e,{id:n,placeholder:"",className:"perseus-dropdown",onChange:e=>this._handleChange(parseInt(e)),selectedValue:String(this.props.userInput.value),disabled:this.props.apiOptions.readOnly,"aria-label":this.props.ariaLabel||this.props.visibleLabel||this.context.strings.selectAnAnswer,showOpenerLabelAsText:!1,children:t})]})})}}const Ux={name:"dropdown",displayName:"Drop down",widget:bx,getStartUserInput:function(){return{value:0}},getUserInputFromSerializedState:function(e){return{value:e.selected}}};class yx extends vt.Component{static contextType=Ou;static defaultProps={showPrompt:"Explain",hidePrompt:"Hide explanation",explanation:"explanation goes here\n\nmore explanation",widgets:{},linterContext:T};isWidget=!0;state={expanded:!1};_mounted=!1;componentDidMount(){this._mounted=!0}componentWillUnmount(){this._mounted=!1}_onClick=()=>{this.setState({expanded:!this.state.expanded}),this.props.trackInteraction()};getPromptJSON(){return{type:"explanation",showPrompt:(e=this.props).showPrompt,explanation:e.explanation};var e}render(){const t=this.state.expanded?this.props.hidePrompt:this.props.showPrompt,n=this.state.expanded?Me:Ie,r=this._mounted&&(i="(prefers-reduced-motion: no-preference)","function"==typeof window.matchMedia&&window.matchMedia(i).matches);var i;const s={height:"auto",lineHeight:"inherit",marginLeft:"-2px",marginRight:"2px",paddingLeft:"2px"},a={fontSize:"18px",lineHeight:"inherit","text-align":"left",marginRight:"-6px","white-space":"normal"},o=[xx.content,this.state.expanded?xx.contentExpanded:xx.contentCollapsed,r&&(this.state.expanded?xx.transitionExpanded:xx.transitionCollapsed)];return e.jsx(ke,{children:r=>e.jsxs(e.Fragment,{children:[e.jsx(je,{"aria-expanded":this.state.expanded,"aria-controls":r,endIcon:n,kind:"tertiary",labelStyle:a,onClick:this._onClick,size:"small",style:s,children:t}),e.jsx(q,{id:r,style:o,"aria-hidden":!this.state.expanded,testId:"content-container",children:e.jsx(q,{style:xx.contentWrapper,children:e.jsx(kb,{apiOptions:this.props.apiOptions,content:this.props.explanation,widgets:this.props.widgets,linterContext:this.props.linterContext,strings:this.context.strings})})})]})})}}const xx=E.create({content:{borderLeft:"0px solid #ccc",display:"inline-grid",position:"relative"},contentCollapsed:{gridTemplateColumns:"0fr",gridTemplateRows:"0fr",marginBottom:0,marginTop:0,minWidth:"0",paddingBottom:0,visibility:"hidden"},contentExpanded:{borderLeftWidth:"5px",gridTemplateColumns:"1fr",gridTemplateRows:"1fr",marginLeft:-23,minWidth:"100%",paddingLeft:23,paddingBottom:10,visibility:"visible",marginBottom:14,marginTop:14},contentWrapper:{overflow:"hidden"},transitionCollapsed:{transition:"all 0.25s step-end, grid-template-rows 0.25s, margin-top 0.25s, margin-bottom 0.25s, padding-bottom 0.25s"},transitionExpanded:{transition:"grid-template-rows 0.5s, margin-top 0.5s, margin-bottom 0.5s, padding-bottom 0.5s"}}),vx={name:"explanation",displayName:"Explanation",widget:yx,isLintable:!0};class wx extends vt.Component{static contextType=Ou;isWidget=!0;static defaultProps={userInput:{currentValue:""}};characterCount=()=>this.props.userInput.currentValue.replace(/\n/g,"").length;_handleUserInput=e=>{this.props.handleUserInput({currentValue:e})};isOverLimit(){return!this.props.allowUnlimitedCharacters&&this.characterCount()>this.props.characterLimit}renderCharacterCount(){if(this.props.allowUnlimitedCharacters)return null;const t=this.context.strings.characterCount({used:this.characterCount(),num:this.props.characterLimit});return e.jsx(q,{children:e.jsxs(Pe,{role:"status",style:[kx.characterCountText,this.isOverLimit()?kx.overCharacterLimit:void 0],children:[this.isOverLimit()&&e.jsx(me,{icon:Ae,size:"small",style:kx.warningCircleIcon}),t]})})}render(){return e.jsxs(q,{style:kx.container,className:"free-response",children:[e.jsx(Ne,{label:e.jsx(q,{className:"free-response-question",children:e.jsx(kb,{content:this.props.question,strings:this.context.strings})}),field:e.jsx(De,{error:this.isOverLimit(),onChange:this._handleUserInput,placeholder:this.props.placeholder,style:kx.textarea,value:this.props.userInput.currentValue})}),this.renderCharacterCount()]})}}function Sx(){return{currentValue:""}}const Ex={name:"free-response",accessible:!0,displayName:"Free Response (Assessments only)",widget:wx,hidden:!1,getUserInputFromSerializedState:Sx,getStartUserInput:Sx},kx=E.create({container:{gap:H.xSmall_8},characterCountText:{color:Re.core.foreground.neutral.default,fontSize:Te.size.small},overCharacterLimit:{color:U.red},textarea:{padding:H.medium_16},warningCircleIcon:{marginInlineEnd:H.xSmall_8}});class Cx extends vt.Component{static contextType=Ou;render(){const{apiOptions:t,answerBarState:n,onCheckAnswer:r,onNextQuestion:i}=this.props,{keepTrying:s,tryAgain:a,check:o,correctExcited:l,nextQuestion:c}=this.context.strings,d={..._x.answerBar,backgroundColor:"CORRECT"===n?U.offWhite:"white",justifyContent:"CORRECT"!==n||i?"space-between":"center"},u="INCORRECT"===n?e.jsxs("span",{style:_x.text,children:[e.jsx("span",{style:_x.tryAgainIcon,children:e.jsx(mm,{...Sm})}),e.jsx("span",{style:{marginLeft:8},children:s})]}):e.jsx("span",{});if("CORRECT"!==n){const i="INCORRECT"===n?a:o;return e.jsxs("div",{style:d,children:[u,e.jsx(je,{disabled:t.readOnly||"ACTIVE"!==n,onClick:r,children:i})]})}return e.jsxs("div",{style:d,children:[e.jsxs("span",{style:_x.text,children:[e.jsx("span",{style:{fontSize:28,color:U.green},children:e.jsx(mm,{...wm,style:{marginBottom:5}})}),e.jsx("span",{role:"alert","aria-label":l,style:{marginLeft:8},children:l})]}),i&&e.jsx(je,{onClick:i,children:c})]})}}const _x={answerBar:{display:"flex",alignItems:"center",height:68,marginLeft:_h,marginRight:_h,marginBottom:_h,marginTop:Ch,paddingLeft:Ch,paddingRight:10,borderTop:`1px solid ${U.offBlack50}`},tryAgainIcon:{fontSize:28,color:"#63D9EA",transform:"scale(-1,1) rotate(-268deg)"},text:{display:"flex",flexDirection:"row",alignItems:"center",fontWeight:"bold",fontSize:17}},Mx="ungraded",Ix="correct",jx="incorrect",Tx="invalid";class Rx extends vt.Component{static contextType=Ou;static defaultProps={title:"",content:"",widgets:{},images:{},hint:null,hasHint:!1,linterContext:T};state={status:Mx,showHint:!1,message:"",answerBarState:"INACTIVE"};rendererRef=vt.createRef();hintRendererRef=vt.createRef();shouldComponentUpdate(e,t){return e!==this.props||t!==this.state}_handleUserInput(e,t){this.setState({status:Mx,message:""});const n=!t,r=((e,t)=>{switch(e){case"ACTIVE":return t?e:"INACTIVE";case"INACTIVE":return t?"ACTIVE":e;case"INCORRECT":return t?"ACTIVE":"INACTIVE";default:return e}})(this.state.answerBarState,n);this.setState({answerBarState:r})}_checkAnswer=()=>{const e=this.rendererRef.current?.score()||{type:"invalid"},{INVALID_MESSAGE_PREFIX:t,DEFAULT_INVALID_MESSAGE_1:n,DEFAULT_INVALID_MESSAGE_2:r}=this.context.strings,i="points"===e.type?e.total===e.earned?Ix:jx:Tx,s="points"===e.type?e.message||"":e.message?`${t} ${a=e.message,o=this.context.strings,a&&o[Du[a]]||a}`:`${t} ${n}${r}`;var a,o;this.setState({status:i,message:s,answerBarState:"correct"===i?"CORRECT":"INCORRECT"}),this.props.trackInteraction({status:i})};getInputPaths=()=>this.rendererRef.current?.getInputPaths()||[];getPromptJSON(){const e=this.hintRendererRef.current?.getPromptJSON()||{content:this.props.hint?.content||"",widgets:{}};return t=this.props.title,n=this.rendererRef.current?.getPromptJSON(),r=e,n?{...n,title:t,type:"graded-group",hint:r}:{type:"graded-group",title:t,content:"",widgets:{},hint:r};var t,n,r}focus=()=>!!this.rendererRef.current?.focus();focusInputPath=e=>{this.rendererRef.current?.focusPath(e)};blurInputPath=e=>{this.rendererRef.current?.blurPath(e)};render(){const t=r.extend({},Wg.defaults,this.props.apiOptions,{onFocusChange:(e,t)=>{t&&this.props.onBlur(t),e&&this.props.onFocus(e)}});let n=null,i=null;this.state.status===Ix?(i=e.jsx(mm,{...xm,style:{color:"#526f03"}}),n=this.context.strings.correct):this.state.status===jx&&(i=e.jsx(mm,{...vm,style:{color:"#ff5454"}}),n=this.context.strings.incorrect);const s=this.props.inGradedGroupSet?k(Px.gradedGroupInSet):k(Px.gradedGroup),a=f({[s]:t.isMobile,"perseus-graded-group":!0,"answer-correct":!t.isMobile&&this.state.status===Ix,"answer-incorrect":!t.isMobile&&this.state.status===jx}),{answerBarState:o}=this.state,l="CORRECT"===o,c=t.readOnly||t.isMobile&&l,d=l?"all":"none";return e.jsxs("div",{className:a,children:[!!this.props.title&&e.jsx("div",{className:k(Px.title),children:this.props.title}),e.jsx(Db,{widgets:this.props.widgets,handleUserInput:(e,t)=>this._handleUserInput(e,t),problemNum:0,children:({userInput:n,handleUserInput:r})=>e.jsx(kb,{content:this.props.content,widgets:this.props.widgets,images:this.props.images,userInput:n,handleUserInput:r,problemNum:0,ref:this.rendererRef,keypadElement:this.props.keypadElement,apiOptions:{...t,readOnly:c},showSolutions:d,linterContext:this.props.linterContext,strings:this.context.strings})}),!t.isMobile&&e.jsxs(e.Fragment,{children:[null!=i&&e.jsx("div",{className:"group-icon",children:i}),n&&e.jsx("div",{className:k(qb.srOnly),role:"alert","aria-label":n,children:n}),e.jsx("p",{role:"status","aria-live":"polite",children:this.state.message}),e.jsx(je,{kind:"secondary",disabled:this.props.apiOptions.readOnly,onClick:this._checkAnswer,children:this.context.strings.check}),l&&this.props.onNextQuestion&&e.jsx(je,{kind:"secondary",disabled:this.props.apiOptions.readOnly,onClick:this.props.onNextQuestion,style:{marginLeft:5},children:this.context.strings.nextQuestion})]}),this.props.hint?.content&&(this.state.showHint?e.jsxs("div",{children:[e.jsx("button",{tabIndex:"0",className:k(Px.explanationTitle),onClick:()=>this.setState({showHint:!1}),onKeyPress:e=>{e.preventDefault(),this.setState({showHint:!1})},children:this.context.strings.hideExplanation}),e.jsx(Db,{widgets:this.props.hint.widgets,problemNum:0,children:({userInput:n,handleUserInput:r,initializeUserInput:i})=>{const{content:s,widgets:a,images:o}=this.props.hint;return e.jsx(kb,{content:s,widgets:a,images:o,userInput:n,handleUserInput:r,initializeUserInput:i,ref:this.hintRendererRef,apiOptions:t,linterContext:this.props.linterContext,strings:this.context.strings,showSolutions:d})}})]}):e.jsx("button",{tabIndex:"0",onClick:()=>this.setState({showHint:!0}),onKeyPress:e=>{e.preventDefault(),this.setState({showHint:!0})},className:k(Px.showHintLink),children:this.context.strings.explain})),t.isMobile&&e.jsx(Cx,{apiOptions:t,answerBarState:o,onCheckAnswer:this._checkAnswer,onNextQuestion:this.props.onNextQuestion})]})}}const Px=E.create({gradedGroupInSet:{marginLeft:0,paddingLeft:0},gradedGroup:{borderTop:`1px solid ${wh}`,borderBottom:`1px solid ${wh}`,backgroundColor:kh,marginLeft:_h,marginRight:_h,paddingBottom:Ch,paddingLeft:Ch,paddingRight:Ch,paddingTop:10,width:"auto"},showHintLink:{backgroundColor:"unset",fontSize:14,padding:0,border:"none",marginTop:20,color:U.blue,cursor:"pointer",display:"block",clear:"both"},explanationTitle:{backgroundColor:"unset",marginTop:20,color:U.blue,marginBottom:10,cursor:"pointer",fontSize:14,padding:0,border:"none",display:"block",clear:"both"},title:{fontSize:12,color:Sh,textTransform:"uppercase",marginBottom:11,letterSpacing:.8}}),Ax={name:"graded-group",displayName:"Graded group (articles only)",widget:Rx,hidden:!1,tracking:"all",isLintable:!0};class Nx extends vt.Component{static contextType=Ou;handleKeyDown=(e,t)=>{"Enter"!==e.key&&" "!==e.key||this.props.onChangeCurrentGroup(t)};render(){return e.jsx("ul",{className:f(k(Ox.indicatorContainer),"indicatorContainer"),children:this.props.gradedGroups.map(({title:t},n)=>e.jsx("li",{className:k(Ox.indicator),children:e.jsx(K,{role:"button","aria-label":this.context.strings.skipToTitle({title:t}),style:Ox.indicatorButton,onClick:()=>this.props.onChangeCurrentGroup(n),onKeyDown:e=>this.handleKeyDown(e,n),children:({hovered:t,focused:r,pressed:i})=>e.jsx(q,{style:[Ox.indicatorDot,(t||r||i)&&Ox.indicatorDotFocused],children:n===this.props.currentGroup&&e.jsx(q,{style:Ox.indicatorDotActive,children:e.jsx("span",{className:k(qb.srOnly),children:this.context.strings.current})})})})},t))})}}class Dx extends vt.Component{_childGroup;static defaultProps={gradedGroups:[],linterContext:T};state={currentGroup:0};shouldComponentUpdate(e,t){return e!==this.props||t!==this.state}getInputPaths=()=>this._childGroup.getInputPaths();getPromptJSON(){const e=this._childGroup.getPromptJSON();return t=this.props,n=e,{type:"graded-group-set",options:{groupCount:t.gradedGroups.length,currentGroup:n}};var t,n}focus=()=>this._childGroup.focus();focusInputPath=e=>{this._childGroup.focusInputPath(e)};blurInputPath=e=>{this._childGroup.blurInputPath(e)};handleNextQuestion=()=>{const{currentGroup:e}=this.state;e<this.props.gradedGroups.length-1&&this.setState({currentGroup:e+1})};render(){const{JIPT:t}=Hu();if(t.useJIPT&&this.props.gradedGroups.length>1)return e.jsx("div",{className:k(Ox.container),children:this.props.gradedGroups.map((t,n)=>e.jsx(Rx,{...this.props,...t,inGradedGroupSet:!1,linterContext:this.props.linterContext},n))});const n=this.props.gradedGroups[this.state.currentGroup];if(!n)return e.jsx("span",{children:"No current group..."});const r=this.props.gradedGroups.length,i=this.state.currentGroup<r-1?this.handleNextQuestion:null;return e.jsxs("div",{className:k(Ox.container),children:[e.jsxs("div",{className:k(Ox.top),children:[e.jsx("div",{className:k(Ox.title),children:n.title}),e.jsx("div",{className:k(Ox.spacer)}),e.jsx(Nx,{currentGroup:this.state.currentGroup,gradedGroups:this.props.gradedGroups,onChangeCurrentGroup:e=>this.setState({currentGroup:e})})]}),e.jsx(Rx,{ref:e=>this._childGroup=e,...this.props,...n,inGradedGroupSet:!0,title:null,onNextQuestion:i,linterContext:this.props.linterContext},this.state.currentGroup)]})}}const Lx={name:"graded-group-set",displayName:"Graded group set (articles only)",widget:Dx,hidden:!1,tracking:"all",isLintable:!0},Ox=E.create({top:{display:"flex",flexDirection:"row"},spacer:{flex:1},title:{fontSize:12,color:U.offBlack64,textTransform:"uppercase",marginBottom:11,letterSpacing:.8},indicatorContainer:{display:"flex",flexDirection:"row",listStyle:"none",margin:"unset",paddingInlineStart:"unset",flexWrap:"wrap"},indicator:{width:24,height:24},indicatorButton:{width:"100%",height:"100%",display:"flex",flexWrap:"wrap",placeContent:"center",cursor:"pointer",":focus":{outline:"none"}},indicatorDot:{boxSizing:"content-box",width:10,height:10,borderRadius:"100%",borderWidth:2,borderColor:U.blue,borderStyle:"solid"},indicatorDotFocused:{borderWidth:5,borderStyle:"double"},indicatorDotActive:{backgroundColor:U.blue,width:"100%",height:"100%"},container:{borderTop:`1px solid ${wh}`,borderBottom:`1px solid ${wh}`,backgroundColor:kh,"--perseus-widget-background-color":kh,marginLeft:_h,marginRight:_h,paddingBottom:Ch,paddingLeft:Ch,paddingRight:Ch,paddingTop:10,width:"auto"}});class Fx extends vt.Component{container;static defaultProps={value:null,allowEmpty:!0};componentWillUnmount(){this.container=null}focus(){if(this.container)return this.container.focus(),!0}toggleSelect(e){const t=this.props.value;this.props.allowEmpty?this.props.onChange(t!==e?e:null):this.props.onChange(e)}render(){const t=this.props.value,n=this.props.buttons.map((n,r)=>e.jsx("button",{title:n.title,type:"button",ref:"button"+r,className:k(zx.buttonStyle,n.value===t&&zx.selectedStyle,n.value===t&&this.props.selectedButtonStyle),onClick:()=>this.toggleSelect(n.value),children:n.content||""+n.value},""+r));return e.jsx("div",{style:{display:"inline-block"},ref:e=>this.container=e,children:n})}}const zx=E.create({buttonStyle:{backgroundColor:"white",border:"1px solid #ccc",borderLeft:"0",cursor:"pointer",margin:"0",padding:"5px 10px",position:"relative",":first-child":{borderLeft:"1px solid #ccc",borderTopLeftRadius:"3px",borderBottomLeftRadius:"3px"},":last-child":{borderRight:"1px solid #ccc",borderTopRightRadius:"3px",borderBottomRightRadius:"3px"},":hover":{backgroundColor:"#ccc"},":focus":{zIndex:2}},selectedStyle:{backgroundColor:"#ddd"}}),Bx={PLOT:mg.Plot,PARABOLA:mg.Parabola,SINUSOID:mg.Sinusoid},Hx=(e,t,n,r)=>e.map(e=>{const i=e.map((e,r)=>{const i=t[r],s=n[r],a=(o=i,l=s,Math.floor((o[1]-o[0])/l));var o,l;const c=Math.round(e*a);return i[0]+s*c});return Np.roundTo(i,r)}),$x=(e,t,n,r)=>e?Hx(e,t,n,r):e,Wx=(e,t)=>{const n=Le.functionForType(e),r="defaultAsymptote"in n?n.defaultAsymptote:null,i=nh.snapStepFromGridStep([1,1]);return{type:e,asymptote:$x(r,t.range,t.step,i),coords:null}},Xx=r.first,Vx=(e,t)=>{const n=e.gridStep||nh.getGridStep(e.range,e.step,t);return{gridStep:n,snapStep:e.snapStep||nh.snapStepFromGridStep(n)}},Gx=Wx("linear",{range:[[-10,10],[-10,10]],step:[1,1]}),Yx={plot:Gx,availableTypes:[Gx.type]},qx=t=>{const n=t.charAt(0).toUpperCase()+t.substring(1),r=Hu().staticUrl;return{value:t,title:n,content:e.jsx("img",{src:r(Le.functionForType(t).url),alt:n})}},Zx=mg.MovablePoint,Kx=mg.MovableLine;const Qx={padding:"5px 5px"};class Jx extends vt.Component{static defaultProps={graph:{range:[[-10,10],[-10,10]],step:[1,1]},coords:null,asymptote:null,isMobile:!1};_coords=()=>{const e=this.props,t=e.graph,n=e.model&&$x(e.model.defaultCoords,t.range,t.step,t.snapStep);return e.coords||n||null};_asymptote=()=>this.props.asymptote;renderPlot=()=>{const e=this.props.model,t=this.props.graph.range[0],n={stroke:this.props.isMobile?uf.BLUE_C:uf.DYNAMIC,...this.props.isMobile?{"stroke-width":3}:{}},r=e.getCoefficients(this._coords(),this._asymptote());if(!r)return;const i=e.getPropsForCoeffs(r,t),s=Bx[e.movable];return vt.createElement(s,{...i,key:this.props.model.url,range:t,style:n})};renderAsymptote=()=>{const t=this.props.model,n=this.props.graph,r=this._asymptote(),i={strokeDasharray:"- "};return r?.length>0&&e.jsx(Kx,{onMove:(e,t)=>{const n=yp.subtract(e,t),r=this._asymptote().map(e=>yp.add(e,n));this.props.onChange({asymptote:r})},constraints:[Jm.MovableLine.constraints.bound(),Jm.MovableLine.constraints.snap(),(e,r)=>{const i=yp.subtract(e,r),s=this._asymptote().map(e=>yp.add(e,i));return!t.extraAsymptoteConstraint||t.extraAsymptoteConstraint(e,r,this._coords(),s,n)}],normalStyle:i,highlightStyle:i,children:r.map((t,n)=>e.jsx(Zx,{coord:t,static:!0,draw:null,extendLine:!0,showHairlines:this.props.showHairlines,hideHairlines:this.props.hideHairlines,showTooltips:this.props.showTooltips,isMobile:this.props.isMobile},`asymptoteCoord-${n}`))})};render(){const t=this._coords().map((t,n)=>e.jsx(Zx,{coord:t,static:this.props.static,constraints:[Jm.MovablePoint.constraints.bound(),Jm.MovablePoint.constraints.snap(),e=>{const t=this._coords().every((t,r)=>n===r||!t||!Vh.equal(e[0],t[0]));if(!t)return!1;if(this.props.model&&this.props.model.extraCoordConstraint){const t=this.props.model.extraCoordConstraint,r=ve(this._coords()),i=ve(r[n]);return r[n]=e,t(e,i,r,this._asymptote(),this.props.graph)}return t}],onMove:(e,t)=>{let r;const i=this._asymptote();r=i&&this.props.model.allowReflectOverAsymptote&&function(e,t,n){const r=(e,t,n)=>(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1]);return r(n[0],n[1],t)>0!=r(n[0],n[1],e)>0}(e,t,i)?this._coords().map(e=>Np.reflectOverLine(e,i)):ve(this._coords()),r[n]=e,this.props.onChange({coords:r})},showHairlines:this.props.showHairlines,hideHairlines:this.props.hideHairlines,showTooltips:this.props.showTooltips,isMobile:this.props.isMobile},n)),n=this.props.graph.box,r=this.props.graph.backgroundImage;let i=null;if(r.url){const t=n[0]/Ih.defaultBoxSize;i=e.jsx(Sg,{src:r.url,width:r.width,height:r.height,scale:t})}return e.jsx("div",{className:"perseus-widget perseus-widget-grapher",style:{width:n[0],height:n[1],boxSizing:"initial"},children:e.jsxs("div",{className:"graphie-container blank-background",style:{width:n[0],height:n[1]},children:[i,e.jsxs(mg,{...this.props.graph,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable,children:[this.props.model&&this.renderPlot(),this.props.model&&this.renderAsymptote(),this.props.model&&t]})]})})}}class ev extends vt.Component{horizHairline;vertHairline;handlePlotChanges=e=>{const t={...this.props.userInput,...e};this.props.handleUserInput(t),this.props.trackInteraction()};handleActiveTypeChange=e=>{const t=this.props.graph,n={...this.props.userInput,...Wx(e,t)};this.props.handleUserInput(n)};_getGridConfig(e){return e.step.map((t,n)=>nh.gridDimensionConfig(t,e.range[n],e.box[n],e.gridStep[n]))}_calculateMobileTickStep(e,t,n){const r=nh.constrainedTickStepsFromTickSteps(t,n);return r[0]=r[0]/e[0],r[1]=r[1]/e[1],r}_setupGraphie=(e,t)=>{const n=this.props.apiOptions.isMobile;if("graph"===t.markings?(e.graphInit({range:t.range,scale:t.gridConfig.map(e=>e.scale),axisArrows:"<->",labelFormat:function(e){return"\\small{"+e+"}"},gridStep:t.gridStep,snapStep:t.snapStep,tickStep:n?this._calculateMobileTickStep(t.gridStep,t.step,t.range):t.gridConfig.map(e=>e.tickStep),labelStep:1,unityLabels:t.gridConfig.map(e=>e.unityLabel),isMobile:n}),e.label([0,t.range[1][1]],t.labels[1],n?"below right":"above"),e.label([t.range[0][1],0],t.labels[0],n?"above left":"right")):"grid"===t.markings?e.graphInit({range:t.range,scale:t.gridConfig.map(e=>e.scale),gridStep:t.gridStep,axes:!1,ticks:!1,labels:!1,isMobile:n}):"none"===t.markings&&e.init({range:t.range,scale:t.gridConfig.map(e=>e.scale)}),this.props.apiOptions.isMobile){const t={normalStyle:{strokeWidth:1}};this.horizHairline=new Af(e,[0,0],[0,0],t),this.horizHairline.attr({stroke:uf.INTERACTIVE}),this.horizHairline.hide(),this.vertHairline=new Af(e,[0,0],[0,0],t),this.vertHairline.attr({stroke:uf.INTERACTIVE}),this.vertHairline.hide()}};showHairlines=e=>{this.props.apiOptions.isMobile&&(this.horizHairline.moveTo([this.props.graph.range[0][0],e[1]],[this.props.graph.range[0][1],e[1]]),this.horizHairline.show(),this.vertHairline.moveTo([e[0],this.props.graph.range[1][0]],[e[0],this.props.graph.range[1][1]]),this.vertHairline.show())};hideHairlines=()=>{this.props.apiOptions.isMobile&&(this.horizHairline.hide(),this.vertHairline.hide())};getPromptJSON(){return(e=>{const{userInput:t}=e,{type:n,coords:r}=t,i={type:n,coords:r};return"logarithm"!==t.type&&"exponential"!==t.type||(i.asymptote=t.asymptote),{type:"grapher",options:{availableTypes:e.availableTypes,range:e.graph.range,labels:e.graph.labels,tickStep:e.graph.step,gridStep:e.graph.gridStep,snapStep:e.graph.snapStep,backgroundImageUrl:e.graph.backgroundImage.url},userInput:i}})(this.props)}getSerializedState(){const{userInput:e,correct:t,...n}=this.props;return{...n,plot:this.props.userInput}}render(){const t=this.props.static?[this.props.correct.type]:this.props.availableTypes,n=this.props.userInput.type,r=this.props.userInput.coords,i="asymptote"in this.props.userInput?this.props.userInput.asymptote:void 0,s=e.jsx("div",{style:Qx,children:e.jsx(Fx,{value:n,allowEmpty:!0,buttons:t.map(qx),onChange:this.handleActiveTypeChange})}),a=mb(this.props.containerSizeClass),o={...this.props.graph,...Vx(this.props.graph,a[0]),gridConfig:this._getGridConfig({...this.props.graph,box:a,...Vx(this.props.graph,a[0])})},l={graph:{box:a,range:o.range,step:o.step,snapStep:o.snapStep,backgroundImage:o.backgroundImage,options:o,setup:this._setupGraphie},onChange:this.handlePlotChanges,model:n&&Le.functionForType(n),coords:r,asymptote:i,static:this.props.static,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:this.props.apiOptions.isMobile,showTooltips:this.props.graph.showTooltips,showHairlines:this.showHairlines,hideHairlines:this.hideHairlines};return e.jsxs("div",{children:[e.jsx(Jx,{...l}),t.length>1&&s]})}}const tv={name:"grapher",displayName:"Grapher",hidden:!0,widget:ev,getUserInputFromSerializedState:function(e){return e.plot},getStartUserInput:function(e){if(1===e.availableTypes.length){const t=e.graph,n=Xx(e.availableTypes);if(n)return Wx(n,t)}return Yx.plot},getCorrectUserInput:function(e){return e.correct}};class nv extends vt.Component{static contextType=Ou;rendererRef;static defaultProps={content:"",widgets:{},images:{},linterContext:T};componentDidMount(){this.forceUpdate()}getPromptJSON(){return e=this.rendererRef?.getPromptJSON(),e?{...e,type:"group"}:{type:"group",content:"",widgets:{}};var e}getSerializedState=()=>this.rendererRef?.getSerializedState();getInputPaths(){return this.rendererRef?.getInputPaths()??[]}focus(){return this.rendererRef?.focus()??!1}focusInputPath=e=>{this.rendererRef?.focusPath(e)};blurInputPath=e=>{this.rendererRef?.blurPath(e)};render(){const t={...Wg.defaults,...this.props.apiOptions,onFocusChange:(e,t)=>{t&&this.props.onBlur(t),e&&this.props.onFocus(e)}},n=this.props.findWidgets("group").indexOf(this),r=this.props.apiOptions.groupAnnotator(n,this.props.widgetId);return e.jsxs("div",{className:f({"perseus-group":!0}),children:[r,e.jsx(kb,{userInput:this.props.userInput,handleUserInput:(e,t)=>{this.props.handleUserInput({...this.props.userInput,[e]:t})},content:this.props.content,widgets:this.props.widgets,images:this.props.images,ref:e=>this.rendererRef=e,apiOptions:t,findExternalWidgets:this.props.findWidgets,reviewMode:this.props.reviewMode,showSolutions:this.props.showSolutions,linterContext:this.props.linterContext,strings:this.context.strings})]})}}const rv={name:"group",displayName:"Group (SAT only)",widget:nv,hidden:!0,isLintable:!0,getStartUserInput:function(e,t){return Nb(e.widgets,t)},getUserInputFromSerializedState:function(e,t){return function(e,t){const n={};return Object.entries(e).forEach(([e,r])=>{const i=function(e,t){const n=t[e];return n?.type??null}(e,t),s=yb(i);if(s?.getUserInputFromSerializedState){const i=s.getUserInputFromSerializedState(r,t[e].options);n[e]=i}}),n}(e,t.widgets)}},{updateQueryString:iv}=nh;class sv extends vt.Component{static defaultProps={allowFullScreen:!1,allowTopNavigation:!1,userInput:{status:"incomplete",message:null}};componentDidMount(){p(window).on("message",this.handleMessageEvent)}componentWillUnmount(){p(window).off("message",this.handleMessageEvent)}getPromptJSON(){return ox("iframe")}getSerializedState(){const{userInput:e,alignment:t,...n}=this.props;return n}handleMessageEvent=e=>{let t={};try{t=JSON.parse(e.originalEvent.data)}catch{return}if(void 0===t.testsPassed)return;const n=t.testsPassed?"correct":"incorrect";this.props.handleUserInput({status:n,message:t.message})};render(){const t={width:String(this.props.width),height:String(this.props.height)},{InitialRequestUrl:n}=Hu();Object.entries(t).forEach(([e,n])=>{n.endsWith("%")||n.endsWith("px")||(t[e]=n+"px")});let r=this.props.url;if(r&&r.length&&0!==r.indexOf("http")&&(r="https://www.khanacademy.org/computer-programming/program/"+r+"/embedded?buttons=no&embed=yes&editor=no&author=no",r=iv(r,"width",`${this.props.width}`),r=iv(r,"height",`${this.props.height}`),r=iv(r,"origin",n.origin)),this.props.settings){const e={};this.props.settings.forEach(t=>{t.name&&t.value&&(e[t.name]=t.value)}),r=iv(r,"settings",JSON.stringify(e))}let i="allow-same-origin allow-scripts";return i+=" allow-top-navigation",e.jsx("iframe",{sandbox:"allow-same-origin allow-scripts allow-top-navigation",style:t,src:r,allowFullScreen:this.props.allowFullScreen})}}const av={name:"iframe",displayName:"Iframe (deprecated)",widget:sv,hidden:!0,getStartUserInput:function(){return{status:"incomplete",message:null}},getUserInputFromSerializedState:function(e){return{status:e.status,message:e.message}}},ov={},lv=({caption:t,backgroundImage:n,apiOptions:r,linterContext:i})=>{const s=vt.useContext(Ou);return e.jsx("div",{className:ov.descriptionAndCaptionContainer,children:t&&e.jsx("figcaption",{className:"perseus-image-caption",style:{maxWidth:n.width},children:e.jsx(kb,{content:t,apiOptions:r,linterContext:i,strings:s.strings})})})},cv=({apiOptions:t,alt:n,backgroundImage:r,box:i,caption:s,linterContext:a,labels:o,range:l,title:c,trackInteraction:d})=>{const u=vt.useContext(Ou);return e.jsxs("figure",{className:"perseus-image-widget",style:{maxWidth:r.width},children:[c&&e.jsx("div",{className:`perseus-image-title ${ov.titleContainer}`,children:e.jsx(kb,{content:c,apiOptions:t,linterContext:a,strings:u.strings})}),r.url&&e.jsx(Au.Consumer,{children:({setAssetStatus:a})=>e.jsx(Sg,{src:r.url,alt:s===n?"":n,width:r.width,height:r.height,preloader:t.imagePreloader,extraGraphie:{box:i,range:l,labels:o},trackInteraction:d,zoomToFullSizeOnMobile:t.isMobile,constrainHeight:t.isMobile,allowFullBleed:t.isMobile,setAssetStatus:a})}),s&&e.jsx(lv,{caption:s,backgroundImage:r,apiOptions:t,linterContext:a})]})},dv=[0,10],uv={url:null,width:0,height:0};class hv extends vt.Component{static contextType=Ou;static defaultProps={alignment:"block",title:"",range:[dv,dv],box:[400,400],backgroundImage:uv,labels:[],alt:"",caption:"",linterContext:T};isWidget=!0;getPromptJSON(){return{type:"image",options:{altText:(e=this.props).alt,title:e.title,caption:e.caption,imageUrl:e.backgroundImage.url}};var e}render(){return e.jsx(cv,{...this.props})}}const pv={name:"image",displayName:"Image",widget:hv,isLintable:!0},fv=mg.Label,mv=mg.Line,gv=mg.MovablePoint,bv=mg.MovableLine,Uv=mg.Plot,yv=mg.PlotParametric,xv=mg.Point,vv=mg.Rect,{unescapeMathMode:wv}=nh,Sv=(e,t)=>{let n=e+"||"+(t=t||{}).decimal_separator+"||";const r=t.functions,i=r?r.length:0;for(let s=0;s<i;s++)n+=r[s]+"|";return n},Ev=Object.create(null),kv=(e,t)=>{const n=Sv(e,t);let r=Ev[n];return r||(r=Oe(e,t),Ev[n]=r,r)},Cv=Object.create(null),_v=(e,t)=>{const n=Sv(e,t);let r=Cv[n];if(r)return r;const i=Oe(e,t).expr;return r=i?i.compile():function(){return 0},Cv[n]=r,r};class Mv extends vt.Component{static defaultProps={graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],tickStep:[1,1],gridStep:[1,1],markings:"graph"},elements:[]};isWidget=!0;state={variables:Iv(this.props.elements),functions:jv(this.props.elements)};UNSAFE_componentWillReceiveProps(e){r.isEqual(this.props.elements,e.elements)||this.setState({variables:Iv(e.elements),functions:jv(e.elements)})}_setupGraphie=(e,t)=>{e.graphInit(r.extend({},t,{grid:r.contains(["graph","grid"],this.props.graph.markings),axes:r.contains(["graph"],this.props.graph.markings),ticks:r.contains(["graph"],this.props.graph.markings),labels:r.contains(["graph"],this.props.graph.markings),labelFormat:function(e){return"\\small{"+e+"}"},axisArrows:"<->",unityLabels:!1}))};_updatePointLocation=(e,t)=>{const n=r.clone(this.state.variables);n["x_"+e]=t[0],n["y_"+e]=t[1],this.setState({variables:n}),this.props.trackInteraction()};_updateLineLocation=(e,t)=>{const n=this._eval("("+e.endX+")-("+e.startX+")"),i=this._eval("("+e.endY+")-("+e.startY+")"),s=yp.add(t,[n,i]),a=r.clone(this.state.variables);a["x_"+e.startSubscript]=t[0],a["y_"+e.startSubscript]=t[1],a["x_"+e.endSubscript]=s[0],a["y_"+e.endSubscript]=s[1],this.setState({variables:a}),this.props.trackInteraction()};_eval=(e,t)=>{const n=_v(e,{functions:this.state.functions}),i=r.extend({},this.state.variables,t);return r.each(r.keys(i),e=>{if(r.isString(i[e])){const t=_v(i[e],{functions:this.state.functions});i[e]=function(e){return t(r.extend({},i,{x:e}))}}}),n(i)||0};_extractVars=e=>{if(null==e)return[];let t=[];return r.each(e.args(),function(e){e&&"Expr"===e.constructor.name&&(t=t.concat(this._extractVars(e)))},this),"Var"===e.name()&&t.push(e.prettyPrint()),t};getPromptJSON(){return ox("interaction")}render(){const t=this.props.graph.range;let n=this.props.graph.labels;return"graph"===this.props.graph.markings&&(n=this.props.graph.labels.map(e=>e.startsWith("$")&&e.endsWith("$")?e.slice(1,-1):e)),e.jsxs(mg,{box:this.props.graph.box,range:this.props.graph.range,options:this.props.graph,setup:this._setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,children:["graph"===this.props.graph.markings&&e.jsx(fv,{coord:[0,t[1][1]],text:n[1],direction:"above"}),"graph"===this.props.graph.markings&&e.jsx(fv,{coord:[t[0][1],0],text:n[0],direction:"right"}),r.map(this.props.elements,function(t,n){if("point"===t.type)return e.jsx(xv,{coord:[this._eval(t.options.coordX),this._eval(t.options.coordY)],color:t.options.color},t.key);if("line"===t.type){const n=[this._eval(t.options.startX),this._eval(t.options.startY)],r=[this._eval(t.options.endX),this._eval(t.options.endY)];return e.jsx(mv,{start:n,end:r,style:{stroke:t.options.color,strokeWidth:t.options.strokeWidth,strokeDasharray:t.options.strokeDasharray,arrows:t.options.arrows}},t.key)}if("movable-point"===t.type){const n=[e=>[Math.max(this._eval(t.options.constraintXMin),Math.min(this._eval(t.options.constraintXMax),e[0])),Math.max(this._eval(t.options.constraintYMin),Math.min(this._eval(t.options.constraintYMax),e[1]))]];return"snap"===t.options.constraint?n.push(gv.constraints.snap(t.options.snap)):"x"===t.options.constraint?n.push(e=>[this._eval(t.options.constraintFn,{y:e[1]}),e[1]]):"y"===t.options.constraint&&n.push(e=>[e[0],this._eval(t.options.constraintFn,{x:e[0]})]),e.jsx(gv,{coord:[this.state.variables["x_"+t.options.varSubscript],this.state.variables["y_"+t.options.varSubscript]],constraints:n,foo_x:t.options.constraint,foo_y:t.options.constraintFn,foo_z:t.options.snap,onMove:r.partial(this._updatePointLocation,t.options.varSubscript)},t.key)}if("movable-line"===t.type){const n=[e=>[Math.max(this._eval(t.options.constraintXMin),Math.min(this._eval(t.options.constraintXMax),e[0])),Math.max(this._eval(t.options.constraintYMin),Math.min(this._eval(t.options.constraintYMax),e[1]))]];"snap"===t.options.constraint?n.push(gv.constraints.snap(t.options.snap)):"x"===t.options.constraint?n.push(e=>[this._eval(t.options.constraintFn,{y:e[1]}),e[1]]):"y"===t.options.constraint&&n.push(e=>[e[0],this._eval(t.options.constraintFn,{x:e[0]})]);const i=[this.state.variables["x_"+t.options.startSubscript],this.state.variables["y_"+t.options.startSubscript]],s=[this.state.variables["x_"+t.options.endSubscript],this.state.variables["y_"+t.options.endSubscript]];return e.jsxs(bv,{constraints:n,onMove:r.bind(this._updateLineLocation,this,t.options),foo_x:t.options.constraint,foo_y:t.options.constraintFn,foo_z:t.options.snap,children:[e.jsx(gv,{coord:i,static:!0,normalStyle:{stroke:"none",fill:"none"}}),e.jsx(gv,{coord:s,static:!0,normalStyle:{stroke:"none",fill:"none"}})]},t.key)}if("function"===t.type){const n=e=>this._eval(t.options.value,{x:e}),i=r.without(this._extractVars(kv(t.options.value).expr),"x"),s=r.object(i,r.map(i,e=>this.state.variables[e])),a=[this._eval(t.options.rangeMin,this.state.variables),this._eval(t.options.rangeMax,this.state.variables)];return e.jsx(Uv,{fn:n,foo_fn:t.options.value,foo_varvalues:s,range:a,style:{stroke:t.options.color,strokeWidth:t.options.strokeWidth,strokeDasharray:t.options.strokeDasharray,plotPoints:100}},t.key)}if("parametric"===t.type){const n=e=>[this._eval(t.options.x,{t:e}),this._eval(t.options.y,{t:e})],i=r.without(this._extractVars(kv(t.options.x).expr).concat(this._extractVars(kv(t.options.y).expr)),"t"),s=r.object(i,r.map(i,e=>this.state.variables[e])),a=[this._eval(t.options.rangeMin,this.state.variables),this._eval(t.options.rangeMax,this.state.variables)];return e.jsx(yv,{fn:n,foo_fnx:t.options.x,foo_fny:t.options.y,foo_varvalues:s,range:a,style:{stroke:t.options.color,strokeWidth:t.options.strokeWidth,strokeDasharray:t.options.strokeDasharray,plotPoints:100}},t.key)}if("label"===t.type){const r=[this._eval(t.options.coordX),this._eval(t.options.coordY)];return e.jsx(fv,{coord:r,text:wv(t.options.label),style:{color:t.options.color}},n+1)}return"rectangle"===t.type?e.jsx(vv,{x:this._eval(t.options.coordX),y:this._eval(t.options.coordY),width:r.max([this._eval(t.options.width),0]),height:r.max([this._eval(t.options.height),0]),style:{stroke:"none",fill:t.options.color}},n+1):void 0},this)]})}}const Iv=e=>{const t={};return r.each(r.where(e,{type:"movable-point"}),e=>{const n=e.options.varSubscript,r=kv(e.options.startX||"0").expr,i=kv(e.options.startY||"0").expr;let s=0,a=0;r&&(s=r.eval({})||0),i&&(a=i.eval({})||0),t["x_"+n]=s,t["y_"+n]=a}),r.each(r.where(e,{type:"movable-line"}),e=>{const n=e.options.startSubscript,r=e.options.endSubscript,i=kv(e.options.startX||"0").expr,s=kv(e.options.startY||"0").expr,a=kv(e.options.endX||"0").expr,o=kv(e.options.endY||"0").expr;let l=0,c=0,d=0,u=0;i&&(l=i.eval({})||0),s&&(c=s.eval({})||0),a&&(d=a.eval({})||0),o&&(u=o.eval({})||0),t["x_"+n]=l,t["y_"+n]=c,t["x_"+r]=d,t["y_"+r]=u}),r.each(r.where(e,{type:"function"}),e=>{t[e.options.funcName]=e.options.value}),t},jv=e=>r.map(r.where(e,{type:"function"}),e=>e.options.funcName),Tv={name:"interaction",displayName:"Interaction",widget:Mv,hidden:!0},Rv=e=>{const t=e.userInput.type;switch(t){case"angle":return{type:e.userInput.type,angleOffsetDegrees:e.userInput.angleOffsetDeg,startCoords:e.userInput.startCoords};case"circle":return{type:e.userInput.type,startParams:{center:e.userInput.startCoords?.center,radius:e.userInput.startCoords?.radius}};case"linear":case"linear-system":case"quadratic":case"ray":case"sinusoid":return{type:e.userInput.type,startCoords:e.userInput.startCoords};case"point":return{type:e.userInput.type,numPoints:e.userInput.numPoints,startCoords:e.userInput.startCoords};case"polygon":return{type:e.userInput.type,match:e.userInput.match,numSides:e.userInput.numSides,startCoords:e.userInput.startCoords};case"segment":return{type:e.userInput.type,numSegments:e.userInput.numSegments,startCoords:e.userInput.startCoords};case"none":return{};default:throw new Fe(t)}},Pv=e=>{const t=e.type;switch(t){case"angle":return{coords:e.coords,angleOffsetDegrees:e.angleOffsetDeg};case"circle":return{center:e.center,radius:e.radius};case"linear":case"linear-system":case"point":case"polygon":case"quadratic":case"ray":case"segment":case"sinusoid":return{coords:e.coords};case"none":return{};default:throw new Fe(t)}};function Av(){return new Nv}class Nv{path=[];scaleFactor=1;build(){return this.path.map((e=this.scaleFactor,t=>"A"===t.action?{...t,args:[t.args[0]*e,t.args[1]*e,t.args[2],t.args[3],t.args[4],t.args[5]*e,t.args[6]*e]}:{...t,args:t.args.map(t=>t*e)})).map(Dv).join("");var e}move(e,t){return this.path.push({action:"M",args:[e,t]}),this}line(e,t){return this.path.push({action:"L",args:[e,t]}),this}circularArc(e,t,n,{sweep:r=!1,largeArc:i=!1}={}){return this.path.push({action:"A",args:[e,e,0,i?1:0,r?1:0,t,n]}),this}curve(e,t,n,r,i,s){return this.path.push({action:"C",args:[e,t,n,r,i,s]}),this}scale(e){return this.scaleFactor*=e,this}}function Dv(e){return`${e.action}${e.args.join(" ")}`}function Lv(e,t,n){return e<t?t:e>n?n:e}function Ov(e,t){const[n,r]=t,[i,s]=e;return[Math.round(n/i)*i,Math.round(r/s)*s]}function Fv([e,t]){return t-e}function zv(e,t){if(2*e>Fv(t)){const e=function(e,t){return(e+t)/2}(...t);return[e,e]}return[t[0]+e,t[1]-e]}function Bv(e,t){return[Lv(t[0],...e[0]),Lv(t[1],...e[1])]}function Hv(e,t){return[zv(e[0],t[0]),zv(e[1],t[1])]}function $v({range:e,point:t}){return t[0]>=e[0][0]&&t[0]<=e[0][1]&&t[1]>=e[1][0]&&t[1]<=e[1][1]}function Wv(e,t,n){return(t-e)*Lv(n,0,1)+e}function Xv([[e,t],[n,r]],[[i,s],[a,o]]){const l=(n-e)*(o-s)-(a-i)*(r-t);if(0!==l){const c=((o-s)*(a-e)+(i-a)*(o-t))/l;if(c<=0||((t-r)*(a-e)+(n-e)*(o-t))/l>=1)return;const d=[e,t],u=ze.sub([n,r],d);return ze.add(d,ze.scale(u,c))}}const Vv=vt.createContext({range:[[0,1],[0,1]],tickStep:[1,1],gridStep:[1,1],snapStep:[1,1],markings:"none",showTooltips:!1,graphDimensionsInPixels:[1,1],width:0,height:0,labels:[],labelLocation:"onAxis",disableKeyboardInteraction:!1,interactiveColor:"var(--mafs-blue)",showAxisArrows:{xMin:!0,xMax:!0,yMin:!0,yMax:!0}});function Gv(){return St.useContext(Vv)}const Yv=ze.matrixBuilder;function qv(e,t,n=[0,0]){const{range:r,width:i,height:s}=t,[[a,o],[l,c]]=r,d=Yv().translate(...n).scale(i/(o-a),-s/(c-l)).get();return e.map(e=>ze.transform(e,d))}function Zv(e,t){const[[n],[,r]]=t.range,[i,s]=[-n,-r];return qv([e],t,[i,s])[0]}const Kv=(...e)=>qv(e,Gv()),Qv=(...e)=>function(e,t){const{range:n,width:r,height:i}=t,[[s,a],[o,l]]=n,c=Yv().scale(r/(a-s),i/(l-o)).get();return e.map(e=>ze.transform(e,c))}(e,Gv());function Jv(e,t){const[[n,r],[i,s]]=t.range,{width:a,height:o}=t,l=r-n,c=s-i;return e.map(e=>[e[0]/a*l+n,s-e[1]/o*c])}const ew=Av().move(-3,4).curve(-2.75,2.5,0,.25,.75,0).curve(0,-.25,-2.75,-2.5,-3,-4).scale(1.4).build();function tw(t){const[n]=Kv(t.tip);return e.jsx("g",{"aria-hidden":!0,className:"interactive-graph-arrowhead",transform:`translate(${n[0]} ${n[1]}) rotate(${t.angle})`,children:e.jsx("g",{transform:"translate(-1.5)",children:e.jsx("path",{d:ew,fill:"none",style:{stroke:t.color??"inherit"},strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:`${t.strokeWidth??2}px`})})})}function nw(){const{range:[[t,n],[r,i]],showAxisArrows:s}=Gv(),a="var(--mafs-fg)";return e.jsxs(e.Fragment,{children:[!(r>0||i<0)&&e.jsxs(e.Fragment,{children:[s.xMin&&e.jsx(tw,{color:a,tip:[t,0],angle:180}),s.xMax&&e.jsx(tw,{color:a,tip:[n,0],angle:0})]}),!(t>0||n<0)&&e.jsxs(e.Fragment,{children:[s.yMin&&e.jsx(tw,{color:a,tip:[0,r],angle:90}),s.yMax&&e.jsx(tw,{color:a,tip:[0,i],angle:270})]})]})}const rw="perseus_mafs_remove_button",iw=(e,t,n,r)=>n.map(n=>n.map((n,i)=>{const s=e[i];if(r)return s[0]+Fv(s)*n;const a=t[i],o=Math.floor(Fv(s)/a),l=Math.round(n*o);return s[0]+a*l})),sw=(e,t)=>e.map(e=>e.map((e,n)=>(e+t[n][1])/Fv(t[n])));function aw({snapStep:e,range:t,point:n}){return Bv(Hv(e,t),n)}function ow(e){return"point"===e.type&&"unlimited"===e.numPoints||"polygon"===e.type&&"unlimited"===e.numSides}const lw=S.parserFor({math:{...C.math,order:0},text:{order:1,match:S.anyScopeRegex(/^([^$\\{}]+)/),parse:e=>({content:e[0]})},specialCharacter:{order:2,match:S.anyScopeRegex(/^(\\[\S\s]|\$|\\$|{|})/),parse:e=>({content:e[0]})}},{inline:!0});function cw(e){const t=lw(e);let n="";for(const r of t)"math"===r.type?n+="$"+r.content+"$":"specialCharacter"===r.type?n+=dw(r.content):n+=r.content;return`\\text{${n}}`}function dw(e){return 1===e.length?"\\"+e:e}const uw=e=>{const[t,n]=e;return Math.abs(n-t)},hw=(e,t)=>[Math.max(Math.min(e[0],t.width+17.5),-21),Math.max(Math.min(e[1],t.height+17.5),-28)],pw=(e,t,n)=>{if("alongEdge"===t){const t=e.range[1][0]>=0?[0,42]:[0,21],r=e.range[0][0]<0&&Math.abs(e.range[0][0])<.07*(e.range[0][1]-e.range[0][0]);let i=0;if(e.range[0][0]>=0||r){const t=((e,t)=>{const n=Math.max(String(Math.abs(Math.floor(e[0]))).length,String(Math.abs(Math.ceil(e[1]))).length),r=mw(t)+2;return Math.max(n,r)})(e.range[1],n[1]);i=10.5*t+(e.range[1][0]<0&&e.range[0][0]<=0?7:0)}const s=[-17.5-i,-14],a=[(e.range[0][0]+e.range[0][1])/2,e.range[1][0]],o=[e.range[0][0],(e.range[1][0]+e.range[1][1])/2];r&&(o[0]=o[0]-e.range[0][0]);return[ze.add(Zv(a,e),t),ze.add(Zv(o,e),s)]}const r=[e.range[0][1],0],i=[0,e.range[1][1]],s=[0,-28];let a=Zv(r,e),o=ze.add(Zv(i,e),s);return a=hw(a,e),o=hw(o,e),[a,o]};function fw(e,t,n,r){const i=[],s=mw(e);for(let o=Math.max(t,0)+(r>=0?0:e);o<n;o+=e)i.push(parseFloat(o.toFixed(s)));let a=Math.min(n,0)-e;for(;a>t;a-=e)i.push(a);return i}const mw=e=>{const t=e.toString();return t.includes(".")?t.split(".")[1].length:0};function gw(e){const t=e/Math.PI;switch(t){case 1:return"π";case-1:return"-π";case 0:return"0";default:return t+"π"}}function bw({i18n:t,xAxisLabelLocation:n,yAxisLabelLocation:r}){const{labels:i,labelLocation:s}=Gv(),[a,o]=i,{xLabelTransform:l,yLabelTransform:c}=(e=>{const t=void 0===e||"onAxis"===e;return{xLabelTransform:t?"translate(7px, -50%)":"translate(-50%, -50%)",yLabelTransform:t?"translate(-50%, 0px)":"translate(-50%, 0px) rotate(-90deg)"}})(s),{TeX:d}=Hu();return e.jsxs(e.Fragment,{children:[e.jsx("span",{"aria-hidden":!0,style:{position:"absolute",left:n[0],top:n[1],fontSize:"14px",transform:l},children:e.jsx(d,{children:cw(a)})}),e.jsx("span",{"aria-hidden":!0,style:{position:"absolute",left:r[0],top:r[1],fontSize:"14px",transform:c},children:e.jsx(d,{children:cw(o)})})]})}const Uw=14,yw=({y:t,range:n,tickStep:r,showPi:i})=>{let s=0;n[0][0]>0&&(s=n[0][0]),n[0][1]<0&&(s=n[0][1]);const a=[s,t],[[o,l]]=Kv(a),c=o-5,d=l,u=o+5,h=l,p=o+(n[0][1]<=0?21:1.1*-14),f=l+3.5,m=((e,t,n)=>{let r=!0;return t[0][0]<-n&&t[0][1]>0&&e===-n&&(r=!1),r})(t,n,r),g=mw(r),b=i?gw(t):t.toFixed(g);return e.jsxs("g",{className:"tick","aria-hidden":!0,children:[e.jsx("line",{x1:c,y1:d,x2:u,y2:h,className:"axis-tick"}),m&&e.jsx("text",{className:"axis-tick-label",style:{fontSize:Uw},textAnchor:"end",x:p,y:f,children:b})]})},xw=({x:t,range:n,tickStep:r,showPi:i})=>{let s=0;n[1][0]>0&&(s=n[1][0]),n[1][1]<0&&(s=n[1][1]);const a=[t,s],[[o,l]]=Kv(a),c=o,d=l+5,u=o,h=l-5,p=o+(t<0?-2:0),f=l+(n[1][1]<0?-14:24.5),m=mw(r),g=i?gw(t):t.toFixed(m);return e.jsxs("g",{className:"tick","aria-hidden":!0,children:[e.jsx("line",{x1:c,y1:d,x2:u,y2:h,className:"axis-tick"}),e.jsx("text",{className:"axis-tick-label",style:{fontSize:Uw},textAnchor:"middle",x:p,y:f,children:g})]})},vw=()=>{const{tickStep:t,range:n}=Gv(),[[r,i],[s,a]]=n,[o,l]=t,c=fw(l,s,a,r),d=fw(o,r,i,s);return e.jsxs("g",{className:"axis-ticks",role:"presentation",children:[e.jsx("g",{className:"y-axis-ticks",children:c.map(r=>e.jsx(yw,{y:r,range:n,tickStep:t[1],showPi:t[1]%Math.PI===0},`y-grid-tick-${r}`))}),e.jsx("g",{className:"x-axis-ticks",children:d.map(r=>e.jsx(xw,{x:r,range:n,tickStep:t[0],showPi:t[0]%Math.PI===0},`x-grid-tick-${r}`))})]})},ww=(e,t)=>{const n="axes"!==e.markings&&e.gridStep[t];return{axis:"graph"===e.markings||"axes"===e.markings,lines:n,labels:!1}},Sw=t=>"none"===t.markings?null:e.jsx(Be.Cartesian,{xAxis:ww(t,0),yAxis:ww(t,1)});E.create({hud:{boxSizing:"border-box",height:36,padding:"9px 16px",borderRadius:18,fontFamily:bh,fontSize:"15px",lineHeight:"18px",color:yh,userSelect:"none",borderWidth:0},hudFixedPosition:{bottom:20,position:"fixed",right:20,zIndex:1},icon:{width:24,height:24,marginRight:8,marginTop:-3,verticalAlign:"middle"},enabled:{backgroundColor:jh,":hover":{backgroundColor:Th},":active":{backgroundColor:Rh}},disabled:{backgroundColor:wh,":hover":{backgroundColor:"#a1a5a9"},":active":{backgroundColor:Sh}}});class Ew extends vt.Component{static defaultProps={color:"currentColor"};render(){const{color:t,pathClassName:n,className:r,title:i,style:s,alt:a}=this.props;let{icon:o,size:l}=this.props,c="";"string"==typeof o&&(o={path:o,width:10,height:10}),"number"!=typeof l&&(l=1,c="em");const d=l,u=d/o.height*o.width,h=!!this.props.focusable;return e.jsxs("svg",{role:"img",alt:a,"aria-label":i,"aria-hidden":!i||null,className:r,style:s,focusable:h.toString(),width:u+c,height:d+c,viewBox:`0 0 ${o.width} ${o.height}`,children:[!!i&&e.jsx("title",{children:i}),e.jsx("path",{className:n,fill:t,d:o.path})]})}}E.create({spacingLeft:{marginInlineStart:H.xxxSmall_4},body:{padding:H.medium_16}}),E.create({buttonStyle:{backgroundColor:"white",border:"1px solid #ccc",borderLeft:"0",cursor:"pointer",margin:"0",padding:"5px 10px",position:"relative",":first-child":{borderLeft:"1px solid #ccc",borderTopLeftRadius:"3px",borderBottomLeftRadius:"3px"},":last-child":{borderRight:"1px solid #ccc",borderTopRightRadius:"3px",borderBottomRightRadius:"3px"},":hover":{backgroundColor:"#ccc"},":focus":{zIndex:2}},selectedStyle:{backgroundColor:"#ddd"}});const{firstNumericalParse:kw,captureScratchpadTouchStart:Cw}=nh,_w=Lp.toNumericString,Mw=Lp.getNumericFormat;class Iw extends vt.Component{inputRef=vt.createRef();static propTypes={value:Ct.number,format:Ct.string,placeholder:Ct.oneOfType([Ct.string,Ct.number]),onChange:Ct.func.isRequired,onFormatChange:Ct.func,checkValidity:Ct.func,size:Ct.oneOf(["mini","small","normal"]),label:Ct.oneOf(["put your labels outside your inputs!"]),allowPiTruncation:Ct.bool};static defaultProps={value:null,placeholder:null,format:null,onFormatChange:()=>null,checkValidity:()=>!0,useArrowKeys:!1};state={format:this.props.format};componentDidMount(){const e=this.getValue();this.props.allowPiTruncation&&null!==e&&0!==e&&"pi"!==this.state.format&&function(e){return!Number.isInteger(e)&&(e%Math.PI===0||e%(Math.PI/2)==0||e%(Math.PI/3)==0||e%(Math.PI/4)==0||e%(Math.PI/6)==0)}(e)&&(this._setValue(e/Math.PI,"pi"),this.setState({format:"pi"}))}componentDidUpdate(e){Vh.equal(this.getValue(),this.props.value)||this._setValue(this.props.value,this.state.format)}_getInput=()=>{if(!this.inputRef.current)throw new u("Input ref accessed before set",h.Internal);return this.inputRef.current};getValue=()=>this.parseInputValue(this._getInput().value);getStringValue=()=>this._getInput().toString();parseInputValue=e=>{if(""===e){const e=this.props.placeholder;return r.isFinite(e)?+e:null}const t=kw(e);return r.isFinite(t)?t:this.props.value};focus=()=>{this._getInput().focus(),this._handleFocus()};blur=()=>{this._getInput().blur(),this._handleBlur()};setSelectionRange=(e,t)=>{this._getInput().setSelectionRange(e,t)};getSelectionStart=()=>this._getInput().selectionStart;getSelectionEnd=()=>this._getInput().selectionEnd;_checkValidity=e=>{if(null==e)return!0;const t=kw(e),n=this.props.checkValidity;return r.isFinite(t)&&n(t)};_handleChange=e=>{const t=e.target.value,n=this.parseInputValue(t),r=Mw(t);this.props.onChange(n),r&&(this.props.onFormatChange(n,r),this.setState({format:r}))};_handleFocus=()=>{this.props.onFocus&&this.props.onFocus()};_handleBlur=e=>{e&&"keypress"===e.type&&13!==e.keyCode||(this._setValue(this.props.value,this.state.format),this.props.onBlur&&this.props.onBlur())};_onKeyDown=e=>{if(this.props.onKeyDown&&this.props.onKeyDown(e),!this.props.useArrowKeys||!r.contains(["ArrowUp","ArrowDown"],e.key))return;let t=this.getValue();t===Math.floor(t)&&("ArrowUp"===e.key?t+=1:"ArrowDown"===e.key&&(t-=1),this._checkValidity(t)&&this.props.onChange(t))};_setValue=(e,t)=>{this._getInput().value=_w(e,t)};render(){let t=f({"number-input":!0,"invalid-input":!this._checkValidity(this.props.value),mini:"mini"===this.props.size,small:"small"===this.props.size,normal:"normal"===this.props.size});null!=this.props.className&&(t=t+" "+this.props.className);const{onFormatChange:n,checkValidity:r,useArrowKeys:i,allowPiTruncation:s,...a}=this.props;return e.jsx("input",{...a,className:t,type:"text",ref:this.inputRef,onChange:this._handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur,onKeyPress:this._handleBlur,onKeyDown:this._onKeyDown,onTouchStart:Cw,defaultValue:_w(this.props.value,this.state.format),value:void 0})}}vt.Component,Ct.array.isRequired,Ct.func.isRequired,Ct.array,Ct.func,Ct.bool;const jw=({box:t,backgroundImage:n})=>{const{url:r,width:i,height:s}=n??{};if(r&&"string"==typeof r){const n=t[0]/Ih.defaultBoxSize;return e.jsx(q,{style:{position:"absolute",bottom:0,left:0},children:e.jsx(Au.Consumer,{children:({setAssetStatus:t})=>e.jsx(Sg,{src:r,width:i,height:s,scale:n,responsive:!1,setAssetStatus:t,alt:""})})})}return null};function Tw(t){const{coord:n,text:r,color:i,size:s}=t,[a,o]=Zv(n,Gv()),{TeX:l}=Hu();return e.jsx("span",{className:"locked-label",style:{position:"absolute",left:a,top:o,color:He[i],fontSize:Te.size[s],backgroundColor:"rgba(255, 255, 255, 0.8)"},"aria-hidden":!0,children:e.jsx(l,{children:cw(r)})})}function Rw(t){const{lockedFigures:n}=t;return n.map((t,n)=>"label"===t.type?e.jsx(Tw,{...t},`label-${n}`):e.jsxs(vt.Fragment,{children:[t.labels.map((t,r)=>e.jsx(Tw,{...t},`${n}-label-${r}`)),"line"===t.type&&e.jsxs(e.Fragment,{children:[t.points[0].labels.map((t,r)=>e.jsx(Tw,{...t},`locked-figure-${n}-point-1-label-${r}`)),t.points[1].labels.map((t,r)=>e.jsx(Tw,{...t},`locked-figure-${n}-point-2-label-${r}`))]})]},n))}const Pw={thin:1,medium:2,thick:4};function Aw(e,t){if(e[0]>e[1])return t;if(e[0]<t[0]&&e[1]<t[0]||e[0]>t[1]&&e[1]>t[1])return null;return[Math.max(e[0],t[0]),Math.min(e[1],t[1])]}const Nw=t=>{const{center:n,radius:r,angle:i,color:s,fillStyle:a,strokeStyle:o,weight:l,ariaLabel:c}=t,d=!!c;return e.jsx("g",{className:"locked-ellipse","aria-label":d?c:void 0,"aria-hidden":!d,role:"img",children:e.jsx($e,{center:n,radius:r,angle:i,fillOpacity:We[a],strokeStyle:o,color:He[s],weight:Pw[l],svgEllipseProps:{style:{fill:"white"===a?U.white:He[s]}}})})},Dw=t=>{const{range:n}=Gv(),[r,i]=vt.useState(),{color:s,strokeStyle:a,weight:o,directionalAxis:l,domain:c}=t,d={color:He[s],style:a,weight:Pw[o]},u=!!t.ariaLabel;if(vt.useEffect(()=>{i(Oe(t.equation).expr)},[t.equation]),void 0===r)return null;const h=Aw(c,"x"===l?n[0]:n[1]);return null===h?null:e.jsxs("g",{className:"locked-function","aria-label":u?t.ariaLabel:void 0,"aria-hidden":!u,role:"img",children:["x"===l&&e.jsx(Xe.OfX,{y:e=>r.eval({x:e}),domain:h,...d}),"y"===l&&e.jsx(Xe.OfY,{x:e=>r.eval({y:e}),domain:h,...d})]})};function Lw(t){const{start:n,end:r,style:i,className:s,testId:a}=t;return e.jsx("line",{"aria-hidden":!0,x1:n[0],y1:n[1],x2:r[0],y2:r[1],style:i,className:s,"data-testid":a})}const{calculateAngleInDegrees:Ow}=Qp;function Fw(t){const{interactiveColor:n}=Gv(),{tail:r,tip:i,color:s=n,strokeWidth:a=2,style:o,testId:l}=t,[c,d]=Kv(r,i),u=ze.sub(d,c),h=Ow(u);return e.jsxs("g",{style:{stroke:s,strokeWidth:a},"data-testid":l,children:[e.jsx(Lw,{start:c,end:d,style:o}),e.jsx(tw,{angle:h,tip:i,color:s,strokeWidth:a})]})}function zw(e,t,n){const r=function(e){if(Number.isInteger(e)||0===e||e>1e12)return null;const t=e/Math.PI,n=parseFloat(t.toFixed(12));if(Number.isInteger(n))return n+"π";const r=[2,3,4,6];for(const i of r){const e=parseFloat((t*i).toFixed(12));if(Number.isInteger(e))return e+"π/"+i}return null}(e);return r||(0+e).toLocaleString(t,{maximumFractionDigits:n??3,useGrouping:!1})}const Bw=(e,t,n)=>{const[[r,i],[s,a]]=n,[o,l]=e,[c,d]=t,u=d-l,h=c-o,p=u/h,f=h<0?r:i,m=u<0?s:a,g=l+(f-o)*p,b=o+(m-l)*(1/p);switch(!0){case Hw(g,s,a):return[f,g];case Hw(b,r,i):return[b,m];default:return[f,m]}};function Hw(e,t,n){return e>=t&&e<=n}function $w(e){const t=[];for(const n of e)t.some(([e,t])=>e===n[0]&&t===n[1])||t.push(n);return t}function Ww(e,t){const n=(e[1][1]-e[0][1])/(e[1][0]-e[0][0]);return Number.isFinite(n)?0===n?t.srLinearGraphSlopeHorizontal:n>0?t.srLinearGraphSlopeIncreasing:t.srLinearGraphSlopeDecreasing:t.srLinearGraphSlopeVertical}function Xw(e,t,n){const r=(e[1][1]-e[0][1])/(e[1][0]-e[0][0]),i=(0-e[0][1])/r+e[0][0],s=e[0][1]-r*e[0][0],a=0===e[0][1]&&0===e[1][1],o=0===e[0][0]&&0===e[1][0],l=Number.isFinite(i)&&!a,c=Number.isFinite(s)&&!o;return l&&c?0===i&&0===s?t.srLinearGraphOriginIntercept:t.srLinearGraphBothIntercepts({xIntercept:zw(i,n),yIntercept:zw(s,n)}):l?t.srLinearGraphXOnlyIntercept({xIntercept:zw(i,n)}):t.srLinearGraphYOnlyIntercept({yIntercept:zw(s,n)})}function Vw(e){const[t,n]=e,r=Number(t.toFixed(3)),i=Number(n.toFixed(3));return 0===r&&0===i?"origin":0===i?"x-axis":0===r?"y-axis":r>0&&i>0?1:r<0&&i>0?2:r<0&&i<0?3:4}function Gw(e,t){if(t<0||t>=e.length||!Number.isInteger(t))return null;if(e.length<3)return null;const n=e.at(t),r=e.at(t-1),i=e[(t+1)%e.length];if(!n||!r||!i)return null;const s=ze.dist(n,r),a=ze.dist(n,i);let o=(s**2+a**2-ze.dist(r,i)**2)/(2*s*a);(o<-1||o>1)&&(o=Math.round(o));return Math.acos(o)}function Yw(e,t,n){if(t<0||t>=e.length||!Number.isInteger(t))return[];if(e.length<2)return[];const r=[],i=e[t],s=0===t?e.length-1:t-1,a=e[s],o=t!==s?ze.dist(i,a):null;!o||n&&0===t||r.push({pointIndex:s,sideLength:o});const l=(t+1)%e.length,c=e[l],d=t!==l&&l!==s?ze.dist(i,c):null;return!d||n&&t===e.length-1||r.push({pointIndex:l,sideLength:d}),r}function qw(e,t,n,r){return Number.isInteger(e)?n.srPolygonSideLength({pointNum:t+1,length:`${e}`}):n.srPolygonSideLengthApprox({pointNum:t+1,length:zw(e,r,1)})}const{calculateAngleInDegrees:Zw}=Qp,Kw=t=>{const{color:n,lineStyle:r,kind:i,points:s,showPoint1:a,showPoint2:o,weight:l,ariaLabel:c,range:d}=t,[u,h]=s,p=!!c;let f;if("ray"===i){const t=Bw(u.coord,h.coord,d);f=e.jsx(Fw,{tail:u.coord,tip:t,color:He[n],strokeWidth:Pw[l],style:{strokeDasharray:"dashed"===r?"var(--mafs-line-stroke-dash-style)":void 0}})}else{const t="segment"===i?Ve.Segment:Ve.ThroughPoints;let s="segment"===i?h.coord:Bw(u.coord,h.coord,d);const[a,o]=Kv(h.coord,u.coord),c=ze.sub(a,o);let p=Zw(c);const m="segment"!==i&&e.jsx(tw,{angle:p,tip:s,color:He[n],strokeWidth:Pw[l]});s="segment"===i?u.coord:Bw(h.coord,u.coord,d),p=p>180?p-180:p+180;const g="segment"!==i&&e.jsx(tw,{angle:p,tip:s,color:He[n],strokeWidth:Pw[l]});f=e.jsxs(e.Fragment,{children:[m,e.jsx(t,{point1:u.coord,point2:h.coord,color:He[n],weight:Pw[l],style:r}),g]})}return e.jsxs("g",{className:"ray"===i?"locked-ray":"locked-line","aria-label":p?c:void 0,"aria-hidden":!p,role:"img",children:[f,a&&e.jsx(Ge,{x:u.coord[0],y:u.coord[1],svgCircleProps:{style:{fill:u.filled?He[u.color]:U.white,stroke:He[u.color],strokeWidth:H.xxxxSmall_2}}}),o&&e.jsx(Ge,{x:h.coord[0],y:h.coord[1],svgCircleProps:{style:{fill:h.filled?He[h.color]:U.white,stroke:He[h.color],strokeWidth:H.xxxxSmall_2}}})]})},Qw=t=>{const{color:n,coord:r,filled:i,ariaLabel:s}=t,[a,o]=r,l=!!s;return e.jsx("g",{className:"locked-point","aria-label":l?s:void 0,"aria-hidden":!l,role:"img",children:e.jsx(Ge,{x:a,y:o,svgCircleProps:{style:{fill:i?He[n]:U.white,stroke:He[n],strokeWidth:H.xxxxSmall_2}}})})},Jw=t=>{const{points:n,color:r,showVertices:i,fillStyle:s,strokeStyle:a,weight:o}=t,l=!!t.ariaLabel;return e.jsxs("g",{className:"locked-polygon","aria-label":l?t.ariaLabel:void 0,"aria-hidden":!l,role:"img",children:[e.jsx(Ye,{points:[...n],fillOpacity:We[s],strokeStyle:a,color:He[r],weight:Pw[o],svgPolygonProps:{style:{fill:"white"===s?U.white:He[r]}}}),i&&n.map((t,n)=>e.jsx(Ge,{x:t[0],y:t[1],color:He[r]},`locked-polygon-point-${n}`))]})},eS=t=>{const{color:n,points:r,weight:i,ariaLabel:s}=t,[a,o]=r,l=!!s;return e.jsx("g",{className:"locked-vector","aria-label":l?s:void 0,"aria-hidden":!l,role:"img",children:e.jsx(Fw,{tail:a,tip:o,color:He[n],strokeWidth:Pw[i]})})},tS=t=>{const{lockedFigures:n}=t;return e.jsx(e.Fragment,{children:n.map((n,r)=>{switch(n.type){case"point":return e.jsx(Qw,{...n},`point-${r}`);case"line":return e.jsx(Kw,{range:t.range,...n},`line-${r}`);case"vector":return e.jsx(eS,{...n},`vector-${r}`);case"ellipse":return e.jsx(Nw,{...n},`ellipse-${r}`);case"polygon":return e.jsx(Jw,{...n},`polygon-${r}`);case"function":return e.jsx(Dw,{...n},`function-${r}`);case"label":return null;default:throw new Fe(n)}})})},nS={global:{deleteIntent:function(){return{type:rS}},changeInteractionMode:function(e){return{type:gS,mode:e}},changeKeyboardInvitationVisibility:function(e){return{type:bS,shouldShow:e}}},angle:{movePoint:wS},circle:{moveCenter:function(e){return{type:kS,destination:e}},moveRadiusPoint:function(e){return{type:CS,destination:e}}},linear:{moveLine:e=>sS(0,e),movePoint:(e,t)=>ES(0,e,t)},linearSystem:{moveLine:sS,movePointInFigure:ES},pointGraph:{movePoint:wS,addPoint:oS,removePoint:cS,focusPoint:uS,blurPoint:pS,clickPoint:mS},polygon:{movePoint:wS,moveAll:function(e){return{type:xS,delta:e}},addPoint:oS,removePoint:cS,focusPoint:uS,blurPoint:pS,clickPoint:mS,closePolygon:function(){return{type:US}},openPolygon:function(){return{type:yS}}},quadratic:{movePoint:wS},ray:{moveRay:e=>sS(0,e),movePoint:(e,t)=>ES(0,e,t)},segment:{movePointInFigure:ES,moveLine:sS},sinusoid:{movePoint:wS}},rS="delete-intent";const iS="move-line";function sS(e,t){return{type:iS,itemIndex:e,delta:t}}const aS="add-point";function oS(e){return{type:aS,location:e}}const lS="remove-point";function cS(e){return{type:lS,index:e}}const dS="focus-point";function uS(e){return{type:dS,index:e}}const hS="blur-point";function pS(){return{type:hS}}const fS="click-point";function mS(e){return{type:fS,index:e}}const gS="point-change-interaction-mode";const bS="change-keyboard-interaction-invitation-visibility";const US="close-polygon";const yS="open-polygon";const xS="move-all";const vS="move-point";function wS(e,t){return{type:vS,index:e,destination:t}}const SS="move-point-in-figure";function ES(e,t,n){return{type:SS,figureIndex:e,pointIndex:t,destination:n}}const kS="move-center";const CS="MOVE_RADIUS_POINT";const _S="change-snap-step";const MS="change-range";const IS="reinitialize";const jS=({children:t})=>e.jsx("g",{style:{transform:"var(--mafs-view-transform) var(--mafs-user-transform)"},children:t}),TS=({children:t,...n})=>e.jsx(qe,{size:16,svgTextProps:{filter:"url(#background)",fontWeight:"bold"},...n,children:t}),RS=()=>e.jsx("defs",{children:e.jsxs("filter",{id:"background",x:"-5%",width:"110%",y:"0%",height:"100%",children:[e.jsx("feFlood",{floodColor:"#FFF",floodOpacity:"0.64"}),e.jsx("feComposite",{operator:"over",in:"SourceGraphic"})]})}),{clockwise:PS}=Zp,{getAngleFromVertex:AS}=Qp,NS=({centerPoint:t,endPoints:n,showAngles:r,snapTo:i,areEndPointsClockwise:s})=>{const[a,o]=t,[[l,c],[d,u]]=s?n:n.reverse(),h=.3,p=ze.dist(t,n[0]),f=ze.dist(t,n[1]);let m=(p**2+f**2-ze.dist(n[0],n[1])**2)/(2*p*f);(m<-1||m>1)&&(m=Math.round(m));const g=Math.acos(m),b=o+(c-o)/p*h,U=a+(d-a)/f*h,y=a+(l-a)/p*h,x=o+(u-o)/f*h,[v,w]=ze.add(t,ze.add(ze.sub([y,b],t),ze.sub([U,x],t)));if(!r)return FS(g)?e.jsx(LS,{start:[y,b],vertex:[U,x],end:[v,w]}):null;const S=function(e,t){const n=ze.sub(t[1],e),r=ze.sub(t[0],e);return n[0]*r[1]-n[1]*r[0]>0}(t,n),E=`M ${y} ${b} A 0.3 0.3 0 ${S?1:0} ${S?1:0} ${U} ${x}`;let k=g*(180/Math.PI);S&&(k=360-k);const C=parseFloat(k.toFixed("angles"===i?0:1)),_=Number.isInteger(C)?C:"≈ "+C;return e.jsxs(e.Fragment,{children:[e.jsx("defs",{children:e.jsxs("filter",{id:"background",x:"-5%",width:"110%",y:"0%",height:"100%",children:[e.jsx("feFlood",{floodColor:"#FFF",floodOpacity:"0.5"}),e.jsx("feComposite",{operator:"over",in:"SourceGraphic"})]})}),!S&&FS(g)?e.jsx(LS,{start:[y,b],vertex:[U,x],end:[v,w]}):e.jsx(OS,{arc:E}),e.jsxs(TS,{x:v,y:w,attach:w-o>0?"s":"n",attachDistance:Math.abs(w-o)<.2||ze.dist([v,w],t)<.3?20:10,children:[_,"°"]})]})},DS=({vertex:t,coords:n,showAngles:r,allowReflexAngles:i,range:s})=>{const a=PS([...n,t])&&!i?n:n.reverse(),o=(AS(a[0],t)+360-AS(a[1],t))%360,l=o>180,[c,d]=t,[u,h]=a,[p,f]=u,[m,g]=h,b=ze.dist(t,u),y=ze.dist(t,h),x=d+(f-d)/b*2,v=c+(m-c)/y*2,w=c+(p-c)/b*2,S=d+(g-d)/y*2,[E,k]=ze.add(t,ze.add(ze.sub([w,x],t),ze.sub([v,S],t))),C=BS([E,k],t,s,[[t,u],[t,h]]),_=`M ${w} ${x} A 2 2 0 ${C||l?1:0} ${C&&l?1:0} ${v} ${S}`,M=parseFloat(o.toFixed(0)),[I,j]=function(e,t,n,r,i,s){const[a,o]=n,[l,c]=e,[d,u]=t,h=[l-a,c-o],p=[d-a,u-o],f=Math.atan2(h[1],h[0]),m=Math.atan2(p[1],p[0]);let g=(f+m)/2;const b=Math.abs(f-m);i?(b<=Math.PI&&r||m>f)&&(g+=Math.PI):b>Math.PI&&(g-=Math.PI);const U=[Math.cos(g),Math.sin(g)],y=Math.sqrt(U[0]**2+U[1]**2),x=[U[0]/y,U[1]/y],v=Math.sqrt(x[0]**2+x[1]**2),w=1.75*s;let S=w/v;v>=w&&(S=1);const E=[x[0]*S,x[1]*S],k=ze.add(E,n);return k}(u,h,t,l,i,2),{disableKeyboardInteraction:T}=Gv(),R=T?"angle-arc-static":"angle-arc-interactive";return e.jsxs(e.Fragment,{children:[e.jsx("defs",{children:e.jsxs("filter",{id:"background",x:"-5%",width:"110%",y:"0%",height:"100%",children:[e.jsx("feFlood",{floodColor:"#FFF",floodOpacity:"0.5"}),e.jsx("feComposite",{operator:"over",in:"SourceGraphic"})]})}),zS(o)?e.jsx(LS,{start:[w,x],vertex:[v,S],end:[E,k],className:R}):e.jsx(OS,{arc:_,className:R}),r&&e.jsxs(TS,{x:I,y:j,color:U.blue,children:[M,"°"]})]})},LS=({start:[t,n],vertex:[r,i],end:[s,a],className:o})=>e.jsx(jS,{children:e.jsx("path",{"aria-hidden":!0,d:`M ${t} ${n} L ${s} ${a} M ${s} ${a} L ${r} ${i}`,strokeWidth:.02,fill:"none",className:o,"data-testid":"angle-indicators__right-angle"})}),OS=({arc:t,className:n})=>e.jsx(jS,{children:e.jsx("path",{"aria-hidden":!0,d:t,strokeWidth:.02,fill:"none",className:n,"data-testid":"angle-indicators__arc"})}),FS=e=>Math.abs(e-Math.PI/2)<.01,zS=e=>90===Math.round(e),BS=(e,t,n,r)=>{const i=Bw(e,t,n);let s=0;return r.forEach(e=>(([[e,t],[n,r]],[[i,s],[a,o]])=>{const l=(n-e)*(o-s)-(a-i)*(r-t);if(0===l)return!1;{const c=((o-s)*(a-e)+(i-a)*(o-t))/l,d=((t-r)*(a-e)+(n-e)*(o-t))/l;return 0<c&&c<1&&0<d&&d<1}})([t,i],e)&&s++),!HS(s)},HS=e=>e%2==0;function $S(e){const{gestureTarget:t,onMove:n,point:r,constrainKeyboardMovement:i}=e,[s,a]=vt.useState(!1),{xSpan:o,ySpan:l}=function(){const{range:[[e,t],[n,r]]}=Gv(),i=t-e,s=r-n;return{xSpan:i,ySpan:s}}(),{viewTransform:c,userTransform:d}=Ze(),u=ze.matrixInvert(c);_t(u);const h=vt.useMemo(()=>function(e){const t=ze.matrixInvert(e);return _t(null!==t),t}(d),[d]),p=vt.useRef([0,0]);return Ke(e=>{const{type:t,event:s}=e;s?.stopPropagation();if(t.includes("key")){if(_t(s instanceof KeyboardEvent),s?.preventDefault(),"keyup"===t)return;if("object"==typeof i){const e=i[WS[s.key]];return void n(e??r)}const{direction:a,altKey:c,ctrlKey:u,metaKey:p,shiftKey:f}=e,m=[a[0],-a[1]],g=Math.abs(m[0])?o:l;let b=50;(c||p)&&(b=200),f&&!u&&(b=10);const U=g/(2*b),y=function(e,t,n=1){const r=[];for(let s=e;s<t-n/2;s+=n)r.push(s);const i=r[r.length-1]+n;Math.abs(t-i)<n/1e-6?r.push(t):r.push(i);return r}(g/b,g/2,g/b);for(const e of y){const t=ze.scale(m,e),s=i(ze.transform(ze.add(ze.transform(r,d),t),h));if(ze.dist(s,r)>U){n(s);break}}}else{const{last:t,movement:i,first:s}=e;if(a(!t),s&&(p.current=ze.transform(r,d)),0===ze.mag(i))return;const o=ze.transform(i,u);n(ze.transform(ze.add(p.current,o),h))}},{target:t,eventOptions:{passive:!1}}),{dragging:s}}const WS={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down"};function XS(t){const{point:n}=t,{range:r}=Gv(),[[i,s],[a,o]]=r,[[l,c]]=Kv(n),[[d]]=Kv([i,0]),[[u]]=Kv([s,0]),[[h,p]]=Kv([0,a]),[[f,m]]=Kv([0,o]);return e.jsxs("g",{"aria-hidden":!0,children:[e.jsx("line",{x1:d,y1:c,x2:u,y2:c,stroke:U.blue}),e.jsx("line",{x1:l,y1:p,x2:l,y2:m,stroke:U.blue})]})}const VS=vt.forwardRef(function(t,n){const{markings:r,showTooltips:i,interactiveColor:s,disableKeyboardInteraction:a,snapStep:o}=Gv(),{point:l,dragging:c,focused:d,cursor:u,showFocusRing:h,onClick:p=()=>{}}=t,f=a?"fadedOffBlack64":"blue",m=function(...e){return e.filter(Boolean).join(" ")}("movable-point",c&&"movable-point--dragging",h&&"movable-point--focus"),[[g,b]]=Kv(l),U=(c||d)&&"none"!==r,y=mw(o[0]),x=mw(o[1]),v=`(${l[0].toFixed(y)}, ${l[1].toFixed(x)})`,w=e.jsxs("g",{"aria-hidden":!0,ref:n,className:m,style:{"--movable-point-color":s,cursor:u},"data-testid":"movable-point",onClick:p,children:[e.jsx("circle",{className:"movable-point-hitbox",r:24,cx:g,cy:b}),e.jsx("circle",{className:"movable-point-halo",cx:g,cy:b}),e.jsx("circle",{className:"movable-point-ring",cx:g,cy:b}),e.jsx("circle",{className:"movable-point-focus-outline",cx:g,cy:b}),e.jsx("circle",{className:"movable-point-center",cx:g,cy:b,style:{fill:s},"data-testid":"movable-point__center"})]});return e.jsxs(e.Fragment,{children:[U&&e.jsx(XS,{point:l}),i?e.jsx(ce,{autoUpdate:!0,opened:!0,backgroundColor:f,content:v,contentStyle:{color:"white"},children:w}):w]})});function GS(t){const{snapStep:n,disableKeyboardInteraction:r}=Gv(),{point:i,ariaDescribedBy:s,ariaLabel:a,ariaLive:o="polite",constrain:l=e=>Ov(n,e),cursor:c,forwardedRef:d=YS,sequenceNumber:u=1,onMove:h=YS,onClick:p=YS,onFocus:f=YS,onBlur:m=YS}=t,{strings:g,locale:b}=zu(),[U,y]=vt.useState(!1),x=vt.useRef(null);$S({gestureTarget:x,point:i,onMove:h,constrainKeyboardMovement:l});const v=vt.useRef(null),{dragging:w}=$S({gestureTarget:v,point:i,onMove:h,constrainKeyboardMovement:l}),S=a||g.srPointAtCoordinates({num:u,x:zw(i[0],b),y:zw(i[1],b)});vt.useLayoutEffect(()=>{var e,t;e=d,t=x.current,"function"==typeof e?e(t):null!==e&&(e.current=t)},[d]),vt.useLayoutEffect(()=>{w&&!U&&x.current?.focus()},[w,U]);return{focusableHandle:e.jsx("g",{"data-testid":"movable-point__focusable-handle",className:"movable-point__focusable-handle",tabIndex:r?-1:0,ref:x,role:"button","aria-describedby":s,"aria-label":S,"aria-live":o,"aria-disabled":r,onFocus:e=>{f(e),y(!0)},onBlur:e=>{m(e),y(!1)}}),visiblePoint:e.jsx(VS,{cursor:c,onClick:()=>{p(),x.current?.focus()},point:i,dragging:w,focused:U,ref:v,showFocusRing:U}),focusableHandleRef:x,visiblePointRef:v}}const YS=()=>{},qS=t=>{const{points:[n,r],ariaLabels:i,ariaDescribedBy:s,extend:a,onMoveLine:o=()=>{},onMovePoint:l=()=>{}}=t,{snapStep:c}=Gv(),[d,u]=vt.useState(["off","off","off"]),{visiblePoint:h,focusableHandle:p}=GS({ariaLabel:i?.point1AriaLabel,ariaDescribedBy:s,ariaLive:d[0],point:n,sequenceNumber:1,onMove:e=>{u(["polite","off","off"]),l(0,e)},constrain:KS([n,r],c,0)}),{visiblePoint:f,focusableHandle:m}=GS({ariaLabel:i?.point2AriaLabel,ariaDescribedBy:s,ariaLive:d[1],point:r,sequenceNumber:2,onMove:e=>{u(["off","polite","off"]),l(1,e)},constrain:KS([n,r],c,1)}),g=e.jsx(ZS,{ariaLabel:i?.grabHandleAriaLabel,ariaDescribedBy:s,ariaLive:d[2],start:n,end:r,extend:a,onMove:e=>{u(["off","off","polite"]),o(e)}});return e.jsxs(e.Fragment,{children:[p,g,m,h,f]})},ZS=t=>{const{start:n,end:r,ariaLabel:i,ariaDescribedBy:s,ariaLive:a,extend:o,onMove:l}=t,[c,d]=Kv(n,r),{range:u,graphDimensionsInPixels:h,snapStep:p,disableKeyboardInteraction:f,interactiveColor:m}=Gv();let g,b;if(o){const e=QS(u,h);g=o.start?Bw(r,n,e):void 0,b=o.end?Bw(n,r,e):void 0}const U=vt.useRef(null),{dragging:y}=$S({gestureTarget:U,point:n,onMove:e=>{l(ze.sub(e,n))},constrainKeyboardMovement:e=>Ov(p,e)});return e.jsxs(e.Fragment,{children:[e.jsxs("g",{ref:U,tabIndex:f?-1:0,"aria-label":i,"aria-describedby":s,"aria-live":a,"aria-disabled":f,className:"movable-line","data-testid":"movable-line",style:{cursor:y?"grabbing":"grab"},role:"button",children:[e.jsx(Lw,{start:c,end:d,style:{stroke:"transparent",strokeWidth:44}}),e.jsx(Lw,{start:c,end:d,className:"movable-line-focus-outline",style:{}}),e.jsx(Lw,{start:c,end:d,className:"movable-line-focus-outline-gap",style:{}}),e.jsx(Lw,{start:c,end:d,style:{stroke:m,strokeWidth:"var(--movable-line-stroke-weight)"},className:y?"movable-dragging":"",testId:"movable-line__line"})]}),g&&e.jsx(Fw,{tail:n,tip:g,testId:"movable-line__vector"}),b&&e.jsx(Fw,{tail:r,tip:b,testId:"movable-line__vector"})]})},KS=(e,t,n)=>{const r=e[n],i=e[1-n],s=e=>{let t=e(r);return 0===ze.dist(t,i)&&(t=e(t)),t};return{up:s(e=>ze.add(e,[0,t[1]])),down:s(e=>ze.sub(e,[0,t[1]])),left:s(e=>ze.sub(e,[t[0],0])),right:s(e=>ze.add(e,[t[0],0]))}};function QS(e,t){const[n,r]=e,[i,s]=t;return Hv([4*(Fv(n)/i),4*(Fv(r)/s)],e)}const JS=vt.forwardRef(function(t,n){const{visiblePoint:r,focusableHandle:i}=GS({...t,forwardedRef:n});return e.jsxs(e.Fragment,{children:[i,r]})});function eE(t){const{id:n,children:r}=t;return e.jsx("foreignObject",{children:e.jsx("span",{id:n,style:qb.srOnly,"aria-hidden":!0,children:r})})}const{calculateAngleInDegrees:tE,getClockwiseAngle:nE,polar:rE}=Qp;function iE(t){const{dispatch:n,graphState:r}=t,{graphDimensionsInPixels:i,interactiveColor:s}=Gv(),a=zu(),o=vt.useId()+"-description",{coords:l,showAngles:c,range:d,allowReflexAngles:u,snapDegrees:h}=r,p=[l[0],l[2]],f=l[1],m=[[f,p[0]],[f,p[1]]],g=[Kv(f,p[0]),Kv(f,p[1])].map(([t,n],r)=>{const a=QS(d,i),o=Bw(m[r][0],m[r][1],a);return e.jsxs("g",{children:[e.jsx(Lw,{start:t,end:n,style:{stroke:s,strokeWidth:"var(--movable-line-stroke-weight)"},testId:"angle-graph__line"}),e.jsx(Fw,{tail:m[r][1],tip:o,testId:"angle-graph__vector"})]},`line-${r}`)}),b={vertex:f,coords:p,allowReflexAngles:u||!1,snapDegrees:h||1,range:d,showAngles:c||!1},{srAngleGraphAriaLabel:U,srAngleGraphAriaDescription:y,srAngleStartingSide:x,srAngleEndingSide:v,srAngleVertex:w}=function(e,t){const{strings:n,locale:r}=t,{coords:i,allowReflexAngles:s}=e,[a,o,l]=i,c=zw(nE(i,s),r),d=n.srAngleGraphAriaLabel,u=n.srAngleGraphAriaDescription({angleMeasure:c,vertexX:zw(o[0],r),vertexY:zw(o[1],r),startingSideX:zw(l[0],r),startingSideY:zw(l[1],r),endingSideX:zw(a[0],r),endingSideY:zw(a[1],r)}),h=n.srAngleStartingSide({x:zw(l[0],r),y:zw(l[1],r)}),p=n.srAngleEndingSide({x:zw(a[0],r),y:zw(a[1],r)}),f=n.srAngleVertexWithAngleMeasure({x:zw(o[0],r),y:zw(o[1],r),angleMeasure:c});return{srAngleGraphAriaLabel:d,srAngleGraphAriaDescription:u,srAngleStartingSide:h,srAngleEndingSide:p,srAngleVertex:f}}(r,a);return e.jsxs("g",{"aria-label":U,"aria-describedby":o,children:[g,e.jsx(DS,{...b}),e.jsx(JS,{point:l[1],sequenceNumber:1,constrain:e=>e,onMove:e=>n(nS.angle.movePoint(1,e)),ariaLabel:w}),e.jsx(JS,{point:l[0],sequenceNumber:2,constrain:dE(l[0],l[1],h||1),onMove:e=>n(nS.angle.movePoint(0,e)),ariaLabel:v}),e.jsx(JS,{point:l[2],sequenceNumber:3,constrain:dE(l[2],l[1],h||1),onMove:e=>n(nS.angle.movePoint(2,e)),ariaLabel:x}),e.jsx(eE,{id:o,children:y})]})}function sE(e,t){const{strings:n,locale:r}=t,{coords:i}=e;return n.srInteractiveElements({elements:n.srAngleInteractiveElements({vertexX:zw(i[1][0],r),vertexY:zw(i[1][1],r),startingSideX:zw(i[2][0],r),startingSideY:zw(i[2][1],r),endingSideX:zw(i[0][0],r),endingSideY:zw(i[0][1],r)})})}const aE=[1,0],oE=[-1,0],lE=[0,1],cE=[0,-1];function dE(e,t,n){const r=tE(ze.sub(e,t)),i=[e,ze.add(e,oE)],s=[e,ze.add(e,aE)],a=[e,ze.add(e,lE)],o=[e,ze.add(e,cE)],l=r+n,c=r-n,d=[t,ze.add(t,rE(1,l))],u=[t,ze.add(t,rE(1,c))],h=Xv(i,d)??Xv(i,u),p=Xv(s,d)??Xv(s,u);return{up:Xv(a,d)??Xv(a,u)??e,down:Xv(o,d)??Xv(o,u)??e,left:h??e,right:p??e}}function uE(e){const[t,n]=e.center,[r,i]=e.radiusPoint;return Math.sqrt(Math.pow(r-t,2)+Math.pow(i-n,2))}function hE(t){const{dispatch:n,graphState:r}=t,{center:i,radiusPoint:s,snapStep:a}=r,{strings:o,locale:l}=zu(),[c,d]=vt.useState("off"),u=uE(r),h=vt.useId(),p=h+"-circle",f=h+"-radius",m=h+"-outer-points",{srCircleGraph:g,srCircleShape:b,srCircleRadiusPoint:U,srCircleRadius:y,srCircleOuterPoints:x}=yE(r,{strings:o,locale:l});return e.jsxs("g",{"aria-label":g,"aria-describedby":`${p} ${f} ${m}`,children:[e.jsx(pE,{id:p,ariaLabel:b,ariaDescribedBy:`${f} ${m}`,center:i,radius:u,onMove:e=>{d("off"),n(nS.circle.moveCenter(e))}}),e.jsx(JS,{ariaLabel:`${U} ${y}`,ariaDescribedBy:`${m}`,ariaLive:c,point:s,sequenceNumber:1,cursor:"ew-resize",onMove:e=>{d("polite"),n(nS.circle.moveRadiusPoint(e))},constrain:UE(i,s,a)}),e.jsx(eE,{id:f,children:y}),e.jsx(eE,{id:m,children:x})]})}function pE(t){const{id:n,ariaLabel:r,ariaDescribedBy:i,center:s,radius:a,onMove:o}=t,{snapStep:l,disableKeyboardInteraction:c,interactiveColor:d}=Gv(),[u,h]=vt.useState(!1),p=vt.useRef(null),{dragging:f}=$S({gestureTarget:p,point:s,onMove:o,constrainKeyboardMovement:e=>Ov(l,e)}),[m]=Kv(s),[g]=Qv([a,a]);return e.jsxs("g",{"aria-label":r,"aria-describedby":i,"aria-live":"polite","aria-disabled":c,ref:p,role:"button",tabIndex:c?-1:0,className:"movable-circle "+(f?"movable-circle--dragging":""),onFocus:()=>h(!0),onBlur:()=>h(!1),children:[e.jsx("ellipse",{className:"focus-ring",cx:m[0],cy:m[1],rx:g[0]+3,ry:g[1]+3}),e.jsx("ellipse",{id:n,className:"circle",cx:m[0],cy:m[1],rx:g[0],ry:g[1],stroke:d,"data-testid":"movable-circle__circle"}),e.jsx(gE,{center:s,dragging:f,focused:u})]})}const fE=[24,14],mE=function(e,t){const n=[];for(const r of e)for(const e of t)n.push([r,e]);return n}([-4.4,0,4.4],[-2.1,2.1]);function gE(t){const{center:n,dragging:r,focused:i}=t,[s]=Kv(n),{markings:a,interactiveColor:o}=Gv(),l=Math.min(...fE)/2,c=ze.sub(s,ze.scale(fE,.5)),d=(r||i)&&"none"!==a;return e.jsxs(e.Fragment,{children:[d&&e.jsx(XS,{point:n}),e.jsx("rect",{className:"movable-circle-handle",x:c[0],y:c[1],width:fE[0],height:fE[1],rx:l,ry:l,fill:o,"data-testid":"movable-circle__handle"}),mE.map(t=>{const[n,r]=ze.add(t,s);return e.jsx("circle",{className:"movable-circle-handle-dot",cx:n,cy:r},`circle-${n}-${r}`)})]})}function bE(e,t){return yE(e,t).srCircleInteractiveElement}const UE=(e,t,n)=>{const r=n=>{let r=n(t);return 0===ze.dist(r,e)&&(r=n(r)),r};return{up:r(e=>ze.add(e,[0,n[1]])),down:r(e=>ze.sub(e,[0,n[1]])),left:r(e=>ze.sub(e,[n[0],0])),right:r(e=>ze.add(e,[n[0],0]))}};function yE(e,t){const{strings:n,locale:r}=t,{center:i,radiusPoint:s}=e,a=uE(e),o=s[0]>=i[0],l=n.srCircleGraph,c=n.srCircleShape({centerX:zw(i[0],r),centerY:zw(i[1],r)}),d=o?n.srCircleRadiusPointRight({radiusPointX:zw(s[0],r),radiusPointY:zw(s[1],r)}):n.srCircleRadiusPointLeft({radiusPointX:zw(s[0],r),radiusPointY:zw(s[1],r)}),u=n.srCircleRadius({radius:a}),h=n.srCircleOuterPoints({point1X:zw(i[0]+a,r),point1Y:zw(i[1],r),point2X:zw(i[0],r),point2Y:zw(i[1]+a,r),point3X:zw(i[0]-a,r),point3Y:zw(i[1],r),point4X:zw(i[0],r),point4Y:zw(i[1]-a,r)}),p=n.srInteractiveElements({elements:[c,u].join(" ")});return{srCircleGraph:l,srCircleShape:c,srCircleRadiusPoint:d,srCircleRadius:u,srCircleOuterPoints:h,srCircleInteractiveElement:p}}const xE=(t,n)=>{const{dispatch:r}=t,{coords:i}=t.graphState,{strings:s,locale:a}=zu(),o=vt.useId(),l=o+"-points",c=o+"-intercept",d=o+"-slope",{srLinearGraph:u,srLinearGraphPoints:h,srLinearGrabHandle:p,slopeString:f,interceptString:m}=wE(t.graphState,{strings:s,locale:a});return e.jsxs("g",{"aria-label":u,"aria-describedby":`${l} ${c} ${d}`,children:[e.jsx(qS,{ariaLabels:{grabHandleAriaLabel:p},ariaDescribedBy:`${c} ${d}`,points:i,onMoveLine:e=>{r(nS.linear.moveLine(e))},extend:{start:!0,end:!0},onMovePoint:(e,t)=>r(nS.linear.movePoint(e,t))},0),e.jsx(eE,{id:l,children:h}),e.jsx(eE,{id:c,children:m}),e.jsx(eE,{id:d,children:f})]})};function vE(e,t){return wE(e,t).srLinearInteractiveElement}function wE(e,t){const{coords:n}=e,{strings:r,locale:i}=t,s=r.srLinearGraph,a=r.srLinearGraphPoints({point1X:zw(n[0][0],i),point1Y:zw(n[0][1],i),point2X:zw(n[1][0],i),point2Y:zw(n[1][1],i)}),o=r.srLinearGrabHandle({point1X:zw(n[0][0],i),point1Y:zw(n[0][1],i),point2X:zw(n[1][0],i),point2Y:zw(n[1][1],i)}),l=Ww(n,r),c=Xw(n,r,i),d=r.srInteractiveElements({elements:[s,a].join(" ")});return{srLinearGraph:s,srLinearGraphPoints:a,srLinearGrabHandle:o,slopeString:l,interceptString:c,srLinearInteractiveElement:d}}const SE=t=>{const{dispatch:n}=t,{coords:r}=t.graphState,{strings:i,locale:s}=zu(),a=vt.useId(),o=`${a}-intersection`,l=Zp.getLineIntersection(r[0],r[1]),c=l?i.srLinearSystemIntersection({x:zw(l[0],s),y:zw(l[1],s)}):i.srLinearSystemParallel,d=r.map((e,t)=>({pointsDescriptionId:`${a}-line${t+1}-points`,interceptDescriptionId:`${a}-line${t+1}-intercept`,slopeDescriptionId:`${a}-line${t+1}-slope`,pointsDescription:i.srLinearSystemPoints({lineNumber:t+1,point1X:zw(e[0][0],s),point1Y:zw(e[0][1],s),point2X:zw(e[1][0],s),point2Y:zw(e[1][1],s)}),interceptDescription:Xw(e,i,s),slopeDescription:Ww(e,i)})),u=d.map(({pointsDescriptionId:e,interceptDescriptionId:t,slopeDescriptionId:n})=>`${e} ${t} ${n}`).join(" ");return e.jsxs("g",{"aria-label":i.srLinearSystemGraph,"aria-describedby":`${u} ${o}`,children:[r?.map((t,r)=>e.jsx(qS,{points:t,ariaLabels:{point1AriaLabel:i.srLinearSystemPoint({lineNumber:r+1,pointSequence:1,x:zw(t[0][0],s),y:zw(t[0][1],s)}),point2AriaLabel:i.srLinearSystemPoint({lineNumber:r+1,pointSequence:2,x:zw(t[1][0],s),y:zw(t[1][1],s)}),grabHandleAriaLabel:i.srLinearSystemGrabHandle({lineNumber:r+1,point1X:zw(t[0][0],s),point1Y:zw(t[0][1],s),point2X:zw(t[1][0],s),point2Y:zw(t[1][1],s)})},ariaDescribedBy:`${d[r].interceptDescriptionId} ${d[r].slopeDescriptionId} ${o}`,onMoveLine:e=>{n(nS.linearSystem.moveLine(r,e))},extend:{start:!0,end:!0},onMovePoint:(e,t)=>n(nS.linearSystem.movePointInFigure(r,e,t))},r)),d.map(({pointsDescriptionId:t,interceptDescriptionId:n,slopeDescriptionId:r,pointsDescription:i,interceptDescription:s,slopeDescription:a},o)=>e.jsxs("span",{children:[e.jsx(eE,{id:t,children:i}),e.jsx(eE,{id:n,children:s}),e.jsx(eE,{id:r,children:a})]},`line-descriptions-${o}`)),e.jsx(eE,{id:o,children:c})]})};function EE(e,t){const{strings:n,locale:r}=t,{coords:i}=e,s=[n.srLinearSystemGraph,...i.map((e,t)=>{const i=e[0],s=e[1];return n.srLinearSystemPoints({lineNumber:t+1,point1X:zw(i[0],r),point1Y:zw(i[1],r),point2X:zw(s[0],r),point2Y:zw(s[1],r)})})];return n.srInteractiveElements({elements:s.join(" ")})}function kE(t){const{numPoints:n}=t.graphState,r=Gv(),i=vt.useRef([]),{range:[s,a]}=r,[[o,l]]=Kv([s[0],a[1]]);vt.useEffect(()=>{const e=t.graphState.focusedPointIndex;null!=e&&i.current[e]?.focus()},[t.graphState.focusedPointIndex,t.graphState.coords.length,i]);const c={...t,graphConfig:r,pointsRef:i,top:l,left:o};return"unlimited"===n?function(t){const{dispatch:n,graphConfig:r,pointsRef:i,top:s,left:a}=t,{coords:o}=t.graphState,{graphDimensionsInPixels:l}=r,c=l[0],d=l[1];return e.jsxs(e.Fragment,{children:[e.jsx("rect",{style:{fill:"rgba(0,0,0,0)",cursor:"crosshair"},width:c,height:d,x:a,y:s,onClick:e=>{const t=e.currentTarget.getBoundingClientRect(),i=Jv([[e.clientX-t.x,e.clientY-t.y]],r);n(nS.pointGraph.addPoint(i[0]))}}),o.map((t,r)=>e.jsx(JS,{point:t,sequenceNumber:r+1,onMove:e=>n(nS.pointGraph.movePoint(r,e)),ref:e=>{i.current[r]=e},onFocus:()=>{n(nS.pointGraph.focusPoint(r))},onClick:()=>{n(nS.pointGraph.clickPoint(r))}},r))]})}(c):function(t){const{dispatch:n}=t;return e.jsx(e.Fragment,{children:t.graphState.coords.map((t,r)=>e.jsx(JS,{point:t,sequenceNumber:r+1,onMove:e=>n(nS.pointGraph.movePoint(r,e))},r))})}(c)}function CE(e,t){const{strings:n,locale:r}=t;if(0===e.coords.length)return n.srNoInteractiveElements;const i=e.coords.map(([e,t],i)=>n.srPointAtCoordinates({num:i+1,x:zw(e,r),y:zw(t,r)}));return n.srInteractiveElements({elements:i.join(" ")})}const{magnitude:_E,vector:ME}=Zp;function IE(e){const{graph:t,step:n,snapStep:r,range:i}=e,s={hasBeenInteractedWith:!1,range:i,snapStep:r};switch(t.type){case"segment":return{...s,type:"segment",coords:TE(t,i,n)};case"linear":case"ray":return{...s,type:t.type,coords:PE(t,i,n)};case"linear-system":return{...s,type:t.type,coords:AE(t,i,n)};case"polygon":return{...s,type:"polygon",numSides:t.numSides||0,showAngles:Boolean(t.showAngles),showSides:Boolean(t.showSides),coords:NE(t,i,n),snapTo:t.snapTo??"grid",focusedPointIndex:null,showRemovePointButton:!1,interactionMode:"mouse",showKeyboardInteractionInvitation:!1,closedPolygon:!1};case"point":return{...s,type:t.type,coords:jE(t,i,n),numPoints:t.numPoints||0,focusedPointIndex:null,showRemovePointButton:!1,interactionMode:"mouse",showKeyboardInteractionInvitation:!1};case"circle":return{...s,type:t.type,...OE(t)};case"quadratic":return{...s,type:t.type,coords:LE(t,i,n)};case"sinusoid":return{...s,type:t.type,coords:DE(t,i,n)};case"angle":return{...s,type:t.type,showAngles:Boolean(t.showAngles),coords:FE({graph:t,range:i,step:n}),angleOffsetDeg:Number(t.angleOffsetDeg),allowReflexAngles:Boolean(t.allowReflexAngles),snapDegrees:Number(t.snapDegrees)};case"none":return{...s,type:"none"};default:throw new Fe(t)}}function jE(e,t,n){const r=e.numPoints||1;let i=e.coords?.slice();if(i)return i;const s=e.startCoords?.slice();if(s)return s;switch(r){case 1:i=[e.coord||[0,0]];break;case 2:i=[[-5,0],[5,0]];break;case 3:i=[[-5,0],[0,0],[5,0]];break;case 4:i=[[-6,0],[-2,0],[2,0],[6,0]];break;case 5:i=[[-6,0],[-3,0],[0,0],[3,0],[6,0]];break;case 6:i=[[-5,0],[-3,0],[-1,0],[1,0],[3,0],[5,0]];break;default:i=[]}const a=sw(i,[[-10,10],[-10,10]]);return iw(t,n,a)}function TE(e,t,n){if(e.coords)return e.coords;if(e.startCoords)return e.startCoords;const r=[[-10,10],[-10,10]];return(e=>{switch(e){case 2:return[5,-5];case 3:return[5,0,-5];case 4:return[6,2,-2,-6];case 5:return[6,3,0,-3,-6];case 6:return[5,3,1,-1,-3,-5];default:return[5]}})(e.numSegments).map(e=>{let i=[[-5,e],[5,e]];return i=sw(i,r),i=iw(t,n,i),i})}const RE=[[[.25,.75],[.75,.75]],[[.25,.25],[.75,.25]]];function PE(e,t,n){return e.coords?e.coords:e.startCoords?e.startCoords:iw(t,n,RE[0])}function AE(e,t,n){return e.coords?e.coords:e.startCoords?e.startCoords:RE.map(e=>iw(t,n,e))}function NE(e,t,n){let r=e.coords?.slice();if(r)return r;const i=e.startCoords?.slice();if(i)return i;const s=e.numSides||3;if("unlimited"===s)r=[];else{const t=2*Math.PI/s,n=(1/s-.5)*Math.PI,i="sides"===e.snapTo?Math.sqrt(3)/3*7:4;r=[...Array(s).keys()].map(e=>[i*Math.cos(e*t+n),i*Math.sin(e*t+n)])}r=sw(r,[[-10,10],[-10,10]]);const a=!["angles","sides"].includes(e.snapTo||"");return r=iw(t,n,r,!a),r}function DE(e,t,n){if(e.coords)return[e.coords[0],e.coords[1]];if(e.startCoords)return[e.startCoords[0],e.startCoords[1]];let r=[[.5,.5],[.65,.6]];return r=iw(t,n,r,!0),r}function LE(e,t,n){if(e.coords)return e.coords;if(e.startCoords)return e.startCoords;return iw(t,n,[[.25,.75],[.5,.25],[.75,.75]],!0)}function OE(e){return null!=e.center&&null!=e.radius?{center:e.center,radiusPoint:ze.add(e.center,[e.radius,0])}:e.startCoords?.center&&e.startCoords.radius?{center:e.startCoords.center,radiusPoint:ze.add(e.startCoords.center,[e.startCoords.radius,0])}:{center:[0,0],radiusPoint:[2,0]}}const FE=e=>{const{graph:t,range:n,step:r}=e;if(t.coords)return t.coords;if(t.startCoords)return t.startCoords;const{snapDegrees:i,angleOffsetDeg:s}=t,a=i||1;let o=a;for(;o<20;)o+=a;o=o*Math.PI/180;const l=(s||0)*Math.PI/180;let c=[[.85,.5],[.5,.5]];c=iw(n,r,c,!0);const d=_E(ME(...c)),u=[...c,[0,0]];return u[0]=[u[1][0]+d*Math.cos(l),u[1][1]+d*Math.sin(l)],u[2]=[u[1][0]+d*Math.cos(o+l),u[1][1]+d*Math.sin(o+l)],u},{getAngleFromVertex:zE,getClockwiseAngle:BE,polar:HE}=Qp,{angleMeasures:$E,ccw:WE,lawOfCosines:XE,magnitude:VE,polygonSidesIntersect:GE,reverseVector:YE,sign:qE,vector:ZE}=Zp,{getQuadraticCoefficients:KE}=Jp;function QE(e,t){switch(t.type){case IS:return IE(t.params);case SS:return function(e,t){switch(e.type){case"segment":case"linear-system":{const n=function(e){const{array:t,index:n,update:r}=e,i=r(t[n]);return dk({array:t,index:n,newValue:i})}({array:e.coords,index:t.figureIndex,update:n=>dk({array:n,index:t.pointIndex,newValue:nk(t.destination,e)})}),r=n[t.figureIndex];return ck(r)?e:{...e,hasBeenInteractedWith:!0,coords:n}}case"linear":case"ray":{const n=dk({array:e.coords,index:t.pointIndex,newValue:nk(t.destination,e)});return{...e,hasBeenInteractedWith:!0,coords:n}}case"angle":case"circle":throw new Error("FIXME implement circle reducer");case"none":case"point":case"polygon":case"quadratic":case"sinusoid":throw new Error(`Don't use movePointInFigure for ${e.type} graphs. Use movePoint instead!`);default:throw new Fe(e)}}(e,t);case iS:return function(e,t){const{snapStep:n,range:r}=e;switch(e.type){case"segment":case"linear-system":{if(void 0===t.itemIndex)throw new Error("Please provide index of line to move");const i=e.coords[t.itemIndex];if(!i)throw new Error("No line to move");const s=ek(i,t.delta,{snapStep:n,range:r}),a=[Ov(n,ze.add(i[0],s)),Ov(n,ze.add(i[1],s))],o=dk({array:e.coords,index:t.itemIndex,newValue:a});return{...e,type:e.type,hasBeenInteractedWith:!0,coords:o}}case"linear":case"ray":{const i=e.coords,s=ek(i,t.delta,{snapStep:n,range:r}),a=[Ov(n,ze.add(i[0],s)),Ov(n,ze.add(i[1],s))];return{...e,type:e.type,hasBeenInteractedWith:!0,coords:a}}default:return e}}(e,t);case xS:return function(e,t){const{snapStep:n,range:r}=e;if("polygon"===e.type){let i;if("sides"===e.snapTo||"angles"===e.snapTo){const n=ek(e.coords,t.delta,{snapStep:[0,0],range:r});i=e.coords.map(e=>ze.add(e,n))}else{const s=ek(e.coords,t.delta,{snapStep:n,range:r});i=e.coords.map(e=>Ov(n,ze.add(e,s)))}return{...e,hasBeenInteractedWith:!0,coords:i}}return e}(e,t);case vS:return function(e,t){switch(e.type){case"angle":const n=(()=>{if(1===t.index){const n=function({range:e,coords:t,snapStep:n},{destination:r}){const i=[...t],s=i[1],a=Bv(Hv(ze.add(n,[2,2]),e),Ov(n,r)),o=ze.add(a,YE(s)),l={};for(const c of[0,2]){const t=i[c];let r=ze.add(t,o),s=zE(a,r);s*=Math.PI/180,r=sk(r,s,e,n),l[c]=r}return l[1]=a,Object.entries(l).forEach(([e,t])=>{i[e]=t}),i}(e,t);return{...e,hasBeenInteractedWith:!0,coords:n}}return{...e,hasBeenInteractedWith:!0,coords:dk({array:e.coords,index:t.index,newValue:ak(t.destination,e,t.index)})}})();return function(e){return ik(e.coords[0],e.coords[1],e.range)||ik(e.coords[2],e.coords[1],e.range)}(n)?e:n;case"polygon":let r;r="sides"===e.snapTo?function(e,{range:t,coords:n},r){const i=n[r];return lk(e,t,n,r,i)}(t.destination,e,t.index):"angles"===e.snapTo?function(e,{range:t,coords:n},r){const i=n[r];return ok(e,t,n,r,i)}(t.destination,e,t.index):nk(t.destination,e);const i=dk({array:e.coords,index:t.index,newValue:r});return!("unlimited"===e.numSides&&!e.closedPolygon)&&GE(i)?e:{...e,hasBeenInteractedWith:!0,coords:i};case"point":return{...e,hasBeenInteractedWith:!0,focusedPointIndex:t.index,coords:dk({array:e.coords,index:t.index,newValue:rk(t.destination,e)})};case"sinusoid":{const n=nk(t.destination,e),r=[...e.coords];return r[t.index]=n,r[0][0]===r[1][0]?e:{...e,hasBeenInteractedWith:!0,coords:dk({array:e.coords,index:t.index,newValue:n})}}case"quadratic":{const n=[...e.coords],r=nk(t.destination,e);n[t.index]=r;return void 0===KE(n)?e:{...e,hasBeenInteractedWith:!0,coords:dk({array:e.coords,index:t.index,newValue:r})}}default:throw new Error("The movePoint action is only for point, quadratic, and polygon graphs")}}(e,t);case kS:return function(e,t){if("circle"===e.type){const n=nk(t.destination,e),r=[...ze.add(e.radiusPoint,ze.sub(n,e.center))],[i,s]=e.range[0],[a]=r;if(a<i||a>s){const e=a-2*(a-n[0]);e>=i&&e<=s&&(r[0]=e)}return{...e,hasBeenInteractedWith:!0,center:n,radiusPoint:r}}throw new Error("The doMoveCenter action is only for circle graphs")}(e,t);case CS:return function(e,t){if("circle"===e.type){const[n,i]=e.range[0],s=Ov(e.snapStep,[Lv(t.destination[0]+0,n,i),e.center[1]]);return r.isEqual(s,e.center)?e:{...e,hasBeenInteractedWith:!0,radiusPoint:s}}throw new Error("The doMoveRadiusPoint action is only for circle graphs")}(e,t);case _S:return function(e,t){if(r.isEqual(e.snapStep,t.snapStep))return e;return{...e,snapStep:t.snapStep}}(e,t);case MS:return function(e,t){if(r.isEqual(e.range,t.range))return e;return{...e,range:t.range}}(e,t);case aS:return function(e,t){if(!ow(e))return e;const{snapStep:n}=e,r=Ov(n,t.location);for(const s of e.coords)if(s[0]===r[0]&&s[1]===r[1])return e;const i=[...e.coords,r];return{...e,hasBeenInteractedWith:!0,coords:i,showRemovePointButton:!0,focusedPointIndex:i.length-1}}(e,t);case lS:return JE(e,t);case dS:return function(e,t){switch(e.type){case"polygon":case"point":return{...e,focusedPointIndex:t.index};default:return e}}(e,t);case hS:return function(e){switch(e.type){case"polygon":case"point":const t={...e,showRemovePointButton:!1};return"mouse"===e.interactionMode&&(t.focusedPointIndex=null),t;default:return e}}(e);case rS:return function(e){if(ow(e)&&null!==e.focusedPointIndex)return JE(e,nS.pointGraph.removePoint(e.focusedPointIndex));return e}(e);case fS:return function(e,t){if(ow(e))return{...e,focusedPointIndex:t.index,showRemovePointButton:!0};return e}(e,t);case US:return function(e){if(ow(e)&&"polygon"===e.type){const t=$w(e.coords);return{...e,coords:t,closedPolygon:!0}}return e}(e);case yS:return function(e){if(ow(e)&&"polygon"===e.type)return{...e,closedPolygon:!1};return e}(e);case gS:return function(e,t){if(ow(e)){const n="keyboard"!==t.mode&&e.showKeyboardInteractionInvitation;return{...e,interactionMode:t.mode,showKeyboardInteractionInvitation:n}}return e}(e,t);case bS:return function(e,t){if(ow(e))return{...e,showKeyboardInteractionInvitation:t.shouldShow,hasBeenInteractedWith:!0};return e}(e,t);default:throw new Fe(t)}}function JE(e,t){if(!ow(e))return e;const n=e.coords.length>1?e.coords.length-2:null;return{...e,coords:e.coords.filter((e,n)=>n!==t.index),focusedPointIndex:n,showRemovePointButton:null!==n}}const ek=(e,t,n)=>{const r=e.map(e=>function({snapStep:e,range:t,point:n}){const r=aw({snapStep:e,range:t,point:[1/0,1/0]});return ze.sub(r,n)}({...n,point:e})),i=e.map(e=>function({snapStep:e,range:t,point:n}){const r=aw({snapStep:e,range:t,point:[-1/0,-1/0]});return ze.sub(r,n)}({...n,point:e})),[s,a]=((e,t,n)=>{const[r,i]=n,s=Math.min(...e.map(e=>e[0])),a=Math.min(...e.map(e=>e[1])),o=Math.max(...t.map(e=>e[0])),l=Math.max(...t.map(e=>e[1]));return[Lv(r,o,s),Lv(i,l,a)]})(r,i,t);return[s,a]};function tk(e,t){return e<t||b(e,t)}function nk(e,{snapStep:t,range:n}){return Ov(t,aw({snapStep:t,range:n,point:e}))}function rk(e,{snapStep:t,range:n}){return Ov(t,function({range:e,point:t}){return Bv(e,t)}({range:n,point:e}))}function ik(e,t,n){return ze.dist(e,t)<2}function sk(e,t,n,r){const i=[n[0][0]+r[0],n[1][0]+r[0]],s=[n[0][1]-r[1],n[1][1]-r[1]];let a=e;return a[0]<i[0]?a=[i[0],a[1]+(i[0]-a[0])*Math.tan(t)]:a[0]>s[0]&&(a=[s[0],a[1]-(a[0]-s[0])*Math.tan(t)]),a[1]<i[1]?a=[a[0]+(i[1]-a[1])/Math.tan(t),i[1]]:a[1]>s[1]&&(a=[a[0]-(a[1]-s[1])/Math.tan(t),s[1]]),a}function ak(e,{range:t,coords:n,snapDegrees:r,angleOffsetDeg:i,snapStep:s},a){const o=r||1,l=i||0,c=[...n],d=aw({snapStep:[0,0],range:[[t[0][0]+s[0],t[0][1]-s[0]],[t[1][0]+s[1],t[1][1]-s[1]]],point:e});c[a]=d;const u=n[1];let h=zE(c[a],u);h=Math.round((h-l)/o)*o+l;const p=Math.max(ze.dist(c[a],u),2.01);return ze.add(u,HE(p,h))}function ok(e,t,n,i,s){const a=[...n];a[i]=aw({snapStep:[0,0],range:t,point:e});const o=$E(a).map(e=>180*e/Math.PI),l=e=>(i+e+a.length)%a.length;r.each([-1,1],function(e){o[l(e)]=Math.round(o[l(e)])});const c=function(e,t,n){return BE([a[l(e)],a[l(t)],a[l(n)]])},d=[o[l(-1)]-c(-2,-1,1),o[l(1)]-c(-1,1,2)];if(d[2]=180-(d[0]+d[1]),d.some(function(e){return tk(e,1)}))return s;const u=VE(ZE(a[l(-1)],a[l(1)])),h=1===qE(WE(a[l(-1)],a[l(1)],a[i])),p=Math.sin(d[1]*Math.PI/180)/Math.sin(d[2]*Math.PI/180)*u,f=zE(a[l(1)],a[l(-1)]),m=HE(p,f+(h?1:-1)*d[0]);return yp.add(a[l(-1)],m)}function lk(e,t,n,i,s){const a=aw({snapStep:[0,0],range:t,point:e}),o=e=>(i+e+n.length)%n.length,l=r.map([[n[o(-1)],a],[a,n[o(1)]],[n[o(-1)],n[o(1)]]],function(e){return VE(ZE(...e))});if(r.each([0,1],function(e){l[e]=Math.round(l[e])}),tk(l[1]+l[2],l[0])||tk(l[0]+l[2],l[1])||tk(l[0]+l[1],l[2]))return s;const c=XE(l[0],l[2],l[1]),d=zE(n[o(1)],n[o(-1)]),u=1===qE(WE(n[o(-1)],n[o(1)],a)),h=HE(l[0],d+(u?1:-1)*c);return yp.add(n[o(-1)],h)}const ck=e=>e.some((t,n)=>e.some((e,r)=>n!==r&&yp.equal(t,e)));function dk(e){const{array:t,index:n,newValue:r}=e,i=[...t];return i[n]=r,i}const{clockwise:uk}=Zp,{convertRadiansToDegrees:hk}=Qp;const pk=t=>{const{dispatch:n}=t,{numSides:r,coords:i,snapStep:s,snapTo:a="grid"}=t.graphState,o=Gv(),l=vt.useRef(null),c=vt.useRef([]),d=vt.useRef(0),{range:[u,h]}=o,[[p,f]]=Kv([u[0],h[1]]),m=i??[[0,0]],g=m[0],b=function(e,t){switch(t){case"grid":return t=>Ov(e,t);case"sides":case"angles":return e=>e;default:throw new Fe(t)}}(s,a),{dragging:U}=$S({gestureTarget:l,point:g,onMove:e=>{const t=ze.sub(e,g);n(nS.polygon.moveAll(t))},constrainKeyboardMovement:b}),[y,x]=vt.useState(!1),[v,w]=vt.useState(!1);vt.useEffect(()=>{const e=t.graphState.focusedPointIndex;null!=e&&c.current[e]?.focus()},[t.graphState.focusedPointIndex,t.graphState.coords.length,c]),vt.useEffect(()=>{"unlimited"===r&&t.graphState.coords.length>2&&n(nS.polygon.closePolygon())},[]);const S={...t,graphConfig:o,polygonRef:l,pointsRef:c,lastMoveTimeRef:d,left:p,top:f,dragging:U,points:m,hovered:y,setHovered:x,focusVisible:v,setFocusVisible:w};return"unlimited"===r?e.jsx(mk,{...S}):e.jsx(fk,{...S})},fk=t=>{const{dispatch:n,hovered:r,setHovered:i,focusVisible:s,setFocusVisible:a,graphConfig:o,polygonRef:l,lastMoveTimeRef:c,dragging:d,points:u}=t,{showAngles:h,showSides:p,range:f,snapTo:m="grid",snapStep:g}=t.graphState,{disableKeyboardInteraction:b,interactiveColor:U}=o,{strings:y,locale:x}=zu(),v=vt.useId(),w=Array(u.length).fill("off"),[S,E]=vt.useState(["off",...w]),k=function(e){return e.map((t,n)=>[t,e[(n+1)%e.length]])}(u),C=v+"-points-num",_=v+"-points",{srPolygonGraph:M,srPolygonGraphPointsNum:I,srPolygonGraphPoints:j,srPolygonElementsNum:T}=Uk(t.graphState,{strings:y,locale:x},t.graphConfig.markings);return e.jsxs("g",{"aria-label":M,"aria-describedby":`${C} ${_}`,children:[e.jsx(Ye,{points:[...u],color:U,svgPolygonProps:{strokeWidth:s?"var(--movable-line-stroke-weight-active)":"var(--movable-line-stroke-weight)",style:{fill:"transparent"},"aria-hidden":!0}}),u.map((t,n)=>{const r=u.at(n-1),i=u[(n+1)%u.length];return r&&i?e.jsx(NS,{centerPoint:t,endPoints:[r,i],areEndPointsClockwise:uk(u),showAngles:!!h,snapTo:m},"angle-"+n):null}),p&&k.map(([t,n],r)=>{const[i,s]=ze.midpoint(t,n),a=ze.dist(t,n),o=!Number.isInteger(a);return e.jsx(TS,{x:i,y:s,children:o?`≈ ${a.toFixed("sides"===m?0:1)}`:a},"side-"+r)}),e.jsx(Ye,{points:[...u],color:"transparent",svgPolygonProps:{ref:l,tabIndex:b?-1:0,strokeWidth:44,style:{cursor:d?"grabbing":"grab",fill:r?"var(--mafs-blue)":"transparent"},onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onKeyDownCapture:()=>{a(gk(l.current))},onFocus:()=>{a(gk(l.current)),E(()=>["polite",...w])},onBlur:()=>a(gk(l.current)),className:"movable-polygon",role:"button","aria-label":j?`${T} ${j}`:T,"aria-live":S[0],"aria-disabled":b}}),u.map((t,r)=>{const i=`${v}-angle-${r}`,s=`${v}-point-${r}-side-1`,a=`${v}-point-${r}-side-2`,o=Gw(u,r),l=o?hk(o):null,d=Yw(u,r),{pointIndex:h,sideLength:p}=d[0],{pointIndex:b,sideLength:U}=d[1];return e.jsxs("g",{children:[e.jsx(JS,{ariaDescribedBy:`${i} ${s} ${a}`,ariaLive:S[r+1],constrain:yk(u,r,f,g,m),point:t,sequenceNumber:r+1,onMove:e=>{const t=Date.now();t-c.current>25&&(n(nS.polygon.movePoint(r,e)),c.current=t)},onFocus:()=>{const e=[...w];e[r]="polite",E(["off",...e])}}),l&&e.jsx(eE,{id:i,children:Number.isInteger(l)?y.srPolygonPointAngle({angle:l}):y.srPolygonPointAngleApprox({angle:zw(l,x,1)})}),e.jsx(eE,{id:s,children:qw(p,h,y,x)}),e.jsx(eE,{id:a,children:qw(U,b,y,x)})]},"point-"+r)}),e.jsx(eE,{id:C,children:I}),j&&e.jsx(eE,{id:_,children:j})]})},mk=t=>{const{dispatch:n,graphConfig:r,left:i,top:s,pointsRef:a,points:o}=t,{coords:l,closedPolygon:c}=t.graphState,{strings:d,locale:u}=zu(),{interactiveColor:h}=Gv(),p=vt.useId(),f=p+"-points-num",m=p+"-points",g=Array(o.length).fill("off"),[b,U]=vt.useState(g);if(c){const n={...t,numSides:l.length};return e.jsx(fk,{...n})}const{graphDimensionsInPixels:y}=r,x=y[0],v=y[1],w=0===l.length,{srPolygonGraph:S,srPolygonGraphPointsNum:E,srPolygonGraphPoints:k}=Uk(t.graphState,{strings:d,locale:u},t.graphConfig.markings);return e.jsxs("g",{"aria-label":w?d.srUnlimitedPolygonEmpty:S,"aria-describedby":`${f} ${m}`,children:[e.jsx(Qe,{points:[...o],color:h,svgPolylineProps:{strokeWidth:"var(--movable-line-stroke-weight)",style:{fill:"transparent"},"aria-hidden":!0}}),e.jsx("rect",{"aria-hidden":!0,style:{fill:"rgba(0,0,0,0)",cursor:"crosshair"},width:x,height:v,x:i,y:s,onClick:e=>{const t=e.currentTarget.getBoundingClientRect(),i=Jv([[e.clientX-t.x,e.clientY-t.y]],r);n(nS.polygon.addPoint(i[0]))}}),l.map((t,r)=>{const i=`${p}-angle-${r}`;let s="";const c=r>0&&r<l.length-1?Gw(o,r):null,h=c?hk(c):null,f=Yw(o,r,!0);for(let e=0;e<f.length;e++)s+=`${p}-point-${r}-side-${e} `;return e.jsxs("g",{children:[e.jsx(JS,{ariaDescribedBy:`${i} ${s}`,ariaLive:b[r],point:t,sequenceNumber:r+1,onMove:e=>n(nS.polygon.movePoint(r,e)),ref:e=>{a.current[r]=e},onFocus:()=>{n(nS.polygon.focusPoint(r));const e=[...g];e[r]="polite",U([...e])},onClick:()=>{0===r&&$w(l).length>=3&&n(nS.polygon.closePolygon()),n(nS.polygon.clickPoint(r))}}),h&&e.jsx(eE,{id:i,children:Number.isInteger(h)?d.srPolygonPointAngle({angle:h}):d.srPolygonPointAngleApprox({angle:zw(h,u,1)})}),f.map(({pointIndex:t,sideLength:n},i)=>e.jsx(eE,{id:`${p}-point-${r}-side-${i}`,children:qw(n,t,d,u)},`${p}-point-${r}-side-${i}`))]},"point-"+r)}),l.length>0&&e.jsx(eE,{id:f,children:E}),k&&e.jsx(eE,{id:m,children:k})]})};const gk=e=>{const t=t=>e?.matches(t)??!1;try{return t(":focus-visible")}catch{return t(":focus")}};function bk(e,t,n){return Uk(e,t,n).srPolygonInteractiveElements}function Uk(e,t,n){const{strings:r,locale:i}=t,{coords:s}=e,a="axes"===n||"graph"===n,o=1===s.length,l=a?r.srPolygonGraphCoordinatePlane:r.srPolygonGraph,c=o?r.srPolygonGraphPointsOne:r.srPolygonGraphPointsNum({num:s.length});let d;if(a){d=s.map((e,t)=>r.srPointAtCoordinates({num:t+1,x:zw(e[0],i),y:zw(e[1],i)})).join(" ")}const u=o?r.srPolygonElementsOne:r.srPolygonElementsNum({num:s.length}),h=s.length>0?r.srInteractiveElements({elements:[u,d].join(" ")}):null;return{srPolygonGraph:l,srPolygonGraphPointsNum:c,srPolygonGraphPoints:d,srPolygonElementsNum:u,srPolygonInteractiveElements:h}}function yk(e,t,n,r,i){switch(i){case"grid":return e=>Ov(r,e);case"sides":return function(e,t,n){const r=[...e],i=r[t],s=e=>{let s=e(i),a=i;for(;a[0]===i[0]&&a[1]===i[1]&&$v({range:n,point:s});)a=lk(s,n,r,t,i),s=e(s);return a};return{up:s(e=>ze.add(e,[0,1])),down:s(e=>ze.sub(e,[0,1])),left:s(e=>ze.sub(e,[1,0])),right:s(e=>ze.add(e,[1,0]))}}(e,t,n);case"angles":return function(e,t,n){const r=[...e],i=r[t],s=e=>{let s=aw({snapStep:[0,0],range:n,point:e(i)}),a=i;for(;a[0]===i[0]&&a[1]===i[1]&&$v({range:n,point:s});)a=ok(s,n,r,t,i),s=e(s);return a};return{up:s(e=>ze.add(e,[0,.1])),down:s(e=>ze.sub(e,[0,.1])),left:s(e=>ze.sub(e,[.1,0])),right:s(e=>ze.add(e,[.1,0]))}}(e,t,n);default:throw new Fe(i)}}function xk(t){const{dispatch:n,graphState:r}=t,{coords:i,snapStep:s}=r,{interactiveColor:a}=Gv(),{strings:o,locale:l}=zu(),c=vt.useId(),d=c+"-direction",u=c+"-vertex",h=c+"-intercepts",p=vt.useRef([0,0,0]),f=vk(i);void 0!==f&&(p.current=f);const[m,g,b]=p.current,{srQuadraticGraph:U,srQuadraticDirection:y,srQuadraticVertex:x,srQuadraticXIntercepts:v,srQuadraticYIntercept:w}=Sk(r,{strings:o,locale:l});return e.jsxs("g",{"aria-label":U,"aria-describedby":`${d} ${u} ${h}`,children:[e.jsx(Xe.OfX,{y:e=>(m*e+g)*e+b,color:a,svgPathProps:{"aria-hidden":!0}}),i.map((t,r)=>{const a=function(e,t,n,r){const i=Vw(t),[s,a]=t;switch(i){case"origin":return n.srQuadraticPointOrigin({pointNumber:e});case"x-axis":case"y-axis":return n.srQuadraticPointAxis({pointNumber:e,x:zw(s,r),y:zw(a,r)});default:return n.srQuadraticPointQuadrant({pointNumber:e,quadrant:i,x:zw(s,r),y:zw(a,r)})}}(r+1,t,o,l),c=x?` ${x}`:"";return e.jsx(JS,{ariaLabel:`${a}${c}`,point:t,sequenceNumber:r+1,constrain:Ek(i,s,r),onMove:e=>n(nS.quadratic.movePoint(r,e))},"point-"+r)}),y&&e.jsx(eE,{id:d,children:y}),x&&e.jsx(eE,{id:u,children:x}),e.jsx(eE,{id:h,children:v?`${v} ${w}`:`${w}`})]})}const vk=e=>{const t=e[0],n=e[1],r=e[2],i=(t[0]-n[0])*(t[0]-r[0])*(n[0]-r[0]);if(0===i)return;return[(r[0]*(n[1]-t[1])+n[0]*(t[1]-r[1])+t[0]*(r[1]-n[1]))/i,(r[0]*r[0]*(t[1]-n[1])+n[0]*n[0]*(r[1]-t[1])+t[0]*t[0]*(n[1]-r[1]))/i,(n[0]*r[0]*(n[0]-r[0])*t[1]+r[0]*t[0]*(r[0]-t[0])*n[1]+t[0]*n[0]*(t[0]-n[0])*r[1])/i]};function wk(e,t){return Sk(e,t).srQuadraticInteractiveElements}function Sk(e,t){const{strings:n,locale:r}=t,i=vk(e.coords),[s,a,o]=i??[0,0,0],l=[-a/(2*s),o-a*a/(4*s)],c=function(e,t,n){if(0===e)return 0===t?[]:[-n/t];const r=t*t-4*e*n;if(r<0)return[];const i=(-t+Math.sqrt(r))/(2*e),s=(-t-Math.sqrt(r))/(2*e);return i===s?[i]:[i,s]}(s,a,o),d=n.srQuadraticGraph,u=n.srQuadraticFaceUp,h=n.srQuadraticFaceDown,p=0===s?void 0:s>0?u:h,f=0!==s?function(e,t){const n=Vw(e);switch(n){case"origin":return t.srQuadraticGraphVertexOrigin;case"x-axis":return t.srQuadraticGraphVertexXAxis;case"y-axis":return t.srQuadraticGraphVertexYAxis;default:return t.srQuadraticGraphVertexQuadrant({quadrant:n})}}(l,n):void 0;return{srQuadraticGraph:d,srQuadraticDirection:p,srQuadraticVertex:f,srQuadraticXIntercepts:2===c.length?n.srQuadraticTwoXIntercepts({intercept1:zw(c[0],r),intercept2:zw(c[1],r)}):1===c.length?n.srQuadraticOneXIntercept({intercept:zw(c[0],r)}):void 0,srQuadraticYIntercept:n.srQuadraticYIntercept({intercept:zw(o,r)}),srQuadraticInteractiveElements:n.srInteractiveElements({elements:n.srQuadraticInteractiveElements({point1X:zw(e.coords[0][0],r),point1Y:zw(e.coords[0][1],r),point2X:zw(e.coords[1][0],r),point2Y:zw(e.coords[1][1],r),point3X:zw(e.coords[2][0],r),point3Y:zw(e.coords[2][1],r)})})}}const Ek=(e,t,n)=>{const r=[e[0],e[1],e[2]],i=r[n],s=e=>{let t=e(i);return r[n]=t,kk(r)?t:(t=e(t),r[n]=t,kk(r)?t:e(t))};return{up:ze.add(i,[0,t[1]]),down:ze.sub(i,[0,t[1]]),left:s(e=>ze.sub(e,[t[0],0])),right:s(e=>ze.add(e,[t[0],0]))}},kk=e=>{const t=e[0],n=e[1],r=e[2];return t[0]!==n[0]&&n[0]!==r[0]&&t[0]!==r[0]};const Ck=t=>{const{dispatch:n}=t,{coords:r}=t.graphState,{strings:i,locale:s}=zu(),a=vt.useId()+"-points",{srRayGraph:o,srRayPoints:l,srRayEndpoint:c,srRayTerminalPoint:d,srRayGrabHandle:u}=Mk(t.graphState,{strings:i,locale:s});return e.jsxs("g",{"aria-label":o,"aria-describedby":a,children:[e.jsx(qS,{points:r,ariaLabels:{point1AriaLabel:c,point2AriaLabel:d,grabHandleAriaLabel:u},onMoveLine:e=>n(nS.ray.moveRay(e)),onMovePoint:(e,t)=>n(nS.ray.movePoint(e,t)),extend:{start:!1,end:!0}}),e.jsx(eE,{id:a,children:l})]})};function _k(e,t){return Mk(e,t).srRayInteractiveElement}function Mk(e,t){const{coords:n}=e,{strings:r,locale:i}=t,s=r.srRayGraph,a=r.srRayPoints({point1X:zw(n[0][0],i),point1Y:zw(n[0][1],i),point2X:zw(n[1][0],i),point2Y:zw(n[1][1],i)}),o=r.srRayEndpoint({x:zw(n[0][0],i),y:zw(n[0][1],i)}),l=r.srRayTerminalPoint({x:zw(n[1][0],i),y:zw(n[1][1],i)}),c=r.srRayGrabHandle({point1X:zw(n[0][0],i),point1Y:zw(n[0][1],i),point2X:zw(n[1][0],i),point2Y:zw(n[1][1],i)}),d=r.srInteractiveElements({elements:[s,a].join(" ")});return{srRayGraph:s,srRayPoints:a,srRayEndpoint:o,srRayTerminalPoint:l,srRayGrabHandle:c,srRayInteractiveElement:d}}const Ik=({dispatch:t,graphState:n})=>{const{coords:r}=n,{strings:i,locale:s}=zu(),a=vt.useId(),o=a+"-length",l=a+"-whole-graph";const c=r?.length>1?i.srMultipleSegmentGraphAriaLabel({countOfSegments:r.length}):i.srSingleSegmentGraphAriaLabel;function d(e,t){return 1===r.length?i.srSingleSegmentLabel({point1X:zw(r[0][0][0],s),point1Y:zw(r[0][0][1],s),point2X:zw(r[0][1][0],s),point2Y:zw(r[0][1][1],s)}):i.srMultipleSegmentIndividualLabel({point1X:zw(e[0][0],s),point1Y:zw(e[0][1],s),point2X:zw(e[1][0],s),point2Y:zw(e[1][1],s),indexOfSegment:t+1})}function u(e,t,n,a){const o={endpointNumber:e,x:zw(t,s),y:zw(n,s)};return r.length>1?i.srMultipleSegmentGraphEndpointAriaLabel({...o,indexOfSegment:a}):i.srSingleSegmentGraphEndpointAriaLabel(o)}return e.jsxs("g",{"aria-label":c,"aria-describedby":`${l} ${1===r.length&&o}`,children:[r?.map((n,l)=>e.jsxs("g",{"aria-label":1===r.length?void 0:d(n,l),"aria-describedby":1===r.length?void 0:o,children:[e.jsx(qS,{points:n,onMoveLine:e=>{t(nS.segment.moveLine(l,e))},onMovePoint:(e,n)=>{t(nS.segment.movePointInFigure(l,e,n))},ariaLabels:{point1AriaLabel:u(1,n[0][0],n[0][1],l+1),point2AriaLabel:u(2,n[1][0],n[1][1],l+1),grabHandleAriaLabel:i.srSegmentGrabHandle({point1X:zw(n[0][0],s),point1Y:zw(n[0][1],s),point2X:zw(n[1][0],s),point2Y:zw(n[1][1],s)})}},l),e.jsx(eE,{id:o,children:i.srSegmentLength({length:zw(jk(n),s)})})]},`${a}-${l}`)),e.jsx(eE,{id:l,children:r.map((e,t)=>d(e,t)).join(" ")})]})};function jk(e){return Np.distanceToPoint(...e)}function Tk(e,t){const{strings:n,locale:r}=t,i=e.coords.map(([e,t],i)=>n.srMultipleSegmentIndividualLabel({point1X:zw(e[0],r),point1Y:zw(e[1],r),point2X:zw(t[0],r),point2Y:zw(t[1],r),indexOfSegment:i+1}));return n.srInteractiveElements({elements:i.join(" ")})}function Rk(t){const{dispatch:n,graphState:r}=t,{interactiveColor:i}=Gv(),s=zu(),a=vt.useId()+"-description",{coords:o,snapStep:l}=r,c=vt.useRef({amplitude:1,angularFrequency:1,phase:1,verticalOffset:0}),d=Nk(o);void 0!==d&&(c.current=d);const{srSinusoidGraph:u,srSinusoidDescription:h,srSinusoidRootPoint:p,srSinusoidPeakPoint:f}=Lk(r,s);return e.jsxs("g",{"aria-label":u,"aria-describedby":a,children:[e.jsx(Xe.OfX,{y:e=>Ak(e,c.current),color:i,svgPathProps:{"aria-hidden":!0}}),o.map((t,r)=>e.jsx(JS,{ariaLabel:0===r?p:f,point:t,sequenceNumber:r+1,constrain:Pk(o,l,r),onMove:e=>n(nS.sinusoid.movePoint(r,e))},"point-"+r)),e.jsx(eE,{id:a,children:h})]})}const Pk=(e,t,n)=>{const r=e[n],i=e[1-n],s=e=>{let t=e(r);return t[0]===i[0]&&(t=e(t)),t};return{up:s(e=>ze.add(e,[0,t[1]])),down:s(e=>ze.sub(e,[0,t[1]])),left:s(e=>ze.sub(e,[t[0],0])),right:s(e=>ze.add(e,[t[0],0]))}},Ak=function(e,t){const{amplitude:n,angularFrequency:r,phase:i,verticalOffset:s}=t;return n*Math.sin(r*e-i)+s},Nk=e=>{const t=e[0],n=e[1];if(n[0]===t[0])return;const r=n[1]-t[1],i=Math.PI/(2*(n[0]-t[0]));return{amplitude:r,angularFrequency:i,phase:t[0]*i,verticalOffset:t[1]}};function Dk(e,t){return Lk(e,t).srSinusoidInteractiveElements}function Lk(e,t){const{strings:n,locale:r}=t,{coords:i}=e,[s,a]=i,o=Math.abs(a[0]-s[0]),l=Math.abs(a[1]-s[1]),c={x:zw(s[0],r),y:zw(s[1],r)},d={x:zw(a[0],r),y:zw(a[1],r)};return{srSinusoidGraph:n.srSinusoidGraph,srSinusoidDescription:n.srSinusoidDescription({minValue:zw(s[1]-l,r),maxValue:zw(s[1]+l,r),cycleStart:zw(s[0]-2*o,r),cycleEnd:zw(s[0]+2*o,r)}),srSinusoidRootPoint:n.srSinusoidRootPoint(c),srSinusoidPeakPoint:a[1]===s[1]?n.srSinusoidFlatPoint(d):a[1]>s[1]?n.srSinusoidMaxPoint(d):n.srSinusoidMinPoint(d),srSinusoidInteractiveElements:n.srInteractiveElements({elements:n.srSinusoidInteractiveElements({point1X:zw(s[0],r),point1Y:zw(s[1],r),point2X:zw(a[0],r),point2Y:zw(a[1],r)})})}}const{calculateAngleInDegrees:Ok,convertDegreesToRadians:Fk}=Qp,zk=[-195,-190],Bk=[-201,-15];function Hk(){const t=Hu().staticUrl,{range:n,snapStep:r}=Gv(),[[i,s],[a,o]]=n,l=[Wv(i,s,.5),Wv(a,o,.25)],[c,d]=vt.useState(l),[u,h]=vt.useState(Bk),p=vt.useRef(null),{dragging:f}=$S({gestureTarget:p,onMove:d,point:c,constrainKeyboardMovement:e=>aw({snapStep:r,range:n,point:e})}),m=vt.useRef(null);!function(e){const{gestureTarget:t,onMove:n,point:r,constrain:i=e=>e}=e,s=vt.useRef([0,0]);Ke(e=>{const{event:t,first:a,movement:o}=e;t?.stopPropagation(),a&&(s.current=r),0!==ze.mag(o)&&n?.(i(ze.add(s.current,o)))},{target:t,eventOptions:{passive:!1}})}({gestureTarget:m,onMove:h,point:u,constrain:Xk});const[g]=Kv(c),b=ze.add(g,zk),U=Ok(u)-Ok(Bk);return e.jsxs("g",{ref:p,transform:`translate(${b[0]}, ${b[1]}), rotate(${U})`,style:{transformOrigin:`${-zk[0]}px ${-zk[1]}px`,cursor:f?"grabbing":"grab"},children:[e.jsx("image",{href:t("https://cdn.kastatic.org/images/perseus/protractor.svg")}),e.jsx("g",{transform:`translate(5, ${-zk[1]})`,ref:m,children:e.jsx($k,{})})]})}function $k(){const t=Fk(10),n=175*(1-Math.cos(t)),r=175*-Math.sin(t),i=Av().move(0,0).circularArc(175,n,r,{sweep:!0}).build(),s=Av().move(-8,0).line(0,10).line(8,0).build();return e.jsxs("g",{className:"protractor-rotation-handle",children:[e.jsx("path",{className:"protractor-rotation-handle-arrow-arc",d:i}),e.jsx("path",{className:"protractor-rotation-handle-arrowhead",d:s}),e.jsx("path",{className:"protractor-rotation-handle-arrowhead",d:s,transform:`translate(${n}, ${r}), rotate(190)`}),e.jsx("ellipse",{cx:"0px",cy:"-15px",rx:22,ry:22,fill:"none"})]})}const Wk=ze.mag(Bk);function Xk(e){return ze.withMag(e,Wk)}const Vk=t=>{const{state:n,dispatch:r,labels:i,labelLocation:s,readOnly:a,fullGraphAriaLabel:o,fullGraphAriaDescription:l}=t,{type:c}=n,[d,u]=t.box,h=t.step,p=vt.useId(),f=`interactive-graph-description-${p}`,m=`interactive-graph-interactive-elements-description-${p}`,g=`unlimited-graph-keyboard-prompt-${p}`,b=`instructions-${p}`,U=vt.useRef(null),{analytics:y}=Wu(),{viewboxX:x,viewboxY:v}=((e,t,n)=>{let r=0;const i=t/uw(e[0]),s=e[0][0];s>0&&(r=i*Math.abs(s)),s<0&&(r=-i*Math.abs(s));let a=-n;const o=n/uw(e[1]),l=e[1][0];return l>0&&(a=-n-o*Math.abs(l)),l<0&&(a=o*Math.abs(l)-n),{viewboxX:r,viewboxY:a}})(n.range,d,u),w={width:d,height:u,viewBox:`${x} ${v} ${d} ${u}`,preserveAspectRatio:"xMidYMin",x:x,y:v},S=zu(),{strings:E}=S,k=ow(n)&&n.showKeyboardInteractionInvitation;Je(()=>{y.onAnalyticsEvent({type:"perseus:widget:rendered:ti",payload:{widgetSubType:c,widgetType:"INTERACTIVE_GRAPH",widgetId:"interactive-graph"}})});const{graph:C,interactiveElementsDescription:_}=Yk({state:n,dispatch:r,i18n:S,markings:t.markings}),M=a||!!t.static,I={range:n.range,width:d,height:u},[j,T]=pw(I,s,h),R="alongEdge"===s&&T[0]<-17.5,P=-1*(T[0]-2.5);return e.jsx(Vv.Provider,{value:{range:n.range,snapStep:n.snapStep,markings:t.markings,tickStep:h,gridStep:t.gridStep,showTooltips:!!t.showTooltips,showAxisArrows:t.showAxisArrows,graphDimensionsInPixels:t.box,width:d,height:u,labels:i,labelLocation:s,disableKeyboardInteraction:M,interactiveColor:M?"var(--static-gray)":"var(--mafs-blue)"},children:e.jsxs(q,{className:"mafs-graph-container",children:[e.jsxs(q,{className:"mafs-graph",style:{position:"relative",padding:"25px 25px 0 0",boxSizing:"content-box",marginLeft:R?`${P}px`:"20px",marginBottom:"30px",pointerEvents:t.static?"none":"auto",userSelect:"none",width:d,height:u},onKeyUp:e=>{!function(e,t,n){ow(t)&&("Backspace"===e.key||"Delete"===e.key?(document.activeElement?.classList.contains("movable-point__focusable-handle")&&("point"===t.type||"polygon"===t.type&&!t.closedPolygon)&&n(nS.global.deleteIntent()),document.activeElement.blur()):e.shiftKey&&"Enter"===e.key?n(nS.global.changeInteractionMode("keyboard")):"keyboard"===t.interactionMode&&"a"===e.key&&n(nS.pointGraph.addPoint([0,0])))}(e,n,r)},"aria-label":o,"aria-describedby":qk(l&&f,_&&m,ow(n)&&g,"none"!==n.type&&!M&&b),ref:U,tabIndex:0,onFocus:e=>{!function(e,t,n){ow(t)&&e.target.classList.contains("mafs-graph")&&"mouse"===t.interactionMode&&n(nS.global.changeKeyboardInvitationVisibility(!0))}(e,n,r)},onBlur:e=>{!function(e,t,n){ow(t)&&n(nS.global.changeKeyboardInvitationVisibility(!1))}(0,n,r)},children:[l&&e.jsx(q,{id:f,tabIndex:-1,className:"mafs-sr-only",children:l}),_&&e.jsx(q,{id:m,tabIndex:-1,className:"mafs-sr-only",children:_}),"none"!==n.type&&e.jsx(q,{id:b,tabIndex:-1,className:"mafs-sr-only",children:ow(n)?E.srUnlimitedGraphInstructions:E.srGraphInstructions}),e.jsx(jw,{box:t.box,backgroundImage:t.backgroundImage}),e.jsxs(q,{style:{position:"absolute",bottom:0,left:0},children:[("graph"===t.markings||"axes"===t.markings)&&e.jsx(e.Fragment,{children:e.jsx(bw,{i18n:S,xAxisLabelLocation:j,yAxisLabelLocation:T})}),e.jsx(q,{"aria-hidden":0===t.lockedFigures.length,children:e.jsxs(et,{preserveAspectRatio:!1,viewBox:{x:n.range[0],y:n.range[1],padding:0},pan:!1,zoom:!1,width:d,height:u,children:[e.jsx(RS,{}),e.jsx("svg",{...w,children:e.jsx(Sw,{gridStep:t.gridStep,range:n.range,containerSizeClass:t.containerSizeClass,markings:t.markings,width:d,height:u})}),("graph"===t.markings||"axes"===t.markings)&&e.jsxs(e.Fragment,{children:[e.jsx(vw,{}),e.jsx(nw,{})]}),t.lockedFigures.length>0&&e.jsx("svg",{...w,children:e.jsx(tS,{lockedFigures:t.lockedFigures,range:n.range})})]})}),e.jsx(Rw,{lockedFigures:t.lockedFigures}),e.jsx(q,{style:{position:"absolute"},children:e.jsx(et,{preserveAspectRatio:!1,viewBox:{x:n.range[0],y:n.range[1],padding:0},pan:!1,zoom:!1,width:d,height:u,children:e.jsxs("svg",{...w,style:{overflow:"point"===c?"visible":"hidden"},children:[t.showProtractor&&e.jsx(Hk,{}),C]})})})]}),k&&e.jsx(q,{style:{display:k?void 0:"hidden",textAlign:"center",backgroundColor:"white",border:"1px solid #21242C52",padding:"16px 0",boxShadow:"0px 8px 8px 0px #21242C14",top:"50%",transform:"translateY(-50%)"},children:e.jsx(tt,{id:g,children:E.graphKeyboardPrompt})})]}),Gk({state:n,dispatch:r,width:d,perseusStrings:E})]})})},Gk=t=>{const{state:n,dispatch:r,width:i,perseusStrings:s}=t,{type:a}=n;switch(a){case"point":return"unlimited"===n.numPoints?(t=>{const{interactionMode:n,showRemovePointButton:r,focusedPointIndex:i}=t.state,{perseusStrings:s}=t,a=r&&null!==i;return e.jsxs(q,{style:{flexDirection:"row",width:t.width},children:["keyboard"===n&&e.jsx(je,{kind:"secondary",style:{width:"100%",marginLeft:"20px"},tabIndex:0,onClick:()=>{t.dispatch(nS.pointGraph.addPoint([0,0]))},children:s.addPoint}),"mouse"===n&&e.jsx(je,{id:rw,kind:"secondary",actionType:"destructive",tabIndex:-1,style:{width:"100%",marginLeft:"20px",visibility:a?"visible":"hidden"},onClick:e=>{t.dispatch(nS.pointGraph.removePoint(t.state.focusedPointIndex))},children:s.removePoint})]})})({state:n,dispatch:r,width:i,perseusStrings:s}):null;case"polygon":return"unlimited"===n.numSides?(t=>{const{interactionMode:n,showRemovePointButton:r,focusedPointIndex:i,closedPolygon:s,coords:a}=t.state,{perseusStrings:o}=t,l=r&&null!==i,c=$w(a).length<3,d=s?e.jsx(je,{kind:"secondary",style:{width:"100%",marginLeft:"20px"},tabIndex:0,onClick:()=>{t.dispatch(nS.polygon.openPolygon())},children:o.openPolygon}):e.jsx(je,{kind:"secondary",disabled:c,style:{width:"100%",marginLeft:"20px"},tabIndex:c?-1:0,onClick:()=>{t.dispatch(nS.polygon.closePolygon())},children:o.closePolygon});return e.jsx(e.Fragment,{children:e.jsxs(q,{style:{flexDirection:"row",width:t.width},children:["keyboard"===n&&e.jsx(je,{kind:"secondary",style:{width:"100%",marginLeft:"20px"},disabled:s,tabIndex:s?-1:0,onClick:()=>{t.dispatch(nS.polygon.addPoint([0,0]))},children:o.addPoint}),"mouse"===n&&e.jsx(je,{id:rw,kind:"secondary",actionType:"destructive",disabled:s||!l,tabIndex:-1,style:{width:"100%",marginLeft:"20px"},onClick:e=>{t.dispatch(nS.polygon.removePoint(t.state.focusedPointIndex))},children:o.removePoint}),d]})})})({state:n,dispatch:r,width:i,perseusStrings:s}):null;default:return null}};const Yk=t=>{const{state:n,dispatch:r,i18n:i,markings:s}=t,{type:a}=n;switch(a){case"angle":return function(t,n,r){return{graph:e.jsx(iE,{graphState:t,dispatch:n}),interactiveElementsDescription:sE(t,r)}}(n,r,i);case"segment":return function(t,n,r){return{graph:e.jsx(Ik,{graphState:t,dispatch:n}),interactiveElementsDescription:Tk(t,r)}}(n,r,i);case"linear-system":return function(t,n,r){return{graph:e.jsx(SE,{graphState:t,dispatch:n}),interactiveElementsDescription:EE(t,r)}}(n,r,i);case"linear":return function(t,n,r){return{graph:e.jsx(xE,{graphState:t,dispatch:n}),interactiveElementsDescription:vE(t,r)}}(n,r,i);case"ray":return function(t,n,r){return{graph:e.jsx(Ck,{graphState:t,dispatch:n}),interactiveElementsDescription:_k(t,r)}}(n,r,i);case"polygon":return function(t,n,r,i){return{graph:e.jsx(pk,{graphState:t,dispatch:n}),interactiveElementsDescription:bk(t,r,i)}}(n,r,i,s);case"point":return function(t,n,r){return{graph:e.jsx(kE,{graphState:t,dispatch:n}),interactiveElementsDescription:CE(t,r)}}(n,r,i);case"circle":return function(t,n,r){return{graph:e.jsx(hE,{graphState:t,dispatch:n}),interactiveElementsDescription:bE(t,r)}}(n,r,i);case"quadratic":return function(t,n,r){return{graph:e.jsx(xk,{graphState:t,dispatch:n}),interactiveElementsDescription:wk(t,r)}}(n,r,i);case"sinusoid":return function(t,n,r){return{graph:e.jsx(Rk,{graphState:t,dispatch:n}),interactiveElementsDescription:Dk(t,r)}}(n,r,i);case"none":return{graph:null,interactiveElementsDescription:null};default:throw new Fe(a)}};function qk(...e){return e.filter(Boolean).join(" ")||void 0}const Zk=vt.forwardRef(function(t,n){const{onChange:r,graph:i}=t,[s,a]=vt.useReducer(QE,t,IE);vt.useImperativeHandle(n,()=>({getUserInput:()=>function(e,t){if(!e.hasBeenInteractedWith)return{...t};if("linear-system"===t.type&&"linear-system"===e.type)return{...t,coords:e.coords};if("segment"===e.type&&"segment"===t.type)return{...t,coords:e.coords};if("linear"===e.type&&"linear"===t.type)return{...t,coords:e.coords};if("ray"===e.type&&"ray"===t.type)return{...t,coords:e.coords};if("polygon"===e.type&&"polygon"===t.type)return"unlimited"!==e.numSides||e.closedPolygon?{...t,coords:e.coords}:{...t,coords:null};if("point"===e.type&&"point"===t.type)return"unlimited"===e.numPoints&&0===e.coords.length?{...t,coords:null}:{...t,coords:e.coords};if("circle"===e.type&&"circle"===t.type)return{...t,center:e.center,radius:uE(e)};if("quadratic"===e.type&&"quadratic"===t.type)return{...t,coords:e.coords};if("sinusoid"===e.type&&"sinusoid"===t.type)return{...t,coords:e.coords};if("angle"===e.type&&"angle"===t.type)return{...t,coords:e.coords,allowReflexAngles:e.allowReflexAngles};if("none"===e.type&&"none"===t.type)return{type:"none"};throw new Error("Mafs is not yet implemented for graph type: "+t.type)}(s,i)}));const o=vt.useRef(s);vt.useEffect(()=>{o.current!==s&&r(function(e,t){switch(e.type){case"angle":return _t("angle"===t.type),{...t,coords:e.coords};case"quadratic":return _t("quadratic"===t.type),{...t,coords:e.coords};case"circle":return _t("circle"===t.type),{...t,center:e.center,radius:uE(e)};case"linear":return _t("linear"===t.type),{...t,coords:e.coords};case"ray":return _t("ray"===t.type),{...t,coords:e.coords};case"sinusoid":return _t("sinusoid"===t.type),{...t,coords:e.coords};case"segment":return _t("segment"===t.type),{...t,coords:e.coords};case"linear-system":return _t("linear-system"===t.type),{...t,coords:e.coords};case"polygon":return _t("polygon"===t.type),{...t,coords:e.coords};case"point":return _t("point"===t.type),{...t,coords:e.coords};case"none":return _t("none"===t.type),{...t};default:throw new Fe(e)}}(s,i)),o.current=s},[r,s,i]);const[l,c]=t.snapStep;vt.useEffect(()=>{a({type:_S,snapStep:[l,c]})},[a,l,c]);const[[d,u],[h,p]]=t.range;vt.useEffect(()=>{a({type:MS,range:[[d,u],[h,p]]})},[a,d,u,h,p]);const f="segment"===i.type?i.numSegments:null,m="point"===i.type?i.numPoints:null,g="polygon"===i.type?i.numSides:null,b="polygon"===i.type?i.snapTo:null,U="polygon"===i.type||"angle"===i.type?i.showAngles:null,y="angle"===i.type?i.allowReflexAngles:null,x="polygon"===i.type?i.showSides:null,v="startCoords"in i?i.startCoords:void 0,w=vt.useRef(t),S=nt(t);return vt.useEffect(()=>{var e;S.current!==w.current&&a((e=S.current,{type:IS,params:e}))},[i.type,m,f,g,b,U,x,S,v,y]),t.static&&t.correct?e.jsx(Vk,{...t,state:IE({...t,graph:t.correct}),dispatch:a}):e.jsx(Vk,{...t,state:s,dispatch:a})}),{getClockwiseAngle:Kk}=Qp,{getLineEquation:Qk,getLineIntersectionString:Jk,magnitude:eC,vector:tC}=Zp,nC={url:null},rC="unlimited";const iC=(e,t)=>new u(`${e} called but current graph type is not a '${t}'`,h.NotAllowed,{metadata:{graphType:t}});class sC extends vt.Component{mafsRef=vt.createRef();static defaultProps={labels:["x","y"],labelLocation:"onAxis",range:[[-10,10],[-10,10]],showAxisArrows:{xMin:!0,xMax:!0,yMin:!0,yMax:!0},step:[1,1],backgroundImage:nC,markings:"graph",showTooltips:!1,showProtractor:!1,userInput:{type:"linear"}};getUserInput(){if(this.mafsRef.current?.getUserInput)return this.mafsRef.current.getUserInput();throw new u("Cannot getUserInput from a graph that has never rendered",h.NotAllowed)}getPromptJSON(){return e=this.props,t=this.getUserInput(),{type:"interactive-graph",options:{graph:Rv(e),backgroundImageUrl:e.backgroundImage?.url,range:e.range,labels:e.labels},userInput:Pv(t)};var e,t}getSerializedState(){const{userInput:e,...t}=this.props;return{...t,graph:this.props.userInput}}render(){const t=mb(this.props.containerSizeClass),n=this.props.gridStep||nh.getGridStep(this.props.range,this.props.step,t[0]),r=this.props.snapStep||nh.snapStepFromGridStep(n),i={...this.props,graph:this.props.userInput,onChange:()=>this.props.handleUserInput(this.mafsRef.current?.getUserInput())};return e.jsx(Zk,{...i,ref:this.mafsRef,gridStep:n,snapStep:r,box:t,showTooltips:!!this.props.showTooltips,readOnly:this.props.apiOptions?.readOnly})}static getLineCoords(e,t){return e.coords||sC.pointsFromNormalized(t,[[.25,.75],[.75,.75]])}static getPointCoords(e,t){const n=e.numPoints||1;let r=e.coords;if(r)return r;switch(n){case 1:r=[e.coord||[0,0]];break;case 2:r=[[-5,0],[5,0]];break;case 3:r=[[-5,0],[0,0],[5,0]];break;case 4:r=[[-6,0],[-2,0],[2,0],[6,0]];break;case 5:r=[[-6,0],[-3,0],[0,0],[3,0],[6,0]];break;case 6:r=[[-5,0],[-3,0],[-1,0],[1,0],[3,0],[5,0]];break;case rC:r=[]}const i=sC.normalizeCoords(r,[[-10,10],[-10,10]]);return sC.pointsFromNormalized(t,i)}static getLinearSystemCoords(e,t){return e.coords||r.map([[[.25,.75],[.75,.75]],[[.25,.25],[.75,.25]]],e=>sC.pointsFromNormalized(t,e))}static getPolygonCoords(e,t){if("polygon"!==e.type)throw iC("toggleShowSides","polygon");let n=e.coords;if(n)return n;const i=e.numSides||3;if(i===rC)n=[];else{const t=2*Math.PI/i,s=(1/i-.5)*Math.PI,a="sides"===e.snapTo?Math.sqrt(3)/3*7:4;n=r.times(i,function(e){return[a*Math.cos(e*t+s),a*Math.sin(e*t+s)]})}n=sC.normalizeCoords(n,[[-10,10],[-10,10]]);const s=!r.contains(["angles","sides"],e.snapTo);return n=sC.pointsFromNormalized(t,n,!s),n}static getSegmentCoords(e,t){const n=e.coords;if(n)return n;const r=e.numSegments||1,i=[[-10,10],[-10,10]];return{1:[5],2:[5,-5],3:[5,0,-5],4:[6,2,-2,-6],5:[6,3,0,-3,-6],6:[5,3,1,-1,-3,-5]}[r].map(function(e){let n=[[-5,e],[5,e]];return n=sC.normalizeCoords(n,i),n=sC.pointsFromNormalized(t,n),n})}static getAngleCoords(e,t){let n=e.coords;if(n)return n;const r=e.snapDegrees||1;let i=r;for(;i<20;)i+=r;i=i*Math.PI/180;const s=(e.angleOffsetDeg||0)*Math.PI/180;n=sC.pointsFromNormalized(t,[[.85,.5],[.5,.5]]);const a=eC(tC(...n));return n[0]=[n[1][0]+a*Math.cos(s),n[1][1]+a*Math.sin(s)],n[2]=[n[1][0]+a*Math.cos(i+s),n[1][1]+a*Math.sin(i+s)],n}static normalizeCoords(e,t){return r.map(e,function(e){return r.map(e,function(e,n){const r=t[n][1]-t[n][0];return(e+t[n][1])/r})})}static getEquationString(e){const t=e.userInput.type;switch(t){case"none":return sC.getNoneEquationString();case"linear":return sC.getLinearEquationString(e);case"quadratic":return sC.getQuadraticEquationString(e);case"sinusoid":return sC.getSinusoidEquationString(e);case"circle":return sC.getCircleEquationString(e);case"linear-system":return sC.getLinearSystemEquationString(e);case"point":return sC.getPointEquationString(e);case"segment":return sC.getSegmentEquationString(e);case"ray":return sC.getRayEquationString(e);case"polygon":return sC.getPolygonEquationString(e);case"angle":return sC.getAngleEquationString(e);default:throw new Fe(t)}}static pointsFromNormalized(e,t,n){return r.map(t,function(t){return r.map(t,function(t,r){const i=e.range[r];if(n)return i[0]+(i[1]-i[0])*t;const s=e.step[r],a=function(e,t){return Math.floor((e[1]-e[0])/t)}(i,s),o=Math.round(t*a);return i[0]+s*o})})}static getNoneEquationString(){return""}static getLinearEquationString(e){const t=sC.getLineCoords(e.userInput,e);if(b(t[0][0],t[1][0]))return"x = "+t[0][0].toFixed(3);const n=(t[1][1]-t[0][1])/(t[1][0]-t[0][0]),r=t[0][1]-n*t[0][0];return b(n,0)?"y = "+r.toFixed(3):"y = "+n.toFixed(3)+"x + "+r.toFixed(3)}static getCurrentQuadraticCoefficients(e){return function(e){const t=e[0],n=e[1],r=e[2],i=(t[0]-n[0])*(t[0]-r[0])*(n[0]-r[0]);if(0===i)return;return[(r[0]*(n[1]-t[1])+n[0]*(t[1]-r[1])+t[0]*(r[1]-n[1]))/i,(r[0]*r[0]*(t[1]-n[1])+n[0]*n[0]*(r[1]-t[1])+t[0]*t[0]*(n[1]-r[1]))/i,(n[0]*r[0]*(n[0]-r[0])*t[1]+r[0]*t[0]*(r[0]-t[0])*n[1]+t[0]*n[0]*(t[0]-n[0])*r[1])/i]}(e.userInput.coords||sC.defaultQuadraticCoords(e))}static defaultQuadraticCoords(e){return sC.pointsFromNormalized(e,[[.25,.75],[.5,.25],[.75,.75]])}static getQuadraticEquationString(e){const t=sC.getCurrentQuadraticCoefficients(e);return"y = "+t[0].toFixed(3)+"x^2 + "+t[1].toFixed(3)+"x + "+t[2].toFixed(3)}static getCurrentSinusoidCoefficients(e){return function(e){const t=e[0],n=e[1],r=n[1]-t[1],i=Math.PI/(2*(n[0]-t[0]));return[r,i,t[0]*i,t[1]]}(e.userInput.coords||sC.defaultSinusoidCoords(e))}static defaultSinusoidCoords(e){return sC.pointsFromNormalized(e,[[.5,.5],[.65,.6]])}static getSinusoidEquationString(e){const t=sC.getCurrentSinusoidCoefficients(e);return"y = "+t[0].toFixed(3)+"sin("+t[1].toFixed(3)+"x - "+t[2].toFixed(3)+") + "+t[3].toFixed(3)}static getCircleEquationString(e){const t=e.userInput,n=t.center||[0,0],r=t.radius||2;return"center ("+n[0]+", "+n[1]+"), radius "+r}static getLinearSystemEquationString(e){const t=sC.getLinearSystemCoords(e.userInput,e);return"\n"+Qk(t[0][0],t[0][1])+"\n"+Qk(t[1][0],t[1][1])+"\n"+Jk(t[0],t[1])}static getPointEquationString(e){if("point"!==e.userInput.type)throw iC("getPointEquationString","point");return sC.getPointCoords(e.userInput,e).map(function(e){return"("+e[0]+", "+e[1]+")"}).join(", ")}static getSegmentEquationString(e){if("segment"!==e.userInput.type)throw iC("getSegmentEquationString","segment");const t=sC.getSegmentCoords(e.userInput,e);return r.map(t,function(e){return"["+r.map(e,function(e){return"("+e.join(", ")+")"}).join(" ")+"]"}).join(" ")}static getRayEquationString(e){if("ray"!==e.userInput.type)throw iC("createPointForPolygonType","ray");const t=sC.getLineCoords(e.userInput,e),n=t[0],r=t[1];let i=sC.getLinearEquationString(e);return n[0]>r[0]?i+=" (for x <= "+n[0].toFixed(3)+")":n[0]<r[0]?i+=" (for x >= "+n[0].toFixed(3)+")":n[1]>r[1]?i+=" (for y <= "+n[1].toFixed(3)+")":i+=" (for y >= "+n[1].toFixed(3)+")",i}static getPolygonEquationString(e){if("polygon"!==e.userInput.type)throw iC("getPolygonEquationString","polygon");const t=sC.getPolygonCoords(e.userInput,e);return r.map(t,function(e){return"("+e.join(", ")+")"}).join(" ")}static getAngleEquationString(e){if("angle"!==e.userInput.type)throw iC("getAngleEquationString","angle");const t=sC.getAngleCoords(e.userInput,e),n=e.userInput.allowReflexAngles;return Kk(t,n).toFixed(0)+"° angle at ("+t[1].join(", ")+")"}}const aC={name:"interactive-graph",displayName:"Interactive graph",widget:sC,getStartUserInput:function(e){return e.graph},getCorrectUserInput:function(e){return e.correct},getUserInputFromSerializedState:function(e){return e.graph}},oC=t=>{const{strings:n}=zu(),r=e=>{const{choices:n,onChange:r}=t;r(n.map(t=>e.includes(t.content)))},i=t.choices.filter(e=>e.checked).map(e=>e.content),{opener:s,onToggle:a,disabled:o}=t,l={style:{zIndex:"unset"},children:(c=t.choices,c.map(({content:t})=>e.jsx(Ee,{value:t,label:e.jsx(kb,{content:t,strings:n,inline:!0})},t))),opener:s,onToggle:a,disabled:o};var c;return t.multipleSelect?e.jsx(rt,{...l,selectedValues:i,onChange:e=>r(e)}):e.jsx(_e,{...l,selectedValue:i[0],onChange:e=>r([e]),placeholder:t.choices[0].content})},lC=t=>{const n=vt.useId(),r=vt.useId(),{strings:i}=zu();return e.jsxs(q,{style:cC.switchWrapper,children:[e.jsx(it,{id:n,checked:t.areAnswersHidden,onChange:t.onChange,"aria-labelledby":r}),e.jsx(tt,{id:r,htmlFor:n,tag:"label",children:i.hideAnswersToggleLabel})]})},cC=E.create({switchWrapper:{display:"flex",flexDirection:"row",flexWrap:"wrap-reverse",alignItems:"center",gap:"0.5em",marginTop:"1em"}}),dC={boxShadow:`0 8px 8px ${U.offBlack64}`,zIndex:1e3},uC=t=>{const{selectedAnswers:n,showCorrectness:r,markerRef:i,side:s,onClick:a,style:o,focused:l,hovered:c}=t,d=vt.useId(),{strings:u}=zu(),h=n.length>1?u.answers({num:n.length}):n[0],p="correct"===r,f="incorrect"===r;return e.jsx(st,{placement:s,referenceElement:i,modifiers:[{name:"preventOverflow",options:{rootBoundary:"viewport"}}],children:({ref:t,style:n})=>e.jsx(at,{size:"large",kind:"accent",id:d,onClick:p?void 0:a,ref:t,style:[o,n,hC.pill,p&&hC.correct,f&&hC.incorrect,(l||c)&&dC],children:e.jsx(kb,{content:h,strings:u,inline:!0})})})},hC=E.create({correct:{backgroundColor:"#00880b"},incorrect:{backgroundColor:U.offBlack64},pill:{height:"auto"}});function pC(){if("function"!=typeof window.matchMedia)return!0;const e=window.matchMedia("(prefers-reduced-motion: reduce)");return!e||e.matches}const fC=24;class mC extends vt.Component{static contextType=Ou;_icon;_mounted=!1;static defaultProps={selected:[]};componentDidMount(){this._mounted=!0}componentWillUnmount(){this._mounted=!1}renderIcon(){const{selected:t,showCorrectness:n,showSelected:r,showPulsate:i}=this.props,s=r,a=t;let o;let l={size:fC,color:U.white,icon:{path:"",height:1,width:1}};return n?(o=[gC.markerGraded,"correct"===n?gC.markerCorrect:gC.markerIncorrect,s&&gC.markerSelected],l={...l,icon:"correct"===n?gm:km}):a&&a.length>0?o=[gC.markerFilled,s&&gC.markerSelected]:s?(o=[gC.markerSelected],l={...l,icon:bm,size:8}):i&&(o=[gC.markerPulsateBase,this._mounted&&pC()?i&&gC.markerUnfilledPulsateOnce:i&&gC.markerUnfilledPulsateInfinite]),e.jsx(q,{style:[gC.markerIcon,o],ref:e=>this._icon=e,children:e.jsx(Ew,{...l})})}render(){const{showCorrectness:t,selected:n,showAnswer:r,answerSide:i,answerStyles:s,hovered:a,focused:o,label:l}=this.props,c="correct"===t,d=a||o;return e.jsxs(e.Fragment,{children:[e.jsx(q,{style:[gC.marker,d&&!c&&gC.markerActive],"aria-label":c?this.context.strings.correctExcited:l,children:this.renderIcon()}),!!n&&r&&e.jsx(uC,{selectedAnswers:n,showCorrectness:t,side:i,style:s,markerRef:this._icon??void 0,hovered:a,focused:o})]})}}const gC=E.create({marker:{position:"absolute",backgroundColor:U.white,borderRadius:fC,width:fC,height:fC,marginLeft:-12,marginTop:-12,boxShadow:`0 8px 8px ${U.offBlack8}`},markerIcon:{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",width:fC,height:fC,border:`2px solid ${U.offBlack64}`,borderRadius:fC},markerPulsateBase:{animationName:{"0%":{transform:"scale(1)",backgroundColor:U.blue},"100%":{transform:"scale(1.3)",backgroundColor:U.blue}},animationDirection:"alternate",animationDuration:"0.8s",animationTimingFunction:"ease-in",transformOrigin:"50% 50%",animationIterationCount:"0"},markerUnfilledPulsateInfinite:{animationIterationCount:"infinite"},markerUnfilledPulsateOnce:{animationIterationCount:"2"},markerActive:{outline:`2px solid ${U.blue}`,outlineOffset:2},markerSelected:{boxShadow:`0 8px 8px ${U.offBlack8}`,border:`solid 4px ${U.white}`,backgroundColor:U.blue,borderRadius:fC,transform:"rotate(180deg)"},markerFilled:{backgroundColor:"#ECF3FE",border:`4px solid ${U.blue}`},markerGraded:{width:fC,height:fC,justifyContent:"center",alignItems:"center",border:`2px solid ${U.white}`},markerCorrect:{background:"#00880b"},markerIncorrect:{background:U.offBlack64}});function bC(e){return null!=e.answers}class UC extends vt.Component{static contextType=Ou;_markers;_mounted=!1;static pointInTriangle(e,t,n,r){const i=(e,t,n)=>(e.x-n.x)*(t.y-n.y)-(t.x-n.x)*(e.y-n.y),s=i(e,t,n)<0,a=i(e,n,r)<0,o=i(e,r,t)<0;return s===a&&a===o}static imageSideForMarkerPosition(e,t,n){if(n&&"NONE"!==n){if("LEFT"===n&&e>20)return"right";if("RIGHT"===n&&e<80)return"left";if("UP"===n&&t>20)return"bottom";if("DOWN"===n&&t<80)return"top"}if(e<20)return"left";if(e>80)return"right";const r={x:20,y:0},i={x:80,y:0},s={x:80,y:100},a={x:20,y:100},o={x:50,y:50},l=["top","right","bottom","left"],c={top:[r,i,o],right:[o,i,s],bottom:[a,o,s],left:[r,o,a]},d={x:e,y:t};for(const u of l){const e=c[u];if(UC.pointInTriangle(d,...e))return u}return"center"}static navigateToMarkerIndex(e,t,n){const r=t[n],i=t.map((e,t)=>{const n=e.x-r.x,i=e.y-r.y,s=Math.sqrt(n**2+i**2);return{index:t,dist:s,dir:{x:0!==s?n/s:0,y:0!==s?i/s:0}}}).filter(e=>e.index!==n&&"correct"!==t[e.index].showCorrectness).sort((t,n)=>{const r=Math.round(t.dist*(e.x*t.dir.x+e.y*t.dir.y)),i=Math.round(n.dist*(e.x*n.dir.x+e.y*n.dir.y));let s,a;return e.x>0?(s=t.dir.x>0&&0!==r,a=n.dir.x>0&&0!==i):e.x<0?(s=t.dir.x<0&&0!==r,a=n.dir.x<0&&0!==i):e.y>0?(s=t.dir.y>0&&0!==r,a=n.dir.y>0&&0!==i):e.y<0&&(s=t.dir.y<0&&0!==r,a=n.dir.y<0&&0!==i),s!==a?s?-1:1:r-i});return i.length>0?i[0].index:n}constructor(e){super(e),this._markers=[],this.state={activeMarkerIndex:-1,markersInteracted:!1,hideAnswers:!1}}componentDidMount(){this._mounted=!0}componentWillUnmount(){this._mounted=!1}getPromptJSON(){return(e=>{const t=e.markers.map(e=>{const t={label:e.label};return e.answers?.length&&(t.answers=e.answers),t}),n=e.userInput.markers.map(e=>({label:e.label,selected:e.selected}));return{type:"label-image",options:{choices:e.choices,imageUrl:e.imageUrl,imageAlt:e.imageAlt,markers:t},userInput:{markers:n}}})(this.props)}handleMarkerChange(e,t){const{userInput:n,handleUserInput:r}=this.props;r({markers:[...n.markers.slice(0,e),{label:t.label,selected:t.selected},...n.markers.slice(e+1)]})}activateMarker(e,t){this.props.analytics?.onAnalyticsEvent({type:"perseus:label-image:marker-interacted-with",payload:null}),this.props.analytics?.onAnalyticsEvent({type:"perseus:label-image:marker-interacted-with:ti",payload:null});const{activeMarkerIndex:n}=this.state;n!==e&&t?this.setState({activeMarkerIndex:e,markersInteracted:!0}):this.setState({activeMarkerIndex:-1})}handleMarkerKeyDown(e,n){const{markers:r}=this.props;if(r.length<2)return;const i={ArrowUp:{x:0,y:-1},ArrowRight:{x:1,y:0},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0}};if(!(n.key in i))return;const s=i[n.key];n.preventDefault();const a=this._markers[UC.navigateToMarkerIndex(s,r,e)];a&&t.findDOMNode(a).focus()}handleAnswerChoicesChangeForMarker(e,t){const{choices:n,markers:r}=this.props,i=n.filter((e,n)=>t[n]);this.handleMarkerChange(e,{...r[e],selected:i.length>0?i:void 0})}renderMarkers(){const{markers:t,preferredPopoverDirection:n,userInput:r}=this.props,{markersInteracted:i,activeMarkerIndex:s}=this.state,a=this._mounted&&window.matchMedia(Ab.xsOrSmaller.replace("@media ","")).matches,o=this.props.imageWidth/2>this.props.imageHeight;return t.map((t,l)=>{const c=r.markers[l];let d,u;a||o?(d=t.y>50?"top":"bottom",u=t.y>50?"bottom":"top"):(u=UC.imageSideForMarkerPosition(t.x,t.y,n),"center"===u&&(u="bottom"),d={left:"right",top:"bottom",right:"left",bottom:"top"}[u]);const h=function(e,t,n,r){return"all"===r||n?bC(e)?{...t,selected:e.answers}:{...t,selected:void 0}:t}(t,c,this.props.reviewMode,this.props.showSolutions);let p;p=bC(t)?ot(h.selected,t.answers):{hasAnswers:!1,isCorrect:!1};const f="all"===this.props.showSolutions||this.props.reviewMode,m=f&&p.isCorrect?"correct":t.showCorrectness,g=f,b=s===l,U=h.selected&&!this.state.hideAnswers&&!b,y={[`margin${u.charAt(0).toUpperCase()+u.slice(1)}`]:10};return e.jsx(q,{style:{position:"absolute",left:`${t.x}%`,top:`${t.y}%`,zIndex:"unset"},children:e.jsx(oC,{choices:this.props.choices.map(e=>({content:e,checked:!!h.selected&&h.selected.includes(e)})),multipleSelect:this.props.multipleAnswers,onChange:e=>{this.props.analytics?.onAnalyticsEvent({type:"perseus:label-image:choiced-interacted-with",payload:null}),this.props.analytics?.onAnalyticsEvent({type:"perseus:label-image:choiced-interacted-with:ti",payload:null}),this.handleAnswerChoicesChangeForMarker(l,e)},onToggle:e=>this.activateMarker(l,e),disabled:g,opener:({opened:n})=>e.jsx(K,{role:"button","aria-expanded":n,children:({hovered:r,focused:s,pressed:a})=>e.jsx(mC,{label:t.label,showCorrectness:m,showSelected:n,showPulsate:!i,ref:e=>this._markers[l]=e,showAnswer:U,answerSide:d,answerStyles:y,focused:s||a,hovered:r,selected:h.selected})},`marker-${t.x}.${t.y}`)},`answers-${t.x}.${t.y}`)},l)})}renderInstructions(){const{apiOptions:{isMobile:t},choices:n,multipleAnswers:r,hideChoicesFromInstructions:i}=this.props,{strings:s}=this.context,a=t?r?s.tapMultiple:s.tapSingle:r?s.clickMultiple:s.clickSingle,o=s.choices;return e.jsxs("div",{className:f("perseus-label-image-widget-instructions",k(xC.instructions)),children:[e.jsxs("div",{className:k(xC.instructionsCaption),children:[a," ",!i&&o]}),!i&&e.jsx("div",{className:k(xC.instructionsChoices),children:n.map((t,n)=>e.jsx("div",{className:k(xC.instructionsChoice),children:e.jsx(kb,{content:t,strings:s})},n))})]})}getSerializedState(){const{userInput:e,markers:t,...n}=this.props;return{...n,markers:t.map((t,n)=>({...t,selected:e.markers[n].selected}))}}render(){const{imageAlt:t,imageUrl:n,imageWidth:r,imageHeight:i}=this.props,{activeMarkerIndex:s}=this.state;return e.jsxs("div",{children:[this.renderInstructions(),e.jsxs("div",{className:k(xC.markersCanvas),style:{maxWidth:r,maxHeight:i},children:[e.jsx("div",{className:k(xC.imageContainer,-1!==s&&xC.imageInteractionDisabled),children:e.jsx(Au.Consumer,{children:({setAssetStatus:s})=>e.jsx(Sg,{alt:t,src:n,width:r,height:i,setAssetStatus:s})})}),this.renderMarkers()]}),e.jsx(lC,{areAnswersHidden:this.state.hideAnswers,onChange:e=>{this.props.analytics?.onAnalyticsEvent({type:"perseus:label-image:toggle-answers-hidden",payload:null}),this.props.analytics?.onAnalyticsEvent({type:"perseus:label-image:toggle-answers-hidden:ti",payload:null}),this.setState({hideAnswers:e})}})]})}}const yC={name:"label-image",displayName:"Label Image",widget:vt.forwardRef((t,n)=>{const r=Wu();return e.jsx(UC,{ref:n,analytics:r.analytics,...t})}),isLintable:!0,getStartUserInput:function(e){return{markers:e.markers.map(e=>({label:e.label}))}},getUserInputFromSerializedState:function(e){return{markers:e.markers.map(e=>({label:e.label,selected:e.selected}))}}},xC=E.create({instructions:{paddingBottom:16},instructionsCaption:{fontFamily:"inherit",fontSize:15,fontWeight:"bold",lineHeight:"22px",paddingBottom:16},instructionsChoices:{display:"flex",flexWrap:"wrap",margin:"-8px 0"},instructionsChoice:{display:"flex",alignItems:"center",margin:"8px 0",":not(:last-child)":{"::after":{content:"''",display:"inline-block",position:"relative",width:2,height:2,marginLeft:5,marginRight:5,background:"rgba(33, 36, 44, 0.32)",borderRadius:2}}},markersCanvas:{position:"relative"},imageContainer:{display:"flex"},imageInteractionDisabled:{pointerEvents:"none"}}),vC=(e,t)=>{const n=e.offsetParent();return{top:t.top+n.scrollTop(),left:t.left+n.scrollLeft()}};class wC extends vt.Component{render(){const{layout:t}=this.props,n=k(kC.card,kC.placeholder,"horizontal"===t&&kC.horizontalCard),r={width:this.props.width,height:this.props.height};return null!=this.props.margin&&(r.margin=this.props.margin),e.jsx("li",{className:n,style:r})}}class SC extends vt.Component{static contextType=Ou;animationFrameRequest=null;isMouseMoveUpBound;_mounted;static defaultProps={includePadding:!0,type:"static",linterContext:T};state={startPosition:{left:0,top:0},startMouse:{left:0,top:0},mouse:{left:0,top:0},dragging:!1};componentDidMount(){this._mounted=!0,this.isMouseMoveUpBound=!1,document.addEventListener("touchmove",this.onMouseMove,!!nh.supportsPassiveEvents()&&{passive:!1})}componentDidUpdate(e){if(this.props.state!==e.state)if("animating"===this.props.state&&this.props.endPosition){const e=this.getCurrentPosition(),t=15*Math.sqrt(Math.sqrt(Math.pow(this.props.endPosition.left-e.left,2)+Math.pow(this.props.endPosition.top-e.top,2)));p(n.findDOMNode(this)).animate(this.props.endPosition,{duration:Math.max(t,1),complete:this.props.onAnimationEnd})}else"static"===this.props.state&&p(n.findDOMNode(this)).finish()}componentWillUnmount(){this._mounted=!1,this.isMouseMoveUpBound&&this.unbindMouseMoveUp(),this.animationFrameRequest&&cancelAnimationFrame(this.animationFrameRequest),document.removeEventListener("touchmove",this.onMouseMove)}getCurrentPosition=()=>({left:this.state.startPosition.left+this.state.mouse.left-this.state.startMouse.left,top:this.state.startPosition.top+this.state.mouse.top-this.state.startMouse.top});bindMouseMoveUp=()=>{this.isMouseMoveUpBound=!0,p(document).on("mousemove",this.onMouseMove),p(document).on("mouseup",this.onMouseUp)};unbindMouseMoveUp=()=>{this.isMouseMoveUpBound=!1,p(document).off("mousemove",this.onMouseMove),p(document).off("mouseup",this.onMouseUp)};onMouseDown=e=>{if("static"!==this.props.state)return;if(0!==e.button&&(null==e.touches||1!==e.touches.length))return;e.preventDefault();const t=nh.extractPointerLocation(e);this.animationFrameRequest=requestAnimationFrame(()=>{const e=p(n.findDOMNode(this)),r=e.position(),i=vC(e,r);t&&this._mounted&&this.setState({startPosition:i,startMouse:t,mouse:t,dragging:!0},function(){this.bindMouseMoveUp(),this.props.onMouseDown()})})};onMouseMove=e=>{if("dragging"!==this.props.state||!this.state.dragging)return;e.preventDefault();const t=nh.extractPointerLocation(e);t&&(this.animationFrameRequest=requestAnimationFrame(()=>{this.setState({mouse:t},this.props.onMouseMove)}))};onMouseUp=e=>{if("dragging"!==this.props.state||!this.state.dragging)return;e.preventDefault();nh.extractPointerLocation(e)&&(this.setState({dragging:!1}),this.unbindMouseMoveUp(),this.props.onMouseUp())};render(){const{includePadding:t,layout:n,state:i}=this.props;let s=k(kC.card,kC.draggable,"horizontal"===n&&kC.horizontalCard,"vertical"===n&&kC.verticalCard,"dragging"===i&&kC.dragging,"disabled"===i&&kC.disabled,!t&&kC.unpaddedCard)+" perseus-sortable-draggable";t||(s+=" perseus-sortable-draggable-unpadded");const a={position:"static"};return"dragging"!==this.props.state&&"animating"!==this.props.state||r.extend(a,{position:"absolute"},this.getCurrentPosition()),this.props.width&&(a.width=this.props.width+1),this.props.height&&(a.height=this.props.height),null!=this.props.margin&&(a.margin=this.props.margin),e.jsx("li",{className:s,style:a,onMouseDown:this.onMouseDown,onTouchStart:this.onMouseDown,onTouchMove:this.onMouseMove,onTouchEnd:this.onMouseUp,onTouchCancel:this.onMouseUp,children:e.jsx(kb,{content:this.props.content,linterContext:A(this.props.linterContext,"draggable"),onRender:this.props.onRender,strings:this.context.strings})})}}class EC extends vt.Component{static defaultProps={layout:"horizontal",padding:!0,disabled:!1,constraints:{},onMeasure:function(){},margin:5,onChange:function(){},linterContext:T,waitForTexRendererToLoad:!0};remeasureItems=r.debounce(()=>{this.setState({items:EC.clearItemMeasurements(this.state.items)})},20);static itemsFromProps(e){const t=e.disabled?"disabled":"static";return e.options.map((e,n)=>({option:e,key:n,state:t,width:0,height:0}))}static clearItemMeasurements(e){return e.map(e=>({...e,width:0,height:0}))}constructor(e){super(e),this.state={items:EC.itemsFromProps(this.props),texRendererLoaded:!1}}UNSAFE_componentWillReceiveProps(e){const t=this.props;r.isEqual(e.options,t.options)?e.layout===t.layout&&e.padding===t.padding&&e.disabled===t.disabled&&r.isEqual(e.constraints,t.constraints)||this.setState({items:EC.clearItemMeasurements(this.state.items)}):this.setState({items:EC.itemsFromProps(e)})}componentDidUpdate(){!this.state.items.length||this.state.items[0].width||this.state.items[0].height||setTimeout(()=>{this.measureItems()},0)}measureItems(){let e=[...this.state.items];const t=r.map(e,function(e){return p(n.findDOMNode(this.refs[e.key]))},this),i=r.invoke(t,"outerWidth"),s=r.invoke(t,"outerHeight"),{constraints:a,layout:o}=this.props;let l=null;a?.width?l=r.max(i.concat(a.width)):"vertical"===o&&(l=r.max(i));let c=null;a?.height?c=r.max(s.concat(a.height)):"horizontal"===o&&(c=r.max(s)),e=r.map(e,function(e,t){return e.width=l||i[t],e.height=c||s[t],e}),this.setState({items:e},()=>{this.props.onMeasure?.({widths:i,heights:s})})}onMouseDown(e){const t=r.map(this.state.items,function(t){return t.key===e&&(t.state="dragging"),t});this.setState({items:t})}moveOptionToIndex(e,t){const{items:n}=this.state;if(t<0||t>n.length)throw new Error(`index ${t} out of bounds`);const i=r.clone(n),s=n.filter(t=>t.option===e)[0];if(null==s)throw new Error(`option ${e} not found`);const a=n.findIndex(e=>e.key===s.key);i.splice(a,1),i.splice(t,0,s),this.setState({items:i},()=>{this.props.onChange?.({})})}onMouseMove(e){const t=p(n.findDOMNode(this.refs[e])),i=p(n.findDOMNode(this)),s=r.clone(this.state.items),a=r.findWhere(this.state.items,{key:e}),o=this.props.margin||0,l=r.indexOf(s,a);let c=0;if(s.splice(l,1),"horizontal"===this.props.layout){const e=t.offset().left-i.offset().left;let n,a=0;r.each(s,function(t){n=t.width,e>a+n/2&&(c+=1),a+=n+o})}else{const e=t.offset().top-i.offset().top;let n,a=0;r.each(s,function(t){n=t.height,e>a+n/2&&(c+=1),a+=n+o})}c!==l&&(s.splice(c,0,a),this.setState({items:s}))}onMouseUp(e){const t=requestAnimationFrame(()=>{const t=r.map(this.state.items,function(t){if(t.key===e){t.state="animating";const r=p(n.findDOMNode(this.refs["placeholder_"+e])),i=r.position(),s=vC(r,i);t.endPosition=s}return t},this);this.setState({items:t},()=>{this.props.onChange?.({})})});this.animationFrameRequest=t}onAnimationEnd(e){const t=r.map(this.state.items,function(t){return t.key===e&&(t.state="static"),t});this.setState({items:t})}getOptions(){return r.pluck(this.state.items,"option")}render(){if(this.props.waitForTexRendererToLoad&&!this.state.texRendererLoaded){const{TeX:t}=Hu();return e.jsxs(e.Fragment,{children:[e.jsx(w,{}),e.jsx("div",{style:{display:"none"},children:e.jsx(t,{onRender:()=>this.setState({texRendererLoaded:!0}),children:"1"})})]})}const t=[],{layout:n}=this.props,i=k(kC.sortable)+" perseus-sortable",s=this.props.constraints?.width||"vertical"===n,a=this.props.constraints?.height||"horizontal"===n;return r.each(this.state.items,function(r,i,o){const l=i===o.length-1,c="static"===r.state||"disabled"===r.state;let d;"horizontal"===this.props.layout?d="0 "+this.props.margin+"px 0 0":"vertical"===this.props.layout&&(d="0 0 "+this.props.margin+"px 0"),t.push(e.jsx(SC,{content:r.option,state:r.state,ref:r.key,width:s?r.width:void 0,height:a?r.height:void 0,layout:n,includePadding:this.props.padding,margin:l&&c?0:d,endPosition:r.endPosition,linterContext:A(this.props.linterContext,"sortable"),onRender:this.remeasureItems,onMouseDown:this.onMouseDown.bind(this,r.key),onMouseMove:this.onMouseMove.bind(this,r.key),onMouseUp:this.onMouseUp.bind(this,r.key),onTouchMove:this.onMouseMove.bind(this,r.key),onTouchEnd:this.onMouseUp.bind(this,r.key),onTouchCancel:this.onMouseUp.bind(this,r.key),onAnimationEnd:this.onAnimationEnd.bind(this,r.key)},r.key)),"dragging"!==r.state&&"animating"!==r.state||t.push(e.jsx(wC,{ref:"placeholder_"+r.key,width:r.width,height:r.height,layout:n,margin:l?0:d},"placeholder_"+r.key))},this),e.jsx("ul",{className:i,children:t})}}const kC=E.create({sortable:{boxSizing:"border-box",float:"left",padding:0,margin:0},card:{boxSizing:"border-box",background:"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",minWidth:25,minHeight:44,padding:10,listStyleType:"none",userSelect:"none",touchAction:"none"},placeholder:{background:"#ddd",border:"1px solid #ccc"},draggable:{textAlign:"center"},horizontalCard:{float:"left",cursor:"ew-resize"},verticalCard:{maxWidth:"100%",cursor:"ns-resize"},unpaddedCard:{padding:0},dragging:{background:"#ffedcd",opacity:.8},disabled:{backgroundColor:"inherit",border:"1px solid transparent",cursor:"default"}});class CC extends vt.Component{static contextType=Ou;static defaultProps={labels:["",""],orderMatters:!1,padding:!0,problemNum:0,onChange:function(){},linterContext:T,userInput:{left:[],right:[]}};state={leftHeight:0,rightHeight:0,texRendererLoaded:!1};changeAndTrack=()=>{const e=this._getUserInputFromSortable();this.props.handleUserInput(e),this.props.trackInteraction()};onMeasureLeft=e=>{const t=r.max(e.heights);this.setState({leftHeight:t})};onMeasureRight=e=>{const t=r.max(e.heights);this.setState({rightHeight:t})};_getUserInputFromSortable=()=>this.state.texRendererLoaded?{left:this.refs.left.getOptions(),right:this.refs.right.getOptions()}:{left:[],right:[]};getPromptJSON(){return(e=>{const{userInput:t}=e;return{type:"matcher",options:{labels:e.labels,left:e.left,right:e.right,orderMatters:e.orderMatters},userInput:{left:t.left,right:t.right}}})(this.props)}moveLeftOptionToIndex=(e,t)=>{this.refs.left.moveOptionToIndex(e,t)};moveRightOptionToIndex=(e,t)=>{this.refs.right.moveOptionToIndex(e,t)};render(){if(!this.state.texRendererLoaded){const{TeX:t}=Hu();return e.jsxs(e.Fragment,{children:[e.jsx(w,{}),e.jsx("div",{style:{display:"none"},children:e.jsx(t,{onRender:()=>{this.setState({texRendererLoaded:!0})},children:"1"})})]})}const t=r.any(this.props.labels),n={height:r.max([this.state.leftHeight,this.state.rightHeight])},i=this.props.apiOptions.isMobile?8:5;return e.jsx("table",{className:k(IC.widget)+" perseus-widget-matcher",children:e.jsxs("tbody",{children:[t&&e.jsxs("tr",{className:k(IC.row),children:[e.jsx("th",{className:k(IC.column,IC.columnLabel),children:e.jsx(kb,{content:this.props.labels[0]||"...",linterContext:this.props.linterContext,strings:this.context.strings})}),e.jsx("th",{className:k(IC.column,IC.columnRight,IC.columnLabel),children:e.jsx(kb,{content:this.props.labels[1]||"...",linterContext:this.props.linterContext,strings:this.context.strings})})]}),e.jsxs("tr",{className:k(IC.row),children:[e.jsx("td",{className:k(IC.column),children:e.jsx(EC,{options:this.props.userInput.left,layout:"vertical",padding:this.props.padding,disabled:!this.props.orderMatters,constraints:n,onMeasure:this.onMeasureLeft,onChange:this.changeAndTrack,margin:i,linterContext:this.props.linterContext,ref:"left"})}),e.jsx("td",{className:k(IC.column,IC.columnRight),children:e.jsx(EC,{options:this.props.userInput.right,layout:"vertical",padding:this.props.padding,constraints:n,onMeasure:this.onMeasureRight,onChange:this.changeAndTrack,margin:i,linterContext:this.props.linterContext,ref:"right"})})]})]})})}}const _C={name:"matcher",displayName:"Matcher (two column)",widget:CC,isLintable:!0,getStartUserInput:function(e,t){return lt(e,t)},getUserInputFromSerializedState:function(e){return{left:e.left,right:e.right}}},MC="1px solid #444",IC=E.create({widget:{paddingTop:5,maxWidth:"100%",minWidth:"auto"},row:{border:0},column:{padding:0,border:0},columnRight:{borderLeft:MC},columnLabel:{fontWeight:"inherit",borderBottom:MC,padding:"0 5px 5px 5px",textAlign:"center"}}),{assert:jC}=af,TC={INPUT_MARGIN:3,INPUT_HEIGHT:30,INPUT_WIDTH:40},RC={INPUT_MARGIN:4,INPUT_HEIGHT:36,INPUT_WIDTH:64};function PC(e,t){return[""+e,""+t]}const AC=function(){return PC(0,0)},NC=function(e){const t=function(e){return jC(Array.isArray(e)&&2===e.length),+e[0]}(e),n=function(e){return jC(Array.isArray(e)&&2===e.length),+e[1]}(e);return"answer"+t+","+n};class DC extends vt.Component{static contextType=Ou;cursorPosition;static defaultProps={matrixBoardSize:[3,3],prefix:"",suffix:"",apiOptions:Wg.defaults,linterContext:T,userInput:{answers:[[]]}};state={cursorPosition:[0,0],enterTheMatrix:0};componentDidMount(){this.cursorPosition=[0,0]}getInputPaths=()=>{const e=[],t=this.props.matrixBoardSize[0],n=this.props.matrixBoardSize[1];for(let r=0;r<t;r++)for(let t=0;t<n;t++){const n=PC(r,t);e.push(n)}return e};_handleFocus=(e,t)=>{this.props.onFocus(PC(e,t))};_handleBlur=(e,t)=>{this.props.onBlur(PC(e,t))};focus=()=>(this.focusInputPath(AC()),!0);focusInputPath=e=>{const t=NC(e);this.refs[t].focus()};blurInputPath=e=>{0===e.length&&(e=AC());const t=NC(e);this.refs[t].blur()};getDOMNodeForPath(e){const t=NC(e);return n.findDOMNode(this.refs[t])}handleKeyDown=(e,t,n)=>{const r=this.props.matrixBoardSize[0],i=this.props.matrixBoardSize[1];let s=null;const a=this.refs[NC(PC(e,t))],o=a.getStringValue(),l=a.getSelectionStart(),c=a.getSelectionEnd();let d=null;if("ArrowUp"===n.key&&e>0?d=PC(e-1,t):"ArrowDown"===n.key&&e+1<r?d=PC(e+1,t):"ArrowLeft"===n.key&&t>0?0===l&&0===c&&(d=PC(e,t-1)):"ArrowRight"===n.key&&t+1<i?l===o.length&&(d=PC(e,t+1)):"Enter"===n.key?s=this.state.enterTheMatrix+1:"Escape"===n.key&&(s=0),d){n.preventDefault();const e=this.refs[NC(d)],t=2*e.getStringValue().length;e.focus(),"ArrowRight"===n.key?e.setSelectionRange(0,0):e.setSelectionRange(t,t)}null!=s&&this.setState({enterTheMatrix:s})};onValueChange=(e,t,n,r)=>{const i=this.props.userInput.answers.map(e=>[...e]);i[e]||(i[e]=[]),i[e][t]=n,this.props.handleUserInput({answers:i},r),this.props.trackInteraction()};getPromptJSON(){return{type:"matrix",options:{height:(e=this.props).matrixBoardSize[0],width:e.matrixBoardSize[1]},userInput:{answerRows:e.userInput.answers}};var e}getSerializedState(){const{userInput:e,...t}=this.props;return{...t,answers:e.answers,cursorPosition:this.state.cursorPosition}}render(){let t;t=this.props.apiOptions.customKeypad?RC:TC;const{INPUT_MARGIN:n,INPUT_HEIGHT:i,INPUT_WIDTH:s}=t,a=ct(this.props.userInput.answers),o=this.props.matrixBoardSize[0],l=this.props.matrixBoardSize[1],c=this.state.cursorPosition[0],d=this.state.cursorPosition[1],u=Math.max(c,a[0]-1),h=Math.max(d,a[1]-1),p=(u+1)*(i+2*n),m=(h+1)*(s+2*n),g=f({"perseus-matrix":!0,"static-mode":this.props.static,"the-matrix":this.state.enterTheMatrix>=5});return e.jsxs("div",{className:g,children:[this.props.prefix&&e.jsx("div",{className:"matrix-prefix",children:e.jsx(kb,{content:this.props.prefix,linterContext:this.props.linterContext,strings:this.context.strings})}),e.jsxs("div",{className:"matrix-input",children:[e.jsx("div",{className:"matrix-bracket bracket-left",style:{height:p}}),e.jsx("div",{className:"matrix-bracket bracket-right",style:{height:p,left:m}}),r(o).times(t=>{const a=this.props.userInput.answers[t];return e.jsx("div",{className:"matrix-row",children:r(l).times(r=>{const o=t>u||r>h,l={className:o?"outside":"inside",ref:NC(PC(t,r)),value:a?a[r]:null,style:{height:i,width:s,margin:n},disabled:this.props.apiOptions.readOnly,onFocus:()=>{this.cursorPosition=[t,r],this.setState({cursorPosition:[t,r]}),this._handleFocus(t,r)},onBlur:()=>{t===this.cursorPosition[0]&&r===this.cursorPosition[1]&&this.setState({cursorPosition:[0,0]}),this._handleBlur(t,r)},onKeyDown:e=>{this.handleKeyDown(t,r,e)},onChange:(e,n)=>{this.onValueChange(t,r,e,n)}};let c;if(this.props.apiOptions.customKeypad){const t={margin:n,minWidth:s,minHeight:i,boxSizing:"border-box",backgroundColor:o?"#f3f3f3":"#fff"};c=e.jsx(lU,{...l,style:t,scrollable:!0,keypadElement:this.props.keypadElement})}else{const t={...l,style:E.create({input:{...l.style,display:"inline-block",padding:0,backgroundColor:o?"#f3f3f3":"#fff"}}).input};c=e.jsx(dU,{...t})}return e.jsx("span",{className:"matrix-input-field",children:c},r)})},t)})]}),this.props.suffix&&e.jsx("div",{className:"matrix-suffix",children:e.jsx(kb,{content:this.props.suffix,linterContext:this.props.linterContext,strings:this.context.strings})})]})}}const LC={name:"matrix",displayName:"Matrix",hidden:!0,widget:DC,isLintable:!0,getStartUserInput:function(){return{answers:[[]]}},getCorrectUserInput:function(e){return{answers:e.answers.map(e=>e.map(e=>String(e)))}},getUserInputFromSerializedState:function(e){return{answers:e.answers}}},OC={url:null,top:0,left:0};class FC extends vt.Component{static defaultProps={box:[480,480],image:OC,showProtractor:!0,protractorX:7.5,protractorY:.5,showRuler:!1,rulerLabel:"",rulerTicks:10,rulerPixels:40,rulerLength:10};isWidget=!0;state={};ruler;protractor;componentDidMount(){this.setupGraphie()}componentDidUpdate(e){r.any(["box","showProtractor","showRuler","rulerLabel","rulerTicks","rulerPixels","rulerLength"],t=>e[t]!==this.props[t],this)&&this.setupGraphie()}setupGraphie(){const e=n.findDOMNode(this.refs.graphieDiv);p(e).empty();const t=this.graphie=Ef.createGraphie(e),r=[40,40],i=[[0,this.props.box[0]/r[0]],[0,this.props.box[1]/r[1]]];t.init({range:i,scale:r}),t.addMouseLayer({allowScratchpad:!0,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),this.protractor&&this.protractor.remove(),this.props.showProtractor&&(this.protractor=t.protractor([this.props.protractorX,this.props.protractorY])),this.ruler&&this.ruler.remove(),this.props.showRuler&&(this.ruler=t.ruler({center:[(i[0][0]+i[0][1])/2,(i[1][0]+i[1][1])/2],label:this.props.rulerLabel,pixelsPerUnit:this.props.rulerPixels,ticksPerUnit:this.props.rulerTicks,units:this.props.rulerLength}))}getPromptJSON(){return ox("measurer")}render(){const t=r.extend({},OC,this.props.image);return e.jsxs("div",{className:"perseus-widget perseus-widget-measurer graphie-container blank-background",style:{width:this.props.box[0],height:this.props.box[1]},children:[t.url&&e.jsx("div",{style:{position:"relative",top:t.top,left:t.left},children:e.jsx(Sg,{src:t.url})}),e.jsx("div",{className:"graphie",ref:"graphieDiv"})]})}}const zC={name:"measurer",displayName:"Measurer",hidden:!0,widget:FC,version:dt.version};function BC(e,t){const n=new Path2D;e.lineWidth=VC.lineWidth,e.strokeStyle=VC.fgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n)}const HC={text:function(e,t){null!==t.value&&(e.fillStyle=VC.fgColor,e.font=VC.font,e.fillText(t.value,t.pos[0]-VC.fontSizePx/2+1,t.pos[1]+VC.fontSizePx/2))},"line:single":BC,"line:double":function(e,t){let n=new Path2D;e.lineWidth=5*VC.lineWidth,e.strokeStyle=VC.fgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n),n=new Path2D,e.lineWidth=3*VC.lineWidth,e.strokeStyle=VC.bgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n)},"line:triple":function(e,t){let n=new Path2D;e.lineWidth=7*VC.lineWidth,e.strokeStyle=VC.fgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n),n=new Path2D,e.lineWidth=5*VC.lineWidth,e.strokeStyle=VC.bgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n),BC(e,t)}};const $C={"line:single":0,"line:double":0,"line:triple":0,text:1};function WC(e,t){return $C[e.type]-$C[t.type]}function XC(e,t){t.sort(WC).forEach(function(e){return function(t){HC[t.type](e,t)}}(e))}const VC={bgColor:"rgb(255, 255, 255)",fgColor:"rgb(0, 0, 0)",fontSizePx:12,lineWidth:1,font:"12px sans"};function GC(e,t,n,r){let i=e.symbol;if("C"===i&&1!==Object.keys(t).length&&(i=null),"1,0"===e.idx){const t=[0,0];return e.pos=t,e.baseAngle=-30+r,{type:"text",value:i,pos:t,idx:e.idx}}const s=t[e.connections.find(function(e){return t[e].pos})],a=s.connections.indexOf(e.idx);let o=60,l=120;4===s.connections.length?(l=90,o=90):(n.find(t=>"triple"===t.bondType&&t.to===e.idx)||n.find(e=>"triple"===e.bondType&&e.to===s.idx))&&(l=0,o=0);let c=0;const d=s.idx.split(":"),u=d[d.length-1].split(",")[0];c=parseInt(u)%2!=0?s.baseAngle-(o-l*a):s.baseAngle+(o-l*a);const h=function(e,t,n){const r=e[0],i=e[1];return[r+Math.cos(2*t*Math.PI/360)*n,i+-1*Math.sin(2*t*Math.PI/360)*n]}(s.pos,c,30);return e.pos=h,e.baseAngle=c,{type:"text",value:i,pos:h,idx:e.idx}}function YC(e){return e.join(":")}function qC(e,t,n){if(null===n)return[e,t];if("atom"===n.type){const r=YC(n.idx);e[r]={idx:r,symbol:n.symbol,connections:[]},n.bonds&&n.bonds.forEach(function(n){const i=YC(n.to.idx);e[r].connections.push(i),t.push({from:r,to:i,bondType:n.bondType}),qC(e,t,n.to),e[i].connections.push(r)})}return[e,t]}function ZC(e,t,n,r,i){if(0===t.length)return e;const s=t.shift(),a=n[s];return a.connections.forEach(function(e){n[e].pos||t.push(e)}),ZC(e.concat(GC(a,n,r,i)),t,n,r,i)}function KC(e,t,n){return 0===n.length?e:KC(e.concat(function(e,t){const n=function(e,t){let n=[e.pos[0],e.pos[1]],r=[t.pos[0],t.pos[1]];return"C"!==e.symbol&&(n=[t.pos[0]-.75*(t.pos[0]-e.pos[0]),t.pos[1]-.75*(t.pos[1]-e.pos[1])]),"C"!==t.symbol&&(r=[e.pos[0]-.75*(e.pos[0]-t.pos[0]),e.pos[1]-.75*(e.pos[1]-t.pos[1])]),[n,r]}(t[e.from],t[e.to]);return{type:"line:"+e.bondType,startPos:n[0],endPos:n[1]}}(n[0],t)),t,n.slice(1))}const QC={layout:function(e,t){const n=qC({},[],e),r=n[0],i=n[1];return KC(ZC([],["1,0"],r,i,t),r,i)}},JC=new RegExp("^[A-Za-z\\[\\]()=#+-]*$"),e_=new RegExp("^(Cl|Br|[CONPSFBI]|\\[)");function t_(e){this.message=e}function n_(e,t,n){const r=t[0],i=t.slice(1);let s;s=Array.isArray(e)?[...e]:{...e||{}};let a=n;return i.length>0&&(a=n_(s[r],i,n)),s[r]=a,s}function r_(e,t){if(0===t.length)return e;if(""===e)throw new t_("Mismatched parentheses");const n=e[0],r=e.slice(1);return r_(r,"("===n?t.concat(n):")"===n?t.slice(1):t)}function i_(e,t){const n=e[0],r=e.slice(1);if("("===n){let e={...t,parens:t.parens+"("};e=function(e,t){const n=t.reduce(function(e,t){return e[t]},e);return n_(e,t,n+1)}(t,["idx",t.idx.length-1,1]);let n=-1;t.idx[t.idx.length-1][0]%2==0&&(n=0);const i=a_(r,{...e,idx:e.idx.concat([[n,0]]),parens:e.parens.concat("(")}),s=a_(r_(r,["("]),e);return[i].concat(s)}if(")"===n){if("("!==t.parens[t.parens.length-1])throw new t_("Mismatched parentheses");return null}throw new t_("Invalid bare character: "+n)}function s_(e,t){const n=function(e){let t=null,n=null;if("["===e[0]){const r=e.indexOf("]");if(-1===r)return["",e];t=e.slice(1,r),n=e.slice(r+1)}else t=e_.exec(e)[1],n=e.slice(t.length);return[t,n]}(e),r=n[0];if(""===r)return["error","Unable to parse bracketed atom."];const i=n[1],s=n_(t,["idx",t.idx.length-1],[1+t.idx[t.idx.length-1][0],0]);let a=a_(i,n_(s,["bond","bondType"],"single"));!Array.isArray(a)&&a&&(a=[a]);const o={type:"atom",symbol:r,bonds:a,idx:s.idx};return t.bond?{type:"bond",bondType:t.bond.bondType,to:o}:o}function a_(e,t){if(!function(e){return JC.test(e)}(e))throw new t_("Invalid input.");return e&&0!==e.length?(n=e,e_.test(n)?s_(e,t||{idx:[[0,0]],parens:[],stack:[],bondModifiers:[]}):function(e){return"="===e||"#"===e}(e[0])?function(e,t){const n=e[0],r=e.slice(1);if("="===n)return a_(r,n_(t,["bond","bondType"],"double"));if("#"===n)return a_(r,n_(t,["bond","bondType"],"triple"));throw new t_("Invalid character: "+n)}(e,t):i_(e,t)):null;var n}const o_=a_,l_=t_,{layout:c_}=QC,d_=o_,u_=l_;class h_ extends vt.Component{static contextType=Ou;state={parsedSmiles:null,error:null};UNSAFE_componentWillMount(){this.stateFromSmiles(this.props.smiles)}componentDidMount(){this.canvasRender()}UNSAFE_componentWillReceiveProps(e){this.stateFromSmiles(e.smiles)}componentDidUpdate(){this.canvasRender()}stateFromSmiles=e=>{try{this.setState({parsedSmiles:d_(e),error:null})}catch(lA){if(!(lA instanceof u_))throw lA;this.setState({error:lA.message})}};setCanvasBounds=(e,t)=>{const n=Math.max(...t.map(e=>e.pos?e.pos[0]:-1/0)),r=Math.max(...t.map(e=>e.pos?e.pos[1]:-1/0)),i=Math.min(...t.map(e=>e.pos?e.pos[0]:1/0)),s=Math.min(...t.map(e=>e.pos?e.pos[1]:1/0)),a=n-i+60,o=r-s+60;return e.width=a,e.height=o,[30-i,30-s]};canvasRender=()=>{if(this.state.error||!this.state.parsedSmiles)return;const e=c_(this.state.parsedSmiles,this.props.rotationAngle),t=this.refs.canvas,n=this.setCanvasBounds(t,e),r=t.getContext("2d");r.clearRect(0,0,t.width,t.height),r.save(),r.translate(n[0],n[1]),XC(r,e),r.restore()};render(){let t=e.jsx("canvas",{className:"molecule-canvas",id:this.props.widgetId+"-molecule",ref:"canvas",children:this.context.strings.molecularDrawing({content:this.props.smiles||""})});return this.state.error&&(t=e.jsx("div",{className:"error",children:this.state.error})),e.jsx("div",{className:"molecule-canvas",children:t})}}class p_ extends vt.Component{static defaultProps={rotationAngle:0};isWidget=!0;render(){return e.jsx(h_,{widgetId:this.props.widgetId,smiles:this.props.smiles,rotationAngle:this.props.rotationAngle})}}const f_={name:"molecule-renderer",displayName:"Molecule renderer",hidden:!0,widget:p_},m_=mg.MovablePoint,g_=mg.Line,{assert:b_}=af,U_={eq:"eq",ge:"le",gt:"lt",le:"ge",lt:"gt"},y_={eq:"eq",ge:"gt",gt:"ge",le:"lt",lt:"le"};function x_(e,t){return 1===t?""+e:`\\dfrac{${e}}{${t}}`}function v_(e,t){if(e<0)return"-"+v_(-e,t);const n=Math.floor(e/t);return 0===n?x_(e,t):e-n*t===0?""+n:n+x_(e-n*t,t)}const w_=(e,t,n,r,i)=>{if(r=r||n,"decimal"===t||"decimal ticks"===t)return e.label([n,-.53],Math.round(100*r)/100,"center");if("improper"===t){const t=Lp.toFraction(r);return e.label([n,-.17],x_(t[0],t[1]),"below")}if("mixed"===t){const t=Lp.toFraction(r);return e.label([n,-.17],v_(t[0],t[1]),"below")}if("non-reduced"===t){const t=Lp.toFraction(r);return e.label([n,-.17],function(e,t,n){return x_(e*Math.floor(n/t),n)}(t[0],t[1],i),"below")}},S_=mg.createSimpleClass((e,t)=>{if(!r.isFinite(t.tickStep)||t.tickStep<=0)return[];const n=[],{range:i,labelRange:s,labelStyle:a,labelTicks:o,tickStep:l,numDivisions:c}=t,d=null==s[0]?i[0]:s[0],u=null==s[1]?i[1]:s[1];let h;if("non-reduced"===a){const e=[d,u];for(let r=0;r<=c;r++){const t=i[0]+r*l;e.push(t)}const t=e=>Vh.toFraction(e)[1],n=r.map(e,t);h=r.reduce(n,(e,t)=>Lp.getLCM(e,t))}else h=void 0;const p={stroke:uf.BLUE,strokeWidth:3.5},f={color:uf.BLUE},m=[...Array(Math.round(c)).keys()].map(e=>i[0]+e*l);return[...new Set([...m,d,u,...i])].sort((e,t)=>e-t).forEach(t=>{const r=t===d||t===u,i=r?p:null,s=r?f:null;e.style(i,()=>{n.push(e.line([t,-.2],[t,.2]))}),(o||r||"decimal ticks"===a)&&e.style(s,()=>{n.push(w_(e,a,t,t,h))})}),n});class E_ extends vt.Component{static contextType=Ou;static defaultProps={range:[0,10],labelStyle:"decimal",labelRange:[null,null],divisionRange:[1,12],labelTicks:!0,isTickCtrl:!1,isInequality:!1,snapDivisions:2,showTooltips:!1,apiOptions:Wg.defaults};state={numDivisionsEmpty:!1};getIsTickCtrl(){return this.props.isTickCtrl??E_.defaultProps.isTickCtrl}getSnapDivisions(){return this.props.snapDivisions??E_.defaultProps.snapDivisions}isValid=()=>{const e=this.props.range;let t=this.props.userInput.numLinePosition;const n=this.props.divisionRange;return t=null==t?e[0]:t,e[0]<e[1]&&Vh.sign(t-e[0])>=0&&Vh.sign(t-e[1])<=0&&n[0]<n[1]&&0<this.props.userInput.numDivisions&&0<this.getSnapDivisions()};onNumDivisionsChange=(e,t)=>{const n=this.props.divisionRange.slice(),r=this.props.range[1]-this.props.range[0];if(e=(e=Math.round(e))<0?-1*e:e){const i={...this.props,tickStep:r/e},s=this.snapNumLinePosition(i,this.props.userInput.numLinePosition);this.setState({numDivisionsEmpty:!1},()=>{this.props.onChange({divisionRange:n},t),this.props.handleUserInput({...this.props.userInput,numDivisions:e,numLinePosition:s},t)})}else this.setState({numDivisionsEmpty:!0},t)};_handleTickCtrlFocus=()=>{this.props.onFocus(["tick-ctrl"])};_handleTickCtrlBlur=()=>{this.props.onBlur(["tick-ctrl"])};focus(){return!!this.getIsTickCtrl()&&(this.refs["tick-ctrl"].focus(),!0)}focusInputPath=e=>{1===e.length&&this.refs[e[0]].focus()};blurInputPath=e=>{1===e.length&&this.refs[e[0]].blur()};getInputPaths=()=>this.getIsTickCtrl()?[["tick-ctrl"]]:[];getDOMNodeForPath(e){return 1===e?.length?n.findDOMNode(this.refs[e[0]]):null}_renderGraphie=()=>{const t=this.props.range,n=t[1]-t[0],r={range:this.props.range,isTickCtrl:this.getIsTickCtrl()},i={...this.props,tickStep:n/this.props.userInput.numDivisions};return e.jsxs(mg,{ref:"graphie",box:[this.props.apiOptions.isMobile?288:460,80],options:r,onMouseDown:e=>{this.refs.graphie.movables.numberLinePoint.grab(e)},setup:this._setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:this.props.apiOptions.isMobile,children:[e.jsx(S_,{range:i.range,labelTicks:i.labelTicks,labelStyle:i.labelStyle,labelRange:i.labelRange,tickStep:i.tickStep,numDivisions:i.userInput.numDivisions,isMobile:i.apiOptions.isMobile}),this._renderInequality(i),this._renderNumberLinePoint(i)]},this.props.labelStyle)};snapNumLinePosition=(e,t)=>{const n=e.range[0],i=e.range[1],s=e.tickStep/this.getSnapDivisions();let a=((e,t,n)=>Math.min(Math.max(e,t),n))(t,n,i);return a=n+Vh.roundTo(a-n,s),b_(r.isFinite(a)),a};movePosition=e=>{this.props.handleUserInput({...this.props.userInput,numLinePosition:e}),this.props.trackInteraction()};_renderNumberLinePoint=t=>{const n=r(["lt","gt"]).contains(t.userInput.rel);let i;i=n?uf._BACKGROUND:t.static?uf.BLUE:uf.GREEN;const s={fill:i,stroke:t.static?uf.BLUE:uf.GREEN,"stroke-width":n?3:1},a={fill:n?uf._BACKGROUND:uf.GREEN,"stroke-width":n?3:1},o=t.isInequality?{stroke:uf.GREEN,"fill-opacity":n?0:1}:{};return e.jsx(m_,{ref:"numberLinePoint",pointSize:6,coord:[t.userInput.numLinePosition,0],constraints:[(e,t)=>[e[0],t[1]],(e,n)=>[this.snapNumLinePosition(t,e[0]),e[1]]],normalStyle:s,highlightStyle:a,onMove:e=>{this.movePosition(e[0])},isMobile:this.props.apiOptions.isMobile,mobileStyleOverride:o,showTooltips:this.props.showTooltips,xOnlyTooltip:!0})};handleReverse=()=>{const e=U_[this.props.userInput.rel];this.props.handleUserInput({...this.props.userInput,rel:e})};handleToggleStrict=()=>{const e=y_[this.props.userInput.rel];this.props.handleUserInput({...this.props.userInput,rel:e})};_getInequalityEndpoint(e){const t=r(["ge","gt"]).contains(this.props.userInput.rel),n=e.range,i=30*((n[1]-n[0])/400),s=n[0]-i,a=n[1]+i;return t?[a,0]:[s,0]}_renderInequality(t){if(t.isInequality){const n=this._getInequalityEndpoint(t),r={arrows:"->",stroke:this.props.apiOptions.isMobile?uf.GREEN:uf.BLUE,strokeWidth:3.5};return e.jsx(g_,{start:[t.userInput.numLinePosition,0],end:n,style:r})}return null}_setupGraphie=(e,t)=>{if(!this.isValid())return;const n=this.props.apiOptions.isMobile?228:400,r=t.range,i=(r[1]-r[0])/n,s=30*i,a=r[0]-s,o=r[1]+s,l="improper"===this.props.labelStyle||"mixed"===this.props.labelStyle||"non-reduced"===this.props.labelStyle?-1.5:-1;e.init({range:[[a,o],[l,1]],scale:[1/i,40],isMobile:this.props.apiOptions.isMobile});const c=(r[0]+r[1])/2;e.line([c,0],[o,0],{arrows:"->"}),e.line([c,0],[a,0],{arrows:"->"})};getPromptJSON(){return(e=>{const{userInput:t}=e;return{type:"number-line",options:{range:e.range,snapDivisions:e.snapDivisions},userInput:{numLinePosition:t.numLinePosition,numDivisions:t.numDivisions,rel:t.rel}}})(this.props)}getSerializedState(){const e=this.props;return{alignment:e.alignment,static:e.static,range:e.range,labelRange:e.labelRange,labelStyle:e.labelStyle,labelTicks:e.labelTicks,divisionRange:e.divisionRange,snapDivisions:e.snapDivisions,isInequality:e.isInequality,showTooltips:e.showTooltips,isTickCtrl:e.isTickCtrl,numDivisions:e.userInput.numDivisions,numLinePosition:e.userInput.numLinePosition,rel:"ge"}}render(){const{strings:t}=this.context,n=this.props.divisionRange,r=n[0]+"–"+n[1],i=this.props.userInput.numDivisions<n[0]||this.props.userInput.numDivisions>n[1],s=e.jsxs("div",{children:[e.jsx("input",{type:"button",className:"simple-button",value:t.switchDirection,onClick:this.handleReverse}),e.jsx("input",{type:"button",className:"simple-button",value:["le","ge"].includes(this.props.userInput.rel)?t.circleOpen:t.circleFilled,onClick:this.handleToggleStrict})]});let a;if(this.getIsTickCtrl()){let r;r=this.props.apiOptions.customKeypad?lU:Iw,a=e.jsxs("label",{children:[t.numDivisions," ",e.jsx(r,{ref:"tick-ctrl",value:this.state.numDivisionsEmpty?null:this.props.userInput.numDivisions||n[0],checkValidity:e=>e>=n[0]&&e<=n[1],onChange:this.onNumDivisionsChange,onFocus:this._handleTickCtrlFocus,onBlur:this._handleTickCtrlBlur,useArrowKeys:!0,keypadElement:this.props.keypadElement})]})}return e.jsxs("div",{className:"perseus-widget perseus-widget-interactive-number-line",children:[a,this.isValid()?this.getIsTickCtrl()&&i?e.jsx("div",{className:"perseus-error",children:t.divisions({divRangeString:r})}):this._renderGraphie():e.jsx("div",{className:"perseus-error",children:"Invalid number line configuration."}),!this.props.static&&this.props.isInequality&&s]})}}function k_(e){const t=e.range[1]-e.range[0];let n;return n=null!=e.numDivisions?e.numDivisions:null!=e.tickStep?t/e.tickStep:void 0,n}const C_={name:"number-line",displayName:"Number line",widget:E_,getCorrectUserInput:function(e){const t=null!=e.correctX?e.correctX:e.range[0];return{numDivisions:k_(e),numLinePosition:t,rel:e.isInequality&&e.correctRel||"eq"}},getStartUserInput:function(e){const t=null!=e.initialX?e.initialX:e.range[0];return{numDivisions:k_(e),numLinePosition:t,rel:e.isInequality?"ge":"eq"}},getUserInputFromSerializedState:function(e){return{numDivisions:e.numDivisions,numLinePosition:e.numLinePosition,rel:"eq"}}};class __ extends vt.Component{render(){return e.jsx("div",{className:"card-wrap",style:{width:this.props.width},children:e.jsx("div",{className:"card placeholder",style:{height:this.props.width}})})}}class M_ extends vt.Component{render(){return e.jsx("div",{className:"card-wrap",children:e.jsx("div",{className:"card drag-hint"})})}}class I_ extends vt.Component{static contextType=Ou;mouseMoveUpBound;static defaultProps={stack:!1,animating:!1,linterContext:T};state={dragging:!1};componentDidMount(){this.mouseMoveUpBound=!1,document.addEventListener("touchmove",this.onMouseMove,!!nh.supportsPassiveEvents()&&{passive:!1})}shouldComponentUpdate(e,t){return this.props.floating||e.floating||this.props.content!==e.content||this.props.fakeRef!==e.fakeRef}componentDidUpdate(e,t){if(this.props.animating&&!e.animating&&this.props.animateTo&&this.props.startOffset){const e=15*Math.sqrt(Math.sqrt(Math.pow(this.props.animateTo.left-this.props.startOffset.left,2)+Math.pow(this.props.animateTo.top-this.props.startOffset.top,2)));p(n.findDOMNode(this)).animate(this.props.animateTo,Math.max(e,1),this.props.onAnimationEnd)}}componentWillUnmount(){this.mouseMoveUpBound&&(ih("Removing an element with bound event handlers.",h.Internal),this.unbindMouseMoveUp(),nh.resetTouchHandlers()),document.removeEventListener("touchmove",this.onMouseMove)}bindMouseMoveUp=()=>{this.mouseMoveUpBound=!0,p(document).on("mousemove",this.onMouseMove),p(document).on("mouseup",this.onMouseUp)};unbindMouseMoveUp=()=>{this.mouseMoveUpBound=!1,p(document).off("mousemove",this.onMouseMove),p(document).off("mouseup",this.onMouseUp)};onMouseDown=e=>{e.preventDefault();const t=nh.extractPointerLocation(e);t&&(this.setState({dragging:!0}),this.bindMouseMoveUp(),this.props.onMouseDown?.(t,this))};onMouseMove=e=>{if(!this.state.dragging)return;e.preventDefault();const t=nh.extractPointerLocation(e);t&&this.props.onMouseMove?.(t)};onMouseUp=e=>{e.preventDefault();const t=nh.extractPointerLocation(e);t&&(this.setState({dragging:!1}),this.unbindMouseMoveUp(),this.props.onMouseUp?.(t))};render(){let t={};this.props.floating&&(t={position:"absolute",left:this.props.startOffset?.left,top:this.props.startOffset?.top}),this.props.width&&(t.width=this.props.width);const n=["card"];this.props.stack&&n.push("stack"),this.props.floating&&!this.props.animating&&this.props.mouse&&this.props.startMouse&&(n.push("dragging"),t.left+=this.props.mouse.left-this.props.startMouse.left,t.top+=this.props.mouse.top-this.props.startMouse.top);const r={content:this.props.content},i=this.props.animating?p.noop:this.onMouseDown;return e.jsx("div",{className:"card-wrap",style:t,onMouseDown:i,onTouchStart:i,onTouchEnd:this.onMouseUp,onTouchCancel:this.onMouseUp,children:e.jsx("div",{className:n.join(" "),children:e.jsx(kb,{...r,linterContext:this.props.linterContext,strings:this.context.strings})})})}}class j_ extends vt.Component{static defaultProps={options:[],height:"normal",layout:"horizontal",linterContext:T,userInput:{current:[]}};state={dragging:!1,placeholderIndex:null,dragKey:null,animating:!1,dragContent:null,dragWidth:null,dragHeight:null,offsetPos:null,animateTo:null,grabPos:null};onClick=(e,t,r,i)=>{const s=p(n.findDOMNode(i)),a=this.props.userInput.current.slice();let o,l=null;"current"===e?(a.splice(t,1),o=this.props.userInput.current[t],l=t):"bank"===e&&(o=this.props.options[t]),this.props.handleUserInput({current:a}),this.setState({dragging:!0,placeholderIndex:l,dragKey:o.key,dragContent:o.content,dragWidth:s.width(),dragHeight:s.height(),grabPos:r,mousePos:r,offsetPos:s.position()})};onRelease=e=>{const t=this.refs.dragging;if(null==t)return;const i=this.isCardInBank(t),s=this.state.placeholderIndex||0,a=()=>{const e=this.props.userInput.current.slice();if(!i){const t=this.state.dragContent;if("string"==typeof t){const n={content:t,key:r.uniqueId("perseus_draggable_card_"),width:this.state.dragWidth};e.splice(s,0,n.content)}}this.props.handleUserInput({current:e}),this.setState({dragging:!1,placeholderIndex:null,animating:!1}),this.props.trackInteraction()},o=p(n.findDOMNode(t)).position();let l=null;i?this.props.options.forEach((e,t)=>{if(e.content===this.state.dragContent){const e=n.findDOMNode(this.refs["bank"+t]);l=p(e).position()}}):null!=this.refs.placeholder&&(l=p(n.findDOMNode(this.refs.placeholder)).position()),null==l?a():this.setState({offsetPos:o,animateTo:l,onAnimationEnd:a,animating:!0,dragging:!1})};onMouseMove=e=>{const t=this.refs.dragging;if(null==t)return;let n;n=this.isCardInBank(t)?null:this.findCorrectIndex(t,this.props.userInput.current),this.setState({mousePos:e,placeholderIndex:n})};findCorrectIndex=(e,t)=>{const r="horizontal"===this.props.layout,i=p(n.findDOMNode(this.refs.dragList)),s=i.offset().left,a=i.offset().top,o=p(n.findDOMNode(e)).offset().left-s,l=p(n.findDOMNode(e)).offset().top-a;let c=0,d=0,u=0;return r?t.forEach((e,t)=>{const r=n.findDOMNode(this.refs["sortable"+t]),i=p(r).outerWidth(!0);o>d+i/2&&(c+=1),d+=i}):t.forEach((e,t)=>{const r=n.findDOMNode(this.refs["sortable"+t]),i=p(r).outerHeight(!0);l>u+i/2&&(c+=1),u+=i}),c};isCardInBank=e=>{if(null==e)return!1;const t="horizontal"===this.props.layout,r=p(n.findDOMNode(e)),i=p(n.findDOMNode(this.refs.bank)),s=r.offset(),a=i.offset(),o=r.outerHeight(!0),l=i.outerHeight(!0),c=i.outerWidth(!0),d=r.outerWidth(!0);return t?s.top+o/2<a.top+l:s.left+d/2<a.left+c};setListValues=e=>{this.props.handleUserInput({current:e})};getPromptJSON(){return{type:"orderer",options:{options:(e=this.props).options.map(e=>e.content)},userInput:{values:e.userInput.current}};var e}getSerializedState(){const{userInput:e,...t}=this.props;return{...t,current:e.current.map(e=>({content:e}))}}render(){const t=this.state.dragging&&e.jsx(I_,{ref:"dragging",floating:!0,content:this.state.dragContent,startOffset:this.state.offsetPos,startMouse:this.state.grabPos,mouse:this.state.mousePos,width:this.state.dragWidth,onMouseUp:this.onRelease,onMouseMove:this.onMouseMove,linterContext:this.props.linterContext},this.state.dragKey||"draggingCard"),n=this.state.animating&&e.jsx(I_,{floating:!0,animating:!0,content:this.state.dragContent,startOffset:this.state.offsetPos,width:this.state.dragWidth,animateTo:this.state.animateTo,onAnimationEnd:this.state.onAnimationEnd,linterContext:this.props.linterContext},this.state.dragKey||"draggingCard"),r=this.props.userInput.current.map((t,n)=>e.jsx(I_,{ref:"sortable"+n,fakeRef:"sortable"+n,floating:!1,content:t,linterContext:this.props.linterContext,onMouseDown:this.state.animating?p.noop:this.onClick.bind(null,"current",n)},`sortableCard${n}`));if(null!=this.state.placeholderIndex){const t=e.jsx(__,{ref:"placeholder",width:this.state.dragWidth,height:this.state.dragHeight},"placeholder");r.splice(this.state.placeholderIndex,0,t)}const i=r.length>0;r.push(t,n);const s=e.jsxs("div",{className:"perseus-clearfix draggable-box",children:[!i&&e.jsx(M_,{}),e.jsx("div",{ref:"dragList",children:r})]}),a=e.jsx("div",{ref:"bank",className:"bank perseus-clearfix",children:this.props.options.map((t,n)=>e.jsx(I_,{ref:"bank"+n,floating:!1,content:t.content,stack:!0,linterContext:this.props.linterContext,onMouseDown:this.state.animating?p.noop:this.onClick.bind(null,"bank",n),onMouseMove:this.onMouseMove,onMouseUp:this.onRelease},n))});return e.jsxs("div",{className:"draggy-boxy-thing orderer height-"+this.props.height+" layout-"+this.props.layout+" blank-background perseus-clearfix ",ref:"orderer",children:[a,s]})}}const T_={name:"orderer",displayName:"Orderer",hidden:!0,widget:j_,isLintable:!0,getStartUserInput:function(){return{current:[]}},getUserInputFromSerializedState:function(e){return{current:e.current.map(e=>e.content)}}};class R_ extends vt.Component{static contextType=Ou;static defaultProps={content:"",linterContext:T};isWidget=!0;render(){return e.jsx(kb,{content:this.props.content,apiOptions:this.props.apiOptions,linterContext:this.props.linterContext,strings:this.context.strings})}}const P_={name:"passage-ref-target",displayName:"PassageRefTarget",widget:R_,hidden:!0,isLintable:!0};class A_ extends vt.Component{static contextType=Ou;iframeRef=vt.createRef();locale;isWidget=!0;state={url:null,banner:null,isFullScreen:!1};constructor(e){super(e),this.locale=this.getPhetCompatibleLocale(Hu().kaLocale)}async componentDidMount(){await this.updateSimState(this.props.url)}async componentDidUpdate(e){e.url!==this.props.url&&await this.updateSimState(this.props.url)}getPhetCompatibleLocale=e=>{switch(e){case"pt-pt":return"pt";case"zh-hans":return"zh_CN";case"zh-hant":return"zh_TW";case"fa-af":return"fa_DA";default:return e}};getPromptJSON(){return ox("phet-simulation")}displayLoadFailure=()=>{this.setState({url:null,banner:{message:this.context.strings.simulationLoadFail,kind:"critical"}})};async updateSimState(e){const t=N_(e,this.locale);if(null===t)return void this.displayLoadFailure();if(!(await fetch(t)).ok)return void this.displayLoadFailure();const n=await this.showLocaleWarning(t);this.setState({url:t,banner:n?{message:this.context.strings.simulationLocaleWarning,kind:"warning"}:null})}async showLocaleWarning(e){if(!e)return!1;const t=/https:\/\/phet\.colorado\.edu\/sims\/html\/([a-zA-Z0-9-]+)\/.*/g.exec(e.toString());if(null===t)return!1;const n=t[1],r=await fetch(`https://phet.colorado.edu/sims/html/${n}/latest/string-map.json`);if(!r.ok)return!1;let i;try{i=await r.json()}catch{return!1}const s=Object.keys(i),a=this.locale.split("_")[0];for(const o of s)if(a===o.split("_")[0])return!1;return!0}toggleFullScreen=()=>{this.setState(e=>({isFullScreen:!e.isFullScreen}))};render(){const{isFullScreen:t,banner:n,url:r}=this.state,{isMobileApp:i}=this.props.apiOptions,s=t&&i,a=s?{...D_.appFullScreenWidgetContainer}:D_.widgetContainer,o=s?D_.appFullScreenIframeContainer:D_.iframeContainer;return e.jsxs(q,{style:a,children:[null!==n&&e.jsx(q,{style:{marginBottom:Ch},children:e.jsx(Se,{layout:"floating",kind:n.kind,text:n.message})}),s&&e.jsx(q,{style:D_.closeButtonContainer,children:e.jsx(he,{icon:ut,onClick:this.toggleFullScreen,kind:"tertiary",actionType:"neutral","aria-label":"Exit fullscreen",style:D_.closeButton})}),e.jsx(q,{style:o,children:e.jsx("iframe",{ref:this.iframeRef,title:this.props.description,sandbox:"allow-same-origin allow-scripts",className:k(D_.iframeResponsive),src:r?.toString(),allow:"fullscreen"})}),null!==r&&!s&&e.jsx(he,{icon:ht,onClick:i?this.toggleFullScreen:()=>{this.iframeRef.current?.requestFullscreen()},kind:"tertiary",actionType:"neutral","aria-label":"Fullscreen",style:{marginTop:5,marginBottom:5,alignSelf:"flex-end"}})]})}}const N_=(e,t)=>{if(!URL.canParse(e))return null;const n=new URL(e);return"https://phet.colorado.edu"!==n.origin?null:(n.searchParams.set("locale",t),n)},D_=E.create({widgetContainer:{borderRadius:6,borderWidth:1,borderColor:"#CCC",padding:H.medium_16,paddingBottom:0},iframeContainer:{position:"relative",overflow:"hidden",width:"100%",paddingTop:"56.25%"},iframeResponsive:{borderWidth:0,position:"absolute",top:0,left:0,bottom:0,right:0,width:"100%",height:"100%"},appFullScreenWidgetContainer:{position:"fixed",top:0,left:0,right:0,bottom:66,width:"100%",height:"auto",zIndex:1e3,backgroundColor:"white",display:"flex",flexDirection:"column"},appFullScreenIframeContainer:{position:"relative",overflow:"hidden",width:"100%",flex:1},closeButtonContainer:{position:"absolute",top:H.xSmall_8,right:H.xSmall_8,zIndex:1001},closeButton:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"50%"}}),L_={name:"phet-simulation",displayName:"PhET Simulation",widget:A_,isLintable:!0},O_=R.getDefaultWidgetOptions("plotter");class F_ extends vt.Component{static contextType=Ou;_isMounted=!1;shouldSetupGraphie;graphieDiv=vt.createRef();graphie;horizHairline;hairlineRange;static defaultProps=O_;state={categoryHeights:{}};componentDidMount(){this._isMounted=!0,this.setupGraphie(this.props.userInput)}UNSAFE_componentWillReceiveProps(e){this.shouldSetupGraphie=r.any(["type","labels","categories","scaleY","maxY","snapsPerLine","picUrl","labelInterval","static"],t=>!r.isEqual(this.props[t],e[t]),this),r.isEqual(this.props.starting,e.starting)||r.isEqual(this.props.userInput,e.starting)||(this.shouldSetupGraphie=!0,this.props.handleUserInput(e.starting))}componentDidUpdate(e,t){this.shouldSetupGraphie=this.shouldSetupGraphie||!r.isEqual(this.state.categoryHeights,t.categoryHeights),this.shouldSetupGraphie&&this.setupGraphie(e.userInput)}componentWillUnmount(){this._isMounted=!1}DOT_PLOT_POINT_SIZE=()=>this.props.apiOptions.isMobile?6:4;DOT_PLOT_POINT_PADDING=()=>8;DOT_TICK_POINT_SIZE=()=>2;setupGraphie(e){const t=this;t.shouldSetupGraphie=!1,p(this.graphieDiv.current).empty();const n=Ef.createGraphie(this.graphieDiv.current);t.graphie=n,t.graphie.pics=[],t.graphie.dotTicks=[];const i="bar"===t.props.type,s="line"===t.props.type,a="pic"===t.props.type,o="histogram"===t.props.type,l="dotplot"===t.props.type,c=a||l,d={},u=d,h=this.props.apiOptions.isMobile;u.graph={lines:[],bars:[],points:[],dividers:[]},u.scaleY=t.props.scaleY,u.dimX=t.props.categories.length;const f=h?[288,336]:t.props.plotDimensions;if(s)u.dimX+=h?-.2:1;else if(o)u.barPad=0,u.barWidth=1;else if(i)u.barPad=h?.08:.15,u.barWidth=1-2*u.barPad,u.dimX+=(h?-2:2)*u.barPad;else if(c){u.picBoxHeight=t.props.picBoxHeight,u.picBoxWidthPx=f[0]/t.props.categories.length;const e=f[0]-u.dimX*u.picBoxWidthPx;u.picPad=e/(2*u.dimX+2);const n=u.picBoxWidthPx+2*u.picPad;u.picPad=u.picPad/n,u.picBoxWidth=u.picBoxWidthPx/n,u.dimX+=2*u.picPad}l&&(u.picBoxHeight=2*this.DOT_PLOT_POINT_SIZE()+this.DOT_PLOT_POINT_PADDING()),u.dimY=Math.ceil(t.props.maxY/u.scaleY)*u.scaleY;let m=25;(i||s)&&h&&(m=0!==t.props.labels[1].length?17:11),l&&(m/=2),h&&c&&0===t.props.labels[1].length&&(m=0);let g=25,b=75;if(h&&(i||c)){const e=Math.max(0,...Object.values(t.state.categoryHeights));if(e){let t=25;c&&(t+=10),b=t+e}}if(u.scale=h?[(f[0]-4*m)/u.dimX,(f[1]-(g+b))/u.dimY]:r.map([u.dimX,u.dimY],function(e,t){return f[t]/e}),c&&(u.scale[1]=u.picBoxHeight/u.scaleY),m/=u.scale[0],g/=u.scale[1],b/=u.scale[1],n.init({range:[[-3*m,u.dimX+m],[-b,u.dimY+g]],scale:u.scale,isMobile:this.props.apiOptions.isMobile}),n.addMouseLayer({allowScratchpad:!0,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),!c){for(let e=h?u.scaleY:0;e<=u.dimY;e+=u.scaleY)n.label([0,e],Lp.roundToApprox(e,2),"left",!0),n.style({stroke:h?"#e9ebec":"#000",strokeWidth:1,opacity:h?1:.3},function(){n.line([0,e],[u.dimX,e])})}(i||s)&&h&&!this.props.static&&(t.graphie.dragPrompt=n.label([u.dimX/2,u.dimY/2],this.context.strings.dragHandles,"center",!1).css("font-weight","bold").css("color",uf.KA_GREEN).css("display","none")),t.setupCategories(d),c&&h&&(t.graphie.dotPrompt=n.label([u.dimX/2,u.dimY/2],this.context.strings.tapAddPoints,"center",!1).css("font-weight","bold").css("color",uf.KA_GREEN).css("display","none")),c&&t.drawPicHeights(t.props.userInput,e),n.style({stroke:"#000",strokeWidth:2,opacity:1},function(){c?l?n.style({stroke:h?uf.GRAY_G:"#000",strokeWidth:h?1:2},()=>n.line([h?0:.5,0],[u.dimX-(h?0:.5),0])):(n.line([0,0],[u.dimX,0]),0===t.props.labels[1].length&&h||n.style({stroke:h?uf.GRAY_G:"#000",strokeWidth:h?1:2},()=>n.line([0,0],[0,u.dimY]))):(n.style({stroke:h?uf.GRAY_G:"#000",strokeWidth:h?1:2},()=>n.line([h?3*-m:0,0],[u.dimX+(h?m:0),0])),(i||s)&&h||n.style({stroke:h?uf.GRAY_G:"#000",strokeWidth:h?1:2},()=>n.line([0,0],[0,u.dimY])))}),n.label([u.dimX/2,h?-b:-35/u.scale[1]],t.props.labels[0],h?"above":"below",!1).css("font-weight","bold").css("color",h&&uf.GRAY_F),n.label([(h?-35:-60)/u.scale[0],u.dimY/2],t.props.labels[1],"center",!1).css("font-weight","bold").css("color",h&&uf.GRAY_F).addClass("rotate"),this.props.apiOptions.isMobile&&(this.horizHairline=new Af(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.horizHairline.attr({stroke:uf.INTERACTIVE}),this.horizHairline.hide(),this.hairlineRange=[[0,u.dimX],[0,u.dimY]])}showHairlines=e=>{this.props.apiOptions.isMobile&&(this.horizHairline.moveTo([this.hairlineRange[0][0],e[1]],[this.hairlineRange[0][1],e[1]]),this.horizHairline.show())};hideHairlines=()=>{this.props.apiOptions.isMobile&&this.horizHairline.hide()};labelCategory=(e,t)=>{const n=this.props.apiOptions.isMobile,r=this.graphie;let i=!1;const s=(t+="").match(/^\$(.*)\$$/);s&&(t=s[1],i=!0);const a=Math.PI/180*45,o=n&&!s;return new Promise(s=>{r.style({color:n?uf.GRAY_G:"inherit",transform:o?"translateX(-50%) translateX(5px) translateY(-50%) rotate(-45deg)":"none",transformOrigin:"100%"},()=>{const l=r.label([e,n?-.5:0],t,"below",i),c=14+(o?Math.round(l.height()*Math.cos(a)+(l.width()+5)*Math.sin(a)):l.height());s({category:t,height:c})})})};setupCategories=e=>{const t=this,n=e,i=t.graphie,s=this.props.apiOptions.isMobile,a=[];"histogram"===t.props.type?(r.times(t.props.categories.length-1,function(n){t.setupBar({index:n,startHeight:t.props.userInput[n],config:e,isHistogram:!0})}),r.each(t.props.categories,function(e,r){const o=.5+r*n.barWidth;a.push(t.labelCategory(o,e));const l=6/n.scale[1];i.style({stroke:"#000",strokeWidth:s?1:2,opacity:1},function(){i.line([o,-l],[o,0])})})):r.each(t.props.categories,function(r,o){const l=t.props.userInput[o];let c;"bar"===t.props.type?c=t.setupBar({index:o,startHeight:l,config:e,isHistogram:!1}):"line"===t.props.type?c=t.setupLine(o,l,e):"pic"===t.props.type?c=t.setupPic(o,e):"dotplot"===t.props.type&&(c=t.setupDotplot(o,e));let d=0,u=-6/n.scale[1];"dotplot"!==t.props.type||s||(d=-u),"dotplot"===t.props.type?o%t.props.labelInterval!==0&&o!==t.props.categories.length-1||(a.push(t.labelCategory(c,r)),d*=1.5,u*=1.5):a.push(t.labelCategory(c,r)),i.style({stroke:s?uf.GRAY_G:"#000",strokeWidth:s?1:2,opacity:1},function(){i.line([c,d],[c,u])})}),Promise.all(a).then(e=>{if(t._isMounted){const n={};e.forEach(({category:e,height:t})=>n[e]=t),t.setState({categoryHeights:n})}})};_clampValue=(e,t,n)=>Math.max(Math.min(e,n),t);_maybeShowDragPrompt=()=>{null!=this.graphie.dragPrompt&&(this.graphie.dragPrompt[0].style.display="inline")};_maybeHideDragPrompt=()=>{null!=this.graphie.dragPrompt&&(this.graphie.dragPrompt[0].style.display="none")};setupBar=e=>{const t=this.props.apiOptions.isMobile,n=e.index,r=e.startHeight,i=e.config,s=e.isHistogram,a=this,o=a.graphie,l=i.barWidth/2;let c;c=s?.5+n*i.barWidth+l:(t?l:.5+i.barPad)+n;const d=function(e,n){const r=o.scalePoint(0);if(i.graph.bars[e].scale(1,Math.max(t?.2:.01,n/i.scaleY),r[0],r[1]),s){const t=i.graph.dividers[e-1],s=i.graph.dividers[e];if(t){const s=Math.min(a.props.userInput[e-1],n);t.scale(1,Math.max(.01,s/i.scaleY),r[0],r[1])}if(s){const t=Math.min(a.props.userInput[e+1],n);s.scale(1,Math.max(.01,t/i.scaleY),r[0],r[1])}}};if(o.style({stroke:"none",fill:t?uf.BLUE_C:uf.LIGHT_BLUE,opacity:1},function(){i.graph.bars[n]=o.path([[c-l,0],[c-l,i.scaleY],[c+l,i.scaleY],[c+l,0],[c-l,0]])}),s&&n>0&&o.style({stroke:"#000",strokeWidth:1,opacity:.3},function(){i.graph.dividers.push(o.path([[c-l,0],[c-l,i.scaleY]]))}),t){const e=i.scaleY/a.props.snapsPerLine;i.graph.lines[n]=Jm.addMaybeMobileMovablePoint(this,{coord:[c,r],constraints:[(t,n,r)=>[c,this._clampValue(Math.round(t[1]/e)*e,0,i.dimY)]],onMoveStart:function(){i.graph.bars[n].attr({fill:uf.INTERACTIVE})},onMove:function(){const e=i.graph.lines[n].coord()[1],t=[...a.props.userInput];t[n]=e,a.changeAndTrack(t),a._maybeHideDragPrompt(),d(n,e)},onMoveEnd:function(){i.graph.bars[n].attr({fill:uf.BLUE_C})}}),i.graph.lines[n].state.visibleShape.wrapper.style.zIndex="1",a._maybeShowDragPrompt()}else i.graph.lines[n]=o.addMovableLineSegment({coordA:[c-l,r],coordZ:[c+l,r],snapY:i.scaleY/a.props.snapsPerLine,constraints:{constrainX:!0},normalStyle:{stroke:uf.INTERACTIVE,"stroke-width":this.props.static?0:4}}),i.graph.lines[n].onMove=function(e,t){let r=this.coordA[1];(r<0||r>i.dimY)&&(r=Math.min(Math.max(r,0),i.dimY),this.coordA[1]=this.coordZ[1]=r,this.transform());const s=[...a.props.userInput];s[n]=r,a.changeAndTrack(s),d(n,r)};return d(n,r),c};setupLine=(e,t,n)=>{const r=this.props.apiOptions.isMobile,i=this,s=n,a=i.graphie,o=e+(r?.4:1);if(r){const r=n.scaleY/i.props.snapsPerLine;s.graph.points[e]=Jm.addMaybeMobileMovablePoint(this,{coord:[o,t],constraints:[(e,t,i)=>[o,this._clampValue(Math.round(e[1]/r)*r,0,n.dimY)]],onMove:function(){const t=s.graph.points[e].coord()[1],n=[...i.props.userInput];n[e]=t,i.changeAndTrack(n),i._maybeHideDragPrompt()}}),i._maybeShowDragPrompt(),e>0&&(s.graph.lines[e]=Jm.addMovableLine(a,{points:[s.graph.points[e-1],s.graph.points[e]],constraints:Jm.MovablePoint.constraints.fixed(),normalStyle:{stroke:uf.BLUE_C,"stroke-width":2},highlightStyle:{stroke:uf.BLUE_C,"stroke-width":2}}))}else s.graph.points[e]=a.addMovablePoint({coord:[o,t],constraints:{constrainX:!0},normalStyle:{fill:uf.INTERACTIVE,stroke:uf.INTERACTIVE},snapY:s.scaleY/i.props.snapsPerLine}),s.graph.points[e].onMove=function(t,n){n=Math.min(Math.max(n,0),s.dimY);const r=[...i.props.userInput];return r[e]=n,i.changeAndTrack(r),[t,n]},e>0&&(s.graph.lines[e]=a.addMovableLineSegment({pointA:s.graph.points[e-1],pointZ:s.graph.points[e],constraints:{fixed:!0},normalStyle:{stroke:"#9ab8ed","stroke-width":2}}));return o};setupDotplot=(e,t)=>{const n=this.graphie,r=this.props.apiOptions.isMobile;return this.setupTiledPlot(e,r?.5:1,t,(e,t)=>n.ellipse([e,t],[this.DOT_PLOT_POINT_SIZE()/n.scale[0],this.DOT_PLOT_POINT_SIZE()/n.scale[1]],{fill:uf.INTERACTIVE,stroke:uf.INTERACTIVE}))};setupPic=(e,t)=>{const n=this.graphie;return this.setupTiledPlot(e,0,t,(e,t)=>{const r=n.scalePoint([e,t]),i=this.props.picSize;return n.raphael.image(this.props.picUrl,r[0]-i/2,r[1]-i/2,i,i)})};setupTiledPlot=(e,t,n,i)=>{const s=this,a=n,o=s.graphie,l=o.pics,c=o.dotTicks,d=e+.5+a.picPad;o.mouselayer.canvas.style.touchAction="none",l[e]=[],c[e]=[];const u=Math.round(a.dimY/a.scaleY)+1;return r(u).times(function(n){const r=((n-=1)+.5)*a.scaleY,u=d-a.picBoxWidth/2,h=r+.5*a.scaleY,f=o.scalePoint([u,h+t]),m=o.mouselayer.rect(f[0],f[1],a.picBoxWidthPx,a.picBoxHeight);p(m[0]).css({fill:"#000",opacity:0,cursor:"pointer"}).on("vmousedown",function(n){n.preventDefault(),s.whichPicClicked=e,s.setPicHeight(e,h),p(document).on("vmouseup.plotTile",function(e){p(document).unbind(".plotTile")}),p(document).on("vmousemove.plotTile",function(e){e.preventDefault();const n=o.getMouseCoord(e)[1],r=Math.floor(n-t),i=(Math.max(-1,Math.floor(r/a.scaleY))+.5)*a.scaleY,l=Math.min(i+.5*a.scaleY,a.dimY);s.setPicHeight(s.whichPicClicked,l)})}),n<0||(l[e][n]=i(d,r+t),c[e][n]=o.ellipse([d,r+t],[s.DOT_TICK_POINT_SIZE()/o.scale[0],s.DOT_TICK_POINT_SIZE()/o.scale[1]],{fill:"#dee1e3",stroke:"#dee1e3"}))}),d};setPicHeight=(e,t)=>{const n=[...this.props.userInput];n[e]=t,this.drawPicHeights(n,this.props.userInput),this.changeAndTrack(n)};changeAndTrack=e=>{this.props.handleUserInput(e),this.props.trackInteraction()};_testInsertUserInput(e){this.props.handleUserInput(e)}drawPicHeights(e,t){const n=this,i=n.graphie,s=i.pics,a=this.props.apiOptions.isMobile;if(a){const t=e.every(e=>0===e);i.dotPrompt[0].style.display=t?"inline":"none"}r.each(s,function(s,o){r.each(s,function(r,s){const l=(s+1)*n.props.scaleY,c=l<=e[o];if("dotplot"===n.props.type){const e=l<=t[o];c&&!e&&r.animate({"stroke-width":8},75,()=>r.animate({"stroke-width":2},75))}p(r[0]).css({display:c?"inline":"none"}),i.dotTicks[o][s][0].style.display=c||!a?"none":"inline"})})}getPromptJSON(){return ox("plotter")}getSerializedState(){const{userInput:e,...t}=this.props;return{...t,values:this.props.userInput}}render(){const t={marginBottom:this.props.labels[0]?75:0};return e.jsx("div",{className:"perseus-widget-plotter graphie",ref:this.graphieDiv,style:t})}}const z_={name:"plotter",displayName:"Plotter",hidden:!0,widget:F_,getCorrectUserInput:function(e){return e.correct},getStartUserInput:function(e){return e.starting},getUserInputFromSerializedState:function(e){return e.values}};class B_ extends vt.Component{static defaultProps={height:400};getPromptJSON(){return ox("python-program")}render(){const t=(n=this.props.programID,ax(`/python-program/${n}/embedded`));var n;const r={height:this.props.height,width:"100%"},i=["allow-popups","allow-same-origin","allow-scripts","allow-top-navigation"].join(" ");return e.jsx(q,{style:H_.container,children:e.jsx("iframe",{sandbox:i,src:t,style:r,allowFullScreen:!0})})}}const H_=E.create({container:{margin:"auto",width:"100%"}}),$_={name:"python-program",displayName:"Python Program",widget:B_};class W_ extends vt.Component{_isMounted=!1;static defaultProps={correct:[],layout:"horizontal",padding:!0,problemNum:0,linterContext:T};componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}handleChange=e=>{this._isMounted&&(this.props.handleUserInput({options:this._getOptionsFromSortable(),changed:!0}),this.props.trackInteraction())};_getOptionsFromSortable(){return this.refs.sortable.getOptions()}getPromptJSON(){return{type:"sorter",userInput:{values:(e=this.props.userInput||{options:[],changed:!1}).options,changed:e.changed}};var e}moveOptionToIndex=(e,t)=>{this.refs.sortable.moveOptionToIndex(e,t)};getSerializedState(){const{userInput:e,...t}=this.props,n=e||{options:[],changed:!1};return{...t,changed:n.changed,options:n.options}}render(){const{apiOptions:t,userInput:n}=this.props,r=t.isMobile?8:5,i=n?.options||[];return e.jsx("div",{className:"perseus-widget-sorter perseus-clearfix",children:e.jsx(EC,{options:i,layout:this.props.layout,margin:r,padding:this.props.padding,onChange:this.handleChange,linterContext:this.props.linterContext,ref:"sortable"})})}}const X_={name:"sorter",displayName:"Sorter",widget:W_,isLintable:!0,getStartUserInput:function(e,t){return{options:pt(e,t),changed:!1}},getUserInputFromSerializedState:function(e){return{changed:e.changed,options:e.options}}},{assert:V_}=af;function G_(e,t){return[""+e,""+t]}function Y_(e){const t=function(e){return V_(Array.isArray(e)&&2===e.length),+e[0]}(e),n=function(e){return V_(Array.isArray(e)&&2===e.length),+e[1]}(e);return"answer"+t+","+n}class q_ extends vt.Component{static contextType=Ou;headerRefs={};answerRefs={};static defaultProps={apiOptions:Wg.defaults,headers:[""],editableHeaders:!1,rows:4,columns:1,linterContext:T};_getRows(){return this.props.userInput.length}_getColumns(){return this.props.userInput[0].length}_getAnswersClone(){return JSON.parse(JSON.stringify(this.props.userInput))}onValueChange(e,t,n){const r=this._getAnswersClone();r[e][t]=n.target?n.target.value:n,this.props.handleUserInput(r),this.props.trackInteraction()}onHeaderChange(e,t){const n=this.props.headers.slice();n[e]=t.content,this.props.onChange({headers:n})}_handleFocus(e){this.props.onFocus(e)}_handleBlur(e){this.props.onBlur(e)}focus(){return this.focusInputPath(G_(0,0)),!0}focusInputPath(e){const t=Y_(e),r=this.answerRefs[t];this.props.apiOptions.customKeypad?r.focus():n.findDOMNode(r).focus()}blurInputPath(e){const t=Y_(e),r=this.answerRefs[t];this.props.apiOptions.customKeypad?r.blur():n.findDOMNode(r).blur()}getDOMNodeForPath(e){const t=Y_(e),r=this.answerRefs[t];return n.findDOMNode(r)}getInputPaths(){const e=this._getRows(),t=this._getColumns(),n=[];for(let r=0;r<e;r++)for(let e=0;e<t;e++){const t=G_(r,e);n.push(t)}return n}getSerializedState(){const{userInput:e,editableHeaders:t,...n}=this.props;return{...n,answers:e}}render(){const t=this.props.headers;let n,r;const i={};return this.props.apiOptions.customKeypad?(n=lU,r={width:80},i.keypadElement=this.props.keypadElement):(n="input",r={}),e.jsxs("table",{className:"perseus-widget-table-of-values non-markdown",children:[e.jsx("thead",{children:e.jsx("tr",{children:t.map((t,n)=>this.props.editableHeaders?e.jsx("th",{children:e.jsx(this.props.Editor,{ref:e=>{this.headerRefs["columnHeader"+n]=e},apiOptions:this.props.apiOptions,content:t,widgetEnabled:!1,onChange:e=>this.onHeaderChange(n,e)})},n):e.jsx("th",{children:e.jsx(kb,{content:t,linterContext:this.props.linterContext,strings:this.context.strings})},n))})}),e.jsx("tbody",{children:this.props.userInput.map((t,s)=>e.jsx("tr",{children:t.map((t,a)=>e.jsx("td",{children:e.jsx(n,{ref:e=>{this.answerRefs[Y_(G_(s,a))]=e},type:"text",value:t,disabled:this.props.apiOptions.readOnly,onFocus:()=>this._handleFocus(G_(s,a)),onBlur:()=>this._handleBlur(G_(s,a)),onChange:e=>this.onValueChange(s,a,e),style:r,...i})},a))},s))})]})}}const Z_={name:"table",displayName:"Table (deprecated - use markdown table instead)",widget:q_,hidden:!0,isLintable:!0,getStartUserInput:function(e){const t=e.rows,n=e.columns;return nh.stringArrayOfSize2D({rows:t,columns:n})},getUserInputFromSerializedState:function(e){return e.answers}},K_=/^https?:\/\//,Q_=e=>{const t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);return t&&11===t[7].length?t[7]:"videoNotFound"},J_=t=>{const{location:n}=t,{useVideo:r}=Wu(),[i,s]=K_.test(n)?[Q_(n),"YOUTUBE_ID"]:[n,"READABLE_ID"],a=r(i,s),{strings:o}=zu();switch(a.status){case"loading":return e.jsx(q,{children:o.loading});case"success":{const t=a.data?.video;return e.jsxs(q,{style:eM.transcriptLink,children:[e.jsx(Pe,{children:t?.title}),e.jsx(ft,{size:10}),e.jsx(mt,{href:"/transcript/"+(t?.contentId||"videoNotFound"),target:"_blank",className:"visited-no-recolor",children:o.videoTranscript})]})}default:return e.jsx(q,{children:o.somethingWrong})}},eM=E.create({transcriptLink:{flexDirection:"row",width:"100%",justifyContent:"center"}}),tM=/^https?:\/\//,nM=/(khanacademy\.org|localhost)/,rM=/(vimeo\.com)/;class iM extends vt.Component{static contextType=Ou;isWidget=!0;getPromptJSON(){return ox("video")}render(){const{InitialRequestUrl:t}=Hu(),n=this.props.location;if(!n)return e.jsx("div",{});let r;if(tM.test(n))r=n,rM.test(r)&&(-1===r.indexOf("?")?r+="?dnt=1":r+="&dnt=1");else{r="{host}/embed_video?slug={slug}&internal_video_only=1".replace("{slug}",n);let e="https://www.khanacademy.org";nM.test(t.host)&&(e=t.origin),r=r.replace("{host}",e)}return e.jsxs(q,{children:[e.jsxs(Dh,{width:1280,height:720,children:[e.jsx(q,{style:qb.srOnly,children:this.context.strings.videoWrapper}),e.jsx("iframe",{className:"perseus-video-widget",sandbox:"allow-same-origin allow-scripts",width:1280,height:720,src:r,allowFullScreen:!0,allow:"autoplay"})]},n+this.props.alignment),e.jsx(J_,{location:n})]})}}const sM=[...ex,...[ux,rx,fx,gx,Ux,vx,Ex,Ax,Lx,tv,rv,av,pv,Tv,aC,yC,_C,LC,zC,f_,C_,T_,ky,My,P_,L_,z_,$_,X_,Z_,{name:"video",displayName:"Video",widget:iM}]],aM=()=>{sM.forEach(e=>{bb(e.name,e)}),Ub("transformer","deprecated-standin"),Ub("lights-puzzle","deprecated-standin"),Ub("reaction-diagram","deprecated-standin"),Ub("sequence","deprecated-standin"),Ub("simulator","deprecated-standin"),Ub("unit-input","deprecated-standin")},oM=new gt.MathJaxRenderer({shouldFixUnicodeLayout:!0,fontURL:"https://cdn.kastatic.org/fonts/mathjax",locale:"en"});function lM(e){return null!=e&&(cM.some(t=>e.matches(`[role=${t}]`))||lM(e.parentElement))}const cM=["button","checkbox","img","menuitemcheckbox","menuitemradio","meter","option","progressbar","radio","scrollbar","separator","slider","switch","tab","combobox"];aM();const dM={...{JIPT:{useJIPT:!1},graphieMovablesJiptLabels:{addLabel:(e,t)=>{}},svgImageJiptLabels:{addLabel:(e,t)=>{}},rendererTranslationComponents:{addComponent:e=>-1,removeComponentAtIndex:e=>{}},TeX:({children:t})=>e.jsx("span",{className:"mock-TeX",children:t}),staticUrl:e=>`mockStaticUrl(${e})`,useVideo:(e,t)=>"YoutubeId"===e&&"YOUTUBE_ID"===t?{status:"success",data:{video:{id:"YoutubeVideo",contentId:"contentId",youtubeId:"YoutubeId",title:"Youtube Video Title",__typename:"Video"}}}:"slug-video-id"===e&&"READABLE_ID"===t?{status:"success",data:{video:{title:"Slug Video Title",id:"VideoId",youtubeId:"YoutubeId",contentId:"contentId",__typename:"Video"}}}:{status:"loading"},InitialRequestUrl:{origin:"origin-test-interface",host:"host-test-interface",protocol:"protocol-test-interface"},isDevServer:!1,kaLocale:"en",Log:{log:()=>{},error:()=>{}}},TeX:function({children:t,onRender:n}){const r=vt.useRef(null),{domElement:i,addLabel:s}=vt.useMemo(()=>oM.render(t),[t]);return vt.useLayoutEffect(()=>{r.current&&(lM(r.current)&&s().catch(console.error),r.current.innerHTML="",r.current.appendChild(i))},[r,s,i]),vt.useEffect(()=>{oM.updateStyles(),n?.()},[t,n]),e.jsx("span",{ref:r})},staticUrl:e=>e},uM={analytics:{onAnalyticsEvent:async()=>{}},useVideo:()=>({status:"success",data:{video:null}}),analytics:{onAnalyticsEvent:async e=>{}}};function hM(e){return"points"===e.type&&e.earned>=e.total}const pM=Array(12).fill(0),fM=({visible:e,className:t})=>St.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},St.createElement("div",{className:"sonner-spinner"},pM.map((e,t)=>St.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),mM=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},St.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),gM=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},St.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),bM=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},St.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),UM=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},St.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),yM=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},St.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),St.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}));let xM=1;const vM=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:n,...r}=e,i="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:xM++,s=this.toasts.find(e=>e.id===i),a=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),s?this.toasts=this.toasts.map(t=>t.id===i?(this.publish({...t,...e,id:i,title:n}),{...t,...e,id:i,dismissible:a,title:n}):t):this.addToast({title:n,...r,dismissible:a,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;void 0!==t.loading&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let i,s=void 0!==n;const a=r.then(async e=>{i=["resolve",e];if(St.isValidElement(e))s=!1,this.create({id:n,type:"default",message:e});else if(wM(e)&&!e.ok){s=!1;const r="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,i="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description,a="object"==typeof r&&!St.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:i,...a})}else if(e instanceof Error){s=!1;const r="function"==typeof t.error?await t.error(e):t.error,i="function"==typeof t.description?await t.description(e):t.description,a="object"==typeof r&&!St.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:i,...a})}else if(void 0!==t.success){s=!1;const r="function"==typeof t.success?await t.success(e):t.success,i="function"==typeof t.description?await t.description(e):t.description,a="object"==typeof r&&!St.isValidElement(r)?r:{message:r};this.create({id:n,type:"success",description:i,...a})}}).catch(async e=>{if(i=["reject",e],void 0!==t.error){s=!1;const r="function"==typeof t.error?await t.error(e):t.error,i="function"==typeof t.description?await t.description(e):t.description,a="object"==typeof r&&!St.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:i,...a})}}).finally(()=>{s&&(this.dismiss(n),n=void 0),null==t.finally||t.finally.call(t)}),o=()=>new Promise((e,t)=>a.then(()=>"reject"===i[0]?t(i[1]):e(i[1])).catch(t));return"string"!=typeof n&&"number"!=typeof n?{unwrap:o}:Object.assign(n,{unwrap:o})},this.custom=(e,t)=>{const n=(null==t?void 0:t.id)||xM++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},wM=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,SM=(e,t)=>{const n=(null==t?void 0:t.id)||xM++;return vM.addToast({title:e,...t,id:n}),n},EM=Object.assign(SM,{success:vM.success,info:vM.info,warning:vM.warning,error:vM.error,custom:vM.custom,message:vM.message,promise:vM.promise,dismiss:vM.dismiss,loading:vM.loading},{getHistory:()=>vM.toasts,getToasts:()=>vM.getActiveToasts()});function kM(e){return void 0!==e.label}!function(e){if("undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const CM=3,_M=14;function MM(...e){return e.filter(Boolean).join(" ")}const IM=e=>{var t,n,r,i,s,a,o,l,c;const{invert:d,toast:u,unstyled:h,interacting:p,setHeights:f,visibleToasts:m,heights:g,index:b,toasts:U,expanded:y,removeToast:x,defaultRichColors:v,closeButton:w,style:S,cancelButtonStyle:E,actionButtonStyle:k,className:C="",descriptionClassName:_="",duration:M,position:I,gap:j,expandByDefault:T,classNames:R,icons:P,closeButtonAriaLabel:A="Close toast"}=e,[N,D]=St.useState(null),[L,O]=St.useState(null),[F,z]=St.useState(!1),[B,H]=St.useState(!1),[$,W]=St.useState(!1),[X,V]=St.useState(!1),[G,Y]=St.useState(!1),[q,Z]=St.useState(0),[K,Q]=St.useState(0),J=St.useRef(u.duration||M||4e3),ee=St.useRef(null),te=St.useRef(null),ne=0===b,re=b+1<=m,ie=u.type,se=!1!==u.dismissible,ae=u.className||"",oe=u.descriptionClassName||"",le=St.useMemo(()=>g.findIndex(e=>e.toastId===u.id)||0,[g,u.id]),ce=St.useMemo(()=>{var e;return null!=(e=u.closeButton)?e:w},[u.closeButton,w]),de=St.useMemo(()=>u.duration||M||4e3,[u.duration,M]),ue=St.useRef(0),he=St.useRef(0),pe=St.useRef(0),fe=St.useRef(null),[me,ge]=I.split("-"),be=St.useMemo(()=>g.reduce((e,t,n)=>n>=le?e:e+t.height,0),[g,le]),Ue=(()=>{const[e,t]=St.useState(document.hidden);return St.useEffect(()=>{const e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),ye=u.invert||d,xe="loading"===ie;he.current=St.useMemo(()=>le*j+be,[le,be]),St.useEffect(()=>{J.current=de},[de]),St.useEffect(()=>{z(!0)},[]),St.useEffect(()=>{const e=te.current;if(e){const t=e.getBoundingClientRect().height;return Q(t),f(e=>[{toastId:u.id,height:t,position:u.position},...e]),()=>f(e=>e.filter(e=>e.toastId!==u.id))}},[f,u.id]),St.useLayoutEffect(()=>{if(!F)return;const e=te.current,t=e.style.height;e.style.height="auto";const n=e.getBoundingClientRect().height;e.style.height=t,Q(n),f(e=>e.find(e=>e.toastId===u.id)?e.map(e=>e.toastId===u.id?{...e,height:n}:e):[{toastId:u.id,height:n,position:u.position},...e])},[F,u.title,u.description,f,u.id,u.jsx,u.action,u.cancel]);const ve=St.useCallback(()=>{H(!0),Z(he.current),f(e=>e.filter(e=>e.toastId!==u.id)),setTimeout(()=>{x(u)},200)},[u,x,f,he]);St.useEffect(()=>{if(u.promise&&"loading"===ie||u.duration===1/0||"loading"===u.type)return;let e;return y||p||Ue?(()=>{if(pe.current<ue.current){const e=(new Date).getTime()-ue.current;J.current=J.current-e}pe.current=(new Date).getTime()})():J.current!==1/0&&(ue.current=(new Date).getTime(),e=setTimeout(()=>{null==u.onAutoClose||u.onAutoClose.call(u,u),ve()},J.current)),()=>clearTimeout(e)},[y,p,u,ie,Ue,ve]),St.useEffect(()=>{u.delete&&(ve(),null==u.onDismiss||u.onDismiss.call(u,u))},[ve,u.delete]);const we=u.icon||(null==P?void 0:P[ie])||(e=>{switch(e){case"success":return mM;case"info":return bM;case"warning":return gM;case"error":return UM;default:return null}})(ie);var Se,Ee,ke,Ce;return St.createElement("li",{tabIndex:0,ref:te,className:MM(C,ae,null==R?void 0:R.toast,null==u||null==(t=u.classNames)?void 0:t.toast,null==R?void 0:R.default,null==R?void 0:R[ie],null==u||null==(n=u.classNames)?void 0:n[ie]),"data-sonner-toast":"","data-rich-colors":null!=(Se=u.richColors)?Se:v,"data-styled":!Boolean(u.jsx||u.unstyled||h),"data-mounted":F,"data-promise":Boolean(u.promise),"data-swiped":G,"data-removed":B,"data-visible":re,"data-y-position":me,"data-x-position":ge,"data-index":b,"data-front":ne,"data-swiping":$,"data-dismissible":se,"data-type":ie,"data-invert":ye,"data-swipe-out":X,"data-swipe-direction":L,"data-expanded":Boolean(y||T&&F),"data-testid":u.testId,style:{"--index":b,"--toasts-before":b,"--z-index":U.length-b,"--offset":`${B?q:he.current}px`,"--initial-height":T?"auto":`${K}px`,...S,...u.style},onDragEnd:()=>{W(!1),D(null),fe.current=null},onPointerDown:e=>{2!==e.button&&!xe&&se&&(ee.current=new Date,Z(he.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(W(!0),fe.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,n;if(X||!se)return;fe.current=null;const r=Number((null==(e=te.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),i=Number((null==(t=te.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),s=(new Date).getTime()-(null==(n=ee.current)?void 0:n.getTime()),a="x"===N?r:i,o=Math.abs(a)/s;if(Math.abs(a)>=45||o>.11)return Z(he.current),null==u.onDismiss||u.onDismiss.call(u,u),O("x"===N?r>0?"right":"left":i>0?"down":"up"),ve(),void V(!0);var l,c;null==(l=te.current)||l.style.setProperty("--swipe-amount-x","0px"),null==(c=te.current)||c.style.setProperty("--swipe-amount-y","0px"),Y(!1),W(!1),D(null)},onPointerMove:t=>{var n,r,i;if(!fe.current||!se)return;if((null==(n=window.getSelection())?void 0:n.toString().length)>0)return;const s=t.clientY-fe.current.y,a=t.clientX-fe.current.x;var o;const l=null!=(o=e.swipeDirections)?o:function(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}(I);!N&&(Math.abs(a)>1||Math.abs(s)>1)&&D(Math.abs(a)>Math.abs(s)?"x":"y");let c={x:0,y:0};const d=e=>1/(1.5+Math.abs(e)/20);if("y"===N){if(l.includes("top")||l.includes("bottom"))if(l.includes("top")&&s<0||l.includes("bottom")&&s>0)c.y=s;else{const e=s*d(s);c.y=Math.abs(e)<Math.abs(s)?e:s}}else if("x"===N&&(l.includes("left")||l.includes("right")))if(l.includes("left")&&a<0||l.includes("right")&&a>0)c.x=a;else{const e=a*d(a);c.x=Math.abs(e)<Math.abs(a)?e:a}(Math.abs(c.x)>0||Math.abs(c.y)>0)&&Y(!0),null==(r=te.current)||r.style.setProperty("--swipe-amount-x",`${c.x}px`),null==(i=te.current)||i.style.setProperty("--swipe-amount-y",`${c.y}px`)}},ce&&!u.jsx&&"loading"!==ie?St.createElement("button",{"aria-label":A,"data-disabled":xe,"data-close-button":!0,onClick:xe||!se?()=>{}:()=>{ve(),null==u.onDismiss||u.onDismiss.call(u,u)},className:MM(null==R?void 0:R.closeButton,null==u||null==(r=u.classNames)?void 0:r.closeButton)},null!=(Ee=null==P?void 0:P.close)?Ee:yM):null,(ie||u.icon||u.promise)&&null!==u.icon&&(null!==(null==P?void 0:P[ie])||u.icon)?St.createElement("div",{"data-icon":"",className:MM(null==R?void 0:R.icon,null==u||null==(i=u.classNames)?void 0:i.icon)},u.promise||"loading"===u.type&&!u.icon?u.icon||((null==P?void 0:P.loading)?St.createElement("div",{className:MM(null==R?void 0:R.loader,null==u||null==(Ce=u.classNames)?void 0:Ce.loader,"sonner-loader"),"data-visible":"loading"===ie},P.loading):St.createElement(fM,{className:MM(null==R?void 0:R.loader,null==u||null==(ke=u.classNames)?void 0:ke.loader),visible:"loading"===ie})):null,"loading"!==u.type?we:null):null,St.createElement("div",{"data-content":"",className:MM(null==R?void 0:R.content,null==u||null==(s=u.classNames)?void 0:s.content)},St.createElement("div",{"data-title":"",className:MM(null==R?void 0:R.title,null==u||null==(a=u.classNames)?void 0:a.title)},u.jsx?u.jsx:"function"==typeof u.title?u.title():u.title),u.description?St.createElement("div",{"data-description":"",className:MM(_,oe,null==R?void 0:R.description,null==u||null==(o=u.classNames)?void 0:o.description)},"function"==typeof u.description?u.description():u.description):null),St.isValidElement(u.cancel)?u.cancel:u.cancel&&kM(u.cancel)?St.createElement("button",{"data-button":!0,"data-cancel":!0,style:u.cancelButtonStyle||E,onClick:e=>{kM(u.cancel)&&se&&(null==u.cancel.onClick||u.cancel.onClick.call(u.cancel,e),ve())},className:MM(null==R?void 0:R.cancelButton,null==u||null==(l=u.classNames)?void 0:l.cancelButton)},u.cancel.label):null,St.isValidElement(u.action)?u.action:u.action&&kM(u.action)?St.createElement("button",{"data-button":!0,"data-action":!0,style:u.actionButtonStyle||k,onClick:e=>{kM(u.action)&&(null==u.action.onClick||u.action.onClick.call(u.action,e),e.defaultPrevented||ve())},className:MM(null==R?void 0:R.actionButton,null==u||null==(c=u.classNames)?void 0:c.actionButton)},u.action.label):null)};function jM(){if("undefined"==typeof window)return"ltr";if("undefined"==typeof document)return"ltr";const e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function TM(e,t){const n={};return[e,t].forEach((e,t)=>{const r=1===t,i=r?"--mobile-offset":"--offset",s=r?"16px":"24px";function a(e){["top","right","bottom","left"].forEach(t=>{n[`${i}-${t}`]="number"==typeof e?`${e}px`:e})}"number"==typeof e||"string"==typeof e?a(e):"object"==typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?n[`${i}-${t}`]=s:n[`${i}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]}):a(s)}),n}const RM=St.forwardRef(function(e,t){const{id:r,invert:i,position:s="bottom-right",hotkey:a=["altKey","KeyT"],expand:o,closeButton:l,className:c,offset:d,mobileOffset:u,theme:h="light",richColors:p,duration:f,style:m,visibleToasts:g=CM,toastOptions:b,dir:U=jM(),gap:y=_M,icons:x,containerAriaLabel:v="Notifications"}=e,[w,S]=St.useState([]),E=St.useMemo(()=>r?w.filter(e=>e.toasterId===r):w.filter(e=>!e.toasterId),[w,r]),k=St.useMemo(()=>Array.from(new Set([s].concat(E.filter(e=>e.position).map(e=>e.position)))),[E,s]),[C,_]=St.useState([]),[M,I]=St.useState(!1),[j,T]=St.useState(!1),[R,P]=St.useState("system"!==h?h:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),A=St.useRef(null),N=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=St.useRef(null),L=St.useRef(!1),O=St.useCallback(e=>{S(t=>{var n;return(null==(n=t.find(t=>t.id===e.id))?void 0:n.delete)||vM.dismiss(e.id),t.filter(({id:t})=>t!==e.id)})},[]);return St.useEffect(()=>vM.subscribe(e=>{e.dismiss?requestAnimationFrame(()=>{S(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t))}):setTimeout(()=>{n.flushSync(()=>{S(t=>{const n=t.findIndex(t=>t.id===e.id);return-1!==n?[...t.slice(0,n),{...t[n],...e},...t.slice(n+1)]:[e,...t]})})})}),[w]),St.useEffect(()=>{if("system"!==h)return void P(h);if("system"===h&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?P("dark"):P("light")),"undefined"==typeof window)return;const e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",({matches:e})=>{P(e?"dark":"light")})}catch(t){e.addListener(({matches:e})=>{try{P(e?"dark":"light")}catch(lA){}})}},[h]),St.useEffect(()=>{w.length<=1&&I(!1)},[w]),St.useEffect(()=>{const e=e=>{var t;var n;a.every(t=>e[t]||e.code===t)&&(I(!0),null==(n=A.current)||n.focus());"Escape"!==e.code||document.activeElement!==A.current&&!(null==(t=A.current)?void 0:t.contains(document.activeElement))||I(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a]),St.useEffect(()=>{if(A.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,L.current=!1)}},[A.current]),St.createElement("section",{ref:t,"aria-label":`${v} ${N}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((t,n)=>{var r;const[s,a]=t.split("-");return E.length?St.createElement("ol",{key:t,dir:"auto"===U?jM():U,tabIndex:-1,ref:A,className:c,"data-sonner-toaster":!0,"data-sonner-theme":R,"data-y-position":s,"data-x-position":a,style:{"--front-toast-height":`${(null==(r=C[0])?void 0:r.height)||0}px`,"--width":"356px","--gap":`${y}px`,...m,...TM(d,u)},onBlur:e=>{L.current&&!e.currentTarget.contains(e.relatedTarget)&&(L.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||L.current||(L.current=!0,D.current=e.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{j||I(!1)},onDragEnd:()=>I(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||T(!0)},onPointerUp:()=>T(!1)},E.filter(e=>!e.position&&0===n||e.position===t).map((n,r)=>{var s,a;return St.createElement(IM,{key:n.id,icons:x,index:r,toast:n,defaultRichColors:p,duration:null!=(s=null==b?void 0:b.duration)?s:f,className:null==b?void 0:b.className,descriptionClassName:null==b?void 0:b.descriptionClassName,invert:i,visibleToasts:g,closeButton:null!=(a=null==b?void 0:b.closeButton)?a:l,interacting:j,position:t,style:null==b?void 0:b.style,unstyled:null==b?void 0:b.unstyled,classNames:null==b?void 0:b.classNames,cancelButtonStyle:null==b?void 0:b.cancelButtonStyle,actionButtonStyle:null==b?void 0:b.actionButtonStyle,closeButtonAriaLabel:null==b?void 0:b.closeButtonAriaLabel,removeToast:O,toasts:E.filter(e=>e.position==n.position),heights:C.filter(e=>e.position==n.position),setHeights:_,expandByDefault:o,gap:y,expanded:M,swipeDirections:e.swipeDirections})})):null}))}),PM={async authenticatedFetch(e,t={}){const n=pr.getToken(),r={"Content-Type":"application/json",...t.headers};return n&&(r.Authorization=`Bearer ${n}`),Sr.fetch(e,{...t,headers:r})},async get(e,t={}){return this.authenticatedFetch(e,{...t,method:"GET"})},async post(e,t,n={}){return this.authenticatedFetch(e,{...n,method:"POST",body:t?JSON.stringify(t):void 0})},async put(e,t,n={}){return this.authenticatedFetch(e,{...n,method:"PUT",body:t?JSON.stringify(t):void 0})}},AM="http://localhost:8000",NM=({onSkillChange:t})=>{const{user:n}=_r(),[r,i]=vt.useState([]),[s,a]=vt.useState(0),[o,l]=vt.useState(!1),[c,d]=vt.useState(),[p,f]=vt.useState(!1),[m,g]=vt.useState(Date.now()),[b,U]=vt.useState(!1),[x,v]=vt.useState(!0),[w,S]=vt.useState(!1),[E,k]=vt.useState(null),C=vt.useRef(null),_=vt.useRef(null),M=n?.user_id||"mongodb_test_user";vt.useEffect(()=>{(async()=>{if(pr.getToken()){v(!0),S(!1),k(null);try{const e=await PM.get(`${AM}/api/questions/16`);if(!e.ok)throw new Error(`Failed to fetch questions: ${e.status}`);const t=await e.json();i(t),a(0),l(!1),f(!1),g(Date.now())}catch(Ooe){S(!0),k(Ooe instanceof Error?Ooe:new Error("Unknown error"))}finally{v(!1)}}else v(!1)})()},[M]),vt.useEffect(()=>{if(w){const e=E?.message||"Unknown error fetching questions";EM.error("Unable to load questions",{description:e})}},[w,E]),vt.useEffect(()=>{if(r.length>0&&!x){const e=r[s].dash_metadata||{};PM.post(`${AM}/api/question-displayed`,{question_index:s,metadata:e}).catch(e=>{})}},[s,r,x,M]),vt.useEffect(()=>{if(t){t("counting_100")}},[t]),vt.useEffect(()=>{if(p){U(!1);const e=setTimeout(()=>U(!0),50);return()=>clearTimeout(e)}},[p]),vt.useEffect(()=>{b&&_.current&&setTimeout(()=>{_.current&&_.current.scrollTo({top:_.current.scrollHeight,behavior:"smooth"})},100)},[b]);const I=r[s]||{},j=r.length>0?(s+1)/r.length*100:0;return e.jsx("div",{className:"framework-perseus relative flex min-h-screen w-full items-center justify-center py-4 md:py-6 px-3 md:px-4",children:e.jsxs(Mu,{className:"relative flex w-full max-w-4xl md:max-w-5xl h-auto md:h-[550px] lg:h-[600px] flex-col border-[4px] md:border-[5px] border-black dark:border-white shadow-[2px_2px_0_0_rgba(0,0,0,1)] md:shadow-[2px_2px_0_0_rgba(0,0,0,1)] dark:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)] md:dark:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)] bg-[#FFFDF5] dark:bg-[#000000] overflow-hidden transition-all duration-200",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 md:h-3 bg-[#FFFDF5] dark:bg-[#000000] border-b-[2px] md:border-b-[3px] border-black dark:border-white",children:e.jsx("div",{className:"h-full bg-[#C4B5FD] transition-all duration-500 ease-out",style:{width:`${j}%`}})}),e.jsx(Iu,{className:"space-y-2 pt-6 md:pt-7 px-4 md:px-6 border-b-[3px] md:border-b-[4px] border-black dark:border-white bg-[#FFD93D]",children:e.jsxs("div",{className:"flex items-start justify-between gap-3 md:gap-4 flex-wrap",children:[e.jsxs("div",{className:"space-y-1.5 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("div",{className:"p-1.5 md:p-2 border-[2px] md:border-[3px] border-black dark:border-white bg-[#FFFDF5] dark:bg-[#000000]",children:e.jsx(xi,{className:"w-4 h-4 md:w-5 md:h-5 text-black dark:text-white font-bold"})}),e.jsx(ju,{className:"text-lg md:text-xl font-black text-black uppercase tracking-tight",children:"Practice Session"})]}),e.jsx(Tu,{className:"text-xs md:text-sm font-bold text-black uppercase tracking-wide",children:n?`Welcome, ${n.name}! Grade: ${n.current_grade}`:`User: ${M}`})]}),e.jsx("div",{className:"flex items-center gap-2 md:gap-3",children:!x&&r.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx("div",{className:"text-[10px] md:text-xs font-black uppercase tracking-wider text-black mb-0.5",children:"Progress"}),e.jsxs("div",{className:"text-xs md:text-sm font-black text-black",children:["Q ",e.jsx("span",{className:"text-[#FF6B6B]",children:s+1}),"/",r.length]})]}),e.jsx("div",{className:"px-3 md:px-4 py-2 md:py-3 border-[2px] md:border-[3px] border-black dark:border-white bg-[#FFFDF5] dark:bg-[#000000] shadow-[1px_1px_0_0_rgba(0,0,0,1)] md:shadow-[2px_2px_0_0_rgba(0,0,0,1)] dark:shadow-[1px_1px_0_0_rgba(255,255,255,0.3)]",children:e.jsxs("div",{className:"text-xl md:text-2xl font-black text-black dark:text-white",children:[Math.round(j),"%"]})})]})})]})}),e.jsx(Ru,{className:"flex-1 overflow-hidden px-4 md:px-6 bg-[#FFFDF5] dark:bg-[#000000]",children:e.jsx("div",{ref:_,className:"relative h-full w-full overflow-auto scrollbar-thin scrollbar-thumb-black dark:scrollbar-thumb-white scrollbar-track-transparent",children:o?e.jsx("div",{className:"flex h-full items-center justify-center px-3 md:px-4 py-4 md:py-6 text-center",children:e.jsxs("div",{className:"max-w-sm md:max-w-md border-[4px] md:border-[5px] border-black dark:border-white bg-[#4ADE80] px-6 md:px-8 py-8 md:py-10 shadow-[2px_2px_0_0_rgba(0,0,0,1)] md:shadow-[3px_3px_0_0_rgba(0,0,0,1)] dark:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)]",children:[e.jsx("div",{className:"text-4xl md:text-6xl mb-3 md:mb-4",children:"🎉"}),e.jsx("p",{className:"text-xl md:text-2xl font-black text-black uppercase mb-2 tracking-tight",children:"Congratulations!"}),e.jsx("p",{className:"text-base md:text-lg font-bold text-black mb-3 md:mb-4",children:"You've successfully completed your test!"}),e.jsx("p",{className:"text-xs md:text-sm font-bold text-black uppercase tracking-wide mb-6",children:"Review questions or restart session"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx(ii,{type:"button",variant:"outline",onClick:()=>{a(0),l(!1),d(void 0),f(!1),S(!1)},className:"border-[2px] border-black bg-white hover:bg-[#FFD93D] text-black font-black uppercase tracking-wide shadow-[2px_2px_0_0_rgba(0,0,0,1)] hover:translate-x-[1px] hover:translate-y-[1px] hover:shadow-[1px_1px_0_0_rgba(0,0,0,1)] transition-all",children:"Restart"}),e.jsx(ii,{type:"button",variant:"secondary",onClick:()=>{a(0),l(!1)},className:"border-[2px] border-black bg-[#C4B5FD] hover:bg-[#A78BFA] text-black font-black uppercase tracking-wide shadow-[2px_2px_0_0_rgba(0,0,0,1)] hover:translate-x-[1px] hover:translate-y-[1px] hover:shadow-[1px_1px_0_0_rgba(0,0,0,1)] transition-all",children:"Review"})]})]})}):x?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-3 md:gap-4",children:[e.jsxs("div",{className:"relative w-12 h-12 md:w-16 md:h-16",children:[e.jsx("div",{className:"absolute inset-0 border-[3px] md:border-[4px] border-black dark:border-white"}),e.jsx("div",{className:"absolute inset-0 border-[3px] md:border-[4px] border-transparent border-t-[#C4B5FD] animate-spin"})]}),e.jsx("p",{className:"text-xs md:text-sm font-black uppercase text-black dark:text-white tracking-wider animate-pulse",children:"Loading questions..."})]}):r.length>0?e.jsxs("div",{className:"space-y-4 md:space-y-6 py-3 md:py-4",children:[e.jsx("div",{className:"border-[3px] md:border-[4px] border-black dark:border-white bg-white dark:bg-neutral-800 p-4 md:p-5 lg:p-6 shadow-[2px_2px_0_0_rgba(0,0,0,1)] md:shadow-[2px_2px_0_0_rgba(0,0,0,1)] dark:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)] md:dark:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)]",children:e.jsx(Fu,{locale:"en",strings:Nu,children:e.jsx(y,{children:e.jsx(Gb,{ref:C,problemNum:0,item:I,dependencies:uM,apiOptions:{},linterContext:{contentType:"",highlightLint:!0,paths:[],stack:[]},showSolutions:"none",hintsVisible:0,reviewMode:!1})})})}),p&&e.jsx("div",{className:"transform transition-all duration-300 "+(b?"translate-y-0 opacity-100":"translate-y-4 opacity-0"),children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 px-4 md:px-5 py-3 md:py-4 border-[3px] md:border-[4px] border-black dark:border-white shadow-[2px_2px_0_0_rgba(0,0,0,1)] md:shadow-[2px_2px_0_0_rgba(0,0,0,1)] dark:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)] md:dark:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)] "+(c?.correct?"bg-[#ADFF2F]":"bg-[#FF006E]"),children:[c?.correct?e.jsx("div",{className:"p-1 border-[2px] md:border-[3px] border-black dark:border-white bg-white dark:bg-neutral-900",children:e.jsx(pi,{className:"w-4 h-4 md:w-5 md:h-5 text-black dark:text-white flex-shrink-0 font-bold"})}):e.jsx("div",{className:"p-1 border-[2px] md:border-[3px] border-black dark:border-white bg-white",children:e.jsx(fi,{className:"w-4 h-4 md:w-5 md:h-5 text-black flex-shrink-0 font-bold"})}),e.jsx("span",{className:"text-sm md:text-base font-black uppercase tracking-tight "+(c?.correct?"text-black":"text-white"),children:c?.correct?"🎯 Excellent! That's correct!":"📚 Not quite. Keep trying!"})]})})]}):e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-2 md:space-y-3 border-[3px] md:border-[4px] border-black dark:border-white bg-white dark:bg-neutral-800 p-6 md:p-8 shadow-[2px_2px_0_0_rgba(0,0,0,1)] md:shadow-[2px_2px_0_0_rgba(0,0,0,1)] dark:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)]",children:[e.jsx("div",{className:"text-3xl md:text-4xl mb-1 md:mb-2",children:"📝"}),e.jsx("p",{className:"text-xs md:text-sm font-black uppercase text-black dark:text-white tracking-wider",children:"No questions available."})]})})})}),e.jsxs(Pu,{className:"flex justify-end gap-2 md:gap-3 px-4 md:px-6 pb-4 md:pb-5 pt-3 md:pt-4 border-t-[3px] md:border-t-[4px] border-black dark:border-white bg-white dark:bg-neutral-900",children:[e.jsx(ii,{type:"button",size:"sm",onClick:async()=>{if(C.current){const e=C.current.getUserInput(),t=I.question,n=function(e,t,n){if("points"===e.type)return{empty:!1,correct:hM(e),message:e.message,guess:t,state:n};if("invalid"===e.type)return{empty:!0,correct:!1,message:e.message,suppressAlmostThere:e.suppressAlmostThere,guess:t,state:n};throw new u("Invalid score type: "+e.type,h.InvalidInput,{metadata:{score:JSON.stringify(e),guess:JSON.stringify(t),state:JSON.stringify(n)}})}(bt(t,e,"en"),[C.current.getUserInputLegacy(),[]],C.current.getSerializedState().question),i=(Date.now()-m)/1e3;try{const e=r[s].dash_metadata||{};await PM.post(`${AM}/api/submit-answer`,{user_id:M,question_id:e.dash_question_id||`q_${s}`,skill_ids:e.skill_ids||["counting_1_10"],is_correct:n.correct,response_time_seconds:i})}catch(Ooe){}f(!0),d(n);try{const e=r[s],t=(e.dash_metadata||{}).dash_question_id||`q_${s}_${Date.now()}`;await PM.post("http://localhost:8002/question/answered",{question_id:t,is_correct:n.correct||!1})}catch(Ooe){}}},disabled:x||o||0===r.length,className:"transition-all duration-100 border-[2px] md:border-[3px] border-black dark:border-white bg-[#C4B5FD] hover:bg-[#C4B5FD] text-black font-black uppercase tracking-wide shadow-[1px_1px_0_0_rgba(0,0,0,1)] md:shadow-[2px_2px_0_0_rgba(0,0,0,1)] dark:shadow-[1px_1px_0_0_rgba(255,255,255,0.3)] hover:shadow-[2px_2px_0_0_rgba(0,0,0,1)] md:hover:shadow-[3px_3px_0_0_rgba(0,0,0,1)] dark:hover:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)] md:dark:hover:shadow-[3px_3px_0_0_rgba(255,255,255,0.3)] disabled:opacity-50 disabled:hover:shadow-[2px_2px_0_0_rgba(0,0,0,1)] md:disabled:hover:shadow-[2px_2px_0_0_rgba(0,0,0,1)] text-xs md:text-sm h-9 md:h-10 px-4 md:px-5",children:"Submit"}),e.jsx(ii,{type:"button",variant:"outline",size:"sm",onClick:()=>{a(e=>{const t=e+1;return t>=r.length?(l(!0),e):(t===r.length-1&&l(!0),f(!1),U(!1),g(Date.now()),t)})},disabled:x||o||0===r.length,className:"transition-all duration-100 border-[2px] md:border-[3px] border-black dark:border-white bg-white dark:bg-neutral-800 hover:bg-[#FFD93D] dark:hover:bg-[#FFD93D] text-black dark:text-white dark:hover:text-black font-black uppercase tracking-wide shadow-[1px_1px_0_0_rgba(0,0,0,1)] md:shadow-[2px_2px_0_0_rgba(0,0,0,1)] dark:shadow-[1px_1px_0_0_rgba(255,255,255,0.3)] hover:shadow-none hover:translate-x-1 hover:translate-y-1 disabled:opacity-50 disabled:hover:translate-x-0 disabled:hover:translate-y-0 disabled:hover:shadow-[2px_2px_0_0_rgba(0,0,0,1)] md:disabled:hover:shadow-[2px_2px_0_0_rgba(0,0,0,1)] text-xs md:text-sm h-9 md:h-10 px-4 md:px-5",children:"Next →"})]})]})})},DM=({onSkillChange:t})=>e.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center bg-transparent",children:e.jsx("div",{className:"w-full h-full",id:"perseus-capture-area",children:e.jsx(NM,{onSkillChange:t})})});var LM,OM,FM,zM,BM={VITE_APP_BACKEND_V2_GET_URL:"https://json.excalidraw.com/api/v2/",VITE_APP_BACKEND_V2_POST_URL:"https://json.excalidraw.com/api/v2/post/",VITE_APP_LIBRARY_URL:"https://libraries.excalidraw.com",VITE_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",VITE_APP_PLUS_LP:"https://plus.excalidraw.com",VITE_APP_PLUS_APP:"https://app.excalidraw.com",VITE_APP_AI_BACKEND:"https://oss-ai.excalidraw.com",VITE_APP_WS_SERVER_URL:"https://oss-collab.excalidraw.com",VITE_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',VITE_APP_ENABLE_TRACKING:"false",VITE_APP_PLUS_EXPORT_PUBLIC_KEY:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX\n/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t\nkPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF\ngq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53\nPrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx\niPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE\nPQIDAQAB",VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX:"false",VITE_APP_COLLAPSE_OVERLAY:"false",VITE_APP_ENABLE_ESLINT:"false",PKG_NAME:"@excalidraw/excalidraw",PKG_VERSION:"0.18.0",PROD:!0},HM=Object.defineProperty,$M=(LM=function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')},typeof require<"u"?require:typeof Proxy<"u"?new Proxy(LM,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):LM),WM=(e,t)=>{for(var n in t)HM(e,n,{get:t[n],enumerable:!0})},XM=(e,t,n)=>(((e,t,n)=>{t in e?HM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),VM={};function GM(){return OM||(OM=1,e=function(e){e.version="0.3.0";var t=function(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}(),n="undefined"!=typeof Buffer;function r(e){for(var n=-1,r=0,i=e.length-7;r<i;)n=(n=(n=(n=(n=(n=(n=(n=n>>>8^t[255&(n^e[r++])])>>>8^t[255&(n^e[r++])])>>>8^t[255&(n^e[r++])])>>>8^t[255&(n^e[r++])])>>>8^t[255&(n^e[r++])])>>>8^t[255&(n^e[r++])])>>>8^t[255&(n^e[r++])])>>>8^t[255&(n^e[r++])];for(;r<i+7;)n=n>>>8^t[255&(n^e[r++])];return-1^n}e.table=t,e.bstr=function(e){if(e.length>32768&&n)return r(new Buffer(e));for(var i=-1,s=e.length-1,a=0;a<s;)i=t[255&(i^e.charCodeAt(a++))]^i>>>8,i=t[255&(i^e.charCodeAt(a++))]^i>>>8;return a===s&&(i=i>>>8^t[255&(i^e.charCodeAt(a))]),-1^i},e.buf=function(e){if(e.length>1e4)return r(e);for(var n=-1,i=0,s=e.length-3;i<s;)n=(n=(n=(n=n>>>8^t[255&(n^e[i++])])>>>8^t[255&(n^e[i++])])>>>8^t[255&(n^e[i++])])>>>8^t[255&(n^e[i++])];for(;i<s+3;)n=n>>>8^t[255&(n^e[i++])];return-1^n},e.str=function(e){for(var n,r,i=-1,s=0,a=e.length;s<a;)(n=e.charCodeAt(s++))<128?i=i>>>8^t[255&(i^n)]:n<2048?i=(i=i>>>8^t[255&(i^(192|n>>6&31))])>>>8^t[255&(i^(128|63&n))]:n>=55296&&n<57344?(n=64+(1023&n),r=1023&e.charCodeAt(s++),i=(i=(i=(i=i>>>8^t[255&(i^(240|n>>8&7))])>>>8^t[255&(i^(128|n>>2&63))])>>>8^t[255&(i^(128|r>>6&15|3&n))])>>>8^t[255&(i^(128|63&r))]):i=(i=(i=i>>>8^t[255&(i^(224|n>>12&15))])>>>8^t[255&(i^(128|n>>6&63))])>>>8^t[255&(i^(128|63&n))];return-1^i}},"undefined"==typeof DO_NOT_EXPORT_CRC?e(VM):e({})),VM;var e}const YM=yt(function(){if(zM)return FM;zM=1;var e=GM();FM=function(i){if(137!==i[0])throw new Error("Invalid .png file header");if(80!==i[1])throw new Error("Invalid .png file header");if(78!==i[2])throw new Error("Invalid .png file header");if(71!==i[3])throw new Error("Invalid .png file header");if(13!==i[4])throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(10!==i[5])throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(26!==i[6])throw new Error("Invalid .png file header");if(10!==i[7])throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");var s=!1,a=[],o=8;for(;o<i.length;){t[3]=i[o++],t[2]=i[o++],t[1]=i[o++],t[0]=i[o++];var l=r[0]+4,c=new Uint8Array(l);c[0]=i[o++],c[1]=i[o++],c[2]=i[o++],c[3]=i[o++];var d=String.fromCharCode(c[0])+String.fromCharCode(c[1])+String.fromCharCode(c[2])+String.fromCharCode(c[3]);if(!a.length&&"IHDR"!==d)throw new Error("IHDR header missing");if("IEND"===d){s=!0,a.push({name:d,data:new Uint8Array(0)});break}for(var u=4;u<l;u++)c[u]=i[o++];t[3]=i[o++],t[2]=i[o++],t[1]=i[o++],t[0]=i[o++];var h=n[0];if(e.buf(c)!==h)throw new Error("CRC values for "+d+" header do not match, PNG file is likely corrupted");var p=new Uint8Array(c.buffer.slice(4));a.push({name:d,data:p})}if(!s)throw new Error(".png file ended prematurely: no IEND header was found");return a};var t=new Uint8Array(4),n=new Int32Array(t.buffer),r=new Uint32Array(t.buffer);return FM}());var qM,ZM,KM,QM,JM,eI={};const tI=yt((JM||(JM=1,eI.encode=ZM?qM:(ZM=1,qM=function(e,t){if(e=String(e),t=String(t),!/^[\x00-\xFF]+$/.test(e)||!/^[\x00-\xFF]+$/.test(t))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(e.length>=80)throw new Error('Keyword "'+e+'" is longer than the 79-character limit imposed by the PNG specification');for(var n,r=e.length+t.length+1,i=new Uint8Array(r),s=0,a=0;a<e.length;a++){if(!(n=e.charCodeAt(a)))throw new Error("0x00 character is not permitted in tEXt keywords");i[s++]=n}i[s++]=0;for(var o=0;o<t.length;o++){if(!(n=t.charCodeAt(o)))throw new Error("0x00 character is not permitted in tEXt content");i[s++]=n}return{name:"tEXt",data:i}}),eI.decode=QM?KM:(QM=1,KM=function(e){e.data&&e.name&&(e=e.data);for(var t=!0,n="",r="",i=0;i<e.length;i++){var s=e[i];if(t)s?r+=String.fromCharCode(s):t=!1;else{if(!s)throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content");n+=String.fromCharCode(s)}}return{keyword:r,text:n}})),eI));var nI,rI,iI,sI;const aI=yt(function(){if(sI)return iI;sI=1;var e=rI?nI:(rI=1,nI=function(e,t,n){var r=[],i=e.length;if(0===i)return r;var s=t<0?Math.max(0,t+i):t||0;for(void 0!==n&&(i=n<0?n+i:n);i-- >s;)r[i-s]=e[i];return r}),t=GM();iI=function(s){var a,o=8,l=o;for(a=0;a<s.length;a++)o+=s[a].data.length,o+=12;var c=new Uint8Array(o);for(c[0]=137,c[1]=80,c[2]=78,c[3]=71,c[4]=13,c[5]=10,c[6]=26,c[7]=10,a=0;a<s.length;a++){var d=s[a],u=d.name,h=d.data,p=h.length,f=[u.charCodeAt(0),u.charCodeAt(1),u.charCodeAt(2),u.charCodeAt(3)];i[0]=p,c[l++]=n[3],c[l++]=n[2],c[l++]=n[1],c[l++]=n[0],c[l++]=f[0],c[l++]=f[1],c[l++]=f[2],c[l++]=f[3];for(var m=0;m<p;)c[l++]=h[m++];var g=f.concat(e(h)),b=t.buf(g);r[0]=b,c[l++]=n[3],c[l++]=n[2],c[l++]=n[1],c[l++]=n[0]}return c};var n=new Uint8Array(4),r=new Int32Array(n.buffer),i=new Uint32Array(n.buffer);return iI}());function oI(e){let t=e.length;for(;--t>=0;)e[t]=0}const lI=256,cI=286,dI=30,uI=15,hI=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),pI=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),fI=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),mI=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gI=new Array(576);oI(gI);const bI=new Array(60);oI(bI);const UI=new Array(512);oI(UI);const yI=new Array(256);oI(yI);const xI=new Array(29);oI(xI);const vI=new Array(dI);function wI(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let SI,EI,kI;function CI(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}oI(vI);const _I=e=>e<256?UI[e]:UI[256+(e>>>7)],MI=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},II=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,MI(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},jI=(e,t,n)=>{II(e,n[2*t],n[2*t+1])},TI=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},RI=(e,t,n)=>{const r=new Array(16);let i,s,a=0;for(i=1;i<=uI;i++)r[i]=a=a+n[i-1]<<1;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=TI(r[t]++,t))}},PI=e=>{let t;for(t=0;t<cI;t++)e.dyn_ltree[2*t]=0;for(t=0;t<dI;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},AI=e=>{e.bi_valid>8?MI(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},NI=(e,t,n,r)=>{const i=2*t,s=2*n;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]},DI=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&NI(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!NI(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},LI=(e,t,n)=>{let r,i,s,a,o=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],i=e.pending_buf[e.l_buf+o],o++,0===r?jI(e,i,t):(s=yI[i],jI(e,s+lI+1,t),a=hI[s],0!==a&&(i-=xI[s],II(e,i,a)),r--,s=_I(r),jI(e,s,n),a=pI[s],0!==a&&(r-=vI[s],II(e,r,a)))}while(o<e.last_lit);jI(e,256,t)},OI=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let a,o,l,c=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<s;a++)0!==n[2*a]?(e.heap[++e.heap_len]=c=a,e.depth[a]=0):n[2*a+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=r[2*l+1]);for(t.max_code=c,a=e.heap_len>>1;a>=1;a--)DI(e,n,a);l=s;do{a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],DI(e,n,1),o=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=o,n[2*l]=n[2*a]+n[2*o],e.depth[l]=(e.depth[a]>=e.depth[o]?e.depth[a]:e.depth[o])+1,n[2*a+1]=n[2*o+1]=l,e.heap[1]=l++,DI(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,o=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,d,u,h,p,f,m=0;for(h=0;h<=uI;h++)e.bl_count[h]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)d=e.heap[c],h=n[2*n[2*d+1]+1]+1,h>l&&(h=l,m++),n[2*d+1]=h,d>r||(e.bl_count[h]++,p=0,d>=o&&(p=a[d-o]),f=n[2*d],e.opt_len+=f*(h+p),s&&(e.static_len+=f*(i[2*d+1]+p)));if(0!==m){do{for(h=l-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[l]--,m-=2}while(m>0);for(h=l;0!==h;h--)for(d=e.bl_count[h];0!==d;)u=e.heap[--c],u>r||(n[2*u+1]!==h&&(e.opt_len+=(h-n[2*u+1])*n[2*u],n[2*u+1]=h),d--)}})(e,t),RI(n,c,e.bl_count)},FI=(e,t,n)=>{let r,i,s=-1,a=t[1],o=0,l=7,c=4;for(0===a&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++o<l&&i===a||(o<c?e.bl_tree[2*i]+=o:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,s=i,0===a?(l=138,c=3):i===a?(l=6,c=3):(l=7,c=4))},zI=(e,t,n)=>{let r,i,s=-1,a=t[1],o=0,l=7,c=4;for(0===a&&(l=138,c=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++o<l&&i===a)){if(o<c)do{jI(e,i,e.bl_tree)}while(0!==--o);else 0!==i?(i!==s&&(jI(e,i,e.bl_tree),o--),jI(e,16,e.bl_tree),II(e,o-3,2)):o<=10?(jI(e,17,e.bl_tree),II(e,o-3,3)):(jI(e,18,e.bl_tree),II(e,o-11,7));o=0,s=i,0===a?(l=138,c=3):i===a?(l=6,c=3):(l=7,c=4)}};let BI=!1;const HI=(e,t,n,r)=>{II(e,0+(r?1:0),3),((e,t,n)=>{AI(e),MI(e,n),MI(e,~n),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n})(e,t,n)};var $I={_tr_init:e=>{BI||((()=>{let e,t,n,r,i;const s=new Array(16);for(n=0,r=0;r<28;r++)for(xI[r]=n,e=0;e<1<<hI[r];e++)yI[n++]=r;for(yI[n-1]=r,i=0,r=0;r<16;r++)for(vI[r]=i,e=0;e<1<<pI[r];e++)UI[i++]=r;for(i>>=7;r<dI;r++)for(vI[r]=i<<7,e=0;e<1<<pI[r]-7;e++)UI[256+i++]=r;for(t=0;t<=uI;t++)s[t]=0;for(e=0;e<=143;)gI[2*e+1]=8,e++,s[8]++;for(;e<=255;)gI[2*e+1]=9,e++,s[9]++;for(;e<=279;)gI[2*e+1]=7,e++,s[7]++;for(;e<=287;)gI[2*e+1]=8,e++,s[8]++;for(RI(gI,287,s),e=0;e<dI;e++)bI[2*e+1]=5,bI[2*e]=TI(e,5);SI=new wI(gI,hI,257,cI,uI),EI=new wI(bI,pI,0,dI,uI),kI=new wI(new Array(0),fI,0,19,7)})(),BI=!0),e.l_desc=new CI(e.dyn_ltree,SI),e.d_desc=new CI(e.dyn_dtree,EI),e.bl_desc=new CI(e.bl_tree,kI),e.bi_buf=0,e.bi_valid=0,PI(e)},_tr_stored_block:HI,_tr_flush_block:(e,t,n,r)=>{let i,s,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<lI;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),OI(e,e.l_desc),OI(e,e.d_desc),a=(e=>{let t;for(FI(e,e.dyn_ltree,e.l_desc.max_code),FI(e,e.dyn_dtree,e.d_desc.max_code),OI(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*mI[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==t?HI(e,t,n,r):4===e.strategy||s===i?(II(e,2+(r?1:0),3),LI(e,gI,bI)):(II(e,4+(r?1:0),3),((e,t,n,r)=>{let i;for(II(e,t-257,5),II(e,n-1,5),II(e,r-4,4),i=0;i<r;i++)II(e,e.bl_tree[2*mI[i]+1],3);zI(e,e.dyn_ltree,t-1),zI(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),LI(e,e.dyn_ltree,e.dyn_dtree)),PI(e),r&&AI(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(yI[n]+lI+1)]++,e.dyn_dtree[2*_I(t)]++),e.last_lit===e.lit_bufsize-1),_tr_align:e=>{II(e,2,3),jI(e,256,gI),(e=>{16===e.bi_valid?(MI(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}};var WI=(e,t,n,r)=>{let i=65535&e,s=e>>>16&65535,a=0;for(;0!==n;){a=n>2e3?2e3:n,n-=a;do{i=i+t[r++]|0,s=s+i|0}while(--a);i%=65521,s%=65521}return i|s<<16};const XI=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var VI=(e,t,n,r)=>{const i=XI,s=r+n;e^=-1;for(let a=r;a<s;a++)e=e>>>8^i[255&(e^t[a])];return-1^e},GI={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},YI={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:qI,_tr_stored_block:ZI,_tr_flush_block:KI,_tr_tally:QI,_tr_align:JI}=$I,{Z_NO_FLUSH:ej,Z_PARTIAL_FLUSH:tj,Z_FULL_FLUSH:nj,Z_FINISH:rj,Z_BLOCK:ij,Z_OK:sj,Z_STREAM_END:aj,Z_STREAM_ERROR:oj,Z_DATA_ERROR:lj,Z_BUF_ERROR:cj,Z_DEFAULT_COMPRESSION:dj,Z_FILTERED:uj,Z_HUFFMAN_ONLY:hj,Z_RLE:pj,Z_FIXED:fj,Z_DEFAULT_STRATEGY:mj,Z_UNKNOWN:gj,Z_DEFLATED:bj}=YI,Uj=258,yj=262,xj=103,vj=113,wj=666,Sj=(e,t)=>(e.msg=GI[t],t),Ej=e=>(e<<1)-(e>4?9:0),kj=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let Cj=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const _j=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},Mj=(e,t)=>{KI(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,_j(e.strm)},Ij=(e,t)=>{e.pending_buf[e.pending++]=t},jj=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Tj=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=WI(e.adler,t,i,n):2===e.state.wrap&&(e.adler=VI(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},Rj=(e,t)=>{let n,r,i=e.max_chain_length,s=e.strstart,a=e.prev_length,o=e.nice_match;const l=e.strstart>e.w_size-yj?e.strstart-(e.w_size-yj):0,c=e.window,d=e.w_mask,u=e.prev,h=e.strstart+Uj;let p=c[s+a-1],f=c[s+a];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(n=t,c[n+a]===f&&c[n+a-1]===p&&c[n]===c[s]&&c[++n]===c[s+1]){s+=2,n++;do{}while(c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&s<h);if(r=Uj-(h-s),s=h-Uj,r>a){if(e.match_start=t,a=r,r>=o)break;p=c[s+a-1],f=c[s+a]}}}while((t=u[t&d])>l&&0!==--i);return a<=e.lookahead?a:e.lookahead},Pj=e=>{const t=e.w_size;let n,r,i,s,a;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-yj)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,r=e.hash_size,n=r;do{i=e.head[--n],e.head[n]=i>=t?i-t:0}while(--r);r=t,n=r;do{i=e.prev[--n],e.prev[n]=i>=t?i-t:0}while(--r);s+=t}if(0===e.strm.avail_in)break;if(r=Tj(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=r,e.lookahead+e.insert>=3)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=Cj(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=Cj(e,e.ins_h,e.window[a+3-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<yj&&0!==e.strm.avail_in)},Aj=(e,t)=>{let n,r;for(;;){if(e.lookahead<yj){if(Pj(e),e.lookahead<yj&&t===ej)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Cj(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-yj&&(e.match_length=Rj(e,n)),e.match_length>=3)if(r=QI(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Cj(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Cj(e,e.ins_h,e.window[e.strstart+1]);else r=QI(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Mj(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===rj?(Mj(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Mj(e,!1),0===e.strm.avail_out)?1:2},Nj=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<yj){if(Pj(e),e.lookahead<yj&&t===ej)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Cj(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-yj&&(e.match_length=Rj(e,n),e.match_length<=5&&(e.strategy===uj||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=QI(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=Cj(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(Mj(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=QI(e,0,e.window[e.strstart-1]),r&&Mj(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=QI(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===rj?(Mj(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Mj(e,!1),0===e.strm.avail_out)?1:2};function Dj(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const Lj=[new Dj(0,0,0,0,(e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Pj(e),0===e.lookahead&&t===ej)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;const r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,Mj(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-yj&&(Mj(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===rj?(Mj(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(Mj(e,!1),e.strm.avail_out),1)}),new Dj(4,4,8,4,Aj),new Dj(4,5,16,8,Aj),new Dj(4,6,32,32,Aj),new Dj(4,4,16,16,Nj),new Dj(8,16,32,32,Nj),new Dj(8,16,128,128,Nj),new Dj(8,32,128,256,Nj),new Dj(32,128,258,1024,Nj),new Dj(32,258,258,4096,Nj)];function Oj(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=bj,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),kj(this.dyn_ltree),kj(this.dyn_dtree),kj(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),kj(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),kj(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Fj=e=>{if(!e||!e.state)return Sj(e,oj);e.total_in=e.total_out=0,e.data_type=gj;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:vj,e.adler=2===t.wrap?0:1,t.last_flush=ej,qI(t),sj},zj=e=>{const t=Fj(e);var n;return t===sj&&((n=e.state).window_size=2*n.w_size,kj(n.head),n.max_lazy_match=Lj[n.level].max_lazy,n.good_match=Lj[n.level].good_length,n.nice_match=Lj[n.level].nice_length,n.max_chain_length=Lj[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},Bj=(e,t,n,r,i,s)=>{if(!e)return oj;let a=1;if(t===dj&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>9||n!==bj||r<8||r>15||t<0||t>9||s<0||s>fj)return Sj(e,oj);8===r&&(r=9);const o=new Oj;return e.state=o,o.strm=e,o.wrap=a,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=s,o.method=n,zj(e)};var Hj={deflateInit:(e,t)=>Bj(e,t,bj,15,8,mj),deflateInit2:Bj,deflateReset:zj,deflateResetKeep:Fj,deflateSetHeader:(e,t)=>e&&e.state?2!==e.state.wrap?oj:(e.state.gzhead=t,sj):oj,deflate:(e,t)=>{let n,r;if(!e||!e.state||t>ij||t<0)return e?Sj(e,oj):oj;const i=e.state;if(!e.output||!e.input&&0!==e.avail_in||i.status===wj&&t!==rj)return Sj(e,0===e.avail_out?cj:oj);i.strm=e;const s=i.last_flush;if(i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,Ij(i,31),Ij(i,139),Ij(i,8),i.gzhead?(Ij(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Ij(i,255&i.gzhead.time),Ij(i,i.gzhead.time>>8&255),Ij(i,i.gzhead.time>>16&255),Ij(i,i.gzhead.time>>24&255),Ij(i,9===i.level?2:i.strategy>=hj||i.level<2?4:0),Ij(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(Ij(i,255&i.gzhead.extra.length),Ij(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=VI(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(Ij(i,0),Ij(i,0),Ij(i,0),Ij(i,0),Ij(i,0),Ij(i,9===i.level?2:i.strategy>=hj||i.level<2?4:0),Ij(i,3),i.status=vj);else{let t=bj+(i.w_bits-8<<4)<<8,n=-1;n=i.strategy>=hj||i.level<2?0:i.level<6?1:6===i.level?2:3,t|=n<<6,0!==i.strstart&&(t|=32),t+=31-t%31,i.status=vj,jj(i,t),0!==i.strstart&&(jj(i,e.adler>>>16),jj(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>n&&(e.adler=VI(e.adler,i.pending_buf,i.pending-n,n)),_j(e),n=i.pending,i.pending!==i.pending_buf_size));)Ij(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(e.adler=VI(e.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=VI(e.adler,i.pending_buf,i.pending-n,n)),_j(e),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}r=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,Ij(i,r)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(e.adler=VI(e.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=VI(e.adler,i.pending_buf,i.pending-n,n)),_j(e),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}r=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,Ij(i,r)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(e.adler=VI(e.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.status=xj)}else i.status=xj;if(i.status===xj&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&_j(e),i.pending+2<=i.pending_buf_size&&(Ij(i,255&e.adler),Ij(i,e.adler>>8&255),e.adler=0,i.status=vj)):i.status=vj),0!==i.pending){if(_j(e),0===e.avail_out)return i.last_flush=-1,sj}else if(0===e.avail_in&&Ej(t)<=Ej(s)&&t!==rj)return Sj(e,cj);if(i.status===wj&&0!==e.avail_in)return Sj(e,cj);if(0!==e.avail_in||0!==i.lookahead||t!==ej&&i.status!==wj){let n=i.strategy===hj?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(Pj(e),0===e.lookahead)){if(t===ej)return 1;break}if(e.match_length=0,n=QI(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Mj(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===rj?(Mj(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Mj(e,!1),0===e.strm.avail_out)?1:2})(i,t):i.strategy===pj?((e,t)=>{let n,r,i,s;const a=e.window;for(;;){if(e.lookahead<=Uj){if(Pj(e),e.lookahead<=Uj&&t===ej)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,r=a[i],r===a[++i]&&r===a[++i]&&r===a[++i])){s=e.strstart+Uj;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<s);e.match_length=Uj-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=QI(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=QI(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Mj(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===rj?(Mj(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Mj(e,!1),0===e.strm.avail_out)?1:2})(i,t):Lj[i.level].func(i,t);if(3!==n&&4!==n||(i.status=wj),1===n||3===n)return 0===e.avail_out&&(i.last_flush=-1),sj;if(2===n&&(t===tj?JI(i):t!==ij&&(ZI(i,0,0,!1),t===nj&&(kj(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),_j(e),0===e.avail_out))return i.last_flush=-1,sj}return t!==rj?sj:i.wrap<=0?aj:(2===i.wrap?(Ij(i,255&e.adler),Ij(i,e.adler>>8&255),Ij(i,e.adler>>16&255),Ij(i,e.adler>>24&255),Ij(i,255&e.total_in),Ij(i,e.total_in>>8&255),Ij(i,e.total_in>>16&255),Ij(i,e.total_in>>24&255)):(jj(i,e.adler>>>16),jj(i,65535&e.adler)),_j(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?sj:aj)},deflateEnd:e=>{if(!e||!e.state)return oj;const t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&t!==xj&&t!==vj&&t!==wj?Sj(e,oj):(e.state=null,t===vj?Sj(e,lj):sj)},deflateSetDictionary:(e,t)=>{let n=t.length;if(!e||!e.state)return oj;const r=e.state,i=r.wrap;if(2===i||1===i&&42!==r.status||r.lookahead)return oj;if(1===i&&(e.adler=WI(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(kj(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const s=e.avail_in,a=e.next_in,o=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Pj(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=Cj(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,Pj(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=a,e.input=o,e.avail_in=s,r.wrap=i,sj},deflateInfo:"pako deflate (from Nodeca project)"};const $j=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Wj=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)$j(n,t)&&(e[t]=n[t])}}return e},Xj=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,s=e.length;r<s;r++){let t=e[r];n.set(t,i),i+=t.length}return n};let Vj=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Foe){Vj=!1}const Gj=new Uint8Array(256);for(let KA=0;KA<256;KA++)Gj[KA]=KA>=252?6:KA>=248?5:KA>=240?4:KA>=224?3:KA>=192?2:1;Gj[254]=Gj[254]=1;var Yj=e=>{let t,n,r,i,s,a=e.length,o=0;for(i=0;i<a;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<a&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(o),s=0,i=0;s<o;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<a&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},qj=(e,t)=>{let n,r;const i=t||e.length,s=new Array(2*i);for(r=0,n=0;n<i;){let t=e[n++];if(t<128){s[r++]=t;continue}let a=Gj[t];if(a>4)s[r++]=65533,n+=a-1;else{for(t&=2===a?31:3===a?15:7;a>1&&n<i;)t=t<<6|63&e[n++],a--;a>1?s[r++]=65533:t<65536?s[r++]=t:(t-=65536,s[r++]=55296|t>>10&1023,s[r++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Vj)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(s,r)},Zj=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+Gj[e[n]]>t?n:t};var Kj=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Qj=Object.prototype.toString,{Z_NO_FLUSH:Jj,Z_SYNC_FLUSH:eT,Z_FULL_FLUSH:tT,Z_FINISH:nT,Z_OK:rT,Z_STREAM_END:iT,Z_DEFAULT_COMPRESSION:sT,Z_DEFAULT_STRATEGY:aT,Z_DEFLATED:oT}=YI;function lT(e){this.options=Wj({level:sT,method:oT,chunkSize:16384,windowBits:15,memLevel:8,strategy:aT},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Kj,this.strm.avail_out=0;let n=Hj.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==rT)throw new Error(GI[n]);if(t.header&&Hj.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Yj(t.dictionary):"[object ArrayBuffer]"===Qj.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=Hj.deflateSetDictionary(this.strm,e),n!==rT)throw new Error(GI[n]);this._dict_set=!0}}lT.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?nT:Jj,"string"==typeof e?n.input=Yj(e):"[object ArrayBuffer]"===Qj.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===eT||s===tT)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=Hj.deflate(n,s),i===iT)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Hj.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===rT;if(0!==n.avail_out){if(s>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},lT.prototype.onData=function(e){this.chunks.push(e)},lT.prototype.onEnd=function(e){e===rT&&(this.result=Xj(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var cT=function(e,t){const n=new lT(t);if(n.push(e,!0),n.err)throw n.msg||GI[n.err];return n.result},dT={deflate:cT};var uT=function(e,t){let n,r,i,s,a,o,l,c,d,u,h,p,f,m,g,b,U,y,x,v,w,S,E,k;const C=e.state;n=e.next_in,E=e.input,r=n+(e.avail_in-5),i=e.next_out,k=e.output,s=i-(t-e.avail_out),a=i+(e.avail_out-257),o=C.dmax,l=C.wsize,c=C.whave,d=C.wnext,u=C.window,h=C.hold,p=C.bits,f=C.lencode,m=C.distcode,g=(1<<C.lenbits)-1,b=(1<<C.distbits)-1;e:do{p<15&&(h+=E[n++]<<p,p+=8,h+=E[n++]<<p,p+=8),U=f[h&g];t:for(;;){if(y=U>>>24,h>>>=y,p-=y,y=U>>>16&255,0===y)k[i++]=65535&U;else{if(!(16&y)){if(64&y){if(32&y){C.mode=12;break e}e.msg="invalid literal/length code",C.mode=30;break e}U=f[(65535&U)+(h&(1<<y)-1)];continue t}for(x=65535&U,y&=15,y&&(p<y&&(h+=E[n++]<<p,p+=8),x+=h&(1<<y)-1,h>>>=y,p-=y),p<15&&(h+=E[n++]<<p,p+=8,h+=E[n++]<<p,p+=8),U=m[h&b];;){if(y=U>>>24,h>>>=y,p-=y,y=U>>>16&255,16&y){if(v=65535&U,y&=15,p<y&&(h+=E[n++]<<p,p+=8,p<y&&(h+=E[n++]<<p,p+=8)),v+=h&(1<<y)-1,v>o){e.msg="invalid distance too far back",C.mode=30;break e}if(h>>>=y,p-=y,y=i-s,v>y){if(y=v-y,y>c&&C.sane){e.msg="invalid distance too far back",C.mode=30;break e}if(w=0,S=u,0===d){if(w+=l-y,y<x){x-=y;do{k[i++]=u[w++]}while(--y);w=i-v,S=k}}else if(d<y){if(w+=l+d-y,y-=d,y<x){x-=y;do{k[i++]=u[w++]}while(--y);if(w=0,d<x){y=d,x-=y;do{k[i++]=u[w++]}while(--y);w=i-v,S=k}}}else if(w+=d-y,y<x){x-=y;do{k[i++]=u[w++]}while(--y);w=i-v,S=k}for(;x>2;)k[i++]=S[w++],k[i++]=S[w++],k[i++]=S[w++],x-=3;x&&(k[i++]=S[w++],x>1&&(k[i++]=S[w++]))}else{w=i-v;do{k[i++]=k[w++],k[i++]=k[w++],k[i++]=k[w++],x-=3}while(x>2);x&&(k[i++]=k[w++],x>1&&(k[i++]=k[w++]))}break}if(64&y){e.msg="invalid distance code",C.mode=30;break e}U=m[(65535&U)+(h&(1<<y)-1)]}}break}}while(n<r&&i<a);x=p>>3,n-=x,p-=x<<3,h&=(1<<p)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<a?a-i+257:257-(i-a),C.hold=h,C.bits=p};const hT=15,pT=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),fT=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),mT=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),gT=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var bT=(e,t,n,r,i,s,a,o)=>{const l=o.bits;let c,d,u,h,p,f,m=0,g=0,b=0,U=0,y=0,x=0,v=0,w=0,S=0,E=0,k=null,C=0;const _=new Uint16Array(16),M=new Uint16Array(16);let I,j,T,R=null,P=0;for(m=0;m<=hT;m++)_[m]=0;for(g=0;g<r;g++)_[t[n+g]]++;for(y=l,U=hT;U>=1&&0===_[U];U--);if(y>U&&(y=U),0===U)return i[s++]=20971520,i[s++]=20971520,o.bits=1,0;for(b=1;b<U&&0===_[b];b++);for(y<b&&(y=b),w=1,m=1;m<=hT;m++)if(w<<=1,w-=_[m],w<0)return-1;if(w>0&&(0===e||1!==U))return-1;for(M[1]=0,m=1;m<hT;m++)M[m+1]=M[m]+_[m];for(g=0;g<r;g++)0!==t[n+g]&&(a[M[t[n+g]]++]=g);if(0===e?(k=R=a,f=19):1===e?(k=pT,C-=257,R=fT,P-=257,f=256):(k=mT,R=gT,f=-1),E=0,g=0,m=b,p=s,x=y,v=0,u=-1,S=1<<y,h=S-1,1===e&&S>852||2===e&&S>592)return 1;for(;;){I=m-v,a[g]<f?(j=0,T=a[g]):a[g]>f?(j=R[P+a[g]],T=k[C+a[g]]):(j=96,T=0),c=1<<m-v,d=1<<x,b=d;do{d-=c,i[p+(E>>v)+d]=I<<24|j<<16|T}while(0!==d);for(c=1<<m-1;E&c;)c>>=1;if(0!==c?(E&=c-1,E+=c):E=0,g++,0===--_[m]){if(m===U)break;m=t[n+a[g]]}if(m>y&&(E&h)!==u){for(0===v&&(v=y),p+=b,x=m-v,w=1<<x;x+v<U&&(w-=_[x+v],!(w<=0));)x++,w<<=1;if(S+=1<<x,1===e&&S>852||2===e&&S>592)return 1;u=E&h,i[u]=y<<24|x<<16|p-s}}return 0!==E&&(i[p+E]=m-v<<24|64<<16),o.bits=y,0};const{Z_FINISH:UT,Z_BLOCK:yT,Z_TREES:xT,Z_OK:vT,Z_STREAM_END:wT,Z_NEED_DICT:ST,Z_STREAM_ERROR:ET,Z_DATA_ERROR:kT,Z_MEM_ERROR:CT,Z_BUF_ERROR:_T,Z_DEFLATED:MT}=YI,IT=12,jT=30,TT=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function RT(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const PT=e=>{if(!e||!e.state)return ET;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,vT},AT=e=>{if(!e||!e.state)return ET;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,PT(e)},NT=(e,t)=>{let n;if(!e||!e.state)return ET;const r=e.state;return t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?ET:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,AT(e))},DT=(e,t)=>{if(!e)return ET;const n=new RT;e.state=n,n.window=null;const r=NT(e,t);return r!==vT&&(e.state=null),r};let LT,OT,FT=!0;const zT=e=>{if(FT){LT=new Int32Array(512),OT=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(bT(1,e.lens,0,288,LT,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;bT(2,e.lens,0,32,OT,0,e.work,{bits:5}),FT=!1}e.lencode=LT,e.lenbits=9,e.distcode=OT,e.distbits=5},BT=(e,t,n,r)=>{let i;const s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(t.subarray(n-r,n-r+i),s.wnext),(r-=i)?(s.window.set(t.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0};var HT={inflateReset:AT,inflateReset2:NT,inflateResetKeep:PT,inflateInit:e=>DT(e,15),inflateInit2:DT,inflate:(e,t)=>{let n,r,i,s,a,o,l,c,d,u,h,p,f,m,g,b,U,y,x,v,w,S,E=0;const k=new Uint8Array(4);let C,_;const M=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return ET;n=e.state,n.mode===IT&&(n.mode=13),a=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,o=e.avail_in,c=n.hold,d=n.bits,u=o,h=l,S=vT;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;d<16;){if(0===o)break e;o--,c+=r[s++]<<d,d+=8}if(2&n.wrap&&35615===c){n.check=0,k[0]=255&c,k[1]=c>>>8&255,n.check=VI(n.check,k,2,0),c=0,d=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=jT;break}if((15&c)!==MT){e.msg="unknown compression method",n.mode=jT;break}if(c>>>=4,d-=4,w=8+(15&c),0===n.wbits)n.wbits=w;else if(w>n.wbits){e.msg="invalid window size",n.mode=jT;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=512&c?10:IT,c=0,d=0;break;case 2:for(;d<16;){if(0===o)break e;o--,c+=r[s++]<<d,d+=8}if(n.flags=c,(255&n.flags)!==MT){e.msg="unknown compression method",n.mode=jT;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=jT;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(k[0]=255&c,k[1]=c>>>8&255,n.check=VI(n.check,k,2,0)),c=0,d=0,n.mode=3;case 3:for(;d<32;){if(0===o)break e;o--,c+=r[s++]<<d,d+=8}n.head&&(n.head.time=c),512&n.flags&&(k[0]=255&c,k[1]=c>>>8&255,k[2]=c>>>16&255,k[3]=c>>>24&255,n.check=VI(n.check,k,4,0)),c=0,d=0,n.mode=4;case 4:for(;d<16;){if(0===o)break e;o--,c+=r[s++]<<d,d+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(k[0]=255&c,k[1]=c>>>8&255,n.check=VI(n.check,k,2,0)),c=0,d=0,n.mode=5;case 5:if(1024&n.flags){for(;d<16;){if(0===o)break e;o--,c+=r[s++]<<d,d+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(k[0]=255&c,k[1]=c>>>8&255,n.check=VI(n.check,k,2,0)),c=0,d=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(p=n.length,p>o&&(p=o),p&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+p),w)),512&n.flags&&(n.check=VI(n.check,r,p,s)),o-=p,s+=p,n.length-=p),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===o)break e;p=0;do{w=r[s+p++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w))}while(w&&p<o);if(512&n.flags&&(n.check=VI(n.check,r,p,s)),o-=p,s+=p,w)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===o)break e;p=0;do{w=r[s+p++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w))}while(w&&p<o);if(512&n.flags&&(n.check=VI(n.check,r,p,s)),o-=p,s+=p,w)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;d<16;){if(0===o)break e;o--,c+=r[s++]<<d,d+=8}if(c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=jT;break}c=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=IT;break;case 10:for(;d<32;){if(0===o)break e;o--,c+=r[s++]<<d,d+=8}e.adler=n.check=TT(c),c=0,d=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=a,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=c,n.bits=d,ST;e.adler=n.check=1,n.mode=IT;case IT:if(t===yT||t===xT)break e;case 13:if(n.last){c>>>=7&d,d-=7&d,n.mode=27;break}for(;d<3;){if(0===o)break e;o--,c+=r[s++]<<d,d+=8}switch(n.last=1&c,c>>>=1,d-=1,3&c){case 0:n.mode=14;break;case 1:if(zT(n),n.mode=20,t===xT){c>>>=2,d-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=jT}c>>>=2,d-=2;break;case 14:for(c>>>=7&d,d-=7&d;d<32;){if(0===o)break e;o--,c+=r[s++]<<d,d+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=jT;break}if(n.length=65535&c,c=0,d=0,n.mode=15,t===xT)break e;case 15:n.mode=16;case 16:if(p=n.length,p){if(p>o&&(p=o),p>l&&(p=l),0===p)break e;i.set(r.subarray(s,s+p),a),o-=p,s+=p,l-=p,a+=p,n.length-=p;break}n.mode=IT;break;case 17:for(;d<14;){if(0===o)break e;o--,c+=r[s++]<<d,d+=8}if(n.nlen=257+(31&c),c>>>=5,d-=5,n.ndist=1+(31&c),c>>>=5,d-=5,n.ncode=4+(15&c),c>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=jT;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;d<3;){if(0===o)break e;o--,c+=r[s++]<<d,d+=8}n.lens[M[n.have++]]=7&c,c>>>=3,d-=3}for(;n.have<19;)n.lens[M[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C={bits:n.lenbits},S=bT(0,n.lens,0,19,n.lencode,0,n.work,C),n.lenbits=C.bits,S){e.msg="invalid code lengths set",n.mode=jT;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;E=n.lencode[c&(1<<n.lenbits)-1],g=E>>>24,b=E>>>16&255,U=65535&E,!(g<=d);){if(0===o)break e;o--,c+=r[s++]<<d,d+=8}if(U<16)c>>>=g,d-=g,n.lens[n.have++]=U;else{if(16===U){for(_=g+2;d<_;){if(0===o)break e;o--,c+=r[s++]<<d,d+=8}if(c>>>=g,d-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=jT;break}w=n.lens[n.have-1],p=3+(3&c),c>>>=2,d-=2}else if(17===U){for(_=g+3;d<_;){if(0===o)break e;o--,c+=r[s++]<<d,d+=8}c>>>=g,d-=g,w=0,p=3+(7&c),c>>>=3,d-=3}else{for(_=g+7;d<_;){if(0===o)break e;o--,c+=r[s++]<<d,d+=8}c>>>=g,d-=g,w=0,p=11+(127&c),c>>>=7,d-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=jT;break}for(;p--;)n.lens[n.have++]=w}}if(n.mode===jT)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=jT;break}if(n.lenbits=9,C={bits:n.lenbits},S=bT(1,n.lens,0,n.nlen,n.lencode,0,n.work,C),n.lenbits=C.bits,S){e.msg="invalid literal/lengths set",n.mode=jT;break}if(n.distbits=6,n.distcode=n.distdyn,C={bits:n.distbits},S=bT(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,C),n.distbits=C.bits,S){e.msg="invalid distances set",n.mode=jT;break}if(n.mode=20,t===xT)break e;case 20:n.mode=21;case 21:if(o>=6&&l>=258){e.next_out=a,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=c,n.bits=d,uT(e,h),a=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,o=e.avail_in,c=n.hold,d=n.bits,n.mode===IT&&(n.back=-1);break}for(n.back=0;E=n.lencode[c&(1<<n.lenbits)-1],g=E>>>24,b=E>>>16&255,U=65535&E,!(g<=d);){if(0===o)break e;o--,c+=r[s++]<<d,d+=8}if(b&&!(240&b)){for(y=g,x=b,v=U;E=n.lencode[v+((c&(1<<y+x)-1)>>y)],g=E>>>24,b=E>>>16&255,U=65535&E,!(y+g<=d);){if(0===o)break e;o--,c+=r[s++]<<d,d+=8}c>>>=y,d-=y,n.back+=y}if(c>>>=g,d-=g,n.back+=g,n.length=U,0===b){n.mode=26;break}if(32&b){n.back=-1,n.mode=IT;break}if(64&b){e.msg="invalid literal/length code",n.mode=jT;break}n.extra=15&b,n.mode=22;case 22:if(n.extra){for(_=n.extra;d<_;){if(0===o)break e;o--,c+=r[s++]<<d,d+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;E=n.distcode[c&(1<<n.distbits)-1],g=E>>>24,b=E>>>16&255,U=65535&E,!(g<=d);){if(0===o)break e;o--,c+=r[s++]<<d,d+=8}if(!(240&b)){for(y=g,x=b,v=U;E=n.distcode[v+((c&(1<<y+x)-1)>>y)],g=E>>>24,b=E>>>16&255,U=65535&E,!(y+g<=d);){if(0===o)break e;o--,c+=r[s++]<<d,d+=8}c>>>=y,d-=y,n.back+=y}if(c>>>=g,d-=g,n.back+=g,64&b){e.msg="invalid distance code",n.mode=jT;break}n.offset=U,n.extra=15&b,n.mode=24;case 24:if(n.extra){for(_=n.extra;d<_;){if(0===o)break e;o--,c+=r[s++]<<d,d+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=jT;break}n.mode=25;case 25:if(0===l)break e;if(p=h-l,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=jT;break}p>n.wnext?(p-=n.wnext,f=n.wsize-p):f=n.wnext-p,p>n.length&&(p=n.length),m=n.window}else m=i,f=a-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do{i[a++]=m[f++]}while(--p);0===n.length&&(n.mode=21);break;case 26:if(0===l)break e;i[a++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;d<32;){if(0===o)break e;o--,c|=r[s++]<<d,d+=8}if(h-=l,e.total_out+=h,n.total+=h,h&&(e.adler=n.check=n.flags?VI(n.check,i,h,a-h):WI(n.check,i,h,a-h)),h=l,(n.flags?c:TT(c))!==n.check){e.msg="incorrect data check",n.mode=jT;break}c=0,d=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;d<32;){if(0===o)break e;o--,c+=r[s++]<<d,d+=8}if(c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=jT;break}c=0,d=0}n.mode=29;case 29:S=wT;break e;case jT:S=kT;break e;case 31:return CT;default:return ET}return e.next_out=a,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=c,n.bits=d,(n.wsize||h!==e.avail_out&&n.mode<jT&&(n.mode<27||t!==UT))&&BT(e,e.output,e.next_out,h-e.avail_out),u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,n.total+=h,n.wrap&&h&&(e.adler=n.check=n.flags?VI(n.check,i,h,e.next_out-h):WI(n.check,i,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===IT?128:0)+(20===n.mode||15===n.mode?256:0),(0===u&&0===h||t===UT)&&S===vT&&(S=_T),S},inflateEnd:e=>{if(!e||!e.state)return ET;let t=e.state;return t.window&&(t.window=null),e.state=null,vT},inflateGetHeader:(e,t)=>{if(!e||!e.state)return ET;const n=e.state;return 2&n.wrap?(n.head=t,t.done=!1,vT):ET},inflateSetDictionary:(e,t)=>{const n=t.length;let r,i,s;return e&&e.state?(r=e.state,0!==r.wrap&&11!==r.mode?ET:11===r.mode&&(i=1,i=WI(i,t,n,0),i!==r.check)?kT:(s=BT(e,t,n,n),s?(r.mode=31,CT):(r.havedict=1,vT))):ET},inflateInfo:"pako inflate (from Nodeca project)"};var $T=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const WT=Object.prototype.toString,{Z_NO_FLUSH:XT,Z_FINISH:VT,Z_OK:GT,Z_STREAM_END:YT,Z_NEED_DICT:qT,Z_STREAM_ERROR:ZT,Z_DATA_ERROR:KT,Z_MEM_ERROR:QT}=YI;function JT(e){this.options=Wj({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Kj,this.strm.avail_out=0;let n=HT.inflateInit2(this.strm,t.windowBits);if(n!==GT)throw new Error(GI[n]);if(this.header=new $T,HT.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Yj(t.dictionary):"[object ArrayBuffer]"===WT.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=HT.inflateSetDictionary(this.strm,t.dictionary),n!==GT)))throw new Error(GI[n])}JT.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(a=t===~~t?t:!0===t?VT:XT,"[object ArrayBuffer]"===WT.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=HT.inflate(n,a),s===qT&&i&&(s=HT.inflateSetDictionary(n,i),s===GT?s=HT.inflate(n,a):s===KT&&(s=qT));n.avail_in>0&&s===YT&&n.state.wrap>0&&0!==e[n.next_in];)HT.inflateReset(n),s=HT.inflate(n,a);switch(s){case ZT:case KT:case qT:case QT:return this.onEnd(s),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(0===n.avail_out||s===YT))if("string"===this.options.to){let e=Zj(n.output,n.next_out),t=n.next_out-e,i=qj(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(s!==GT||0!==o){if(s===YT)return s=HT.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},JT.prototype.onData=function(e){this.chunks.push(e)},JT.prototype.onEnd=function(e){e===GT&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Xj(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var eR=function(e,t){const n=new JT(t);if(n.push(e),n.err)throw n.msg||GI[n.err];return n.result},tR={inflate:eR};const{deflate:nR}=dT,{inflate:rR}=tR;var iR=nR,sR=rR;const aR={white:"#ffffff",black:"#000000",gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]};let oR=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_","");var lR,cR;var dR=function(){if(cR)return lR;cR=1;var e="Expected a function",t=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt,a="object"==typeof xt&&xt&&xt.Object===Object&&xt,o="object"==typeof self&&self&&self.Object===Object&&self,l=a||o||Function("return this")(),c=Object.prototype.toString,d=Math.max,u=Math.min,h=function(){return l.Date.now()};function p(t,n,r){var i,s,a,o,l,c,p=0,g=!1,b=!1,U=!0;if("function"!=typeof t)throw new TypeError(e);function y(e){var n=i,r=s;return i=s=void 0,p=e,o=t.apply(r,n)}function x(e){var t=e-c;return void 0===c||t>=n||t<0||b&&e-p>=a}function v(){var e=h();if(x(e))return w(e);l=setTimeout(v,function(e){var t=n-(e-c);return b?u(t,a-(e-p)):t}(e))}function w(e){return l=void 0,U&&i?y(e):(i=s=void 0,o)}function S(){var e=h(),t=x(e);if(i=arguments,s=this,c=e,t){if(void 0===l)return function(e){return p=e,l=setTimeout(v,n),g?y(e):o}(c);if(b)return l=setTimeout(v,n),y(c)}return void 0===l&&(l=setTimeout(v,n)),o}return n=m(n)||0,f(r)&&(g=!!r.leading,a=(b="maxWait"in r)?d(m(r.maxWait)||0,n):a,U="trailing"in r?!!r.trailing:U),S.cancel=function(){void 0!==l&&clearTimeout(l),p=0,i=c=s=l=void 0},S.flush=function(){return void 0===l?o:w(h())},S}function f(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==c.call(e)}(e))return NaN;if(f(e)){var a="function"==typeof e.valueOf?e.valueOf():e;e=f(a)?a+"":a}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(t,"");var o=r.test(e);return o||i.test(e)?s(e.slice(2),o?2:8):n.test(e)?NaN:+e}return lR=function(t,n,r){var i=!0,s=!0;if("function"!=typeof t)throw new TypeError(e);return f(r)&&(i="leading"in r?!!r.leading:i,s="trailing"in r?!!r.trailing:s),p(t,n,{leading:i,maxWait:n,trailing:s})},lR}();const uR=yt(dR);var hR,pR={exports:{}};var fR=(hR||(hR=1,pR.exports=function(){var e=function(){this._listeners={}};e.prototype.addEventListener=function(e,t){this._listeners[e]=this._listeners[e]||[],this._listeners[e].indexOf(t)<0&&this._listeners[e].push(t)},e.prototype.removeEventListener=function(e,t){if(this._listeners[e]){var n=this._listeners[e].indexOf(t);n>=0&&this._listeners[e].splice(n,1)}},e.prototype.dispatchEvent=function(e){if(this._listeners[e.type]&&this._listeners[e.type].length)for(var t=this._listeners[e.type].slice(),n=0,r=t.length;n<r;++n)t[n].call(this,e)};var t=function(e){return"function"==typeof e.constructor&&"GeneratorFunction"===e.constructor.name},n=function(e){return{next:function(){var t=e();return t?{value:t}:{done:!0}}}},r=function(e){var t=!1;return{next:function(){return t?{done:!0}:(t=!0,{value:e})}}},i=function(e,i){var s=typeof e;if("object"===s){if("function"==typeof e.next)return e;if("function"==typeof e.then)return r(e)}return"function"===s?t(e)?e():n(e):r(i.resolve(e))},s=function(e,t,n){this.target=e,this.type=t,this.data=n},a=function(t,n,r){if(e.call(this),"number"!=typeof n||Math.floor(n)!==n||n<1)throw new Error("Invalid concurrency");this._concurrency=n,this._options=r||{},this._options.promise=this._options.promise||Promise,this._iterator=i(t,this._options.promise),this._done=!1,this._size=0,this._promise=null,this._callbacks=null};return a.prototype=new e,a.prototype.constructor=a,a.prototype.concurrency=function(e){return void 0!==e&&(this._concurrency=e,this.active()&&this._proceed()),this._concurrency},a.prototype.size=function(){return this._size},a.prototype.active=function(){return!!this._promise},a.prototype.promise=function(){return this._promise},a.prototype.start=function(){var e=this,t=this._options.promise;return this._promise=new t(function(t,n){e._callbacks={reject:n,resolve:t},e._proceed()}),this._promise},a.prototype._fireEvent=function(e,t){this.dispatchEvent(new s(this,e,t))},a.prototype._settle=function(e){e?this._callbacks.reject(e):this._callbacks.resolve(),this._promise=null,this._callbacks=null},a.prototype._onPooledPromiseFulfilled=function(e,t){this._size--,this.active()&&(this._fireEvent("fulfilled",{promise:e,result:t}),this._proceed())},a.prototype._onPooledPromiseRejected=function(e,t){this._size--,this.active()&&(this._fireEvent("rejected",{promise:e,error:t}),this._settle(t||new Error("Unknown error")))},a.prototype._trackPromise=function(e){var t=this;e.then(function(n){t._onPooledPromiseFulfilled(e,n)},function(n){t._onPooledPromiseRejected(e,n)}).catch(function(e){t._settle(new Error("Promise processing failed: "+e))})},a.prototype._proceed=function(){if(!this._done){for(var e={done:!1};this._size<this._concurrency&&!(e=this._iterator.next()).done;)this._size++,this._trackPromise(e.value);this._done=null===e||!!e.done}this._done&&0===this._size&&this._settle()},a.PromisePoolEvent=s,a.PromisePool=a,a}()),pR.exports);const mR=yt(fR);function gR(e,t,n){if(e&&e.length){const[r,i]=t,s=Math.PI/180*n,a=Math.cos(s),o=Math.sin(s);for(const t of e){const[e,n]=t;t[0]=(e-r)*a-(n-i)*o+r,t[1]=(e-r)*o+(n-i)*a+i}}}function bR(e,t){return e[0]===t[0]&&e[1]===t[1]}function UR(e,t,n,r=1){const i=n,s=Math.max(t,.1),a=e[0]&&e[0][0]&&"number"==typeof e[0][0]?[e]:e,o=[0,0];if(i)for(const c of a)gR(c,o,i);const l=function(e,t,n){const r=[];for(const c of e){const e=[...c];bR(e[0],e[e.length-1])||e.push([e[0][0],e[0][1]]),e.length>2&&r.push(e)}const i=[];t=Math.max(t,.1);const s=[];for(const c of r)for(let e=0;e<c.length-1;e++){const t=c[e],n=c[e+1];if(t[1]!==n[1]){const e=Math.min(t[1],n[1]);s.push({ymin:e,ymax:Math.max(t[1],n[1]),x:e===t[1]?t[0]:n[0],islope:(n[0]-t[0])/(n[1]-t[1])})}}if(s.sort((e,t)=>e.ymin<t.ymin?-1:e.ymin>t.ymin?1:e.x<t.x?-1:e.x>t.x?1:e.ymax===t.ymax?0:(e.ymax-t.ymax)/Math.abs(e.ymax-t.ymax)),!s.length)return i;let a=[],o=s[0].ymin,l=0;for(;a.length||s.length;){if(s.length){let e=-1;for(let t=0;t<s.length&&!(s[t].ymin>o);t++)e=t;s.splice(0,e+1).forEach(e=>{a.push({s:o,edge:e})})}if(a=a.filter(e=>!(e.edge.ymax<=o)),a.sort((e,t)=>e.edge.x===t.edge.x?0:(e.edge.x-t.edge.x)/Math.abs(e.edge.x-t.edge.x)),(1!==n||l%t===0)&&a.length>1)for(let e=0;e<a.length;e+=2){const t=e+1;if(t>=a.length)break;const n=a[e].edge,r=a[t].edge;i.push([[Math.round(n.x),o],[Math.round(r.x),o]])}o+=n,a.forEach(e=>{e.edge.x=e.edge.x+n*e.edge.islope}),l++}return i}(a,s,r);if(i){for(const e of a)gR(e,o,-i);!function(e,t,n){const r=[];e.forEach(e=>r.push(...e)),gR(r,t,n)}(l,o,-i)}return l}function yR(e,t){var n;const r=t.hachureAngle+90;let i=t.hachureGap;i<0&&(i=4*t.strokeWidth),i=Math.max(i,.1);let s=1;return t.roughness>=1&&((null===(n=t.randomizer)||void 0===n?void 0:n.next())||Math.random())>.7&&(s=i),UR(e,i,r,s||1)}class xR{constructor(e){this.helper=e}fillPolygons(e,t){return this._fillPolygons(e,t)}_fillPolygons(e,t){const n=yR(e,t);return{type:"fillSketch",ops:this.renderLines(n,t)}}renderLines(e,t){const n=[];for(const r of e)n.push(...this.helper.doubleLineOps(r[0][0],r[0][1],r[1][0],r[1][1],t));return n}}function vR(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class wR extends xR{fillPolygons(e,t){let n=t.hachureGap;n<0&&(n=4*t.strokeWidth),n=Math.max(n,.1);const r=yR(e,Object.assign({},t,{hachureGap:n})),i=Math.PI/180*t.hachureAngle,s=[],a=.5*n*Math.cos(i),o=.5*n*Math.sin(i);for(const[l,c]of r)vR([l,c])&&s.push([[l[0]-a,l[1]+o],[...c]],[[l[0]+a,l[1]-o],[...c]]);return{type:"fillSketch",ops:this.renderLines(s,t)}}}class SR extends xR{fillPolygons(e,t){const n=this._fillPolygons(e,t),r=Object.assign({},t,{hachureAngle:t.hachureAngle+90}),i=this._fillPolygons(e,r);return n.ops=n.ops.concat(i.ops),n}}class ER{constructor(e){this.helper=e}fillPolygons(e,t){const n=yR(e,t=Object.assign({},t,{hachureAngle:0}));return this.dotsOnLines(n,t)}dotsOnLines(e,t){const n=[];let r=t.hachureGap;r<0&&(r=4*t.strokeWidth),r=Math.max(r,.1);let i=t.fillWeight;i<0&&(i=t.strokeWidth/2);const s=r/4;for(const a of e){const e=vR(a),o=e/r,l=Math.ceil(o)-1,c=e-l*r,d=(a[0][0]+a[1][0])/2-r/4,u=Math.min(a[0][1],a[1][1]);for(let a=0;a<l;a++){const e=u+c+a*r,o=d-s+2*Math.random()*s,l=e-s+2*Math.random()*s,h=this.helper.ellipse(o,l,i,i,t);n.push(...h.ops)}}return{type:"fillSketch",ops:n}}}class kR{constructor(e){this.helper=e}fillPolygons(e,t){const n=yR(e,t);return{type:"fillSketch",ops:this.dashedLine(n,t)}}dashedLine(e,t){const n=t.dashOffset<0?t.hachureGap<0?4*t.strokeWidth:t.hachureGap:t.dashOffset,r=t.dashGap<0?t.hachureGap<0?4*t.strokeWidth:t.hachureGap:t.dashGap,i=[];return e.forEach(e=>{const s=vR(e),a=Math.floor(s/(n+r)),o=(s+r-a*(n+r))/2;let l=e[0],c=e[1];l[0]>c[0]&&(l=e[1],c=e[0]);const d=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let u=0;u<a;u++){const e=u*(n+r),s=e+n,a=[l[0]+e*Math.cos(d)+o*Math.cos(d),l[1]+e*Math.sin(d)+o*Math.sin(d)],c=[l[0]+s*Math.cos(d)+o*Math.cos(d),l[1]+s*Math.sin(d)+o*Math.sin(d)];i.push(...this.helper.doubleLineOps(a[0],a[1],c[0],c[1],t))}}),i}}class CR{constructor(e){this.helper=e}fillPolygons(e,t){const n=t.hachureGap<0?4*t.strokeWidth:t.hachureGap,r=t.zigzagOffset<0?n:t.zigzagOffset,i=yR(e,t=Object.assign({},t,{hachureGap:n+r}));return{type:"fillSketch",ops:this.zigzagLines(i,r,t)}}zigzagLines(e,t,n){const r=[];return e.forEach(e=>{const i=vR(e),s=Math.round(i/(2*t));let a=e[0],o=e[1];a[0]>o[0]&&(a=e[1],o=e[0]);const l=Math.atan((o[1]-a[1])/(o[0]-a[0]));for(let c=0;c<s;c++){const e=2*c*t,i=2*(c+1)*t,s=Math.sqrt(2*Math.pow(t,2)),o=[a[0]+e*Math.cos(l),a[1]+e*Math.sin(l)],d=[a[0]+i*Math.cos(l),a[1]+i*Math.sin(l)],u=[o[0]+s*Math.cos(l+Math.PI/4),o[1]+s*Math.sin(l+Math.PI/4)];r.push(...this.helper.doubleLineOps(o[0],o[1],u[0],u[1],n),...this.helper.doubleLineOps(u[0],u[1],d[0],d[1],n))}}),r}}const _R={};class MR{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const IR={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function jR(e,t){return e.type===t}function TR(e){const t=[],n=function(e){const t=new Array;for(;""!==e;)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:0,text:RegExp.$1},e=e.substr(RegExp.$1.length);else{if(!e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];t[t.length]={type:1,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length)}return t[t.length]={type:2,text:""},t}(e);let r="BOD",i=0,s=n[i];for(;!jR(s,2);){let a=0;const o=[];if("BOD"===r){if("M"!==s.text&&"m"!==s.text)return TR("M0,0"+e);i++,a=IR[s.text],r=s.text}else jR(s,1)?a=IR[r]:(i++,a=IR[s.text],r=s.text);if(!(i+a<n.length))throw new Error("Path data ended short");for(let e=i;e<i+a;e++){const t=n[e];if(!jR(t,1))throw new Error("Param not a number: "+r+","+t.text);o[o.length]=+t.text}if("number"!=typeof IR[r])throw new Error("Bad segment: "+r);{const e={key:r,data:o};t.push(e),i+=a,s=n[i],"M"===r&&(r="L"),"m"===r&&(r="l")}}return t}function RR(e){let t=0,n=0,r=0,i=0;const s=[];for(const{key:a,data:o}of e)switch(a){case"M":s.push({key:"M",data:[...o]}),[t,n]=o,[r,i]=o;break;case"m":t+=o[0],n+=o[1],s.push({key:"M",data:[t,n]}),r=t,i=n;break;case"L":s.push({key:"L",data:[...o]}),[t,n]=o;break;case"l":t+=o[0],n+=o[1],s.push({key:"L",data:[t,n]});break;case"C":s.push({key:"C",data:[...o]}),t=o[4],n=o[5];break;case"c":{const e=o.map((e,r)=>r%2?e+n:e+t);s.push({key:"C",data:e}),t=e[4],n=e[5];break}case"Q":s.push({key:"Q",data:[...o]}),t=o[2],n=o[3];break;case"q":{const e=o.map((e,r)=>r%2?e+n:e+t);s.push({key:"Q",data:e}),t=e[2],n=e[3];break}case"A":s.push({key:"A",data:[...o]}),t=o[5],n=o[6];break;case"a":t+=o[5],n+=o[6],s.push({key:"A",data:[o[0],o[1],o[2],o[3],o[4],t,n]});break;case"H":s.push({key:"H",data:[...o]}),t=o[0];break;case"h":t+=o[0],s.push({key:"H",data:[t]});break;case"V":s.push({key:"V",data:[...o]}),n=o[0];break;case"v":n+=o[0],s.push({key:"V",data:[n]});break;case"S":s.push({key:"S",data:[...o]}),t=o[2],n=o[3];break;case"s":{const e=o.map((e,r)=>r%2?e+n:e+t);s.push({key:"S",data:e}),t=e[2],n=e[3];break}case"T":s.push({key:"T",data:[...o]}),t=o[0],n=o[1];break;case"t":t+=o[0],n+=o[1],s.push({key:"T",data:[t,n]});break;case"Z":case"z":s.push({key:"Z",data:[]}),t=r,n=i}return s}function PR(e){const t=[];let n="",r=0,i=0,s=0,a=0,o=0,l=0;for(const{key:c,data:d}of e){switch(c){case"M":t.push({key:"M",data:[...d]}),[r,i]=d,[s,a]=d;break;case"C":t.push({key:"C",data:[...d]}),r=d[4],i=d[5],o=d[2],l=d[3];break;case"L":t.push({key:"L",data:[...d]}),[r,i]=d;break;case"H":r=d[0],t.push({key:"L",data:[r,i]});break;case"V":i=d[0],t.push({key:"L",data:[r,i]});break;case"S":{let e=0,s=0;"C"===n||"S"===n?(e=r+(r-o),s=i+(i-l)):(e=r,s=i),t.push({key:"C",data:[e,s,...d]}),o=d[0],l=d[1],r=d[2],i=d[3];break}case"T":{const[e,s]=d;let a=0,c=0;"Q"===n||"T"===n?(a=r+(r-o),c=i+(i-l)):(a=r,c=i);const u=r+2*(a-r)/3,h=i+2*(c-i)/3,p=e+2*(a-e)/3,f=s+2*(c-s)/3;t.push({key:"C",data:[u,h,p,f,e,s]}),o=a,l=c,r=e,i=s;break}case"Q":{const[e,n,s,a]=d,c=r+2*(e-r)/3,u=i+2*(n-i)/3,h=s+2*(e-s)/3,p=a+2*(n-a)/3;t.push({key:"C",data:[c,u,h,p,s,a]}),o=e,l=n,r=s,i=a;break}case"A":{const e=Math.abs(d[0]),n=Math.abs(d[1]),s=d[2],a=d[3],o=d[4],l=d[5],c=d[6];if(0===e||0===n)t.push({key:"C",data:[r,i,l,c,l,c]}),r=l,i=c;else if(r!==l||i!==c){NR(r,i,l,c,e,n,s,a,o).forEach(function(e){t.push({key:"C",data:e})}),r=l,i=c}break}case"Z":t.push({key:"Z",data:[]}),r=s,i=a}n=c}return t}function AR(e,t,n){return[e*Math.cos(n)-t*Math.sin(n),e*Math.sin(n)+t*Math.cos(n)]}function NR(e,t,n,r,i,s,a,o,l,c){const d=(u=a,Math.PI*u/180);var u;let h=[],p=0,f=0,m=0,g=0;if(c)[p,f,m,g]=c;else{[e,t]=AR(e,t,-d),[n,r]=AR(n,r,-d);const a=(e-n)/2,c=(t-r)/2;let u=a*a/(i*i)+c*c/(s*s);u>1&&(u=Math.sqrt(u),i*=u,s*=u);const h=i*i,b=s*s,U=h*b-h*c*c-b*a*a,y=h*c*c+b*a*a,x=(o===l?-1:1)*Math.sqrt(Math.abs(U/y));m=x*i*c/s+(e+n)/2,g=x*-s*a/i+(t+r)/2,p=Math.asin(parseFloat(((t-g)/s).toFixed(9))),f=Math.asin(parseFloat(((r-g)/s).toFixed(9))),e<m&&(p=Math.PI-p),n<m&&(f=Math.PI-f),p<0&&(p=2*Math.PI+p),f<0&&(f=2*Math.PI+f),l&&p>f&&(p-=2*Math.PI),!l&&f>p&&(f-=2*Math.PI)}let b=f-p;if(Math.abs(b)>120*Math.PI/180){const e=f,t=n,o=r;f=l&&f>p?p+120*Math.PI/180*1:p+120*Math.PI/180*-1,h=NR(n=m+i*Math.cos(f),r=g+s*Math.sin(f),t,o,i,s,a,0,l,[f,e,m,g])}b=f-p;const U=Math.cos(p),y=Math.sin(p),x=Math.cos(f),v=Math.sin(f),w=Math.tan(b/4),S=4/3*i*w,E=4/3*s*w,k=[e,t],C=[e+S*y,t-E*U],_=[n+S*v,r-E*x],M=[n,r];if(C[0]=2*k[0]-C[0],C[1]=2*k[1]-C[1],c)return[C,_,M].concat(h);{h=[C,_,M].concat(h);const e=[];for(let t=0;t<h.length;t+=3){const n=AR(h[t][0],h[t][1],d),r=AR(h[t+1][0],h[t+1][1],d),i=AR(h[t+2][0],h[t+2][1],d);e.push([n[0],n[1],r[0],r[1],i[0],i[1]])}return e}}const DR={randOffset:function(e,t){return qR(e,t)},randOffsetWithRange:function(e,t,n){return YR(e,t,n)},ellipse:function(e,t,n,r,i){const s=BR(n,r,i);return HR(e,t,i,s).opset},doubleLineOps:function(e,t,n,r,i){return ZR(e,t,n,r,i,!0)}};function LR(e,t,n,r,i){return{type:"path",ops:ZR(e,t,n,r,i)}}function OR(e,t,n){const r=(e||[]).length;if(r>2){const i=[];for(let t=0;t<r-1;t++)i.push(...ZR(e[t][0],e[t][1],e[t+1][0],e[t+1][1],n));return t&&i.push(...ZR(e[r-1][0],e[r-1][1],e[0][0],e[0][1],n)),{type:"path",ops:i}}return 2===r?LR(e[0][0],e[0][1],e[1][0],e[1][1],n):{type:"path",ops:[]}}function FR(e,t,n,r,i){return function(e,t){return OR(e,!0,t)}([[e,t],[e+n,t],[e+n,t+r],[e,t+r]],i)}function zR(e,t){let n=QR(e,1*(1+.2*t.roughness),t);if(!t.disableMultiStroke){const r=QR(e,1.5*(1+.22*t.roughness),function(e){const t=Object.assign({},e);t.randomizer=void 0,e.seed&&(t.seed=e.seed+1);return t}(t));n=n.concat(r)}return{type:"path",ops:n}}function BR(e,t,n){const r=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),s=2*Math.PI/i;let a=Math.abs(e/2),o=Math.abs(t/2);const l=1-n.curveFitting;return a+=qR(a*l,n),o+=qR(o*l,n),{increment:s,rx:a,ry:o}}function HR(e,t,n,r){const[i,s]=eP(r.increment,e,t,r.rx,r.ry,1,r.increment*YR(.1,YR(.4,1,n),n),n);let a=JR(i,null,n);if(!n.disableMultiStroke&&0!==n.roughness){const[i]=eP(r.increment,e,t,r.rx,r.ry,1.5,0,n),s=JR(i,null,n);a=a.concat(s)}return{estimatedPoints:s,opset:{type:"path",ops:a}}}function $R(e,t,n,r,i,s,a,o,l){const c=e,d=t;let u=Math.abs(n/2),h=Math.abs(r/2);u+=qR(.01*u,l),h+=qR(.01*h,l);let p=i,f=s;for(;p<0;)p+=2*Math.PI,f+=2*Math.PI;f-p>2*Math.PI&&(p=0,f=2*Math.PI);const m=2*Math.PI/l.curveStepCount,g=Math.min(m/2,(f-p)/2),b=tP(g,c,d,u,h,p,f,1,l);if(!l.disableMultiStroke){const e=tP(g,c,d,u,h,p,f,1.5,l);b.push(...e)}return a&&(o?b.push(...ZR(c,d,c+u*Math.cos(p),d+h*Math.sin(p),l),...ZR(c,d,c+u*Math.cos(f),d+h*Math.sin(f),l)):b.push({op:"lineTo",data:[c,d]},{op:"lineTo",data:[c+u*Math.cos(p),d+h*Math.sin(p)]})),{type:"path",ops:b}}function WR(e,t){const n=PR(RR(TR(e))),r=[];let i=[0,0],s=[0,0];for(const{key:a,data:o}of n)switch(a){case"M":s=[o[0],o[1]],i=[o[0],o[1]];break;case"L":r.push(...ZR(s[0],s[1],o[0],o[1],t)),s=[o[0],o[1]];break;case"C":{const[e,n,i,a,l,c]=o;r.push(...nP(e,n,i,a,l,c,s,t)),s=[l,c];break}case"Z":r.push(...ZR(s[0],s[1],i[0],i[1],t)),s=[i[0],i[1]]}return{type:"path",ops:r}}function XR(e,t){const n=[];for(const r of e)if(r.length){const e=t.maxRandomnessOffset||0,i=r.length;if(i>2){n.push({op:"move",data:[r[0][0]+qR(e,t),r[0][1]+qR(e,t)]});for(let s=1;s<i;s++)n.push({op:"lineTo",data:[r[s][0]+qR(e,t),r[s][1]+qR(e,t)]})}}return{type:"fillPath",ops:n}}function VR(e,t){return function(e,t){let n=e.fillStyle||"hachure";if(!_R[n])switch(n){case"zigzag":_R[n]||(_R[n]=new wR(t));break;case"cross-hatch":_R[n]||(_R[n]=new SR(t));break;case"dots":_R[n]||(_R[n]=new ER(t));break;case"dashed":_R[n]||(_R[n]=new kR(t));break;case"zigzag-line":_R[n]||(_R[n]=new CR(t));break;default:n="hachure",_R[n]||(_R[n]=new xR(t))}return _R[n]}(t,DR).fillPolygons(e,t)}function GR(e){return e.randomizer||(e.randomizer=new MR(e.seed||0)),e.randomizer.next()}function YR(e,t,n,r=1){return n.roughness*r*(GR(n)*(t-e)+e)}function qR(e,t,n=1){return YR(-e,e,t,n)}function ZR(e,t,n,r,i,s=!1){const a=s?i.disableMultiStrokeFill:i.disableMultiStroke,o=KR(e,t,n,r,i,!0,!1);if(a)return o;const l=KR(e,t,n,r,i,!0,!0);return o.concat(l)}function KR(e,t,n,r,i,s,a){const o=Math.pow(e-n,2)+Math.pow(t-r,2),l=Math.sqrt(o);let c=1;c=l<200?1:l>500?.4:-.0016668*l+1.233334;let d=i.maxRandomnessOffset||0;d*d*100>o&&(d=l/10);const u=d/2,h=.2+.2*GR(i);let p=i.bowing*i.maxRandomnessOffset*(r-t)/200,f=i.bowing*i.maxRandomnessOffset*(e-n)/200;p=qR(p,i,c),f=qR(f,i,c);const m=[],g=()=>qR(u,i,c),b=()=>qR(d,i,c),U=i.preserveVertices;return a?m.push({op:"move",data:[e+(U?0:g()),t+(U?0:g())]}):m.push({op:"move",data:[e+(U?0:qR(d,i,c)),t+(U?0:qR(d,i,c))]}),a?m.push({op:"bcurveTo",data:[p+e+(n-e)*h+g(),f+t+(r-t)*h+g(),p+e+2*(n-e)*h+g(),f+t+2*(r-t)*h+g(),n+(U?0:g()),r+(U?0:g())]}):m.push({op:"bcurveTo",data:[p+e+(n-e)*h+b(),f+t+(r-t)*h+b(),p+e+2*(n-e)*h+b(),f+t+2*(r-t)*h+b(),n+(U?0:b()),r+(U?0:b())]}),m}function QR(e,t,n){const r=[];r.push([e[0][0]+qR(t,n),e[0][1]+qR(t,n)]),r.push([e[0][0]+qR(t,n),e[0][1]+qR(t,n)]);for(let i=1;i<e.length;i++)r.push([e[i][0]+qR(t,n),e[i][1]+qR(t,n)]),i===e.length-1&&r.push([e[i][0]+qR(t,n),e[i][1]+qR(t,n)]);return JR(r,null,n)}function JR(e,t,n){const r=e.length,i=[];if(r>3){const t=[],s=1-n.curveTightness;i.push({op:"move",data:[e[1][0],e[1][1]]});for(let n=1;n+2<r;n++){const r=e[n];t[0]=[r[0],r[1]],t[1]=[r[0]+(s*e[n+1][0]-s*e[n-1][0])/6,r[1]+(s*e[n+1][1]-s*e[n-1][1])/6],t[2]=[e[n+1][0]+(s*e[n][0]-s*e[n+2][0])/6,e[n+1][1]+(s*e[n][1]-s*e[n+2][1])/6],t[3]=[e[n+1][0],e[n+1][1]],i.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[3][0],t[3][1]]})}}else 3===r?(i.push({op:"move",data:[e[1][0],e[1][1]]}),i.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):2===r&&i.push(...ZR(e[0][0],e[0][1],e[1][0],e[1][1],n));return i}function eP(e,t,n,r,i,s,a,o){const l=[],c=[];if(0===o.roughness){e/=4,c.push([t+r*Math.cos(-e),n+i*Math.sin(-e)]);for(let s=0;s<=2*Math.PI;s+=e){const e=[t+r*Math.cos(s),n+i*Math.sin(s)];l.push(e),c.push(e)}c.push([t+r*Math.cos(0),n+i*Math.sin(0)]),c.push([t+r*Math.cos(e),n+i*Math.sin(e)])}else{const d=qR(.5,o)-Math.PI/2;c.push([qR(s,o)+t+.9*r*Math.cos(d-e),qR(s,o)+n+.9*i*Math.sin(d-e)]);const u=2*Math.PI+d-.01;for(let a=d;a<u;a+=e){const e=[qR(s,o)+t+r*Math.cos(a),qR(s,o)+n+i*Math.sin(a)];l.push(e),c.push(e)}c.push([qR(s,o)+t+r*Math.cos(d+2*Math.PI+.5*a),qR(s,o)+n+i*Math.sin(d+2*Math.PI+.5*a)]),c.push([qR(s,o)+t+.98*r*Math.cos(d+a),qR(s,o)+n+.98*i*Math.sin(d+a)]),c.push([qR(s,o)+t+.9*r*Math.cos(d+.5*a),qR(s,o)+n+.9*i*Math.sin(d+.5*a)])}return[c,l]}function tP(e,t,n,r,i,s,a,o,l){const c=s+qR(.1,l),d=[];d.push([qR(o,l)+t+.9*r*Math.cos(c-e),qR(o,l)+n+.9*i*Math.sin(c-e)]);for(let u=c;u<=a;u+=e)d.push([qR(o,l)+t+r*Math.cos(u),qR(o,l)+n+i*Math.sin(u)]);return d.push([t+r*Math.cos(a),n+i*Math.sin(a)]),d.push([t+r*Math.cos(a),n+i*Math.sin(a)]),JR(d,0,l)}function nP(e,t,n,r,i,s,a,o){const l=[],c=[o.maxRandomnessOffset||1,(o.maxRandomnessOffset||1)+.3];let d=[0,0];const u=o.disableMultiStroke?1:2,h=o.preserveVertices;for(let p=0;p<u;p++)0===p?l.push({op:"move",data:[a[0],a[1]]}):l.push({op:"move",data:[a[0]+(h?0:qR(c[0],o)),a[1]+(h?0:qR(c[0],o))]}),d=h?[i,s]:[i+qR(c[p],o),s+qR(c[p],o)],l.push({op:"bcurveTo",data:[e+qR(c[p],o),t+qR(c[p],o),n+qR(c[p],o),r+qR(c[p],o),d[0],d[1]]});return l}function rP(e){return[...e]}function iP(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function sP(e,t,n){const r=iP(t,n);if(0===r)return iP(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),iP(e,aP(t,n,i))}function aP(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function oP(e,t,n,r){const i=r||[];if(function(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],s=e[t+3];let a=3*r[0]-2*n[0]-s[0];a*=a;let o=3*r[1]-2*n[1]-s[1];o*=o;let l=3*i[0]-2*s[0]-n[0];l*=l;let c=3*i[1]-2*s[1]-n[1];return c*=c,a<l&&(a=l),o<c&&(o=c),a+o}(e,t)<n){const n=e[t+0];if(i.length){(s=i[i.length-1],a=n,Math.sqrt(iP(s,a)))>1&&i.push(n)}else i.push(n);i.push(e[t+3])}else{const r=.5,s=e[t+0],a=e[t+1],o=e[t+2],l=e[t+3],c=aP(s,a,r),d=aP(a,o,r),u=aP(o,l,r),h=aP(c,d,r),p=aP(d,u,r),f=aP(h,p,r);oP([s,c,h,f],0,n,i),oP([f,p,u,l],0,n,i)}var s,a;return i}function lP(e,t,n,r,i){const s=i||[],a=e[t],o=e[n-1];let l=0,c=1;for(let d=t+1;d<n-1;++d){const t=sP(e[d],a,o);t>l&&(l=t,c=d)}return Math.sqrt(l)>r?(lP(e,t,c+1,r,s),lP(e,c,n,r,s)):(s.length||s.push(a),s.push(o)),s}function cP(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let s=0;s<i;s++){oP(e,3*s,t,r)}return n&&n>0?lP(r,0,r.length,n):r}function dP(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function uP(e,t,n){const r=dP(t,n);if(0===r)return dP(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),dP(e,hP(t,n,i))}function hP(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function pP(e,t,n,r){const i=r||[];if(function(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],s=e[t+3];let a=3*r[0]-2*n[0]-s[0];a*=a;let o=3*r[1]-2*n[1]-s[1];o*=o;let l=3*i[0]-2*s[0]-n[0];l*=l;let c=3*i[1]-2*s[1]-n[1];return c*=c,a<l&&(a=l),o<c&&(o=c),a+o}(e,t)<n){const n=e[t+0];if(i.length){(s=i[i.length-1],a=n,Math.sqrt(dP(s,a)))>1&&i.push(n)}else i.push(n);i.push(e[t+3])}else{const r=.5,s=e[t+0],a=e[t+1],o=e[t+2],l=e[t+3],c=hP(s,a,r),d=hP(a,o,r),u=hP(o,l,r),h=hP(c,d,r),p=hP(d,u,r),f=hP(h,p,r);pP([s,c,h,f],0,n,i),pP([f,p,u,l],0,n,i)}var s,a;return i}function fP(e,t){return mP(e,0,e.length,t)}function mP(e,t,n,r,i){const s=i||[],a=e[t],o=e[n-1];let l=0,c=1;for(let d=t+1;d<n-1;++d){const t=uP(e[d],a,o);t>l&&(l=t,c=d)}return Math.sqrt(l)>r?(mP(e,t,c+1,r,s),mP(e,c,n,r,s)):(s.length||s.push(a),s.push(o)),s}function gP(e,t,n){const r=PR(RR(TR(e))),i=[];let s=[],a=[0,0],o=[];const l=()=>{o.length>=4&&s.push(...function(e,t=.15){const n=[],r=(e.length-1)/3;for(let i=0;i<r;i++)pP(e,3*i,t,n);return n}(o,t)),o=[]},c=()=>{l(),s.length&&(i.push(s),s=[])};for(const{key:u,data:h}of r)switch(u){case"M":c(),a=[h[0],h[1]],s.push(a);break;case"L":l(),s.push([h[0],h[1]]);break;case"C":if(!o.length){const e=s.length?s[s.length-1]:a;o.push([e[0],e[1]])}o.push([h[0],h[1]]),o.push([h[2],h[3]]),o.push([h[4],h[5]]);break;case"Z":l(),s.push([a[0],a[1]])}if(c(),!n)return i;const d=[];for(const u of i){const e=fP(u,n);e.length&&d.push(e)}return d}const bP="none";class UP{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,t,n){return{shape:e,sets:t||[],options:n||this.defaultOptions}}line(e,t,n,r,i){const s=this._o(i);return this._d("line",[LR(e,t,n,r,s)],s)}rectangle(e,t,n,r,i){const s=this._o(i),a=[],o=FR(e,t,n,r,s);if(s.fill){const i=[[e,t],[e+n,t],[e+n,t+r],[e,t+r]];"solid"===s.fillStyle?a.push(XR([i],s)):a.push(VR([i],s))}return s.stroke!==bP&&a.push(o),this._d("rectangle",a,s)}ellipse(e,t,n,r,i){const s=this._o(i),a=[],o=BR(n,r,s),l=HR(e,t,s,o);if(s.fill)if("solid"===s.fillStyle){const n=HR(e,t,s,o).opset;n.type="fillPath",a.push(n)}else a.push(VR([l.estimatedPoints],s));return s.stroke!==bP&&a.push(l.opset),this._d("ellipse",a,s)}circle(e,t,n,r){const i=this.ellipse(e,t,n,n,r);return i.shape="circle",i}linearPath(e,t){const n=this._o(t);return this._d("linearPath",[OR(e,!1,n)],n)}arc(e,t,n,r,i,s,a=!1,o){const l=this._o(o),c=[],d=$R(e,t,n,r,i,s,a,!0,l);if(a&&l.fill)if("solid"===l.fillStyle){const a=Object.assign({},l);a.disableMultiStroke=!0;const o=$R(e,t,n,r,i,s,!0,!1,a);o.type="fillPath",c.push(o)}else c.push(function(e,t,n,r,i,s,a){const o=e,l=t;let c=Math.abs(n/2),d=Math.abs(r/2);c+=qR(.01*c,a),d+=qR(.01*d,a);let u=i,h=s;for(;u<0;)u+=2*Math.PI,h+=2*Math.PI;h-u>2*Math.PI&&(u=0,h=2*Math.PI);const p=(h-u)/a.curveStepCount,f=[];for(let m=u;m<=h;m+=p)f.push([o+c*Math.cos(m),l+d*Math.sin(m)]);return f.push([o+c*Math.cos(h),l+d*Math.sin(h)]),f.push([o,l]),VR([f],a)}(e,t,n,r,i,s,l));return l.stroke!==bP&&c.push(d),this._d("arc",c,l)}curve(e,t){const n=this._o(t),r=[],i=zR(e,n);if(n.fill&&n.fill!==bP&&e.length>=3)if("solid"===n.fillStyle){const t=zR(e,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(t.ops)})}else{const t=function(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(3===n)r.push(rP(e[0]),rP(e[1]),rP(e[2]),rP(e[2]));else{const n=[];n.push(e[0],e[0]);for(let t=1;t<e.length;t++)n.push(e[t]),t===e.length-1&&n.push(e[t]);const i=[],s=1-t;r.push(rP(n[0]));for(let e=1;e+2<n.length;e++){const t=n[e];i[0]=[t[0],t[1]],i[1]=[t[0]+(s*n[e+1][0]-s*n[e-1][0])/6,t[1]+(s*n[e+1][1]-s*n[e-1][1])/6],i[2]=[n[e+1][0]+(s*n[e][0]-s*n[e+2][0])/6,n[e+1][1]+(s*n[e][1]-s*n[e+2][1])/6],i[3]=[n[e+1][0],n[e+1][1]],r.push(i[1],i[2],i[3])}}return r}(e),i=cP(t,10,(1+n.roughness)/2);r.push(VR([i],n))}return n.stroke!==bP&&r.push(i),this._d("curve",r,n)}polygon(e,t){const n=this._o(t),r=[],i=OR(e,!0,n);return n.fill&&("solid"===n.fillStyle?r.push(XR([e],n)):r.push(VR([e],n))),n.stroke!==bP&&r.push(i),this._d("polygon",r,n)}path(e,t){const n=this._o(t),r=[];if(!e)return this._d("path",r,n);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const i=n.fill&&"transparent"!==n.fill&&n.fill!==bP,s=n.stroke!==bP,a=!!(n.simplification&&n.simplification<1),o=gP(e,1,a?4-4*(n.simplification||1):(1+n.roughness)/2),l=WR(e,n);if(i)if("solid"===n.fillStyle)if(1===o.length){const t=WR(e,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(t.ops)})}else r.push(XR(o,n));else r.push(VR(o,n));return s&&(a?o.forEach(e=>{r.push(OR(e,!1,n))}):r.push(l)),this._d("path",r,n)}opsToPath(e,t){let n="";for(const r of e.ops){const e="number"==typeof t&&t>=0?r.data.map(e=>+e.toFixed(t)):r.data;switch(r.op){case"move":n+=`M${e[0]} ${e[1]} `;break;case"bcurveTo":n+=`C${e[0]} ${e[1]}, ${e[2]} ${e[3]}, ${e[4]} ${e[5]} `;break;case"lineTo":n+=`L${e[0]} ${e[1]} `}}return n.trim()}toPaths(e){const t=e.sets||[],n=e.options||this.defaultOptions,r=[];for(const i of t){let e=null;switch(i.type){case"path":e={d:this.opsToPath(i),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:bP};break;case"fillPath":e={d:this.opsToPath(i),stroke:bP,strokeWidth:0,fill:n.fill||bP};break;case"fillSketch":e=this.fillSketch(i,n)}e&&r.push(e)}return r}fillSketch(e,t){let n=t.fillWeight;return n<0&&(n=t.strokeWidth/2),{d:this.opsToPath(e),stroke:t.fill||bP,strokeWidth:n,fill:bP}}_mergedShape(e){return e.filter((e,t)=>0===t||"move"!==e.op)}}class yP{constructor(e,t){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new UP(t)}draw(e){const t=e.sets||[],n=e.options||this.getDefaultOptions(),r=this.ctx,i=e.options.fixedDecimalPlaceDigits;for(const s of t)switch(s.type){case"path":r.save(),r.strokeStyle="none"===n.stroke?"transparent":n.stroke,r.lineWidth=n.strokeWidth,n.strokeLineDash&&r.setLineDash(n.strokeLineDash),n.strokeLineDashOffset&&(r.lineDashOffset=n.strokeLineDashOffset),this._drawToContext(r,s,i),r.restore();break;case"fillPath":{r.save(),r.fillStyle=n.fill||"";const t="curve"===e.shape||"polygon"===e.shape||"path"===e.shape?"evenodd":"nonzero";this._drawToContext(r,s,i,t),r.restore();break}case"fillSketch":this.fillSketch(r,s,n)}}fillSketch(e,t,n){let r=n.fillWeight;r<0&&(r=n.strokeWidth/2),e.save(),n.fillLineDash&&e.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(e.lineDashOffset=n.fillLineDashOffset),e.strokeStyle=n.fill||"",e.lineWidth=r,this._drawToContext(e,t,n.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,t,n,r="nonzero"){e.beginPath();for(const i of t.ops){const t="number"==typeof n&&n>=0?i.data.map(e=>+e.toFixed(n)):i.data;switch(i.op){case"move":e.moveTo(t[0],t[1]);break;case"bcurveTo":e.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5]);break;case"lineTo":e.lineTo(t[0],t[1])}}"fillPath"===t.type?e.fill(r):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,t,n,r,i){const s=this.gen.line(e,t,n,r,i);return this.draw(s),s}rectangle(e,t,n,r,i){const s=this.gen.rectangle(e,t,n,r,i);return this.draw(s),s}ellipse(e,t,n,r,i){const s=this.gen.ellipse(e,t,n,r,i);return this.draw(s),s}circle(e,t,n,r){const i=this.gen.circle(e,t,n,r);return this.draw(i),i}linearPath(e,t){const n=this.gen.linearPath(e,t);return this.draw(n),n}polygon(e,t){const n=this.gen.polygon(e,t);return this.draw(n),n}arc(e,t,n,r,i,s,a=!1,o){const l=this.gen.arc(e,t,n,r,i,s,a,o);return this.draw(l),l}curve(e,t){const n=this.gen.curve(e,t);return this.draw(n),n}path(e,t){const n=this.gen.path(e,t);return this.draw(n),n}}const xP="http://www.w3.org/2000/svg";class vP{constructor(e,t){this.svg=e,this.gen=new UP(t)}draw(e){const t=e.sets||[],n=e.options||this.getDefaultOptions(),r=this.svg.ownerDocument||window.document,i=r.createElementNS(xP,"g"),s=e.options.fixedDecimalPlaceDigits;for(const a of t){let t=null;switch(a.type){case"path":t=r.createElementNS(xP,"path"),t.setAttribute("d",this.opsToPath(a,s)),t.setAttribute("stroke",n.stroke),t.setAttribute("stroke-width",n.strokeWidth+""),t.setAttribute("fill","none"),n.strokeLineDash&&t.setAttribute("stroke-dasharray",n.strokeLineDash.join(" ").trim()),n.strokeLineDashOffset&&t.setAttribute("stroke-dashoffset",`${n.strokeLineDashOffset}`);break;case"fillPath":t=r.createElementNS(xP,"path"),t.setAttribute("d",this.opsToPath(a,s)),t.setAttribute("stroke","none"),t.setAttribute("stroke-width","0"),t.setAttribute("fill",n.fill||""),"curve"!==e.shape&&"polygon"!==e.shape||t.setAttribute("fill-rule","evenodd");break;case"fillSketch":t=this.fillSketch(r,a,n)}t&&i.appendChild(t)}return i}fillSketch(e,t,n){let r=n.fillWeight;r<0&&(r=n.strokeWidth/2);const i=e.createElementNS(xP,"path");return i.setAttribute("d",this.opsToPath(t,n.fixedDecimalPlaceDigits)),i.setAttribute("stroke",n.fill||""),i.setAttribute("stroke-width",r+""),i.setAttribute("fill","none"),n.fillLineDash&&i.setAttribute("stroke-dasharray",n.fillLineDash.join(" ").trim()),n.fillLineDashOffset&&i.setAttribute("stroke-dashoffset",`${n.fillLineDashOffset}`),i}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,t){return this.gen.opsToPath(e,t)}line(e,t,n,r,i){const s=this.gen.line(e,t,n,r,i);return this.draw(s)}rectangle(e,t,n,r,i){const s=this.gen.rectangle(e,t,n,r,i);return this.draw(s)}ellipse(e,t,n,r,i){const s=this.gen.ellipse(e,t,n,r,i);return this.draw(s)}circle(e,t,n,r){const i=this.gen.circle(e,t,n,r);return this.draw(i)}linearPath(e,t){const n=this.gen.linearPath(e,t);return this.draw(n)}polygon(e,t){const n=this.gen.polygon(e,t);return this.draw(n)}arc(e,t,n,r,i,s,a=!1,o){const l=this.gen.arc(e,t,n,r,i,s,a,o);return this.draw(l)}curve(e,t){const n=this.gen.curve(e,t);return this.draw(n)}path(e,t){const n=this.gen.path(e,t);return this.draw(n)}}const wP={canvas:(e,t)=>new yP(e,t),svg:(e,t)=>new vP(e,t),generator:e=>new UP(e),newSeed:()=>UP.newSeed()};function SP(e,t,n,r=e=>e){return e*r(.5-t*(.5-n))}function EP(e,t){return[e[0]+t[0],e[1]+t[1]]}function kP(e,t){return[e[0]-t[0],e[1]-t[1]]}function CP(e,t){return[e[0]*t,e[1]*t]}function _P(e){return[e[1],-e[0]]}function MP(e,t){return e[0]*t[0]+e[1]*t[1]}function IP(e,t){return e[0]===t[0]&&e[1]===t[1]}function jP(e,t){return function(e){return e[0]*e[0]+e[1]*e[1]}(kP(e,t))}function TP(e){return function(e,t){return[e[0]/t,e[1]/t]}(e,function(e){return Math.hypot(e[0],e[1])}(e))}function RP(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function PP(e,t,n){let r=Math.sin(n),i=Math.cos(n),s=e[0]-t[0],a=e[1]-t[1],o=s*r+a*i;return[s*i-a*r+t[0],o+t[1]]}function AP(e,t,n){return EP(e,CP(kP(t,e),n))}function NP(e,t,n){return EP(e,CP(t,n))}var{min:DP,PI:LP}=Math,OP=LP+1e-4;function FP(e,t={}){return function(e,t={}){let{size:n=16,smoothing:r=.5,thinning:i=.5,simulatePressure:s=!0,easing:a=e=>e,start:o={},end:l={},last:c=!1}=t,{cap:d=!0,easing:u=e=>e*(2-e)}=o,{cap:h=!0,easing:p=e=>--e*e*e+1}=l;if(0===e.length||n<=0)return[];let f,m=e[e.length-1].runningLength,g=!1===o.taper?0:!0===o.taper?Math.max(n,m):o.taper,b=!1===l.taper?0:!0===l.taper?Math.max(n,m):l.taper,U=Math.pow(n*r,2),y=[],x=[],v=e.slice(0,10).reduce((e,t)=>{let r=t.pressure;if(s){let i=DP(1,t.distance/n),s=DP(1,1-i);r=DP(1,e+.275*i*(s-e))}return(e+r)/2},e[0].pressure),w=SP(n,i,e[e.length-1].pressure,a),S=e[0].vector,E=e[0].point,k=E,C=E,_=k,M=!1;for(let P=0;P<e.length;P++){let{pressure:t}=e[P],{point:r,vector:o,distance:l,runningLength:c}=e[P];if(P<e.length-1&&m-c<3)continue;if(i){if(s){let e=DP(1,l/n),r=DP(1,1-e);t=DP(1,v+.275*e*(r-v))}w=SP(n,i,t,a)}else w=n/2;void 0===f&&(f=w);let d=c<g?u(c/g):1,h=m-c<b?p((m-c)/b):1;w=Math.max(.01,w*Math.min(d,h));let I=(P<e.length-1?e[P+1]:e[P]).vector,j=P<e.length-1?MP(o,I):1,T=null!==j&&j<0;if(MP(o,S)<0&&!M||T){let e=CP(_P(S),w);for(let t=1/13,n=0;n<=1;n+=t)C=PP(kP(r,e),r,OP*n),y.push(C),_=PP(EP(r,e),r,OP*-n),x.push(_);E=C,k=_,T&&(M=!0);continue}if(M=!1,P===e.length-1){let e=CP(_P(o),w);y.push(kP(r,e)),x.push(EP(r,e));continue}let R=CP(_P(AP(I,o,j)),w);C=kP(r,R),(P<=1||jP(E,C)>U)&&(y.push(C),E=C),_=EP(r,R),(P<=1||jP(k,_)>U)&&(x.push(_),k=_),v=t,S=o}let I=e[0].point.slice(0,2),j=e.length>1?e[e.length-1].point.slice(0,2):EP(e[0].point,[1,1]),T=[],R=[];if(1===e.length){if(!g&&!b||c){let e=NP(I,TP(_P(kP(I,j))),-(f||w)),t=[];for(let n=1/13,r=n;r<=1;r+=n)t.push(PP(e,I,2*OP*r));return t}}else{if(!(g||b&&1===e.length))if(d)for(let e=1/13,n=e;n<=1;n+=e){let e=PP(x[0],I,OP*n);T.push(e)}else{let e=kP(y[0],x[0]),t=CP(e,.5),n=CP(e,.51);T.push(kP(I,t),kP(I,n),EP(I,n),EP(I,t))}let t=_P(function(e){return[-e[0],-e[1]]}(e[e.length-1].vector));if(b||g&&1===e.length)R.push(j);else if(h){let e=NP(j,t,w);for(let t=1/29,n=t;n<1;n+=t)R.push(PP(e,j,3*OP*n))}else R.push(EP(j,CP(t,w)),EP(j,CP(t,.99*w)),kP(j,CP(t,.99*w)),kP(j,CP(t,w)))}return y.concat(R,x.reverse(),T)}(function(e,t={}){var n;let{streamline:r=.5,size:i=16,last:s=!1}=t;if(0===e.length)return[];let a=.15+.85*(1-r),o=Array.isArray(e[0])?e:e.map(({x:e,y:t,pressure:n=.5})=>[e,t,n]);if(2===o.length){let e=o[1];o=o.slice(0,-1);for(let t=1;t<5;t++)o.push(AP(o[0],e,t/4))}1===o.length&&(o=[...o,[...EP(o[0],[1,1]),...o[0].slice(2)]]);let l=[{point:[o[0][0],o[0][1]],pressure:o[0][2]>=0?o[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],c=!1,d=0,u=l[0],h=o.length-1;for(let p=1;p<o.length;p++){let e=s&&p===h?o[p].slice(0,2):AP(u.point,o[p],a);if(IP(u.point,e))continue;let t=RP(e,u.point);if(d+=t,p<h&&!c){if(d<i)continue;c=!0}u={point:e,pressure:o[p][2]>=0?o[p][2]:.5,vector:TP(kP(u.point,e)),distance:t,runningLength:d},l.push(u)}return l[0].vector=(null==(n=l[1])?void 0:n.vector)||[0,0],l}(e,t),t)}function zP(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=zP(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function BP(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=zP(e))&&(r&&(r+=" "),r+=t);return r}function HP(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function $P(e,t,n){const r=HP(t,n);if(0===r)return HP(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),HP(e,WP(t,n,i))}function WP(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function XP(e,t,n,r){const i=r||[];if(function(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],s=e[t+3];let a=3*r[0]-2*n[0]-s[0];a*=a;let o=3*r[1]-2*n[1]-s[1];o*=o;let l=3*i[0]-2*s[0]-n[0];l*=l;let c=3*i[1]-2*s[1]-n[1];return c*=c,a<l&&(a=l),o<c&&(o=c),a+o}(e,t)<n){const n=e[t+0];if(i.length){(s=i[i.length-1],a=n,Math.sqrt(HP(s,a)))>1&&i.push(n)}else i.push(n);i.push(e[t+3])}else{const r=.5,s=e[t+0],a=e[t+1],o=e[t+2],l=e[t+3],c=WP(s,a,r),d=WP(a,o,r),u=WP(o,l,r),h=WP(c,d,r),p=WP(d,u,r),f=WP(h,p,r);XP([s,c,h,f],0,n,i),XP([f,p,u,l],0,n,i)}var s,a;return i}function VP(e,t,n,r,i){const s=i||[],a=e[t],o=e[n-1];let l=0,c=1;for(let d=t+1;d<n-1;++d){const t=$P(e[d],a,o);t>l&&(l=t,c=d)}return Math.sqrt(l)>r?(VP(e,t,c+1,r,s),VP(e,c,n,r,s)):(s.length||s.push(a),s.push(o)),s}var GP,YP={};var qP=function(){if(GP)return YP;GP=1,Object.defineProperty(YP,"__esModule",{value:!0}),YP.sanitizeUrl=void 0;var e=/^([^\w]*)(javascript|data|vbscript)/im,t=/&#(\w+)(^\w|;)?/g,n=/&(newline|tab);/gi,r=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,i=/^.+(:|&colon;)/gim,s=[".","/"];return YP.sanitizeUrl=function(a){var o,l=(o=a||"",o.replace(t,function(e,t){return String.fromCharCode(t)})).replace(n,"").replace(r,"").trim();if(!l)return"about:blank";if(function(e){return s.indexOf(e[0])>-1}(l))return l;var c=l.match(i);if(!c)return l;var d=c[0];return e.test(d)?"about:blank":l},YP}();const ZP="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function KP(e,t,n){const r=n[0];if(null!=t&&e>=t)throw new Error(e+" >= "+t);if(e.slice(-1)===r||t&&t.slice(-1)===r)throw new Error("trailing zero");if(t){let i=0;for(;(e[i]||r)===t[i];)i++;if(i>0)return t.slice(0,i)+KP(e.slice(i),t.slice(i),n)}const i=e?n.indexOf(e[0]):0,s=null!=t?n.indexOf(t[0]):n.length;if(s-i>1){return n[Math.round(.5*(i+s))]}return t&&t.length>1?t.slice(0,1):n[i]+KP(e.slice(1),null,n)}function QP(e){if(e.length!==JP(e[0]))throw new Error("invalid integer part of order key: "+e)}function JP(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-"a".charCodeAt(0)+2;if(e>="A"&&e<="Z")return"Z".charCodeAt(0)-e.charCodeAt(0)+2;throw new Error("invalid order key head: "+e)}function eA(e){const t=JP(e[0]);if(t>e.length)throw new Error("invalid order key: "+e);return e.slice(0,t)}function tA(e,t){if(e==="A"+t[0].repeat(26))throw new Error("invalid order key: "+e);const n=eA(e);if(e.slice(n.length).slice(-1)===t[0])throw new Error("invalid order key: "+e)}function nA(e,t){QP(e);const[n,...r]=e.split("");let i=!0;for(let s=r.length-1;i&&s>=0;s--){const e=t.indexOf(r[s])+1;e===t.length?r[s]=t[0]:(r[s]=t[e],i=!1)}if(i){if("Z"===n)return"a"+t[0];if("z"===n)return null;const e=String.fromCharCode(n.charCodeAt(0)+1);return e>"a"?r.push(t[0]):r.pop(),e+r.join("")}return n+r.join("")}function rA(e,t,n=ZP){if(null!=e&&tA(e,n),null!=t&&tA(t,n),null!=e&&null!=t&&e>=t)throw new Error(e+" >= "+t);if(null==e){if(null==t)return"a"+n[0];const e=eA(t),r=t.slice(e.length);if(e==="A"+n[0].repeat(26))return e+KP("",r,n);if(e<t)return e;const i=function(e,t){QP(e);const[n,...r]=e.split("");let i=!0;for(let s=r.length-1;i&&s>=0;s--){const e=t.indexOf(r[s])-1;-1===e?r[s]=t.slice(-1):(r[s]=t[e],i=!1)}if(i){if("a"===n)return"Z"+t.slice(-1);if("A"===n)return null;const e=String.fromCharCode(n.charCodeAt(0)-1);return e<"Z"?r.push(t.slice(-1)):r.pop(),e+r.join("")}return n+r.join("")}(e,n);if(null==i)throw new Error("cannot decrement any more");return i}if(null==t){const t=eA(e),r=e.slice(t.length),i=nA(t,n);return null==i?t+KP(r,null,n):i}const r=eA(e),i=e.slice(r.length),s=eA(t),a=t.slice(s.length);if(r===s)return r+KP(i,a,n);const o=nA(r,n);if(null==o)throw new Error("cannot increment any more");return o<t?o:r+KP(i,null,n)}function iA(e,t,n,r=ZP){if(0===n)return[];if(1===n)return[rA(e,t,r)];if(null==t){let i=rA(e,t,r);const s=[i];for(let e=0;e<n-1;e++)i=rA(i,t,r),s.push(i);return s}if(null==e){let i=rA(e,t,r);const s=[i];for(let t=0;t<n-1;t++)i=rA(e,i,r),s.push(i);return s.reverse(),s}const i=Math.floor(n/2),s=rA(e,t,r);return[...iA(e,s,i,r),s,...iA(s,t,n-i-1,r)]}const sA=(()=>{if("undefined"==typeof self)return!1;if("top"in self&&self!==top)try{top}catch(lA){return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1})(),aA=Pt(sA?()=>import("./file-open-002ab408-DUyxJ7vu.js"):()=>import("./file-open-7c801643-DgUU-lVg.js"),[]);Pt(sA?()=>import("./directory-open-4ed118d0-BcYb4bRo.js"):()=>import("./directory-open-01563666-BgX_rhJG.js"),[]);const oA=Pt(sA?()=>import("./file-save-745eba88-CfGd2gZ7.js"):()=>import("./file-save-3189631c-BC9x-xxp.js"),[]);var lA,cA,dA=[0,2,4,6,8],uA=(e,t)=>t.map(t=>aR[e][t]),hA={transparent:"transparent",black:"#1e1e1e",white:"#ffffff",gray:uA("gray",dA),red:uA("red",dA),pink:uA("pink",dA),grape:uA("grape",dA),violet:uA("violet",dA),blue:uA("blue",dA),cyan:uA("cyan",dA),teal:uA("teal",dA),green:uA("green",dA),yellow:uA("yellow",dA),orange:uA("orange",dA),bronze:["#f8f1ee","#eaddd7","#d2bab0","#a18072","#846358"]},pA=(lA=hA,["cyan","blue","violet","grape","pink","green","teal","yellow","orange","red"].reduce((e,t)=>(t in lA&&(e[t]=lA[t]),e),{})),fA=[hA.black,hA.red[4],hA.green[4],hA.blue[4],hA.yellow[4]],mA=[hA.transparent,hA.red[1],hA.green[1],hA.blue[1],hA.yellow[1]],gA=[hA.white,"#f8f9fa","#f5faff","#fffce8","#fdf8f6"],bA={transparent:hA.transparent,white:hA.white,gray:hA.gray,black:hA.black,bronze:hA.bronze,...pA},UA={transparent:hA.transparent,white:hA.white,gray:hA.gray,black:hA.black,bronze:hA.bronze,...pA},yA=/Mac|iPod|iPhone|iPad/.test(navigator.platform),xA=/^Win/.test(navigator.platform),vA=/\b(android)\b/i.test(navigator.userAgent),wA="netscape"in window&&navigator.userAgent.indexOf("rv:")>1&&navigator.userAgent.indexOf("Gecko")>1,SA=!(-1!==navigator.userAgent.indexOf("Chrome"))&&-1!==navigator.userAgent.indexOf("Safari"),EA=/iPad|iPhone/.test(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,kA=typeof window<"u"&&"ResizeObserver"in window,CA=10,_A=Math.PI/12,MA="text",IA="crosshair",jA="grabbing",TA="grab",RA="pointer",PA="move",AA="",NA=0,DA=1,LA=2,OA=-1,FA=5,zA="all",BA="none",HA={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5},$A="test",WA="App-menu__left",XA="zoom-actions",VA="layer-ui__search-inputWrapper",GA="Xiaolai",YA="Segoe UI Emoji",qA={Virgil:1,Helvetica:2,Cascadia:3,Excalifont:5,Nunito:6,"Lilita One":7,"Comic Shanns":8,"Liberation Sans":9},ZA={[GA]:100,[YA]:1e3},QA=e=>e===qA.Excalifont?[GA,YA]:[YA],JA="light",eN="dark",tN={strokeColor:"#bbb",strokeWidth:2,strokeStyle:"solid",fillStyle:"solid",roughness:0,roundness:null,backgroundColor:"transparent",radius:8,nameOffsetY:3,nameColorLightTheme:"#999999",nameColorDarkTheme:"#7a7a7a",nameFontSize:14,nameLineHeight:1.25},nN=20,rN=qA.Excalifont,iN="left",sN="top",aN="#ffffff",oN={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},lN={text:"text/plain",html:"text/html",json:"application/json",excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json","excalidraw.svg":"image/svg+xml","excalidraw.png":"image/png",binary:"application/octet-stream",...oN},cN=[lN.text,lN.html,...Object.values(oN)],dN="png",uN="svg",hN="clipboard",pN={excalidraw:"excalidraw",excalidrawClipboard:"excalidraw/clipboard",excalidrawLibrary:"excalidrawlib",excalidrawClipboardWithAPI:"excalidraw-api/clipboard"},fN=window.EXCALIDRAW_EXPORT_SOURCE||window.location.origin,mN=.1,gN="invert(93%) hue-rotate(180deg)",bN={changeViewBackgroundColor:!0,clearCanvas:!0,export:{saveFileToDisk:!0},loadScene:!0,saveToActiveFile:!0,toggleTheme:null,saveAsImage:!0},UN=[1,2,3],yN=10,xN=4194304,vN="http://www.w3.org/2000/svg",wN=2,SN=2,EN="top",kN="middle",CN="bottom",_N="left",MN="center",IN="right",jN=.25,TN=1,RN=2,PN=3,AN=2,NN=1,DN=2,LN=4,ON={strokeColor:hA.black,backgroundColor:hA.transparent,fillStyle:"solid",strokeWidth:2,strokeStyle:"solid",roughness:1,opacity:100,locked:!1},FN="library",zN="search",BN="default",HN=FN,$N=new Set(["iframe","embeddable","image"]),WN="selection",XN="rectangle",VN="diamond",GN="ellipse",YN="text",qN="image",ZN="eraser",KN="frame",QN="magicframe",JN="laser",eD="mermaid-to-excalidraw",tD="publish-library-data",nD="Untitled",rD=1,iD=2,sD="sharp",aD="round",oD="elbow",lD="element",cD=Symbol.for("__test__originalId__"),dD=((cA=dD||{}).ACTIVE="active",cA.AWAY="away",cA.IDLE="idle",cA),uD=UN.includes(devicePixelRatio)?devicePixelRatio:1,hD=()=>({showWelcomeScreen:!1,theme:JA,collaborators:new Map,currentChartType:"bar",currentItemBackgroundColor:ON.backgroundColor,currentItemEndArrowhead:"arrow",currentItemFillStyle:ON.fillStyle,currentItemFontFamily:rN,currentItemFontSize:nN,currentItemOpacity:ON.opacity,currentItemRoughness:ON.roughness,currentItemStartArrowhead:null,currentItemStrokeColor:ON.strokeColor,currentItemRoundness:"round",currentItemArrowType:aD,currentItemStrokeStyle:ON.strokeStyle,currentItemStrokeWidth:ON.strokeWidth,currentItemTextAlign:iN,currentHoveredFontFamily:null,cursorButton:"up",activeEmbeddable:null,newElement:null,editingTextElement:null,editingGroupId:null,editingLinearElement:null,activeTool:{type:"selection",customType:null,locked:ON.locked,lastActiveTool:null},penMode:!1,penDetected:!1,errorMessage:null,exportBackground:!0,exportScale:uD,exportEmbedScene:!1,exportWithDarkMode:!1,fileHandle:null,gridSize:20,gridStep:5,gridModeEnabled:!1,isBindingEnabled:!0,defaultSidebarDockedPreference:!1,isLoading:!1,isResizing:!1,isRotating:!1,lastPointerDownWith:"mouse",multiElement:null,name:null,contextMenu:null,openMenu:null,openPopup:null,openSidebar:null,openDialog:null,pasteDialog:{shown:!1,data:null},previousSelectedElementIds:{},resizingElement:null,scrolledOutside:!1,scrollX:0,scrollY:0,selectedElementIds:{},hoveredElementIds:{},selectedGroupIds:{},selectedElementsAreBeingDragged:!1,selectionElement:null,shouldCacheIgnoreZoom:!1,stats:{open:!1,panels:rD|iD},startBoundElement:null,suggestedBindings:[],frameRendering:{enabled:!0,clip:!0,name:!0,outline:!0},frameToHighlight:null,editingFrame:null,elementsToHighlight:null,toast:null,viewBackgroundColor:hA.white,zenModeEnabled:!1,zoom:{value:1},viewModeEnabled:!1,pendingImageElementId:null,showHyperlinkPopup:!1,selectedLinearElement:null,snapLines:[],originSnapOffset:{x:0,y:0},objectsSnapModeEnabled:!1,userToFollow:null,followedBy:new Set,isCropping:!1,croppingElementId:null,searchMatches:[]}),pD=(()=>({showWelcomeScreen:{browser:!0,export:!1,server:!1},theme:{browser:!0,export:!1,server:!1},collaborators:{browser:!1,export:!1,server:!1},currentChartType:{browser:!0,export:!1,server:!1},currentItemBackgroundColor:{browser:!0,export:!1,server:!1},currentItemEndArrowhead:{browser:!0,export:!1,server:!1},currentItemFillStyle:{browser:!0,export:!1,server:!1},currentItemFontFamily:{browser:!0,export:!1,server:!1},currentItemFontSize:{browser:!0,export:!1,server:!1},currentItemRoundness:{browser:!0,export:!1,server:!1},currentItemArrowType:{browser:!0,export:!1,server:!1},currentItemOpacity:{browser:!0,export:!1,server:!1},currentItemRoughness:{browser:!0,export:!1,server:!1},currentItemStartArrowhead:{browser:!0,export:!1,server:!1},currentItemStrokeColor:{browser:!0,export:!1,server:!1},currentItemStrokeStyle:{browser:!0,export:!1,server:!1},currentItemStrokeWidth:{browser:!0,export:!1,server:!1},currentItemTextAlign:{browser:!0,export:!1,server:!1},currentHoveredFontFamily:{browser:!1,export:!1,server:!1},cursorButton:{browser:!0,export:!1,server:!1},activeEmbeddable:{browser:!1,export:!1,server:!1},newElement:{browser:!1,export:!1,server:!1},editingTextElement:{browser:!1,export:!1,server:!1},editingGroupId:{browser:!0,export:!1,server:!1},editingLinearElement:{browser:!1,export:!1,server:!1},activeTool:{browser:!0,export:!1,server:!1},penMode:{browser:!0,export:!1,server:!1},penDetected:{browser:!0,export:!1,server:!1},errorMessage:{browser:!1,export:!1,server:!1},exportBackground:{browser:!0,export:!1,server:!1},exportEmbedScene:{browser:!0,export:!1,server:!1},exportScale:{browser:!0,export:!1,server:!1},exportWithDarkMode:{browser:!0,export:!1,server:!1},fileHandle:{browser:!1,export:!1,server:!1},gridSize:{browser:!0,export:!0,server:!0},gridStep:{browser:!0,export:!0,server:!0},gridModeEnabled:{browser:!0,export:!0,server:!0},height:{browser:!1,export:!1,server:!1},isBindingEnabled:{browser:!1,export:!1,server:!1},defaultSidebarDockedPreference:{browser:!0,export:!1,server:!1},isLoading:{browser:!1,export:!1,server:!1},isResizing:{browser:!1,export:!1,server:!1},isRotating:{browser:!1,export:!1,server:!1},lastPointerDownWith:{browser:!0,export:!1,server:!1},multiElement:{browser:!1,export:!1,server:!1},name:{browser:!0,export:!1,server:!1},offsetLeft:{browser:!1,export:!1,server:!1},offsetTop:{browser:!1,export:!1,server:!1},contextMenu:{browser:!1,export:!1,server:!1},openMenu:{browser:!0,export:!1,server:!1},openPopup:{browser:!1,export:!1,server:!1},openSidebar:{browser:!0,export:!1,server:!1},openDialog:{browser:!1,export:!1,server:!1},pasteDialog:{browser:!1,export:!1,server:!1},previousSelectedElementIds:{browser:!0,export:!1,server:!1},resizingElement:{browser:!1,export:!1,server:!1},scrolledOutside:{browser:!0,export:!1,server:!1},scrollX:{browser:!0,export:!1,server:!1},scrollY:{browser:!0,export:!1,server:!1},selectedElementIds:{browser:!0,export:!1,server:!1},hoveredElementIds:{browser:!1,export:!1,server:!1},selectedGroupIds:{browser:!0,export:!1,server:!1},selectedElementsAreBeingDragged:{browser:!1,export:!1,server:!1},selectionElement:{browser:!1,export:!1,server:!1},shouldCacheIgnoreZoom:{browser:!0,export:!1,server:!1},stats:{browser:!0,export:!1,server:!1},startBoundElement:{browser:!1,export:!1,server:!1},suggestedBindings:{browser:!1,export:!1,server:!1},frameRendering:{browser:!1,export:!1,server:!1},frameToHighlight:{browser:!1,export:!1,server:!1},editingFrame:{browser:!1,export:!1,server:!1},elementsToHighlight:{browser:!1,export:!1,server:!1},toast:{browser:!1,export:!1,server:!1},viewBackgroundColor:{browser:!0,export:!0,server:!0},width:{browser:!1,export:!1,server:!1},zenModeEnabled:{browser:!0,export:!1,server:!1},zoom:{browser:!0,export:!1,server:!1},viewModeEnabled:{browser:!1,export:!1,server:!1},pendingImageElementId:{browser:!1,export:!1,server:!1},showHyperlinkPopup:{browser:!1,export:!1,server:!1},selectedLinearElement:{browser:!0,export:!1,server:!1},snapLines:{browser:!1,export:!1,server:!1},originSnapOffset:{browser:!1,export:!1,server:!1},objectsSnapModeEnabled:{browser:!0,export:!1,server:!1},userToFollow:{browser:!1,export:!1,server:!1},followedBy:{browser:!1,export:!1,server:!1},isCropping:{browser:!1,export:!1,server:!1},croppingElementId:{browser:!1,export:!1,server:!1},searchMatches:{browser:!1,export:!1,server:!1}}))(),fD=e=>((e,t)=>{let n={};for(let r of Object.keys(e))if(pD[r]?.[t]){let t=e[r];n[r]=t}return n})(e,"export"),mD=({activeTool:e})=>"eraser"===e.type,gD=({activeTool:e})=>"hand"===e.type,bD=(e,t,n)=>Math.min(Math.max(e,t),n),UD=(e,t,n="round")=>{let r=Math.pow(10,t);return Math[n]((e+Number.EPSILON)*r)/r},yD=(e,t)=>(e+t)/2,xD=e=>"number"==typeof e&&Number.isFinite(e),vD=(e,t,n=1e-4)=>Math.abs(e-t)<n,wD=e=>e<0?e+2*Math.PI:e>=2*Math.PI?e-2*Math.PI:e;function SD(e){return e*Math.PI/180}function ED(e){return 180*e/Math.PI}function kD(e,t,n=0,r=0){return[e-n,t-r]}function CD(e,t=[0,0]){return kD(e[0]-t[0],e[1]-t[1])}function _D(e,t){return e[0]*t[1]-t[0]*e[1]}function MD(e,t){return e[0]*t[0]+e[1]*t[1]}function ID(e,t){return[e[0]+t[0],e[1]+t[1]]}function jD(e,t){return[e[0]-t[0],e[1]-t[1]]}function TD(e,t){return kD(e[0]*t,e[1]*t)}var RD=e=>{let t=function(e){return Math.sqrt(function(e){return e[0]*e[0]+e[1]*e[1]}(e))}(e);return 0===t?kD(0,0):kD(e[0]/t,e[1]/t)};function PD(e,t){return[e,t]}function AD(e){return 2===e.length?PD(e[0],e[1]):void 0}function ND(e,t=PD(0,0)){return PD(t[0]+e[0],t[1]+e[1])}function DD(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&!isNaN(e[0])&&"number"==typeof e[1]&&!isNaN(e[1])}function LD(e,t){let n=Math.abs;return n(e[0]-t[0])<1e-4&&n(e[1]-t[1])<1e-4}function OD([e,t],[n,r],i){return PD((e-n)*Math.cos(i)-(t-r)*Math.sin(i)+n,(e-n)*Math.sin(i)+(t-r)*Math.cos(i)+r)}function FD(e,t=[0,0]){return PD(e[0]+t[0],e[1]+t[1])}function zD(e,t){return PD((e[0]+t[0])/2,(e[1]+t[1])/2)}function BD(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1])}function HD(e,t){let n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}var $D=(e,t,n)=>FD(t,TD(CD(e,t),n)),WD=(e,t,n)=>t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1]);function XD(e,t){return[e,t]}function VD(e,t){return[e,t]}var GD=(e,t,n=1e-4)=>{let r=YD(e,t);return 0===r||r<n},YD=(e,t)=>{let n,r,[i,s]=e,[[a,o],[l,c]]=t,d=l-a,u=c-o,h=d*d+u*u,p=-1;0!==h&&(p=((i-a)*d+(s-o)*u)/h),p<0?(n=a,r=o):p>1?(n=l,r=c):(n=a+p*d,r=o+p*u);let f=i-n,m=s-r;return Math.sqrt(f*f+m*m)};function qD(e,t){let n=function(e,t){let n=e[1][1]-e[0][1],r=e[0][0]-e[1][0],i=t[1][1]-t[0][1],s=t[0][0]-t[1][0],a=n*s-i*r;if(0!==a){let o=n*e[0][0]+r*e[0][1],l=i*t[0][0]+s*t[0][1];return PD((o*s-l*r)/a,(n*l-i*o)/a)}return null}(XD(e[0],e[1]),XD(t[0],t[1]));return n&&GD(n,t)&&GD(n,e)?n:null}function ZD(e,t){return[e,t]}function KD(e,t,n,r){return[e,t,n,r]}function QD(e,t,n,r=1e-6){return[(e(t+r,n)-e(t-r,n))/(2*r),(e(t,n+r)-e(t,n-r))/(2*r)]}var JD=(e,t)=>PD((1-t)**3*e[0][0]+3*(1-t)**2*t*e[1][0]+3*(1-t)*t**2*e[2][0]+t**3*e[3][0],(1-t)**3*e[0][1]+3*(1-t)**2*t*e[1][1]+3*(1-t)*t**2*e[2][1]+t**3*e[3][1]);function eL(e,t){let n=function(e){let[t,n,r,i]=e,s=[t[0],n[0],r[0],i[0]],a=[t[1],n[1],r[1],i[1]];return[Math.min(...s),Math.min(...a),Math.max(...s),Math.max(...a)]}(e);if(0===function(e,t){return[VD(e[0],PD(e[1][0],e[0][1])),VD(PD(e[1][0],e[0][1]),e[1]),VD(e[1],PD(e[0][0],e[1][1])),VD(PD(e[0][0],e[1][1]),e[0])].map(e=>qD(t,e)).filter(e=>!!e)}(ZD(PD(n[0],n[1]),PD(n[2],n[3])),t).length)return[];let r=[[.5,0],[.2,0],[.8,0]],i=([n,r])=>{let i=function(e,t,n,r=.001,i=10){let s=1/0,a=0;for(;s>=r;){if(a>=i)return null;let r=e(t,n),o=[QD((t,n)=>e(t,n)[0],t,n),QD((t,n)=>e(t,n)[1],t,n)],l=[[-r[0]],[-r[1]]],c=o[0][0]*o[1][1]-o[0][1]*o[1][0];if(0===c)return null;let d=[[o[1][1]/c,-o[0][1]/c],[-o[1][0]/c,o[0][0]/c]],u=[[d[0][0]*l[0][0]+d[0][1]*l[1][0]],[d[1][0]*l[0][0]+d[1][1]*l[1][0]]];t+=u[0][0],n+=u[1][0];let[h,p]=e(t,n);s=Math.max(Math.abs(h),Math.abs(p)),a+=1}return[t,n]}((n,r)=>{let i=JD(e,n),s=(e=>PD(t[0][0]+e*(t[1][0]-t[0][0]),t[0][1]+e*(t[1][1]-t[0][1])))(r);return[i[0]-s[0],i[1]-s[1]]},n,r);if(!i)return null;let[s,a]=i;return s<0||s>1||a<0||a>1?null:JD(e,s)},s=i(r[0]);return s?[s]:(s=i(r[1]),s?[s]:(s=i(r[2]),s?[s]:[]))}function tL(e,t){let n=function(e,t,n=.001){let r=0;for(let s=1/0,a=0;a<30;a++){let n=BD(t,JD(e,a/30));n<s&&(s=n,r=a)}let i=((e,t,r,i=n)=>{let s,a=e,o=t;for(;o-a>i;)s=(o+a)/2,r(s-i)<r(s+i)?o=s:a=s;return s})(Math.max((r-1)/30,0),Math.min((r+1)/30,1),n=>BD(t,JD(e,n)));return i?JD(e,i):null}(e,t);return n?BD(t,n):0}function nL(...e){return sL(e)}function rL(e){return sL(e)}var iL=(e,t)=>{let n=e[0],r=e[1],i=!1;for(let s=0,a=t.length-1;s<t.length;a=s++){let e=t[s][0],o=t[s][1],l=t[a][0],c=t[a][1];(o>r&&c<=r||o<=r&&c>r)&&n<(l-e)*(r-o)/(c-o)+e&&(i=!i)}return i};function sL(e){return function(e){return LD(e[0],e[e.length-1])}(e)?e:[...e,e[0]]}function aL(e,t){return iO([e,t])}var oL=([e,t],[n,r])=>e<=n?t>=n:e>=n&&r>=e,lL=([e,t],[n,r])=>{let i=Math.max(e,n),s=Math.min(t,r);return i<=s?iO([i,s]):null},cL=(e,[t,n])=>e>=t&&e<=n;function dL([e,t,n],r){let i=(e,t,n)=>(e[0]-n[0])*(t[1]-n[1])-(t[0]-n[0])*(e[1]-n[1]),s=i(r,e,t),a=i(r,t,n),o=i(r,n,e);return!((s<0||a<0||o<0)&&(s>0||a>0||o>0))}var uL=()=>{let e=new Date;return`${e.getFullYear()}-${`${e.getMonth()+1}`.padStart(2,"0")}-${`${e.getDate()}`.padStart(2,"0")}-${`${e.getHours()}`.padStart(2,"0")}${`${e.getMinutes()}`.padStart(2,"0")}`},hL=e=>e.charAt(0).toUpperCase()+e.slice(1),pL=e=>e instanceof HTMLElement&&"wysiwyg"===e.dataset.type||e instanceof HTMLBRElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement,fL=e=>e instanceof HTMLElement&&"wysiwyg"===e.dataset.type||e instanceof HTMLBRElement||e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&("text"===e.type||"number"===e.type||"password"===e.type),mL=({fontFamily:e})=>{for(let[t,n]of Object.entries(qA))if(n===e)return`${t}${QA(n).map(e=>`, ${e}`).join("")}`;return YA},gL=({fontSize:e,fontFamily:t})=>`${e}px ${mL({fontFamily:t})}`,bL=(e,t)=>{let n=0,r=null,i=(...i)=>{r=i,clearTimeout(n),n=window.setTimeout(()=>{r=null,e(...i)},t)};return i.flush=()=>{if(clearTimeout(n),r){let t=r;r=null,e(...t)}},i.cancel=()=>{r=null,clearTimeout(n)},i},UL=(e,t)=>{let n=null,r=null,i=null,s=t=>{n=window.requestAnimationFrame(()=>{n=null,e(...t),r=null,i&&(r=i,i=null,s(r))})},a=(...a)=>{"test"!==BM.MODE?(r=a,null===n?s(r):t?.trailing&&(i=a)):e(...a)};return a.flush=()=>{null!==n&&(cancelAnimationFrame(n),n=null),r&&(e(...i||r),r=i=null)},a.cancel=()=>{r=i=null,null!==n&&(cancelAnimationFrame(n),n=null)},a},yL=e=>1-Math.pow(1-e,4),xL=(e,t,n)=>(t-e)*yL(n)+e,vL=(e,t)=>Math.abs(e-t),wL=(e,t)=>"custom"===t.type?{...e.activeTool,type:"custom",customType:t.customType,locked:t.locked??e.activeTool.locked}:{...e.activeTool,lastActiveTool:void 0===t.lastActiveToolBeforeEraser?e.activeTool.lastActiveTool:t.lastActiveToolBeforeEraser,type:t.type,customType:null,locked:t.locked??e.activeTool.locked},SL=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),yA?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),EL=({clientX:e,clientY:t},{zoom:n,offsetLeft:r,offsetTop:i,scrollX:s,scrollY:a})=>({x:(e-r)/n.value-s,y:(t-i)/n.value-a}),kL=({sceneX:e,sceneY:t},{zoom:n,offsetLeft:r,offsetTop:i,scrollX:s,scrollY:a})=>({x:(e+s)*n.value+r,y:(t+a)*n.value+i}),CL=e=>getComputedStyle(document.documentElement).getPropertyValue(`--${e}`),_L=new RegExp("^[^A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿Ⰰ-﬜﷾-﹯﻽-￿]*[֑-߿יִ-﷽ﹰ-ﻼ]"),ML=e=>_L.test(e),IL=e=>{let[t,n]=e;return{x:t,y:n}},jL=e=>{if("AbortError"!==e?.name)throw e},TL=(e,t,n=0)=>{n<0&&(n=e.length+n);let r=(n=Math.min(e.length,Math.max(n,0)))-1;for(;++r<e.length;)if(t(e[r],r,e))return r;return-1},RL=(e,t,n=e.length-1)=>{n<0&&(n=e.length+n);let r=(n=Math.min(e.length-1,Math.max(n,0)))+1;for(;--r>-1;)if(t(e[r],r,e))return r;return-1},PL=e=>{let t=5===e.length&&"0"===e.substr(4,1),n=9===e.length&&"00"===e.substr(7,2);return t||n||e===hA.transparent},AL=e=>"solid"!==e.fillStyle||PL(e.backgroundColor),NL=()=>OL()?1:Date.now(),DL=e=>e instanceof Map?e:e.reduce((e,t)=>(e.set("string"==typeof t?t:t.id,t),e),new Map),LL=(e,t)=>e.reduce((e,n)=>(e[t?t(n):String(n)]=n,e),{}),OL=()=>"test"===BM.MODE,FL=()=>"development"===BM.MODE,zL=(e,t)=>new CustomEvent(e,{detail:{nativeEvent:t},cancelable:!0}),BL=(e,t)=>{let n=!1;for(let r in t){let i=t[r];if(typeof i<"u"){if(e[r]===i&&("object"!=typeof i||null===i))continue;n=!0}}return n?{...e,...t}:e},HL=e=>!!e&&"object"==typeof e&&"then"in e&&"catch"in e&&"finally"in e,$L=e=>{let t=e?.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");return t?Array.from(t).filter(e=>e.tabIndex>-1&&!e.disabled):[]},WL=(e,t)=>!(!Array.isArray(e)||!Array.isArray(t)||0!==e.length||0!==t.length)||e===t,XL=(e,t,n,r=!1)=>{let i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;if(n&&Array.isArray(n)){for(let r of n)if(e[r]!==t[r]&&!WL(e[r],t[r]))return!1;return!0}return i.every(r=>{let i=n?.[r],s=i?i(e[r],t[r]):e[r]===t[r]||WL(e[r],t[r]);return s})},VL=(e,t,{checkForDefaultPrevented:n=!0}={})=>function(r){if(e?.(r),!n||!r?.defaultPrevented)return t?.(r)},GL=(e,t,n)=>{if(!t)return e;if(n)return e;throw new Error(t)};function YL(e,t){if(!e)throw new Error(t)}var qL=(e,t)=>e instanceof Set||e instanceof Map?e.has(t):"includes"in e?e.includes(t):e.hasOwnProperty(t),ZL=e=>JSON.parse(JSON.stringify(e)),KL=(e,t)=>XL(e,t)?e:t;function QL(e,t,n,r){return e?(e?.addEventListener?.(t,n,r),()=>{e?.removeEventListener?.(t,n,r)}):()=>{}}var JL,eO,tO,nO,rO=e=>e.replace(/\r?\n|\r/g,"\n"),iO=e=>e,sO=async(e,...t)=>new Promise(n=>{n(e(...t))}),aO=(...e)=>Math.max(...e.map(e=>e?1:0))>0,oO=class{constructor(e,t){XM(this,"pool"),XM(this,"entries",{}),this.pool=new mR(e,t)}all(){let e=e=>{if(e.data.result){let[t,n]=e.data.result;this.entries[t]=n}};return this.pool.addEventListener("fulfilled",e),this.pool.start().then(()=>(setTimeout(()=>{this.pool.removeEventListener("fulfilled",e)}),Object.values(this.entries)))}},lO=e=>e.replace(/"/g,"&quot;"),cO=e=>Array.isArray(e)?e:[e],dO=e=>!!e&&"image"===e.type&&!!e.fileId,uO=e=>!!e&&"image"===e.type,hO=e=>!!e&&"embeddable"===e.type,pO=e=>!!e&&"iframe"===e.type,fO=e=>!!e&&("iframe"===e.type||"embeddable"===e.type),mO=e=>null!=e&&"text"===e.type,gO=e=>null!=e&&"frame"===e.type,bO=e=>null!=e&&"magicframe"===e.type,UO=e=>null!=e&&("frame"===e.type||"magicframe"===e.type),yO=e=>null!=e&&xO(e.type),xO=e=>"freedraw"===e,vO=e=>null!=e&&EO(e.type),wO=e=>null!=e&&"arrow"===e.type,SO=e=>wO(e)&&e.elbowed,EO=e=>"arrow"===e||"line"===e,kO=(e,t=!0)=>null!=e&&(!e.locked||!0===t)&&CO(e.type),CO=e=>"arrow"===e,_O=(e,t=!0)=>!(null==e||e.locked&&!0!==t||"rectangle"!==e.type&&"diamond"!==e.type&&"ellipse"!==e.type&&"image"!==e.type&&"iframe"!==e.type&&"embeddable"!==e.type&&"frame"!==e.type&&"magicframe"!==e.type&&("text"!==e.type||e.containerId)),MO=(e,t=!0)=>null!=e&&(!e.locked||!0===t)&&("rectangle"===e.type||"diamond"===e.type||"ellipse"===e.type||wO(e)),IO=e=>{let t=e?.type;if(!t)return!1;switch(t){case"text":case"diamond":case"rectangle":case"iframe":case"embeddable":case"ellipse":case"arrow":case"freedraw":case"line":case"frame":case"magicframe":case"image":case"selection":return!0;default:return GL(t,null),!1}},jO=e=>"rectangle"===e.type||"ellipse"===e.type||"diamond"===e.type,TO=e=>MO(e)&&!!e.boundElements?.some(({type:e})=>"text"===e),RO=e=>null!==e&&"containerId"in e&&null!==e.containerId&&mO(e),PO=e=>"rectangle"===e||"embeddable"===e||"iframe"===e||"image"===e,AO=e=>"line"===e||"arrow"===e||"diamond"===e,NO=(e,t)=>!!((e===PN||e===TN)&&PO(t.type)||e===RN&&AO(t.type)),DO=e=>AO(e.type)?{type:RN}:PO(e.type)?{type:PN}:null,LO=e=>Object.hasOwn(e,"fixedPoint")&&null!=e.fixedPoint,OO=(e,t,n)=>{let r=e.split("\n").map(e=>e||" ").join("\n"),i=parseFloat(t),s=qO(r,i,n);return{width:YO(r,t),height:s}},FO="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".toLocaleUpperCase(),zO=(e,t)=>{let n=KO(e);return 0===n?OO(FO.split("").join("\n"),e,t).width+10:n+10},BO=(e,t)=>OO("",e,t).width+10,HO=e=>rO(e).replace(/\t/g,"        "),$O=e=>HO(e).split("\n"),WO=(e,t)=>e*t,XO=(e,t)=>WO(e,t)+10,VO=class{constructor(){XM(this,"canvas"),this.canvas=document.createElement("canvas")}getLineWidth(e,t){let n=this.canvas.getContext("2d");n.font=t;let r=n.measureText(e).width;return OL()?10*r:r}},GO=(e,t)=>(JL||(JL=new VO),JL.getLineWidth(e,t)),YO=(e,t)=>{let n=$O(e),r=0;return n.forEach(e=>{r=Math.max(r,GO(e,t))}),r},qO=(e,t,n)=>{let r=$O(e).length;return WO(t,n)*r},ZO=(()=>{let e={};return{calculate:(t,n)=>{let r=t.charCodeAt(0);if(e[n]||(e[n]=[]),!e[n][r]){let i=GO(t,n);e[n][r]=i}return e[n][r]},getCache:t=>e[t],clearCache:t=>{e[t]=[]}}})(),KO=e=>{let t=ZO.getCache(e);if(!t)return 0;let n=t.filter(e=>void 0!==e);return Math.max(...n)},QO=()=>(nO||(nO=oF()),nO),JO=/\s/u,eF=/-/u,tF=/<\(\[\{/u,nF=/>\)\]\}.,:;!\?…\//u,rF={CHAR:new RegExp("\\p{Script=Han}\\p{Script=Hiragana}\\p{Script=Katakana}\\p{Script=Hangul}｀＇＾〃〰〆＃＆＊＋－ー／＼＝｜￤〒￢￣","u"),OPENING:/（［｛〈《｟｢「『【〖〔〘〚＜〝/u,CLOSING:/）］｝〉》｠｣」』】〗〕〙〛＞。．，、〟‥？！：；・〜〞/u,CURRENCY:/￥￦￡￠＄/u},iF={FLAG:new RegExp("\\p{RI}\\p{RI}","u"),JOINER:new RegExp("(?:\\p{Emoji_Modifier}|\\uFE0F\\u20E3?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?","u"),ZWJ:/\u200D/u,ANY:/[\p{Emoji}]/u,MOST:/[\p{Extended_Pictographic}\p{Emoji_Presentation}]/u},sF=()=>lF.or(QO(),cF.On(eF,JO,rF.CHAR)),aF=()=>lF.or(QO(),cF.Before(JO).Build(),cF.After(JO,eF).Build(),cF.Before(rF.CHAR,rF.CURRENCY).NotPrecededBy(tF,rF.OPENING).Build(),cF.After(rF.CHAR).NotFollowedBy(eF,nF,rF.CLOSING).Build(),cF.BeforeMany(rF.OPENING).NotPrecededBy(tF).Build(),cF.AfterMany(rF.CLOSING).NotFollowedBy(nF).Build(),cF.AfterMany(nF).FollowedBy(tF).Build()),oF=()=>lF.group(lF.or(iF.FLAG,lF.and(iF.MOST,iF.JOINER,lF.build(`(?:${iF.ZWJ.source}(?:${iF.FLAG.source}|${iF.ANY.source}${iF.JOINER.source}))*`)))),lF={build:e=>new RegExp(e,"u"),join:(...e)=>e.map(e=>e.source).join(""),and:(...e)=>lF.build(lF.join(...e)),or:(...e)=>lF.build(e.map(e=>e.source).join("|")),group:(...e)=>lF.build(`(${lF.join(...e)})`),class:(...e)=>lF.build(`[${lF.join(...e)}]`)},cF={On:(...e)=>{let t=lF.join(...e);return lF.build(`([${t}])`)},Before:(...e)=>{let t=lF.join(...e);return cF.Chain(()=>lF.build(`(?=[${t}])`))},After:(...e)=>{let t=lF.join(...e);return cF.Chain(()=>lF.build(`(?<=[${t}])`))},BeforeMany:(...e)=>{let t=lF.join(...e);return cF.Chain(()=>lF.build(`(?<![${t}])(?=[${t}])`))},AfterMany:(...e)=>{let t=lF.join(...e);return cF.Chain(()=>lF.build(`(?<=[${t}])(?![${t}])`))},NotBefore:(...e)=>{let t=lF.join(...e);return cF.Chain(()=>lF.build(`(?![${t}])`))},NotAfter:(...e)=>{let t=lF.join(...e);return cF.Chain(()=>lF.build(`(?<![${t}])`))},Chain:e=>({Build:e,PreceededBy:(...t)=>{let n=e(),r=cF.After(...t).Build();return cF.Chain(()=>lF.and(r,n))},FollowedBy:(...t)=>{let n=e(),r=cF.Before(...t).Build();return cF.Chain(()=>lF.and(n,r))},NotPrecededBy:(...t)=>{let n=e(),r=cF.NotAfter(...t).Build();return cF.Chain(()=>lF.and(r,n))},NotFollowedBy:(...t)=>{let n=e(),r=cF.NotBefore(...t).Build();return cF.Chain(()=>lF.and(n,r))}})},dF=e=>{let t=(()=>{if(!tO)try{tO=aF()}catch{tO=sF()}return tO})();return e.normalize("NFC").split(t).filter(Boolean)},uF=(e,t,n)=>{if(!Number.isFinite(n)||n<0)return e;let r=[],i=e.split("\n");for(let s of i){if(GO(s,t)<=n){r.push(s);continue}let e=hF(s,t,n);r.push(...e)}return r.join("\n")},hF=(e,t,n)=>{let r=[],i=dF(e)[Symbol.iterator](),s="",a=0,o=i.next();for(;!o.done;){let e=o.value,l=s+e,c=mF(e)?a+ZO.calculate(e,t):GO(l,t);if(/\s/.test(e)||c<=n)s=l,a=c,o=i.next();else if(s)r.push(s.trimEnd()),s="",a=0;else{let l=pF(e,t,n),c=l[l.length-1]??"",d=l.slice(0,-1);r.push(...d),s=c,a=GO(c,t),o=i.next()}}if(s){let e=fF(s,t,n);r.push(e)}return r},pF=(e,t,n)=>{if(QO().test(e))return[e];gF(e);let r=[],i=Array.from(e),s="",a=0;for(let o of i){let e=ZO.calculate(o,t),i=a+e;i<=n?(s+=o,a=i):(s&&r.push(s),s=o,a=e)}return s&&r.push(s),r},fF=(e,t,n)=>{if(!(GO(e,t)>n))return e;let[,r,i]=e.match(/^(.+?)(\s+)$/)??[e,e.trimEnd(),""],s=GO(r,t);for(let a of Array.from(i)){let e=s+ZO.calculate(a,t);if(e>n)break;r+=a,s=e}return r},mF=e=>void 0!==e.codePointAt(0)&&void 0===e.codePointAt(1),gF=e=>{if((BM.MODE===$A||BM.DEV)&&/\s/.test(e))throw new Error("Word should not contain any whitespaces!")},bF=class{};XM(bF,"rg",new UP),XM(bF,"cache",new WeakMap),XM(bF,"get",e=>bF.cache.get(e)),XM(bF,"set",(e,t)=>bF.cache.set(e,t)),XM(bF,"delete",e=>bF.cache.delete(e)),XM(bF,"destroy",()=>{bF.cache=new WeakMap}),XM(bF,"generateElementShape",(e,t)=>{let n=t?.isExporting?void 0:bF.get(e);if(void 0!==n)return n;xW.delete(e);let r=JW(e,bF.rg,t||{isExporting:!1,canvasBackgroundColor:hA.white,embedsValidationStatus:null});return bF.cache.set(e,r),r});var UF=bF,yF=e=>e===JA?aR.white:"#1e1e1e",xF=(t,n=512)=>{let{width:r=512,height:i=r,mirror:s,style:a,...o}="number"==typeof n?{width:n}:n;return e.jsx("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:`0 0 ${r} ${i}`,className:BP({"rtl-mirror":s}),style:a,...o,children:"string"==typeof t?e.jsx("path",{fill:"currentColor",d:t}):t})},vF={width:24,height:24,fill:"none",strokeWidth:2,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},wF={width:20,height:20,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"};xF(e.jsxs("g",{strokeWidth:"1.5",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("rect",{x:3,y:8,width:18,height:4,rx:1}),e.jsx("line",{x1:12,y1:8,x2:12,y2:21}),e.jsx("path",{d:"M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7"}),e.jsx("path",{d:"M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5"})]}),vF);var SF=xF(e.jsxs("g",{strokeWidth:"1.25",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),e.jsx("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),e.jsx("line",{x1:"3",y1:"6",x2:"3",y2:"19"}),e.jsx("line",{x1:"12",y1:"6",x2:"12",y2:"19"}),e.jsx("line",{x1:"21",y1:"6",x2:"21",y2:"19"})]}),vF),EF=xF(e.jsxs("svg",{strokeWidth:"1.5",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),vF),kF=xF(e.jsxs("g",{strokeWidth:"1.5",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("circle",{cx:"12",cy:"12",r:"1"}),e.jsx("circle",{cx:"12",cy:"19",r:"1"}),e.jsx("circle",{cx:"12",cy:"5",r:"1"})]}),vF),CF=xF(e.jsxs("svg",{strokeWidth:"1.5",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"21"}),e.jsx("line",{x1:"8",y1:"4",x2:"16",y2:"4"})]}),vF),_F=xF(e.jsxs("g",{children:[e.jsx("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z",stroke:"currentColor",strokeWidth:"1.25"}),e.jsx("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z",stroke:"currentColor",strokeWidth:"1.25"}),e.jsx("mask",{id:"UnlockedIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:6,y:1,width:9,height:9,children:e.jsx("path",{stroke:"none",d:"M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481",fill:"#fff"})}),e.jsx("g",{mask:"url(#UnlockedIcon)",children:e.jsx("path",{stroke:"none",d:"M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z",fill:"currentColor"})})]}),wF),MF=xF(e.jsxs("g",{strokeWidth:"1.25",children:[e.jsx("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z"}),e.jsx("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z"}),e.jsx("path",{d:"M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916"})]}),wF),IF=xF(e.jsxs(e.Fragment,{children:[e.jsx("path",{d:"M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z",fill:"currentColor"}),e.jsx("path",{d:"M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:41,height:94,fill:"none"}),jF=xF(e.jsxs(e.Fragment,{children:[e.jsx("path",{d:"M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z",fill:"currentColor"}),e.jsx("path",{d:"M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:85,height:71,fill:"none"}),TF=xF(e.jsxs(e.Fragment,{children:[e.jsx("path",{d:"M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z",fill:"currentColor"}),e.jsx("path",{d:"M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:38,height:78,fill:"none"});xF(e.jsx("g",{fill:"currentColor",children:e.jsx("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),{width:40,height:40,fill:"none"});var RF=xF(e.jsxs("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z"}),e.jsx("path",{d:"M13.5 13.5l4.5 4.5"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25}),PF=xF(e.jsxs("g",{strokeWidth:"1.5",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})]}),vF),AF=xF(e.jsxs("g",{strokeWidth:"1.5",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z"})]}),vF),NF=xF(e.jsxs("g",{strokeWidth:"1.5",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("circle",{cx:"12",cy:"12",r:"9"})]}),vF),DF=xF(e.jsxs("g",{strokeWidth:"1.5",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),e.jsx("line",{x1:"15",y1:"16",x2:"19",y2:"12"}),e.jsx("line",{x1:"15",y1:"8",x2:"19",y2:"12"})]}),vF),LF=xF(e.jsx("path",{d:"M4.167 10h11.666",strokeWidth:"1.5"}),wF),OF=xF(e.jsxs("g",{strokeWidth:"1.25",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),e.jsx("path",{d:"M16 7h4"}),e.jsx("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"})]}),vF),FF=xF(e.jsxs("g",{strokeWidth:"1.25",children:[e.jsx("path",{clipRule:"evenodd",d:"m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z"}),e.jsx("path",{d:"m11.25 5.417 3.333 3.333"})]}),wF),zF=xF(e.jsxs("g",{strokeWidth:"1.5",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("line",{x1:"4",y1:"20",x2:"7",y2:"20"}),e.jsx("line",{x1:"14",y1:"20",x2:"21",y2:"20"}),e.jsx("line",{x1:"6.9",y1:"15",x2:"13.8",y2:"15"}),e.jsx("line",{x1:"10.2",y1:"6.3",x2:"16",y2:"20"}),e.jsx("polyline",{points:"5 20 11 4 13 4 20 20"})]}),vF),BF=xF(e.jsxs("g",{strokeWidth:"1.25",children:[e.jsx("path",{d:"M12.5 6.667h.01"}),e.jsx("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z"}),e.jsx("path",{d:"m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166"}),e.jsx("path",{d:"m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667"})]}),wF),HF=xF(e.jsxs("g",{strokeWidth:"1.5",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),e.jsx("path",{d:"M18 13.3l-6.3 -6.3"})]}),vF),$F=xF(e.jsx("path",{strokeWidth:"1.25",d:"M10 4.167v11.666M4.167 10h11.666"}),wF),WF=xF(e.jsx("path",{d:"M5 10h10",strokeWidth:"1.25"}),wF),XF=xF(e.jsxs("g",{strokeWidth:1.25,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M21 21l-6 -6"}),e.jsx("path",{d:"M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403"}),e.jsx("path",{d:"M3 4v4h4"})]}),vF),VF=xF(e.jsx("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"}),wF),GF=xF(e.jsxs("g",{strokeWidth:"1.25",children:[e.jsx("polyline",{points:"12 16 18 10 12 4"}),e.jsx("polyline",{points:"8 4 2 10 8 16"})]}),wF),YF=xF(e.jsxs("g",{strokeWidth:"1.25",children:[e.jsx("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),e.jsx("path",{clipRule:"evenodd",d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]}),wF),qF=xF(e.jsx("path",{clipRule:"evenodd",d:"M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z",stroke:"currentColor"}),wF),ZF=xF(e.jsx("g",{stroke:"currentColor",strokeLinejoin:"round",children:e.jsx("path",{d:"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667"})}),{...wF,strokeWidth:1.5}),KF=xF(e.jsxs("g",{strokeWidth:"1.5",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),e.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),e.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]}),vF),QF=xF(e.jsx("path",{strokeWidth:"1.25",d:"M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10"}),wF),JF=xF(e.jsxs("g",{strokeWidth:"1.5",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("circle",{cx:"12",cy:"12",r:"9"}),e.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),e.jsx("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),vF),ez=xF(e.jsxs("g",{strokeWidth:"1.25",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("circle",{cx:"12",cy:"12",r:"9"}),e.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),e.jsx("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),vF),tz=xF(e.jsx("path",{strokeWidth:"1.25",d:"M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5"}),wF),nz=xF(e.jsx("path",{d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"}),wF),rz=xF(e.jsxs("g",{strokeWidth:"1.25",children:[e.jsx("path",{d:"M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0"}),e.jsx("path",{d:"M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084"})]}),wF),iz=xF(e.jsxs("g",{strokeWidth:"1.25",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M4 4l11.733 16h4.267l-11.733 -16z"}),e.jsx("path",{d:"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"})]}),vF),sz=xF(e.jsx("polyline",{fill:"none",stroke:"currentColor",points:"20 6 9 17 4 12"}),{width:24,height:24}),az=xF(e.jsxs("g",{strokeWidth:"1.25",children:[e.jsx("path",{d:"M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416"}),e.jsx("path",{d:"M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416"})]}),wF),oz=xF("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z",{width:448,height:512}),lz=xF("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z",{width:448,height:512}),cz=xF(e.jsx("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"}),wF);xF("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z",{width:384,height:512});var dz=xF("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"),uz=xF(e.jsxs("g",{strokeWidth:1.25,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M5 16l1.465 1.638a2 2 0 1 1 -3.015 .099l1.55 -1.737z"}),e.jsx("path",{d:"M13.737 9.737c2.299 -2.3 3.23 -5.095 2.081 -6.245c-1.15 -1.15 -3.945 -.217 -6.244 2.082c-2.3 2.299 -3.231 5.095 -2.082 6.244c1.15 1.15 3.946 .218 6.245 -2.081z"}),e.jsx("path",{d:"M7.492 11.818c.362 .362 .768 .676 1.208 .934l6.895 4.047c1.078 .557 2.255 -.075 3.692 -1.512c1.437 -1.437 2.07 -2.614 1.512 -3.692c-.372 -.718 -1.72 -3.017 -4.047 -6.895a6.015 6.015 0 0 0 -.934 -1.208"})]}),vF),hz=xF(e.jsxs("g",{strokeWidth:"1.25",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M15 8h.01"}),e.jsx("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),e.jsx("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),e.jsx("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),e.jsx("path",{d:"M19 16v6"}),e.jsx("path",{d:"M22 19l-3 3l-3 -3"})]}),vF),pz=xF("M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z",{width:512,height:512});xF("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512}),xF("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});var fz=xF("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z");xF("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z");var mz=xF(e.jsx("path",{d:"M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5",strokeWidth:"1.25"}),wF),gz=xF(e.jsx("path",{d:"M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5",strokeWidth:"1.25"}),wF),bz=xF("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z",{mirror:!0});xF(e.jsx("path",{d:"M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834",strokeWidth:"1.5"}),wF),xF("M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"),xF("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z",{width:24,height:24}),xF(e.jsxs("g",{strokeWidth:1.25,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1"}),e.jsx("path",{d:"M12 14v-11"}),e.jsx("path",{d:"M9 6l3 -3l3 3"})]}),vF),xF(e.jsxs(e.Fragment,{children:[e.jsx("path",{fill:"currentColor",d:"M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z"}),e.jsx("path",{stroke:"currentColor",fill:"currentColor",d:"M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z"})]}),{width:64,height:64}),xF(e.jsx("path",{stroke:"currentColor",strokeWidth:"40",fill:"currentColor",d:"M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z"}),{width:1024});var Uz=e.jsxs("g",{strokeWidth:1.5,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M12 10l0 10"}),e.jsx("path",{d:"M12 10l4 4"}),e.jsx("path",{d:"M12 10l-4 4"}),e.jsx("path",{d:"M4 4l16 0"})]}),yz=e.jsxs("g",{strokeWidth:1.5,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M12 5l0 14"}),e.jsx("path",{d:"M16 9l-4 -4"}),e.jsx("path",{d:"M8 9l4 -4"})]}),xz=xF(yz,vF),vz=xF(yz,{...vF,style:{transform:"rotate(180deg)"}}),wz=xF(Uz,vF),Sz=xF(Uz,{...vF,style:{transform:"rotate(180deg)"}}),Ez=xF(e.jsxs(e.Fragment,{children:[e.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[e.jsx("path",{d:"M3.333 3.333h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z"})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"a",children:e.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),wF),kz=xF(e.jsxs(e.Fragment,{children:[e.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[e.jsx("path",{d:"M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z"})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"a",children:e.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),wF),Cz=xF(e.jsxs(e.Fragment,{children:[e.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[e.jsx("path",{d:"M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z"})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"a",children:e.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),wF),_z=xF(e.jsxs(e.Fragment,{children:[e.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[e.jsx("path",{d:"M16.667 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z"})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"a",children:e.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),wF),Mz=xF(e.jsxs(e.Fragment,{children:[e.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[e.jsx("path",{d:"M16.667 3.333v13.334M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z"})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"a",children:e.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),wF),Iz=xF(e.jsxs(e.Fragment,{children:[e.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[e.jsx("path",{d:"M3.333 3.333h13.334M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z"})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"a",children:e.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),wF),jz=xF(e.jsxs("g",{stroke:"currentColor",strokeWidth:"1.25",children:[e.jsx("path",{d:"M1.667 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8.333 10h3.334",strokeLinejoin:"round"}),e.jsx("path",{d:"M15.417 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z"})]}),wF),Tz=xF(e.jsxs("g",{stroke:"currentColor",strokeWidth:"1.25",children:[e.jsx("path",{d:"M10 18.333v-2.916",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M10 11.667V8.333",strokeLinejoin:"round"}),e.jsx("path",{d:"M10 4.583V1.667",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z"})]}),wF),Rz=xF(e.jsxs("g",{strokeWidth:"1.5",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),e.jsx("path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85"})]}),vF);xF("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z"),xF("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z");var Pz=xF(e.jsxs(e.Fragment,{children:[e.jsx("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 5 5 15M5 5l10 10"})}),e.jsx("defs",{children:e.jsx("clipPath",{id:"a",children:e.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),wF);xF("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z",{mirror:!0}),xF("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z",{width:24}),xF("M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z",{width:384,height:512});var Az=St.memo(({theme:t})=>xF(e.jsxs(e.Fragment,{children:[e.jsx("path",{d:"M25 26H111V111H25",fill:"var(--icon-fill-color)"}),e.jsx("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:"var(--icon-fill-color)",strokeWidth:"2"}),e.jsx("path",{d:"M100 100H160V160H100",fill:"var(--icon-fill-color)"}),e.jsx("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:"var(--icon-fill-color)",strokeWidth:"2"}),e.jsxs("g",{fill:yF(t),stroke:"var(--icon-fill-color)",strokeWidth:"6",children:[e.jsx("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),e.jsx("rect",{x:"2.5",y:"149.5",width:"30",height:"30"}),e.jsx("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),e.jsx("rect",{x:"147.5",y:"2.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),Nz=St.memo(({theme:t})=>xF(e.jsxs(e.Fragment,{children:[e.jsx("path",{d:"M25 26H111V111H25",fill:"var(--icon-fill-color)"}),e.jsx("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:"var(--icon-fill-color)",strokeWidth:"2"}),e.jsx("path",{d:"M100 100H160V160H100",fill:"var(--icon-fill-color)"}),e.jsx("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:"var(--icon-fill-color)",strokeWidth:"2"}),e.jsxs("g",{fill:yF(t),stroke:"var(--icon-fill-color)",strokeWidth:"6",children:[e.jsx("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),e.jsx("rect",{x:"78.5",y:"149.5",width:"30",height:"30"}),e.jsx("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),e.jsx("rect",{x:"147.5",y:"78.5",width:"30",height:"30"}),e.jsx("rect",{x:"105.5",y:"2.5",width:"30",height:"30"}),e.jsx("rect",{x:"2.5",y:"102.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),Dz=xF(e.jsx("g",{strokeWidth:1.25,children:e.jsx("path",{d:"M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793"})}),wF),Lz=xF(e.jsxs(e.Fragment,{children:[e.jsx("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),e.jsx("mask",{id:"FillHachureIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:2,y:2,width:16,height:16,children:e.jsx("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.25"})}),e.jsx("g",{mask:"url(#FillHachureIcon)",children:e.jsx("path",{d:"M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})})]}),wF),Oz=xF(e.jsxs(e.Fragment,{children:[e.jsxs("g",{clipPath:"url(#a)",children:[e.jsx("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),e.jsx("mask",{id:"FillCrossHatchIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:-1,y:-1,width:22,height:22,children:e.jsx("path",{d:"M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("g",{mask:"url(#FillCrossHatchIcon)",children:e.jsx("path",{d:"M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z",fill:"currentColor"})})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"a",children:e.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),wF),Fz=xF(e.jsxs(e.Fragment,{children:[e.jsx("g",{clipPath:"url(#a)",children:e.jsx("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z",stroke:"currentColor",strokeWidth:"1.25"})}),e.jsx("defs",{children:e.jsx("clipPath",{id:"a",children:e.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),{...wF,fill:"currentColor"}),zz=xF(e.jsx(e.Fragment,{children:e.jsx("path",{d:"M4.167 10h11.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),wF),Bz=xF(e.jsx("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),wF),Hz=xF(e.jsx("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"3.75",strokeLinecap:"round",strokeLinejoin:"round"}),wF);St.memo(({theme:t})=>xF(e.jsx("path",{d:"M6 10H34",stroke:"var(--icon-fill-color)",strokeWidth:2,fill:"none",strokeLinecap:"round"}),{width:40,height:20}));var $z=xF(e.jsxs("g",{strokeWidth:"2",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M5 12h2"}),e.jsx("path",{d:"M17 12h2"}),e.jsx("path",{d:"M11 12h2"})]}),vF),Wz=xF(e.jsxs("g",{strokeWidth:"2",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M4 12v.01"}),e.jsx("path",{d:"M8 12v.01"}),e.jsx("path",{d:"M12 12v.01"}),e.jsx("path",{d:"M16 12v.01"}),e.jsx("path",{d:"M20 12v.01"})]}),vF),Xz=xF(e.jsx("path",{d:"M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814",strokeWidth:"1.25"}),wF),Vz=xF(e.jsx("path",{d:"M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43",strokeWidth:"1.25"}),wF),Gz=xF(e.jsx("path",{d:"M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42",strokeWidth:"1.25"}),wF),Yz=xF(e.jsxs("svg",{strokeWidth:"1.5",children:[e.jsx("path",{d:"M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10"}),e.jsx("path",{d:"M13.3333 3.33331V3.34331"}),e.jsx("path",{d:"M16.6667 3.33331V3.34331"}),e.jsx("path",{d:"M16.6667 6.66669V6.67669"}),e.jsx("path",{d:"M16.6667 10V10.01"}),e.jsx("path",{d:"M3.33334 13.3333V13.3433"}),e.jsx("path",{d:"M16.6667 13.3333V13.3433"}),e.jsx("path",{d:"M3.33334 16.6667V16.6767"}),e.jsx("path",{d:"M6.66666 16.6667V16.6767"}),e.jsx("path",{d:"M10 16.6667V16.6767"}),e.jsx("path",{d:"M13.3333 16.6667V16.6767"}),e.jsx("path",{d:"M16.6667 16.6667V16.6767"})]}),wF),qz=xF(e.jsxs("g",{strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M4 12v-4a4 4 0 0 1 4 -4h4"}),e.jsx("line",{x1:"16",y1:"4",x2:"16",y2:"4.01"}),e.jsx("line",{x1:"20",y1:"4",x2:"20",y2:"4.01"}),e.jsx("line",{x1:"20",y1:"8",x2:"20",y2:"8.01"}),e.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"12.01"}),e.jsx("line",{x1:"4",y1:"16",x2:"4",y2:"16.01"}),e.jsx("line",{x1:"20",y1:"16",x2:"20",y2:"16.01"}),e.jsx("line",{x1:"4",y1:"20",x2:"4",y2:"20.01"}),e.jsx("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),e.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"20.01"}),e.jsx("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"}),e.jsx("line",{x1:"20",y1:"20",x2:"20",y2:"20.01"})]}),vF),Zz=xF(e.jsxs("g",{stroke:"currentColor",opacity:.3,strokeWidth:2,children:[e.jsx("path",{d:"M12 12l9 0"}),e.jsx("path",{d:"M3 9l6 6"}),e.jsx("path",{d:"M3 15l6 -6"})]}),vF),Kz=St.memo(({flip:t=!1})=>xF(e.jsxs("g",{transform:t?"translate(40, 0) scale(-1, 1)":"",stroke:"currentColor",strokeWidth:2,fill:"none",children:[e.jsx("path",{d:"M34 10H6M34 10L27 5M34 10L27 15"}),e.jsx("path",{d:"M27.5 5L34.5 10L27.5 15"})]}),{width:40,height:20})),Qz=St.memo(({flip:t=!1})=>xF(e.jsxs("g",{stroke:"currentColor",fill:"currentColor",transform:t?"translate(40, 0) scale(-1, 1)":"",children:[e.jsx("path",{d:"M32 10L6 10",strokeWidth:2}),e.jsx("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),Jz=St.memo(({flip:t=!1})=>xF(e.jsxs("g",{stroke:"currentColor",fill:"none",transform:t?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,children:[e.jsx("path",{d:"M26 10L6 10"}),e.jsx("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),eB=St.memo(({flip:t=!1})=>xF(e.jsx("g",{transform:t?"translate(40, 0) scale(-1, 1)":"",children:e.jsx("path",{d:"M34 10H5.99996M34 10L34 5M34 10L34 15",stroke:"currentColor",strokeWidth:2,fill:"none"})}),{width:40,height:20})),tB=St.memo(({flip:t=!1})=>xF(e.jsxs("g",{stroke:"currentColor",fill:"currentColor",transform:t?"translate(40, 0) scale(-1, 1)":"",children:[e.jsx("path",{d:"M32 10L6 10",strokeWidth:2}),e.jsx("path",{d:"M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5"})]}),{width:40,height:20})),nB=St.memo(({flip:t=!1})=>xF(e.jsxs("g",{stroke:"currentColor",fill:"none",transform:t?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,strokeLinejoin:"round",children:[e.jsx("path",{d:"M6,9.5H27"}),e.jsx("path",{d:"M27,5L34,10L27,14Z",fill:"none"})]}),{width:40,height:20})),rB=St.memo(({flip:t=!1})=>xF(e.jsxs("g",{stroke:"currentColor",fill:"currentColor",transform:t?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[e.jsx("path",{d:"M6,9.5H20"}),e.jsx("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),iB=St.memo(({flip:t=!1})=>xF(e.jsxs("g",{stroke:"currentColor",fill:"none",transform:t?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[e.jsx("path",{d:"M6,9.5H20"}),e.jsx("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),sB=St.memo(({flip:t=!1})=>xF(e.jsx("g",{stroke:"currentColor",fill:"none",transform:t?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:e.jsx("path",{d:"M34,10 H6 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),aB=St.memo(({flip:t=!1})=>xF(e.jsx("g",{stroke:"currentColor",fill:"none",transform:t?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:e.jsx("path",{d:"M34,10 H6 M15,10 L15,15 L15,5"})}),{width:40,height:20})),oB=St.memo(({flip:t=!1})=>xF(e.jsx("g",{stroke:"currentColor",fill:"none",transform:t?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:e.jsx("path",{d:"M34,10 H6 M15,10 L15,16 L15,4 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),lB=xF(e.jsxs(e.Fragment,{children:[e.jsx("g",{clipPath:"url(#a)",children:e.jsx("path",{d:"M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("defs",{children:e.jsx("clipPath",{id:"a",children:e.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),wF),cB=xF(e.jsxs(e.Fragment,{children:[e.jsx("g",{clipPath:"url(#a)",children:e.jsx("path",{d:"M5 16.667V3.333L10 15l5-11.667v13.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("defs",{children:e.jsx("clipPath",{id:"a",children:e.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),wF),dB=xF(e.jsxs(e.Fragment,{children:[e.jsx("g",{clipPath:"url(#a)",children:e.jsx("path",{d:"M5.833 3.333v13.334h8.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("defs",{children:e.jsx("clipPath",{id:"a",children:e.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),wF),uB=xF(e.jsx(e.Fragment,{children:e.jsx("path",{d:"m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),wF),hB=xF(e.jsxs("g",{strokeWidth:1.25,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M3 7v-2h13v2"}),e.jsx("path",{d:"M10 5v14"}),e.jsx("path",{d:"M12 19h-4"}),e.jsx("path",{d:"M15 13v-1h6v1"}),e.jsx("path",{d:"M18 12v7"}),e.jsx("path",{d:"M17 19h2"})]}),vF),pB=xF(e.jsx(e.Fragment,{children:e.jsxs("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M7 12h10"}),e.jsx("path",{d:"M7 5v14"}),e.jsx("path",{d:"M17 5v14"}),e.jsx("path",{d:"M15 19h4"}),e.jsx("path",{d:"M15 5h4"}),e.jsx("path",{d:"M5 19h4"}),e.jsx("path",{d:"M5 5h4"})]})}),vF),fB=xF(e.jsx(e.Fragment,{children:e.jsx("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334"})})}),wF),mB=xF(e.jsxs(e.Fragment,{children:[e.jsx("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667"})}),e.jsx("defs",{children:e.jsx("clipPath",{id:"a",children:e.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),wF),gB=xF(e.jsxs("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),e.jsx("line",{x1:"4",y1:"12",x2:"12",y2:"12"}),e.jsx("line",{x1:"4",y1:"16",x2:"16",y2:"16"})]}),vF),bB=xF(e.jsxs("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),e.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),e.jsx("line",{x1:"6",y1:"16",x2:"18",y2:"16"})]}),vF),UB=xF(e.jsxs("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),e.jsx("line",{x1:"10",y1:"12",x2:"20",y2:"12"}),e.jsx("line",{x1:"8",y1:"16",x2:"20",y2:"16"})]}),vF),yB=St.memo(({theme:t})=>xF(e.jsxs("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("line",{x1:"4",y1:"4",x2:"20",y2:"4"}),e.jsx("rect",{x:"9",y:"8",width:"6",height:"12",rx:"2"})]}),vF)),xB=St.memo(({theme:t})=>xF(e.jsxs("g",{strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("line",{x1:"4",y1:"20",x2:"20",y2:"20"}),e.jsx("rect",{x:"9",y:"4",width:"6",height:"12",rx:"2"})]}),vF)),vB=St.memo(({theme:t})=>xF(e.jsxs("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("line",{x1:"4",y1:"12",x2:"9",y2:"12"}),e.jsx("line",{x1:"15",y1:"12",x2:"20",y2:"12"}),e.jsx("rect",{x:"9",y:"6",width:"6",height:"12",rx:"2"})]}),vF)),wB=xF(e.jsxs("g",{children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M21 19h-18l9 -15"}),e.jsx("path",{d:"M20.615 15.171h.015"}),e.jsx("path",{d:"M19.515 11.771h.015"}),e.jsx("path",{d:"M17.715 8.671h.015"}),e.jsx("path",{d:"M15.415 5.971h.015"})]}),vF),SB=xF(e.jsx("path",{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z",fill:"currentColor"}),{width:640,height:512});xF(e.jsx("path",{d:"M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z"}));var EB=xF(e.jsxs("g",{strokeWidth:1.25,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"}),e.jsx("path",{d:"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"}),e.jsx("path",{d:"M14 5.5a1.5 1.5 0 0 1 3 0v6.5"}),e.jsx("path",{d:"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"})]}),vF),kB=xF(e.jsxs(e.Fragment,{children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),e.jsx("path",{d:"M7 11l5 5l5 -5"}),e.jsx("path",{d:"M12 4l0 12"})]}),vF),CB=xF(e.jsxs(e.Fragment,{children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"}),e.jsx("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"})]}),vF),_B=xF(e.jsxs("g",{strokeWidth:1.25,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M7 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),e.jsx("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),e.jsx("path",{d:"M9.15 14.85l8.85 -10.85"}),e.jsx("path",{d:"M6 4l8.85 10.85"})]}),vF),MB=xF(e.jsxs(e.Fragment,{children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),e.jsx("path",{d:"M12 17l0 .01"}),e.jsx("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),vF);xF(e.jsxs(e.Fragment,{children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M7 4v16l13 -8z"})]}),vF),xF(e.jsxs(e.Fragment,{children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z",strokeWidth:"0",fill:"currentColor"})]}),vF);var IB=xF(e.jsxs(e.Fragment,{children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M5 12l5 5l10 -10"})]}),vF),jB=xF(e.jsxs(e.Fragment,{children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z"}),e.jsx("path",{d:"M12 9v4"}),e.jsx("path",{d:"M12 17h.01"})]}),vF),TB=xF(e.jsxs("g",{strokeWidth:1.25,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M11 7l6 6"}),e.jsx("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]}),vF),RB=xF(e.jsxs("g",{strokeWidth:1.5,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M12 3l-4 7h8z"}),e.jsx("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),e.jsx("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]}),vF),PB=xF(e.jsxs("g",{strokeWidth:1.5,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M4 7l16 0"}),e.jsx("path",{d:"M4 17l16 0"}),e.jsx("path",{d:"M7 4l0 16"}),e.jsx("path",{d:"M17 4l0 16"})]}),vF),AB=xF(e.jsx("path",{fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})),NB=xF(e.jsxs("g",{strokeWidth:"1.25",children:[e.jsx("path",{d:"M4.16602 10H15.8327"}),e.jsx("path",{d:"M12.5 13.3333L15.8333 10"}),e.jsx("path",{d:"M12.5 6.66666L15.8333 9.99999"})]}),wF),DB=xF(e.jsxs("g",{fill:"none",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",transform:"rotate(90 10 10)",children:[e.jsx("path",{clipRule:"evenodd",d:"m9.644 13.69 7.774-7.773a2.357 2.357 0 0 0-3.334-3.334l-7.773 7.774L8 12l1.643 1.69Z"}),e.jsx("path",{d:"m13.25 3.417 3.333 3.333M10 10l2-2M5 15l3-3M2.156 17.894l1-1M5.453 19.029l-.144-1.407M2.377 11.887l.866 1.118M8.354 17.273l-1.194-.758M.953 14.652l1.408.13"})]}),20),LB=xF(e.jsxs("g",{stroke:"currentColor",fill:"none",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),e.jsx("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),e.jsx("path",{d:"M15 6l3 3"}),e.jsx("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),e.jsx("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),vF);xF(e.jsxs("g",{strokeWidth:1.25,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),e.jsx("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),e.jsx("path",{d:"M15 6l3 3"}),e.jsx("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),e.jsx("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),vF),xF(e.jsxs("g",{stroke:"currentColor",fill:"none",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35"}),e.jsx("path",{d:"M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946"}),e.jsx("path",{d:"M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348"}),e.jsx("path",{d:"M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45"}),e.jsx("path",{d:"M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946"}),e.jsx("path",{d:"M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42"})]}),vF);var OB=xF(e.jsxs("g",{stroke:"currentColor",fill:"none",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2"}),e.jsx("path",{d:"M4 16v2a2 2 0 0 0 2 2h2"}),e.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v2"}),e.jsx("path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2"})]}),vF),FB=xF(e.jsxs("g",{stroke:"currentColor",fill:"none",strokeWidth:1.5,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),e.jsx("path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"})]}),vF),zB=xF(e.jsxs("g",{stroke:"currentColor",fill:"none",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828"}),e.jsx("path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87"}),e.jsx("path",{d:"M3 3l18 18"})]}),vF);xF(e.jsxs("g",{stroke:"currentColor",fill:"none",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),e.jsx("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),e.jsx("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),e.jsx("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),e.jsx("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),e.jsx("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),vF);var BB=xF(e.jsxs("g",{strokeWidth:1.25,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),e.jsx("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),e.jsx("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),e.jsx("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),e.jsx("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),e.jsx("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),vF),HB=xF(e.jsxs("g",{strokeWidth:1.5,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),e.jsx("path",{d:"M21 21l-6 -6"})]}),vF),$B=xF(e.jsxs("g",{strokeWidth:1.5,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M20.984 12.53a9 9 0 1 0 -7.552 8.355"}),e.jsx("path",{d:"M12 7v5l3 3"}),e.jsx("path",{d:"M19 16l-2 3h4l-2 3"})]}),vF),WB=xF(e.jsxs("g",{strokeWidth:1.5,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z"}),e.jsx("path",{d:"M5 10a7 7 0 0 0 14 0"}),e.jsx("path",{d:"M8 21l8 0"}),e.jsx("path",{d:"M12 17l0 4"})]}),vF),XB=xF(e.jsxs("g",{strokeWidth:1.5,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M3 3l18 18"}),e.jsx("path",{d:"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1"}),e.jsx("path",{d:"M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85"}),e.jsx("path",{d:"M8 21l8 0"}),e.jsx("path",{d:"M12 17l0 4"})]}),vF),VB=xF(e.jsxs("g",{strokeWidth:1.25,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11"})]}),vF),GB=xF(e.jsxs("g",{children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M8 8m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z"}),e.jsx("path",{d:"M12 20v.01"}),e.jsx("path",{d:"M16 20v.01"}),e.jsx("path",{d:"M8 20v.01"}),e.jsx("path",{d:"M4 20v.01"}),e.jsx("path",{d:"M4 16v.01"}),e.jsx("path",{d:"M4 12v.01"}),e.jsx("path",{d:"M4 8v.01"}),e.jsx("path",{d:"M4 4v.01"}),e.jsx("path",{d:"M8 4v.01"}),e.jsx("path",{d:"M12 4v.01"}),e.jsx("path",{d:"M16 4v.01"}),e.jsx("path",{d:"M20 4v.01"}),e.jsx("path",{d:"M20 8v.01"}),e.jsx("path",{d:"M20 12v.01"}),e.jsx("path",{d:"M20 16v.01"}),e.jsx("path",{d:"M20 20v.01"})]}),vF),YB=xF(e.jsxs("g",{strokeWidth:1.25,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M5 3v18"}),e.jsx("path",{d:"M19 21v-18"}),e.jsx("path",{d:"M5 7h14"}),e.jsx("path",{d:"M5 15h14"}),e.jsx("path",{d:"M8 13v4"}),e.jsx("path",{d:"M11 13v4"}),e.jsx("path",{d:"M16 13v4"}),e.jsx("path",{d:"M14 5v4"}),e.jsx("path",{d:"M11 5v4"}),e.jsx("path",{d:"M8 5v4"}),e.jsx("path",{d:"M3 21h18"})]}),vF),qB=xF(e.jsxs("g",{strokeWidth:1.25,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M3 12l18 0"}),e.jsx("path",{d:"M7 16l10 0l-10 5l0 -5"}),e.jsx("path",{d:"M7 8l10 0l-10 -5l0 5"})]}),vF),ZB=xF(e.jsxs("g",{strokeWidth:1.25,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M12 3l0 18"}),e.jsx("path",{d:"M16 7l0 10l5 0l-5 -10"}),e.jsx("path",{d:"M8 7l0 10l-5 0l5 -10"})]}),vF),KB=xF(e.jsxs("g",{strokeWidth:1.25,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"}),e.jsx("path",{d:"M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2"}),e.jsx("path",{d:"M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"})]}),vF),QB=xF(e.jsxs("g",{strokeWidth:1.25,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"}),e.jsx("path",{d:"M22 22l-3 -3"}),e.jsx("path",{d:"M6 18h-1a2 2 0 0 1 -2 -2v-1"}),e.jsx("path",{d:"M3 11v-1"}),e.jsx("path",{d:"M3 6v-1a2 2 0 0 1 2 -2h1"}),e.jsx("path",{d:"M10 3h1"}),e.jsx("path",{d:"M15 3h1a2 2 0 0 1 2 2v1"})]}),vF),JB=xF(e.jsxs("g",{strokeWidth:1.25,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),e.jsx("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),e.jsx("path",{d:"M4 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"}),e.jsx("path",{d:"M10 15l2 6l2 -6"}),e.jsx("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"})]}),vF),eH=xF(e.jsxs("g",{strokeWidth:1.25,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),e.jsx("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),e.jsx("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"}),e.jsx("path",{d:"M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"}),e.jsx("path",{d:"M11 21v-6l3 6v-6"})]}),vF),tH=xF(e.jsxs("g",{strokeWidth:1.25,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M4 13v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a2 2 0 0 0 6 0v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a8 8 0 0 1 -16 0"}),e.jsx("path",{d:"M4 8l5 0"}),e.jsx("path",{d:"M15 8l4 0"})]}),vF),nH=xF(e.jsxs("g",{strokeWidth:1.25,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M3 14c.83 .642 2.077 1.017 3.5 1c1.423 .017 2.67 -.358 3.5 -1c.83 -.642 2.077 -1.017 3.5 -1c1.423 -.017 2.67 .358 3.5 1"}),e.jsx("path",{d:"M8 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),e.jsx("path",{d:"M12 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),e.jsx("path",{d:"M3 10h14v5a6 6 0 0 1 -6 6h-2a6 6 0 0 1 -6 -6v-5z"}),e.jsx("path",{d:"M16.746 16.726a3 3 0 1 0 .252 -5.555"})]}),vF),rH=xF(e.jsxs("g",{stroke:"currentColor",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M3 5a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-16a1 1 0 0 1-1-1v-10zM7 20h10M9 16v4M15 16v4"})]}),{...vF,strokeWidth:1.5});xF(e.jsxs("g",{strokeWidth:1.5,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"}),e.jsx("path",{d:"M21 12h-13l3 -3"}),e.jsx("path",{d:"M11 15l-3 -3"})]}),vF);var iH=xF(e.jsxs("g",{children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M2 8a4 4 0 0 1 4 -4h12a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-12a4 4 0 0 1 -4 -4v-8z"}),e.jsx("path",{d:"M10 9l5 3l-5 3z"})]}),vF),sH=xF(e.jsxs("g",{strokeWidth:1.5,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M3 6h18"}),e.jsx("path",{d:"M3 12h18"}),e.jsx("path",{d:"M3 18h18"}),e.jsx("path",{d:"M6 3v18"}),e.jsx("path",{d:"M12 3v18"}),e.jsx("path",{d:"M18 3v18"})]}),vF),aH=xF(e.jsxs("g",{strokeWidth:1.5,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M17 3m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),e.jsx("path",{d:"M3 17m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),e.jsx("path",{d:"M17 5c-6.627 0 -12 5.373 -12 12"})]}),vF),oH=xF(e.jsxs("g",{children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M6 18l12 -12"}),e.jsx("path",{d:"M18 10v-4h-4"})]}),vF),lH=xF(e.jsxs("g",{children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M4,19L10,19C11.097,19 12,18.097 12,17L12,9C12,7.903 12.903,7 14,7L21,7"}),e.jsx("path",{d:"M18 4l3 3l-3 3"})]}),vF),cH=xF(e.jsxs("g",{children:[e.jsx("path",{d:"M16,12L20,9L16,6"}),e.jsx("path",{d:"M6 20c0 -6.075 4.925 -11 11 -11h3"})]}),vF),dH=xF(e.jsxs("g",{children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M6 9l6 6l6 -6"})]}),vF),uH=xF(e.jsxs("g",{children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M6 15l6 -6l6 6"})]}),vF),hH=xF(e.jsxs("g",{children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M6 15l6 -6l6 6"})]}),vF),pH=xF(e.jsxs("g",{strokeWidth:"1.25",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M8 5v10a1 1 0 0 0 1 1h10"}),e.jsx("path",{d:"M5 8h10a1 1 0 0 1 1 1v10"})]}),vF),fH=xF(e.jsxs("g",{children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M5 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),e.jsx("path",{d:"M19 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),e.jsx("path",{d:"M5 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),e.jsx("path",{d:"M19 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),e.jsx("path",{d:"M5 7l0 10"}),e.jsx("path",{d:"M7 5l10 0"}),e.jsx("path",{d:"M7 19l10 0"}),e.jsx("path",{d:"M19 7l0 10"})]}),vF),mH={[qA.Excalifont]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},icon:FF},[qA.Nunito]:{metrics:{unitsPerEm:1e3,ascender:1011,descender:-353,lineHeight:1.35},icon:fB},[qA["Lilita One"]]:{metrics:{unitsPerEm:1e3,ascender:923,descender:-220,lineHeight:1.15},icon:pB},[qA["Comic Shanns"]]:{metrics:{unitsPerEm:1e3,ascender:750,descender:-250,lineHeight:1.25},icon:mB},[qA.Virgil]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},icon:FF,deprecated:!0},[qA.Helvetica]:{metrics:{unitsPerEm:2048,ascender:1577,descender:-471,lineHeight:1.15},icon:fB,deprecated:!0,local:!0},[qA.Cascadia]:{metrics:{unitsPerEm:2048,ascender:1900,descender:-480,lineHeight:1.2},icon:mB,deprecated:!0},[qA["Liberation Sans"]]:{metrics:{unitsPerEm:2048,ascender:1854,descender:-434,lineHeight:1.15},serverSide:!0},[ZA.Xiaolai]:{metrics:{unitsPerEm:1e3,ascender:880,descender:-144,lineHeight:1.15},fallback:!0},[ZA["Segoe UI Emoji"]]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},local:!0,fallback:!0}},gH="U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD",bH="U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF",UH="U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F",yH="U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116",xH="U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB",vH="local:",wH=class extends Error{constructor(e="Couldn't export canvas.",t="CANVAS_ERROR"){super(),this.name=t,this.message=e}},SH=class extends DOMException{constructor(e="Request Aborted"){super(e,"AbortError")}},EH=class extends Error{constructor(e="Image Scene Data Error",t="IMAGE_SCENE_DATA_ERROR"){super(e),XM(this,"code"),this.name="EncodingError",this.code=t}},kH=class extends Error{constructor(){super(...arguments),XM(this,"code","ELEMENT_HAS_INVALID_INDEX")}},CH=class extends Error{constructor(e="Worker URL is not defined!",t="WORKER_URL_NOT_DEFINED"){super(e),XM(this,"code"),this.name="WorkerUrlNotDefinedError",this.code=t}},_H=class extends Error{constructor(e="Worker has to be in a separate chunk!",t="WORKER_IN_THE_MAIN_CHUNK"){super(e),XM(this,"code"),this.name="WorkerInTheMainChunkError",this.code=t}},MH=class extends Error{constructor(e){super(e),this.name="ExcalidrawError"}},IH=class{constructor(e){XM(this,"instance"),XM(this,"debounceTerminate"),this.instance=new Worker(e,{type:"module"})}},jH=class e{constructor(e,t){XM(this,"idleWorkers",new Set),XM(this,"workerUrl"),XM(this,"workerTTL"),this.workerUrl=e,this.workerTTL=t.ttl||1e3}static create(t,n={}){if(!t)throw new CH;if(!import.meta.url||t.toString()===import.meta.url)throw new _H;return new e(t,n)}async postMessage(e,t){let n,r=Array.from(this.idleWorkers).shift();return r?(this.idleWorkers.delete(r),n=r):n=await this.createWorker(),new Promise((r,i)=>{n.instance.onmessage=this.onMessageHandler(n,r),n.instance.onerror=this.onErrorHandler(n,i),n.instance.postMessage(e,t),n.debounceTerminate(()=>i(new Error(`Active worker did not respond for ${this.workerTTL}ms!`)))})}async clear(){for(let e of this.idleWorkers)e.debounceTerminate.cancel(),e.instance.terminate();this.idleWorkers.clear()}async createWorker(){let e=new IH(this.workerUrl);return e.debounceTerminate=bL(t=>{e.instance.terminate(),this.idleWorkers.has(e)?this.idleWorkers.delete(e):t&&t()},this.workerTTL),e}onMessageHandler(e,t){return n=>{e.debounceTerminate(),this.idleWorkers.add(e),t(n.data)}}onErrorHandler(e,t){return n=>{e.debounceTerminate(()=>t(n)),e.debounceTerminate.flush(),this.clear()}}},TH=typeof Worker<"u",RH=async(e,t)=>{let{Commands:n,subsetToBase64:r,toBase64:i}=await NH();return TH?sO(async()=>{try{let r=await LH(),s=e.slice(0),a=await r.postMessage({command:n.Subset,arrayBuffer:s,codePoints:t},{transfer:[s]});return i(a)}catch(s){return TH=!1,r(e,t)}}):r(e,t)},PH=null,AH=null,NH=async()=>(AH||(AH=Pt(()=>import("./subset-shared.chunk-BIQV4vDA.js"),__vite__mapDeps([0,1,2]))),AH),DH=null,LH=()=>(DH||(DH=sO(async()=>{let{WorkerUrl:e}=await(async()=>(PH||(PH=Pt(()=>import("./subset-worker.chunk-gnZ3cQjY.js"),__vite__mapDeps([3,0,1,2]))),PH))();return jH.create(e)})),DH),OH=class e{constructor(t,n,r){XM(this,"urls"),XM(this,"fontFace"),this.urls=e.createUrls(n);let i=this.urls.map(t=>`url(${t}) ${e.getFormat(t)}`).join(", ");this.fontFace=new FontFace(t,i,{display:"swap",style:"normal",weight:"400",...r})}toCSS(e){if(!this.getUnicodeRangeRegex().test(e))return;let t=Array.from(e).map(e=>e.codePointAt(0));return this.getContent(t).then(e=>`@font-face { font-family: ${this.fontFace.family}; src: url(${e}); }`)}async getContent(e){let t=0,n=[];for(;t<this.urls.length;){let i=this.urls[t];try{let t=await this.fetchFont(i);return await RH(t,e)}catch(r){n.push(`"${i.toString()}" returned error "${r}"`)}t++}return this.urls.length?this.urls[this.urls.length-1].toString():""}fetchFont(e){return sO(async()=>{let t=await fetch(e,{cache:"force-cache",headers:{Accept:"font/woff2"}});if(!t.ok){let n=e instanceof URL?e.toString():"dataurl";throw new Error(`Failed to fetch "${n}": ${t.statusText}`)}return await t.arrayBuffer()})}getUnicodeRangeRegex(){let e=this.fontFace.unicodeRange.split(/,\s*/).map(e=>{let[t,n]=e.replace("U+","").split("-");return n?`\\u{${t}}-\\u{${n}}`:`\\u{${t}}`}).join("");return new RegExp(`[${e}]`,"u")}static createUrls(t){if(t.startsWith("data"))return[t];if(t.startsWith(vH))return[];if(t.startsWith("http"))return[new URL(t)];let n=t.replace(/^\/+/,""),r=[];if("string"==typeof window.EXCALIDRAW_ASSET_PATH){let e=this.normalizeBaseUrl(window.EXCALIDRAW_ASSET_PATH);r.push(new URL(n,e))}else Array.isArray(window.EXCALIDRAW_ASSET_PATH)&&window.EXCALIDRAW_ASSET_PATH.forEach(e=>{let t=this.normalizeBaseUrl(e);r.push(new URL(n,t))});return r.push(new URL(n,e.ASSETS_FALLBACK_URL)),r}static getFormat(e){if(!(e instanceof URL))return"";try{let t=new URL(e).pathname.split(".");return 1===t.length?"":`format('${t.pop()}')`}catch{return""}}static normalizeBaseUrl(e){let t=e;return/^\.?\//.test(t)&&(t=new URL(t.replace(/^\.?\/+/,""),window?.location?.origin).toString()),t=`${t.replace(/\/+$/,"")}/`,t}};XM(OH,"ASSETS_FALLBACK_URL",`https://esm.sh/${BM.PKG_NAME}@${BM.PKG_VERSION}/dist/prod/`);var FH=OH,zH=[{uri:"./fonts/Cascadia/CascadiaCode-Regular.woff2"}],BH=[{uri:"./fonts/ComicShanns/ComicShanns-Regular-279a7b317d12eb88de06167bd672b4b4.woff2",descriptors:{unicodeRange:"U+20-7e,U+a1-a6,U+a8,U+ab-ac,U+af-b1,U+b4,U+b8,U+bb-bc,U+bf-cf,U+d1-d7,U+d9-de,U+e0-ef,U+f1-f7,U+f9-ff,U+131,U+152-153,U+2c6,U+2da,U+2dc,U+2013-2014,U+2018-201a,U+201c-201d,U+2020-2022,U+2026,U+2039-203a,U+2044,U+20ac,U+2191,U+2193,U+2212"}},{uri:"./fonts/ComicShanns/ComicShanns-Regular-fcb0fc02dcbee4c9846b3e2508668039.woff2",descriptors:{unicodeRange:"U+100-10f,U+112-125,U+128-130,U+134-137,U+139-13c,U+141-148,U+14c-151,U+154-161,U+164-165,U+168-17f,U+1bf,U+1f7,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+a75b"}},{uri:"./fonts/ComicShanns/ComicShanns-Regular-dc6a8806fa96795d7b3be5026f989a17.woff2",descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+315,U+2190,U+2192,U+2200,U+2203-2204,U+2264-2265,U+f6c3"}},{uri:"./fonts/ComicShanns/ComicShanns-Regular-6e066e8de2ac57ea9283adb9c24d7f0c.woff2",descriptors:{unicodeRange:"U+3bb"}}],HH=[{uri:vH}],$H=[{uri:"./fonts/Excalifont/Excalifont-Regular-a88b72a24fb54c9f94e3b5fdaa7481c9.woff2",descriptors:{unicodeRange:"U+20-7e,U+a0-a3,U+a5-a6,U+a8-ab,U+ad-b1,U+b4,U+b6-b8,U+ba-ff,U+131,U+152-153,U+2bc,U+2c6,U+2da,U+2dc,U+304,U+308,U+2013-2014,U+2018-201a,U+201c-201e,U+2020,U+2022,U+2024-2026,U+2030,U+2039-203a,U+20ac,U+2122,U+2212"}},{uri:"./fonts/Excalifont/Excalifont-Regular-be310b9bcd4f1a43f571c46df7809174.woff2",descriptors:{unicodeRange:"U+100-130,U+132-137,U+139-149,U+14c-151,U+154-17e,U+192,U+1fc-1ff,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+2113"}},{uri:"./fonts/Excalifont/Excalifont-Regular-b9dcf9d2e50a1eaf42fc664b50a3fd0d.woff2",descriptors:{unicodeRange:"U+400-45f,U+490-491,U+2116"}},{uri:"./fonts/Excalifont/Excalifont-Regular-41b173a47b57366892116a575a43e2b6.woff2",descriptors:{unicodeRange:"U+37e,U+384-38a,U+38c,U+38e-393,U+395-3a1,U+3a3-3a8,U+3aa-3cf,U+3d7"}},{uri:"./fonts/Excalifont/Excalifont-Regular-3f2c5db56cc93c5a6873b1361d730c16.woff2",descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+302,U+306-307,U+30a-30c,U+326-328,U+212e,U+2211,U+fb01-fb02"}},{uri:"./fonts/Excalifont/Excalifont-Regular-349fac6ca4700ffec595a7150a0d1e1d.woff2",descriptors:{unicodeRange:"U+462-463,U+472-475,U+4d8-4d9,U+4e2-4e3,U+4e6-4e9,U+4ee-4ef"}},{uri:"./fonts/Excalifont/Excalifont-Regular-623ccf21b21ef6b3a0d87738f77eb071.woff2",descriptors:{unicodeRange:"U+300-301,U+303"}}],WH=[{uri:vH}],XH=[{uri:"./fonts/Liberation/LiberationSans-Regular.woff2"}],VH=[{uri:"./fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYE98RXi4EwSsbg.woff2",descriptors:{unicodeRange:bH}},{uri:"./fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYEF8RXi4EwQ.woff2",descriptors:{unicodeRange:gH}}],GH=[{uri:"./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTk3j6zbXWjgevT5.woff2",descriptors:{unicodeRange:UH,weight:"500"}},{uri:"./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTA3j6zbXWjgevT5.woff2",descriptors:{unicodeRange:yH,weight:"500"}},{uri:"./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTs3j6zbXWjgevT5.woff2",descriptors:{unicodeRange:xH,weight:"500"}},{uri:"./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTo3j6zbXWjgevT5.woff2",descriptors:{unicodeRange:bH,weight:"500"}},{uri:"./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTQ3j6zbXWjgeg.woff2",descriptors:{unicodeRange:gH,weight:"500"}}],YH=[{uri:"./fonts/Virgil/Virgil-Regular.woff2"}],qH=[{uri:"./fonts/Xiaolai/Xiaolai-Regular-09850c4077f3fffe707905872e0e2460.woff2",descriptors:{unicodeRange:"U+f9b8-fa6d,U+fe32,U+fe45-fe4f,U+ff02-ff0b,U+ff0d-ff1e,U+ff20-ff2a"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-7eb9fffd1aa890d07d0f88cc82e6cfe4.woff2",descriptors:{unicodeRange:"U+20dd-20de,U+25ef,U+ff2b-ffbe,U+ffc2-ffc7,U+ffca-ffcf,U+ffd2-ffd7,U+ffda-ffdc,U+ffe0-ffe6,U+ffe8-ffee"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-60a3089806700d379f11827ee9843b6b.woff2",descriptors:{unicodeRange:"U+d7eb-d7fb,U+f900-f9b7"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-6fe5c5973cc06f74b2387a631ea36b88.woff2",descriptors:{unicodeRange:"U+d6f2-d7a3,U+d7b0-d7c6,U+d7cb-d7ea"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-b96d9226ce77ec94ceca043d712182e6.woff2",descriptors:{unicodeRange:"U+d609-d6f1"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-6ae5b42180ad70b971c91e7eefb8eba2.woff2",descriptors:{unicodeRange:"U+d520-d608"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-a4c34be6d42152e64b0df90bc4607f64.woff2",descriptors:{unicodeRange:"U+d437-d51f"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-c69f61a4ab18d0488c8d1fc12e7028e8.woff2",descriptors:{unicodeRange:"U+d34e-d436"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-e3fcf5180fd466c8915c4e8069491054.woff2",descriptors:{unicodeRange:"U+d265-d34d"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-c1f94158256bb1f3bf665b053d895af9.woff2",descriptors:{unicodeRange:"U+d17c-d264"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-544fc28abe2c5c30e62383fd4dac255f.woff2",descriptors:{unicodeRange:"U+d093-d17b"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-7197d6fda6cba7c3874c53d6381ca239.woff2",descriptors:{unicodeRange:"U+cfaa-d092"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-70c2eb8d64e71a42a834eb857ea9df51.woff2",descriptors:{unicodeRange:"U+cec1-cfa9"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-069e77aac84590e2e991d0a0176d34f2.woff2",descriptors:{unicodeRange:"U+cdd8-cec0"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-41521fade99856108931b4768b1b2648.woff2",descriptors:{unicodeRange:"U+ccf1-cdd7"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-a004ddfcb26e67bd6e678c8ed19e25ce.woff2",descriptors:{unicodeRange:"U+cc08-ccf0"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-04b718e5623574919c8b0dea5f301444.woff2",descriptors:{unicodeRange:"U+cb43-cc07"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-7e4bde7e9c7f84cd34d8a845e384c746.woff2",descriptors:{unicodeRange:"U+ca83-cb42"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-23686f7f29da6e8008c36dd3a80c83d6.woff2",descriptors:{unicodeRange:"U+c9a1-ca82"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-69c09cc5fa3e55c74fc4821f76909cc3.woff2",descriptors:{unicodeRange:"U+c8b8-c9a0"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-25b7f38e18f035f96cb5e547bd2bd08c.woff2",descriptors:{unicodeRange:"U+c7cf-c8b7"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-ba3de316d63c7e339987b16f41a0b879.woff2",descriptors:{unicodeRange:"U+c6e6-c7ce"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-12b52b58eb3df36804b9a654ec9ee194.woff2",descriptors:{unicodeRange:"U+c5fd-c6e5"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-b1220a3c61f85cc0408deedb4c5f57a2.woff2",descriptors:{unicodeRange:"U+c514-c5fc"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-4535823663ad81405188a528d8f2b1a2.woff2",descriptors:{unicodeRange:"U+c42b-c513"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-3eaa538115d76932653c21d8dc28f207.woff2",descriptors:{unicodeRange:"U+c341-c34e,U+c350-c42a"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-7e929f262f30c8ee78bf398150b1a7cd.woff2",descriptors:{unicodeRange:"U+c258-c340"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-73e309718fd16cea44b4d54a33581811.woff2",descriptors:{unicodeRange:"U+c16f-c257"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-9eb5a99df4e76ac3363453ac9ca288b1.woff2",descriptors:{unicodeRange:"U+c086-c16e"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-3e63ed8162808a9e425ed80a8bc79114.woff2",descriptors:{unicodeRange:"U+bf9d-c085"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-cb17fc3db95f6d139afc9d31a8e93293.woff2",descriptors:{unicodeRange:"U+beb4-bf9c"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-c8b71798409ccc126ee264a00aadcf21.woff2",descriptors:{unicodeRange:"U+bdcb-beb3"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-11c345711937f0ba4b8f7b6b919c8440.woff2",descriptors:{unicodeRange:"U+bce2-bdca"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-e480d9c614742d05f0e78f274f1e69e6.woff2",descriptors:{unicodeRange:"U+bbf9-bce1"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-95429962233afd82db1c27df1500a28c.woff2",descriptors:{unicodeRange:"U+bb10-bbf8"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-2cf96d082d35ea3d8106851223ad0d16.woff2",descriptors:{unicodeRange:"U+ba27-bb0f"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-2d43040e86ff03ba677f6f9c04cd0805.woff2",descriptors:{unicodeRange:"U+b93e-ba26"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-2a26d20a23b00898ce82f09d2ee47c3f.woff2",descriptors:{unicodeRange:"U+b855-b93d"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-a365e82ed54697a52f27adcea1315fe8.woff2",descriptors:{unicodeRange:"U+b76c-b854"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-f5d079153c99a25b9be5b8583c4cc8a7.woff2",descriptors:{unicodeRange:"U+b683-b76b"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-10a7ae9a371830a80c3d844acf1c02d7.woff2",descriptors:{unicodeRange:"U+b59a-b682"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-e4bca6cfa53e499cae0a6be4894a90e9.woff2",descriptors:{unicodeRange:"U+b4b1-b599"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-60a41c7e1c68f22424e6d22df544bc82.woff2",descriptors:{unicodeRange:"U+11fb-11ff,U+b3cd-b4b0"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-7ab2bed91166a9dca83a5ebfbe2a7f38.woff2",descriptors:{unicodeRange:"U+11e6-11fa,U+b2f9-b3cc"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-670ba603758d94268e8606f240a42e12.woff2",descriptors:{unicodeRange:"U+11d1-11e5,U+b225-b2f8"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-e656f091b9dc4709722c9f4b84d3c797.woff2",descriptors:{unicodeRange:"U+11bc-11d0,U+b151-b224"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-15dc6d811c9cd078f9086a740d5a1038.woff2",descriptors:{unicodeRange:"U+11a7-11bb,U+b07d-b150"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-f0f13b5c60e0af5553bd359f5513be1b.woff2",descriptors:{unicodeRange:"U+1191-11a6,U+afaa-b07c"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-8c2f33cee3993174f7e87c28e4bf42ee.woff2",descriptors:{unicodeRange:"U+117c-1190,U+aed6-afa9"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-761d05e3cd968cf574166867998ef06a.woff2",descriptors:{unicodeRange:"U+1167-117b,U+ae02-aed5"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-642b26e2e5f5fb780b51b593dbc8c851.woff2",descriptors:{unicodeRange:"U+1152-115e,U+1160-1166,U+ad2d-ae01"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-5572b3513ba8df57a3d5d7303ee6b11b.woff2",descriptors:{unicodeRange:"U+113d-1151,U+ac59-ad2c"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-3c9de2ae0ea4bc91a510942dfa4be8d2.woff2",descriptors:{unicodeRange:"U+1100-113c,U+9f95-9f98,U+9f9c-9f9e,U+9fa1-9fce,U+9fd0,U+a960-a97c,U+ac00-ac58"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-671a2c20b1eb9e4ef8a192833940e319.woff2",descriptors:{unicodeRange:"U+9771-9772,U+9775,U+9777-977b,U+977d-9784,U+9786-978a,U+978c,U+978e-9790,U+9793,U+9795-9797,U+9799-979f,U+97a1-97a2,U+97a4-97aa,U+97ac,U+97ae,U+97b0-97b1,U+97b3,U+97b5-97e5,U+97e8,U+97ee-97f2,U+97f4,U+97f7-982d"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-4dc6d5f188d5c96d44815cd1e81aa885.woff2",descriptors:{unicodeRange:"U+9491,U+9496,U+9498,U+94c7,U+94cf,U+94d3-94d4,U+94da,U+94e6,U+94fb,U+951c,U+9520,U+9527,U+9533,U+953d,U+9543,U+9548,U+954b,U+9555,U+955a,U+9560,U+956e,U+9574-9575,U+9577-957e,U+9580-95e7,U+95ec,U+95ff,U+9607,U+9613,U+9618,U+961b,U+961e,U+9620,U+9623-9629,U+962b-962d,U+962f-9630,U+9637-963a,U+963e,U+9641,U+9643,U+964a,U+964e-964f,U+9651-9653,U+9656-965a,U+965c-965e,U+9660,U+9663,U+9665-9666,U+966b,U+966d-9671,U+9673,U+9678-9684,U+9687,U+9689-968a,U+968c,U+968e,U+9691-9693"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-ce4884f96f11589608b76b726a755803.woff2",descriptors:{unicodeRange:"U+923c-9273,U+9275-928d,U+928f-92ad,U+92af-92c7,U+92c9-92ee"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-8f476c4c99813d57cbe6eca4727388ad.woff2",descriptors:{unicodeRange:"U+9159,U+915b-915c,U+915f-9160,U+9166-9168,U+916b,U+916d,U+9173,U+917a-917c,U+9180-9184,U+9186,U+9188,U+918a,U+918e-918f,U+9193-9199,U+919c-91a1,U+91a4-91a9,U+91ab-91ac,U+91b0-91b3,U+91b6-91b9,U+91bb-91c6,U+91c8,U+91cb,U+91d0,U+91d2-91db,U+91dd-923b"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-5935a5775af3d5c6307ac667bd9ae74e.woff2",descriptors:{unicodeRange:"U+902b-902c,U+9030-9034,U+9037,U+9039-903a,U+903d,U+903f-9040,U+9043,U+9045-9046,U+9048-904c,U+904e,U+9054-9056,U+9059-905a,U+905c-9061,U+9064,U+9066-9067,U+9069-906c,U+906f-9073,U+9076-907c,U+907e,U+9081,U+9084-9087,U+9089-908a,U+908c-9090,U+9092,U+9094,U+9096,U+9098,U+909a,U+909c,U+909e-90a0,U+90a4-90a5,U+90a7-90a9,U+90ab,U+90ad,U+90b2,U+90b7,U+90bc-90bd,U+90bf-90c0,U+90c2-90c3,U+90c6,U+90c8-90c9,U+90cb-90cd,U+90d2,U+90d4-90d6,U+90d8-90da,U+90de-90e0,U+90e3-90e5,U+90e9-90ea,U+90ec,U+90ee,U+90f0-90f3,U+90f5-90f7,U+90f9-90fc,U+90ff-9101,U+9103,U+9105-9118,U+911a-911d,U+911f-9121,U+9124-912e,U+9130,U+9132-9138,U+913a-9142,U+9144-9145,U+9147-9148,U+9151,U+9153-9156,U+9158"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-79f007c1c6d07557120982951ea67998.woff2",descriptors:{unicodeRange:"U+8f03-8f65,U+8f6a,U+8f80,U+8f8c,U+8f92,U+8f9d,U+8fa0-8fa2,U+8fa4-8fa7,U+8faa,U+8fac-8faf,U+8fb2-8fb5,U+8fb7-8fb8,U+8fba-8fbc,U+8fbf-8fc0,U+8fc3,U+8fc6,U+8fc9-8fcd,U+8fcf,U+8fd2,U+8fd6-8fd7,U+8fda,U+8fe0-8fe1,U+8fe3,U+8fe7,U+8fec,U+8fef,U+8ff1-8ff2,U+8ff4-8ff6,U+8ffa-8ffc,U+8ffe-8fff,U+9007-9008,U+900c,U+900e,U+9013,U+9015,U+9018-9019,U+901c,U+9023-9025,U+9027-902a"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-bafff7a14c27403dcc6cf1432e8ea836.woff2",descriptors:{unicodeRange:"U+8d03-8d1c,U+8d20,U+8d51-8d52,U+8d57,U+8d5f,U+8d65,U+8d68-8d6a,U+8d6c,U+8d6e-8d6f,U+8d71-8d72,U+8d78-8d80,U+8d82-8d83,U+8d86-8d89,U+8d8c-8d90,U+8d92-8d93,U+8d95-8d9e,U+8da0-8da2,U+8da4-8db0,U+8db2,U+8db6-8db7,U+8db9,U+8dbb,U+8dbd,U+8dc0-8dc2,U+8dc5,U+8dc7-8dca,U+8dcd,U+8dd0,U+8dd2-8dd5,U+8dd8-8dd9,U+8ddc,U+8de0-8de2,U+8de5-8de7,U+8de9,U+8ded-8dee,U+8df0-8df2,U+8df4,U+8df6,U+8dfc,U+8dfe-8e04,U+8e06-8e08,U+8e0b,U+8e0d-8e0e,U+8e10-8e13,U+8e15-8e1c,U+8e20-8e21,U+8e24-8e28,U+8e2b,U+8e2d,U+8e30,U+8e32-8e34,U+8e36-8e38,U+8e3b-8e3c,U+8e3e-8e3f,U+8e43,U+8e45-8e46"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-543fa46ace099a7099dad69123399400.woff2",descriptors:{unicodeRange:"U+8bea,U+8c09,U+8c1e,U+8c38-8c40,U+8c42-8c45,U+8c48,U+8c4a-8c4b,U+8c4d-8c54,U+8c56-8c59,U+8c5b-8c60,U+8c63-8c69,U+8c6c-8c72,U+8c74-8c77,U+8c7b-8c81,U+8c83-8c84,U+8c86-8c88,U+8c8b,U+8c8d-8c93,U+8c95-8c97,U+8c99-8d02"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-4ddc14ed3eb0c3e46364317dfc0144a3.woff2",descriptors:{unicodeRange:"U+8a64-8a78,U+8a7a-8a88,U+8a8b-8a92,U+8a94-8b06,U+8b08-8b1b"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-0fa55a080fcd0f9dc2e0b0058b793df8.woff2",descriptors:{unicodeRange:"U+8987-89c0,U+89c3,U+89cd,U+89d3-89d5,U+89d7-89d9,U+89db,U+89dd,U+89df-89e2,U+89e4,U+89e7-89ea,U+89ec-89ee,U+89f0-89f2,U+89f4-89ff,U+8a01-8a06,U+8a08-8a3d,U+8a3f-8a47,U+8a49-8a63"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-66493ba5a8367f2928812f446f47b56a.woff2",descriptors:{unicodeRange:"U+87e3-87e4,U+87e6-87e9,U+87eb-87ed,U+87ef-87f8,U+87fa-87fd,U+87ff-8802,U+8804-8809,U+880b-8812,U+8814,U+8817-881a,U+881c-8820,U+8823-8831,U+8833-8838,U+883a-883b,U+883d-883f,U+8841-8843,U+8846-884b,U+884e-8853,U+8855-8856,U+8858,U+885a-8860,U+8866-8867,U+886a,U+886d,U+886f,U+8871,U+8873-8876,U+8878-887c,U+8880,U+8883,U+8886-8887,U+8889-888a,U+888c,U+888e-8891,U+8893-8895,U+8897-889b,U+889d-88a1,U+88a3,U+88a5-88aa,U+88ac,U+88ae-88b0,U+88b2-88b6,U+88b8-88bb"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-57862b464a55b18c7bf234ce22907d73.woff2",descriptors:{unicodeRange:"U+86e7-86e8,U+86ea-86ec,U+86ef,U+86f5-86f7,U+86fa-86fd,U+86ff,U+8701,U+8704-8706,U+870b-870c,U+870e-8711,U+8714,U+8716,U+8719,U+871b,U+871d,U+871f-8720,U+8724,U+8726-8728,U+872a-872d,U+872f-8730,U+8732-8733,U+8735-8736,U+8738-873a,U+873c-873d,U+8740-8746,U+874a-874b,U+874d,U+874f-8752,U+8754-8756,U+8758,U+875a-875f,U+8761-8762,U+8766-876d,U+876f,U+8771-8773,U+8775,U+8777-877a,U+877f-8781,U+8784,U+8786-8787,U+8789-878a,U+878c,U+878e-8792,U+8794-8796,U+8798-879e,U+87a0-87a7,U+87a9-87aa,U+87ae,U+87b0-87b2,U+87b4,U+87b6-87b9,U+87bb-87bc,U+87be-87bf,U+87c1-87c5,U+87c7-87c9,U+87cc-87d0,U+87d4-87da,U+87dc-87df,U+87e1-87e2"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-8d3bcabb847b56243b16afe62adaaf21.woff2",descriptors:{unicodeRange:"U+8604,U+8606-8610,U+8612-8615,U+8617-8626,U+8628,U+862a-8637,U+8639-863b,U+863d-864c,U+8652-8653,U+8655-8659,U+865b-865d,U+865f-8661,U+8663-866a,U+866d,U+866f-8670,U+8672-8678,U+8683-8689,U+868e-8692,U+8694,U+8696-869b,U+869e-86a2,U+86a5-86a6,U+86ab,U+86ad-86ae,U+86b2-86b3,U+86b7-86b9,U+86bb-86bf,U+86c1-86c3,U+86c5,U+86c8,U+86cc-86cd,U+86d2-86d3,U+86d5-86d7,U+86da,U+86dc-86dd,U+86e0-86e3,U+86e5-86e6"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-2b77e8ebfb2367ab2662396a60e7d320.woff2",descriptors:{unicodeRange:"U+8456,U+8458,U+845d-8460,U+8462,U+8464-8468,U+846a,U+846e-8470,U+8472,U+8474,U+8477,U+8479,U+847b-8481,U+8483-8486,U+848a,U+848d,U+848f-8496,U+8498,U+849a-849b,U+849d-84a0,U+84a2-84ae,U+84b0-84b1,U+84b3,U+84b5-84b7,U+84bb-84bc,U+84be,U+84c0,U+84c2-84c3,U+84c5-84c8,U+84cb-84cc,U+84ce-84cf,U+84d2,U+84d4-84d5,U+84d7-84dc,U+84de,U+84e1-84e2,U+84e4,U+84e7-84eb,U+84ed-84ef,U+84f1-84fb,U+84fd-84fe,U+8500-850b,U+850d-8510,U+8512,U+8514-8516,U+8518-8519,U+851b-851e,U+8520,U+8522-852a,U+852d-8536,U+853e-8542,U+8544-8547,U+854b-854f"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-0b5d723fdc4e249c140f0909e87d03b4.woff2",descriptors:{unicodeRange:"U+82c2-82c3,U+82c5-82c6,U+82c9,U+82d0,U+82d6,U+82d9-82da,U+82dd,U+82e2,U+82e7-82ea,U+82ec-82ee,U+82f0,U+82f2-82f3,U+82f5-82f6,U+82f8,U+82fa,U+82fc-8300,U+830a-830b,U+830d,U+8310,U+8312-8313,U+8316,U+8318-8319,U+831d-8326,U+8329-832a,U+832e,U+8330,U+8332,U+8337,U+833b,U+833d-833f,U+8341-8342,U+8344-8345,U+8348,U+834a-834e,U+8353,U+8355-8359,U+835d,U+8362,U+8370-8376,U+8379-837a,U+837e-8384,U+8387-8388,U+838a-838d,U+838f-8391,U+8394-8397,U+8399-839a,U+839d,U+839f,U+83a1-83a7,U+83ac-83af,U+83b5,U+83bb,U+83be-83bf,U+83c2-83c4,U+83c6,U+83c8-83c9,U+83cb,U+83cd-83ce,U+83d0-83d3,U+83d5,U+83d7,U+83d9-83db,U+83de,U+83e2-83e4,U+83e6-83e8,U+83eb-83ef,U+83f3-83f7,U+83fa-83fc,U+83fe-8400,U+8402,U+8405,U+8407-840a,U+8410,U+8412-8417,U+8419-841b,U+841e-8423,U+8429-8430,U+8432-8437,U+8439-843b,U+843e-8445,U+8447-8450,U+8452-8455"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-cdbce89e82cc1ab53a2decbf5819278f.woff2",descriptors:{unicodeRange:"U+81a4-81a5,U+81a7,U+81a9,U+81ab-81b2,U+81b4-81b9,U+81bc-81bf,U+81c4-81c5,U+81c7-81c9,U+81cb,U+81cd-81e2,U+81e4-81e6,U+81e8-81e9,U+81eb,U+81ee-81f2,U+81f5-81fa,U+81fd,U+81ff,U+8203,U+8207-820b,U+820e-820f,U+8211,U+8213,U+8215-821a,U+821d,U+8220,U+8224-8227,U+8229,U+822e,U+8232,U+823a,U+823c-823d,U+823f-8243,U+8245-8246,U+8248,U+824a,U+824c-824e,U+8250-8257,U+8259,U+825b-825e,U+8260-8267,U+8269-826d,U+8271,U+8275-8278,U+827b-827c,U+8280-8281,U+8283,U+8285-8287,U+8289,U+828c,U+8290,U+8293-8296,U+829a-829b,U+829e,U+82a0,U+82a2-82a3,U+82a7,U+82b2,U+82b5-82b6,U+82ba-82bc,U+82bf-82c0"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-739bc1a567439c7cffcd1614644593d2.woff2",descriptors:{unicodeRange:"U+8059,U+805b-8068,U+806b-8070,U+8072-807e,U+8081-8082,U+8085,U+8088,U+808a,U+808d-8092,U+8094-8095,U+8097,U+8099,U+809e,U+80a3,U+80a6-80a8,U+80ac,U+80b0,U+80b3,U+80b5-80b6,U+80b8-80b9,U+80bb,U+80c5,U+80c7-80cb,U+80cf-80d5,U+80d8,U+80df-80e0,U+80e2-80e3,U+80e6,U+80ee,U+80f5,U+80f7,U+80f9,U+80fb,U+80fe-8101,U+8103-8105,U+8107-8108,U+810b-810c,U+8115,U+8117,U+8119,U+811b-811d,U+811f-812b,U+812d-812e,U+8130,U+8133-8135,U+8137,U+8139-813d,U+813f-8145,U+8147,U+8149,U+814d-814f,U+8152,U+8156-8158,U+815b-815f,U+8161-8164,U+8166,U+8168,U+816a-816c,U+816f,U+8172-8173,U+8175-8178,U+8181,U+8183-8187,U+8189,U+818b-818e,U+8190,U+8192-8197,U+8199-819a,U+819e-81a2"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-72252d73220fa3cd856677888cee1635.woff2",descriptors:{unicodeRange:"U+7f3c-7f41,U+7f43,U+7f46-7f4f,U+7f52-7f53,U+7f56,U+7f59,U+7f5b-7f5e,U+7f60,U+7f63-7f67,U+7f6b-7f6d,U+7f6f-7f70,U+7f73,U+7f75-7f78,U+7f7a-7f7d,U+7f7f-7f80,U+7f82-7f89,U+7f8b,U+7f8d,U+7f8f-7f93,U+7f95-7f99,U+7f9b-7f9c,U+7fa0,U+7fa2-7fa3,U+7fa5-7fa6,U+7fa8-7fae,U+7fb1,U+7fb3-7fb7,U+7fba-7fbb,U+7fbe,U+7fc0,U+7fc2-7fc4,U+7fc6-7fc9,U+7fcb,U+7fcd,U+7fcf-7fd3,U+7fd6-7fd7,U+7fd9-7fde,U+7fe2-7fe4,U+7fe7-7fe8,U+7fea-7fed,U+7fef,U+7ff2,U+7ff4-7ffa,U+7ffd-7fff,U+8002,U+8007-800a,U+800e-800f,U+8011,U+8013,U+801a-801b,U+801d-801f,U+8021,U+8023-8024,U+802b-8030,U+8032,U+8034,U+8039-803a,U+803c,U+803e,U+8040-8041,U+8044-8045,U+8047-8049,U+804e-8051,U+8053,U+8055-8057"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-08e0dc436ad0ad61ba5558db0674d762.woff2",descriptors:{unicodeRange:"U+7cd8,U+7cda-7cdb,U+7cdd-7cde,U+7ce1-7ce7,U+7ce9-7cee,U+7cf0-7cf7,U+7cf9-7cfa,U+7cfc-7d09,U+7d0b-7d1f,U+7d21,U+7d23-7d26,U+7d28-7d2a,U+7d2c-7d2e,U+7d30-7d6d,U+7d6f-7d76,U+7d78-7d94"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-cf6ff4e0f491ca0cf3038187a997b9b4.woff2",descriptors:{unicodeRange:"U+7afe,U+7b00-7b02,U+7b05,U+7b07,U+7b09,U+7b0c-7b0e,U+7b10,U+7b12-7b13,U+7b16-7b18,U+7b1a,U+7b1c-7b1d,U+7b1f,U+7b21-7b23,U+7b27,U+7b29,U+7b2d,U+7b2f-7b30,U+7b32,U+7b34-7b37,U+7b39,U+7b3b,U+7b3d,U+7b3f-7b44,U+7b46,U+7b48,U+7b4a,U+7b4d-7b4e,U+7b53,U+7b55,U+7b57,U+7b59,U+7b5c,U+7b5e-7b5f,U+7b61,U+7b63-7b6d,U+7b6f-7b70,U+7b73-7b74,U+7b76,U+7b78,U+7b7a,U+7b7c-7b7d,U+7b7f,U+7b81-7b84,U+7b86-7b8c,U+7b8e-7b8f,U+7b91-7b93,U+7b96,U+7b98-7b9b,U+7b9e-7ba0,U+7ba3-7ba5,U+7bae-7bb0,U+7bb2-7bb3,U+7bb5-7bb7,U+7bb9-7bc0,U+7bc2-7bc5,U+7bc8-7bcb,U+7bcd-7bd0,U+7bd2,U+7bd4-7bd8,U+7bdb-7bdc,U+7bde-7be0,U+7be2-7be4,U+7be7-7be9,U+7beb-7bed,U+7bef-7bf0,U+7bf2-7bf6,U+7bf8-7bfb,U+7bfd,U+7bff-7c06,U+7c08-7c0a,U+7c0d-7c0e,U+7c10-7c13"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-9cfb2a77a4e45025105ad29a1748b90d.woff2",descriptors:{unicodeRange:"U+7a10-7a13,U+7a15-7a16,U+7a18-7a19,U+7a1b-7a1d,U+7a1f,U+7a21-7a22,U+7a24-7a32,U+7a34-7a36,U+7a38,U+7a3a,U+7a3e,U+7a40-7a45,U+7a47-7a50,U+7a52-7a56,U+7a58-7a6f,U+7a71-7a73,U+7a75,U+7a7b-7a7e,U+7a82,U+7a85,U+7a87,U+7a89-7a8c,U+7a8e-7a90,U+7a93-7a94,U+7a99-7a9b,U+7a9e,U+7aa1-7aa4,U+7aa7,U+7aa9-7aab,U+7aae-7ab2,U+7ab4-7abe,U+7ac0-7aca,U+7acc-7ad5,U+7ad7-7ad8,U+7ada-7add,U+7ae1-7ae2,U+7ae4,U+7ae7-7aec,U+7aee,U+7af0-7af8,U+7afb-7afc"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-450da755d5bcb70906e1295e559b9602.woff2",descriptors:{unicodeRange:"U+790d-7912,U+7914-791d,U+791f-7923,U+7925-7933,U+7935-7939,U+793d,U+793f,U+7942-7945,U+7947,U+794a-7952,U+7954-7955,U+7958-7959,U+7961,U+7963-7964,U+7966,U+7969-796c,U+796e,U+7970-7976,U+7979,U+797b-797f,U+7982-7983,U+7986-7989,U+798b-798e,U+7990-7999,U+799b-79a6,U+79a8-79b2,U+79b4-79b8,U+79bc,U+79bf,U+79c2,U+79c4-79c5,U+79c7-79c8,U+79ca,U+79cc,U+79ce-79d0,U+79d3-79d4,U+79d6-79d7,U+79d9-79de,U+79e0-79e2,U+79e5,U+79e8,U+79ea,U+79ec,U+79ee,U+79f1-79f7,U+79f9-79fa,U+79fc,U+79fe-79ff,U+7a01,U+7a04-7a05,U+7a07-7a0a,U+7a0c,U+7a0f"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-0986d134c05864f5025962eef9f994a0.woff2",descriptors:{unicodeRange:"U+77d8-77da,U+77dd-77e1,U+77e4,U+77e6,U+77e8,U+77ea,U+77ef-77f2,U+77f4-77f5,U+77f7,U+77f9-77fc,U+7803-7808,U+780a-780b,U+780e-7810,U+7813,U+7815,U+7819,U+781b,U+781e,U+7820-7822,U+7824,U+7828,U+782a-782b,U+782e-782f,U+7831-7833,U+7835-7836,U+783d,U+783f,U+7841-7844,U+7846,U+7848-784b,U+784d,U+784f,U+7851,U+7853-7854,U+7858-785c,U+785e-7869,U+786f-7876,U+7878-787b,U+787d-7886,U+7888,U+788a-788b,U+788f-7890,U+7892,U+7894-7896,U+7899,U+789d-789e,U+78a0,U+78a2,U+78a4,U+78a6,U+78a8-78af,U+78b5-78b8,U+78ba-78bd,U+78bf-78c0,U+78c2-78c4,U+78c6-78c8,U+78cc-78cf,U+78d1-78d3,U+78d6-78d8,U+78da-78e7,U+78e9-78eb,U+78ed-78f1,U+78f3,U+78f5-78f6,U+78f8-78f9,U+78fb-7900,U+7902-7904,U+7906-790c"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-1ee544f0f1dac422545c505baa788992.woff2",descriptors:{unicodeRange:"U+76af-76b0,U+76b3,U+76b5-76be,U+76c0-76c1,U+76c3-76c4,U+76c7,U+76c9,U+76cb-76cc,U+76d3,U+76d5,U+76d9-76da,U+76dc-76de,U+76e0-76e4,U+76e6-76ed,U+76f0,U+76f3,U+76f5-76f7,U+76fa-76fb,U+76fd,U+76ff-7703,U+7705-7706,U+770a,U+770c,U+770e-7718,U+771b-771e,U+7721,U+7723-7725,U+7727,U+772a-772c,U+772e,U+7730-7734,U+7739,U+773b,U+773d-773f,U+7742,U+7744-7746,U+7748-774f,U+7752-7759,U+775c-7760,U+7764,U+7767,U+7769-776a,U+776d-7778,U+777a-777c,U+7781-7783,U+7786-778b,U+778f-7790,U+7793-779e,U+77a1,U+77a3-77a4,U+77a6,U+77a8,U+77ab,U+77ad-77af,U+77b1-77b2,U+77b4,U+77b6-77ba,U+77bc,U+77be,U+77c0-77cc,U+77ce-77d6"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-4806e761d750087c2d734fc64596eaff.woff2",descriptors:{unicodeRange:"U+7589-758a,U+758c-758e,U+7590,U+7593,U+7595,U+7598,U+759b-759c,U+759e,U+75a2,U+75a6-75aa,U+75ad,U+75b6-75b7,U+75ba-75bb,U+75bf-75c1,U+75c6,U+75cb-75cc,U+75ce-75d1,U+75d3,U+75d7,U+75d9-75da,U+75dc-75dd,U+75df-75e1,U+75e5,U+75e9,U+75ec-75ef,U+75f2-75f3,U+75f5-75f8,U+75fa-75fb,U+75fd-75fe,U+7602,U+7604,U+7606-7609,U+760b,U+760d-760f,U+7611-7614,U+7616,U+761a,U+761c-761e,U+7621,U+7623,U+7627-7628,U+762c,U+762e-762f,U+7631-7632,U+7636-7637,U+7639-763b,U+763d,U+7641-7642,U+7644-764b,U+764e-7653,U+7655,U+7657-765b,U+765d,U+765f-7662,U+7664-766a,U+766c-766e,U+7670-7677,U+7679-767a,U+767c,U+767f-7681,U+7683,U+7685,U+7689-768a,U+768c-768d,U+768f-7690,U+7692,U+7694-7695,U+7697-7698,U+769a-76a3,U+76a5-76ad"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-33432927cd87d40cfe393c7482bf221f.woff2",descriptors:{unicodeRange:"U+7492-749b,U+749d,U+749f-74a6,U+74aa-74b9,U+74bb-74d1,U+74d3-74db,U+74dd,U+74df,U+74e1,U+74e5,U+74e7-74ed,U+74f0-74f3,U+74f5,U+74f8-74fe,U+7500-7503,U+7505-750c,U+750e,U+7510,U+7512,U+7514-7517,U+751b,U+751d-751e,U+7520-7524,U+7526-7527,U+752a,U+752e,U+7534,U+7536,U+7539,U+753c-753d,U+753f,U+7541-7544,U+7546-7547,U+7549-754a,U+754d,U+7550-7553,U+7555-7558,U+755d-7564,U+7567-7569,U+756b-7571,U+7573,U+7575-7577,U+757a-757e,U+7580-7582,U+7584-7585,U+7587-7588"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-be549ab72f0719d606a5c01e2c0219b6.woff2",descriptors:{unicodeRange:"U+7372-737d,U+737f-7383,U+7385-7386,U+7388,U+738a,U+738c-738d,U+738f-7390,U+7392-7395,U+7397-739a,U+739c-739e,U+73a0-73a1,U+73a3-73a8,U+73aa,U+73ac-73ad,U+73b1,U+73b4-73b6,U+73b8-73b9,U+73bc-73bf,U+73c1,U+73c3-73c7,U+73cb-73cc,U+73ce,U+73d2-73d8,U+73da-73dd,U+73df,U+73e1-73e4,U+73e6,U+73e8,U+73ea-73ec,U+73ee-73f1,U+73f3-7402,U+7404,U+7407-7408,U+740b-740e,U+7411-7419,U+741c-7421,U+7423-7424,U+7427,U+7429,U+742b,U+742d,U+742f,U+7431-7432,U+7437-743b,U+743d-7440,U+7442-7454,U+7456,U+7458,U+745d,U+7460-746c,U+746e-746f,U+7471-7475,U+7478-747d,U+747f,U+7482,U+7484-7486,U+7488-748a,U+748c-748d,U+748f,U+7491"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-019d66dcad46dc156b162d267f981c20.woff2",descriptors:{unicodeRange:"U+7054-705d,U+705f-706a,U+706e,U+7071-7074,U+7077,U+7079-707b,U+707d,U+7081-7084,U+7086-7088,U+708b-708d,U+708f-7091,U+7093,U+7097-7098,U+709a-709b,U+709e-70aa,U+70b0,U+70b2,U+70b4-70b6,U+70ba,U+70be-70bf,U+70c4-70c7,U+70c9,U+70cb-70d7,U+70da,U+70dc-70de,U+70e0-70e3,U+70e5,U+70ea,U+70ee,U+70f0-70f6,U+70f8,U+70fa-70fc,U+70fe-7108,U+710b-710f,U+7111-7112,U+7114,U+7117,U+711b-7125,U+7127-712e,U+7132-7135,U+7137-7144,U+7146-7149,U+714b,U+714d,U+714f-715b,U+715d,U+715f-7163,U+7165,U+7169-716d,U+716f-7171,U+7174-7177"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-b5c1596551c256e0e9cf02028595b092.woff2",descriptors:{unicodeRange:"U+722e-722f,U+7232-7234,U+723a,U+723c,U+723e,U+7240-7246,U+7249-724b,U+724e-7251,U+7253-7255,U+7257-7258,U+725a,U+725c,U+725e,U+7260,U+7263-7265,U+7268,U+726a-726d,U+7270-7271,U+7273-7274,U+7276-7278,U+727b-727d,U+7282-7283,U+7285-7289,U+728c,U+728e,U+7290-7291,U+7293-729e,U+72a0-72ab,U+72ae,U+72b1-72b3,U+72b5,U+72ba-72c0,U+72c5-72c7,U+72c9-72cc,U+72cf,U+72d1,U+72d3-72d6,U+72d8,U+72da-72dd,U+72df,U+72e2-72e7,U+72ea-72eb,U+72f5-72f6,U+72f9,U+72fd-7300,U+7302,U+7304-7309,U+730b-730d,U+730f-7312,U+7314,U+7318-731a,U+731f-7320,U+7323-7324,U+7326-7328,U+732d,U+732f-7330,U+7332-7333,U+7335-7336,U+733a-733d,U+7340-734c,U+734e-734f,U+7351,U+7353-7356,U+7358-735f,U+7361-736b,U+736e,U+7370-7371"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-e5f453bb04da18eed01675eeebd88bf8.woff2",descriptors:{unicodeRange:"U+6ec5-6ec6,U+6ec8-6eca,U+6ecc-6ece,U+6ed0,U+6ed2,U+6ed6,U+6ed8-6ed9,U+6edb-6edd,U+6ee3,U+6ee7,U+6eea-6ef3,U+6ef5-6ef8,U+6efa-6f01,U+6f03-6f05,U+6f07-6f08,U+6f0a-6f0e,U+6f10-6f12,U+6f16-6f1f,U+6f21-6f23,U+6f25-6f28,U+6f2c,U+6f2e,U+6f30,U+6f32,U+6f34-6f35,U+6f37-6f3d,U+6f3f-6f45,U+6f48-6f4a,U+6f4c,U+6f4e-6f57,U+6f59-6f5b,U+6f5d,U+6f5f-6f61,U+6f63-6f65,U+6f67-6f6c,U+6f6f-6f71,U+6f73,U+6f75-6f77,U+6f79,U+6f7b,U+6f7d-6f83,U+6f85-6f87,U+6f8a-6f8b,U+6f8f-6f9b,U+6f9d-6fa0,U+6fa2-6fa6,U+6fa8-6fb1"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-cf2cc71752631e579e35b0e423bf2638.woff2",descriptors:{unicodeRange:"U+6d73,U+6d75-6d76,U+6d79-6d7b,U+6d7d-6d81,U+6d83-6d84,U+6d86-6d87,U+6d8a-6d8b,U+6d8d,U+6d8f-6d90,U+6d92,U+6d96-6d9a,U+6d9c,U+6da2,U+6da5,U+6dac-6dad,U+6db0-6db1,U+6db3-6db4,U+6db6-6db7,U+6db9-6dbe,U+6dc1-6dc3,U+6dc8-6dca,U+6dcd-6dd0,U+6dd2-6dd5,U+6dd7,U+6dda-6ddc,U+6ddf,U+6de2-6de3,U+6de5,U+6de7-6dea,U+6ded,U+6def-6df0,U+6df2,U+6df4-6df6,U+6df8,U+6dfa,U+6dfd-6e04,U+6e06-6e09,U+6e0b,U+6e0f,U+6e12-6e13,U+6e15,U+6e18-6e19,U+6e1b-6e1c,U+6e1e-6e1f,U+6e22,U+6e26-6e28,U+6e2a,U+6e2c,U+6e2e,U+6e30-6e31,U+6e33,U+6e35-6e37,U+6e39,U+6e3b-6e42,U+6e45-6e4c,U+6e4f-6e52,U+6e55,U+6e57,U+6e59-6e5a,U+6e5c-6e5e,U+6e60-6e6a,U+6e6c-6e6d,U+6e6f-6e7d,U+6e80-6e82,U+6e84,U+6e87-6e88,U+6e8a-6e8e,U+6e91-6e97,U+6e99-6e9b,U+6e9d-6e9e,U+6ea0-6ea1,U+6ea3-6ea4,U+6ea6,U+6ea8-6ea9,U+6eab-6eae,U+6eb0,U+6eb3,U+6eb5,U+6eb8-6eb9,U+6ebc,U+6ebe-6ec0,U+6ec3-6ec4"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-6f3256af8454371776bc46670d33cc65.woff2",descriptors:{unicodeRange:"U+6bbb-6bbe,U+6bc0,U+6bc3-6bc4,U+6bc6-6bca,U+6bcc,U+6bce,U+6bd0-6bd1,U+6bd8,U+6bda,U+6bdc-6be0,U+6be2-6be9,U+6bec-6bee,U+6bf0-6bf2,U+6bf4,U+6bf6-6bf8,U+6bfa-6bfc,U+6bfe-6c04,U+6c08-6c0c,U+6c0e,U+6c12,U+6c17,U+6c1c-6c1e,U+6c20,U+6c23,U+6c25,U+6c2b-6c2d,U+6c31,U+6c33,U+6c36-6c37,U+6c39-6c3c,U+6c3e-6c3f,U+6c43-6c45,U+6c48,U+6c4b-6c4f,U+6c51-6c53,U+6c56,U+6c58-6c5a,U+6c62-6c63,U+6c65-6c67,U+6c6b-6c6f,U+6c71,U+6c73,U+6c75,U+6c77-6c78,U+6c7a-6c7c,U+6c7f-6c80,U+6c84,U+6c87,U+6c8a-6c8b,U+6c8d-6c8e,U+6c91-6c92,U+6c95-6c98,U+6c9a,U+6c9c-6c9e,U+6ca0,U+6ca2,U+6ca8,U+6cac,U+6caf-6cb0,U+6cb4-6cb7,U+6cba,U+6cc0-6cc3,U+6cc6-6cc8,U+6ccb,U+6ccd-6ccf,U+6cd1-6cd2,U+6cd8-6cda,U+6cdc-6cdd,U+6cdf,U+6ce4,U+6ce6-6ce7,U+6ce9,U+6cec-6ced,U+6cf2,U+6cf4,U+6cf9,U+6cff-6d00,U+6d02-6d03,U+6d05-6d06,U+6d08-6d0a,U+6d0d,U+6d0f-6d11,U+6d13-6d16,U+6d18,U+6d1c-6d1d,U+6d1f-6d24,U+6d26,U+6d28-6d29,U+6d2c-6d2d,U+6d2f-6d30,U+6d34,U+6d36-6d38,U+6d3a,U+6d3f-6d40,U+6d42,U+6d44,U+6d49,U+6d4c,U+6d50,U+6d55-6d58,U+6d5b,U+6d5d,U+6d5f,U+6d61-6d62,U+6d64-6d65,U+6d67-6d68,U+6d6b-6d6d,U+6d70-6d72"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-23f228f3999c01983860012330e4be08.woff2",descriptors:{unicodeRange:"U+6967-696a,U+696c-696d,U+696f-6970,U+6972-6976,U+697a-697b,U+697d-697f,U+6981,U+6983,U+6985,U+698a-698c,U+698e-6993,U+6996-6997,U+6999-699a,U+699d-69a6,U+69a9-69aa,U+69ac,U+69ae-69b0,U+69b2-69b3,U+69b5-69b6,U+69b8-69ba,U+69bc-69c0,U+69c2-69c9,U+69cb,U+69cd,U+69cf,U+69d1-69d3,U+69d5-69da,U+69dc-69de,U+69e1-69ec,U+69ee-69f1,U+69f3-69fc,U+69fe,U+6a00-6a09,U+6a0b-6a16,U+6a19-6a1e,U+6a20,U+6a22-6a27,U+6a29,U+6a2b-6a2e,U+6a30,U+6a32-6a34,U+6a36-6a3c,U+6a3f-6a43,U+6a45-6a46,U+6a48-6a4a"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-21430ee05a1248901da8d0de08744d47.woff2",descriptors:{unicodeRange:"U+6830-6831,U+6834-6836,U+683a-683b,U+683f,U+6847,U+684b,U+684d,U+684f,U+6852,U+6856-685f,U+686a,U+686c-6873,U+6875,U+6878-6880,U+6882,U+6884,U+6887-688e,U+6890-6892,U+6894-6896,U+6898-68a1,U+68a3-68a5,U+68a9-68ac,U+68ae,U+68b1-68b2,U+68b4,U+68b6-68bf,U+68c1,U+68c3-68c8,U+68ca,U+68cc,U+68ce-68d1,U+68d3-68d4,U+68d6-68d7,U+68d9,U+68db-68df,U+68e1-68e2,U+68e4-68ed,U+68ef,U+68f2-68f4,U+68f6-68f8,U+68fb,U+68fd-6900,U+6902-6904,U+6906-690a,U+690c,U+690f,U+6911,U+6913-691e,U+6921-6923,U+6925-692c,U+692e-692f,U+6931-6933,U+6935-6938,U+693a-693c,U+693e,U+6940-6941,U+6943-6953,U+6955-6956,U+6958-6959,U+695b-695c,U+695f,U+6961-6962,U+6964-6965"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-5330a2119a716e4e7224ed108b085dac.woff2",descriptors:{unicodeRange:"U+66b8,U+66ba-66bd,U+66bf-66d8,U+66da,U+66de-66e5,U+66e7-66e8,U+66ea-66ef,U+66f1,U+66f5-66f6,U+66f8,U+66fa-66fb,U+66fd,U+6701-6707,U+670c,U+670e-670f,U+6711-6713,U+6716,U+6718-671a,U+671c,U+671e,U+6720-6725,U+6727,U+6729,U+672e,U+6730,U+6732-6733,U+6736-6739,U+673b-673c,U+673e-673f,U+6741,U+6744-6745,U+6747,U+674a-674b,U+674d,U+6752,U+6754-6755,U+6757-675b,U+675d,U+6762-6764,U+6766-6767,U+676b-676c,U+676e,U+6771,U+6774,U+6776,U+6778-677b,U+677d,U+6780,U+6782-6783,U+6785-6786,U+6788,U+678a,U+678c-678f,U+6791-6794,U+6796,U+6799,U+679b,U+679f-67a1,U+67a4,U+67a6,U+67a9,U+67ac,U+67ae,U+67b1-67b2,U+67b4,U+67b9-67c0,U+67c2,U+67c5-67ce,U+67d5-67d7,U+67db,U+67df,U+67e1,U+67e3-67e4,U+67e6-67e8,U+67ea-67eb,U+67ed-67ee,U+67f2,U+67f5-67fc,U+67fe,U+6801-6804,U+6806,U+680d,U+6810,U+6812,U+6814-6815,U+6818-681c,U+681e-6820,U+6822-6828,U+682b-682f"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-cd145ce4a0ea18469358df53c207bc1b.woff2",descriptors:{unicodeRange:"U+6569-656a,U+656d-656f,U+6571,U+6573,U+6575-6576,U+6578-6586,U+6588-658a,U+658d-658f,U+6592,U+6594-6596,U+6598,U+659a,U+659d-659e,U+65a0,U+65a2-65a3,U+65a6,U+65a8,U+65aa,U+65ac,U+65ae,U+65b1-65b8,U+65ba-65bb,U+65be-65c0,U+65c2,U+65c7-65ca,U+65cd,U+65d0-65d1,U+65d3-65d5,U+65d8-65df,U+65e1,U+65e3-65e4,U+65ea-65eb,U+65f2-65f5,U+65f8-65f9,U+65fb-65ff,U+6601,U+6604-6605,U+6607-6609,U+660b,U+660d,U+6610-6612,U+6616-6618,U+661a-661c,U+661e,U+6621-6624,U+6626,U+6629-662c,U+662e,U+6630,U+6632-6633,U+6637-663b,U+663d,U+663f-6640,U+6642,U+6644-664a,U+664d-664e,U+6650-6651,U+6658-6659,U+665b-665e,U+6660,U+6662-6663,U+6665,U+6667,U+6669-666d,U+6671-6673,U+6675,U+6678-6679,U+667b-667d,U+667f-6681,U+6683,U+6685-6686,U+6688-668b,U+668d-6690,U+6692-6695,U+6698-669c,U+669e-66a6,U+66a9-66ad,U+66af-66b3,U+66b5-66b7"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-36925dfe329a45086cbb7fc5c20d45ac.woff2",descriptors:{unicodeRange:"U+5f30,U+5f32-5f38,U+5f3b,U+5f3d-5f3f,U+5f41-5f4f,U+5f51,U+5f54,U+5f59-5f5c,U+5f5e-5f60,U+5f63,U+5f65,U+5f67-5f68,U+5f6b,U+5f6e-5f6f,U+5f72,U+5f74-5f76,U+5f78,U+5f7a,U+5f7d-5f7f,U+5f83,U+5f86,U+5f8d-5f8f,U+5f91,U+5f93-5f94,U+5f96,U+5f9a-5f9b,U+5f9d-5fa0,U+5fa2-5fa7,U+5fa9,U+5fab-5fac,U+5faf-5fb4,U+5fb6,U+5fb8-5fbb,U+5fbe-5fc2,U+5fc7-5fc8,U+5fca-5fcb,U+5fce,U+5fd3-5fd5,U+5fda-5fdc,U+5fde-5fdf,U+5fe2-5fe3,U+5fe5-5fe6,U+5fe8-5fe9,U+5fec,U+5fef-5ff0,U+5ff2-5ff4,U+5ff6-5ff7,U+5ff9-5ffa,U+5ffc,U+6007-6009,U+600b-600c,U+6010-6011,U+6013,U+6017-6018,U+601a,U+601e-601f,U+6022-6024,U+602c-602e,U+6030-6034,U+6036-603a,U+603d-603e,U+6040,U+6044-604a,U+604c,U+604e-604f,U+6051,U+6053-6054,U+6056-6058,U+605b-605c,U+605e-6061,U+6065-6066,U+606e,U+6071-6072,U+6074-6075,U+6077,U+607e,U+6080-6082,U+6085-6088,U+608a-608b,U+608e-6091,U+6093,U+6095,U+6097-6099,U+609c,U+609e,U+60a1-60a2,U+60a4-60a5,U+60a7,U+60a9-60aa,U+60ae,U+60b0,U+60b3,U+60b5-60b7,U+60b9-60ba,U+60bd-60c4,U+60c7-60c9,U+60cc"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-4bfaa8ffa64c5ee560aa2daba7c9cbd3.woff2",descriptors:{unicodeRange:"U+635a-635d,U+6360,U+6364-6366,U+6368,U+636a-636c,U+636f-6370,U+6372-6375,U+6378-6379,U+637c-637f,U+6381,U+6383-6386,U+638b,U+638d,U+6391,U+6393-6395,U+6397,U+6399-639f,U+63a1,U+63a4,U+63a6,U+63ab,U+63af,U+63b1-63b2,U+63b5-63b6,U+63b9,U+63bb,U+63bd,U+63bf-63c3,U+63c5,U+63c7-63c8,U+63ca-63cc,U+63d1,U+63d3-63d5,U+63d7-63dd,U+63df,U+63e2,U+63e4-63e8,U+63eb-63ec,U+63ee-63f1,U+63f3,U+63f5,U+63f7,U+63f9-63fc,U+63fe,U+6403-6404,U+6406-640a,U+640d-640e,U+6411-6412,U+6415-641a,U+641d,U+641f,U+6422-6425,U+6427-6429,U+642b,U+642e-6433,U+6435-6439,U+643b-643c,U+643e,U+6440,U+6442-6443,U+6449,U+644b-6451,U+6453,U+6455-6457,U+6459-645d,U+645f-6466,U+6468,U+646a-646c,U+646e-6477,U+647b-6481,U+6483,U+6486,U+6488-648f"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-112c051027b2d766c19a519f6ee1f4f7.woff2",descriptors:{unicodeRange:"U+61c5-61c7,U+61c9,U+61cc-61d0,U+61d3,U+61d5-61e5,U+61e7-61f4,U+61f6-61fe,U+6200-6205,U+6207,U+6209,U+6213-6214,U+6219,U+621c-621e,U+6220,U+6223,U+6226-6229,U+622b,U+622d,U+622f-6232,U+6235-6236,U+6238-623c,U+6242,U+6244-6246,U+624a,U+624f-6250,U+6255-6257,U+6259-625a,U+625c-6262,U+6264-6265,U+6268,U+6271-6272,U+6274-6275,U+6277-6278,U+627a-627b,U+627d,U+6281-6283,U+6285-6288,U+628b-6290,U+6294,U+6299,U+629c-629e,U+62a3,U+62a6-62a7,U+62a9-62aa,U+62ad-62b0,U+62b2-62b4,U+62b6-62b8,U+62ba,U+62be,U+62c0-62c1,U+62c3,U+62cb,U+62cf,U+62d1,U+62d5,U+62dd-62de,U+62e0-62e1,U+62e4,U+62ea-62eb,U+62f0,U+62f2,U+62f5,U+62f8-62fb,U+6300,U+6303-6306,U+630a-630d,U+630f-6310,U+6312-6315,U+6317-6319,U+631c,U+6326-6327,U+6329,U+632c-632e,U+6330-6331,U+6333-6338,U+633b-633c,U+633e-6341,U+6344,U+6347-6348,U+634a,U+6351-6354,U+6356-6359"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-5b0ed6971aaab9c8ad563230bd5471a7.woff2",descriptors:{unicodeRange:"U+5dd0-5dda,U+5ddc,U+5ddf-5de0,U+5de3-5de4,U+5dea,U+5dec-5ded,U+5df0,U+5df5-5df6,U+5df8-5dfc,U+5dff-5e00,U+5e04,U+5e07,U+5e09-5e0b,U+5e0d-5e0e,U+5e12-5e13,U+5e17,U+5e1e-5e25,U+5e28-5e2c,U+5e2f-5e30,U+5e32-5e36,U+5e39-5e3a,U+5e3e-5e41,U+5e43,U+5e46-5e4b,U+5e4d-5e53,U+5e56-5e5a,U+5e5c-5e5d,U+5e5f-5e60,U+5e63-5e71,U+5e75,U+5e77,U+5e79,U+5e7e,U+5e81-5e83,U+5e85,U+5e88-5e89,U+5e8c-5e8e,U+5e92,U+5e98,U+5e9b,U+5e9d,U+5ea1-5ea4,U+5ea8-5eac,U+5eae-5eb2,U+5eb4,U+5eba-5ebd,U+5ebf-5ec8,U+5ecb-5ed0,U+5ed4-5ed5,U+5ed7-5eda,U+5edc-5ee7,U+5ee9,U+5eeb-5ef3,U+5ef5,U+5ef8-5ef9,U+5efb-5efd,U+5f05-5f07,U+5f09,U+5f0c-5f0e,U+5f10,U+5f12,U+5f14,U+5f16,U+5f19-5f1a,U+5f1c-5f1e,U+5f21-5f24,U+5f28,U+5f2b-5f2c,U+5f2e"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-98f2ad84457de7f3740d9920b8fa8667.woff2",descriptors:{unicodeRange:"U+60cd-60d0,U+60d2-60d4,U+60d6-60d7,U+60d9,U+60db,U+60de,U+60e1-60e5,U+60ea,U+60f1-60f2,U+60f5,U+60f7-60f8,U+60fb-60ff,U+6102-6105,U+6107,U+610a-610c,U+6110-6114,U+6116-6119,U+611b-611e,U+6121-6122,U+6125,U+6128-612a,U+612c-613e,U+6140-6147,U+6149,U+614b,U+614d,U+614f-6150,U+6152-6154,U+6156-615c,U+615e-6161,U+6163-6166,U+6169-616f,U+6171-6174,U+6176,U+6178-618a,U+618c-618d,U+618f-6193,U+6195-619c,U+619e-61a6,U+61aa-61ab,U+61ad-61b6,U+61b8-61bd,U+61bf-61c1,U+61c3-61c4"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-733171b4ffcd17ea1fe1c0ba627173bf.woff2",descriptors:{unicodeRange:"U+5cf4-5cfa,U+5cfc-5d01,U+5d04-5d05,U+5d08-5d0d,U+5d0f-5d13,U+5d15,U+5d17-5d1a,U+5d1c-5d1d,U+5d1f-5d23,U+5d25,U+5d28,U+5d2a-5d2c,U+5d2f-5d33,U+5d35-5d3c,U+5d3f-5d46,U+5d48-5d49,U+5d4d-5d57,U+5d59-5d5a,U+5d5c,U+5d5e-5d68,U+5d6a,U+5d6d-5d6e,U+5d70-5d73,U+5d75-5d81,U+5d83-5d98,U+5d9a-5d9c,U+5d9e-5db6,U+5db8-5dc4,U+5dc6-5dcc,U+5dce-5dcf"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-684d65f1793cac449dde5d59cb3c47fb.woff2",descriptors:{unicodeRange:"U+5b52,U+5b56,U+5b5e,U+5b60-5b61,U+5b67-5b68,U+5b6b,U+5b6d-5b6f,U+5b72,U+5b74,U+5b76-5b79,U+5b7b-5b7c,U+5b7e-5b7f,U+5b82,U+5b86,U+5b8a,U+5b8d-5b8e,U+5b90-5b92,U+5b94,U+5b96,U+5b9f,U+5ba7-5ba9,U+5bac-5baf,U+5bb1-5bb2,U+5bb7,U+5bba-5bbc,U+5bc0-5bc1,U+5bc3,U+5bc8-5bcb,U+5bcd-5bcf,U+5bd1,U+5bd4-5bdc,U+5be0,U+5be2-5be3,U+5be6-5be7,U+5be9-5bed,U+5bef,U+5bf1-5bf7,U+5bfd-5bfe,U+5c00,U+5c02-5c03,U+5c05,U+5c07-5c08,U+5c0b-5c0e,U+5c10,U+5c12-5c13,U+5c17,U+5c19,U+5c1b,U+5c1e-5c21,U+5c23,U+5c26,U+5c28-5c2b,U+5c2d-5c30,U+5c32-5c33,U+5c35-5c37,U+5c43-5c44,U+5c46-5c47,U+5c4c-5c4d,U+5c52-5c54,U+5c56-5c58,U+5c5a-5c5d,U+5c5f,U+5c62,U+5c64,U+5c67-5c6d,U+5c70,U+5c72-5c78,U+5c7b-5c7e,U+5c80,U+5c83-5c87,U+5c89-5c8b,U+5c8e-5c8f,U+5c92-5c93,U+5c95,U+5c9d-5ca1,U+5ca4-5ca8,U+5caa,U+5cae-5cb0,U+5cb2,U+5cb4,U+5cb6,U+5cb9-5cbc,U+5cbe,U+5cc0,U+5cc2-5cc3,U+5cc5-5cca,U+5ccc-5cd1,U+5cd3-5cd8,U+5cda-5ce0,U+5ce2-5ce3,U+5ce7,U+5ce9,U+5ceb-5cec,U+5cee-5cef,U+5cf1-5cf3"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-cbaaefaaf326668277aa24dfa93c4d28.woff2",descriptors:{unicodeRange:"U+593b,U+593d-5940,U+5943,U+5945-5946,U+594a,U+594c-594d,U+5950,U+5952-5953,U+5959,U+595b-595f,U+5961,U+5963-5964,U+5966-5972,U+5975,U+5977,U+597a-597c,U+597e-5980,U+5985,U+5989,U+598b-598c,U+598e-5991,U+5994-5995,U+5998,U+599a-599d,U+599f-59a2,U+59a6-59a7,U+59ac-59ad,U+59b0-59b1,U+59b3-59b8,U+59ba,U+59bc-59bd,U+59bf-59c5,U+59c7-59c9,U+59cc-59cf,U+59d5-59d6,U+59d9,U+59db,U+59de-59e2,U+59e4,U+59e6-59e7,U+59e9-59eb,U+59ed-59f8,U+59fa,U+59fc-59fe,U+5a00,U+5a02,U+5a0a-5a0b,U+5a0d-5a10,U+5a12,U+5a14-5a17,U+5a19-5a1b,U+5a1d-5a1e,U+5a21-5a22,U+5a24,U+5a26-5a28,U+5a2a-5a30,U+5a33,U+5a35,U+5a37-5a3b,U+5a3d-5a3f,U+5a41-5a45,U+5a47-5a48,U+5a4b-5a54,U+5a56-5a59,U+5a5b-5a61,U+5a63-5a66,U+5a68-5a69,U+5a6b-5a73,U+5a78-5a79,U+5a7b-5a7e,U+5a80-5a90"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-58fd02350d0bc52cf1ca3bb32ce9766e.woff2",descriptors:{unicodeRange:"U+5a91,U+5a93-5a99,U+5a9c-5aa9,U+5aab-5ab1,U+5ab4,U+5ab6-5ab7,U+5ab9-5abd,U+5abf-5ac0,U+5ac3-5ac8,U+5aca-5acb,U+5acd-5ad1,U+5ad3,U+5ad5,U+5ad7,U+5ad9-5adb,U+5add-5adf,U+5ae2,U+5ae4-5ae5,U+5ae7-5ae8,U+5aea,U+5aec-5af0,U+5af2-5b08,U+5b0a-5b15,U+5b18-5b31,U+5b33,U+5b35-5b36,U+5b38-5b3f,U+5b41-5b4f"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-7ccce86603f80a099ddb0cb21d4ae3e3.woff2",descriptors:{unicodeRange:"U+5843,U+5845-584b,U+584e-5850,U+5852-5853,U+5855-5857,U+5859-585d,U+585f-5864,U+5866-586a,U+586d-587d,U+587f,U+5882,U+5884,U+5886-5888,U+588a-5891,U+5894-5898,U+589b-589d,U+58a0-58a7,U+58aa-58bb,U+58bd-58c0,U+58c2-58c4,U+58c6-58d0,U+58d2-58d4,U+58d6-58e3,U+58e5-58ea,U+58ed,U+58ef,U+58f1-58f2,U+58f4-58f5,U+58f7-58f8,U+58fa-5901,U+5903,U+5905-5906,U+5908-590c,U+590e,U+5910-5913,U+5917-5918,U+591b,U+591d-591e,U+5920-5923,U+5926,U+5928,U+592c,U+5930,U+5932-5933,U+5935-5936"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-3717077e38f98d89eae729b6c14e56dc.woff2",descriptors:{unicodeRange:"U+56d0-56d3,U+56d5-56d6,U+56d8-56d9,U+56dc,U+56e3,U+56e5-56ea,U+56ec,U+56ee-56ef,U+56f2-56f3,U+56f6-56f8,U+56fb-56fc,U+5700-5702,U+5705,U+5707,U+570b-571b,U+571d-571e,U+5720-5722,U+5724-5727,U+572b,U+5731-5732,U+5734-5738,U+573c-573d,U+573f,U+5741,U+5743-5746,U+5748-5749,U+574b,U+5752-5756,U+5758-5759,U+5762-5763,U+5765,U+5767,U+576c,U+576e,U+5770-5772,U+5774-5775,U+5778-577a,U+577d-5781,U+5787-578a,U+578d-5791,U+5794-579a,U+579c-579f,U+57a5,U+57a8,U+57aa,U+57ac,U+57af-57b1,U+57b3,U+57b5-57b7,U+57b9-57c1,U+57c4-57ca,U+57cc-57cd,U+57d0-57d1,U+57d3,U+57d6-57d7,U+57db-57dc,U+57de,U+57e1-57e3,U+57e5-57ec,U+57ee,U+57f0-57f3,U+57f5-57f7,U+57fb-57fc,U+57fe-57ff,U+5801,U+5803-5805,U+5808-580a,U+580c,U+580e-5810,U+5812-5814,U+5816-5818,U+581a-581d,U+581f,U+5822-5823,U+5825-5829,U+582b-582f,U+5831-5834,U+5836-5842"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-dbea1af6dcd9860be40c3d18254338f5.woff2",descriptors:{unicodeRange:"U+55f9-55fc,U+55ff,U+5602-5607,U+560a-560b,U+560d,U+5610-5617,U+5619-561a,U+561c-561d,U+5620-5622,U+5625-5626,U+5628-562b,U+562e-5630,U+5633,U+5635,U+5637-5638,U+563a,U+563c-563e,U+5640-564b,U+564f-5653,U+5655-5656,U+565a-565b,U+565d-5661,U+5663,U+5665-5667,U+566d-5670,U+5672-5675,U+5677-567a,U+567d-5684,U+5687-568d,U+5690-5692,U+5694-56a2,U+56a4-56ae,U+56b0-56b6,U+56b8-56bb,U+56bd-56c9,U+56cb-56cf"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-4a0fdb40036e87b40aa08dd30584cb85.woff2",descriptors:{unicodeRange:"U+5286-5287,U+5289-528f,U+5291-5292,U+5294-529a,U+529c,U+52a4-52a7,U+52ae-52b0,U+52b4-52bd,U+52c0-52c2,U+52c4-52c6,U+52c8,U+52ca,U+52cc-52cf,U+52d1,U+52d3-52d5,U+52d7,U+52d9-52de,U+52e0-52e3,U+52e5-52ef,U+52f1-52f8,U+52fb-52fd,U+5301-5304,U+5307,U+5309-530c,U+530e,U+5311-5314,U+5318,U+531b-531c,U+531e-531f,U+5322,U+5324-5325,U+5327-5329,U+532b-532d,U+532f-5338,U+533c-533d,U+5340,U+5342,U+5344,U+5346,U+534b-534d,U+5350,U+5354,U+5358-5359,U+535b,U+535d,U+5365,U+5368,U+536a,U+536c-536d,U+5372,U+5376,U+5379,U+537b-537e,U+5380-5381,U+5383,U+5387-5388,U+538a,U+538e-5394,U+5396-5397,U+5399,U+539b-539c,U+539e,U+53a0-53a1,U+53a4,U+53a7,U+53aa-53ad,U+53af-53b5,U+53b7-53ba,U+53bc-53be,U+53c0,U+53c3-53c7,U+53ce-53d0,U+53d2-53d3,U+53d5,U+53da,U+53dc-53de,U+53e1-53e2,U+53e7,U+53f4,U+53fa,U+53fe-5400,U+5402,U+5405,U+5407,U+540b,U+5414,U+5418-541a,U+541c,U+5422,U+5424-5425,U+542a,U+5430,U+5433,U+5436-5437,U+543a"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-0f626226ba1272e832aea87bafd9720e.woff2",descriptors:{unicodeRange:"U+5101-5105,U+5108-510a,U+510c-5111,U+5113-5120,U+5122-513e,U+5142,U+5147,U+514a,U+514c,U+514e-5150,U+5152-5153,U+5157-5159,U+515b,U+515d-5161,U+5163-5164,U+5166-5167,U+5169-516a,U+516f,U+5172,U+517a,U+517e-517f,U+5183-5184,U+5186-5187,U+518a-518b,U+518e-5191,U+5193-5194,U+5198,U+519a,U+519d-519f,U+51a1,U+51a3,U+51a6-51aa,U+51ad-51ae,U+51b4,U+51b8-51ba,U+51be-51bf,U+51c1-51c3,U+51c5,U+51c8,U+51ca,U+51cd-51ce,U+51d0,U+51d2-51da,U+51dc,U+51de-51df,U+51e2-51e3,U+51e5-51ea,U+51ec,U+51ee,U+51f1-51f2,U+51f4,U+51f7,U+51fe,U+5204-5205,U+5209,U+520b-520c,U+520f-5210,U+5213-5215,U+521c,U+521e-521f,U+5221-5223,U+5225-5227,U+522a,U+522c,U+522f,U+5231-5232,U+5234-5235,U+523c,U+523e,U+5244-5249,U+524b,U+524e-524f,U+5252-5253,U+5255,U+5257-525b,U+525d,U+525f-5260,U+5262-5264,U+5266,U+5268,U+526b-526e,U+5270-5271,U+5273-527c,U+527e,U+5280,U+5283-5285"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-938d90c10ff8c20386af7f242c05d6b0.woff2",descriptors:{unicodeRange:"U+543d,U+543f,U+5441-5442,U+5444-5445,U+5447,U+5449,U+544c-544f,U+5451,U+545a,U+545d-5461,U+5463,U+5465,U+5467,U+5469-5470,U+5474,U+5479-547a,U+547e-547f,U+5481,U+5483,U+5485,U+5487-548a,U+548d,U+5491,U+5493,U+5497-5498,U+549c,U+549e-54a2,U+54a5,U+54ae,U+54b0,U+54b2,U+54b5-54b7,U+54b9-54ba,U+54bc,U+54be,U+54c3,U+54c5,U+54ca-54cb,U+54d6,U+54d8,U+54db,U+54e0-54e4,U+54eb-54ec,U+54ef-54f1,U+54f4-54f9,U+54fb,U+54fe,U+5500,U+5502-5505,U+5508,U+550a-550e,U+5512-5513,U+5515-551a,U+551c-551f,U+5521,U+5525-5526,U+5528-5529,U+552b,U+552d,U+5532,U+5534-5536,U+5538-553b,U+553d,U+5540,U+5542,U+5545,U+5547-5548,U+554b-554f,U+5551-5554,U+5557-555b,U+555d-5560,U+5562-5563,U+5568-5569,U+556b,U+556f-5574,U+5579-557a,U+557d,U+557f,U+5585-5586,U+558c-558e,U+5590,U+5592-5593,U+5595-5597,U+559a-559b,U+559e,U+55a0-55a6,U+55a8-55b0,U+55b2,U+55b4,U+55b6,U+55b8,U+55ba,U+55bc,U+55bf-55c3,U+55c6-55c8,U+55ca-55cb,U+55ce-55d0,U+55d5,U+55d7-55db,U+55de,U+55e0,U+55e2,U+55e7,U+55e9,U+55ed-55ee,U+55f0-55f1,U+55f4,U+55f6,U+55f8"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-b6d128682ee29e471486354d486a1b90.woff2",descriptors:{unicodeRange:"U+4fe0,U+4fe2,U+4fe4-4fe5,U+4fe7,U+4feb-4fec,U+4ff0,U+4ff2,U+4ff4-4ff7,U+4ff9,U+4ffb-4ffd,U+4fff-500b,U+500e,U+5010-5011,U+5013,U+5015-5017,U+501b,U+501d-501e,U+5020,U+5022-5024,U+5027,U+502b,U+502f-5039,U+503b,U+503d,U+503f-5042,U+5044-5046,U+5049-504b,U+504d,U+5050-5054,U+5056-5059,U+505b,U+505d-5064,U+5066-506b,U+506d-5075,U+5078-507a,U+507c-507d,U+5081-5084,U+5086-5087,U+5089-508c,U+508e-50a2,U+50a4,U+50a6,U+50aa-50ab,U+50ad-50b1,U+50b3-50b9,U+50bc-50ce,U+50d0-50d5,U+50d7-50d9,U+50db-50e5,U+50e8-50eb,U+50ef-50f2,U+50f4,U+50f6-50fa,U+50fc-5100"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-e51ef413167c6e14e0c0fdcc585f2fc9.woff2",descriptors:{unicodeRange:"U+49d5-4a77"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-9d81066dd2b337c938df6e90380a00dc.woff2",descriptors:{unicodeRange:"U+4dac-4dad,U+4daf-4db5,U+4e02,U+4e04-4e06,U+4e0f,U+4e12,U+4e17,U+4e1f-4e21,U+4e23,U+4e26,U+4e29,U+4e2e-4e2f,U+4e31,U+4e33,U+4e35,U+4e37,U+4e3c,U+4e40-4e42,U+4e44,U+4e46,U+4e4a,U+4e51,U+4e55,U+4e57,U+4e5a-4e5b,U+4e62-4e65,U+4e67-4e68,U+4e6a-4e6f,U+4e72,U+4e74-4e7d,U+4e7f-4e85,U+4e87,U+4e8a,U+4e90,U+4e96-4e97,U+4e99,U+4e9c-4e9e,U+4ea3,U+4eaa,U+4eaf-4eb1,U+4eb4,U+4eb6-4eb9,U+4ebc-4ebe,U+4ec8,U+4ecc,U+4ecf-4ed0,U+4ed2,U+4eda-4edc,U+4ee0,U+4ee2,U+4ee6-4ee7,U+4ee9,U+4eed-4eef,U+4ef1,U+4ef4,U+4ef8-4efa,U+4efc,U+4efe,U+4f00,U+4f02-4f08,U+4f0b-4f0c,U+4f12-4f16,U+4f1c-4f1d,U+4f21,U+4f23,U+4f28-4f29,U+4f2c-4f2e,U+4f31,U+4f33,U+4f35,U+4f37,U+4f39,U+4f3b,U+4f3e-4f42,U+4f44-4f45,U+4f47-4f4c,U+4f52,U+4f54,U+4f56,U+4f61-4f62,U+4f66,U+4f68,U+4f6a-4f6b,U+4f6d-4f6e,U+4f71-4f72,U+4f75,U+4f77-4f7a,U+4f7d,U+4f80-4f82,U+4f85-4f87,U+4f8a,U+4f8c,U+4f8e,U+4f90,U+4f92-4f93,U+4f95-4f96,U+4f98-4f9a,U+4f9c,U+4f9e-4f9f,U+4fa1-4fa2,U+4fa4,U+4fab,U+4fad,U+4fb0-4fb4,U+4fb6-4fbe,U+4fc0-4fc2,U+4fc6-4fc9,U+4fcb-4fcd,U+4fd2-4fd6,U+4fd9,U+4fdb"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-20e7bf72fa05de9adf7dbcc7bf51dde6.woff2",descriptors:{unicodeRange:"U+4933-49d4"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-4095eb84ef3874e2600247bee0b04026.woff2",descriptors:{unicodeRange:"U+487a-4932"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-4ee10ae43505e2e0bc62656ced49c0fa.woff2",descriptors:{unicodeRange:"U+47d2-4879,U+2ce7c,U+2ce88,U+2ce93"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-7494dc504ae00ee9cd0505f990f88c5d.woff2",descriptors:{unicodeRange:"U+4756-47d1,U+2ca02,U+2ca0e,U+2ca7d,U+2caa9,U+2cb29,U+2cb2e,U+2cb31,U+2cb38-2cb39,U+2cb3f,U+2cb41,U+2cb4e,U+2cb5a,U+2cb64,U+2cb69,U+2cb6c,U+2cb6f,U+2cb76,U+2cb78,U+2cb7c,U+2cbb1,U+2cbbf-2cbc0,U+2cbce,U+2cc5f,U+2ccf5-2ccf6,U+2ccfd,U+2ccff,U+2cd02-2cd03,U+2cd0a,U+2cd8b,U+2cd8d,U+2cd8f-2cd90,U+2cd9f-2cda0,U+2cda8,U+2cdad-2cdae,U+2cdd5,U+2ce18,U+2ce1a,U+2ce23,U+2ce26,U+2ce2a"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-8de5b863cb50dfefdd07cb11c774d579.woff2",descriptors:{unicodeRange:"U+46c3-4755,U+2c488,U+2c494,U+2c497,U+2c542,U+2c613,U+2c618,U+2c621,U+2c629,U+2c62b-2c62d,U+2c62f,U+2c642,U+2c64a-2c64b,U+2c72c,U+2c72f,U+2c79f,U+2c7c1,U+2c7fd,U+2c8d9,U+2c8de,U+2c8e1,U+2c8f3,U+2c907,U+2c90a,U+2c91d"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-3e1f8f654357353bf0e04ba5c34b5f7f.woff2",descriptors:{unicodeRange:"U+4629-46c2,U+2bdf7,U+2be29,U+2c029-2c02a,U+2c0a9,U+2c0ca,U+2c1d5,U+2c1d9,U+2c1f9,U+2c27c,U+2c288,U+2c2a4,U+2c317,U+2c35b,U+2c361,U+2c364"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-2e33e8dc771ef5e1d9127d60a6b73679.woff2",descriptors:{unicodeRange:"U+458e-4628,U+2b7a9,U+2b7c5,U+2b7e6,U+2b7f9,U+2b806,U+2b80a,U+2b81c,U+2b8b8,U+2bac7,U+2bb5f,U+2bb62,U+2bb7c,U+2bb83,U+2bc1b,U+2bd77,U+2bd87"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-173945821411c09f70c95f98d590e697.woff2",descriptors:{unicodeRange:"U+4449-4511,U+2afa2,U+2b127-2b128,U+2b137-2b138,U+2b1ed"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-b358f7a51ece39a3247942b1feabdb29.woff2",descriptors:{unicodeRange:"U+439b-4448,U+2a437,U+2a5f1,U+2a602,U+2a61a,U+2a6b2,U+2a7dd,U+2a8fb,U+2a917,U+2aa30,U+2aa36,U+2aa58"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-23ad2d71b280f00b1363b95b7bea94eb.woff2",descriptors:{unicodeRange:"U+4275-430d,U+298c6,U+29a72,U+29d98,U+29ddb,U+29e15,U+29e3d,U+29e49"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-5882ffa04f32584d26109137e2da4352.woff2",descriptors:{unicodeRange:"U+4132-41de,U+28bef,U+28c47,U+28c4f,U+28c51,U+28c54,U+28d10,U+28d71,U+28dfb,U+28e1f,U+28e36,U+28e89,U+28e99,U+28eeb,U+28f32,U+28ff8,U+292a0"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-a203b91dad570bf05a58c3c3ddb529bf.woff2",descriptors:{unicodeRange:"U+41df-4274,U+292b1,U+29490,U+295cf,U+2967f,U+296f0,U+29719,U+29750"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-bd77e3c7f9e0b072d96af37f73d1aa32.woff2",descriptors:{unicodeRange:"U+408e-4131,U+285c8-285c9,U+28678,U+28695,U+286d7,U+286fa,U+287e0,U+28946,U+28949,U+2896b,U+28987-28988,U+289ba-289bb,U+28a1e,U+28a29,U+28a43,U+28a71,U+28a99,U+28acd,U+28add,U+28ae4,U+28b49,U+28bc1"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-5a45d991244d4c7140217e1e5f5ca4f4.woff2",descriptors:{unicodeRange:"U+3e83-3f2f,U+27139,U+273da-273db,U+273fe,U+27410,U+27449,U+27614-27615,U+27631,U+27684,U+27693,U+2770e,U+27723,U+27752"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-f56414bf9bced67990def8660e306759.woff2",descriptors:{unicodeRange:"U+3f30-3fdb,U+27985,U+27a84,U+27bb3,U+27bbe,U+27bc7,U+27cb8,U+27da0,U+27e10"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-583d166e56ba0de4b77eabb47ef67839.woff2",descriptors:{unicodeRange:"U+3fdc-408d,U+27fb7,U+27ff9,U+2808a,U+280bb,U+2815d,U+28277,U+28282,U+282e2,U+282f3,U+283cd,U+28408,U+2840c,U+28455,U+28468,U+2856b"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-7f855356ab893b0d2b9c1c83b8116f0e.woff2",descriptors:{unicodeRange:"U+3dd2-3e82,U+26a58,U+26a8c,U+26ab7,U+26aff,U+26b5c,U+26c21,U+26c29,U+26c73,U+26cdd,U+26e40,U+26e65,U+26f94,U+26ff6-26ff8,U+270f4,U+2710d"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-b57aaedfd8ebdf3931f25119dc6a5eb2.woff2",descriptors:{unicodeRange:"U+3d34-3dd1,U+2648d,U+26676,U+2667e,U+266b0,U+2671d,U+2677c,U+267cc,U+268dd,U+268ea,U+26951,U+2696f,U+269dd,U+269fa,U+26a1e"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-b6fd38ca30869792244804b04bc058da.woff2",descriptors:{unicodeRange:"U+3c76-3d33,U+25d0a,U+25da1,U+25e2e,U+25e56,U+25e62,U+25e65,U+25ec2,U+25ed7-25ed8,U+25ee8,U+25f23,U+25f5c,U+25fd4,U+25fe0,U+25ffb,U+2600c,U+26017,U+26060,U+260ed,U+26221,U+26270,U+26286,U+2634c,U+26402"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-452225341522a7942f0f6aab1a5c91a3.woff2",descriptors:{unicodeRange:"U+3bda-3c75,U+25771,U+257a9,U+257b4,U+259c4,U+259d4,U+25ae3-25ae4,U+25af1,U+25bb2,U+25c14,U+25c4b,U+25c64"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-866fa7613df6b3fd272bcfd4530c0bb9.woff2",descriptors:{unicodeRange:"U+3b25-3bd9,U+2504a,U+25055,U+25122,U+2512b,U+251a9,U+251cd,U+251e5,U+2521e,U+2524c,U+2542e,U+2548e,U+254d9,U+2550e,U+25532,U+25562,U+255a7-255a8"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-52a84a22fd1369bffeaf21da2d6158dc.woff2",descriptors:{unicodeRange:"U+3a6b-3b24,U+24896,U+249db,U+24a4d,U+24a7d,U+24ac9,U+24b56,U+24b6f,U+24c16,U+24d14,U+24dea,U+24e0e,U+24e37,U+24e6a,U+24e8b,U+24eaa"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-829615148e6357d826b9242eb7fbbd1e.woff2",descriptors:{unicodeRange:"U+39a9-3a6a,U+24096,U+24103,U+241ac,U+241c6,U+241fe,U+243bc,U+243f8,U+244d3,U+24629,U+246a5,U+247f1"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-c99eda15fc26a2941579560f76c3a5cf.woff2",descriptors:{unicodeRange:"U+38e3-39a8,U+23a98,U+23c7f,U+23c97-23c98,U+23cfe,U+23d00,U+23d0e,U+23d40,U+23dd3,U+23df9-23dfa,U+23e23,U+23f7e"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-395c35dd584b56b0789f58a0559beaf1.woff2",descriptors:{unicodeRange:"U+3760-382a,U+22ab8,U+22b43,U+22b46,U+22b4f-22b50,U+22ba6,U+22bca,U+22c1d,U+22c24,U+22c55,U+22d4c,U+22de1"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-203b0e569e3b14aac86a003dc3fa523e.woff2",descriptors:{unicodeRange:"U+382b-38e2,U+231b6,U+231c3-231c4,U+231f5,U+23350,U+23372,U+233d0,U+233d2-233d3,U+233d5,U+233da,U+233df,U+233e4,U+2344a-2344b,U+23451,U+23465,U+234e4,U+2355a,U+23594,U+235c4,U+235cb,U+23638-2363a,U+23647,U+2370c,U+2371c,U+2373f,U+23763-23764,U+237e7,U+237ff,U+23824,U+2383d"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-51a0e808bbc8361236ac521a119758a3.woff2",descriptors:{unicodeRange:"U+3698-375f,U+22218,U+2231e,U+223ad,U+224dc,U+226f3,U+2285b,U+228ab,U+2298f"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-6e092f71c1e634059ada0e52abadce67.woff2",descriptors:{unicodeRange:"U+35e6-3697,U+21c56,U+21cde,U+21d2d,U+21d45,U+21d62,U+21d78,U+21d92,U+21d9c,U+21da1,U+21db7,U+21de0,U+21e33-21e34,U+21f1e,U+21f76,U+21ffa,U+2217b"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-0f7fb1e0d5015bb1371343153ecf7ce3.woff2",descriptors:{unicodeRange:"U+3444-350e,U+20ad3,U+20b1d,U+20b9f,U+20c41,U+20cbf,U+20cd0,U+20d45,U+20de1,U+20e64,U+20e6d,U+20e95,U+20e9d,U+20ea2,U+20f5f,U+210c1,U+21201,U+2123d,U+21255,U+21274,U+2127b"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-d0cf73942fea1c74edbdf0b3011f4656.woff2",descriptors:{unicodeRange:"U+350f-35e5,U+212d7,U+212e4,U+212fd,U+2131b,U+21336,U+21344,U+2139a,U+213c4,U+21413,U+2146d-2146e,U+215d7,U+21647,U+216b4,U+21706,U+21742,U+218bd,U+219c3"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-968cffdc8ee679da094e77ebf50f58ef.woff2",descriptors:{unicodeRange:"U+336d-3443,U+2032b,U+20371,U+20381,U+203f9,U+2044a,U+20509,U+20547,U+205d6,U+20628,U+20676,U+2074f,U+20779,U+20807,U+2083a,U+20895,U+208b9,U+2097c,U+2099d"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-7a07ddc0f0c0f5f4a9bad6ee3dda66b5.woff2",descriptors:{unicodeRange:"U+328b-336c,U+2000b,U+20089,U+200a2,U+200a4,U+20164,U+201a2,U+20213"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-ec181b795ac1fb5a50d700b6e996d745.woff2",descriptors:{unicodeRange:"U+3192-31ba,U+31c0-31e3,U+31f0-321e,U+3220-328a,U+1f250-1f251"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-cfb211578629b7e8153b37240de6a9d5.woff2",descriptors:{unicodeRange:"U+2f74-2fd5,U+3000,U+3003-3007,U+3012-3013,U+3018-301c,U+3020-3029,U+302f-303f,U+3041-3096,U+3099-30a1"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-59e9ff77b0efaf684bc09274fb6908c9.woff2",descriptors:{unicodeRange:"U+30a2-30ff,U+3105-312f,U+3131-318e,U+3190-3191"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-2adbc89c11e65905393d3dfc468b9d5b.woff2",descriptors:{unicodeRange:"U+4e36,U+4ea0,U+4f74,U+4f91,U+4f94,U+4fc5,U+507e,U+50ed,U+5182,U+51f5,U+525e,U+5282,U+52f9,U+5326,U+537a,U+53a3,U+5423,U+5459,U+54b4,U+54d9,U+55c9,U+57f4,U+580b,U+5902,U+5925,U+5a08,U+5ab5,U+5b84,U+5be4,U+5c22,U+5cb5,U+5cbd,U+5d3e,U+5e31,U+5e5e,U+5e80,U+5ee8,U+5f82,U+5fc9,U+5fed,U+600a,U+605d,U+609b,U+609d,U+60dd,U+6243,U+6322,U+63ce,U+640c,U+643f,U+6445,U+64d7,U+6534,U+6549,U+656b,U+6603,U+674c,U+680a,U+6864,U+69d4,U+6a65,U+6c2a,U+6c46,U+6c5c,U+6d0e,U+6d48,U+6e2b,U+6eb2,U+6eb7,U+6f89,U+706c,U+70b1,U+7113,U+71d4,U+727f,U+72f3,U+7303,U+7321,U+736c,U+736f,U+74a9,U+74de,U+750d,U+7513,U+7592,U+75c4,U+7605,U+760a,U+761b,U+7625,U+762d,U+7643,U+7707,U+7747,U+77b5,U+7839,U+784e,U+78a5,U+7924,U+793b,U+798a,U+7a03,U+7a06,U+7a78,U+7a80,U+7aad,U+7ba8,U+7be5,U+7cc8,U+7ec1,U+7f0b,U+7f0f,U+7f12,U+7f68,U+7f9d,U+8025,U+809c,U+80ad,U+80b7,U+80e8,U+811e,U+8204,U+8223,U+822d,U+823b,U+824b,U+825a,U+827d,U+827f,U+828f,U+82c8,U+8307,U+831b,U+8347,U+837d,U+839b,U+83a9,U+83f9,U+84b9,U+8579,U+864d,U+867f,U+86b0,U+86d1,U+86d8,U+86f2,U+8764,U+8770,U+8788,U+8797,U+87ac-87ad,U+87b5,U+881b,U+8844,U+88bc,U+88fc,U+8930,U+89cf,U+89d6,U+8ba0,U+8bd4,U+8c02,U+8c2b,U+8c85,U+8e23,U+8f81-8f82,U+8fd5,U+90b6,U+90db,U+914e,U+9164,U+91ad,U+943e,U+94b7-94b8,U+94eb,U+950d,U+9514,U+9516,U+9518,U+9529,U+9538,U+953f,U+954e,U+955f,U+95fc,U+9667,U+96b3,U+9792,U+97b2,U+98a1,U+9969,U+9987,U+9998,U+9a80,U+9a92,U+9a96,U+9adf,U+9cb4,U+9cbd,U+9cd0,U+9cd4,U+9e31,U+9e3a,U+9e71,U+9ee5,U+9eea,U+9ef9,U+9fa0"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-70e811fd7994e61f408c923de6ddd078.woff2",descriptors:{unicodeRange:"U+4e0c,U+4e28,U+4e3f,U+4ec2,U+502e,U+50ba,U+5155,U+5181,U+522d,U+5281,U+5290,U+5369,U+53b6,U+54d5,U+54dc,U+54ff,U+552a,U+553c,U+5588,U+55b5,U+5686,U+570a,U+5776,U+5786,U+57a4,U+5820,U+5865,U+58bc,U+5b32,U+5b65,U+5c1c,U+5c66,U+5c6e,U+5c8d,U+5ddb,U+5f2a,U+5f50,U+5f61,U+6067,U+614a,U+615d,U+619d,U+61d4,U+620b,U+6224-6225,U+6343,U+63ad,U+63f2,U+640b,U+6420,U+6434,U+6496,U+64d0,U+6509,U+652e,U+67a8,U+6833,U+6844,U+684a,U+6920,U+6957,U+6971,U+6a8e,U+6a91,U+6aa0,U+6b43,U+6bea,U+6bf5,U+6c15,U+6cd0,U+6ee0,U+6f24,U+6f2d,U+70c0,U+721d,U+728b,U+72c3,U+72e8,U+730a,U+7338-7339,U+734d,U+746d,U+752f,U+754e,U+770d,U+7735,U+778d,U+77a2,U+77e7,U+7857,U+786d,U+78c9,U+78f2,U+791e,U+7953,U+7b58,U+7b9d,U+7bda,U+7cd7,U+7f32-7f33,U+8022,U+8028-8029,U+8035,U+804d,U+8080,U+80c2,U+80e9,U+80ec,U+80f2,U+810e,U+8221,U+8274,U+82b0,U+82e0,U+83b0,U+8487-8488,U+848e,U+84cd,U+84d0,U+8539,U+857a,U+85a8,U+85b7,U+867c,U+871e,U+8723,U+877e,U+878b,U+8793,U+8803,U+88d2,U+8966,U+89cc,U+89eb,U+8b26,U+8c8a,U+8c98,U+8d33,U+8d47,U+8d55,U+8dbc,U+8e40,U+8e94,U+8f77,U+8f79,U+9058,U+91a2,U+91b5,U+928e,U+9494,U+94b6,U+94de,U+94f4,U+94f9,U+950a,U+950e,U+951e,U+952b,U+953c,U+953e,U+9544,U+9561,U+9564,U+9569,U+95f6,U+9603,U+960d,U+963d,U+9674,U+9794,U+97ab,U+98a5,U+9a9f,U+9ab1,U+9ad1,U+9b0f,U+9b2f,U+9c92,U+9c95,U+9cba,U+9cbc,U+9cc6,U+9ccb,U+9cd8,U+9e32,U+9e38,U+9e5b,U+9e7e,U+9eb4,U+9efb-9efc,U+9f3d"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-c4a687ac4f0c2766eefc9f77ed99cddf.woff2",descriptors:{unicodeRange:"U+2e3b,U+2e80-2e99,U+2e9b-2ef3,U+2f00-2f73,U+ffffd"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-51502f1206be09c565f1547c406e9558.woff2",descriptors:{unicodeRange:"U+4e69,U+4f1b,U+4f67,U+4f7e,U+4fdc,U+50e6,U+5196,U+5202,U+5233,U+523f,U+52a2,U+536e,U+5476,U+54ad,U+54cf,U+5537,U+561e,U+56dd,U+56df,U+5709,U+572c,U+57cf,U+57f8,U+580d,U+5881,U+589a,U+5941,U+59b2,U+5c25,U+5d24,U+5d74,U+5e42,U+5e8b,U+5eb3,U+5ed2,U+5fad,U+6003,U+603c,U+6083,U+6100,U+6126,U+6206,U+62ca,U+638e,U+63b4,U+6426,U+646d,U+6535,U+65c4,U+66db,U+6715,U+6769,U+6798,U+67c3,U+6861,U+698d,U+69ca,U+69ed,U+69f2,U+69ff,U+6a18,U+6b39,U+6bb3,U+6c0d,U+6cb2,U+6cd6,U+6cf7,U+6cfa,U+6d33,U+6e16,U+6e53-6e54,U+6ebb,U+6fb6,U+709d,U+72ad,U+72f7,U+72fb,U+7313,U+739f,U+74ba,U+754b,U+755b,U+758b,U+75ac,U+75d6,U+7617,U+7635,U+7640,U+76a4,U+76b2,U+775a,U+77bd,U+781f,U+79b3,U+7b2b,U+7b31,U+7b3e,U+7b6e,U+7b9c,U+7c0b,U+7c9e,U+7cc1,U+7ce8,U+7ea5,U+7f21,U+7f27,U+7f74,U+7fb0,U+8031,U+8071,U+80ea,U+8114,U+8160,U+81a6,U+81c1,U+829f,U+82a4,U+82fb,U+831a,U+8333,U+836c,U+83b6,U+83f8,U+8411,U+841c,U+8489,U+848c,U+85a4,U+8627,U+8629,U+866e,U+86b5,U+872e,U+8731,U+877b,U+877d,U+87ea,U+8813,U+8816,U+8864,U+88ce,U+88e5,U+897b,U+89cb,U+89f3,U+8bfc,U+8c35,U+8d46,U+8d4d,U+8dba,U+8e3a,U+8f75,U+8f7e,U+8fd3,U+9161,U+9179,U+917e,U+91a3,U+94ac,U+94d7,U+94e5,U+952a,U+952c,U+9545,U+9565,U+9568,U+956a,U+961d,U+96e0,U+972a,U+9730,U+989f,U+98e7,U+990d,U+9967,U+9993,U+9aa3,U+9ac0,U+9ae1,U+9aeb,U+9af9,U+9c86,U+9c8b,U+9ca0-9ca1,U+9ca3,U+9ce2,U+9e48,U+9e6a,U+9e87,U+9ee2,U+9ee9,U+9f17,U+9f19,U+9f2c,U+9f80"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-1fdc0c67ed57263a80fd108c1f6ccf24.woff2",descriptors:{unicodeRange:"U+4ef3,U+50d6,U+50ec,U+51ab,U+51b1,U+52d6,U+54a9,U+54da,U+55be,U+55cd,U+564d,U+572f,U+574c,U+576b,U+57d8,U+57fd,U+5844,U+59d2,U+5ae0,U+5b16,U+5b37,U+5b5b,U+5b80,U+5d1e,U+5d6b,U+5efe,U+5f11,U+5f56,U+5f58,U+5f73,U+5f8c,U+5fc4,U+5fe4,U+602b,U+6106,U+610d,U+63de,U+63f8,U+641b,U+64e4,U+6634,U+676a,U+67b5,U+681d,U+6883,U+69b1,U+69e0,U+6b37,U+6b9b,U+6d7c,U+6ed7,U+6f36,U+6f72,U+6f8c,U+7035,U+7039,U+7173,U+7178,U+7228,U+728f,U+72b4,U+72ef,U+72f4,U+7331,U+7481,U+74e0,U+7540,U+75c3,U+75e6,U+763c,U+764d,U+76cd,U+7704,U+7743,U+7780,U+7847,U+786a,U+78b9,U+7962,U+7a02,U+7aac,U+7ab3,U+7b0a,U+7b4c,U+7b7b,U+7bfc,U+7c0f,U+7c16,U+7c40,U+7ca2,U+7cc7,U+7cf8,U+7d77,U+7e3b,U+7ea1,U+7ea9,U+7ef2,U+7f02,U+7f07,U+7f0c,U+7f23,U+7f2f,U+7fbc,U+8016,U+8020,U+812c,U+8136,U+8182,U+822f,U+8233,U+825f,U+8268,U+8284,U+8288,U+8291,U+8308,U+8311,U+835b,U+836d,U+83dd,U+8406,U+840f,U+845c,U+84b4,U+84e3,U+850c,U+855e,U+863c,U+86ba,U+86c4,U+86de,U+86f1,U+873e,U+87bd,U+87db,U+880a,U+883c,U+887f,U+88f0,U+890a,U+892b,U+895e,U+89ef,U+8a48,U+8bdc,U+8c18,U+8c33,U+8c94,U+8db1,U+8dcf,U+8dd6,U+8de3,U+8e6f,U+8e90,U+8f7a,U+8fb6,U+902d,U+90be,U+91af,U+936a,U+948b,U+94d8,U+9513,U+953a,U+956c,U+963c,U+9654,U+966c,U+9688,U+97b4,U+996b,U+9a75,U+9a7a,U+9aba,U+9aed,U+9b08,U+9b43,U+9c8e,U+9c94,U+9c9a,U+9e2b,U+9e36,U+9e4b,U+9e4e,U+9e55,U+9e63,U+9e68-9e69,U+9ebd,U+9ec9,U+9f0d,U+9f37,U+9f51"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-e11567fd2accf9957cd0d3c2be937d87.woff2",descriptors:{unicodeRange:"U+50a7,U+5240,U+5261,U+52ac,U+531a,U+5363,U+5432,U+5452,U+5456,U+5472,U+5478,U+553f,U+5575,U+5581,U+55cc,U+55fe,U+5601,U+572e,U+57d2,U+57ef,U+581e,U+5924,U+5981,U+5997,U+59a3,U+5aaa,U+5ab8,U+5b34,U+5d5d,U+5def,U+5e11,U+5e91,U+5ed1,U+5ef4,U+5f40,U+600d,U+6019,U+601b,U+605a,U+6092,U+60ab,U+6217,U+623d,U+6369,U+65d2,U+6661,U+670a,U+6753,U+67a7,U+6855,U+68f9,U+6939,U+696e,U+6980,U+6a7c,U+6aab,U+6b82,U+6bf3,U+6bf9,U+6c05,U+6c19-6c1a,U+6ca9,U+6cf6,U+6d1a,U+6dab,U+6f74,U+7085,U+7198,U+71b5,U+7256,U+725d,U+727e,U+72fa,U+7322,U+738e,U+73e5,U+750f,U+755a,U+7594,U+75b3,U+760c,U+7615,U+7630,U+763f,U+77ec,U+7817,U+78a1,U+78d9,U+7905,U+7b2a,U+7b2e,U+7b62,U+7b85,U+7bcc,U+7bea,U+7c26,U+7c74,U+7c9c-7c9d,U+7e47,U+7e9b,U+7e9f,U+7ee0,U+7ee8,U+7ef1,U+7f01,U+7f11,U+7f17,U+7f36,U+7f7e,U+7fee,U+802a,U+80cd,U+8112,U+8169,U+8234,U+8279,U+8298,U+82ca,U+82d8,U+82e1,U+83c0,U+83d4,U+83df,U+8401,U+8451,U+845a,U+8476,U+8478,U+84ba,U+84bd,U+84e0,U+851f,U+8548,U+8556,U+8585,U+868d,U+86e9,U+86f4,U+86f8,U+8765,U+8785,U+87ab,U+87ee,U+8832,U+8872,U+88b7,U+88e2-88e3,U+89da,U+8bce,U+8bd3,U+8bd6,U+8bf9,U+8c16,U+8c73,U+8d5c,U+8dde,U+8f6d,U+8f94,U+8fe8,U+9011,U+915e,U+9185,U+918c,U+94ab,U+94d1,U+94f3,U+9515,U+951d,U+9558,U+9567,U+96ce,U+96e9,U+9785,U+9878,U+987c,U+9883,U+98d1,U+9954,U+9963,U+9a93,U+9ac1,U+9acc,U+9b1f,U+9b49,U+9b4d,U+9b51,U+9ca7,U+9cae,U+9cce,U+9cd3,U+9e37,U+9e39,U+9e41,U+9e46,U+9f22,U+9f2f,U+9f39,U+9f85"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-20cc1bbf50e7efb442756cb605672c1f.woff2",descriptors:{unicodeRange:"U+4e5c,U+4edf,U+4f25,U+4f32,U+4f5e,U+4f76,U+4faa,U+4fe6,U+5028,U+5048,U+5250,U+535f,U+538d,U+53c1,U+5412,U+5443,U+54d4,U+54dd,U+5541,U+5550,U+5577,U+55dd,U+55f3,U+560f,U+562c,U+5657-5658,U+5664,U+56af,U+575c,U+577c,U+57b2,U+57da,U+5800,U+5a62,U+5aeb,U+5c3b,U+5ca3,U+5d26,U+5d9d,U+5f01,U+5fb5,U+5fdd,U+5ff8,U+6029,U+6041,U+6079,U+60b1,U+6222,U+629f,U+6332,U+63bc,U+63e0,U+6485,U+65ab,U+65c3,U+65c6,U+668c,U+669d,U+66be,U+67fd,U+6800,U+68fc,U+690b,U+6924,U+6978,U+69a7,U+6a3e,U+6a50,U+6a5b,U+6a97,U+6b24,U+6b8d,U+6baa,U+6c10,U+6c54,U+6ceb,U+6d04,U+6d4d,U+6eb1,U+6ebd,U+7110,U+71b3,U+71f9,U+7230,U+728d,U+7292,U+72b8,U+72d2,U+7360,U+73a2,U+7511,U+75a0,U+75c8,U+779f,U+7826,U+7877,U+7a39,U+7aa8,U+7ae6,U+7b04,U+7b0f,U+7baa,U+7bac,U+7c1f,U+7ccd,U+7ecb,U+7ed4,U+7ed7,U+7efb,U+7f0d,U+7f5f,U+7faf,U+7fd5,U+7fe5,U+8027,U+80bc,U+80dd,U+80fc,U+8132,U+815a,U+8167,U+816d,U+81ca,U+8228,U+82a1,U+82a9,U+82ab,U+82cc,U+8351,U+8368,U+83b8,U+83d8,U+83ea,U+83f0,U+8497,U+84c1,U+858f,U+85ff,U+867b,U+86a8-86a9,U+870a,U+8722,U+876e,U+877c,U+87e5,U+8888,U+88df,U+8919,U+8bcc,U+8bdf,U+8be8,U+8bee,U+8c20,U+8c2f,U+8d36,U+8df8,U+8e05,U+8e2f,U+8f9a,U+9021,U+908b,U+90b4,U+90ba,U+90d0,U+90eb,U+90fe,U+91aa,U+933e,U+9486-9487,U+948d,U+9490,U+94ad,U+94bd,U+94d6,U+94d9,U+9507,U+9546,U+955e,U+956b,U+95e9,U+9604,U+960b,U+9612,U+9615,U+9617,U+96b9,U+989a-989b,U+989e,U+9a78,U+9a7d,U+9aa0,U+9aa2,U+9ac2,U+9b23,U+9b3b,U+9c82,U+9cca,U+9cd9,U+9e28,U+9e5a,U+9e5e,U+9e6c,U+9efe,U+9f0b"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-5d2898fbc097a7e24c6f38d80587621e.woff2",descriptors:{unicodeRange:"U+4e47,U+4e8d,U+4f65,U+4f89,U+50ee,U+520e,U+5416,U+5454,U+54bb,U+54c2,U+54d3,U+54de,U+5591,U+55e5,U+560c,U+566b,U+5769,U+578c,U+5793,U+57e4,U+5889,U+593c,U+59ab,U+5ad4,U+5ad8,U+5af1,U+5b53,U+5ba5,U+5c59,U+5c63,U+5d5b,U+5e0f,U+5e14,U+5edb,U+5fbc,U+6004,U+60ad,U+610e,U+61b7,U+624c,U+634c,U+647a,U+64ba,U+65f0,U+6600,U+66f7,U+67e2,U+67f0,U+680c,U+686b,U+6874,U+691f,U+6989,U+6a17,U+6b81,U+6b84,U+6c06-6c07,U+6c3d,U+6d07,U+6d27,U+6d2b,U+6d91,U+6e6b,U+6e8f,U+6fde,U+70bb,U+723b,U+726e,U+72b0,U+72ce,U+72f2,U+7301,U+731e,U+737e,U+7477,U+748e,U+74ff,U+7633,U+7654,U+771a,U+7726,U+7765,U+7768,U+781c,U+7829,U+78d4,U+7913,U+7957,U+79d5,U+79eb,U+7a70,U+7a86,U+7b25,U+7b38,U+7b47,U+7b72,U+7ba6-7ba7,U+7dae,U+7ee1,U+7efe,U+7f26,U+7f31,U+7f35,U+801c,U+8043,U+809f,U+80ab,U+80d7,U+8118,U+8188,U+81cc,U+823e,U+8244,U+824f,U+82b4,U+82c1,U+82e4,U+82f4,U+8306,U+833a,U+835c,U+839c,U+83b3,U+83bc,U+846d,U+867a,U+868b,U+8734,U+87ca,U+886e,U+887e,U+88a2,U+88c9,U+8921,U+8bb5,U+8bf3,U+8c04,U+8c17,U+8c1d,U+8c25,U+8c36,U+8c55,U+8c78,U+8d3d,U+8d40,U+8d59,U+8d67,U+8d91,U+8dbf,U+8deb-8dec,U+8dfd,U+8e14,U+8e41,U+8f8e,U+900b,U+9044,U+9062,U+90cf,U+9123,U+9146,U+9162,U+9172,U+918d,U+9190,U+92c8,U+93ca,U+948c,U+94aa,U+94b2,U+94c8,U+94ca,U+94d5,U+94df,U+94e9-94ea,U+94f7,U+94fc-94fd,U+951b,U+954f,U+9554,U+9559,U+9566,U+9571-9572,U+95f1,U+9608,U+960f,U+97af,U+988f,U+98d5,U+992e,U+9955,U+9ab0,U+9b32,U+9c90,U+9c9e,U+9ca5,U+9ca9,U+9cad,U+9cb1,U+9cc3,U+9e47,U+9ee7,U+9f87"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-ac9ceb44437becc3e9c4dbfebab7fc2d.woff2",descriptors:{unicodeRange:"U+4e93,U+4ec4,U+4ef5,U+4f27,U+4f7b,U+4fe3,U+5080,U+5121,U+51eb,U+5208,U+52f0,U+53f5,U+5453,U+5466,U+54a6,U+54bf,U+54d0,U+5533,U+5549,U+5556,U+556d,U+558f,U+55f2,U+55f5,U+5627,U+567b,U+56d4,U+571c,U+5739,U+57b4,U+5807,U+58c5,U+59a4,U+59af,U+59d8,U+5a09,U+5a0c,U+5a4a,U+5ad2,U+5b6c,U+5ca2,U+5cac,U+5d03,U+5d6c,U+5db7,U+5ebe,U+5f2d,U+5fea,U+6042,U+6120,U+6175,U+6221,U+623e,U+6339,U+638a,U+643d,U+64b8,U+64e2,U+66e9,U+67b3,U+67c1,U+67d2,U+6832,U+6877,U+68f0,U+6934,U+6966,U+6987,U+6998,U+69c1,U+69ce,U+6a3d,U+6a84,U+6aa9,U+6b87,U+6bd6,U+6c16,U+6c18,U+6cd4,U+6cee,U+6de0,U+6e0c,U+6ecf,U+6f4b,U+70b7,U+7168,U+72d9,U+7352,U+73b3,U+73d0,U+7441,U+74d2,U+75a5,U+75e7-75e8,U+7610,U+7619,U+765e,U+772d,U+7812,U+782c,U+784c,U+7850,U+7856,U+789b,U+78f4,U+7a51,U+7b15,U+7b1e,U+7b24,U+7b5a,U+7bb8,U+7bc1,U+7bd9,U+7ed0,U+7ee6,U+7efa,U+7f1b,U+7f1f,U+7f22,U+7f45,U+7f71,U+7fa7,U+7fbf,U+7ff3,U+8052,U+80b1,U+80db,U+80f4,U+81bb,U+81ec,U+8202,U+8210,U+8249,U+828a,U+828e,U+82e3,U+8315,U+8369,U+8378,U+83a8,U+83aa,U+83b4,U+83e1,U+84fc,U+8538,U+853b,U+859c,U+85ae,U+86b4,U+86c9,U+86cf,U+8725,U+879f,U+87b3,U+887d,U+88fe,U+8a8a,U+8ba7,U+8c07,U+8c14,U+8c30,U+8c47,U+8db5,U+8dd7,U+8e1f,U+8e69,U+8e70,U+8e85,U+8f78,U+8f87,U+8f8b,U+8f8f,U+90c4,U+9143,U+917d,U+948f,U+94cd,U+94d2,U+94ef,U+954a,U+9609-960a,U+96d2,U+9708,U+9765,U+97ea,U+9880,U+98a7,U+996c,U+9980,U+9991,U+9a88,U+9ab6,U+9afb,U+9b47,U+9c87,U+9c9b,U+9cb5,U+9cc7,U+9e2c,U+9e42,U+9e58,U+9ecd,U+9ecf,U+9f8a,U+9f8c"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-c16ed9740b85badf16e86ea782a3062f.woff2",descriptors:{unicodeRange:"U+4ebb,U+4edd,U+4fa9,U+502c,U+50a5,U+51c7,U+51fc,U+523d,U+5241,U+530f,U+5464,U+549d,U+54a3,U+5514,U+5527,U+555c,U+556e,U+5576,U+55b1,U+55b9,U+55eb,U+5624,U+564c,U+5671,U+5685,U+568f,U+56d7,U+56e1,U+57a1,U+57d9,U+5942,U+5a67,U+5c50,U+5c7a,U+5c98,U+5d06,U+5d27,U+5d6f,U+5df3,U+5dfd,U+5e19,U+5ea0,U+5eb9,U+5eea,U+5ffe,U+600f,U+606b,U+6215,U+622c,U+6266,U+62bb,U+62bf,U+6308,U+6387,U+63b8,U+63c4,U+63c6,U+63f6,U+6441,U+6555,U+659b,U+6677,U+66a7,U+6775,U+678b,U+679e,U+6840,U+6849,U+6860,U+68c2,U+6910,U+6a28,U+6a2f,U+6a79,U+6b92-6b93,U+6bc2,U+6bfd,U+6c29,U+6c32,U+6c86,U+6cc5,U+6d0c,U+6d60,U+6da0,U+6ddd,U+6e86,U+6ed3,U+6edf,U+6fb9,U+6fd1,U+6fef,U+7023,U+7080,U+70ca,U+712f,U+7145,U+7284,U+732c,U+73c8,U+73d9,U+740a,U+7457,U+7596,U+759d,U+75a3,U+75d8,U+75e3-75e4,U+75ff,U+7622,U+7688,U+76b4,U+76e5,U+7818,U+7887,U+789a,U+78b2,U+7b08,U+7b33,U+7c2a,U+7ccc,U+7ea8,U+7ec0,U+7fe6,U+8012,U+8084,U+8093,U+80e4,U+80ef,U+8297,U+82a8,U+82be,U+8331,U+8366,U+83c5,U+83fd,U+8473,U+84a1,U+84ca,U+84d1,U+857b,U+85c1,U+85d3,U+8605,U+8662,U+86aa,U+86b1,U+86d4,U+86ed,U+86f3,U+8709,U+8748,U+874c,U+8763,U+89c7,U+89de,U+89e5,U+8a3e,U+8ba6,U+8c00,U+8c21,U+8c49,U+8c7a,U+8d30,U+8df9,U+8e51,U+8e59,U+8f6b,U+8f73,U+8ff3,U+9016,U+9026,U+902f,U+9099,U+909b,U+90c7,U+914a,U+91ae,U+91ba,U+9495,U+94a3,U+94af,U+94ba,U+94bf,U+94cc,U+94e1,U+94f0,U+9531,U+955d,U+95f3,U+9697,U+96bc,U+975b,U+977c,U+98a2,U+998a,U+9994-9995,U+9a9b,U+9ab7,U+9ac5,U+9c91,U+9ccf,U+9cd5,U+9e29,U+9edc,U+9edf,U+9f83,U+9f88-9f89"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-aa0d470430e6391eca720c7cfa44446f.woff2",descriptors:{unicodeRange:"U+4ee8,U+4f22,U+4f43,U+4f57,U+4f5d,U+4f6f,U+4ff8,U+502d,U+507b,U+5345,U+53df,U+53fb,U+544b,U+5482,U+54a7,U+54cc,U+550f,U+5544,U+5555,U+5594,U+55e8,U+55ec,U+55ef,U+564e,U+56f9,U+5704,U+576d,U+5785,U+57ad,U+5914,U+5958,U+599e,U+59aa,U+59be,U+5a06,U+5abe,U+5ae1,U+5b40,U+5bee,U+5cbf,U+5cc4,U+5ccb,U+5d47,U+603f,U+6078,U+607d,U+607f,U+608c,U+609a,U+60fa,U+61ff,U+621b,U+622e,U+626a,U+6371,U+63ae,U+63cd,U+63d6,U+6410,U+6414,U+6421,U+6448,U+64d8,U+6710,U+6748,U+6772,U+680e,U+6954,U+69ab,U+6c68,U+6c8f,U+6ca4,U+6d2e,U+6e4e,U+6e98,U+6fe0,U+7094,U+70e9,U+7116,U+7119,U+723f,U+73c9,U+74e4,U+753e,U+7548,U+75bd,U+75cd,U+7618,U+7634,U+76c5,U+76f1,U+7708,U+7719,U+777e,U+7791,U+77b3,U+7823,U+7827,U+7830,U+7889,U+7893,U+7949,U+795c,U+79e3,U+7a14,U+7a88,U+7a95,U+7aa0,U+7afd,U+7b90,U+7bd1,U+7bfe,U+7da6,U+7ec2,U+7eef,U+7f03-7f04,U+7f08,U+7f58,U+7f61,U+7f9f,U+8174,U+8200,U+828d,U+82c4,U+82d5,U+82dc,U+82f7,U+832d,U+835a,U+840b,U+8438,U+852b,U+869d,U+86ac,U+86d0,U+86f0,U+8782,U+87a8,U+87d1-87d2,U+87e0,U+8839,U+8913,U+891b,U+8934,U+8941,U+89ca,U+89ce,U+8a07,U+8ba3,U+8bc5,U+8bcb,U+8bdb,U+8c11,U+8c15,U+8c29,U+8c32,U+8dc4,U+8dce,U+8ddb,U+8dfa,U+8e09,U+8e1d,U+8e39,U+8e42,U+8e49,U+8e4b,U+8e8f,U+8f71-8f72,U+9004,U+9036,U+9097,U+90dc,U+90e2,U+90e6,U+90ef,U+9104,U+919a,U+91b4,U+938f,U+9497,U+950f,U+9557,U+9562-9563,U+9573,U+9606,U+9649,U+972d,U+973e,U+97a3,U+97eb,U+988c,U+9894,U+98a6,U+9974,U+9977,U+997d,U+9a90,U+9a9d,U+9aef,U+9ca2,U+9ccd,U+9cdf,U+9e20,U+9e4c,U+9e6b,U+9f3e"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-f2b54d4e7be0eaefe1c2c56836fa5368.woff2",descriptors:{unicodeRange:"U+4ede,U+4ee1,U+4eeb,U+4fda,U+4ffe,U+5025,U+506c,U+50f3,U+5106,U+520d,U+525c,U+52ad,U+530d,U+5310,U+539d,U+53a9,U+53fc,U+5421,U+5477,U+54e7,U+551b,U+5530,U+557e,U+5599,U+55c4,U+55d1,U+55d4,U+55df,U+55e4,U+55ea,U+5623,U+562d,U+5654,U+56eb,U+56f5,U+57a7,U+57d5,U+57dd,U+584d,U+5880,U+58ec,U+59dd,U+5a32,U+5a55,U+5a75,U+5b51,U+5b71,U+5b73,U+5cd2,U+5ce4,U+5e5b,U+5e96,U+5fd2,U+607b,U+61d1,U+634b,U+636d,U+63b3,U+63ff,U+64c0,U+661d,U+6657,U+66dc,U+67a5,U+6841,U+6867,U+6901,U+699b,U+6a47,U+6b46,U+6c21,U+6c24,U+6c35,U+6c4a,U+6c94,U+6ca3,U+6d39,U+6d63,U+6d6f,U+6d94,U+705e,U+71e7,U+726f,U+72cd,U+72de,U+72f0,U+7325,U+7350,U+7391,U+741a,U+757f,U+7583,U+75b1,U+75b4,U+75b8,U+75c2,U+75f1,U+766f,U+7699,U+7751,U+789c,U+7a17,U+7be6,U+7cb2,U+7ea3,U+7eb0,U+7ebe,U+7eeb,U+7f25,U+7f2c,U+7fb8,U+8026,U+8037,U+8153,U+8171,U+8191,U+8214,U+821b,U+8222,U+826e,U+82eb,U+830c,U+8314,U+8334,U+83d6,U+8418,U+843c,U+84ff,U+8564,U+8572,U+8616,U+866c,U+8693,U+86a3,U+86a7,U+86af,U+86b6,U+86c6,U+86ca,U+8708,U+870d,U+8759,U+8760,U+87af,U+87c6,U+8869,U+88c6,U+89d0,U+8b07,U+8baa-8bab,U+8bc2,U+8be4,U+8bf0,U+8c2a,U+8c62,U+8c89,U+8d49,U+8d6d,U+8d84,U+8d94,U+8db8,U+8dc6,U+8e2e,U+8e3d,U+8e47,U+8e7f,U+9005,U+9051,U+907d,U+9082,U+9088,U+90b0,U+90d3,U+9150,U+949c,U+94a4,U+94b9,U+94cb,U+94e0,U+9509,U+9512,U+951f,U+9534,U+9552-9553,U+965f,U+96b0,U+9791,U+9889,U+9990,U+9a9c,U+9aa7,U+9c88,U+9cb2-9cb3,U+9cb6-9cb7,U+9cc5,U+9cdc,U+9e22,U+9e2a,U+9e57,U+9e67,U+9e73,U+9e82,U+9eb8,U+9ee0,U+9f9b"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-99a16ef6a64934d5781933dbd9c46b2e.woff2",descriptors:{unicodeRange:"U+4eb5,U+4f09,U+4f5a,U+4f8f,U+4fce,U+4fdf,U+4fea,U+4ff3,U+500c,U+500f,U+504e,U+5088,U+52be,U+5420,U+5457,U+5499,U+549b,U+54c6,U+54d2,U+558b,U+559f,U+55bd,U+55d6,U+565c,U+567c,U+568e,U+5768,U+577b,U+57a9,U+57ed,U+59f9,U+5a11,U+5a40,U+5ae6,U+5b6a,U+5b93,U+5bb8,U+5c15,U+5c99,U+5c9c,U+5cc1,U+5d2e,U+5d4b,U+5d99,U+5e54,U+5e61,U+5fcf-5fd1,U+6002,U+6006,U+6014,U+60af,U+60c6,U+60da,U+60f4,U+621f,U+62c8,U+631b,U+631e,U+63e9,U+64b5,U+655d,U+6619,U+6635,U+6641,U+67ad,U+67b0,U+67b7,U+67e9,U+684e,U+688f,U+695d,U+696b,U+69b7,U+6a58,U+6c26,U+6d35,U+6d43,U+6d9e,U+6dd9,U+6dec,U+6e11,U+6e6e,U+6e9f,U+6ec2,U+6ee2,U+6ef9,U+6f09,U+6f66,U+6f8d,U+6fc2,U+6fc9,U+729f,U+72c8,U+73de,U+7430,U+7566,U+7579,U+75c9,U+75e2,U+75fc,U+762a,U+7638,U+7678,U+76c2,U+76f9,U+778c,U+77cd,U+77dc,U+7800,U+781d,U+782d,U+783b-783c,U+78a3,U+78ec,U+7980,U+7a23,U+7b95,U+7bdd,U+7c0c,U+7c41,U+7c91,U+7cb3,U+7cc5,U+7ecc,U+7f19,U+7fca,U+8006,U+8069,U+807f,U+80bd,U+80ed,U+814b,U+8198,U+82cb,U+82d2,U+834f,U+8360,U+847a,U+84d6,U+84e5,U+8537,U+85d0,U+8671,U+86a4,U+86ce,U+86f9,U+8703,U+8707,U+8737,U+873b,U+8815,U+8936,U+8bc3,U+8bcf,U+8bd2,U+8bd8,U+8be9,U+8c0c,U+8c0f,U+8c4c,U+8d45,U+8d5d,U+8d73,U+8e31,U+8e6d,U+8e76,U+8fe4,U+9041,U+90d7,U+9169,U+92ae,U+94a1,U+94c4,U+94c9,U+94db,U+94e7,U+9503,U+9506,U+9517,U+9528,U+9537,U+9542,U+9549,U+95fe,U+9616,U+961a,U+96c9,U+96f3,U+9701,U+970e,U+9739,U+9753,U+9798,U+98d2-98d3,U+98d9-98da,U+9968,U+996f,U+9984,U+9997,U+9acb,U+9b03,U+9c85,U+9ca8,U+9cab,U+9e49,U+9e51,U+9e66,U+9f10"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-c40533fdf4cc57177b12803598af7e59.woff2",descriptors:{unicodeRange:"U+4e15,U+4e1e,U+4e2b,U+4eb3,U+4ec9,U+4f0e,U+4f64,U+501c,U+50a9,U+510b,U+51a2,U+51bc,U+527d,U+52d0,U+53fd,U+5429,U+542e,U+5486,U+54af,U+5506,U+5511,U+5522,U+552c,U+556c,U+55b3,U+55d2,U+55e6,U+55fd,U+561f,U+5639,U+5659,U+5662,U+5693,U+572a,U+5892,U+598a,U+5992,U+59a9,U+5a20,U+5ae3,U+5b17,U+5b7d,U+5d34,U+5d3d,U+5d4a,U+5d82,U+5e1a-5e1b,U+5ea5,U+5f0b,U+5f77,U+5fd6,U+5fff,U+6026,U+6035,U+6063,U+60b4,U+60bb,U+60ee,U+612b,U+6194,U+61ca,U+61e6,U+61f5,U+620a,U+6248,U+62a1,U+62d7,U+6376,U+637b,U+652b,U+65bc,U+65cc,U+65ce,U+65d6,U+664c,U+665f,U+6666,U+6684,U+66b9,U+6773,U+6777,U+6787,U+67de,U+6845,U+693d,U+6994,U+6a35,U+6d54,U+6d5c,U+6d8e,U+6dd6,U+6eb4,U+6f2a,U+6f78,U+704f,U+70ec,U+7118,U+714a,U+7172,U+71b9,U+724d,U+728a,U+7337,U+733e,U+7396,U+73b7,U+73cf,U+7428,U+742c,U+742e,U+74ee,U+74f4,U+7525,U+753a,U+7572,U+75d4,U+765c,U+768e,U+7762,U+777d,U+77fd,U+7825,U+7837,U+78b4,U+795f,U+79ed,U+7a1e,U+7b06,U+7b20,U+7ba9,U+7bab,U+7c7c,U+7cbd,U+7cdc,U+7ec9,U+7ef6,U+7f30,U+7f42,U+7f44,U+7f54,U+7f94,U+8004,U+800b,U+8019,U+809b,U+80ae,U+80c4,U+80f1,U+8146,U+816e,U+817c,U+81c0,U+81fc,U+81fe,U+822b,U+830f,U+832f,U+8340,U+8365,U+8385,U+8392,U+83a0,U+8424,U+84af,U+869c,U+8713,U+8717-8718,U+87c0,U+87cb,U+87fe,U+8821,U+8902,U+89d1,U+8bb9,U+8c12,U+8d32,U+8d53,U+8df7,U+8e7c,U+8f7c,U+8f95,U+8fab,U+9052,U+905b,U+9095,U+909d,U+90c5,U+911e,U+9122,U+916a,U+919b,U+948e,U+9492,U+949a,U+94b5,U+94bc,U+94c6,U+94f1,U+9502,U+9511,U+9536,U+956f-9570,U+9602,U+9621,U+9631,U+998b,U+99a5,U+9a81,U+9a9e,U+9ebe,U+9f8b"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-91ddb2969bf2d31ba02ad82998d1314c.woff2",descriptors:{unicodeRange:"U+4f2b,U+4f3d,U+4fac,U+5043,U+5055,U+5140,U+5156,U+51cb,U+5243,U+531d,U+536f,U+53a5,U+53ae,U+53f1,U+541d,U+5431,U+547b,U+5492,U+5494,U+54a4,U+54aa,U+54ce,U+54fd,U+5509,U+5520,U+553e,U+557b,U+55c5,U+55e1,U+55f7,U+5608,U+5636,U+563b,U+5773,U+57a0,U+5811,U+587e,U+58d5,U+59e3,U+5a29,U+5a6a,U+5a76,U+5a7a,U+5ac9,U+5b62,U+5b95,U+5c49,U+5c8c,U+5cab,U+5cb7,U+5d02,U+5d58,U+5e44,U+5e7a,U+5eff,U+5f29,U+5f89,U+5f9c,U+5fa8,U+6005,U+6043,U+60b8,U+60d8,U+60ec,U+60f0,U+6115,U+618e,U+630e,U+637a,U+6390,U+63ac,U+63b0,U+64de,U+6525,U+6538,U+65ee-65ef,U+6631,U+6636,U+6654,U+677c,U+67b8,U+67d8,U+683e,U+6886,U+68b5,U+692d,U+6963,U+6979,U+6988,U+6b59,U+6b9a,U+6c69,U+6c74,U+6cae,U+6ce0,U+6cef,U+6d95,U+6dc5,U+6dde,U+6de6,U+6dfc,U+6ea7,U+6f15,U+6f29,U+7096,U+70c3,U+7131,U+715c,U+7166,U+7266,U+7317,U+731d,U+7329,U+73e9,U+7425,U+7455,U+7490,U+74ef,U+7519,U+75b5,U+75b9,U+75de,U+7656,U+7663,U+7691,U+7729,U+77fe,U+783e,U+787c,U+795a,U+7a79,U+7abf,U+7b3a,U+7b4f,U+7b60,U+7b75,U+7b8d,U+7bb4,U+7bd3,U+7be1,U+7cbc,U+7edb,U+7f1c,U+7f8c,U+7fb2,U+7fb9,U+7fce,U+7ff1,U+810d,U+81c6,U+82a5,U+82aa,U+82de,U+8317,U+8343,U+835e,U+8364,U+836a,U+853a,U+8543,U+854a,U+8559,U+8568,U+85b0,U+85b9,U+864f,U+86e4,U+8715,U+8845,U+8884,U+88e8,U+88f1,U+8983,U+8be1,U+8c1f,U+8c27,U+8c5a,U+8c82,U+8d58,U+8dbe,U+8f98,U+9035,U+9074,U+90a1,U+9149,U+9157,U+93d6,U+949d,U+94c2,U+94e3-94e4,U+95eb,U+95f0,U+9611,U+9619,U+9642,U+968d,U+9706,U+970f,U+97ed,U+988a,U+9893,U+98e8,U+9a77,U+9a87,U+9aa1,U+9abc,U+9cdd,U+9e2f,U+9e33,U+9e44,U+9e5c,U+9e9d,U+9edd"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-774d4f764a1299da5d28ec2f2ffe0d69.woff2",descriptors:{unicodeRange:"U+4f58,U+4f6c,U+4f70,U+4fd0,U+5014,U+51bd,U+524c,U+5315,U+5323,U+535e,U+540f,U+542d,U+545b,U+548e,U+549a,U+54ab,U+54fc,U+5567,U+556a,U+5600,U+5618,U+563f,U+5669,U+56f1,U+56ff,U+573b,U+574d,U+579b,U+57b8,U+57c2,U+586c,U+58f9,U+595a,U+598d,U+5993,U+5996,U+59d7,U+5b7a,U+5ba6,U+5c4e,U+5c96,U+5ce5,U+5eb6,U+5f08,U+5f99,U+602f,U+6059,U+606c,U+607a,U+60ed,U+61a9,U+620c,U+6249,U+62a8,U+62c4,U+62ed,U+62fd,U+6342,U+6345,U+6396,U+63a3,U+6402,U+6413,U+642a,U+6487,U+64a9,U+64ac,U+64ae,U+64b7,U+659f,U+65a1,U+667e,U+66f3,U+67e0,U+69db,U+69df,U+6aac,U+6b86,U+6c50,U+6c5e,U+6c76,U+6c85,U+6c8c,U+6cde,U+6d19,U+6d52,U+6da7,U+6db8,U+6e1a,U+6e25,U+6e4d,U+6e5f,U+6ec1,U+6f31,U+6f7a,U+6fa7,U+6fe1,U+701b,U+70ab,U+70f7,U+717d,U+71a8,U+7252,U+72c4,U+72e1,U+7315,U+736d,U+73ae,U+73c0,U+73c2,U+740f,U+75a4,U+7600-7601,U+768b,U+76bf,U+76d4,U+7728,U+772f,U+776c,U+77a0,U+77b0,U+77f8,U+783a,U+78d0,U+78fa,U+7977,U+7a37,U+7a92,U+7afa,U+7b71,U+7b94,U+7cef,U+7f28,U+7fe1,U+808b,U+80e5,U+80eb,U+8110,U+8113,U+812f,U+814c,U+81c3,U+8235,U+82d4,U+8309,U+83c1,U+8431,U+8469,U+84bf,U+84d3,U+84df,U+84e6,U+8511,U+8638,U+86c0,U+86db,U+86fe,U+8757,U+8822,U+8882,U+8885,U+8892,U+88f3,U+892a,U+8ba5,U+8bd9,U+8be0,U+8be7,U+8bfd,U+8c1a,U+8d4a,U+8d4e,U+8d66,U+8dda,U+8e0c,U+8e52,U+8e74,U+8e87,U+8f76,U+8fc2,U+8fe6,U+900d,U+9068,U+90ac,U+90b3,U+90b8,U+90e7,U+9119,U+9131,U+915a,U+916e,U+94b4,U+94d0,U+94e2,U+94ec,U+94ff,U+9522,U+9535,U+9556,U+965b,U+96f9,U+9774,U+9981,U+998d,U+998f,U+9a6e,U+9a7f,U+9a8a,U+9b13,U+9c9f,U+9e3e,U+9e43,U+9e6d,U+9e8b,U+9e92,U+9edb,U+9eef"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-7718fe60986d8b42b1be9c5ace5ccf25.woff2",descriptors:{unicodeRange:"U+4e10,U+4e56,U+4e98,U+4ec3,U+4f3a,U+4f5f,U+4f88,U+4f97,U+4fa5,U+4fe8,U+504c,U+5197,U+52fa,U+5364,U+53e8,U+5406,U+543c,U+545c,U+5471,U+5480,U+5495,U+54b3,U+54df,U+54e6,U+54ee,U+557c,U+5583,U+55dc,U+55e3,U+566c,U+592f,U+5944,U+5983,U+59ca,U+59e5,U+5a13,U+5a7f,U+5b09,U+5bd0,U+5e4c,U+5eb5,U+5f1b,U+5f3c,U+608d,U+60cb,U+61a7,U+61ac,U+61cb,U+6233,U+62a0,U+62e7,U+62ee,U+62f4,U+62f7,U+634e,U+6382,U+63c9,U+63ea,U+6400,U+645e,U+6482,U+6556,U+6593,U+6615,U+664f,U+66e6,U+672d,U+675e,U+67da,U+6805,U+6808,U+6868,U+68a2,U+695e,U+69ad,U+6a80,U+6a90,U+6b83,U+6be1,U+6c30,U+6cad,U+6cb1,U+6cf1,U+6d31,U+6d93,U+6dae,U+6dbf,U+6dc6-6dc7,U+6e0d,U+6e32,U+6e3a,U+6e85,U+6eba,U+6f3e,U+6f5e,U+6f7c,U+6fee,U+71ee,U+722a,U+72b7,U+72e9,U+73ba,U+73d1,U+7409,U+7435-7436,U+7459-745a,U+747e,U+7487,U+74e2,U+7504,U+752c-752d,U+7599,U+759f,U+75a1,U+75ca,U+75f0,U+761f,U+7629,U+777f,U+7785,U+77a5,U+77bf,U+78d5,U+7934,U+7940,U+79a7,U+7b19,U+7c38,U+7c95,U+7cb1,U+7ce0,U+7eca,U+7ef7,U+7f2b,U+7f81,U+7fcc,U+8046,U+8148,U+8165,U+819b,U+81ba,U+828b,U+82ae,U+82b7,U+82d3,U+8301,U+830e,U+831c,U+8338,U+837c,U+8393,U+8398,U+83ba,U+83e0,U+83e9,U+853c,U+8654,U+86df,U+8712,U+873f,U+874e,U+8783,U+8859,U+88a4,U+8925,U+8bb7,U+8bff,U+8c19,U+8c1b,U+8c24,U+8c2c,U+8d61,U+8db4,U+8e6c,U+8f8a,U+8fe5,U+8ff8,U+901e,U+90f4,U+912f,U+9163,U+9170,U+91dc,U+949b,U+94a8,U+94b3,U+94c0,U+94e8,U+9525,U+9530,U+9539,U+954c-954d,U+9550,U+955b,U+962a,U+9685,U+96cc,U+9776,U+988d,U+9975,U+9985,U+9a6f,U+9aa5,U+9ab8,U+9c7f,U+9ca4,U+9cb8,U+9e25,U+9e35,U+9e4a"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-aa5c9ca6cf4fba00433b7aa3fa10671a.woff2",descriptors:{unicodeRange:"U+4ea2,U+4ea5,U+4f36,U+4f84,U+4f8d,U+501a,U+5029,U+516e,U+51a5,U+51c4,U+51f8,U+5201,U+527f,U+5321,U+5352,U+5366,U+53e9,U+54c7,U+5632,U+5676,U+56b7,U+56bc,U+56da,U+56e4,U+5703,U+5729,U+5742,U+57a2-57a3,U+5815,U+58d1,U+5919,U+592d,U+5955,U+5a05,U+5a25,U+5a34,U+5b70,U+5b75,U+5bdd,U+5bf0,U+5c41,U+5c79,U+5c91,U+5c94,U+5ce6,U+5ced,U+5d69,U+5dc5,U+5e16,U+5e27,U+5f27,U+5f95,U+5ffb,U+6020,U+604d,U+6055,U+60e6,U+60eb,U+6123,U+618b,U+61a8,U+620d,U+62c7,U+62ce,U+62d9,U+631f,U+634d,U+6452,U+6479,U+64ce,U+64d2,U+655b,U+660a,U+6726,U+67c4,U+6809,U+6853,U+68e3,U+68f1,U+68fa,U+693f,U+6942,U+6995,U+69a8,U+69b4,U+6a71,U+6b89,U+6bcb,U+6bd3,U+6bd9,U+6c40,U+6cf8,U+6cfe,U+6d85,U+6da3,U+6daa,U+6e0e,U+6e43-6e44,U+6f88,U+7078,U+7099,U+70bd,U+70d9,U+70fd,U+7109,U+7184,U+7239,U+733f,U+73f2,U+748b,U+749c,U+749e,U+759a,U+75d2,U+75eb,U+7620,U+766b,U+7693,U+76cf,U+7738,U+773a,U+776b,U+778e,U+77aa,U+7852,U+78be,U+7948,U+795b,U+7960,U+796f,U+79ba,U+7a20,U+7a96,U+7aa5,U+7b03,U+7b28,U+7b50,U+7b77,U+7bc6,U+7bf1,U+7c27,U+7d0a,U+7ead,U+7ec5,U+7ee2,U+7ef0,U+7efd,U+7f0e,U+7f2e,U+7f79,U+7f9a,U+8098,U+80da,U+80e7,U+80f0,U+80f3,U+80fa,U+818a,U+81e7,U+8237-8238,U+8299,U+82b8,U+82ce,U+837b,U+83bd,U+83cf,U+8426,U+8475,U+85c9,U+85d5,U+85dc,U+85e9,U+871a,U+8747,U+8749,U+888d,U+8910,U+891a,U+8bb4,U+8be3,U+8bec,U+8bf2,U+8c06,U+8c0d,U+8d31,U+8d48,U+8de4,U+8e1e,U+8e4a,U+8e66,U+8f84,U+8f97,U+9083,U+90e1,U+9165,U+91c9,U+94b0,U+94f5,U+9504,U+9532,U+956d,U+95f5,U+95fa,U+9668,U+9698,U+96bd,U+9704,U+9773,U+9890,U+996a,U+997a,U+9a74,U+9a8b,U+9cc4,U+9ccc"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-4f50e5136e136527280bc902c5817561.woff2",descriptors:{unicodeRange:"U+4ea8,U+4f1e,U+4f51,U+4f63,U+4f7c,U+4f83,U+4fa0,U+4fd1,U+4ffa,U+5018,U+5026,U+508d,U+50bb,U+50f5,U+50fb,U+5162,U+5319,U+5320,U+538c,U+5413,U+541f,U+5475,U+54bd,U+54d1,U+5589,U+5598,U+575f,U+57ae,U+57e0,U+5937,U+5974,U+5978,U+59ae,U+5a1f,U+5a49,U+5ab3,U+5b99,U+5b9b,U+5ba0,U+5be1,U+5be5,U+5c09,U+5c27,U+5de2,U+5e9a,U+5f26,U+5f8a,U+5f98,U+6021,U+606d,U+60bc,U+60d5,U+60e7,U+611a,U+614c,U+6254,U+626f,U+6292,U+6296,U+62b9,U+62e2,U+631a,U+631d,U+6320,U+6346,U+63ba,U+6467,U+64bc,U+658b,U+663c,U+6643,U+6652,U+6656,U+6687,U+66d9,U+66dd,U+66f0,U+673d,U+67ab,U+6816-6817,U+68a7,U+68ad,U+68cd,U+68e0,U+6986,U+69fd,U+6b47,U+6bd7,U+6c1f,U+6c2e-6c2f,U+6cbe,U+6de4,U+6e1d,U+6e83,U+6e9c,U+6ed4-6ed5,U+6f4d,U+70f9,U+7130,U+716e,U+718f,U+71ac,U+71e5,U+72fc,U+731c,U+7334,U+73ca,U+7422,U+7426,U+745f,U+7470,U+75af,U+75f4,U+762b,U+763e,U+7696,U+7737,U+7741,U+77a7,U+77bb,U+77ee,U+785d,U+788c,U+78ca,U+7901,U+796d,U+7985,U+79fd,U+7a3c,U+7a57,U+7a74,U+7b5b,U+7caa,U+7cb9,U+7cd5,U+7eac,U+7eb6,U+7ed1,U+7ee5,U+7f20,U+7f2a,U+7f38,U+7f69,U+7fa1,U+8018,U+8038,U+803f,U+804b,U+80a2,U+80be,U+80d6,U+817a,U+81fb,U+820c,U+82ad,U+82af,U+82bd,U+8327,U+8354,U+835f,U+8367,U+836b,U+840c,U+841d,U+8471,U+849c,U+84b2,U+84c9,U+8517,U+851a,U+8549,U+8681,U+8721,U+8776,U+88d9,U+88f9,U+89c5,U+8c1c,U+8c34,U+8d81,U+8d9f,U+8e0a,U+8e72,U+8eb2,U+8fed,U+901b,U+902e,U+906e,U+9091,U+90aa,U+90af,U+915d,U+9171,U+946b,U+9489,U+9499,U+94a5,U+9508,U+9524,U+952d,U+9551,U+9576,U+95f7,U+9600,U+96b6,U+96c0,U+9756,U+97f6,U+98a0,U+98a4,U+997f,U+9a73,U+9a86,U+9ad3,U+9e3d,U+9ed4"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-093b9ef39a46ceae95a1df18a0a3a326.woff2",descriptors:{unicodeRange:"U+4e4d,U+4e5e,U+4ec7,U+4ed5,U+50da,U+50e7,U+515c,U+51a4,U+51ff,U+5203,U+5254,U+5300,U+533e,U+5375,U+53ee,U+5435,U+543b,U+5455,U+548b,U+548f,U+54d7,U+54fa,U+5578,U+5587,U+55a7,U+560e,U+5760,U+576f,U+5777,U+5830,U+58a9,U+5962,U+59e8,U+5a07,U+5a23,U+5a3c,U+5b5a,U+5bb5,U+5bc5,U+5bde,U+5c7f,U+5cb1,U+5ce8,U+5cea,U+5d29,U+5d4c,U+5e18,U+5f57,U+5f5d,U+5f87,U+5ff1,U+6016,U+601c,U+6064,U+6177,U+61d2,U+625b,U+62e3,U+62f1,U+634f,U+63a0,U+6401,U+6405,U+6495,U+64c2,U+6512,U+6577,U+6590,U+65a7,U+65a9,U+65f7,U+6627,U+6655,U+6714,U+6795,U+67d1,U+67ff,U+68b3,U+68d5,U+68d8,U+6930,U+6960,U+6977,U+69bb,U+69d0,U+6a31,U+6b7c,U+6bb4,U+6c22,U+6c72,U+6c79,U+6c7e,U+6c81,U+6c93,U+6ca5,U+6cbc,U+6ce3,U+6cfb,U+6d3c,U+6da9,U+6df3,U+6e2d,U+6eaf,U+6ec7,U+6f13,U+6f33,U+6f62,U+6fa1,U+7011,U+707c,U+708a,U+70c1,U+70d8,U+70eb,U+711a,U+7194,U+7281,U+7316,U+7357,U+7384,U+7405,U+742a,U+745b,U+7574,U+7578,U+75ea,U+7682,U+7792,U+77d7,U+77e9,U+77eb,U+77f6,U+780c,U+78c5,U+7941,U+79e4,U+7a1a,U+7a9c,U+7ad6,U+7b5d,U+7bf7,U+7c07,U+7c3f,U+7c9f,U+7ca5,U+7cdf,U+7e82,U+7eab,U+7ece,U+7eda,U+7f09,U+7f15,U+7f9e,U+7fdf,U+7fe9,U+803b,U+803d,U+80aa,U+80b4,U+813e,U+8155,U+817b,U+819d,U+821c,U+82b9,U+82df,U+82ef,U+8304,U+83b9,U+8446,U+853d,U+85af,U+85fb,U+8650,U+865e,U+86d9,U+86ee,U+8700,U+8862,U+889c,U+88d4,U+88f8,U+895f,U+8a79,U+8bb3,U+8bb6,U+8bc0,U+8beb,U+8bf5,U+8c23,U+8c79,U+8d1e,U+8dcb,U+8e29,U+8e44,U+8e81,U+8eac,U+8eaf,U+8f8d,U+9050,U+90f8,U+914b,U+948a,U+94be,U+94ee,U+950c,U+9540,U+962e,U+9647,U+9661,U+9699,U+96cf,U+9716,U+9761,U+97a0,U+97e7,U+9a7c,U+9a8f,U+9ae6,U+9cd6,U+9e26"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-a0ca5df4258213d7fc9fce80f65ce760.woff2",descriptors:{unicodeRange:"U+4fa3,U+4fae,U+4fd8,U+4fef,U+50a3,U+5189,U+5195,U+51db,U+51f3,U+51f9,U+5220,U+5228,U+5288,U+52ff,U+532e,U+533f,U+5351,U+53db,U+53ed,U+5450,U+5484,U+5490,U+54c9,U+54e9,U+5501,U+5507,U+5543,U+55d3,U+56a3,U+575e,U+589f,U+5984,U+59ec,U+5a04,U+5a36,U+5a77,U+5a9a-5a9b,U+5ab2,U+5ac2,U+5ad6,U+5bc7,U+5c2c,U+5c34,U+5c51,U+5cd9,U+5d0e,U+5deb,U+5e3c,U+5e87,U+5ed3,U+5f13,U+5f64,U+5fe1,U+606a,U+6096,U+60df,U+60f6,U+60f9,U+6151,U+620e,U+6241,U+6252,U+6273,U+627c,U+6289,U+62c2,U+62cc,U+62ef,U+6361,U+6363,U+63b7,U+63e3,U+6518,U+66ae,U+6756,U+6789,U+6813,U+6829,U+6862,U+6866,U+6893,U+6897,U+690e,U+6984,U+69cc,U+6a1f,U+6a44,U+6a59,U+6ba1,U+6c13,U+6c90,U+6ca6,U+6cbd,U+6ccc,U+6cd3,U+6cd7,U+6d4a,U+6d4f,U+6d5a,U+6d9f,U+6da1,U+6dcc,U+6ea5,U+6ee4,U+6ee6,U+6f2f,U+6f8e,U+701a,U+7095,U+709c,U+70af,U+70db,U+70e8,U+714e,U+715e,U+71a0,U+71ce,U+7235,U+7280,U+72d0,U+72f8,U+73ab,U+7410,U+745c,U+7480,U+74a7-74a8,U+74e3,U+75ae,U+75f9,U+76b1,U+76ce,U+7736,U+77e2-77e3,U+781a,U+789f,U+797a,U+79be,U+79c3,U+79c6,U+79f8,U+7a8d,U+7a98,U+7aa6,U+7aff,U+7b1b,U+7cd9,U+7d6e,U+7ede,U+7eee,U+7f00,U+7f24,U+7f2d,U+7fd8,U+800d,U+8116,U+8151,U+81b3,U+8205,U+82c7,U+82db,U+832c,U+8335,U+8339,U+8386,U+846b,U+8587,U+8611,U+8682,U+868a,U+868c,U+8774,U+88d8,U+88f4,U+8912,U+8b6c,U+8bbd,U+8c0e,U+8c41,U+8d26,U+8d3b-8d3c,U+8d50,U+8dea,U+8e35,U+8f99,U+8fe2,U+8fe9,U+9017,U+914c,U+916f,U+9175-9176,U+918b,U+94a0,U+94ae,U+94ce,U+94f2,U+951a,U+952f,U+9541,U+9640,U+9672,U+968b,U+96cd,U+96ef,U+9713,U+97ec,U+9885,U+9992,U+9a6d,U+9a79,U+9a85,U+9cbb,U+9cd7,U+9cde,U+9e93,U+9f9f"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-d2666cbed13462c5dc36fa2f15c202ca.woff2",descriptors:{unicodeRange:"U+4e11,U+4ed7,U+4fcf,U+4fe9,U+4fed,U+50ac,U+50b2,U+5112,U+5180,U+5188,U+51f6,U+522e,U+5265,U+52cb,U+52df,U+5349,U+5367,U+5378,U+537f,U+5395,U+5398,U+53d4,U+543e,U+5440,U+5446,U+54b8,U+5565-5566,U+5580,U+55bb,U+56ca,U+572d,U+573e,U+574e,U+5782-5784,U+58f3,U+5938-5939,U+5948,U+594e,U+5a1c,U+5a74,U+5ae9,U+5b55,U+5b5c,U+5bb0,U+5bd3,U+5bf8,U+5c3f,U+5d14,U+5d2d,U+5df7,U+5dfe,U+5e05-5e06,U+5e1c,U+5e62,U+5e7b,U+5e7d,U+5ed6,U+5f2f,U+5f66,U+5f6c,U+5fa1,U+604b,U+609f,U+60a6,U+60e8,U+6101,U+6124,U+6127,U+6148,U+61be,U+6247,U+62d8,U+62da,U+633d,U+635e,U+6367,U+6380,U+638f,U+63a9,U+63fd,U+641c,U+64e6,U+655e,U+6572,U+6591,U+65a5,U+6691,U+6735,U+67a2-67a3,U+67ef,U+680b,U+6876,U+6905,U+6a0a,U+6a61,U+6b79,U+6bb7,U+6bbf,U+6c41,U+6c55,U+6c83,U+6c9b,U+6ca7,U+6cfc,U+6d46,U+6d51,U+6d74,U+6d9d,U+6daf,U+6dc0,U+6deb,U+6e17,U+6e24,U+6e89,U+6ea2,U+6ef4,U+6f6d,U+707f,U+70b3,U+70e4,U+70ef,U+710a,U+722c,U+725f,U+7261,U+72ee,U+72f1,U+730e,U+732b,U+7433,U+7538,U+75bc,U+7624,U+7709,U+7750,U+7779,U+7802,U+7898,U+78a7,U+78b1,U+78cb,U+78f7,U+7984,U+7a83,U+7aed,U+7b3c,U+7b4b,U+7c92,U+7c98,U+7ca4,U+7eb9,U+7ee3,U+7ef3,U+7ef5,U+7f05,U+7f55,U+7f62,U+7fc1,U+7fd4,U+7fe0,U+8042,U+806a,U+80a0,U+80a4,U+80c3,U+8102,U+8106,U+814a,U+8154,U+8247,U+8258,U+82cd,U+8328,U+832b,U+8389,U+83ca,U+845b,U+846c,U+84b8,U+8574,U+859b,U+8680,U+8695,U+86c7,U+8702,U+886c,U+8896,U+88b1,U+88e4,U+8bc8,U+8c10,U+8c26,U+8c28,U+8c2d,U+8d4c,U+8d63,U+8f67,U+8f74,U+8fc4,U+9006,U+9063,U+90a2,U+90b1,U+90c1,U+9177,U+9189,U+9493,U+949e,U+94fe,U+9610,U+961c,U+96a7,U+96fe,U+978d,U+97f5,U+9888,U+997c,U+9a84,U+9b3c,U+9b44-9b45,U+9b54,U+9e64,U+9f0e,U+9f9a"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-1e6fd68f1f3902ce48ce8c69df385622.woff2",descriptors:{unicodeRange:"U+4e19,U+4e38,U+4e53,U+4e7e,U+4e9f,U+4ec6,U+4f50,U+4fde,U+502a,U+5154,U+517d,U+51d1,U+51f0,U+5239,U+5256,U+52c9,U+52fe,U+5308,U+532a,U+535c,U+5384,U+53a2,U+53a8,U+53c9,U+53e0,U+5496,U+54ac,U+54c0,U+54c4,U+54e8,U+5561,U+5582,U+561b,U+5631,U+566a,U+5764,U+576a,U+5792,U+57ab,U+584c,U+5885,U+58f6,U+59a8,U+5acc,U+5bc2,U+5c38-5c39,U+5c60,U+5c6f,U+5c82,U+5c90,U+5d16,U+5dcd,U+5e37,U+5e90,U+5eb8,U+5f6a,U+5fcc,U+6012,U+6068,U+6073,U+607c,U+6094,U+6109,U+621a,U+626e,U+6284,U+62d0,U+62e6,U+62fe,U+6321,U+6328,U+632b,U+6349,U+6454,U+65ed,U+660f,U+6674,U+66a8,U+6749,U+674f,U+6760,U+67af,U+6850,U+6854,U+6869,U+68a8,U+68d2,U+68f5,U+6912,U+6b49,U+6b6a,U+6bef,U+6c28,U+6c5d,U+6c82,U+6cab,U+6cb8,U+6cc4,U+6cf5,U+6d47,U+6d78,U+6da4,U+6dc4,U+6dcb,U+6df9,U+6e0a,U+6e23,U+6e5b,U+6eb6,U+6f06,U+6f47,U+6f84,U+6f9c,U+6fd2,U+7076,U+70ac,U+7199,U+723d,U+72ac,U+72ed,U+7476,U+7529,U+752b,U+754f,U+7554,U+75d5,U+7626,U+76ef,U+7720,U+7766,U+7784,U+77ac,U+780d,U+7838,U+7845,U+786b,U+78b3,U+7978,U+79b9,U+79c9,U+79e7,U+7a3d,U+7a84,U+7a9f,U+7b0b,U+7b52,U+7c7d,U+7f1a,U+7fc5,U+7ff0,U+804a,U+8086-8087,U+808c,U+809a,U+80ba,U+810a,U+8180,U+818f,U+81c2,U+81ed,U+8231,U+8292,U+829c,U+82a6,U+82d1,U+8346,U+838e,U+839e,U+83c7,U+83f1,U+8403,U+840e,U+8513,U+857e,U+85e4,U+867e,U+871c,U+87ba,U+87f9,U+884d,U+8944,U+8a93,U+8c05,U+8d2c,U+8d2e,U+8d42-8d43,U+8dfb,U+8e22,U+8eba,U+8f69,U+8f9c,U+8fa3,U+8fa8,U+8fb1,U+900a,U+9038,U+903b,U+9042,U+904f,U+90b5,U+90dd,U+9102,U+9187,U+94a7,U+94c5,U+9523,U+95f8,U+95fd,U+960e,U+964b-964c,U+96c1,U+9709,U+971c,U+97ad,U+9882,U+9965,U+9976,U+9988,U+99a8,U+9a82,U+9a9a,U+9b41,U+9c8d,U+9e45,U+9e70,U+9e9f,U+9f3b,U+9f7f"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-87599f94b6cc129d505b375798d0d751.woff2",descriptors:{unicodeRange:"U+4e08,U+4e18,U+4e1b,U+4e22,U+4e27,U+4e32,U+4e52,U+4e73,U+4ead,U+4ed4,U+4ed9,U+4ef0,U+4fa6,U+5076,U+5179,U+51bb,U+51c9,U+51ef,U+51fd,U+524a,U+526a,U+529d,U+52ab,U+5306,U+5339,U+53d9,U+540a,U+5410,U+541e,U+5439,U+54b1,U+54ed,U+5564,U+558a,U+55b7,U+5634,U+574a,U+5751,U+57a6,U+57cb,U+57d4,U+5824,U+582a,U+5835,U+5858,U+5893,U+58e4,U+5951,U+5986,U+59da,U+59fb,U+59ff,U+5a03,U+5a46,U+5ac1,U+5b5d,U+5bfa,U+5c18,U+5c3a,U+5c48,U+5c4f,U+5c61,U+5cb3,U+5d1b,U+5e15,U+5e3d,U+5e99,U+5e9e,U+5eca,U+5f0a,U+5f17-5f18,U+5f25,U+5f7c,U+5fcd,U+6028,U+60a0,U+60ac,U+60d1,U+614e,U+6155,U+6168,U+61c8,U+6208,U+6212,U+6251,U+629a-629b,U+62ab-62ac,U+62fc,U+6323,U+632a,U+63d2,U+643a,U+6491-6492,U+649e,U+64b0,U+64c5,U+659c,U+6614,U+662d,U+6664,U+6670,U+6676,U+6746,U+67cf,U+67d4,U+682a,U+6843,U+6846,U+68da,U+6b3a,U+6b67,U+6c27,U+6c5b,U+6c64,U+6c70,U+6caa,U+6cca,U+6ce1,U+6d12,U+6d45,U+6dd1,U+6dd8,U+6e34,U+6e7f,U+6ee5,U+6f02,U+7092,U+70c2,U+70e6,U+7115,U+7237,U+7272,U+727a,U+72c2,U+739b,U+73b2,U+743c,U+751c,U+758f,U+75b2,U+7686,U+76c6,U+76d2,U+76fc,U+775b,U+77a9,U+7816,U+788e,U+7897,U+78b0,U+79bd,U+7a0d,U+7a91,U+7a9d,U+7ae3,U+7bad,U+7cca,U+7d2b,U+7eb1,U+7f06,U+7f14,U+7f1d,U+7f50,U+7ffc,U+8036,U+80bf,U+80c1,U+80ce,U+80f8,U+8109,U+810f,U+8170,U+8179,U+819c,U+821f,U+8230,U+8236,U+8273,U+829d,U+82f9,U+8305,U+8350,U+83b2,U+83cc,U+8404,U+840d,U+8427,U+8482,U+8679,U+8854,U+886b,U+8bbc,U+8be6,U+8c31,U+8c6b,U+8d4b,U+8dcc,U+8e2a,U+8e48,U+8f90,U+8fb0,U+9022,U+903c,U+903e,U+9065,U+916c,U+917f,U+94a9,U+94c3,U+94dd,U+94ed,U+9510,U+953b,U+96c7,U+970d,U+9738,U+9877,U+987d,U+989c,U+98d8,U+9a70,U+9a91,U+9aa4,U+9b42,U+9b4f,U+9e2d,U+9e3f,U+9e7f,U+9f20"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-06c77b8c66e51ed6c63ccb502dd8b8af.woff2",descriptors:{unicodeRange:"U+4e59,U+4ed3,U+4f0f,U+4f38,U+4f69,U+4fa7,U+4faf,U+4ff1,U+5077,U+5085,U+5144,U+5151,U+51af,U+51b6,U+51cc,U+523a,U+5251,U+5269,U+5272,U+52d8,U+5353,U+5389,U+53f9,U+5401,U+5415,U+541b,U+54f2,U+5524,U+554a,U+559d,U+5609,U+5740,U+575d,U+5806,U+5821,U+586b,U+5915,U+594f,U+5960,U+5999,U+59a5,U+59b9,U+59c6,U+59d1,U+59dc,U+5b5f,U+5b64,U+5b87,U+5bb4,U+5bbf,U+5c16,U+5c1d,U+5c3e,U+5c9a,U+5ca9,U+5cad,U+5cfb,U+5de1,U+5de7,U+5de9,U+5ef7,U+5f04,U+5f70,U+5f79,U+5fc6,U+602a,U+6050,U+6052,U+6070,U+6084,U+60b2,U+60dc,U+60e9,U+6167,U+6170,U+61c2,U+6270,U+6291,U+62b1,U+62bc,U+62dc,U+62df,U+62f3,U+6324,U+633a,U+6377,U+6398,U+63cf,U+640f,U+642c-642d,U+6458,U+6478,U+6500,U+654c,U+6566,U+658c,U+65c1,U+65cb,U+65e8,U+65ec,U+6696-6697,U+6734,U+679a,U+679d,U+67dc,U+67f3-67f4,U+680f,U+683d,U+684c,U+68af,U+699c,U+6bc1,U+6c0f,U+6c1b,U+6c57,U+6c6a,U+6d3d,U+6d6e,U+6d82,U+6db5,U+6dee,U+6e58,U+6eaa,U+6ecb,U+6ede,U+6ee9,U+6f0f,U+6f20,U+6f58,U+704c,U+7070,U+70b8,U+718a,U+7238,U+7262,U+7275,U+72b9,U+72d7,U+72e0,U+741b,U+7434,U+7483,U+74f6-74f7,U+75ab,U+764c,U+7761,U+7855,U+7891,U+78c1,U+79d2,U+7a00,U+7a3b,U+7c97,U+7ea4,U+7eb2,U+7ed2,U+7eea,U+7ef8,U+7f18,U+7fbd,U+8000,U+8010,U+8096,U+809d,U+80a9,U+817f,U+81e3,U+8206,U+8212,U+82ac,U+8302,U+8361,U+8377,U+83f2,U+8461,U+848b,U+84ec,U+8521,U+85aa,U+8870,U+8877,U+8881,U+888b,U+88ad,U+88c2,U+8986,U+8bd1,U+8bf1,U+8d24,U+8d2a,U+8d3e-8d3f,U+8d41,U+8d56,U+8d64,U+8d6b,U+8e0f,U+8f70,U+8f85,U+8f88,U+8fa9,U+9003,U+901d,U+90b9,U+90ce,U+94a6,U+94f8,U+9505,U+95ea,U+95ef,U+95f2,U+95f9,U+9601,U+9605,U+9634,U+966a,U+9677,U+9690,U+9694,U+96d5,U+971e,U+9896-9897,U+9972,U+9a71,U+9a76,U+9a7e,U+9e1f,U+9e23"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-13ae07ed2e272d26d59bc0691cd7117a.woff2",descriptors:{unicodeRange:"U+4e01,U+4e43,U+4ea6,U+4ef2,U+4eff,U+4f26,U+4f2a,U+4f2f,U+4f5b,U+4fa8,U+4fca,U+4fd7,U+5021,U+504f,U+5141,U+51c0,U+51dd,U+51e4,U+51ed,U+5200,U+5237,U+5427,U+5448,U+54a8,U+5706,U+5708,U+5723,U+575b,U+57c3,U+5899,U+58a8,U+58c1,U+5976,U+5988,U+59bb,U+59d0,U+59d3,U+5a18,U+5a31,U+5a92,U+5b54,U+5b85,U+5baa-5bab,U+5bc4,U+5bd2,U+5be8,U+5bff,U+5c65,U+5d07,U+5e1d,U+5e78,U+5e7c,U+5f03,U+5f1f,U+5f39,U+5f6d,U+5f92,U+5faa,U+5fbd,U+5fe7,U+5ffd,U+60a8,U+60ef,U+6108,U+6162,U+622a,U+6234,U+626b,U+626d,U+62c6,U+62d2,U+62d4,U+62d6,U+62e8,U+6316,U+6355,U+63ed,U+6447,U+64a4,U+65f1,U+6606,U+6628,U+664b,U+6668,U+6682,U+66f9,U+66fc,U+66ff,U+6717,U+6740,U+676d,U+67aa,U+67ec,U+67f1,U+6842,U+6851,U+695a,U+6982,U+6a2a,U+6b20,U+6b23,U+6b32,U+6b96,U+6bc5,U+6beb,U+6c60,U+6c9f,U+6cea,U+6cf3,U+6d1e,U+6d53,U+6d66,U+6d69,U+6d8c,U+6d9b,U+6db2,U+6de1,U+6dfb,U+6e14,U+6ed1,U+6eda,U+6ee8,U+6f2b,U+706d,U+7089,U+708e,U+70ad-70ae,U+70e7,U+7126,U+714c,U+71c3,U+71d5,U+7206,U+7259,U+731b,U+73a9,U+73bb,U+74dc,U+7532,U+7545,U+755c,U+75c7,U+7687,U+76d7,U+76f2,U+788d,U+78e8,U+79e6,U+79e9,U+7a3f,U+7a46,U+7a97,U+7af9,U+7bee,U+7c4d,U+7c89,U+7cd6,U+7eb5,U+7ebd,U+7ed8,U+8017,U+8033,U+80c0,U+80de,U+80f6,U+8138,U+817e,U+81a8,U+820d,U+827e,U+82b3,U+82d7,U+83b1,U+84c4,U+84dd,U+8584,U+864e,U+865a,U+866b,U+86cb,U+88d5,U+89e6,U+8bca,U+8bde,U+8bfa,U+8c0a,U+8c37,U+8c46,U+8c6a,U+8c8c,U+8d1d,U+8d29,U+8d4f,U+8d54,U+8d5a,U+8d60,U+8d62,U+8f7f,U+8f96,U+8f9e-8f9f,U+8fc1,U+8fdf,U+8fea,U+8ff7,U+9012,U+906d,U+9075,U+90a6,U+90bb,U+90ca,U+9178,U+9192,U+91ca,U+94bb,U+94dc,U+94fa,U+9501,U+950b,U+9521,U+955c,U+963b,U+9655,U+9675-9676,U+9887,U+9891,U+9971,U+9a97,U+9ece,U+9ed8"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-353f33792a8f60dc69323ddf635a269e.woff2",descriptors:{unicodeRange:"U+4e1d,U+4e39,U+4e4c,U+4e4f,U+4e54,U+4e58,U+4e95,U+4ea1,U+4eab,U+4eae,U+4ec1,U+4f10,U+4f19,U+4f30,U+4f34,U+4fb5,U+503e,U+518c,U+5192,U+51a0,U+51ac,U+51b0,U+51e1,U+5211,U+5242,U+52a3,U+52b2,U+52c3,U+52c7,U+52d2,U+52e4,U+5377,U+539a,U+53a6,U+53e5,U+5417,U+5510,U+552f,U+5531,U+574f-5750,U+5761,U+5851,U+5854,U+58ee,U+593a,U+5949,U+5954,U+5a5a,U+5b8b,U+5bbd,U+5c04,U+5c0a,U+5c4b,U+5ce1,U+5cf0,U+5e10,U+5e8a,U+5e9f,U+5ec9,U+5f31,U+5f84,U+5fd8-5fd9,U+5fe0,U+6015,U+6062,U+6069,U+6076,U+6089,U+60a3,U+60ca,U+620f,U+624e,U+6263,U+6298,U+62a2,U+62bd,U+6311,U+6350,U+6389,U+638c,U+63f4,U+6446,U+644a,U+6469,U+64cd,U+654f,U+6562,U+656c,U+65d7,U+65e6,U+65fa,U+660c,U+6653,U+66b4,U+670b,U+672b,U+676f-6770,U+6881,U+6885,U+68a6,U+68cb,U+68ee,U+6b8a,U+6c88-6c89,U+6cc9,U+6ce5,U+6d01,U+6d17,U+6d1b,U+6d59,U+6d6a,U+6da8,U+6df7,U+6e10,U+6e20-6e21,U+6f5c,U+706f,U+70bc,U+719f,U+7267,U+732a,U+73cd,U+7518,U+756a,U+7586,U+7591,U+75db,U+76c8,U+76d0,U+76d6,U+76d8,U+76df,U+76fe,U+77db,U+7801,U+786c,U+795d,U+7965,U+79cb,U+7a77,U+7a7f,U+7aef,U+7b11,U+7bb1,U+7bc7,U+7ea0,U+7eaf,U+7ed5,U+7edc,U+7f13,U+7f29,U+7f34,U+7f8a,U+7ffb,U+8015,U+8058,U+805a,U+8083,U+80af,U+80c6,U+80cc,U+811a,U+8150,U+82e5,U+8336,U+8352,U+83ab,U+8428,U+8463,U+852c,U+8861,U+89c8,U+8bcd,U+8bd7,U+8bda,U+8be2,U+8bef,U+8bf8,U+8c0b,U+8c13,U+8d34,U+8d3a,U+8d74,U+8d76,U+8da3,U+8dd1,U+8ddd,U+8ddf,U+8df3,U+8f68,U+8f6f,U+8f7d,U+8f91,U+8f9b,U+8fbd,U+8fc8,U+8fd4,U+8feb,U+8ff9,U+900f,U+9057,U+907f-9080,U+90d1,U+90ed,U+91ce,U+9519,U+9526,U+95ed,U+9614,U+9635,U+9644,U+9686,U+96c5,U+96ea,U+9707,U+9732,U+9759,U+978b,U+9876,U+9881,U+9910,U+996e,U+9970,U+9c81,U+9e21,U+9ebb,U+9f84"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-0facdf1ea213ba40261022f5d5ed4493.woff2",descriptors:{unicodeRange:"U+4e3d,U+4e4e,U+4e71,U+4e8f,U+4ed8,U+4eea,U+4f0a,U+4f0d,U+4f11,U+4f1f,U+4f24,U+4f3c,U+4f73,U+4fc4,U+500d,U+5012,U+501f,U+503a,U+505c,U+507f,U+50a8,U+514d,U+5178,U+517c,U+51b2,U+51b7,U+520a,U+5238,U+523b,U+52b1,U+535a,U+5371,U+5385,U+53eb-53ec,U+53f3,U+53f6,U+5409,U+542b,U+542f,U+5434,U+5462,U+5473,U+547c,U+54c8,U+54ea,U+56fa,U+5733,U+5757,U+5766,U+5802,U+585e,U+590f,U+591c,U+591f,U+5947,U+594b,U+5987,U+5a01,U+5b59,U+5b63,U+5b88,U+5b97,U+5b9c,U+5bbe,U+5bfb,U+5c01,U+5c1a,U+5c24,U+5c3c,U+5c97,U+5c9b,U+5cb8,U+5de6,U+5e01,U+5e2e,U+5e45,U+5e55,U+5e84,U+5ef6,U+5f02,U+5f52,U+5f69,U+5f7b,U+5f90,U+5fae,U+6000,U+600e,U+6025,U+60e0,U+6276,U+6297,U+62b5,U+62cd,U+62d3,U+62e5,U+62e9,U+62ff,U+6302,U+632f,U+63e1,U+6444,U+64ad,U+653b,U+6551,U+6563,U+65a4,U+65e7,U+6620,U+667a,U+66f2,U+671d,U+6731,U+6742,U+675f,U+6768,U+677e-677f,U+6790,U+67b6,U+67d3,U+6863,U+68b0,U+68c9,U+690d,U+6b8b,U+6bcd,U+6bd2,U+6bd5,U+6c38,U+6c61,U+6cbf,U+6cdb,U+6cf0,U+6d2a,U+6d89,U+6da6,U+6f6e,U+6fb3,U+7075,U+707e,U+70df,U+7164,U+7236,U+725b,U+7389,U+73e0,U+745e,U+74e6,U+751a,U+7537,U+75be,U+76ae,U+76db,U+793c,U+7956,U+7981,U+79d8,U+79df,U+79fb,U+7adf,U+7ae5,U+7b14,U+7b26,U+7b54,U+7b79,U+7d2f,U+7eb8,U+7eba,U+7ec6,U+7ee9,U+7eff,U+7f5a,U+7f6a,U+7f72,U+8089,U+80a5,U+80e1,U+8111,U+8131,U+821e,U+822c,U+8270,U+8499,U+8651,U+867d,U+8840,U+8857,U+8863,U+88c1,U+89c9,U+89d2,U+8a89,U+8bed,U+8bfe,U+8c01,U+8c22,U+8d21,U+8d25,U+8d2f,U+8d5e,U+8d75,U+8d8b,U+8dc3,U+8de8,U+8df5,U+8f6e,U+8f86,U+8f89,U+8fc5,U+8ff0,U+8ffd,U+9014,U+904d,U+90ae,U+9274,U+949f,U+952e,U+969c,U+96c4,U+96e8,U+96f6-96f7,U+97e9,U+987f,U+996d,U+9a7b,U+9aa8,U+9c7c,U+9c9c,U+9e4f,U+9f13,U+9f50"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-f8ee5d36068a42b51d0e4a1116cfcec1.woff2",descriptors:{unicodeRange:"U+4e13,U+4e16,U+4e1c,U+4e24,U+4e3e,U+4e49,U+4e61,U+4e66,U+4e89,U+4e8c,U+4e94,U+4e9b,U+4ea4,U+4eac,U+4ebf,U+4eca,U+4ef6-4ef7,U+4efb,U+4f18,U+4f20,U+4f46,U+4f7f,U+4fe1,U+503c,U+505a,U+5146,U+5148,U+515a,U+5171,U+5177,U+519b,U+51b3,U+51c6,U+51e0,U+5212,U+521b,U+522b,U+529e,U+52bf,U+534e-534f,U+5355,U+5357,U+5382,U+539f,U+53bb,U+53bf,U+53c2,U+53c8,U+53ca,U+53d6-53d8,U+53e3,U+53ea,U+53f0,U+540d,U+5411,U+56db,U+56de,U+56e0,U+56e2,U+578b,U+57ce,U+57fa,U+589e,U+5904,U+5934,U+5982,U+5b89,U+5b8c,U+5bfc,U+5c06,U+5c11,U+5c40,U+5c71,U+5e38,U+5e72,U+5e76,U+5e7f,U+5e94,U+5e9c,U+5f0f,U+5f15,U+5f20,U+5f3a,U+5f62,U+5f88,U+5fc5,U+5fd7,U+5feb,U+601d,U+6027,U+60c5,U+60f3,U+610f,U+6216,U+6218,U+624b,U+624d,U+6279,U+628a,U+6295,U+6301,U+6307,U+636e,U+63a5,U+63a8,U+652f,U+6536,U+653e,U+6548,U+6559,U+6570,U+65bd,U+65e0,U+6602,U+660e,U+6613,U+66f4,U+6700,U+670d,U+671f,U+672f,U+6743,U+674e,U+6751,U+6761,U+6784,U+6797,U+679c,U+67e5,U+6807,U+6837,U+683c,U+6b21,U+6b63-6b65,U+6bcf,U+6bd4,U+6c42,U+6c5f,U+6ca1,U+6cbb,U+6d3b,U+6d41,U+6d88,U+6df1,U+70b9,U+7136,U+7269,U+7279,U+7531,U+754c,U+767e,U+76ca,U+76f8,U+770b,U+7740,U+7814,U+79ef,U+7a0b,U+7a0e,U+7a76,U+7b80,U+7cbe,U+7cfb,U+7e41,U+7ea7,U+7ec4,U+7ec7,U+7ed3,U+7ed9,U+7edf,U+7f8e,U+8001,U+804c,U+8054,U+80b2,U+81f3,U+8425,U+8868,U+88ab,U+897f,U+89c1-89c2,U+89c4,U+89c6,U+89e3,U+8ba1,U+8ba4,U+8bae,U+8bb0,U+8bba,U+8bc1,U+8c03,U+8d28,U+8d39,U+8def,U+8f66,U+8f6c,U+8fd0-8fd1,U+9020,U+9053,U+90a3,U+90fd,U+91cc,U+9500,U+9547,U+95e8,U+95f4,U+961f,U+9645,U+9662,U+96be,U+96c6,U+9700,U+9769,U+97e6,U+9875,U+9879,U+9886,U+9898,U+98ce,U+9996,U+2b5af,U+2cc56,U+2e9f5,U+30edd-30ede"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-79d494361ae093b69e74ee9dbe65bfd4.woff2",descriptors:{unicodeRange:"U+4e03,U+4e30,U+4e34,U+4e45,U+4e60,U+4e70,U+4e88,U+4e91-4e92,U+4ea9,U+4eb2,U+4ec0,U+4ecb,U+4ecd,U+4ee4,U+4fee,U+5019,U+5047,U+50cf,U+5145,U+516d,U+5170,U+5175,U+5199,U+51cf,U+51fb,U+521a,U+5224,U+5267,U+52aa,U+5347-5348,U+534a,U+5356,U+5361,U+536b,U+5370,U+538b,U+53e4,U+53e6,U+5403,U+5426,U+5428,U+542c,U+5438,U+5668,U+56ed,U+56f4,U+56fe,U+57df,U+592a,U+5957,U+5b69,U+5b81,U+5b8f,U+5b98,U+5b9d,U+5ba1,U+5ba4,U+5bb3,U+5bc6,U+5bdf,U+5c3d,U+5c5e,U+5c81,U+5ddd,U+5de8,U+5dee,U+5e0c,U+5e86,U+5e8f,U+5e93,U+5e95,U+5e97,U+5ea7,U+5ead,U+5eb7,U+5f55,U+5f81,U+5f85,U+5ff5,U+6001,U+613f,U+6258,U+6267,U+6269,U+626c,U+627e,U+62db,U+62ec,U+6325,U+635f,U+6362,U+6388,U+6392,U+63a2,U+63a7,U+63aa,U+641e,U+6545,U+6597,U+65e2,U+65e9,U+661f,U+665a,U+666e-666f,U+66fe,U+6728,U+67d0,U+6811,U+6838,U+6865,U+697c,U+6b22,U+6b27,U+6b4c,U+6b62,U+6b66,U+6b7b,U+6bdb,U+6c47,U+6c49,U+6c7d,U+6c99,U+6cfd,U+6d0b,U+6d25,U+6d32,U+6d3e,U+6d4b,U+6e29,U+6e56,U+6e7e,U+6f14,U+6fc0,U+706b,U+70c8,U+7247,U+72af,U+72b6,U+72ec,U+732e,U+73ed,U+7403,U+7533,U+753b,U+7559,U+7565,U+7597,U+767b,U+773c,U+7763,U+77ed,U+77ff,U+7968,U+798f,U+79bb,U+79c0-79c1,U+7ad9,U+7ae0,U+7b51,U+7b7e,U+7cae,U+7d22,U+7ea2,U+7eb3,U+7eb7,U+7ec3,U+7ec8,U+7ecd,U+7edd,U+7efc,U+7f16,U+7f3a,U+7f51,U+7f57,U+7f6e,U+80dc,U+822a,U+8239,U+826f,U+82cf,U+82e6,U+8349,U+8363,U+83dc,U+8457,U+85cf,U+878d,U+8865,U+8a00,U+8b66,U+8ba2,U+8ba8,U+8bad,U+8bb2,U+8bc9,U+8bd5,U+8bfb,U+8d2b,U+8d35,U+8d37,U+8f7b,U+8f93,U+8fce,U+8fdd,U+9000-9002,U+9010,U+9047,U+9093,U+9152,U+9488,U+94a2,U+9633,U+9636,U+963f,U+9646,U+9648,U+964d,U+9664,U+9669,U+9760,U+97f3,U+987a,U+987e,U+9884,U+98de,U+9986,U+9ed1"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-74e2263a91439c25b91d5132ce9f4d62.woff2",descriptors:{unicodeRange:"U+4e14,U+4e25,U+4e48,U+4e50,U+4e5d,U+4e9a,U+4ec5,U+4efd,U+4f17,U+4f4e-4f4f,U+4f55,U+4f59,U+4f60,U+4f8b,U+4f9b,U+4f9d,U+4fbf,U+4fc3,U+5065,U+513f,U+5149,U+514b,U+516b,U+5174,U+517b,U+518d,U+51b5,U+5207,U+5217-5219,U+521d,U+526f,U+529f,U+52a9,U+52b3,U+5305,U+533b,U+5343,U+5360,U+5373-5374,U+5386,U+53cb-53cd,U+53f2,U+53f7,U+544a,U+5468,U+547d,U+54cd,U+552e,U+5584,U+56f0,U+571f,U+5747,U+575a,U+57f9,U+5883,U+58eb,U+58f0,U+5907,U+590d,U+592e,U+5931,U+5956,U+5965,U+5973,U+5979,U+59cb,U+5b57-5b58,U+5b83,U+5ba2-5ba3,U+5bb9,U+5bcc,U+5c42,U+5c45,U+5c4a,U+5dde,U+5df1,U+5df4,U+5e03,U+5e08,U+5e26,U+5e2d,U+5f71,U+5f80,U+5f8b,U+5fb7,U+606f,U+611f,U+6237,U+623f,U+6253,U+627f,U+6293,U+62a4,U+62c5,U+62c9,U+6309,U+6574,U+6599,U+65ad,U+65af,U+65c5,U+65cf,U+6625,U+663e,U+671b,U+672a,U+6750,U+6781,U+6821,U+6839,U+6848,U+68c0,U+6a21,U+6b3e,U+6bb5,U+6c14,U+6cb3,U+6cb9,U+6ce8,U+6e05,U+6e2f,U+6e38,U+6e90,U+6ee1,U+70ed,U+7167,U+7231,U+7248,U+724c,U+7387,U+738b,U+73af,U+7530,U+75c5,U+767d,U+76d1,U+76f4,U+771f,U+77e5,U+77f3,U+7834,U+7840,U+786e,U+793a,U+795e,U+79f0,U+7a33,U+7a7a,U+7a81,U+7ade,U+7b56,U+7b97,U+7c73,U+7c7b,U+7d20,U+7d27,U+7ea6,U+7eaa,U+7ebf,U+7ee7,U+7eed,U+7ef4,U+7fa4,U+8003,U+80a1,U+81f4,U+8272,U+827a,U+8282,U+82b1,U+82f1,U+8303,U+836f,U+83b7,U+843d,U+88c5,U+8ba9,U+8baf,U+8bb8,U+8bbf,U+8bc4,U+8bc6,U+8bdd,U+8be5,U+8bf7,U+8c08,U+8c61,U+8d1f,U+8d22-8d23,U+8d27,U+8d2d,U+8d38,U+8d5b,U+8d70,U+8d85,U+8d8a,U+8db3,U+8eab,U+8f83,U+8fb9,U+8fdc,U+8fde,U+9009,U+901f,U+914d,U+91c7,U+94b1,U+94c1,U+94f6,U+95fb,U+9632,U+9650,U+968f,U+9752,U+975e,U+987b,U+989d,U+98df,U+9999,U+9a6c,U+9a8c,U+9ec4,U+9feb-9fec"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-ee8bae97908d5147b423f77ad0d3c1bb.woff2",descriptors:{unicodeRange:"U+98fb-990c,U+990e-990f,U+9911-992d,U+992f-9953,U+9956-9962,U+9964,U+9966,U+9973,U+9978-9979,U+997b,U+997e,U+9982-9983,U+9989,U+998c,U+998e,U+999a-99a4,U+99a6-99a7,U+99a9-99c8"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-56467a5c8840c4d23a60b2f935114848.woff2",descriptors:{unicodeRange:"U+8e4c-8e50,U+8e53-8e58,U+8e5a-8e65,U+8e67-8e68,U+8e6a-8e6b,U+8e6e,U+8e71,U+8e73,U+8e75,U+8e77-8e7b,U+8e7d-8e7e,U+8e80,U+8e82-8e84,U+8e86,U+8e88-8e8e,U+8e91-8e93,U+8e95-8e9b,U+8e9d,U+8e9f-8eaa,U+8ead-8eae,U+8eb0-8eb1,U+8eb3-8eb9,U+8ebb-8ecd,U+8ecf-8f02"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-145aa02cdd91946e67dc934e1acffe75.woff2",descriptors:{unicodeRange:"U+2e3a,U+3001-3002,U+3008-3011,U+3014-3017,U+301d-301f,U+4dae,U+4e00,U+4e07,U+4e09-4e0b,U+4e0d-4e0e,U+4e1a,U+4e2a,U+4e2d,U+4e3a-4e3b,U+4e4b,U+4e5f,U+4e86,U+4e8b,U+4e8e,U+4ea7,U+4eba,U+4ece,U+4ed1,U+4ed6,U+4ee3,U+4ee5,U+4eec,U+4f01,U+4f1a,U+4f4d,U+4f53,U+4f5c,U+4fdd,U+5143,U+5165,U+5168,U+516c,U+5173,U+5176,U+5185,U+519c,U+51fa,U+5206,U+5229,U+5230,U+5236,U+524d,U+529b,U+52a0-52a1,U+52a8,U+5316-5317,U+533a,U+5341,U+5362,U+53d1,U+53ef,U+53f8,U+5404,U+5408,U+540c,U+540e,U+5458,U+548c,U+54c1,U+54e5,U+5546,U+559c,U+56fd,U+5728,U+5730,U+573a,U+5916,U+591a,U+5927,U+5929,U+592b,U+597d,U+59d4,U+5b50,U+5b66,U+5b9a,U+5b9e,U+5bb6,U+5bf9,U+5c0f,U+5c14,U+5c31,U+5c55,U+5de5,U+5df2,U+5e02,U+5e73-5e74,U+5ea6,U+5efa,U+5f00,U+5f53,U+5f97,U+5fc3,U+603b,U+6210-6211,U+6240,U+6280,U+62a5,U+63d0,U+6539,U+653f,U+6587,U+65b0,U+65b9,U+65e5,U+65f6,U+662f,U+6708-6709,U+672c,U+673a,U+675c,U+6765,U+6c11,U+6c34,U+6cd5,U+6ce2,U+6d4e,U+6d77,U+73b0,U+7406,U+751f,U+7528,U+7535,U+7684,U+76ee,U+793e,U+79cd,U+79d1,U+7acb,U+7b2c,U+7b49,U+7ba1,U+7ecf,U+8005,U+800c,U+80fd,U+81ea,U+884c,U+8981,U+8bbe,U+8bf4,U+8d44,U+8d77,U+8fbe,U+8fc7,U+8fd8-8fd9,U+8fdb,U+901a,U+90e8,U+91cd,U+91cf,U+91d1,U+9485,U+957f,U+95ee,U+9762,U+9ad8,U+9ea6,U+9f99,U+9fcf,U+9fd4,U+9fed,U+fe10-fe19,U+fe30-fe31,U+fe33-fe44,U+ff01,U+ff0c,U+ff1f,U+2b4e7,U+2b7f7,U+2b7fc,U+2cb2d,U+2cb3b,U+2cb4a,U+2cb5b,U+2cb73"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-54acdfc2166ad7fcbd074f75fd4a56ba.woff2",descriptors:{unicodeRange:"U+6490,U+6493-6494,U+6497-6498,U+649a-649d,U+649f-64a3,U+64a5-64a8,U+64aa-64ab,U+64af,U+64b1-64b4,U+64b6,U+64b9,U+64bb,U+64bd-64bf,U+64c1,U+64c3-64c4,U+64c6-64cc,U+64cf,U+64d1,U+64d3-64d6,U+64d9-64dd,U+64df-64e1,U+64e3,U+64e5,U+64e7-64ff,U+6501-6508,U+650a-6511,U+6513-6517,U+6519-6524,U+6526-652a,U+652c-652d,U+6530-6533,U+6537,U+653a,U+653c-653d,U+6540-6544,U+6546-6547,U+654a-654b,U+654d-654e,U+6550,U+6552-6554,U+6557-6558,U+655a,U+655c,U+655f-6561,U+6564-6565,U+6567-6568"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-29cec36cd205b211da97acabaa62f055.woff2",descriptors:{unicodeRange:"U+9695-9696,U+969a-969b,U+969d-96a6,U+96a8-96af,U+96b1-96b2,U+96b4-96b5,U+96b7-96b8,U+96ba-96bb,U+96bf,U+96c2-96c3,U+96c8,U+96ca-96cb,U+96d0-96d1,U+96d3-96d4,U+96d6-96df,U+96e1-96e7,U+96eb-96ee,U+96f0-96f2,U+96f4-96f5,U+96f8,U+96fa-96fd,U+96ff,U+9702-9703,U+9705,U+970a-970c,U+9710-9712,U+9714-9715,U+9717-971b,U+971d,U+971f-9729,U+972b-972c,U+972e-972f,U+9731,U+9733-9737,U+973a-973d,U+973f-9751,U+9754-9755,U+9757-9758,U+975a,U+975c-975d,U+975f,U+9763-9764,U+9766-9768,U+976a-9770"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-3756e81d3e149cf6099163ee79944fec.woff2",descriptors:{unicodeRange:"U+6af0-6b1f,U+6b25-6b26,U+6b28-6b31,U+6b33-6b36,U+6b38,U+6b3b-6b3d,U+6b3f-6b42,U+6b44-6b45,U+6b48,U+6b4a-6b4b,U+6b4d-6b58,U+6b5a-6b61,U+6b68-6b69,U+6b6b-6b78,U+6b7a,U+6b7d-6b80,U+6b85,U+6b88,U+6b8c,U+6b8e-6b91,U+6b94-6b95,U+6b97-6b99,U+6b9c-6ba0,U+6ba2-6ba9,U+6bab-6bb2,U+6bb6,U+6bb8-6bba"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-8e9f97f01034820170065b2921b4fb5e.woff2",descriptors:{unicodeRange:"U+430e-439a,U+29e8a,U+29ec4,U+29edb,U+29ee9,U+29f7e,U+29f83,U+29f8c,U+29fce,U+2a01a,U+2a02f,U+2a082,U+2a0f9,U+2a190,U+2a38c"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-13d2887ec8ee73c43acdabc52a05af7b.woff2",descriptors:{unicodeRange:"U+92ef-933d,U+933f-9369,U+936b-9388"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-72536a3d71b694a0d53dd90ddceae41e.woff2",descriptors:{unicodeRange:"U+4512-458d,U+2b300,U+2b363,U+2b36f,U+2b372,U+2b37d,U+2b404,U+2b410,U+2b413,U+2b461,U+2b4ef,U+2b4f6,U+2b4f9,U+2b50d-2b50e,U+2b536,U+2b5ae,U+2b5b3,U+2b5e7,U+2b5f4,U+2b61c-2b61d,U+2b626-2b628,U+2b62a,U+2b62c,U+2b695-2b696,U+2b6ad,U+2b6ed"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-603aefd23e350ba7eb124273e3c9bcf1.woff2",descriptors:{unicodeRange:"U+88bd-88c0,U+88c3-88c4,U+88c7-88c8,U+88ca-88cd,U+88cf-88d1,U+88d3,U+88d6-88d7,U+88da-88de,U+88e0-88e1,U+88e6-88e7,U+88e9-88ef,U+88f2,U+88f5-88f7,U+88fa-88fb,U+88fd,U+88ff-8901,U+8903-8909,U+890b-890f,U+8911,U+8914-8918,U+891c-8920,U+8922-8924,U+8926-8929,U+892c-892f,U+8931-8933,U+8935,U+8937-8940,U+8942-8943,U+8945-895d,U+8960-8965,U+8967-897a,U+897c-897e,U+8980,U+8982,U+8984-8985"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-095c169f3314805276f603a362766abd.woff2",descriptors:{unicodeRange:"U+4b0b-4ba0"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-9544732d2e62d1a429674f8ee41b5d3a.woff2",descriptors:{unicodeRange:"U+7179,U+717b-717c,U+717e-7183,U+7185-7189,U+718b-718e,U+7190-7193,U+7195-7197,U+719a-719e,U+71a1-71a7,U+71a9-71ab,U+71ad-71b2,U+71b4,U+71b6-71b8,U+71ba-71c2,U+71c4-71cd,U+71cf-71d3,U+71d6-71df,U+71e1-71e4,U+71e6,U+71e8-71ed,U+71ef-71f8,U+71fa-7205,U+7207-721c,U+721e-7227,U+7229,U+722b,U+722d"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-d3716376641d615e2995605b29bca7b6.woff2",descriptors:{unicodeRange:"U+982e-9874,U+988b,U+988e,U+9892,U+9895,U+9899,U+98a3,U+98a8-98cd,U+98cf-98d0,U+98d4,U+98d6-98d7,U+98db-98dd,U+98e0-98e6,U+98e9-98fa"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-5a1ce3117cfe90c48e8fb4a9a00f694d.woff2",descriptors:{unicodeRange:"U+7c14-7c15,U+7c17-7c1e,U+7c20-7c25,U+7c28-7c29,U+7c2b-7c37,U+7c39-7c3e,U+7c42-7c4c,U+7c4e-7c72,U+7c75-7c7a,U+7c7e-7c88,U+7c8a-7c90,U+7c93-7c94,U+7c96,U+7c99-7c9b,U+7ca0-7ca1,U+7ca3,U+7ca6-7ca9,U+7cab-7cad,U+7caf-7cb0,U+7cb4-7cb8,U+7cba-7cbb,U+7cbf-7cc0,U+7cc2-7cc4,U+7cc6,U+7cc9,U+7ccb,U+7cce-7cd4"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-b7d203b051eff504ff59ddca7576b6a9.woff2",descriptors:{unicodeRange:"U+7d95-7da5,U+7da7-7dad,U+7daf-7e2a"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-4a38cc3e9cf104e69ba246d37f8cf135.woff2",descriptors:{unicodeRange:"U+4a78-4b0a"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-982b630266d87db93d2539affb1275c6.woff2",descriptors:{unicodeRange:"U+9b30-9b31,U+9b33-9b3a,U+9b3d-9b40,U+9b46,U+9b4a-9b4c,U+9b4e,U+9b50,U+9b52-9b53,U+9b55-9bcf"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-9592bfc861f07bcb8d75c196b370e548.woff2",descriptors:{unicodeRange:"U+6a4b-6a4f,U+6a51-6a57,U+6a5a,U+6a5c-6a60,U+6a62-6a64,U+6a66-6a70,U+6a72-6a78,U+6a7a-6a7b,U+6a7d-6a7f,U+6a81-6a83,U+6a85-6a8d,U+6a8f,U+6a92-6a96,U+6a98-6a9f,U+6aa1-6aa8,U+6aaa,U+6aad-6aef"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-a7accba310e821da5505f71c03b76bdb.woff2",descriptors:{unicodeRange:"U+99c9-9a53"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-dac48066b5883d8b4551fc584f0c2a3e.woff2",descriptors:{unicodeRange:"U+8550-8555,U+8557-8558,U+855a-855d,U+855f-8563,U+8565-8567,U+8569-8571,U+8573,U+8575-8578,U+857c-857d,U+857f-8583,U+8586,U+8588-858e,U+8590-859a,U+859d-85a3,U+85a5-85a7,U+85a9,U+85ab-85ad,U+85b1-85b6,U+85b8,U+85ba-85c0,U+85c2-85c8,U+85ca-85ce,U+85d1-85d2,U+85d4,U+85d6-85db,U+85dd-85e3,U+85e5-85e8,U+85ea-85fa,U+85fc-85fe,U+8600-8603"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-a1f916d6039285c4ffb900cd654e418f.woff2",descriptors:{unicodeRange:"U+6fb2,U+6fb4-6fb5,U+6fb7-6fb8,U+6fba-6fbf,U+6fc1,U+6fc3-6fc8,U+6fca-6fd0,U+6fd3-6fdd,U+6fdf,U+6fe2-6fed,U+6ff0-7010,U+7012-7019,U+701c-7022,U+7024-7034,U+7036-7038,U+703a-704b,U+704d-704e,U+7050-7053"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-95bfd249da4902577b4b7d76ebdd0b44.woff2",descriptors:{unicodeRange:"U+4ba1-4c2c"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-93fc8f28a33234bcadf1527cafabd502.woff2",descriptors:{unicodeRange:"U+9a54-9a6b,U+9a72,U+9a83,U+9a89,U+9a8d-9a8e,U+9a94-9a95,U+9a99,U+9aa6,U+9aa9-9aaf,U+9ab2-9ab5,U+9ab9,U+9abb,U+9abd-9abf,U+9ac3-9ac4,U+9ac6-9aca,U+9acd-9ad0,U+9ad2,U+9ad4-9ad7,U+9ad9-9ade,U+9ae0,U+9ae2-9ae5,U+9ae7-9aea,U+9aec,U+9aee,U+9af0-9af8,U+9afa,U+9afc-9b02,U+9b04-9b07,U+9b09-9b0e,U+9b10-9b12,U+9b14-9b1e,U+9b20-9b22,U+9b24-9b2e"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-903bb6865f3452e2fda42e3a25547bc5.woff2",descriptors:{unicodeRange:"U+9d1a-9da1"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-4aca6a43e59aceee2166b0c7e4e85ef1.woff2",descriptors:{unicodeRange:"U+9e13-9e1e,U+9e24,U+9e27,U+9e2e,U+9e30,U+9e34,U+9e3b-9e3c,U+9e40,U+9e4d,U+9e50,U+9e52-9e54,U+9e56,U+9e59,U+9e5d,U+9e5f-9e62,U+9e65,U+9e6e-9e6f,U+9e72,U+9e74-9e7d,U+9e80-9e81,U+9e83-9e86,U+9e89-9e8a,U+9e8c-9e91,U+9e94-9e9c,U+9e9e,U+9ea0-9ea5,U+9ea7-9eb3,U+9eb5-9eb7,U+9eb9-9eba,U+9ebc,U+9ebf-9ec3,U+9ec5-9ec8,U+9eca-9ecc,U+9ed0,U+9ed2-9ed3,U+9ed5-9ed7,U+9ed9-9eda,U+9ede,U+9ee1,U+9ee3-9ee4,U+9ee6,U+9ee8,U+9eeb-9eee,U+9ef0-9ef8"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-24476a126f129212beb33f66853ea151.woff2",descriptors:{unicodeRange:"U+8b1c-8b25,U+8b27-8b65,U+8b67-8b6b,U+8b6d-8b9f,U+8bac,U+8bb1,U+8bbb,U+8bc7,U+8bd0"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-1b611157cd46bb184d4fa4dae2d6a2b8.woff2",descriptors:{unicodeRange:"U+4cad-4d2f"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-56a32a7689abd0326e57c10c6c069bb4.woff2",descriptors:{unicodeRange:"U+9c4b-9c7b,U+9c7d-9c7e,U+9c80,U+9c83-9c84,U+9c89-9c8a,U+9c8c,U+9c8f,U+9c93,U+9c96-9c99,U+9c9d,U+9caa,U+9cac,U+9caf,U+9cb9,U+9cbe-9cc2,U+9cc8-9cc9,U+9cd1-9cd2,U+9cda-9cdb,U+9ce0-9ce1,U+9ce3-9d19"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-3cc70dbb64df5b21f1326cc24dee2195.woff2",descriptors:{unicodeRange:"U+9389-938e,U+9390-93c9,U+93cb-93d5,U+93d7-9410"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-f6032fc06eb20480f096199713f70885.woff2",descriptors:{unicodeRange:"U+20a0-20b5,U+20b9-20ba,U+20bc-20bd,U+4e2c,U+5107,U+5216,U+5293,U+54f3,U+5523,U+5819,U+5adc,U+5c88,U+5e3b,U+5fee,U+62f6,U+63be,U+6484,U+6499,U+67d9,U+67dd,U+6d5e,U+6f46,U+717a,U+71e0,U+72c1,U+73e7,U+75b0,U+7603,U+7722,U+7809,U+7811,U+7946,U+7967,U+799a,U+7b45,U+7ba2,U+8014,U+80d9,U+8159,U+817d,U+81a3,U+81aa,U+8201,U+833c,U+836e,U+83e5,U+8459,U+84f0,U+8729,U+8753,U+87d3,U+89dc,U+8bf6,U+8c2e,U+8e2c,U+8e9c,U+8e9e,U+8ece,U+8fee,U+9139,U+914f,U+9174,U+9191,U+960c,U+9622,U+9a98,U+9b48,U+9ca6,U+9cb0,U+9da2-9e12,U+9e88,U+9f44,U+9f86"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-e2ead7ea7da0437f085f42ffc05f8d13.woff2",descriptors:{unicodeRange:"U+9bd0-9c4a"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-97f7f48ce90c9429bf32ae51469db74d.woff2",descriptors:{unicodeRange:"U+4c2d-4cac"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-24a21c1e4449222e8d1898d69ff3a404.woff2",descriptors:{unicodeRange:"U+4d30-4dab"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-726303e0774b4e678bff8c2deb6ca603.woff2",descriptors:{unicodeRange:"U+9411-943d,U+943f-946a,U+946c-9484"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-5a7fac4b8b23a6e4e5ba0c9bf1756c91.woff2",descriptors:{unicodeRange:"U+9efa,U+9efd,U+9eff-9f0a,U+9f0c,U+9f0f,U+9f11-9f12,U+9f14-9f16,U+9f18,U+9f1a-9f1f,U+9f21,U+9f23-9f2b,U+9f2d-9f2e,U+9f30-9f36,U+9f38,U+9f3a,U+9f3c,U+9f3f-9f43,U+9f45-9f4f,U+9f52-9f7e,U+9f81-9f82,U+9f8d-9f94"}},{uri:"./fonts/Xiaolai/Xiaolai-Regular-2b7441d46298788ac94e610ffcc709b6.woff2",descriptors:{unicodeRange:"U+7e2b-7e3a,U+7e3c-7e40,U+7e42-7e46,U+7e48-7e81,U+7e83-7e9a,U+7e9c-7e9e,U+7eae,U+7eb4,U+7ebb-7ebc,U+7ed6,U+7ee4,U+7eec,U+7ef9,U+7f0a,U+7f10,U+7f1e,U+7f37,U+7f39,U+7f3b"}}],ZH=class e{constructor(t){XM(this,"scene"),XM(this,"getSceneFamilies",()=>e.getUniqueFamilies(this.scene.getNonDeletedElements())),XM(this,"onLoaded",t=>{let n=!0;for(let s of t){let t=`${s.family}-${s.style}-${s.weight}-${s.unicodeRange}`;e.loadedFontsCache.has(t)||(e.loadedFontsCache.add(t),n=!1)}if(n)return;let r=!1,i=this.scene.getNonDeletedElementsMap();for(let e of this.scene.getNonDeletedElements())if(mO(e)){r=!0,UF.delete(e),ZO.clearCache(gL(e));let t=uG(e,i);t&&UF.delete(t)}r&&this.scene.triggerUpdate()}),XM(this,"loadSceneFonts",async()=>{let t=this.getSceneFamilies(),n=e.getCharsPerFamily(this.scene.getNonDeletedElements());return e.loadFontFaces(t,n)}),this.scene=t}static get registered(){return e._registered?e._initialized||(e._registered=new Map([...e.init().entries(),...e._registered.entries()])):e._registered=e.init(),e._registered}get registered(){return e.registered}static async generateFontFaceDeclarations(t){let n=e.getUniqueFamilies(t),r=e.getCharsPerFamily(t),i=n.find(e=>QA(e).includes(GA));if(i){let t=e.getCharacters(r,i);if((e=>(eO||(eO=lF.class(...Object.values(rF))),eO.test(e)))(t)){r[ZA[GA]]=new Set(t),n.unshift(ZA[GA])}}let s=e.fontFacesStylesGenerator(n,r),a=await new oO(s,3).all();return Array.from(new Set(a))}static async loadFontFaces(t,n){for(let{fontFaces:i,metadata:s}of e.registered.values())if(!s.local)for(let{fontFace:e}of i)window.document.fonts.has(e)||window.document.fonts.add(e);let r=e.fontFacesLoader(t,n);return(await new oO(r,10).all()).flat().filter(Boolean)}static*fontFacesLoader(t,n){for(let[r,i]of t.entries()){let t=gL({fontFamily:i,fontSize:16}),s=e.getCharacters(n,i);window.document.fonts.check(t,s)||(yield sO(async()=>{try{let e=await window.document.fonts.load(t,s);return[r,e]}catch(e){}}))}}static*fontFacesStylesGenerator(t,n){for(let[r,i]of t.entries()){let{fontFaces:t,metadata:s}=e.registered.get(i)??{};if(Array.isArray(t)&&!s?.local)for(let[a,o]of t.entries())yield sO(async()=>{try{let t=e.getCharacters(n,i),s=await o.toCSS(t);return s?[1e4*r+a,s]:void 0}catch(t){}})}}static register(e,t,...n){let r=qA[e]??ZA[e];return this.registered.get(r)||this.registered.set(r,{metadata:t,fontFaces:n.map(({uri:t,descriptors:n})=>new FH(e,t,n))}),this.registered}static init(){let t={registered:new Map},n=(n,...r)=>{let i=mH[qA[n]??ZA[n]]??mH[qA.Excalifont];e.register.call(t,n,i,...r)};return n("Cascadia",...zH),n("Comic Shanns",...BH),n("Excalifont",...$H),n("Helvetica",...WH),n("Liberation Sans",...XH),n("Lilita One",...VH),n("Nunito",...GH),n("Virgil",...YH),n(GA,...qH),n(YA,...HH),e._initialized=!0,t.registered}static getUniqueFamilies(e){return Array.from(e.reduce((e,t)=>(mO(t)&&e.add(t.fontFamily),e),new Set))}static getCharsPerFamily(e){let t={};for(let n of e)if(mO(n))for(let e of n.originalText)t[n.fontFamily]||(t[n.fontFamily]=new Set),t[n.fontFamily].add(e);return t}static getCharacters(e,t){return e[t]?Array.from(e[t]).join(""):""}static getAllFamilies(){return Array.from(e.registered.keys())}};XM(ZH,"loadedFontsCache",new Set),XM(ZH,"_registered"),XM(ZH,"_initialized",!1),XM(ZH,"loadElementsFonts",async e=>{let t=ZH.getUniqueFamilies(e),n=ZH.getCharsPerFamily(e);return ZH.loadFontFaces(t,n)});var KH=ZH,QH=(e,t,n)=>{let{unitsPerEm:r,ascender:i,descender:s}=KH.registered.get(e)?.metadata.metrics||mH[qA.Virgil].metrics,a=t/r;return a*i+(n-a*i+a*s)/2},JH=e=>{let{lineHeight:t}=KH.registered.get(e)?.metadata.metrics||mH[qA.Excalifont].metrics;return t},e$=e=>{let t,{angle:n,width:r,height:i,x:s,y:a}=e,o=s+r/2,l=a+i/2,c=PD(o,l);return t="diamond"===e.type?nL(OD(PD(o,a),c,n),OD(PD(s+r,l),c,n),OD(PD(o,a+i),c,n),OD(PD(s,l),c,n)):nL(OD(PD(s,a),c,n),OD(PD(s+r,a),c,n),OD(PD(s+r,a+i),c,n),OD(PD(s,a+i),c,n)),{type:"polygon",data:t}},t$=e=>{if(!e)return[];for(let t of e.sets)if("path"===t.type)return t.ops;return e.sets[0].ops},n$=(e,t,n=!1)=>{let r=(e=>{let t=e[0],n=[];for(let r=1;r<e.length;r++){let i=e[r];n.push(VD(t,i)),t=i}return n})(e.points.map(n=>(n=>OD(ND(ID(CD(n),kD(e.x,e.y))),t,e.angle))(n)));return n?{type:"polygon",data:rL(r.flat())}:{type:"polyline",data:r}},r$=(e,t,n=PD(0,0),r,i)=>{let s=e=>OD(PD(e[0]+n[0],e[1]+n[1]),i,r);if(null===e.roundness)return{type:"polygon",data:rL(e.points.map(e=>s(e)))};let a=t$(t),o=[],l=!1;for(let c of a)"move"===c.op?(l=!l,l&&o.push(PD(c.data[0],c.data[1]))):"bcurveTo"===c.op?l&&(o.push(PD(c.data[0],c.data[1])),o.push(PD(c.data[2],c.data[3])),o.push(PD(c.data[4],c.data[5]))):"lineTo"===c.op&&l&&o.push(PD(c.data[0],c.data[1]));return{type:"polygon",data:rL(function(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let s=0;s<i;s++)XP(e,3*s,t,r);return VP(r,0,r.length,n)}(o,10,5).map(e=>s(e)))}},i$=(e,t,n=1e-4)=>((e,t)=>{let{angle:n,halfWidth:r,halfHeight:i,center:s}=t,a=r,o=i,l=ID(CD(e),TD(CD(s),-1)),[c,d]=OD(ND(l),PD(0,0),-n),u=Math.abs(c),h=Math.abs(d),p=.707,f=.707;for(let b=0;b<3;b++){let e=(a*a-o*o)*p**3/a,t=(o*o-a*a)*f**3/o,n=a*p-e,r=o*f-t,i=u-e,s=h-t,l=Math.hypot(r,n),c=Math.hypot(s,i);p=Math.min(1,Math.max(0,(i*l/c+e)/a)),f=Math.min(1,Math.max(0,(s*l/c+t)/o));let d=Math.hypot(f,p);p/=d,f/=d}let[m,g]=[a*p*Math.sign(c),o*f*Math.sign(d)];return BD(PD(c,d),PD(m,g))})(e,t)<=n,s$=(e,t,n=0)=>{switch(t.type){case"polygon":return((e,t,n=1e-4)=>{let r=!1;for(let i=0,s=t.length-1;i<s;i++)if(GD(e,VD(t[i],t[i+1]),n)){r=!0;break}return r})(e,t.data,n);case"ellipse":return i$(e,t.data,n);case"line":return GD(e,t.data,n);case"polyline":return d$(e,t.data,n);case"curve":return c$(e,t.data,n);case"polycurve":return o$(e,t.data,n);default:throw Error(`shape ${t} is not implemented`)}},a$=(e,t)=>{switch(t.type){case"polygon":return iL(e,t.data);case"line":case"curve":case"polycurve":return!1;case"ellipse":return((e,t)=>{let{center:n,angle:r,halfWidth:i,halfHeight:s}=t,a=ID(CD(e),TD(CD(n),-1)),[o,l]=OD(ND(a),PD(0,0),-r);return o/i*(o/i)+l/s*(l/s)<=1})(e,t.data);case"polyline":{let n=rL(t.data.flat());return iL(e,n)}default:throw Error(`shape ${t} is not implemented`)}},o$=(e,t,n)=>t.some(t=>c$(e,t,n)),l$=(e,t=10)=>{let n=(e=>{let[t,n,r,i]=e;return(e,s)=>Math.pow(1-e,3)*i[s]+3*e*Math.pow(1-e,2)*r[s]+3*Math.pow(e,2)*(1-e)*n[s]+t[s]*Math.pow(e,3)})(e),r=[n(0,0),n(0,1)],i=[],s=0,a=1/t;for(let o=0;o<t;o++)if(s+=a,s<=1){let e=PD(n(s,0),n(s,1));i.push(VD(r,e)),r=e}return i},c$=(e,t,n)=>d$(e,l$(t),n),d$=(e,t,n=1e-4)=>t.some(t=>GD(e,t,n));function u$(e,t,n){return{center:e,halfWidth:t,halfHeight:n}}function h$(e,t=0){let n=iW(Math.min(e.width,e.height),e);if(n<=0){let r=ZD(PD(e.x-t,e.y-t),PD(e.x+e.width+t,e.y+e.height+t));return[[VD(PD(r[0][0]+n,r[0][1]),PD(r[1][0]-n,r[0][1])),VD(PD(r[1][0],r[0][1]+n),PD(r[1][0],r[1][1]-n)),VD(PD(r[0][0]+n,r[1][1]),PD(r[1][0]-n,r[1][1])),VD(PD(r[0][0],r[1][1]-n),PD(r[0][0],r[0][1]+n))],[]]}let r=PD(e.x+e.width/2,e.y+e.height/2),i=ZD(PD(e.x,e.y),PD(e.x+e.width,e.y+e.height)),s=VD(PD(i[0][0]+n,i[0][1]),PD(i[1][0]-n,i[0][1])),a=VD(PD(i[1][0],i[0][1]+n),PD(i[1][0],i[1][1]-n)),o=VD(PD(i[0][0]+n,i[1][1]),PD(i[1][0]-n,i[1][1])),l=VD(PD(i[0][0],i[1][1]-n),PD(i[0][0],i[0][1]+n)),c=[TD(RD(CD(PD(i[0][0]-t,i[0][1]-t),r)),t),TD(RD(CD(PD(i[1][0]+t,i[0][1]-t),r)),t),TD(RD(CD(PD(i[1][0]+t,i[1][1]+t),r)),t),TD(RD(CD(PD(i[0][0]-t,i[1][1]+t),r)),t)],d=[KD(ND(c[0],l[1]),ND(c[0],PD(l[1][0]+2/3*(i[0][0]-l[1][0]),l[1][1]+2/3*(i[0][1]-l[1][1]))),ND(c[0],PD(s[0][0]+2/3*(i[0][0]-s[0][0]),s[0][1]+2/3*(i[0][1]-s[0][1]))),ND(c[0],s[0])),KD(ND(c[1],s[1]),ND(c[1],PD(s[1][0]+2/3*(i[1][0]-s[1][0]),s[1][1]+2/3*(i[0][1]-s[1][1]))),ND(c[1],PD(a[0][0]+2/3*(i[1][0]-a[0][0]),a[0][1]+2/3*(i[0][1]-a[0][1]))),ND(c[1],a[0])),KD(ND(c[2],a[1]),ND(c[2],PD(a[1][0]+2/3*(i[1][0]-a[1][0]),a[1][1]+2/3*(i[1][1]-a[1][1]))),ND(c[2],PD(o[1][0]+2/3*(i[1][0]-o[1][0]),o[1][1]+2/3*(i[1][1]-o[1][1]))),ND(c[2],o[1])),KD(ND(c[3],o[0]),ND(c[3],PD(o[0][0]+2/3*(i[0][0]-o[0][0]),o[0][1]+2/3*(i[1][1]-o[0][1]))),ND(c[3],PD(l[0][0]+2/3*(i[0][0]-l[0][0]),l[0][1]+2/3*(i[1][1]-l[0][1]))),ND(c[3],l[0]))];return[[VD(d[0][3],d[1][0]),VD(d[1][3],d[2][0]),VD(d[2][3],d[3][0]),VD(d[3][3],d[0][0])],d]}function p$(e,t=0){let[n,r,i,s,a,o,l,c]=oX(e),d=iW(Math.abs(n-l),e),u=iW(Math.abs(s-r),e);if(null==e.roundness?.type){let[h,p,f,m]=[PD(e.x+n,e.y+r-t),PD(e.x+i+t,e.y+s),PD(e.x+a,e.y+o+t),PD(e.x+l-t,e.y+c)];return[[VD(PD(h[0]+d,h[1]+u),PD(p[0]-d,p[1]-u)),VD(PD(p[0]-d,p[1]+u),PD(f[0]+d,f[1]-u)),VD(PD(f[0]-d,f[1]-u),PD(m[0]+d,m[1]+u)),VD(PD(m[0]+d,m[1]-u),PD(h[0]-d,h[1]+u))],[]]}let h=PD(e.x+e.width/2,e.y+e.height/2),[p,f,m,g]=[PD(e.x+n,e.y+r),PD(e.x+i,e.y+s),PD(e.x+a,e.y+o),PD(e.x+l,e.y+c)],b=[TD(RD(CD(f,h)),t),TD(RD(CD(m,h)),t),TD(RD(CD(g,h)),t),TD(RD(CD(p,h)),t)],U=[KD(ND(b[0],PD(f[0]-d,f[1]-u)),ND(b[0],f),ND(b[0],f),ND(b[0],PD(f[0]-d,f[1]+u))),KD(ND(b[1],PD(m[0]+d,m[1]-u)),ND(b[1],m),ND(b[1],m),ND(b[1],PD(m[0]-d,m[1]-u))),KD(ND(b[2],PD(g[0]+d,g[1]+u)),ND(b[2],g),ND(b[2],g),ND(b[2],PD(g[0]+d,g[1]-u))),KD(ND(b[3],PD(p[0]-d,p[1]+u)),ND(b[3],p),ND(b[3],p),ND(b[3],PD(p[0]+d,p[1]+u)))];return[[VD(U[0][3],U[1][0]),VD(U[1][3],U[2][0]),VD(U[2][3],U[3][0]),VD(U[3][3],U[0][0])],U]}var f$=e=>{if("arrow"===e.type)return!1;let t=!PL(e.backgroundColor)||TO(e)||fO(e)||mO(e);return"line"===e.type||"freedraw"===e.type?t&&sW(e.points):t||uO(e)},m$=({x:e,y:t,element:n,shape:r,threshold:i=10,frameNameBound:s=null})=>{let a=f$(n)&&a$(PD(e,t),r)||s$(PD(e,t),r,i);return!a&&s&&(a=a$(PD(e,t),{type:"polygon",data:e$(s).data})),a},g$=(e,t,n,r,i=0)=>{let[s,a,o,l]=mX(n,r);return s-=i,a-=i,o+=i,l+=i,WD(PD(s,a),PD(e,t),PD(o,l))},b$=(e,t,n)=>!!n&&a$(PD(e,t),n),U$=(e,t,n=0)=>{switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return y$(e,t,n);case"diamond":return x$(e,t,n);case"ellipse":return v$(e,t,n);default:throw new Error(`Unimplemented element type '${e.type}'`)}},y$=(e,t,n=0)=>{let r=PD(e.x+e.width/2,e.y+e.height/2),i=OD(t[0],r,-e.angle),s=OD(t[1],r,-e.angle),[a,o]=h$(e,n);return[...a.map(e=>qD(VD(i,s),e)).filter(e=>null!=e).map(t=>OD(t,r,e.angle)),...o.flatMap(e=>eL(e,VD(i,s))).filter(e=>null!=e).map(t=>OD(t,r,e.angle))].filter((e,t,n)=>n.findIndex(t=>LD(e,t))===t)},x$=(e,t,n=0)=>{let r=PD(e.x+e.width/2,e.y+e.height/2),i=OD(t[0],r,-e.angle),s=OD(t[1],r,-e.angle),[a,o]=p$(e,n);return[...a.map(e=>qD(VD(i,s),e)).filter(e=>null!=e).map(t=>OD(t,r,e.angle)),...o.flatMap(e=>eL(e,VD(i,s))).filter(e=>null!=e).map(t=>OD(t,r,e.angle))].filter((e,t,n)=>n.findIndex(t=>LD(e,t))===t)},v$=(e,t,n=0)=>{let r=PD(e.x+e.width/2,e.y+e.height/2),i=OD(t[0],r,-e.angle),s=OD(t[1],r,-e.angle);return function({center:e,halfWidth:t,halfHeight:n},[r,i]){let[s,a]=e,o=r[0]-s,l=r[1]-a,c=i[0]-s,d=i[1]-a,u=Math.pow(c-o,2)/Math.pow(t,2)+Math.pow(d-l,2)/Math.pow(n,2),h=2*(o*(c-o)/Math.pow(t,2)+l*(d-l)/Math.pow(n,2)),p=Math.pow(o,2)/Math.pow(t,2)+Math.pow(l,2)/Math.pow(n,2)-1,f=(-h+Math.sqrt(Math.pow(h,2)-4*u*p))/(2*u),m=(-h-Math.sqrt(Math.pow(h,2)-4*u*p))/(2*u),g=[PD(o+f*(c-o)+s,l+f*(d-l)+a),PD(o+m*(c-o)+s,l+m*(d-l)+a)].filter(e=>!isNaN(e[0])&&!isNaN(e[1]));return 2===g.length&&LD(g[0],g[1])?[g[0]]:g}(u$(r,e.width/2+n,e.height/2+n),XD(i,s)).map(t=>OD(t,r,e.angle))},w$="Equal",S$="Minus",E$="NumpadAdd",k$="NumpadSubtract",C$="Numpad0",_$="BracketRight",M$="BracketLeft",I$="Digit1",j$="Digit2",T$="Digit3",R$="Quote",P$="Digit0",A$="Slash",N$="KeyC",D$="KeyD",L$="KeyH",O$="KeyV",F$="KeyZ",z$="KeyY",B$="KeyR",H$="KeyS",$$={ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",BACKSPACE:"Backspace",ALT:"Alt",CTRL_OR_CMD:yA?"metaKey":"ctrlKey",DELETE:"Delete",ENTER:"Enter",ESCAPE:"Escape",QUESTION_MARK:"?",SPACE:" ",TAB:"Tab",CHEVRON_LEFT:"<",CHEVRON_RIGHT:">",PERIOD:".",COMMA:",",SLASH:"/",A:"a",D:"d",E:"e",F:"f",G:"g",H:"h",I:"i",L:"l",O:"o",P:"p",Q:"q",R:"r",S:"s",T:"t",V:"v",X:"x",Y:"y",Z:"z",K:"k",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},W$=new Map([[$$.Z,F$],[$$.Y,z$]]),X$=(e,t)=>{if(t===e.key.toLowerCase())return!0;let n=W$.get(t);return!(!n||(e=>/^[a-z]$/.test(e.toLowerCase()))(e.key)||e.code!==n)},V$=e=>e===$$.ARROW_LEFT||e===$$.ARROW_RIGHT||e===$$.ARROW_DOWN||e===$$.ARROW_UP,G$=e=>e.altKey,Y$=e=>e.shiftKey,q$=e=>e.shiftKey,Z$=[{icon:RF,value:"selection",key:$$.V,numericKey:$$[1],fillable:!0},{icon:PF,value:"rectangle",key:$$.R,numericKey:$$[2],fillable:!0},{icon:AF,value:"diamond",key:$$.D,numericKey:$$[3],fillable:!0},{icon:NF,value:"ellipse",key:$$.O,numericKey:$$[4],fillable:!0},{icon:DF,value:"arrow",key:$$.A,numericKey:$$[5],fillable:!0},{icon:LF,value:"line",key:$$.L,numericKey:$$[6],fillable:!0},{icon:FF,value:"freedraw",key:[$$.P,$$.X],numericKey:$$[7],fillable:!1},{icon:zF,value:"text",key:$$.T,numericKey:$$[8],fillable:!1},{icon:BF,value:"image",key:null,numericKey:$$[9],fillable:!1},{icon:HF,value:"eraser",key:$$.E,numericKey:$$[0],fillable:!1}],K$=(e,t)=>{switch(e.type){case"rectangle":case"diamond":case"frame":case"magicframe":case"embeddable":case"image":case"iframe":case"text":case"selection":return e$(e);case"arrow":case"line":{let n=UF.get(e)?.[0]??UF.generateElementShape(e,null)[0],[,,,,r,i]=sX(e,t);return f$(e)?r$(e,n,PD(e.x,e.y),e.angle,PD(r,i)):((e,t=PD(0,0),n,r)=>{let i=e=>OD(PD(e[0]+t[0],e[1]+t[1]),r,n),s=t$(e),a=[],o=PD(0,0);for(let l of s){if("move"===l.op){let e=AD(l.data);YL(null!=e,"Ops data is not a point"),o=i(e)}if("bcurveTo"===l.op){let e=i(PD(l.data[0],l.data[1])),t=i(PD(l.data[2],l.data[3])),n=i(PD(l.data[4],l.data[5]));a.push(KD(o,e,t,n)),o=n}}return{type:"polycurve",data:a}})(n,PD(e.x,e.y),e.angle,PD(r,i))}case"ellipse":return(e=>{let{width:t,height:n,angle:r,x:i,y:s}=e;return{type:"ellipse",data:{center:PD(i+t/2,s+n/2),angle:r,halfWidth:t/2,halfHeight:n/2}}})(e);case"freedraw":{let[,,,,n,r]=sX(e,t);return n$(e,PD(n,r),f$(e))}}},Q$=(e,t)=>{let n=dG(e,t);return n?"arrow"===e.type?K$({...n,...eG.getBoundTextElementPosition(e,n,t)},t):K$(n,t):null},J$=(e,t)=>{let n=UF.generateElementShape(e,null);if(!n)return null;let r=t$(n[0]),i=PD(0,0),s=0,a=1/0,o=null;for(;s<r.length;){let{op:e,data:n}=r[s];if("move"===e&&(YL(DD(n),"The returned ops is not compatible with a point"),i=n),"bcurveTo"===e){let e=i,r=PD(n[0],n[1]),s=PD(n[2],n[3]),l=PD(n[4],n[5]),c=BD(l,t);c<a&&(a=c,o=[e,r,s,l]),i=l}s++}return o},eW=(e,t,n,r,i)=>{let s=(i,s)=>Math.pow(1-i,3)*r[s]+3*i*Math.pow(1-i,2)*n[s]+3*Math.pow(i,2)*(1-i)*t[s]+e[s]*Math.pow(i,3);return PD(s(i,0),s(i,1))},tW=(e,t)=>{let n=[];n[0]=0;let r=((e,t)=>{let n=J$(e,t);if(!n)return[];let r=[],i=1;for(;i>0;){let e=eW(n[0],n[1],n[2],n[3],i);r.push(PD(e[0],e[1])),i-=.05}return r.length&&LD(r.at(-1),t)&&r.push(PD(t[0],t[1])),r})(e,t),i=0,s=0;for(;i<r.length-1;){s+=BD(r[i],r[i+1]),n.push(s),i++}return n},nW=(e,t)=>{let n={minX:e.x,minY:e.y,maxX:e.x+e.width,maxY:e.y+e.height,midX:e.x+e.width/2,midY:e.y+e.height/2},r=PD(n.midX,n.midY),[i,s]=OD(PD(n.minX,n.minY),r,e.angle),[a,o]=OD(PD(n.maxX,n.minY),r,e.angle),[l,c]=OD(PD(n.maxX,n.maxY),r,e.angle),[d,u]=OD(PD(n.minX,n.maxY),r,e.angle),h=[Math.min(i,a,l,d),Math.min(s,o,c,u),Math.max(i,a,l,d),Math.max(s,o,c,u)];if(t){let[e,n,r,i]=t;return[h[0]-i,h[1]-e,h[2]+n,h[3]+r]}return h},rW=(e,t)=>e[0]>t[0]&&e[0]<t[2]&&e[1]>t[1]&&e[1]<t[3],iW=(e,t)=>{if(t.roundness?.type===RN||t.roundness?.type===TN)return e*jN;if(t.roundness?.type===PN){let n=t.roundness?.value??32;return e<=n/jN?e*jN:n}return 0},sW=(e,t=1)=>{if(e.length>=3){let[n,r]=[e[0],e[e.length-1]];return BD(n,r)<=8/t}return!1},aW=10,oW=(e,t,n,r,i)=>{let[s,a,o,l]=UX(e,e.width,e.height,!0),c=PD(s,a),d=PD(o,l),u=zD(c,d),[h,p,f,m]=UX(e,n,r,!0),g=f-h,b=m-p,U=[...c];if(["n","w","nw"].includes(t)&&(U=[d[0]-Math.abs(g),d[1]-Math.abs(b)]),"ne"===t){let e=[c[0],d[1]];U=[e[0],e[1]-Math.abs(b)]}if("sw"===t){let e=[d[0],c[1]];U=[e[0]-Math.abs(g),e[1]]}i&&(["s","n"].includes(t)&&(U[0]=u[0]-g/2),["e","w"].includes(t)&&(U[1]=u[1]-b/2));let y=e.angle,x=OD(U,u,y),v=OD([U[0]+Math.abs(g)/2,U[1]+Math.abs(b)/2],u,y);U=OD(x,v,-y);let w=[...U];return w[0]+=e.x-h,w[1]+=e.y-p,w},lW=e=>{if(e.crop){return{width:e.width/(e.crop.width/e.crop.naturalWidth),height:e.height/(e.crop.height/e.crop.naturalHeight)}}return{width:e.width,height:e.height}},cW=(e,t)=>{let n=e.x,r=e.y,i=-1===t[0],s=-1===t[1];return i&&(n=e.naturalWidth-Math.abs(n)-e.width),s&&(r=e.naturalHeight-Math.abs(r)-e.height),{cropX:n,cropY:r}},dW="invert(100%) hue-rotate(180deg) saturate(1.25)",uW=hD(),hW=(e,t)=>dO(e)&&!t.imageCache.has(e.fileId),pW=(e,t,n)=>n.theme===eN&&dO(e)&&!hW(e,t)&&t.imageCache.get(e.fileId)?.mimeType!==lN.svg,fW=e=>{switch(e.type){case"freedraw":return 12*e.strokeWidth;case"text":return e.fontSize/2;default:return 20}},mW=(e,t,n,r,i=1)=>{let s=(t?.opacity??100)*e.opacity/1e4*i;return(n.has(e.id)||r&&r.some(t=>t.id===e.id)||t&&n.has(t.id))&&(s*=.2),s},gW=(e,t,n,r,i)=>{let s=document.createElement("canvas"),a=s.getContext("2d"),o=fW(e),{width:l,height:c,scale:d}=((e,t,n)=>{let r=fW(e),[i,s,a,o]=sX(e,t),l=vO(e)||yO(e)?vL(i,a):e.width,c=vO(e)||yO(e)?vL(s,o):e.height,d=l*window.devicePixelRatio+2*r,u=c*window.devicePixelRatio+2*r,h=n.value;return(d*h>32767||u*h>32767)&&(h=Math.min(32767/d,32767/u)),d*u*h*h>16777216&&(h=Math.sqrt(16777216/(d*u))),d=Math.floor(d*h),u=Math.floor(u*h),{width:d,height:u,scale:h}})(e,t,n);if(!l||!c)return null;s.width=l,s.height=c;let u=-100,h=0;if(vO(e)||yO(e)){let[n,r]=sX(e,t);u=e.x>n?vL(e.x,n)*window.devicePixelRatio*d:0,h=e.y>r?vL(e.y,r)*window.devicePixelRatio*d:0,a.translate(u,h)}a.save(),a.translate(o*d,o*d),a.scale(window.devicePixelRatio*d,window.devicePixelRatio*d);let p=wP.canvas(s);pW(e,r,i)&&(a.filter=dW),yW(e,p,a,r),a.restore();let f=dG(e,t),m=document.createElement("canvas"),g=m.getContext("2d");if(wO(e)&&f){let[n,r,i,a]=sX(e,t),l=Math.max(vL(n,i),vL(r,a));m.width=l*window.devicePixelRatio*d+o*d*10,m.height=l*window.devicePixelRatio*d+o*d*10,g.translate(m.width/2,m.height/2),g.rotate(e.angle),g.drawImage(s,-s.width/2,-s.height/2,s.width,s.height);let[,,,,c,u]=sX(f,t);g.rotate(-e.angle);let h=(m.width-s.width)/2,p=(m.height-s.height)/2,b=m.width/2-(c-n)*window.devicePixelRatio*d-h-o*d,U=m.height/2-(u-r)*window.devicePixelRatio*d-p-o*d;g.translate(-b,-U),g.clearRect(-(f.width/2+5)*window.devicePixelRatio*d,-(f.height/2+5)*window.devicePixelRatio*d,(f.width+10)*window.devicePixelRatio*d,(f.height+10)*window.devicePixelRatio*d)}return{element:e,canvas:s,theme:i.theme,scale:d,zoomValue:n.value,canvasOffsetX:u,canvasOffsetY:h,boundTextElementVersion:dG(e,t)?.version||null,containingFrameOpacity:uK(e,t)?.opacity||100,boundTextCanvas:m,angle:e.angle,imageCrop:uO(e)?e.crop:null}},bW=document.createElement("img");bW.src=`data:${lN.svg},${encodeURIComponent('<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="image" class="svg-inline--fa fa-image fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#888" d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"></path></svg>')}`;var UW=document.createElement("img");UW.src=`data:${lN.svg},${encodeURIComponent('<svg viewBox="0 0 668 668" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48ZM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56ZM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.81709 0 0 .81709 124.825 145.825)"/><path d="M256 8C119.034 8 8 119.033 8 256c0 136.967 111.034 248 248 248s248-111.034 248-248S392.967 8 256 8Zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676ZM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.30366 0 0 .30366 506.822 60.065)"/></svg>')}`;var yW=(e,t,n,r,i)=>{switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":n.lineJoin="round",n.lineCap="round",t.draw(UF.get(e));break;case"arrow":case"line":n.lineJoin="round",n.lineCap="round",UF.get(e).forEach(e=>{t.draw(e)});break;case"freedraw":{n.save(),n.fillStyle=e.strokeColor;let r=function(e){return EW.get(e)}(e),i=UF.get(e);i&&t.draw(i),n.fillStyle=e.strokeColor,n.fill(r),n.restore();break}case"image":{let t=dO(e)?r.imageCache.get(e.fileId)?.image:void 0;if(null==t||t instanceof Promise)((e,t)=>{t.fillStyle="#E7E7E7",t.fillRect(0,0,e.width,e.height);let n=Math.min(e.width,e.height),r=Math.min(n,Math.min(.4*n,100));t.drawImage("error"===e.status?UW:bW,e.width/2-r/2,e.height/2-r/2,r,r)})(e,n);else{e.roundness&&n.roundRect&&(n.beginPath(),n.roundRect(0,0,e.width,e.height,iW(Math.min(e.width,e.height),e)),n.clip());let{x:r,y:i,width:s,height:a}=e.crop?e.crop:{x:0,y:0,width:t.naturalWidth,height:t.naturalHeight};n.drawImage(t,r,i,s,a,0,0,e.width,e.height)}break}default:if(!mO(e))throw new Error(`Unimplemented type ${e.type}`);{let t=ML(e.text),r=t&&!n.canvas.isConnected;r&&document.body.appendChild(n.canvas),n.canvas.setAttribute("dir",t?"rtl":"ltr"),n.save(),n.font=gL(e),n.fillStyle=e.strokeColor,n.textAlign=e.textAlign;let i=e.text.replace(/\r\n?/g,"\n").split("\n"),s="center"===e.textAlign?e.width/2:"right"===e.textAlign?e.width:0,a=WO(e.fontSize,e.lineHeight),o=QH(e.fontFamily,e.fontSize,a);for(let e=0;e<i.length;e++)n.fillText(i[e],s,e*a+o);n.restore(),r&&n.canvas.remove()}}},xW=new WeakMap,vW=(e,t,n,r)=>{let i=n?r.zoom:uW.zoom,s=xW.get(e),a=s&&s.zoomValue!==i.value&&!r?.shouldCacheIgnoreZoom,o=dG(e,t),l=o?.version||null,c=uO(e)?e.crop:null,d=uK(e,t)?.opacity||100;if(!s||a||s.theme!==r.theme||s.boundTextElementVersion!==l||s.imageCrop!==c||s.containingFrameOpacity!==d||wO(e)&&o&&e.angle!==s.angle){let s=gW(e,t,i,n,r);return s?(xW.set(e,s),s):null}return s},wW=(e,t,n,r,i)=>{let s=e.element,a=fW(s),o=e.scale,[l,c,d,u]=sX(s,i),h=((l+d)/2+r.scrollX)*window.devicePixelRatio,p=((c+u)/2+r.scrollY)*window.devicePixelRatio;t.save(),t.scale(1/window.devicePixelRatio,1/window.devicePixelRatio);let f=dG(s,i);if(wO(s)&&f){let n=(e.boundTextCanvas.width-e.canvas.width)/2,r=(e.boundTextCanvas.height-e.canvas.height)/2;t.translate(h,p),t.drawImage(e.boundTextCanvas,-(d-l)/2*window.devicePixelRatio-n/o-a,-(u-c)/2*window.devicePixelRatio-r/o-a,e.boundTextCanvas.width/o,e.boundTextCanvas.height/o)}else t.translate(h,p),t.rotate(s.angle),"scale"in e.element&&!hW(s,n)&&t.scale(e.element.scale[0],e.element.scale[1]),t.translate(-h,-p),t.drawImage(e.canvas,(l+r.scrollX)*window.devicePixelRatio-a*e.scale/e.scale,(c+r.scrollY)*window.devicePixelRatio-a*e.scale/e.scale,e.canvas.width/e.scale,e.canvas.height/e.scale);t.restore()},SW=(e,t,n,r,i,s,a)=>{let o="elementLinkSelector"===a.openDialog?.name&&!a.selectedElementIds[e.id]&&!a.hoveredElementIds[e.id];switch(i.globalAlpha=mW(e,uK(e,t),s.elementsPendingErasure,s.pendingFlowchartNodes,o?.3:1),e.type){case"magicframe":case"frame":a.frameRendering.enabled&&a.frameRendering.outline&&(i.save(),i.translate(e.x+a.scrollX,e.y+a.scrollY),i.fillStyle="rgba(0, 0, 200, 0.04)",i.lineWidth=tN.strokeWidth/a.zoom.value,i.strokeStyle=tN.strokeColor,bO(e)&&(i.strokeStyle=a.theme===JA?"#7affd7":"#1d8264"),i.roundRect?(i.beginPath(),i.roundRect(0,0,e.width,e.height,tN.radius/a.zoom.value),i.stroke(),i.closePath()):i.strokeRect(0,0,e.width,e.height),i.restore());break;case"freedraw":if(UF.generateElementShape(e,null),s.isExporting){let[n,o,l,c]=sX(e,t),d=(n+l)/2+a.scrollX,u=(o+c)/2+a.scrollY,h=(l-n)/2-(e.x-n),p=(c-o)/2-(e.y-o);i.save(),i.translate(d,u),i.rotate(e.angle),i.translate(-h,-p),yW(e,r,i,s),i.restore()}else{let t=vW(e,n,s,a);if(!t)return;wW(t,i,s,a,n)}break;case"rectangle":case"diamond":case"ellipse":case"line":case"arrow":case"image":case"text":case"iframe":case"embeddable":if(UF.generateElementShape(e,s),s.isExporting){let[n,o,l,c]=sX(e,t),d=(n+l)/2+a.scrollX,u=(o+c)/2+a.scrollY,h=(l-n)/2-(e.x-n),p=(c-o)/2-(e.y-o);if(mO(e)){let r=uG(e,t);if(wO(r)){let i=eG.getBoundTextElementPosition(r,e,t);h=(l-n)/2-(i.x-n),p=(c-o)/2-(i.y-o)}}i.save(),i.translate(d,u),pW(e,s,a)&&(i.filter="none");let f=dG(e,t);if(wO(e)&&f){let r=document.createElement("canvas"),d=r.getContext("2d"),u=Math.max(vL(n,l),vL(o,c)),m=fW(e);r.width=u*a.exportScale+10*m*a.exportScale,r.height=u*a.exportScale+10*m*a.exportScale,d.translate(r.width/2,r.height/2),d.scale(a.exportScale,a.exportScale),h=e.width/2-(e.x-n),p=e.height/2-(e.y-o),d.rotate(e.angle);let g=wP.canvas(r);d.translate(-h,-p),yW(e,g,d,s),d.translate(h,p),d.rotate(-e.angle);let[,,,,b,U]=sX(f,t),y=(n+l)/2-b,x=(o+c)/2-U;d.translate(-y,-x),d.clearRect(-f.width/2,-f.height/2,f.width,f.height),i.scale(1/a.exportScale,1/a.exportScale),i.drawImage(r,-r.width/2,-r.height/2,r.width,r.height)}else i.rotate(e.angle),"image"===e.type&&i.scale(e.scale[0],e.scale[1]),i.translate(-h,-p),yW(e,r,i,s);i.restore()}else{let r=vW(e,n,s,a);if(!r)return;let o=i.imageSmoothingEnabled;if(!a?.shouldCacheIgnoreZoom&&(!e.angle||function(e){return Math.abs(Math.sin(2*e))<1e-4}(e.angle))&&(i.imageSmoothingEnabled=!1),e.id===a.croppingElementId&&uO(r.element)&&null!==r.element.crop){i.save(),i.globalAlpha=.1;let e=gW(((e,t)=>{if(e.crop){let{width:n,height:r}=lW(e),[i,s,a,o,l,c]=sX(e,t),d=CD(OD(PD(i,s),PD(l,c),e.angle)),u=CD(OD(PD(a,s),PD(l,c),e.angle)),h=RD(jD(u,d)),p=jD(CD(OD(PD(i,o),PD(l,c),e.angle)),d),f=RD(p),{cropX:m,cropY:g}=cW(e.crop,e.scale),b=ID(ID(d,TD(h,-m*n/e.crop.naturalWidth)),TD(f,-g*r/e.crop.naturalHeight)),U=ND(ID(ID(b,TD(h,n/2)),TD(f,r/2))),y=OD(ND(b),U,-e.angle);return{...e,x:y[0],y:y[1],width:n,height:r,crop:null}}return e})(r.element,t),n,a.zoom,s,a);e&&wW(e,i,s,a,n),i.restore()}wW(r,i,s,a,n),i.imageSmoothingEnabled=o}break;default:throw new Error(`Unimplemented type ${e.type}`)}i.globalAlpha=1},EW=new WeakMap([]);function kW(e){let t=e.simulatePressure?e.points:e.points.length?e.points.map(([t,n],r)=>[t,n,e.pressures[r]]):[[0,0,.5]],n={simulatePressure:e.simulatePressure,size:4.25*e.strokeWidth,thinning:.6,smoothing:.5,streamline:.5,easing:e=>Math.sin(e*Math.PI/2),last:!!e.lastCommittedPoint};return function(e){if(!e.length)return"";let t=e.length-1;return e.reduce((e,n,r,i)=>(r===t?e.push(n,CW(n,i[0]),"L",i[0],"Z"):e.push(n,CW(n,i[r+1])),e),["M",e[0],"Q"]).join(" ").replace(_W,"$1")}(FP(t,n))}function CW(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}var _W=/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g;var MW=e=>"rectangle"===e||"iframe"===e||"embeddable"===e||"ellipse"===e||"diamond"===e||"line"===e||"freedraw"===e,IW=e=>"image"!==e&&"frame"!==e&&"magicframe"!==e,jW=e=>"rectangle"===e||"iframe"===e||"embeddable"===e||"ellipse"===e||"diamond"===e||"freedraw"===e||"arrow"===e||"line"===e,TW=e=>"rectangle"===e||"iframe"===e||"embeddable"===e||"ellipse"===e||"diamond"===e||"arrow"===e||"line"===e,RW=e=>"rectangle"===e||"iframe"===e||"embeddable"===e||"line"===e||"diamond"===e||"image"===e,PW=e=>"arrow"===e,AW=e=>"arrow"===e,NW=[1,0],DW=[0,1],LW=[-1,0],OW=[0,-1],FW=(e,t)=>{let n=ED(Math.atan2(t[1]-e[1],t[0]-e[0]));return n>=315||n<45?OW:n>=45&&n<135?NW:n>=135&&n<225?DW:LW},zW=e=>{let[t,n]=e,r=Math.abs(t),i=Math.abs(n);return t>i?NW:t<=-i?LW:n>r?DW:OW},BW=(e,t)=>zW(CD(e,t)),HW=(e,t)=>WW(BW(e,t)),$W=(e,t)=>e[0]===t[0]&&e[1]===t[1],WW=e=>$W(e,NW)||$W(e,LW),XW=(e,t,n)=>{let r=vX(t);if("diamond"===e.type){if(n[0]<e.x)return LW;if(n[1]<e.y)return OW;if(n[0]>e.x+e.width)return NW;if(n[1]>e.y+e.height)return DW;let t=OD($D(PD(e.x+e.width/2,e.y),r,2),r,e.angle),i=OD($D(PD(e.x+e.width,e.y+e.height/2),r,2),r,e.angle),s=OD($D(PD(e.x+e.width/2,e.y+e.height),r,2),r,e.angle),a=OD($D(PD(e.x,e.y+e.height/2),r,2),r,e.angle);return dL([t,i,r],n)?FW(t,i):dL([i,s,r],n)?FW(i,s):dL([s,a,r],n)?FW(s,a):FW(a,t)}let i=$D(PD(t[0],t[1]),r,2),s=$D(PD(t[2],t[1]),r,2),a=$D(PD(t[0],t[3]),r,2),o=$D(PD(t[2],t[3]),r,2);return dL([i,s,r],n)?OW:dL([s,o,r],n)?NW:dL([o,a,r],n)?DW:LW},VW=e=>[0===e[0]?0:e[0]>0?-1:1,0===e[1]?0:e[1]>0?-1:1],GW=e=>[8,8+e],YW=e=>[1.5,6+e];function qW(e){let t=e.roughness,n=Math.max(e.width,e.height),r=Math.min(e.width,e.height);return r>=20&&n>=50||r>=15&&e.roundness&&RW(e.type)||vO(e)&&n>=50?t:Math.min(t/(n<10?3:2),2.5)}var ZW=(e,t=!1)=>{let n={seed:e.seed,strokeLineDash:"dashed"===e.strokeStyle?GW(e.strokeWidth):"dotted"===e.strokeStyle?YW(e.strokeWidth):void 0,disableMultiStroke:"solid"!==e.strokeStyle,strokeWidth:"solid"!==e.strokeStyle?e.strokeWidth+.5:e.strokeWidth,fillWeight:e.strokeWidth/2,hachureGap:4*e.strokeWidth,roughness:qW(e),stroke:e.strokeColor,preserveVertices:t||e.roughness<AN};switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":return n.fillStyle=e.fillStyle,n.fill=PL(e.backgroundColor)?void 0:e.backgroundColor,"ellipse"===e.type&&(n.curveFitting=1),n;case"line":case"freedraw":return sW(e.points)&&(n.fillStyle=e.fillStyle,n.fill="transparent"===e.backgroundColor?void 0:e.backgroundColor),n;case"arrow":return n;default:throw new Error(`Unimplemented type ${e.type}`)}},KW=(e,t,n)=>fO(e)&&(t||hO(e)&&!0!==n?.get(e.id))&&PL(e.backgroundColor)&&PL(e.strokeColor)?{...e,roughness:0,backgroundColor:"#d3d3d3",fillStyle:"solid"}:pO(e)?{...e,strokeColor:PL(e.strokeColor)?"#000000":e.strokeColor,backgroundColor:PL(e.backgroundColor)?"#f4f4f6":e.backgroundColor}:e,QW=(e,t,n,r,i,s,a)=>{let o=pX(e,t,n,r);if(null===o)return[];let l=(e,t)=>{if(null===e)return[];let[,,n,r,s,a]=e;return[i.line(n,r,s,a,t)]};switch(r){case"dot":case"circle":case"circle_outline":{let[t,n,l]=o;return delete s.strokeLineDash,[i.circle(t,n,l,{...s,fill:"circle_outline"===r?a:e.strokeColor,fillStyle:"solid",stroke:e.strokeColor,roughness:Math.min(.5,s.roughness||0)})]}case"triangle":case"triangle_outline":{let[t,n,l,c,d,u]=o;return delete s.strokeLineDash,[i.polygon([[t,n],[l,c],[d,u],[t,n]],{...s,fill:"triangle_outline"===r?a:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,s.roughness||0)})]}case"diamond":case"diamond_outline":{let[t,n,l,c,d,u,h,p]=o;return delete s.strokeLineDash,[i.polygon([[t,n],[l,c],[d,u],[h,p],[t,n]],{...s,fill:"diamond_outline"===r?a:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,s.roughness||0)})]}case"crowfoot_one":return l(o,s);default:{let[a,c,d,u,h,p]=o;if("dotted"===e.strokeStyle){let t=YW(e.strokeWidth-1);s.strokeLineDash=[t[0],t[1]-1]}else delete s.strokeLineDash;return s.roughness=Math.min(1,s.roughness||0),[i.line(d,u,a,c,s),i.line(h,p,a,c,s),..."crowfoot_one_or_many"===r?l(pX(e,t,n,"crowfoot_one"),s):[]]}}},JW=(e,t,{isExporting:n,canvasBackgroundColor:r,embedsValidationStatus:i})=>{switch(e.type){case"rectangle":case"iframe":case"embeddable":{let r;if(e.roundness){let s=e.width,a=e.height,o=iW(Math.min(s,a),e);r=t.path(`M ${o} 0 L ${s-o} 0 Q ${s} 0, ${s} ${o} L ${s} ${a-o} Q ${s} ${a}, ${s-o} ${a} L ${o} ${a} Q 0 ${a}, 0 ${a-o} L 0 ${o} Q 0 0, ${o} 0`,ZW(KW(e,n,i),!0))}else r=t.rectangle(0,0,e.width,e.height,ZW(KW(e,n,i),!1));return r}case"diamond":{let n,[r,i,s,a,o,l,c,d]=oX(e);if(e.roundness){let u=iW(Math.abs(r-c),e),h=iW(Math.abs(a-i),e);n=t.path(`M ${r+u} ${i+h} L ${s-u} ${a-h}\n            C ${s} ${a}, ${s} ${a}, ${s-u} ${a+h}\n            L ${o+u} ${l-h}\n            C ${o} ${l}, ${o} ${l}, ${o-u} ${l-h}\n            L ${c+u} ${d+h}\n            C ${c} ${d}, ${c} ${d}, ${c+u} ${d-h}\n            L ${r-u} ${i+h}\n            C ${r} ${i}, ${r} ${i}, ${r+u} ${i+h}`,ZW(e,!0))}else n=t.polygon([[r,i],[s,a],[o,l],[c,d]],ZW(e));return n}case"ellipse":return t.ellipse(e.width/2,e.height/2,e.width,e.height,ZW(e));case"line":case"arrow":{let n,i=ZW(e),s=e.points.length?e.points:[PD(0,0)];if(n=SO(e)?s.every(e=>Math.abs(e[0])<=1e6&&Math.abs(e[1])<=1e6)?[t.path(eX(s,16),ZW(e,!0))]:[]:e.roundness?[t.curve(s,i)]:i.fill?[t.polygon(s,i)]:[t.linearPath(s,i)],"arrow"===e.type){let{startArrowhead:s=null,endArrowhead:a="arrow"}=e;if(null!==s){let a=QW(e,n,"start",s,t,i,r);n.push(...a)}if(null!==a){let s=QW(e,n,"end",a,t,i,r);n.push(...s)}}return n}case"freedraw":{let n;if(function(e){let t=kW(e),n=new Path2D(t);EW.set(e,n)}(e),sW(e.points)){let r=(s=e.points,a=.75,VP(s,0,s.length,a));n=t.curve(r,{...ZW(e),stroke:"none"})}else n=null;return n}case"frame":case"magicframe":case"text":case"image":return null;default:return GL(e,`generateElementShape(): Unimplemented type ${e?.type}`),null}var s,a},eX=(e,t)=>{let n=[];for(let i=1;i<e.length-1;i+=1){let r=e[i-1],s=e[i+1],a=e[i],o=HW(a,r),l=HW(s,a),c=Math.min(t,BD(e[i],s)/2,BD(e[i],r)/2);o?r[0]<a[0]?n.push([e[i][0]-c,e[i][1]]):n.push([e[i][0]+c,e[i][1]]):r[1]<a[1]?n.push([e[i][0],e[i][1]-c]):n.push([e[i][0],e[i][1]+c]),n.push(e[i]),l?s[0]<a[0]?n.push([e[i][0]-c,e[i][1]]):n.push([e[i][0]+c,e[i][1]]):s[1]<a[1]?n.push([e[i][0],e[i][1]-c]):n.push([e[i][0],e[i][1]+c])}let r=[`M ${e[0][0]} ${e[0][1]}`];for(let i=0;i<n.length;i+=3)r.push(`L ${n[i][0]} ${n[i][1]}`),r.push(`Q ${n[i+1][0]} ${n[i+1][1]}, ${n[i+2][0]} ${n[i+2][1]}`);return r.push(`L ${e[e.length-1][0]} ${e[e.length-1][1]}`),r.join(" ")},tX=e=>{let t=e.map(e=>e[0]),n=e.map(e=>e[1]);return{width:Math.max(...t)-Math.min(...t),height:Math.max(...n)-Math.min(...n)}},nX=(e,t,n,r)=>{let i=n.map(t=>t[e]),s=Math.max(...i),a=Math.min(...i),o=s-a,l=0===o?1:t/o,c=1/0,d=n.map(t=>{let n=t[e]*l,r=[...t];return r[e]=n,n<c&&(c=n),r});if(!r||2===d.length)return d;let u=a-c;return d.map(t=>t.map((t,n)=>n===e?t+u:t))},rX=class e{static getBounds(t,n){let r=e.boundsCache.get(t);if(r?.version&&r.version===t.version&&!RO(t))return r.bounds;let i=e.calculateBounds(t,n);return e.boundsCache.set(t,{version:t.version,bounds:i}),i}static calculateBounds(e,t){let n,[r,i,s,a,o,l]=sX(e,t);if(yO(e)){let[t,n,r,i]=uX(e.points.map(([t,n])=>OD(PD(t,n),PD(o-e.x,l-e.y),e.angle)));return[t+e.x,n+e.y,r+e.x,i+e.y]}if(vO(e))n=fX(e,o,l,t);else if("diamond"===e.type){let[t,c]=OD(PD(o,i),PD(o,l),e.angle),[d,u]=OD(PD(o,a),PD(o,l),e.angle),[h,p]=OD(PD(r,l),PD(o,l),e.angle),[f,m]=OD(PD(s,l),PD(o,l),e.angle);n=[Math.min(t,d,h,f),Math.min(c,u,p,m),Math.max(t,d,h,f),Math.max(c,u,p,m)]}else if("ellipse"===e.type){let t=(s-r)/2,c=(a-i)/2,d=Math.cos(e.angle),u=Math.sin(e.angle),h=Math.hypot(t*d,c*u),p=Math.hypot(c*d,t*u);n=[o-h,l-p,o+h,l+p]}else{let[t,c]=OD(PD(r,i),PD(o,l),e.angle),[d,u]=OD(PD(r,a),PD(o,l),e.angle),[h,p]=OD(PD(s,a),PD(o,l),e.angle),[f,m]=OD(PD(s,i),PD(o,l),e.angle);n=[Math.min(t,d,h,f),Math.min(c,u,p,m),Math.max(t,d,h,f),Math.max(c,u,p,m)]}return n}};XM(rX,"boundsCache",new WeakMap);var iX=rX,sX=(e,t,n=!1)=>{if(yO(e))return hX(e);if(vO(e))return eG.getElementAbsoluteCoords(e,t,n);if(mO(e)){let n=t?uG(e,t):null;if(wO(n)){let{x:r,y:i}=eG.getBoundTextElementPosition(n,e,t);return[r,i,r+e.width,i+e.height,r+e.width/2,i+e.height/2]}}return[e.x,e.y,e.x+e.width,e.y+e.height,e.x+e.width/2,e.y+e.height/2]},aX=(e,t)=>{let[n,r,i,s,a,o]=sX(e,t),l=PD(a,o);if(vO(e)||yO(e)){let t=[],n=0;for(;n<e.points.length-1;)t.push(VD(OD(PD(e.points[n][0]+e.x,e.points[n][1]+e.y),l,e.angle),OD(PD(e.points[n+1][0]+e.x,e.points[n+1][1]+e.y),l,e.angle))),n++;return t}let[c,d,u,h,p,f,m,g]=[[n,r],[i,r],[n,s],[i,s],[a,r],[a,s],[n,o],[i,o]].map(t=>OD(t,l,e.angle));return"diamond"===e.type?[VD(p,m),VD(p,g),VD(f,m),VD(f,g)]:"ellipse"===e.type?[VD(p,m),VD(p,g),VD(f,m),VD(f,g),VD(p,m),VD(p,g),VD(f,m),VD(f,g)]:[VD(c,d),VD(u,h),VD(c,u),VD(d,h),VD(c,g),VD(u,g),VD(d,m),VD(h,m)]},oX=e=>{let t=Math.floor(e.width/2)+1,n=e.width,r=Math.floor(e.height/2)+1;return[t,0,n,r,t,e.height,0,r]},lX=(e,t,n,r,i)=>{let s=1-e;return Math.pow(s,3)*t+3*Math.pow(s,2)*e*n+3*s*Math.pow(e,2)*r+Math.pow(e,3)*i},cX=(e,t,n,r)=>{let i=t-e,s=n-t,a=3*i-6*s+3*(r-n),o=6*s-6*i,l=3*i,c=o*o-4*a*l;if(!(c>=0))return!1;let d=null,u=null,h=1/0,p=1/0;return 0===a?h=p=-l/o:(h=(-o+Math.sqrt(c))/(2*a),p=(-o-Math.sqrt(c))/(2*a)),h>=0&&h<=1&&(d=lX(h,e,t,n,r)),p>=0&&p<=1&&(u=lX(p,e,t,n,r)),[d,u]},dX=(e,t)=>{let n=PD(0,0),{minX:r,minY:i,maxX:s,maxY:a}=e.reduce((e,{op:r,data:i})=>{if("move"===r){let e=AD(i);YL(null!=e,"Op data is not a point"),n=e}else if("bcurveTo"===r){let r=PD(i[0],i[1]),s=PD(i[2],i[3]),a=PD(i[4],i[5]),o=t?t(r):r,l=t?t(s):s,c=t?t(a):a,d=t?t(n):n;n=a;let[u,h,p,f]=((e,t,n,r)=>{let i=cX(e[0],t[0],n[0],r[0]),s=cX(e[1],t[1],n[1],r[1]),a=Math.min(e[0],r[0]),o=Math.max(e[0],r[0]);if(i){let e=i.filter(e=>null!==e);a=Math.min(a,...e),o=Math.max(o,...e)}let l=Math.min(e[1],r[1]),c=Math.max(e[1],r[1]);if(s){let e=s.filter(e=>null!==e);l=Math.min(l,...e),c=Math.max(c,...e)}return[a,l,o,c]})(d,o,l,c);e.minX=Math.min(e.minX,u),e.minY=Math.min(e.minY,h),e.maxX=Math.max(e.maxX,p),e.maxY=Math.max(e.maxY,f)}return e},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[r,i,s,a]},uX=e=>{let t=1/0,n=1/0,r=-1/0,i=-1/0;for(let[s,a]of e)t=Math.min(t,s),n=Math.min(n,a),r=Math.max(r,s),i=Math.max(i,a);return[t,n,r,i]},hX=e=>{let[t,n,r,i]=uX(e.points),s=t+e.x,a=n+e.y,o=r+e.x,l=i+e.y;return[s,a,o,l,(s+o)/2,(a+l)/2]},pX=(e,t,n,r)=>{if(t.length<1)return null;let i=t$(t[0]);if(i.length<1)return null;let s="start"===n?1:i.length-1,a=i[s].data;YL(6===a.length,"Op data length is not 6");let o=PD(a[4],a[5]),l=PD(a[2],a[3]),c=PD(a[0],a[1]),d=i[s-1],u=PD(0,0);if("move"===d.op){let e=AD(d.data);YL(null!=e,"Op data is not a point"),u=e}else"bcurveTo"===d.op&&(u=PD(d.data[4],d.data[5]));let h=(e,t)=>Math.pow(1-e,3)*o[t]+3*e*Math.pow(1-e,2)*l[t]+3*Math.pow(e,2)*(1-e)*c[t]+u[t]*Math.pow(e,3),[p,f]="start"===n?u:o,[m,g]=[h(.3,0),h(.3,1)],b=Math.hypot(p-m,f-g),U=(p-m)/b,y=(f-g)/b,x=(e=>{switch(e){case"arrow":return 25;case"diamond":case"diamond_outline":return 12;case"crowfoot_many":case"crowfoot_one":case"crowfoot_one_or_many":return 20;default:return 15}})(r),v=0;{let[t,r]="end"===n?e.points[e.points.length-1]:e.points[0],[i,s]=e.points.length>1?"end"===n?e.points[e.points.length-2]:e.points[1]:[0,0];v=Math.hypot(t-i,r-s)}let w=Math.min(x,v*("diamond"===r||"diamond_outline"===r?.25:.5)),S=p-U*w,E=f-y*w;if("dot"===r||"circle"===r||"circle_outline"===r){return[p,f,Math.hypot(E-f,S-p)+e.strokeWidth-2]}let k=(e=>{switch(e){case"bar":return 90;case"arrow":return 20;default:return 25}})(r);if("crowfoot_many"===r||"crowfoot_one_or_many"===r){let[e,t]=OD(PD(p,f),PD(S,E),SD(-k)),[n,r]=OD(PD(p,f),PD(S,E),SD(k));return[S,E,e,t,n,r]}let[C,_]=OD(PD(S,E),PD(p,f),-k*Math.PI/180),[M,I]=OD(PD(S,E),PD(p,f),SD(k));if("diamond"===r||"diamond_outline"===r){let t,r;if("start"===n){let[n,i]=e.points.length>1?e.points[1]:[0,0];[t,r]=OD(PD(p+2*w,f),PD(p,f),Math.atan2(i-f,n-p))}else{let[n,i]=e.points.length>1?e.points[e.points.length-2]:[0,0];[t,r]=OD(PD(p-2*w,f),PD(p,f),Math.atan2(f-i,p-n))}return[p,f,C,_,t,r,M,I]}return[p,f,C,_,M,I]},fX=(e,t,n,r)=>{let i=dG(e,r);if(e.points.length<2){let[s,a]=e.points[0],[o,l]=OD(PD(e.x+s,e.y+a),PD(t,n),e.angle),c=[o,l,o,l];if(i){let t=eG.getMinMaxXYWithBoundText(e,r,[o,l,o,l],i);c=[t[0],t[1],t[2],t[3]]}return c}let s=UF.get(e)?.[0]??(e=>{let t=wP.generator(),n=ZW(e);return t[e.roundness?"curve":n.fill?"polygon":"linearPath"](e.points,n)})(e),a=t$(s),o=dX(a,([r,i])=>OD(PD(e.x+r,e.y+i),PD(t,n),e.angle)),l=[o[0],o[1],o[2],o[3]];if(i){let t=eG.getMinMaxXYWithBoundText(e,r,l,i);l=[t[0],t[1],t[2],t[3]]}return l},mX=(e,t)=>iX.getBounds(e,t),gX=(e,t)=>{if(!e.length)return[0,0,0,0];let n=1/0,r=-1/0,i=1/0,s=-1/0,a=t||DL(e);return e.forEach(e=>{let[t,o,l,c]=mX(e,a);n=Math.min(n,t),i=Math.min(i,o),r=Math.max(r,l),s=Math.max(s,c)}),[n,i,r,s]},bX=(e,t)=>{let[n,r,i,s]=gX(e);return[n+t.x,r+t.y,i+t.x,s+t.y]},UX=(e,t,n,r)=>{if(!vO(e)&&!yO(e))return[e.x,e.y,e.x+t,e.y+n];let i,s=nX(0,t,nX(1,n,e.points,r),r);if(yO(e))i=uX(s);else{let t=wP.generator(),n=e.roundness?t.curve(s,ZW(e)):t.linearPath(s,ZW(e)),r=t$(n);i=dX(r)}let[a,o,l,c]=i;return[a+e.x,o+e.y,l+e.x,c+e.y]},yX=(e,t)=>{let n=wP.generator(),r=null==e.roundness?n.linearPath(t,ZW(e)):n.curve(t,ZW(e)),i=t$(r),[s,a,o,l]=dX(i);return[s+e.x,a+e.y,o+e.x,l+e.y]},xX=e=>{let[t,n,r,i]=gX(e);return{minX:t,minY:n,maxX:r,maxY:i,width:r-t,height:i-n,midX:(t+r)/2,midY:(n+i)/2}},vX=e=>PD(e[0]+(e[2]-e[0])/2,e[1]+(e[3]-e[1])/2),wX=(e,t)=>{switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return SX(e,t);case"diamond":return EX(e,t);case"ellipse":return kX(e,t)}},SX=(e,t)=>{let n=OD(t,PD(e.x+e.width/2,e.y+e.height/2),-e.angle),[r,i]=h$(e);return Math.min(...r.map(e=>YD(n,e)),...i.map(e=>tL(e,n)).filter(e=>null!==e))},EX=(e,t)=>{let n=OD(t,PD(e.x+e.width/2,e.y+e.height/2),-e.angle),[r,i]=p$(e);return Math.min(...r.map(e=>YD(n,e)),...i.map(e=>tL(e,n)).filter(e=>null!==e))},kX=(e,t)=>{let n=PD(e.x+e.width/2,e.y+e.height/2);return((e,t)=>{let{halfWidth:n,halfHeight:r,center:i}=t,s=n,a=r,o=ID(CD(e),TD(CD(i),-1)),l=Math.abs(o[0]),c=Math.abs(o[1]),d=.707,u=.707;for(let f=0;f<3;f++){let e=(s*s-a*a)*d**3/s,t=(a*a-s*s)*u**3/a,n=s*d-e,r=a*u-t,i=l-e,o=c-t,h=Math.hypot(r,n),p=Math.hypot(o,i);d=Math.min(1,Math.max(0,(i*h/p+e)/s)),u=Math.min(1,Math.max(0,(o*h/p+t)/a));let f=Math.hypot(u,d);d/=f,u/=f}let[h,p]=[s*d*Math.sign(o[0]),a*u*Math.sign(o[1])];return BD(ND(o),PD(h,p))})(OD(t,n,-e.angle),u$(n,e.width/2,e.height/2))},CX=e=>e.isBindingEnabled,_X=(e,t,n,r,i)=>{let s=new Set,a=new Set;MX(e,t,n,"start",s,a,r),MX(e,n,t,"end",s,a,r),((e,t)=>{let n=[];return t.forEach(t=>{let r=e.getNonDeletedElement(t);null!=r&&n.push(r)}),n})(i,Array.from(a).filter(e=>!s.has(e))).forEach(t=>{DK(t,{boundElements:t.boundElements?.filter(t=>"arrow"!==t.type||t.id!==e.id)})})},MX=(e,t,n,r,i,s,a)=>{if("keep"!==t){if(null===t){let t=OX(e,r);return void(null!=t&&s.add(t))}LX(e)?(null==n||("keep"===n?!NX(e,t,r):"start"===r||n.id!==t.id))&&(AX(e,t,r,a),i.add(t.id)):(AX(e,t,r,a),i.add(t.id))}},IX=(e,t,n)=>["start","end"].map(r=>((e,t,n,r)=>{let i=eV(e,t,n),s="start"===t?e.startBinding?.elementId:e.endBinding?.elementId;if(s){let e=n.get(s);if(_O(e)&&sV(e,i,n,r))return e}return null})(e,r,t,n)),jX=(e,t,n,r,i,s,a)=>{e.forEach(e=>{let[o,l]=s?.length?((e,t,n,r,i,s)=>{let a=e.points.length-1,o=n.findIndex(e=>0===e)>-1,l=n.findIndex(e=>e===a)>-1;return[o?t?JX(e,"start",r,i,s):null:SO(e)?"keep":JX(e,"start",r,i,s),l?t?JX(e,"end",r,i,s):null:SO(e)?"keep":JX(e,"end",r,i,s)]})(e,i,s??[],t,n,a):((e,t,n,r,i)=>{if(SO(e))return["keep","keep"];let[s,a]=IX(e,t,i);return[s&&r?JX(e,"start",t,n,i):null,a&&r?JX(e,"end",t,n,i):null]})(e,t,n,i,a);_X(e,o,l,t,r)})},TX=(e,t,n)=>e.length>50?[]:e.filter(vO).flatMap(e=>IX(e,t,n)).filter(e=>null!==e).filter(t=>0===e.filter(e=>e.id===t?.id).length),RX=(e,t,n,r,i)=>{null!=t.startBoundElement&&AX(e,t.startBoundElement,"start",r);let s=FX(n,i,r,t.zoom,SO(e),SO(e));null!==s&&(NX(e,s,"end")||AX(e,s,"end",r))},PX=(e,t)=>{let n=e.gap;return n>aV(t,t.width,t.height)&&(n=14),{...e,gap:n}},AX=(e,t,n,r)=>{if(!wO(e))return;let i={elementId:t.id,...SO(e)?{...KX(e,t,n),focus:0,gap:0}:{...PX(HX(e,t,n,r),t)}};DK(e,{["start"===n?"startBinding":"endBinding"]:i}),DL(t.boundElements||[]).has(e.id)||DK(t,{boundElements:(t.boundElements||[]).concat({id:e.id,type:"arrow"})})},NX=(e,t,n)=>{let r=e["start"===n?"endBinding":"startBinding"];return DX(e,r?.elementId,t)},DX=(e,t,n)=>t===n.id&&LX(e),LX=e=>e.points.length<3,OX=(e,t)=>{let n="start"===t?"startBinding":"endBinding",r=e[n];return null==r?null:(DK(e,{[n]:null}),r.elementId)},FX=(e,t,n,r,i,s)=>{if(s){let s=!1,a=BX(t,t=>_O(t,!1)&&sV(t,e,n,r,(i||!AL(t))&&!UO(t))).filter(e=>!s&&(AL(e)||(s=!0),!0));if(!a||0===a.length)return null;if(1===a.length)return a[0];let o=a.filter(t=>sV(t,e,n,r,!1));return 1===o.length?o[0]:a.sort((e,t)=>t.width**2+t.height**2-(e.width**2+e.height**2)).pop()}return zX(t,t=>_O(t,!1)&&sV(t,e,n,r,(i||!AL(t))&&!UO(t)))},zX=(e,t)=>{let n=null;for(let r=e.length-1;r>=0;--r){let i=e[r];if(!i.isDeleted&&t(i)){n=i;break}}return n},BX=(e,t)=>{let n=[];for(let r=e.length-1;r>=0;--r){let i=e[r];i.isDeleted||t(i)&&n.push(i)}return n},HX=(e,t,n,r)=>{let i="start"===n?-1:1,s=-1===i?0:e.points.length-1,a=s-i,o=eG.getPointAtIndexGlobalCoordinates(e,s,r),l=eG.getPointAtIndexGlobalCoordinates(e,a,r);return{focus:oV(t,l,o),gap:Math.max(1,wX(t,o))}},$X=(e,t,n)=>{let{newSize:r,simultaneouslyUpdated:i}=n??{},s=XX(i);_O(e)&&dV(t,e,n=>{if(!vO(n)||n.isDeleted||!WX(n,e))return;let i=n.startBinding?t.get(n.startBinding.elementId):null,a=n.endBinding?t.get(n.endBinding.elementId):null,o=null,l=null;i&&a&&(o=mX(i,t),l=mX(a,t));let c={startBinding:QX(e,n.startBinding,r),endBinding:QX(e,n.endBinding,r)};if(s.has(n.id))return void DK(n,c,!0);let d=uV(t,n,(r,i)=>{if(r&&_O(r)&&("startBinding"===i||"endBinding"===i)&&(e.id===n[i]?.elementId||e.id===n["startBinding"===i?"endBinding":"startBinding"]?.elementId&&!((e,t)=>{if(null==e||null==t)return!1;let[n,r,i,s]=e,[a,o,l,c]=t;return n<l&&i>a&&r<c&&s>o})(o,l))){let e=ZX(n,i,c[i],r,t);if(e)return{index:"startBinding"===i?0:n.points.length-1,point:e}}return null}).filter(e=>null!==e);eG.movePoints(n,d,{...e.id===n.startBinding?.elementId?{startBinding:c.startBinding}:{},...e.id===n.endBinding?.elementId?{endBinding:c.endBinding}:{}});let u=dG(n,t);u&&!u.isDeleted&&oG(n,t,!1)})},WX=(e,t)=>e.startBinding?.elementId===t.id||e.endBinding?.elementId===t.id,XX=e=>new Set((e||[]).map(e=>e.id)),VX=(e,t,n,r)=>{let i=wX(t,e);return i>aV(t,t.width,t.height,r)?null:i},GX=(e,t,n)=>{let r=t&&nW(t),i=e.points["start"===n?0:e.points.length-1],s=PD(e.x+i[0],e.y+i[1]),a=(e=>null!=e&&("rectangle"===e.type||"diamond"===e.type||"image"===e.type||"iframe"===e.type||"embeddable"===e.type||"frame"===e.type||"magicframe"===e.type||"text"===e.type&&!e.containerId))(t)?qX(t,s):s;if(t&&r){let e=vX(r),n=U$(t,VD(e,ND(TD(RD(CD(a,e)),Math.max(t.width,t.height)),e)))[0],i=BD(a,e),s=Math.max(BD(n??a,e),1e-4),o=UD(i/s,6);return!0==o>.9?i-s>5||HD(a,n)<1e-4?a:ND(TD(RD(CD(a,n??e)),o>1?5:-5),n??e):YX(a,t,r)}return a},YX=(e,t,n)=>{let r=vX(n),i=zW(CD(e,r));switch(!0){case $W(i,OW):return OD(PD((n[0]+n[2])/2+.1,n[1]),r,t.angle);case $W(i,NW):return OD(PD(n[2],(n[1]+n[3])/2+.1),r,t.angle);case $W(i,DW):return OD(PD((n[0]+n[2])/2-.1,n[3]),r,t.angle);default:return OD(PD(n[0],(n[1]+n[3])/2-.1),r,t.angle)}},qX=(e,t)=>{let n=PD(e.x+e.width/2,e.y+e.height/2),r=OD(t,n,-e.angle);return r[0]<e.x&&r[1]<e.y?r[1]-e.y>-5?OD(PD(e.x-5,e.y),n,e.angle):OD(PD(e.x,e.y-5),n,e.angle):r[0]<e.x&&r[1]>e.y+e.height?r[0]-e.x>-5?OD(PD(e.x,e.y+e.height+5),n,e.angle):OD(PD(e.x-5,e.y+e.height),n,e.angle):r[0]>e.x+e.width&&r[1]>e.y+e.height?r[0]-e.x<e.width+5?OD(PD(e.x+e.width,e.y+e.height+5),n,e.angle):OD(PD(e.x+e.width+5,e.y+e.height),n,e.angle):r[0]>e.x+e.width&&r[1]<e.y?r[0]-e.x<e.width+5?OD(PD(e.x+e.width,e.y-5),n,e.angle):OD(PD(e.x+e.width+5,e.y),n,e.angle):t},ZX=(e,t,n,r,i)=>{if(null==n||n.elementId!==r.id&&e.points.length>2)return null;let s="startBinding"===t?-1:1,a=-1===s?0:e.points.length-1;if(SO(e)&&LO(n)){let s=gV(n.fixedPoint)??KX(e,r,"startBinding"===t?"start":"end").fixedPoint,a=PD(r.x+r.width/2,r.y+r.height/2),o=OD(PD(r.x+s[0]*r.width,r.y+s[1]*r.height),a,r.angle);return eG.pointFromAbsoluteCoords(e,o,i)}let o,l=a-s,c=eG.getPointAtIndexGlobalCoordinates(e,l,i),d=lV(r,n.focus,c);if(0===n.gap)o=d;else{let t=eG.getPointAtIndexGlobalCoordinates(e,a,i),s=PD(r.x+r.width/2,r.y+r.height/2),l=BD(c,t)+BD(c,s)+2*Math.max(r.width,r.height),u=U$(r,VD(c,ND(TD(RD(CD(d,c)),l),c)),n.gap).sort((e,t)=>HD(e,c)-HD(t,c));o=u.length>1?u[0]:1===u.length?d:t}return eG.pointFromAbsoluteCoords(e,o,i)},KX=(e,t,n,r)=>{let i=[t.x,t.y,t.x+t.width,t.y+t.height],s=OD(GX(e,t,n),PD(i[0]+(i[2]-i[0])/2,i[1]+(i[3]-i[1])/2),-t.angle);return{fixedPoint:gV([(s[0]-t.x)/t.width,(s[1]-t.y)/t.height])}},QX=(e,t,n)=>{if(null==t||null==n)return t;let{width:r,height:i}=n,{width:s,height:a}=e,o=Math.max(1,Math.min(aV(e,r,i),t.gap*(r<i?r/s:i/a)));return{...t,gap:o}},JX=(e,t,n,r,i)=>FX(eV(e,t,n),r,n,i,SO(e),SO(e)),eV=(e,t,n)=>{let r="start"===t?0:-1;return IL(eG.getPointAtIndexGlobalCoordinates(e,r,n))},tV=(e,t,n,r)=>{let i=new Set,s=new Set,a="duplicatesServeAsOld"===r,o=new Map([...n].map(([e,t])=>[t,e]));t.forEach(e=>{let{boundElements:t}=e;if(null!=t&&t.length>0&&(t.forEach(e=>{a&&!n.has(e.id)&&i.add(e.id)}),s.add(n.get(e.id))),kO(e)){if(null!=e.startBinding){let{elementId:t}=e.startBinding;a&&!n.has(t)&&s.add(t)}if(null!=e.endBinding){let{elementId:t}=e.endBinding;a&&!n.has(t)&&s.add(t)}(null!=e.startBinding||null!=e.endBinding)&&i.add(n.get(e.id))}}),e.filter(({id:e})=>i.has(e)).forEach(e=>{let{startBinding:t,endBinding:r}=e;DK(e,{startBinding:nV(t,n),endBinding:nV(r,n)})}),e.filter(({id:e})=>s.has(e)).forEach(t=>{let r=o.get(t.id),i=e.find(({id:e})=>e===r)?.boundElements;i&&i.length>0&&DK(t,{boundElements:i.map(e=>n.has(e.id)?{id:n.get(e.id),type:e.type}:e)})})},nV=(e,t)=>null==e?null:{...e,elementId:t.get(e.elementId)??e.elementId},rV=(e,t)=>{let n=DL(e);for(let r of t)hV.unbindAffected(n,r,DK),pV.unbindAffected(n,r,DK)},iV=(e,t,n=[])=>{if(!e)return null;let r=e.filter(e=>!t.has(e.id));return r.push(...n.map(e=>({id:e.id,type:e.type}))),r},sV=(e,{x:t,y:n},r,i,s)=>{let a=aV(e,e.width,e.height,i),o=K$(e,r);return s$(PD(t,n),o,a)||!0===s&&rW(PD(t,n),nW(e))},aV=(e,t,n,r)=>{let i=r?.value&&r.value<1?r.value:1,s=("diamond"===e.type?1/Math.sqrt(2):1)*Math.min(t,n);return Math.max(16,Math.min(.25*s,32),10/i+4)},oV=(e,t,n)=>{let r=PD(e.x+e.width/2,e.y+e.height/2);if(LD(t,n))return 0;let i=OD(t,r,-e.angle),s=OD(n,r,-e.angle),a=-1*Math.sign(_D(CD(s,t),CD(s,r))),o=VD(s,ND(TD(RD(CD(s,i)),Math.max(2*e.width,2*e.height)),s)),l="diamond"===e.type?[VD(PD(e.x+e.width/2,e.y),PD(e.x+e.width/2,e.y+e.height)),VD(PD(e.x,e.y+e.height/2),PD(e.x+e.width,e.y+e.height/2))]:[VD(PD(e.x,e.y),PD(e.x+e.width,e.y+e.height)),VD(PD(e.x+e.width,e.y),PD(e.x,e.y+e.height))],c="diamond"===e.type?[VD(PD(e.x+e.width/2,e.y-e.height),PD(e.x+e.width/2,e.y+2*e.height)),VD(PD(e.x-e.width,e.y+e.height/2),PD(e.x+2*e.width,e.y+e.height/2))]:[VD(PD(e.x-e.width,e.y-e.height),PD(e.x+2*e.width,e.y+2*e.height)),VD(PD(e.x+2*e.width,e.y-e.height),PD(e.x-e.width,e.y+2*e.height))];return[qD(o,c[0]),qD(o,c[1])].filter(e=>null!==e).sort((e,t)=>HD(e,n)-HD(t,n)).map((t,n)=>a*BD(r,t)/("diamond"===e.type?BD(l[n][0],l[n][1])/2:Math.sqrt(e.width**2+e.height**2)/2)).sort((e,t)=>Math.abs(e)-Math.abs(t))[0]??0},lV=(e,t,n)=>{let r=PD(e.x+e.width/2,e.y+e.height/2);if(0===t)return r;let i=("diamond"===e.type?[PD(e.x,e.y+e.height/2),PD(e.x+e.width/2,e.y),PD(e.x+e.width,e.y+e.height/2),PD(e.x+e.width/2,e.y+e.height)]:[PD(e.x,e.y),PD(e.x+e.width,e.y),PD(e.x+e.width,e.y+e.height),PD(e.x,e.y+e.height)]).map(e=>ND(TD(CD(e,r),Math.abs(t)),r)).map(t=>OD(t,r,e.angle)),s=[_D(CD(n,i[0]),CD(i[1],i[0]))>0&&(t>0?_D(CD(n,i[1]),CD(i[2],i[1]))<0:_D(CD(n,i[3]),CD(i[0],i[3]))<0),_D(CD(n,i[1]),CD(i[2],i[1]))>0&&(t>0?_D(CD(n,i[2]),CD(i[3],i[2]))<0:_D(CD(n,i[0]),CD(i[1],i[0]))<0),_D(CD(n,i[2]),CD(i[3],i[2]))>0&&(t>0?_D(CD(n,i[3]),CD(i[0],i[3]))<0:_D(CD(n,i[1]),CD(i[2],i[1]))<0),_D(CD(n,i[3]),CD(i[0],i[3]))>0&&(t>0?_D(CD(n,i[0]),CD(i[1],i[0]))<0:_D(CD(n,i[2]),CD(i[3],i[2]))<0)];return s[0]?t>0?i[1]:i[0]:s[1]?t>0?i[2]:i[1]:s[2]?t>0?i[3]:i[2]:t>0?i[0]:i[3]},cV=new Set(["boundElements","frameId","containerId","startBinding","endBinding"]),dV=(e,t,n)=>{_O(t)&&(t.boundElements?.slice()??[]).forEach(({id:t})=>{n(e.get(t),"boundElements",t)})},uV=(e,t,n)=>{let r=[];if(t.frameId){let i=t.frameId;r.push(n(e.get(i),"frameId",i))}if(RO(t)){let i=t.containerId;r.push(n(e.get(i),"containerId",i))}if(wO(t)){if(t.startBinding){let i=t.startBinding.elementId;r.push(n(e.get(i),"startBinding",i))}if(t.endBinding){let i=t.endBinding.elementId;r.push(n(e.get(i),"endBinding",i))}}return r},hV=class{static unbindAffected(e,t,n){t&&uV(e,t,r=>{!r||r.isDeleted||dV(e,r,(e,i,s)=>{s===t.id&&n(r,{boundElements:iV(r.boundElements,new Set([s]))})})})}};XM(hV,"rebindAffected",(e,t,n)=>{!t||t.isDeleted||uV(e,t,(e,r)=>{e&&!e.isDeleted?"frameId"!==r&&(e.boundElements?.find(e=>e.id===t.id)||(wO(t)&&n(e,{boundElements:iV(e.boundElements,new Set,new Array(t))}),mO(t)&&(e.boundElements?.find(e=>"text"===e.type)?n(t,{[r]:null}):n(e,{boundElements:iV(e.boundElements,new Set,new Array(t))})))):n(t,{[r]:null})})});var pV=class{static unbindAffected(e,t,n){t&&dV(e,t,r=>{!r||r.isDeleted||uV(e,r,(e,i,s)=>{s===t.id&&n(r,{[i]:null})})})}};XM(pV,"rebindAffected",(e,t,n)=>{!t||t.isDeleted||dV(e,t,(e,r,i)=>{e&&!e.isDeleted?mO(e)&&((t.boundElements?.slice()??[]).reverse().find(e=>"text"===e.type)?.id===e.id?e.containerId!==t.id&&n(e,{containerId:t.id}):(null!==e.containerId&&n(e,{containerId:null}),n(t,{boundElements:iV(t.boundElements,new Set([e.id]))}))):n(t,{boundElements:iV(t.boundElements,new Set([i]))})})});var fV=(e,t)=>{let[n,r]=gV(e);return OD(PD(t.x+t.width*n,t.y+t.height*r),PD(t.x+t.width/2,t.y+t.height/2),t.angle)},mV=(e,t)=>{let[n,r]=((e,t)=>{let n=e.startBinding&&t.get(e.startBinding.elementId),r=e.endBinding&&t.get(e.endBinding.elementId);return[n&&e.startBinding?fV(e.startBinding.fixedPoint,n):PD(e.x+e.points[0][0],e.y+e.points[0][1]),r&&e.endBinding?fV(e.endBinding.fixedPoint,r):PD(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1])]})(e,t);return[eG.pointFromAbsoluteCoords(e,n,t),eG.pointFromAbsoluteCoords(e,r,t)]},gV=e=>e&&(Math.abs(e[0]-.5)<1e-4||Math.abs(e[1]-.5)<1e-4)?e.map(e=>Math.abs(e-.5)<1e-4?.5001:e):e,bV=({scenePoint:e,viewportDimensions:t,zoom:n,offsets:r})=>{let i=(t.width-(r?.right??0))/2/n.value-e.x;i+=(r?.left??0)/2/n.value;let s=(t.height-(r?.bottom??0))/2/n.value-e.y;return s+=(r?.top??0)/2/n.value,{scrollX:i,scrollY:s}},UV=(e,t)=>{if(!(e=vQ(e)).length)return{scrollX:0,scrollY:0};let[n,r,i,s]=gX(e);return((e,t)=>{let[n,r,i,s]=t,{x:a,y:o}=kL({sceneX:n,sceneY:r},e),{x:l,y:c}=kL({sceneX:i,sceneY:s},e);return l-a>e.width||c-o>e.height})(t,[n,r,i,s])&&([n,r,i,s]=((e,t)=>{if(!e.length)return[0,0,0,0];let n=1/0,r=e[0],i=DL(e);return e.forEach(e=>{let[s,a,o,l]=mX(e,i),c=BD(PD((s+o)/2,(a+l)/2),PD(t.x,t.y));c<n&&(n=c,r=e)}),mX(r,i)})(e,EL({clientX:t.scrollX,clientY:t.scrollY},t))),bV({scenePoint:{x:(n+i)/2,y:(r+s)/2},viewportDimensions:{width:t.width,height:t.height},zoom:t.zoom})},yV=e=>bD(UD(e,6),.1,30),xV=e=>bD(Math.round(e),1,100),vV=e=>bD(Math.round(e),1,100),wV=(e,t,n)=>{let r=n.reduce((t,n)=>(n.groupIds.includes(e)&&(t[n.id]=!0),t),{});return Object.keys(r).length<2?t.selectedGroupIds[e]||t.editingGroupId===e?{selectedElementIds:t.selectedElementIds,selectedGroupIds:{...t.selectedGroupIds,[e]:!1},editingGroupId:null}:t:{editingGroupId:t.editingGroupId,selectedGroupIds:{...t.selectedGroupIds,[e]:!0},selectedElementIds:{...t.selectedElementIds,...r}}},SV=function(){let e=null,t=null,n=null,r=(r,i,s,a)=>{let o=a?a.scene.getSelectedElements({selectedElementIds:r.selectedElementIds,elements:i}):MK(i,r);return o.length?((r,i,s,a)=>{if(void 0!==n&&i===t&&r===e&&s.editingGroupId===n?.editingGroupId)return n;let o={};for(let e of r){let t=e.groupIds;if(s.editingGroupId){let e=t.indexOf(s.editingGroupId);e>-1&&(t=t.slice(0,e))}if(t.length>0){let e=t[t.length-1];o[e]=!0}}let l={},c=i.reduce((e,t)=>{if(t.isDeleted)return e;let n=t.groupIds.find(e=>o[e]);return n&&(e[t.id]=!0,Array.isArray(l[n])?l[n].push(t.id):l[n]=[t.id]),e},{});for(let e of Object.keys(l))l[e].length<2&&o[e]&&(o[e]=!1);return t=i,e=r,n={editingGroupId:s.editingGroupId,selectedGroupIds:o,selectedElementIds:jK({...s.selectedElementIds,...c},a)},n})(o,i,r,s):{selectedGroupIds:{},editingGroupId:null,selectedElementIds:jK(r.selectedElementIds,s)}};return r.clearCache=()=>{t=null,e=null,n=null},r}(),EV=(e,t)=>null!=kV(e,t),kV=(e,t)=>t.groupIds.filter(t=>t!==e.editingGroupId).find(t=>e.selectedGroupIds[t]),CV=e=>Object.entries(e.selectedGroupIds).filter(([e,t])=>t).map(([e,t])=>e),_V=(e,t)=>{let n={...t,selectedGroupIds:{}};for(let r of e){let i=r.groupIds;if(t.editingGroupId){let e=i.indexOf(t.editingGroupId);e>-1&&(i=i.slice(0,e))}if(i.length>0){let t=i[i.length-1];n={...n,...wV(t,n,e)}}}return n.selectedGroupIds},MV=(e,t)=>({...e,editingGroupId:t.groupIds.length?t.groupIds[0]:null,selectedGroupIds:{},selectedElementIds:{[t.id]:!0}}),IV=(e,t)=>e.groupIds.includes(t),jV=(e,t)=>{let n=[];for(let r of e.values())IV(r,t)&&n.push(r);return n},TV=(e,t,n)=>{let r=[...e],i=n?r.indexOf(n):-1,s=i>-1?i:r.length;return r.splice(s,0,t),r},RV=(e,t)=>{let n=new Map;return e.forEach(e=>{let r=0===e.groupIds.length?e.id:e.groupIds[e.groupIds.length-1],i=n.get(r)||[],s=dG(e,t);s&&i.push(s),n.set(r,[...i,e])}),Array.from(n.values())},PV=e=>{let t=e.flatMap(e=>e.groupIds),n=new Map,r=0;for(let i of t)n.set(i,(n.get(i)??0)+1),n.get(i)>r&&(r=n.get(i));return r===e.length},AV=e=>e.groupIds.length>0,NV=e=>8/e,DV=class{};XM(DV,"referenceSnapPoints",null),XM(DV,"visibleGaps",null),XM(DV,"setReferenceSnapPoints",e=>{DV.referenceSnapPoints=e}),XM(DV,"getReferenceSnapPoints",()=>DV.referenceSnapPoints),XM(DV,"setVisibleGaps",e=>{DV.visibleGaps=e}),XM(DV,"getVisibleGaps",()=>DV.visibleGaps),XM(DV,"destroy",()=>{DV.referenceSnapPoints=null,DV.visibleGaps=null});var LV=DV,OV=e=>e.props.gridModeEnabled??e.state.gridModeEnabled,FV=({event:e,app:t,selectedElements:n})=>e?t.state.objectsSnapModeEnabled&&!e[$$.CTRL_OR_CMD]||!t.state.objectsSnapModeEnabled&&e[$$.CTRL_OR_CMD]&&!OV(t):(1!==n.length||"arrow"!==n[0].type)&&t.state.objectsSnapModeEnabled,zV=(e,t,{omitCenter:n,boundingBoxCorners:r,dragOffset:i}={omitCenter:!1,boundingBoxCorners:!1})=>{let s=[];if(1===e.length){let a=e[0],[o,l,c,d,u,h]=sX(a,t);i&&(o+=i.x,c+=i.x,u+=i.x,l+=i.y,d+=i.y,h+=i.y);let p=(c-o)/2,f=(d-l)/2;if("diamond"!==a.type&&"ellipse"!==a.type||r){let e=OD(PD(o,l),PD(u,h),a.angle),t=OD(PD(c,l),PD(u,h),a.angle),r=OD(PD(o,d),PD(u,h),a.angle),i=OD(PD(c,d),PD(u,h),a.angle),p=PD(u,h);s=n?[e,t,r,i]:[e,t,r,i,p]}else{let e=OD(PD(o,l+f),PD(u,h),a.angle),t=OD(PD(o+p,l),PD(u,h),a.angle),r=OD(PD(c,l+f),PD(u,h),a.angle),i=OD(PD(o+p,d),PD(u,h),a.angle),m=PD(u,h);s=n?[e,t,r,i]:[e,t,r,i,m]}}else if(e.length>1){let[t,r,a,o]=bX(e,i??{x:0,y:0}),l=a-t,c=o-r,d=PD(t,r),u=PD(a,r),h=PD(t,o),p=PD(a,o),f=PD(t+l/2,r+c/2);s=n?[d,u,h,p]:[d,u,h,p,f]}return s.map(e=>PD(WV(e[0]),WV(e[1])))},BV=(e,t,n,r)=>{let i=t.filter(e=>UO(e)).map(e=>e.id);return CK(e,t,n,r).filter(e=>!(e.frameId&&i.includes(e.frameId)))},HV=(e,t,n,r,i,s,a)=>{if(!FV({app:n,event:r,selectedElements:e}))return[];if(0===e.length)return[];let o=LV.getVisibleGaps();if(o){let{horizontalGaps:n,verticalGaps:r}=o,[l,c,d,u]=bX(e,t).map(e=>WV(e)),h=(l+d)/2,p=(c+u)/2;for(let e of n){if(!oL(aL(c,u),e.overlap))continue;let t=e.startSide[0][0]+e.length/2,n=WV(t-h);if(e.length>d-l&&Math.abs(n)<=a.x){Math.abs(n)<a.x&&(i.length=0),a.x=Math.abs(n);let t={type:"gap",direction:"center_horizontal",gap:e,offset:n};i.push(t);continue}let[,,r]=e.endBounds,s=l-r,o=WV(e.length-s);if(Math.abs(o)<=a.x){Math.abs(o)<a.x&&(i.length=0),a.x=Math.abs(o);let t={type:"gap",direction:"side_right",gap:e,offset:o};i.push(t);continue}let[p,,,]=e.startBounds,f=WV(p-d-e.length);if(Math.abs(f)<=a.x){Math.abs(f)<a.x&&(i.length=0),a.x=Math.abs(f);let t={type:"gap",direction:"side_left",gap:e,offset:f};i.push(t);continue}}for(let e of r){if(!oL(aL(l,d),e.overlap))continue;let t=e.startSide[0][1]+e.length/2,n=WV(t-p);if(e.length>u-c&&Math.abs(n)<=a.y){Math.abs(n)<a.y&&(s.length=0),a.y=Math.abs(n);let t={type:"gap",direction:"center_vertical",gap:e,offset:n};s.push(t);continue}let[,r,,]=e.startBounds,i=WV(r-u-e.length);if(Math.abs(i)<=a.y){Math.abs(i)<a.y&&(s.length=0),a.y=Math.abs(i);let t={type:"gap",direction:"side_top",gap:e,offset:i};s.push(t);continue}let[,,,o]=e.endBounds,h=WV(c-o),f=e.length-h;if(Math.abs(f)<=a.y){Math.abs(f)<a.y&&(s.length=0),a.y=Math.abs(f);let t={type:"gap",direction:"side_bottom",gap:e,offset:f};s.push(t);continue}}}},$V=(e,t,n,r,i,s,a)=>{if(!FV({app:n,event:r,selectedElements:e})||0===e.length&&0===t.length)return[];let o=LV.getReferenceSnapPoints();if(o)for(let l of t)for(let e of o){let t=e[0]-l[0],n=e[1]-l[1];Math.abs(t)<=a.x&&(Math.abs(t)<a.x&&(i.length=0),i.push({type:"point",points:[l,e],offset:t}),a.x=Math.abs(t)),Math.abs(n)<=a.y&&(Math.abs(n)<a.y&&(s.length=0),s.push({type:"point",points:[l,e],offset:n}),a.y=Math.abs(n))}},WV=e=>Math.round(e*10**6)/10**6,XV=e=>{let t=new Map;for(let n of e){let e=n.join(",");t.has(e)||t.set(e,n)}return Array.from(t.values())},VV=(e,t)=>{let n={},r={};if(e.length>0)for(let i of e)if("point"===i.type){let e=WV(i.points[0][0]);n[e]||(n[e]=[]),n[e].push(...i.points.map(e=>PD(WV(e[0]),WV(e[1]))))}if(t.length>0)for(let i of t)if("point"===i.type){let e=WV(i.points[0][1]);r[e]||(r[e]=[]),r[e].push(...i.points.map(e=>PD(WV(e[0]),WV(e[1]))))}return Object.entries(n).map(([e,t])=>({type:"points",points:XV(t.map(t=>PD(Number(e),t[1])).sort((e,t)=>e[1]-t[1]))})).concat(Object.entries(r).map(([e,t])=>({type:"points",points:XV(t.map(t=>PD(t[0],Number(e))).sort((e,t)=>e[0]-t[0]))})))},GV=(e,t,n)=>{let[r,i,s,a]=bX(e,t),o=[];for(let l of n){let[e,t,n,c]=l.gap.startBounds,[d,u,h,p]=l.gap.endBounds,f=lL(aL(i,a),l.gap.overlap),m=lL(aL(r,s),l.gap.overlap);switch(l.direction){case"center_horizontal":if(f){let e=(f[0]+f[1])/2;o.push({type:"gap",direction:"horizontal",points:[PD(l.gap.startSide[0][0],e),PD(r,e)]},{type:"gap",direction:"horizontal",points:[PD(s,e),PD(l.gap.endSide[0][0],e)]})}break;case"center_vertical":if(m){let e=(m[0]+m[1])/2;o.push({type:"gap",direction:"vertical",points:[PD(e,l.gap.startSide[0][1]),PD(e,i)]},{type:"gap",direction:"vertical",points:[PD(e,a),PD(e,l.gap.endSide[0][1])]})}break;case"side_right":if(f){let e=(f[0]+f[1])/2;o.push({type:"gap",direction:"horizontal",points:[PD(n,e),PD(d,e)]},{type:"gap",direction:"horizontal",points:[PD(h,e),PD(r,e)]})}break;case"side_left":if(f){let t=(f[0]+f[1])/2;o.push({type:"gap",direction:"horizontal",points:[PD(s,t),PD(e,t)]},{type:"gap",direction:"horizontal",points:[PD(n,t),PD(d,t)]})}break;case"side_top":if(m){let e=(m[0]+m[1])/2;o.push({type:"gap",direction:"vertical",points:[PD(e,a),PD(e,t)]},{type:"gap",direction:"vertical",points:[PD(e,c),PD(e,u)]})}break;case"side_bottom":if(m){let e=(m[0]+m[1])/2;o.push({type:"gap",direction:"vertical",points:[PD(e,c),PD(e,u)]},{type:"gap",direction:"vertical",points:[PD(e,p),PD(e,i)]})}}}return(e=>{let t=new Map;for(let n of e){let e=n.points.flat().map(e=>[WV(e)]).join(",");t.has(e)||t.set(e,n)}return Array.from(t.values())})(o.map(e=>({...e,points:e.points.map(e=>PD(WV(e[0]),WV(e[1])))})))},YV=(e,t,n,r,i,s)=>{if(!FV({event:r,selectedElements:e,app:n})||0===e.length||1===e.length&&!((e,t,n=.01)=>Math.abs(e-t)<=n)(e[0].angle,0))return{snapOffset:{x:0,y:0},snapLines:[]};let[a,o,l,c]=gX(t);s&&(s.includes("e")?l+=i.x:s.includes("w")&&(a+=i.x),s.includes("n")?o+=i.y:s.includes("s")&&(c+=i.y));let d=[];if(s)switch(s){case"e":d.push(PD(l,o),PD(l,c));break;case"w":d.push(PD(a,o),PD(a,c));break;case"n":d.push(PD(a,o),PD(l,o));break;case"s":d.push(PD(a,c),PD(l,c));break;case"ne":d.push(PD(l,o));break;case"nw":d.push(PD(a,o));break;case"se":d.push(PD(l,c));break;case"sw":d.push(PD(a,c))}let u=NV(n.state.zoom.value),h={x:u,y:u},p=[],f=[];$V(t,d,n,r,p,f,h);let m={x:p[0]?.offset??0,y:f[0]?.offset??0};h.x=0,h.y=0,p.length=0,f.length=0;let[g,b,U,y]=gX(e).map(e=>WV(e)),x=[PD(g,b),PD(g,y),PD(U,b),PD(U,y)];return $V(e,x,n,r,p,f,h),{snapOffset:m,snapLines:VV(p,f)}},qV=(e,t,n)=>n?[Math.round(e/n)*n,Math.round(t/n)*n]:[e,t],ZV={version:null,points:[],zoom:null},KV=class e{constructor(e){XM(this,"elementId"),XM(this,"selectedPointsIndices"),XM(this,"pointerDownState"),XM(this,"isDragging"),XM(this,"lastUncommittedPoint"),XM(this,"pointerOffset"),XM(this,"startBindingElement"),XM(this,"endBindingElement"),XM(this,"hoverPointIndex"),XM(this,"segmentMidPointHoveredCoords"),XM(this,"elbowed"),this.elementId=e.id,LD(e.points[0],PD(0,0)),this.selectedPointsIndices=null,this.lastUncommittedPoint=null,this.isDragging=!1,this.pointerOffset={x:0,y:0},this.startBindingElement="keep",this.endBindingElement="keep",this.pointerDownState={prevSelectedPointsIndices:null,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:null,segmentMidpoint:{value:null,index:null,added:!1}},this.hoverPointIndex=-1,this.segmentMidPointHoveredCoords=null,this.elbowed=SO(e)&&e.elbowed}static getElement(e,t){return t.get(e)||null}static handleBoxSelection(t,n,r,i){if(!n.editingLinearElement||!n.selectionElement)return!1;let{editingLinearElement:s}=n,{selectedPointsIndices:a,elementId:o}=s,l=e.getElement(o,i);if(!l)return!1;let[c,d,u,h]=sX(n.selectionElement,i),p=e.getPointsGlobalCoordinates(l,i).reduce((e,n,r)=>((n[0]>=c&&n[0]<=u&&n[1]>=d&&n[1]<=h||t.shiftKey&&a?.includes(r))&&e.push(r),e),[]).filter(e=>!(SO(l)&&0!==e&&e!==l.points.length-1));r({editingLinearElement:{...s,selectedPointsIndices:p.length?p:null}})}static handlePointDragging(t,n,r,i,s,a,o){if(!a)return!1;let{elementId:l}=a,c=o.getNonDeletedElementsMap(),d=e.getElement(l,c);if(!d||SO(d)&&!a.pointerDownState.lastClickedIsEndPoint&&0!==a.pointerDownState.lastClickedPoint)return!1;let u=SO(d)?a.selectedPointsIndices?.reduce((e,t)=>0===t?[0,e[1]]:[e[0],d.points.length-1],[!1,!1]).filter(e=>"number"==typeof e):a.selectedPointsIndices,h=SO(d)?a.pointerDownState.lastClickedPoint>0?d.points.length-1:0:a.pointerDownState.lastClickedPoint,p=d.points[h];if(u&&p){if(q$(t)&&1===u.length&&d.points.length>1){let s=u[0],a=d.points[0===s?1:s-1],[o,l]=e._getShiftLockedDelta(d,c,a,PD(r,i),t[$$.CTRL_OR_CMD]?null:n.getEffectiveGridSize());e.movePoints(d,[{index:s,point:PD(o+a[0],l+a[1]),isDragging:s===h}])}else{let s=e.createPointAt(d,c,r-a.pointerOffset.x,i-a.pointerOffset.y,t[$$.CTRL_OR_CMD]?null:n.getEffectiveGridSize()),o=s[0]-p[0],l=s[1]-p[1];e.movePoints(d,u.map(s=>({index:s,point:s===h?e.createPointAt(d,c,r-a.pointerOffset.x,i-a.pointerOffset.y,t[$$.CTRL_OR_CMD]?null:n.getEffectiveGridSize()):PD(d.points[s][0]+o,d.points[s][1]+l),isDragging:s===h})))}if(dG(d,c)&&oG(d,c,!1),kO(d,!1)){let t=[];0===u[0]&&t.push(IL(e.getPointGlobalCoordinates(d,d.points[0],c)));let n=u[u.length-1];n===d.points.length-1&&t.push(IL(e.getPointGlobalCoordinates(d,d.points[n],c))),t.length&&s(d,t)}return!0}return!1}static handlePointerUp(t,n,r,i){let s=i.getNonDeletedElementsMap(),a=i.getNonDeletedElements(),{elementId:o,selectedPointsIndices:l,isDragging:c,pointerDownState:d}=n,u=e.getElement(o,s);if(!u)return n;let h={};if(c&&l)for(let p of l)if(0===p||p===u.points.length-1){sW(u.points,r.zoom.value)&&e.movePoints(u,[{index:p,point:0===p?u.points[u.points.length-1]:u.points[0]}]);let t=CX(r)?FX(IL(e.getPointAtIndexGlobalCoordinates(u,p,s)),a,s,r.zoom,SO(u),SO(u)):null;h[0===p?"startBindingElement":"endBindingElement"]=t}return{...n,...h,selectedPointsIndices:c||t.shiftKey?!c&&t.shiftKey&&d.prevSelectedPointsIndices?.includes(d.lastClickedPoint)?l&&l.filter(e=>e!==d.lastClickedPoint):l:l?.includes(d.lastClickedPoint)?[d.lastClickedPoint]:l,isDragging:!1,pointerOffset:{x:0,y:0}}}static isSegmentTooShort(t,n,r,i,s){if(SO(t))return i>=0&&i<t.points.length&&BD(n,r)*s.value<e.POINT_HANDLE_SIZE/2;let a=BD(n,r);return t.points.length>2&&t.roundness&&(a=((e,t)=>tW(e,t).at(-1))(t,r)),a*s.value<4*e.POINT_HANDLE_SIZE}static getSegmentMidPoint(t,n,r,i,s){let a=zD(n,r);if(t.points.length>2&&t.roundness){let n=J$(t,t.points[i]);if(n){let r=((e,t,n)=>{let r=tW(e,t),i=r.length-1,s=n*r.at(-1),a=0,o=i,l=0;for(;a<o;)l=Math.floor(a+(o-a)/2),r[l]<s?a=l+1:o=l;return r[l]>s&&l--,r[l]===s?l/i:1-(l+(s-r[l])/(r[l+1]-r[l]))/i})(t,t.points[i],.5);a=e.getPointGlobalCoordinates(t,eW(n[0],n[1],n[2],n[3],r),s)}}return a}static getSegmentMidPointIndex(t,n,r,i){let s=e.getElement(t.elementId,i);if(!s)return-1;let a=e.getEditorMidPoints(s,i,n),o=0;for(;o<a.length;){if(e.arePointsEqual(r,a[o]))return o+1;o++}return-1}static handlePointerDown(t,n,r,i,s,a){let o=n.state,l=a.getNonDeletedElementsMap(),c=a.getNonDeletedElements(),d={didAddPoint:!1,hitElement:null,linearElementEditor:null};if(!s)return d;let{elementId:u}=s,h=e.getElement(u,l);if(!h)return d;let p=e.getSegmentMidpointHitCoords(s,i,o,l),f=null;if(p)f=e.getSegmentMidPointIndex(s,o,p,l);else if(t.altKey&&o.editingLinearElement)return null==s.lastUncommittedPoint&&(DK(h,{points:[...h.points,e.createPointAt(h,l,i.x,i.y,t[$$.CTRL_OR_CMD]?null:n.getEffectiveGridSize())]}),d.didAddPoint=!0),r.shouldCaptureIncrement(),d.linearElementEditor={...s,pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:{x:i.x,y:i.y},segmentMidpoint:{value:p,index:f,added:!1}},selectedPointsIndices:[h.points.length-1],lastUncommittedPoint:null,endBindingElement:FX(i,c,l,n.state.zoom,s.elbowed)},d.didAddPoint=!0,d;let m=e.getPointIndexUnderCursor(h,l,o.zoom,i.x,i.y);if(m>=0||p)d.hitElement=h;else{let{startBindingElement:e,endBindingElement:t}=s;CX(o)&&kO(h)&&_X(h,e,t,l,a)}let[g,b,U,y]=sX(h,l),x=(g+U)/2,v=(b+y)/2,w=m>-1&&OD(PD(h.x+h.points[m][0],h.y+h.points[m][1]),PD(x,v),h.angle),S=m>-1||t.shiftKey?t.shiftKey||s.selectedPointsIndices?.includes(m)?tG([...s.selectedPointsIndices||[],m]):[m]:null;return d.linearElementEditor={...s,pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:m,lastClickedIsEndPoint:m===h.points.length-1,origin:{x:i.x,y:i.y},segmentMidpoint:{value:p,index:f,added:!1}},selectedPointsIndices:S,pointerOffset:w?{x:i.x-w[0],y:i.y-w[1]}:{x:0,y:0}},d}static arePointsEqual(e,t){return!e&&!t||!(!e||!t)&&LD(e,t)}static handlePointerMove(t,n,r,i,s){let a=i.state;if(!a.editingLinearElement)return null;let{elementId:o,lastUncommittedPoint:l}=a.editingLinearElement,c=e.getElement(o,s);if(!c)return a.editingLinearElement;let d,{points:u}=c,h=u[u.length-1];if(!t.altKey)return h===l&&e.deletePoints(c,[u.length-1]),{...a.editingLinearElement,lastUncommittedPoint:null};if(q$(t)&&u.length>=2){let a=u[u.length-2],[o,l]=e._getShiftLockedDelta(c,s,a,PD(n,r),t[$$.CTRL_OR_CMD]?null:i.getEffectiveGridSize());d=PD(o+a[0],l+a[1])}else d=e.createPointAt(c,s,n-a.editingLinearElement.pointerOffset.x,r-a.editingLinearElement.pointerOffset.y,t[$$.CTRL_OR_CMD]||SO(c)?null:i.getEffectiveGridSize());return h===l?e.movePoints(c,[{index:c.points.length-1,point:d}]):e.addPoints(c,[{point:d}]),{...a.editingLinearElement,lastUncommittedPoint:c.points[c.points.length-1]}}static getPointGlobalCoordinates(e,t,n){let[r,i,s,a]=sX(e,n),o=(r+s)/2,l=(i+a)/2,{x:c,y:d}=e;return OD(PD(c+t[0],d+t[1]),PD(o,l),e.angle)}static getPointsGlobalCoordinates(e,t){let[n,r,i,s]=sX(e,t),a=(n+i)/2,o=(r+s)/2;return e.points.map(t=>{let{x:n,y:r}=e;return OD(PD(n+t[0],r+t[1]),PD(a,o),e.angle)})}static getPointAtIndexGlobalCoordinates(e,t,n){let r=t<0?e.points.length+t:t,[i,s,a,o]=sX(e,n),l=(i+a)/2,c=(s+o)/2,d=e.points[r],{x:u,y:h}=e;return OD(d?PD(u+d[0],h+d[1]):PD(u,h),PD(l,c),e.angle)}static pointFromAbsoluteCoords(e,t,n){if(SO(e))return PD(t[0]-e.x,t[1]-e.y);let[r,i,s,a]=sX(e,n),o=(r+s)/2,l=(i+a)/2,[c,d]=OD(PD(t[0],t[1]),PD(o,l),-e.angle);return PD(c-e.x,d-e.y)}static getPointIndexUnderCursor(t,n,r,i,s){let a=e.getPointsGlobalCoordinates(t,n),o=a.length;for(;--o>-1;){let t=a[o];if(BD(PD(i,s),PD(t[0],t[1]))*r.value<e.POINT_HANDLE_SIZE+1)return o}return-1}static createPointAt(e,t,n,r,i){let s=qV(n,r,i),[a,o,l,c]=sX(e,t),d=(a+l)/2,u=(o+c)/2,[h,p]=OD(PD(s[0],s[1]),PD(d,u),-e.angle);return PD(h-e.x,p-e.y)}static getNormalizedPoints(e){let{points:t}=e,n=t[0][0],r=t[0][1];return{points:t.map(e=>PD(e[0]-n,e[1]-r)),x:e.x+n,y:e.y+r}}static normalizePoints(t){DK(t,e.getNormalizedPoints(t))}static duplicateSelectedPoints(t,n){YL(t.editingLinearElement,"Not currently editing a linear element");let{selectedPointsIndices:r,elementId:i}=t.editingLinearElement,s=e.getElement(i,n);YL(s,"The linear element does not exist in the provided Scene"),YL(null!=r,"There are no selected points to duplicate");let{points:a}=s,o=[],l=!1,c=-1,d=a.reduce((e,t,n)=>{if(++c,e.push(t),r.includes(n)){let r=a[n+1];r||(l=!0),e.push(r?PD((t[0]+r[0])/2,(t[1]+r[1])/2):PD(t[0],t[1])),o.push(c+1),++c}return e},[]);if(DK(s,{points:d}),l){let t=s.points[s.points.length-1];e.movePoints(s,[{index:s.points.length-1,point:PD(t[0]+30,t[1]+30)}])}return{...t,editingLinearElement:{...t.editingLinearElement,selectedPointsIndices:o}}}static deletePoints(t,n){let r=0,i=0;if(n.includes(0)){let e=t.points.find((e,t)=>!n.includes(t));e&&(r=e[0],i=e[1])}let s=t.points.reduce((e,t,s)=>(n.includes(s)||e.push(e.length?PD(t[0]-r,t[1]-i):PD(0,0)),e),[]);e._updatePoints(t,s,r,i)}static addPoints(t,n){let r=[...t.points,...n.map(e=>e.point)];e._updatePoints(t,r,0,0)}static movePoints(t,n,r){let{points:i}=t,[s,a]=n.find(({index:e})=>0===e)?.point??PD(0,0),[o,l]=PD(s-i[0][0],a-i[0][1]),c=SO(t)?[n.find(e=>0===e.index)?.point??i[0],n.find(e=>e.index===i.length-1)?.point??i[i.length-1]]:i.map((e,t)=>{let r=n.find(e=>e.index===t)?.point??e;return PD(r[0]-o,r[1]-l)});e._updatePoints(t,c,o,l,r,{isDragging:n.reduce((e,t)=>e||!0===t.isDragging,!1)})}static shouldAddMidpoint(t,n,r,i){let s=e.getElement(t.elementId,i);if(s&&SO(s)||!s)return!1;let{segmentMidpoint:a}=t.pointerDownState;if(a.added||null===a.value||null===a.index||null===t.pointerDownState.origin)return!1;let o=t.pointerDownState.origin,l=BD(PD(o.x,o.y),PD(n.x,n.y));return!(!r.editingLinearElement&&l<CA/r.zoom.value)}static addMidpoint(t,n,r,i,s){let a=e.getElement(t.elementId,s);if(!a)return;let{segmentMidpoint:o}=t.pointerDownState,l={pointerDownState:t.pointerDownState,selectedPointsIndices:t.selectedPointsIndices},c=e.createPointAt(a,s,n.x,n.y,i&&!SO(a)?r.getEffectiveGridSize():null),d=[...a.points.slice(0,o.index),c,...a.points.slice(o.index)];return DK(a,{points:d}),l.pointerDownState={...t.pointerDownState,segmentMidpoint:{...t.pointerDownState.segmentMidpoint,added:!0},lastClickedPoint:o.index},l.selectedPointsIndices=[o.index],l}static _updatePoints(e,t,n,r,i,s){if(SO(e)){let n={};void 0!==i?.startBinding&&(n.startBinding=null!==i.startBinding&&LO(i.startBinding)?i.startBinding:null),void 0!==i?.endBinding&&(n.endBinding=null!==i.endBinding&&LO(i.endBinding)?i.endBinding:null),n.points=Array.from(t),DK(e,n,!0,{isDragging:s?.isDragging})}else{let s=yX(e,t),a=yX(e,e.points),o=(s[0]+s[2])/2,l=(s[1]+s[3])/2,c=(a[0]+a[2])/2-o,d=(a[1]+a[3])/2-l,u=OD(PD(n,r),PD(c,d),e.angle);DK(e,{...i,points:t,x:e.x+u[0],y:e.y+u[1]})}}static _getShiftLockedDelta(t,n,r,i,s){let a=e.getPointGlobalCoordinates(t,r,n);if(SO(t))return[i[0]-a[0],i[1]-a[1]];let[o,l]=qV(i[0],i[1],s),{width:c,height:d}=$K(a[0],a[1],o,l);return OD(PD(c,d),PD(0,0),-t.angle)}static moveFixedSegment(t,n,r,i,s){let a=e.getElement(t.elementId,s);if(!a||!SO(a))return t;if(n&&n>0&&n<a.points.length){let e=WW(zW(CD(a.points[n],a.points[n-1]))),s=(a.fixedSegments??[]).reduce((e,t)=>(e[t.index]=t,e),{});s[n]={index:n,start:PD(e?a.points[n-1][0]:r-a.x,e?i-a.y:a.points[n-1][1]),end:PD(e?a.points[n][0]:r-a.x,e?i-a.y:a.points[n][1])};let o=Object.values(s).sort((e,t)=>e.index-t.index),l=o.map(e=>e.index).reduce((e,t)=>t<n?e+1:e,0);DK(a,{fixedSegments:o});let c=PD(a.x+(a.fixedSegments[l].start[0]+a.fixedSegments[l].end[0])/2,a.y+(a.fixedSegments[l].start[1]+a.fixedSegments[l].end[1])/2);return{...t,segmentMidPointHoveredCoords:c,pointerDownState:{...t.pointerDownState,segmentMidpoint:{added:!1,index:a.fixedSegments[l].index,value:c}}}}return t}static deleteFixedSegment(e,t){DK(e,{fixedSegments:e.fixedSegments?.filter(e=>e.index!==t)}),DK(e,{},!0)}};XM(KV,"POINT_HANDLE_SIZE",10),XM(KV,"getEditorMidPoints",(e,t,n)=>{let r=dG(e,t);return!SO(e)&&!n.editingLinearElement&&e.points.length>2&&!r?[]:(ZV.version===e.version&&ZV.zoom===n.zoom.value||KV.updateEditorMidPointsCache(e,t,n),ZV.points)}),XM(KV,"updateEditorMidPointsCache",(e,t,n)=>{let r=KV.getPointsGlobalCoordinates(e,t),i=0,s=[];for(;i<r.length-1;){if(KV.isSegmentTooShort(e,e.points[i],e.points[i+1],i,n.zoom)){s.push(null),i++;continue}let a=KV.getSegmentMidPoint(e,r[i],r[i+1],i+1,t);s.push(a),i++}ZV.points=s,ZV.version=e.version,ZV.zoom=n.zoom.value}),XM(KV,"getSegmentMidpointHitCoords",(e,t,n,r)=>{let{elementId:i}=e,s=KV.getElement(i,r);if(!s)return null;let a=KV.getPointIndexUnderCursor(s,r,n.zoom,t.x,t.y);if(!SO(s)&&a>=0||KV.getPointsGlobalCoordinates(s,r).length>=3&&!n.editingLinearElement&&!SO(s))return null;let o=(KV.POINT_HANDLE_SIZE+1)/n.zoom.value,l=e.segmentMidPointHoveredCoords;if(l&&BD(PD(l[0],l[1]),PD(t.x,t.y))<=o)return l;let c=0,d=KV.getEditorMidPoints(s,r,n);for(;c<d.length;){if(null!==d[c]&&BD(d[c],PD(t.x,t.y))<=o)return d[c];c++}return null}),XM(KV,"getBoundTextElementPosition",(e,t,n)=>{let r=KV.getPointsGlobalCoordinates(e,n);r.length<2&&DK(t,{isDeleted:!0});let i=0,s=0;if(e.points.length%2==1){let r=Math.floor(e.points.length/2),a=KV.getPointGlobalCoordinates(e,e.points[r],n);i=a[0]-t.width/2,s=a[1]-t.height/2}else{let a=e.points.length/2-1,o=ZV.points[a];2===e.points.length&&(o=zD(r[0],r[1])),(!o||ZV.version!==e.version)&&(o=KV.getSegmentMidPoint(e,r[a],r[a+1],a+1,n)),i=o[0]-t.width/2,s=o[1]-t.height/2}return{x:i,y:s}}),XM(KV,"getMinMaxXYWithBoundText",(e,t,n,r)=>{let[i,s,a,o]=n,l=(i+a)/2,c=(s+o)/2,{x:d,y:u}=KV.getBoundTextElementPosition(e,r,t),h=d+r.width,p=u+r.height,f=PD(l,c),m=OD(PD(i,s),f,e.angle),g=OD(PD(a,s),f,e.angle),b=OD(PD(d,u),f,-e.angle),U=OD(PD(h,u),f,-e.angle),y=OD(PD(d,p),f,-e.angle),x=OD(PD(h,p),f,-e.angle);return m[0]<g[0]&&m[1]>=g[1]?(i=Math.min(i,y[0]),a=Math.max(a,Math.max(U[0],x[0])),s=Math.min(s,b[1]),o=Math.max(o,x[1])):m[0]>=g[0]&&m[1]>g[1]?(i=Math.min(i,x[0]),a=Math.max(a,Math.max(b[0],U[0])),s=Math.min(s,y[1]),o=Math.max(o,U[1])):m[0]>=g[0]?(i=Math.min(i,U[0]),a=Math.max(a,y[0]),s=Math.min(s,x[1]),o=Math.max(o,b[1])):m[1]<=g[1]&&(i=Math.min(i,Math.min(U[0],b[0])),a=Math.max(a,x[0]),s=Math.min(s,U[1]),o=Math.max(o,y[1])),[i,s,a,o,l,c]}),XM(KV,"getElementAbsoluteCoords",(e,t,n=!1)=>{let r,i,s,a,o;if(e.points.length<2||!UF.get(e)){let{minX:t,minY:n,maxX:r,maxY:l}=e.points.reduce((e,[t,n])=>(e.minY=Math.min(e.minY,n),e.minX=Math.min(e.minX,t),e.maxX=Math.max(e.maxX,t),e.maxY=Math.max(e.maxY,n),e),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});i=t+e.x,s=n+e.y,a=r+e.x,o=l+e.y}else{let t=UF.generateElementShape(e,null),n=t$(t[0]),[r,l,c,d]=dX(n);i=r+e.x,s=l+e.y,a=c+e.x,o=d+e.y}if(r=[i,s,a,o,(i+a)/2,(s+o)/2],!n)return r;let l=dG(e,t);return l&&(r=KV.getMinMaxXYWithBoundText(e,t,[i,s,a,o],l)),r});var QV,JV,eG=KV,tG=e=>{let t=[...new Set(e.filter(e=>null!==e&&-1!==e))];return t=t.sort((e,t)=>e-t),t.length?t:null},nG={},rG=(e,t)=>{let n=nG[e]||(nG[e]={height:t});return n.height=t,n},iG=e=>{nG[e]&&delete nG[e]},sG=(e,t,n,r=!0)=>{let i,s={x:e.x,y:e.y,text:e.text,width:e.width,height:e.height,angle:t?.angle??e.angle};s.text=e.text,(t||!e.autoResize)&&(i=t?yG(t,e):e.width,s.text=uF(e.originalText,gL(e),i));let a=OO(s.text,gL(e),e.lineHeight);if(e.autoResize&&(s.width=a.width),s.height=a.height,t){let i=xG(t,e),o=yG(t,e);if(!wO(t)&&a.height>i){let e=UG(a.height,t.type);DK(t,{height:e},r),rG(t.id,e)}if(a.width>o){let e=UG(a.width,t.type);DK(t,{width:e},r)}let l={...e,...s},{x:c,y:d}=lG(t,l,n);s.x=c,s.y=d}DK(e,s,r)},aG=(e,t,n)=>{let r=DL(e);t.forEach(e=>{let t=n.get(e.id),i=cG(e);if(i){let s=n.get(i);if(s){let n=r.get(t);n&&DK(n,{boundElements:(e.boundElements||[]).filter(e=>e.id!==s&&e.id!==i).concat({type:"text",id:s})});let a=r.get(s);a&&mO(a)&&DK(a,{containerId:n?t:null})}}})},oG=(e,t,n,r=!1)=>{if(!cG(e))return;iG(e.id);let i=dG(e,t);if(i&&i.text){if(!e)return;let s=i.text,a=i.height,o=i.width,l=yG(e,i),c=xG(e,i),d=e.height;if(r||"n"!==n&&"s"!==n){s&&(s=uF(i.originalText,gL(i),l));let e=OO(s,gL(i),i.lineHeight);a=e.height,o=e.width}if(a>c){d=UG(a,e.type);let t=d-e.height,r=wO(e)||"ne"!==n&&"nw"!==n&&"n"!==n?e.y:e.y-t;DK(e,{height:d,y:r})}DK(i,{text:s,width:o,height:a}),wO(e)||DK(i,lG(e,i,t))}},lG=(e,t,n)=>{if(wO(e))return eG.getBoundTextElementPosition(e,t,n);let r,i,s=pG(e),a=xG(e,t),o=yG(e,t);return i=t.verticalAlign===EN?s.y:t.verticalAlign===CN?s.y+(a-t.height):s.y+(a/2-t.height/2),r=t.textAlign===_N?s.x:t.textAlign===IN?s.x+(o-t.width):s.x+(o/2-t.width/2),{x:r,y:i}},cG=e=>e?.boundElements?.length&&e?.boundElements?.find(e=>"text"===e.type)?.id||null,dG=(e,t)=>{if(!e)return null;let n=cG(e);return n&&t.get(n)||null},uG=(e,t)=>e&&e.containerId&&t.get(e.containerId)||null,hG=(e,t,n)=>{if(!wO(e))return{x:e.x+e.width/2,y:e.y+e.height/2};let r=eG.getPointsGlobalCoordinates(e,n);if(r.length%2==1){let t=Math.floor(e.points.length/2),r=eG.getPointGlobalCoordinates(e,e.points[t],n);return{x:r[0],y:r[1]}}let i=e.points.length/2-1,s=eG.getEditorMidPoints(e,n,t)[i];return s||(s=eG.getSegmentMidPoint(e,r[i],r[i+1],i+1,n)),{x:s[0],y:s[1]}},pG=e=>{let t=5,n=5;return"ellipse"===e.type&&(t+=e.width/2*(1-Math.sqrt(2)/2),n+=e.height/2*(1-Math.sqrt(2)/2)),"diamond"===e.type&&(t+=e.width/4,n+=e.height/4),{x:e.x+t,y:e.y+n}},fG=(e,t)=>!t||wO(t)?e.angle:t.angle,mG=(e,t)=>e.some(e=>{if(RO(e)){let n=uG(e,t);return!wO(n)}return!1}),gG=(e,t)=>e.some(e=>{if(RO(e)){let n=uG(e,t);return!wO(n)}return mO(e)}),bG=new Set(["rectangle","ellipse","diamond","arrow"]),UG=(e,t)=>{e=Math.ceil(e);return"ellipse"===t?Math.round((e+10)/Math.sqrt(2)*2):"arrow"===t?e+80:"diamond"===t?2*(e+10):e+10},yG=(e,t)=>{let{width:n}=e;if(wO(e)){let e=11*(t?.fontSize??nN);return Math.max(.7*n,e)}return"ellipse"===e.type?Math.round(n/2*Math.sqrt(2))-10:"diamond"===e.type?Math.round(n/2)-10:n-10},xG=(e,t)=>{let{height:n}=e;return wO(e)?n-80<=0?t.height:n:"ellipse"===e.type?Math.round(n/2*Math.sqrt(2))-10:"diamond"===e.type?Math.round(n/2)-10:n-10},vG=e=>(e=e.trim())&&qP.sanitizeUrl(lO(e)),wG=e=>!(!e?.includes(location.origin)&&!e?.startsWith("/")),SG=e=>{if((e=vG(e)).startsWith("/"))return`${location.origin}${e}`;try{new URL(e)}catch{return"about:blank"}return e},EG=[],kG=e=>(EG=EG.concat(e),e),CG='<svg viewBox="0 0 24 24" stroke-width="1" width="28" height="28" xmlns="http://www.w3.org/2000/svg">',_G='<path stroke="#1b1b1f" fill="#fff" d="m7.868 11.113 7.773 7.774a2.359 2.359 0 0 0 1.667.691 2.368 2.368 0 0 0 2.357-2.358c0-.625-.248-1.225-.69-1.667L11.201 7.78 9.558 9.469l-1.69 1.643v.001Zm10.273 3.606-3.333 3.333m-3.25-6.583 2 2m-7-7 3 3M3.664 3.625l1 1M2.529 6.922l1.407-.144m5.735-2.932-1.118.866M4.285 9.823l.758-1.194m1.863-6.207-.13 1.408"/>',MG=`data:${lN.svg},${encodeURIComponent(`${CG}${_G}</svg>`)}`,IG=`data:${lN.svg},${encodeURIComponent(`${CG}<path d="M6.164 11.755a5.314 5.314 0 0 1-4.932-5.298 5.314 5.314 0 0 1 5.311-5.311 5.314 5.314 0 0 1 5.307 5.113l8.773 8.773a3.322 3.322 0 0 1 0 4.696l-.895.895a3.322 3.322 0 0 1-4.696 0l-8.868-8.868Z" style="fill:#fff"/>${_G}</svg>`)}`,jG=e=>{e&&(e.style.cursor="")},TG=(e,t)=>{e&&(e.style.cursor=t)},RG=(e,t)=>{(!QV||QV.theme!==t)&&(()=>{let e=t===eN;(QV=document.createElement("canvas")).theme=t,QV.height=20,QV.width=20;let n=QV.getContext("2d");n.lineWidth=1,n.beginPath(),n.arc(QV.width/2,QV.height/2,5,0,2*Math.PI),n.fillStyle=e?aR.black:aR.white,n.fill(),n.strokeStyle=e?aR.white:aR.black,n.stroke(),JV=QV.toDataURL(lN.svg)})(),TG(e,`url(${JV}) 10 10, auto`)},PG=(e,t)=>{if(e)if("selection"===t.activeTool.type)jG(e);else if(gD(t))e.style.cursor=TA;else if(mD(t))RG(e,t.theme);else if("laser"===t.activeTool.type){let n=t.theme===JA?MG:IG;e.style.cursor=`url(${n}), auto`}else["image","custom"].includes(t.activeTool.type)?"image"!==t.activeTool.type&&(e.style.cursor=AA):e.style.cursor=IA},AG=new MR(Date.now()),NG=0,DG=()=>Math.floor(AG.next()*2**31),LG=()=>OL()?"id"+NG++:oR(),OG=(e,{x:t,y:n,strokeColor:r=ON.strokeColor,backgroundColor:i=ON.backgroundColor,fillStyle:s=ON.fillStyle,strokeWidth:a=ON.strokeWidth,strokeStyle:o=ON.strokeStyle,roughness:l=ON.roughness,opacity:c=ON.opacity,width:d=0,height:u=0,angle:h=0,groupIds:p=[],frameId:f=null,index:m=null,roundness:g=null,boundElements:b=null,link:U=null,locked:y=ON.locked,...x})=>({id:x.id||LG(),type:e,x:t,y:n,width:d,height:u,angle:h,strokeColor:r,backgroundColor:i,fillStyle:s,strokeWidth:a,strokeStyle:o,roughness:l,opacity:c,groupIds:p,frameId:f,index:m,roundness:g,seed:x.seed??DG(),version:x.version||1,versionNonce:x.versionNonce??0,isDeleted:!1,boundElements:b,updated:NL(),link:U,locked:y,customData:x.customData}),FG=e=>OG(e.type,e),zG=e=>OG("embeddable",e),BG=e=>LK({...OG("frame",e),type:"frame",name:e?.name||null},{}),HG=e=>LK({...OG("magicframe",e),type:"magicframe",name:e?.name||null},{}),$G=(e,t)=>({x:"center"===e.textAlign?t.width/2:"right"===e.textAlign?t.width:0,y:"middle"===e.verticalAlign?t.height/2:0}),WG=e=>{let t=e.fontFamily||rN,n=e.fontSize||nN,r=e.lineHeight||JH(t),i=HO(e.text),s=OO(i,gL({fontFamily:t,fontSize:n}),r),a=e.textAlign||iN,o=e.verticalAlign||sN,l=$G({textAlign:a,verticalAlign:o},s),c={...OG("text",e),text:i,fontSize:n,fontFamily:t,textAlign:a,verticalAlign:o,x:e.x-l.x,y:e.y-l.y,width:s.width,height:s.height,containerId:e.containerId||null,originalText:e.originalText??i,autoResize:e.autoResize??!0,lineHeight:r};return LK(c,{})},XG=(e,t,n,r,i,s,a,o)=>{let l=Math.cos(r),c=Math.sin(r);return e.e&&e.w?t+=i+a:e.e?(t+=i*(1+l),n+=i*c,t+=a*(1-l),n+=a*-c):e.w&&(t+=i*(1-l),n+=i*-c,t+=a*(1+l),n+=a*c),e.n&&e.s?n+=s+o:e.n?(t+=s*c,n+=s*(1-l),t+=o*-c,n+=o*(1+l)):(t+=s*-c,n+=s*(1+l),t+=o*c,n+=o*(1-l)),[t,n]},VG=(e,t,n,r=e.text)=>{if(e.isDeleted)return;(t||!e.autoResize)&&(r=uF(r,gL(e),t?yG(t,e):e.width));let i=((e,t,n)=>{let{width:r,height:i}=OO(n,gL(e),e.lineHeight);e.autoResize||(r=e.width);let s,a,{textAlign:o,verticalAlign:l}=e;if("center"===o&&l===kN&&!e.containerId&&e.autoResize){let t=OO(e.text,gL(e),e.lineHeight),n=$G(e,{width:r-t.width,height:i-t.height});s=e.x-n.x,a=e.y-n.y}else{let[n,l,c,d]=sX(e,t),[u,h,p,f]=UX(e,r,i,!1),m=(n-u)/2,g=(l-h)/2,b=(c-p)/2,U=(d-f)/2;[s,a]=XG({s:!0,e:"center"===o||"left"===o,w:"center"===o||"right"===o},e.x,e.y,e.angle,m,g,b,U)}return{width:r,height:i,x:Number.isFinite(s)?s:e.x,y:Number.isFinite(a)?a:e.y}})(e,n,r);return{text:r,...i}},GG=e=>({...OG(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:null,endArrowhead:null}),YG=e=>e.elbowed?{...OG(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!0,fixedSegments:e.fixedSegments||[],startIsSpecial:!1,endIsSpecial:!1}:{...OG(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!1},qG=e=>({...OG("image",e),strokeColor:"transparent",status:e.status??"pending",fileId:e.fileId??null,scale:e.scale??[1,1],crop:e.crop??null}),ZG=(e,t=0)=>{if(null==e||"object"!=typeof e)return e;let n=Object.prototype.toString.call(e);if("[object Object]"===n){let n="function"==typeof e.constructor?Object.create(Object.getPrototypeOf(e)):{};for(let r in e)if(e.hasOwnProperty(r)){if(0===t&&("shape"===r||"canvas"===r))continue;n[r]=ZG(e[r],t+1)}return n}if(Array.isArray(e)){let n=e.length,r=new Array(n);for(;n--;)r[n]=ZG(e[n],t+1);return r}return BM.DEV&&"[object Object]"!==n&&"[object Array]"!==n&&n.startsWith("[object "),e},KG=e=>ZG(e),QG=(e,t)=>{Object.defineProperty(e,cD,{value:t,writable:!1,enumerable:!1})},JG=()=>LG(),eY=(e,t,n,r)=>{let i=KG(n);return OL()&&QG(i,n.id),i.id=JG(),i.boundElements=null,i.updated=NL(),i.seed=DG(),i.groupIds=((e,t,n)=>{let r=[...e],i=t?e.indexOf(t):-1,s=i>-1?i:e.length;for(let a=0;a<s;a++)r[a]=n(r[a]);return r})(i.groupIds,e,e=>(t.has(e)||t.set(e,JG()),t.get(e))),r&&(i=Object.assign(i,r)),i},tY=(e,t)=>{let n=[],r=DL(e),i=new Map,s=e=>{if(i.has(e))return i.get(e);if(r.has(e)){let t=JG();return i.set(e,t),t}return null},a=new Map;for(let o of e){let e=ZG(o);if(e.id=s(o.id),OL()&&QG(e,o.id),t?.randomizeSeed&&(e.seed=DG(),OK(e)),e.groupIds&&(e.groupIds=e.groupIds.map(e=>(a.has(e)||a.set(e,JG()),a.get(e)))),"containerId"in e&&e.containerId){let t=s(e.containerId);e.containerId=t}if("boundElements"in e&&e.boundElements&&(e.boundElements=e.boundElements.reduce((e,t)=>{let n=s(t.id);return n&&e.push({...t,id:n}),e},[])),"endBinding"in e&&e.endBinding){let t=s(e.endBinding.elementId);e.endBinding=t?{...e.endBinding,elementId:t}:null}if("startBinding"in e&&e.startBinding){let t=s(e.startBinding.elementId);e.startBinding=t?{...e.startBinding,elementId:t}:null}e.frameId&&(e.frameId=s(e.frameId)),n.push(e)}return n},nY=(e,{shouldThrow:t=!1,includeBoundTextValidation:n=!1,ignoreLogs:r,reconciliationContext:i})=>{let s=[],a=e=>`${e?.index}:${e?.id}:${e?.type}:${e?.isDeleted}:${e?.version}:${e?.versionNonce}`,o=e.map(e=>e.index);for(let[l,c]of o.entries()){let t=o[l-1],r=o[l+1];if(oY(c,t,r)||s.push(`Fractional indices invariant has been compromised: "${a(e[l-1])}", "${a(e[l])}", "${a(e[l+1])}"`),n&&TO(e[l])){let t=e[l],n=dG(t,DL(e));n&&n.index<=t.index&&s.push(`Fractional indices invariant for bound elements has been compromised: "${a(n)}", "${a(t)}"`)}}if(s.length){let e=new kH,n=[];if(i&&(n.push("Additional reconciliation context:"),n.push(i.localElements.map(e=>a(e))),n.push(i.remoteElements.map(e=>a(e)))),t)throw e}},rY=(e,t)=>{try{let n=sY(e,t),r=lY(e,n),i=e.map(e=>r.has(e)?{...e,...r.get(e)}:e);nY(i,{includeBoundTextValidation:!1,shouldThrow:!0,ignoreLogs:!0});for(let[e,t]of r)DK(e,t,!1)}catch{iY(e)}return e},iY=e=>{let t=aY(e),n=lY(e,t);for(let[r,i]of n)DK(r,i,!1);return e},sY=(e,t)=>{let n=[],r=0;for(;r<e.length;)if(t.has(e[r].id)){let i=[r-1,r];for(;++r<e.length&&t.has(e[r].id);)i.push(r);i.push(r),n.push(i)}else r++;return n},aY=e=>{let t,n,r=[],i=-1,s=0,a=t=>{let n=e[i]?e[i].index:void 0,r=e[t-1]?.index;return!n&&r||n&&r&&r>n?[r,t-1]:[n,i]},o=t=>{let n=e[s]?e[s].index:void 0;if(n&&t<s)return[n,s];let r=s;for(;++r<e.length;){let t=e[r]?.index;if(!n&&t||n&&t&&t>n)return[t,r]}return[void 0,r]},l=0;for(;l<e.length;){let c=e[l].index;if([t,i]=a(l),[n,s]=o(l),oY(c,t,n))l++;else{let c=[i,l];for(;++l<e.length;){let r=e[l].index,[d,u]=a(l),[h,p]=o(l);if(oY(r,d,h))break;[t,i]=[d,u],[n,s]=[h,p],c.push(l)}c.push(s),r.push(c)}}return r},oY=(e,t,n)=>!!e&&(t&&n?t<e&&e<n:!t&&n?e<n:t&&!n?t<e:!!e),lY=(e,t)=>{let n=new Map;for(let r of t){let t=r.shift(),i=r.pop(),s=iA(e[t]?.index,e[i]?.index,r.length);for(let a=0;a<r.length;a++){let t=e[r[a]];n.set(t,{index:s[a]})}}return n},cY=e=>!!e.index,dY=class e{constructor(e,t){this.deleted=e,this.inserted=t}static create(t,n,r,i){let s=r&&"inserted"!==i?r(t):t,a=r&&"deleted"!==i?r(n):n;return new e(s,a)}static calculate(t,n,r,i){if(t===n)return e.empty();let s={},a={};for(let e of this.distinctKeysIterator("full",t,n))s[e]=t[e],a[e]=n[e];let[o,l]=i?i(s,a):[s,a];return e.create(o,l,r)}static empty(){return new e({},{})}static isEmpty(e){return!Object.keys(e.deleted).length&&!Object.keys(e.inserted).length}static mergeObjects(e,t,n){let r={...e};for(let i of Object.keys(n))delete r[i];return{...r,...t}}static mergeArrays(t,n,r,i){return Object.values(e.mergeObjects(LL(t??[],i),LL(n??[],i),LL(r??[],i)))}static diffObjects(t,n,r,i){if((t[r]||n[r])&&("object"==typeof t[r]||"object"==typeof n[r])){let s=t[r]??{},a=n[r]??{},o=e.getLeftDifferences(s,a).reduce((e,t)=>(e[t]=i(s[t]),e),{}),l=e.getRightDifferences(s,a).reduce((e,t)=>(e[t]=i(a[t]),e),{});Object.keys(o).length||Object.keys(l).length?(Reflect.set(t,r,o),Reflect.set(n,r,l)):(Reflect.deleteProperty(t,r),Reflect.deleteProperty(n,r))}}static diffArrays(t,n,r,i){if((t[r]||n[r])&&(Array.isArray(t[r])||Array.isArray(n[r]))){let s=Array.isArray(t[r])?t[r]:[],a=Array.isArray(n[r])?n[r]:[],o=LL(e.getLeftDifferences(LL(s,i),LL(a,i))),l=LL(e.getRightDifferences(LL(s,i),LL(a,i)));if(Object.keys(o).length||Object.keys(l).length){let e=s.filter(e=>o[i?i(e):String(e)]),c=a.filter(e=>l[i?i(e):String(e)]);Reflect.set(t,r,e),Reflect.set(n,r,c)}else Reflect.deleteProperty(t,r),Reflect.deleteProperty(n,r)}}static isLeftDifferent(e,t,n=!1){return!!this.distinctKeysIterator("left",e,t,n).next().value}static isRightDifferent(e,t,n=!1){return!!this.distinctKeysIterator("right",e,t,n).next().value}static getLeftDifferences(e,t,n=!1){return Array.from(this.distinctKeysIterator("left",e,t,n))}static getRightDifferences(e,t,n=!1){return Array.from(this.distinctKeysIterator("right",e,t,n))}static*distinctKeysIterator(e,t,n,r=!1){if(t===n)return;let i=[];"left"===e?i=Object.keys(t):"right"===e?i=Object.keys(n):"full"===e?i=Array.from(new Set([...Object.keys(t),...Object.keys(n)])):GL(e,`Unknown distinctKeysIterator's join param "${e}"`,!0);for(let s of i){let e=t[s],i=n[s];if(e!==i){if(!r&&"object"==typeof e&&"object"==typeof i&&null!==e&&null!==i&&XL(e,i))continue;yield s}}}},uY=class e{constructor(e){this.delta=e}static calculate(t,n){let r=dY.calculate(t,n,void 0,e.postProcess);return new e(r)}static empty(){return new e(dY.create({},{}))}inverse(){let t=dY.create(this.delta.inserted,this.delta.deleted);return new e(t)}applyTo(e,t){try{let{selectedElementIds:n={},selectedGroupIds:r={}}=this.delta.deleted,{selectedElementIds:i={},selectedGroupIds:s={},selectedLinearElementId:a,editingLinearElementId:o,...l}=this.delta.inserted,c=dY.mergeObjects(e.selectedElementIds,i,n),d=dY.mergeObjects(e.selectedGroupIds,s,r),u=a&&t.has(a)?new eG(t.get(a)):null,h=o&&t.has(o)?new eG(t.get(o)):null,p={...e,...l,selectedElementIds:c,selectedGroupIds:d,selectedLinearElement:typeof a<"u"?u:e.selectedLinearElement,editingLinearElement:typeof o<"u"?h:e.editingLinearElement};return[p,this.filterInvisibleChanges(e,p,t)]}catch(cA){if(BM.DEV||BM.MODE===$A)throw cA;return[e,!1]}}isEmpty(){return dY.isEmpty(this.delta)}static postProcess(e,t){try{dY.diffObjects(e,t,"selectedElementIds",e=>!0),dY.diffObjects(e,t,"selectedGroupIds",e=>e??!1)}catch(cA){if(BM.DEV||BM.MODE===$A)throw cA}finally{return[e,t]}}filterInvisibleChanges(t,n,r){let i=gY(t),s=gY(n),a=dY.isRightDifferent(e.stripElementsProps(i),e.stripElementsProps(s)),o=dY.isRightDifferent(e.stripStandaloneProps(i),e.stripStandaloneProps(s));if(!a&&!o)return!1;let l={value:a};if(o){let t=dY.getRightDifferences(e.stripStandaloneProps(i),e.stripStandaloneProps(s)),a=new Set;(t.includes("editingGroupId")||t.includes("selectedGroupIds"))&&(a=(e=>{let t=new Set;for(let[,n]of e)if(!n.isDeleted)for(let e of n.groupIds??[])t.add(e);return t})(r));for(let i of t)switch(i){case"selectedElementIds":n[i]=e.filterSelectedElements(n[i],r,l);break;case"selectedGroupIds":n[i]=e.filterSelectedGroups(n[i],a,l);break;case"croppingElementId":{let e=n[i],t=e&&r.get(e);t&&!t.isDeleted?l.value=!0:n[i]=null;break}case"editingGroupId":let t=n[i];t?a.has(t)?l.value=!0:n[i]=null:l.value=!0;break;case"selectedLinearElementId":case"editingLinearElementId":let s=e.convertToAppStateKey(i),o=n[s];if(o){let e=r.get(o.elementId);e&&!e.isDeleted?l.value=!0:n[s]=null}else l.value=!0;break;default:GL(i,`Unknown ObservedElementsAppState's key "${i}"`,!0)}}return l.value}static convertToAppStateKey(e){switch(e){case"selectedLinearElementId":return"selectedLinearElement";case"editingLinearElementId":return"editingLinearElement"}}static filterSelectedElements(e,t,n){let r=Object.keys(e);if(!r.length)return n.value=!0,e;let i={...e};for(let s of r){let e=t.get(s);e&&!e.isDeleted?n.value=!0:delete i[s]}return i}static filterSelectedGroups(e,t,n){if(!Object.keys(e).length)return n.value=!0,e;let r={...e};for(let i of Object.keys(r))t.has(i)?n.value=!0:delete r[i];return r}static stripElementsProps(e){let{editingGroupId:t,selectedGroupIds:n,selectedElementIds:r,editingLinearElementId:i,selectedLinearElementId:s,croppingElementId:a,...o}=e;return o}static stripStandaloneProps(e){let{name:t,viewBackgroundColor:n,...r}=e;return r}},hY=class e{constructor(e,t,n){this.added=e,this.removed=t,this.updated=n}static create(t,n,r,i={shouldRedistribute:!1}){let s;if(i.shouldRedistribute){let i=new Map,a=new Map,o=new Map,l=[...t,...n,...r];for(let[e,t]of l)this.satisfiesAddition(t)?i.set(e,t):this.satisfiesRemoval(t)?a.set(e,t):o.set(e,t);s=new e(i,a,o)}else s=new e(t,n,r);return(BM.DEV||BM.MODE===$A)&&(e.validate(s,"added",this.satisfiesAddition),e.validate(s,"removed",this.satisfiesRemoval),e.validate(s,"updated",this.satisfiesUpdate)),s}static validate(e,t,n){for(let[r,i]of e[t].entries())if(!n(i))throw new Error(`ElementsChange invariant broken for element "${r}".`)}static calculate(t,n){if(t===n)return e.empty();let r=new Map,i=new Map,s=new Map;for(let a of t.values())if(!n.get(a.id)){let t={...a,isDeleted:!1},n={isDeleted:!0},r=dY.create(t,n,e.stripIrrelevantProps);i.set(a.id,r)}for(let a of n.values()){let n=t.get(a.id);if(!n){let t={isDeleted:!0},n={...a,isDeleted:!1},i=dY.create(t,n,e.stripIrrelevantProps);r.set(a.id,i);continue}if(n.versionNonce!==a.versionNonce){let t=dY.calculate(n,a,e.stripIrrelevantProps,e.postProcess);if("boolean"==typeof n.isDeleted&&"boolean"==typeof a.isDeleted&&n.isDeleted!==a.isDeleted){n.isDeleted&&!a.isDeleted?r.set(a.id,t):i.set(a.id,t);continue}dY.isEmpty(t)||s.set(a.id,t)}}return e.create(r,i,s)}static empty(){return e.create(new Map,new Map,new Map)}inverse(){let t=e=>{let t=new Map;for(let[n,r]of e.entries())t.set(n,dY.create(r.inserted,r.deleted));return t},n=t(this.added),r=t(this.removed),i=t(this.updated);return e.create(r,n,i)}isEmpty(){return 0===this.added.size&&0===this.removed.size&&0===this.updated.size}applyLatestChanges(t){let n=e=>t=>{let n={};for(let r of Object.keys(t))if("boundElements"===r)n[r]=t[r];else n[r]=e[r];return n},r=e=>{let r=new Map;for(let[i,s]of e.entries()){let e=t.get(i);if(e){let t=dY.create(s.deleted,s.inserted,n(e),"inserted");r.set(i,t)}else r.set(i,s)}return r},i=r(this.added),s=r(this.removed),a=r(this.updated);return e.create(i,s,a,{shouldRedistribute:!0})}applyTo(t,n){let r,i=iO(new Map(t)),s={containsVisibleDifference:!1,containsZindexDifference:!1};try{let a=e.createApplier(i,n,s),o=a(this.added),l=a(this.removed),c=a(this.updated),d=this.resolveConflicts(t,i);r=new Map([...o,...l,...c,...d])}catch(a){if(BM.DEV||BM.MODE===$A)throw a;return[t,!0]}try{e.redrawTextBoundingBoxes(i,r),i=e.reorderElements(i,r,s),e.redrawBoundArrows(i,r)}catch(a){if(BM.DEV||BM.MODE===$A)throw a}finally{return[i,s.containsVisibleDifference]}}static applyDelta(t,n,r={containsVisibleDifference:!0,containsZindexDifference:!0}){let{boundElements:i,...s}=n.inserted;if(n.deleted.boundElements?.length||n.inserted.boundElements?.length){let e=dY.mergeArrays(t.boundElements,n.inserted.boundElements,n.deleted.boundElements,e=>e.id);Object.assign(s,{boundElements:e})}if(uO(t)){let e=n;(e.deleted.crop||e.inserted.crop)&&Object.assign(s,{crop:e.inserted.crop??null})}if(!r.containsVisibleDifference){let{index:n,...i}=s,a=e.checkForVisibleDifference(t,i);r.containsVisibleDifference=a}return r.containsZindexDifference||(r.containsZindexDifference=n.deleted.index!==n.inserted.index),LK(t,s)}static checkForVisibleDifference(e,t){return(!e.isDeleted||!1===t.isDeleted)&&(!!(e.isDeleted&&!1===t.isDeleted||!1===e.isDeleted&&t.isDeleted)||dY.isRightDifferent(e,t))}resolveConflicts(t,n){let r=new Map,i=(e,i)=>{let s,a=n.get(e.id);a&&(s=t.get(e.id)===a?LK(a,i):DK(a,i),r.set(s.id,s),n.set(s.id,s))};for(let[c]of this.removed)e.unbindAffected(t,n,c,i);for(let[c]of this.added)e.rebindAffected(t,n,c,i);for(let[c]of Array.from(this.updated).filter(([e,t])=>Object.keys({...t.deleted,...t.inserted}).find(e=>cV.has(e)))){let r=n.get(c);!r||r.isDeleted||e.rebindAffected(t,n,c,i)}let s=new Map(Array.from(t).filter(([e])=>r.has(e))),{added:a,removed:o,updated:l}=e.calculate(s,r);for(let[e,c]of a)this.added.set(e,c);for(let[e,c]of o)this.removed.set(e,c);for(let[e,c]of l)this.updated.set(e,c);return r}static unbindAffected(e,t,n,r){let i=()=>e.get(n),s=()=>t.get(n);hV.unbindAffected(t,i(),r),hV.unbindAffected(t,s(),r),pV.unbindAffected(t,i(),r),pV.unbindAffected(t,s(),r)}static rebindAffected(e,t,n,r){let i=()=>e.get(n),s=()=>t.get(n);hV.unbindAffected(t,i(),r),hV.rebindAffected(t,s(),r),pV.unbindAffected(t,i(),(e,t)=>{mO(e)&&r(e,t)}),pV.rebindAffected(t,s(),r)}static redrawTextBoundingBoxes(e,t){let n=new Map;for(let r of t.values()){if(RO(r)){let{containerId:t}=r,i=t?e.get(t):void 0;i&&n.set(i.id,{container:i,boundText:r})}if(TO(r)){let t=cG(r),i=t?e.get(t):void 0;i&&n.set(r.id,{container:r,boundText:i})}}for(let{container:r,boundText:i}of n.values())r.isDeleted||i.isDeleted||sG(i,r,e,!1)}static redrawBoundArrows(e,t){for(let n of t.values())!n.isDeleted&&_O(n)&&$X(n,e,{})}static reorderElements(e,t,n){if(!n.containsZindexDifference)return e;let r=Array.from(e.values()),i=(e=>e.sort((e,t)=>cY(e)&&cY(t)?e.index<t.index?-1:e.index>t.index?1:e.id<t.id?-1:1:1))([...r]),s=dY.getRightDifferences(r,i,!0).reduce((e,n)=>{let i=r[Number(n)];return i&&t.has(i.id)&&e.set(i.id,i),e},new Map);return!n.containsVisibleDifference&&s.size&&(n.containsVisibleDifference=!0),DL(rY(i,s))}static postProcess(e,t){try{dY.diffArrays(e,t,"boundElements",e=>e.id)}catch(cA){if(BM.DEV||BM.MODE===$A)throw cA}finally{return[e,t]}}static stripIrrelevantProps(e){let{id:t,updated:n,version:r,versionNonce:i,seed:s,...a}=e;return a}};XM(hY,"satisfiesAddition",({deleted:e,inserted:t})=>!0===e.isDeleted&&!t.isDeleted),XM(hY,"satisfiesRemoval",({deleted:e,inserted:t})=>!e.isDeleted&&!0===t.isDeleted),XM(hY,"satisfiesUpdate",({deleted:e,inserted:t})=>!!e.isDeleted==!!t.isDeleted),XM(hY,"createApplier",(e,t,n)=>{let r=hY.createGetter(e,t,n);return t=>Array.from(t.entries()).reduce((t,[i,s])=>{let a=r(i,s.inserted);if(a){let r=hY.applyDelta(a,s,n);e.set(r.id,r),t.set(r.id,r)}return t},new Map)}),XM(hY,"createGetter",(e,t,n)=>(r,i)=>{let s=e.get(r);return s||(s=t.get(r),s&&(n.containsZindexDifference=!0,(!1===i.isDeleted||!0!==i.isDeleted&&!1===s.isDeleted)&&(n.containsVisibleDifference=!0))),s});var pY=hY,fY=class{constructor(){XM(this,"subscribers",[])}on(...e){let t=e.flat().filter(e=>"function"==typeof e);return this.subscribers.push(...t),()=>this.off(t)}once(...e){let t=e.flat().filter(e=>"function"==typeof e);t.push(()=>n());let n=this.on(...t);return n}off(...e){let t=e.flat();this.subscribers=this.subscribers.filter(e=>!t.includes(e))}trigger(...e){for(let t of this.subscribers)t(...e);return this}clear(){this.subscribers=[]}},mY="__observedAppState",gY=e=>{let t={name:e.name,editingGroupId:e.editingGroupId,viewBackgroundColor:e.viewBackgroundColor,selectedElementIds:e.selectedElementIds,selectedGroupIds:e.selectedGroupIds,editingLinearElementId:e.editingLinearElement?.elementId||null,selectedLinearElementId:e.selectedLinearElement?.elementId||null,croppingElementId:e.croppingElementId};return Reflect.defineProperty(t,mY,{value:!0,enumerable:!1}),t},bY="IMMEDIATELY",UY="NEVER",yY="EVENTUALLY",xY=class{constructor(e,t){this.elementsChange=e,this.appStateChange=t}},vY=class{constructor(){XM(this,"onStoreIncrementEmitter",new fY),XM(this,"scheduledActions",new Set),XM(this,"_snapshot",wY.empty()),XM(this,"shouldCaptureIncrement",()=>{this.scheduleAction(bY)}),XM(this,"shouldUpdateSnapshot",()=>{this.scheduleAction(UY)}),XM(this,"scheduleAction",e=>{this.scheduledActions.add(e),this.satisfiesScheduledActionsInvariant()}),XM(this,"commit",(e,t)=>{try{this.scheduledActions.has(bY)?this.captureIncrement(e,t):this.scheduledActions.has(UY)&&this.updateSnapshot(e,t)}finally{this.satisfiesScheduledActionsInvariant(),this.scheduledActions=new Set}}),XM(this,"captureIncrement",(e,t)=>{let n=this.snapshot,r=this.snapshot.maybeClone(e,t);if(n!==r){let e=r.meta.didElementsChange?pY.calculate(n.elements,r.elements):pY.empty(),t=r.meta.didAppStateChange?uY.calculate(n.appState,r.appState):uY.empty();(!e.isEmpty()||!t.isEmpty())&&this.onStoreIncrementEmitter.trigger(new xY(e,t)),this.snapshot=r}}),XM(this,"updateSnapshot",(e,t)=>{let n=this.snapshot.maybeClone(e,t);this.snapshot!==n&&(this.snapshot=n)}),XM(this,"filterUncomittedElements",(e,t)=>{for(let[n,r]of e.entries()){if(!t.get(n))continue;let e=this.snapshot.elements.get(n);e?e.version<r.version&&t.set(n,e):t.delete(n)}return t}),XM(this,"clear",()=>{this.snapshot=wY.empty(),this.scheduledActions=new Set}),XM(this,"satisfiesScheduledActionsInvariant",()=>{if(!(this.scheduledActions.size>=0&&this.scheduledActions.size<=3)){let e=`There can be at most three store actions scheduled at the same time, but there are "${this.scheduledActions.size}".`;if(BM.DEV||BM.MODE===$A)throw new Error(e)}})}get snapshot(){return this._snapshot}set snapshot(e){this._snapshot=e}},wY=class e{constructor(e,t,n={didElementsChange:!1,didAppStateChange:!1,isEmpty:!1}){this.elements=e,this.appState=t,this.meta=n}static empty(){return new e(new Map,gY(hD()),{didElementsChange:!1,didAppStateChange:!1,isEmpty:!0})}isEmpty(){return this.meta.isEmpty}maybeClone(t,n){let r=this.maybeCreateElementsSnapshot(t),i=this.maybeCreateAppStateSnapshot(n),s=!1,a=!1;return this.elements!==r&&(s=!0),this.appState!==i&&(a=!0),s||a?new e(r,i,{didElementsChange:s,didAppStateChange:a}):this}maybeCreateAppStateSnapshot(e){if(!e)return this.appState;let t=(e=>!!Reflect.get(e,mY))(e)?e:gY(e);return this.detectChangedAppState(t)?t:this.appState}detectChangedAppState(e){return!XL(this.appState,e,{selectedElementIds:XL,selectedGroupIds:XL})}maybeCreateElementsSnapshot(e){return e&&this.detectChangedElements(e)?this.createElementsSnapshot(e):this.elements}detectChangedElements(e){if(this.elements===e)return!1;if(this.elements.size!==e.size)return!0;let t=Array.from(e.keys());for(let n=t.length-1;n>=0;n--){let r=this.elements.get(t[n]),i=e.get(t[n]);if(!r||!i||r.id!==i.id||r.versionNonce!==i.versionNonce)return!0}return!1}createElementsSnapshot(e){let t=new Map;for(let[n,r]of this.elements.entries())e.get(n)?t.set(n,r):t.set(n,LK(r,{isDeleted:!0}));for(let[n,r]of e.entries()){let e=t.get(n);(!e||e&&e.versionNonce!==r.versionNonce)&&t.set(n,KG(r))}return t}},SY=new Map,EY=/^(?:http(?:s)?:\/\/)?(?:www\.)?youtu(?:be\.com|\.be)\/(embed\/|watch\?v=|shorts\/|playlist\?list=|embed\/videoseries\?list=)?([a-zA-Z0-9_-]+)(?:\?t=|&t=|\?start=|&start=)?([a-zA-Z0-9_-]+)?[^\s]*$/,kY=/^(?:http(?:s)?:\/\/)?(?:(?:w){3}\.)?(?:player\.)?vimeo\.com\/(?:video\/)?([^?\s]+)(?:\?.*)?$/,CY=/^https:\/\/(?:www\.)?figma\.com/,_Y=/^https:\/\/gist\.github\.com\/([\w_-]+)\/([\w_-]+)/,MY=/^<script[\s\S]*?\ssrc=["'](https:\/\/gist\.github\.com\/.*?)\.js["']/i,IY=/(?:https?:\/\/)?(?:(?:w){3}\.)?(?:twitter|x)\.com\/[^/]+\/status\/(\d+)/,jY=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:twitter|x)\.com\/[^"']*)/i,TY=/^https:\/\/(?:www\.)?val\.town\/(v|embed)\/[a-zA-Z_$][0-9a-zA-Z_$]+\.[a-zA-Z_$][0-9a-zA-Z_$]+/,RY=/^<(?:iframe|blockquote)[\s\S]*?\s(?:src|href)=["']([^"']*)["'][\s\S]*?>$/i,PY=/giphy.com\/(?:clips|embed|gifs)\/[a-zA-Z0-9]*?-?([a-zA-Z0-9]+)(?:[^a-zA-Z0-9]|$)/,AY=/^(?:http(?:s)?:\/\/)?(?:www\.)?reddit\.com\/r\/([a-zA-Z0-9_]+)\/comments\/([a-zA-Z0-9_]+)\/([a-zA-Z0-9_]+)\/?(?:\?[^#\s]*)?(?:#[^\s]*)?$/,NY=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:www\.)?reddit\.com\/[^"']*)/i,DY=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","link.excalidraw.com","gist.github.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","val.town","giphy.com","reddit.com"]),LY=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","reddit.com"]),OY=e=>`<html><body>${e}</body></html>`,FY=e=>{if(!e)return null;if(SY.has(e))return SY.get(e);let t=e,n=LY.has(BY(e,LY)||""),r="generic",i={w:560,h:840},s=e.match(EY);if(s?.[2]){let a=s[3]?`&start=${s[3]}`:"",o=e.includes("shorts");switch(r="video",s[1]){case"embed/":case"watch?v=":case"shorts/":default:e=`https://www.youtube.com/embed/${s[2]}?enablejsapi=1${a}`;break;case"playlist?list=":case"embed/videoseries?list=":e=`https://www.youtube.com/embed/videoseries?list=${s[2]}&enablejsapi=1${a}`}return i=o?{w:315,h:560}:{w:560,h:315},SY.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}}let a=e.match(kY);if(a?.[1]){let s=a?.[1],o=/^\d+$/.test(s)?void 0:new URIError("Invalid embed link format");return r="video",e=`https://player.vimeo.com/video/${s}?api=1`,i={w:560,h:315},SY.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,error:o,sandbox:{allowSameOrigin:n}}}if(e.match(CY))return r="generic",e=`https://www.figma.com/embed?embed_host=share&url=${encodeURIComponent(e)}`,i={w:550,h:550},SY.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}};let o=e.match(TY);if(o)return e="embed"===o[1]?o[0]:o[0].replace("/v","/embed"),SY.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}};if(IY.test(e)){let r=e.match(IY)[1],i=lO(`https://twitter.com/x/status/${r}`),s={type:"document",srcdoc:e=>OY(`<blockquote class="twitter-tweet" data-dnt="true" data-theme="${e}"><a href="${i}"></a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return SY.set(t,s),s}if(AY.test(e)){let[,r,i,s]=e.match(AY),a=lO(`https://reddit.com/r/${r}/comments/${i}/${s}`),o={type:"document",srcdoc:e=>OY(`<blockquote class="reddit-embed-bq" data-embed-theme="${e}"><a href="${a}"></a><br></blockquote><script async="" src="https://embed.reddit.com/widgets.js" charset="UTF-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return SY.set(t,o),o}if(_Y.test(e)){let[,t,r]=e.match(_Y),i=lO(`https://gist.github.com/${t}/${r}`),s={type:"document",srcdoc:()=>OY(`\n          <script src="${i}.js"><\/script>\n          <style type="text/css">\n            * { margin: 0px; }\n            table, .gist { height: 100%; }\n            .gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }\n          </style>\n        `),intrinsicSize:{w:550,h:720},sandbox:{allowSameOrigin:n}};return SY.set(e,s),s}return SY.set(e,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}},zY=e=>{let t;t=pO(e)?"IFrame element":e.link&&""!==e?.link?e.link:"Empty Web-Embed";let n=Math.max(Math.min(e.width/2,e.width/t.length),e.width/30),r=qA.Helvetica,i=gL({fontSize:n,fontFamily:r});return WG({x:e.x+e.width/2,y:e.y+e.height/2,strokeColor:"transparent"!==e.strokeColor?e.strokeColor:"black",backgroundColor:"transparent",fontFamily:r,fontSize:n,text:uF(t,i,e.width-20),textAlign:"center",verticalAlign:kN,angle:e.angle??0})};kG({name:"setEmbeddableAsActiveTool",trackEvent:{category:"toolbar"},target:"Tool",label:"toolBar.embeddable",perform:(e,t,n,r)=>{let i=wL(t,{type:"embeddable"});return PG(r.canvas,{...t,activeTool:i}),{elements:e,appState:{...t,activeTool:wL(t,{type:"embeddable"})},captureUpdate:yY}}});var BY=(e,t)=>{try{let{hostname:n}=new URL(e),r=n.replace(/^www\./,"");if(t instanceof Set){if(DY.has(r))return r;let e=r.replace(/^([^.]+)/,"*");return DY.has(e)?e:null}let i=t.replace(/^www\./,"");if(r===i)return i}catch{}return null},HY=(e,t)=>{if(!e)return!1;if(null!=t)if("function"==typeof t){let n=t(e);if("boolean"==typeof n)return n}else{if("boolean"==typeof t)return t;if(t instanceof RegExp)return t.test(e);if(Array.isArray(t)){for(let n of t)if(n instanceof RegExp){if(e.match(n))return!0}else if(BY(e,n))return!0;return!1}}return!!BY(e,DY)},$Y=(e,t,n)=>{let r={sets:t.sets,shape:t.shape,options:{...t.options,fixedDecimalPlaceDigits:n}};return e.draw(r)},WY=(e,t,n,r,i)=>{if(!r.enabled||!r.clip)return null;let s=uK(e,i);if(s){let e=t.ownerDocument.createElementNS(vN,"g");return e.setAttributeNS(vN,"clip-path",`url(#${s.id})`),n.forEach(t=>e.appendChild(t)),e}return null},XY=(e,t,n,r,i,s,a,o)=>{let l=s,c=a,[d,u,h,p]=sX(e,t),f=(h-d)/2-(e.x-d),m=(p-u)/2-(e.y-u);if(mO(e)){let n=uG(e,t);if(wO(n)){let[r,i,o,l]=sX(n,t),c=eG.getBoundTextElementPosition(n,e,t);f=(o-r)/2-(c.x-r),m=(l-i)/2-(c.y-i),s=s+c.x-e.x,a=a+c.y-e.y}}let g=180*e.angle/Math.PI,b=r;if(e.link){let t=r.ownerDocument.createElementNS(vN,"a");t.setAttribute("href",vG(e.link)),b.appendChild(t),b=t}let U=(e,t)=>{OL()&&e.setAttribute("data-id",t.id),b.appendChild(e)},y=(uK(e,t)?.opacity??100)*e.opacity/1e4;switch(e.type){case"selection":throw new Error("Selection rendering is not supported for SVG");case"rectangle":case"diamond":case"ellipse":{let r=UF.generateElementShape(e,null),i=$Y(n,r,2);1!==y&&(i.setAttribute("stroke-opacity",`${y}`),i.setAttribute("fill-opacity",`${y}`)),i.setAttribute("stroke-linecap","round"),i.setAttribute("transform",`translate(${s||0} ${a||0}) rotate(${g} ${f} ${m})`),U(WY(e,b,[i],o.frameRendering,t)||i,e);break}case"iframe":case"embeddable":{let d=UF.generateElementShape(e,o),u=$Y(n,d,2),h=e.opacity/100;1!==h&&(u.setAttribute("stroke-opacity",`${h}`),u.setAttribute("fill-opacity",`${h}`)),u.setAttribute("stroke-linecap","round"),u.setAttribute("transform",`translate(${s||0} ${a||0}) rotate(${g} ${f} ${m})`),U(u,e);let p=zY(e);XY(p,t,n,b,i,p.x+l-e.x,p.y+c-e.y,o);let y=$Y(n,d,2);for(y.setAttribute("stroke-linecap","round"),y.setAttribute("transform",`translate(${s||0} ${a||0}) rotate(${g} ${f} ${m})`);y.firstChild;)y.removeChild(y.firstChild);let x=iW(Math.min(e.width,e.height),e),v=FY(SG(e.link||""));if(!1===o.renderEmbeddables||"document"===v?.type){let t=r.ownerDocument.createElementNS(vN,"a");t.setAttribute("href",vG(e.link||"")),t.setAttribute("target","_blank"),t.setAttribute("rel","noopener noreferrer"),t.style.borderRadius=`${x}px`,y.appendChild(t)}else{let t=r.ownerDocument.createElementNS(vN,"foreignObject");t.style.width=`${e.width}px`,t.style.height=`${e.height}px`,t.style.border="none";let n=t.ownerDocument.createElementNS(vN,"div");n.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),n.style.width="100%",n.style.height="100%";let i=n.ownerDocument.createElement("iframe");i.src=v?.link??"",i.style.width="100%",i.style.height="100%",i.style.border="none",i.style.borderRadius=`${x}px`,i.style.top="0",i.style.left="0",i.allowFullscreen=!0,n.appendChild(i),t.appendChild(n),y.appendChild(t)}U(y,e);break}case"line":case"arrow":{let i=dG(e,t),l=r.ownerDocument.createElementNS(vN,"mask");if(i){l.setAttribute("id",`mask-${e.id}`);let n=r.ownerDocument.createElementNS(vN,"rect");s=s||0,a=a||0,n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("fill","#fff"),n.setAttribute("width",`${e.width+100+s}`),n.setAttribute("height",`${e.height+100+a}`),l.appendChild(n);let o=r.ownerDocument.createElementNS(vN,"rect"),c=eG.getBoundTextElementPosition(e,i,t),d=s+c.x-e.x,u=a+c.y-e.y;o.setAttribute("x",d.toString()),o.setAttribute("y",u.toString()),o.setAttribute("fill","#000"),o.setAttribute("width",`${i.width}`),o.setAttribute("height",`${i.height}`),o.setAttribute("opacity","1"),l.appendChild(o)}let c=r.ownerDocument.createElementNS(vN,"g");i&&c.setAttribute("mask",`url(#mask-${e.id})`),c.setAttribute("stroke-linecap","round"),UF.generateElementShape(e,o).forEach(t=>{let r=$Y(n,t,2);1!==y&&(r.setAttribute("stroke-opacity",`${y}`),r.setAttribute("fill-opacity",`${y}`)),r.setAttribute("transform",`translate(${s||0} ${a||0}) rotate(${g} ${f} ${m})`),"line"===e.type&&sW(e.points)&&"transparent"!==e.backgroundColor&&r.setAttribute("fill-rule","evenodd"),c.appendChild(r)});let d=WY(e,b,[c,l],o.frameRendering,t);d?(U(d,e),b.appendChild(d)):(U(c,e),b.append(l));break}case"freedraw":{let i=UF.generateElementShape(e,o),l=i?$Y(n,i,2):r.ownerDocument.createElementNS(vN,"g");1!==y&&(l.setAttribute("stroke-opacity",`${y}`),l.setAttribute("fill-opacity",`${y}`)),l.setAttribute("transform",`translate(${s||0} ${a||0}) rotate(${g} ${f} ${m})`),l.setAttribute("stroke","none");let c=r.ownerDocument.createElementNS(vN,"path");c.setAttribute("fill",e.strokeColor),c.setAttribute("d",kW(e)),l.appendChild(c),U(WY(e,b,[l],o.frameRendering,t)||l,e);break}case"image":{let n=Math.round(e.width),l=Math.round(e.height),c=dO(e)&&i[e.fileId];if(c){let{reuseImages:i=!0}=o,d=`image-${c.id}`,u=e.width,h=e.height;e.crop&&(({width:u,height:h}=lW(e)),d=`image-crop-${c.id}-${xQ(`${u}x${h}`)}`),i||(d=`image-${e.id}`);let p=r.querySelector(`#${d}`);if(!p){p=r.ownerDocument.createElementNS(vN,"symbol"),p.id=d;let t=r.ownerDocument.createElementNS(vN,"image");t.setAttribute("href",c.dataURL),t.setAttribute("preserveAspectRatio","none"),e.crop||!i?(t.setAttribute("width",`${u}`),t.setAttribute("height",`${h}`)):(t.setAttribute("width","100%"),t.setAttribute("height","100%")),p.appendChild(t),(b.querySelector("defs")||b).prepend(p)}let x=r.ownerDocument.createElementNS(vN,"use");x.setAttribute("href",`#${d}`),o.exportWithDarkMode&&c.mimeType!==lN.svg&&x.setAttribute("filter",dW);let v=0,w=0;if(e.crop){let{width:t,height:n}=lW(e);v=e.crop.x/(e.crop.naturalWidth/t),w=e.crop.y/(e.crop.naturalHeight/n)}let S=f+v,E=m+w;x.setAttribute("width",`${n+v}`),x.setAttribute("height",`${l+w}`),x.setAttribute("opacity",`${y}`),(1!==e.scale[0]||1!==e.scale[1])&&x.setAttribute("transform",`translate(${S} ${E}) scale(${e.scale[0]} ${e.scale[1]}) translate(${-S} ${-E})`);let k=r.ownerDocument.createElementNS(vN,"g");if(e.crop){let t=r.ownerDocument.createElementNS(vN,"mask");t.setAttribute("id",`mask-image-crop-${e.id}`),t.setAttribute("fill","#fff");let i=r.ownerDocument.createElementNS(vN,"rect");i.setAttribute("x",`${v}`),i.setAttribute("y",`${w}`),i.setAttribute("width",`${n}`),i.setAttribute("height",`${l}`),t.appendChild(i),b.appendChild(t),k.setAttribute("mask",`url(#${t.id})`)}if(k.appendChild(x),k.setAttribute("transform",`translate(${s-v} ${a-w}) rotate(${g} ${S} ${E})`),e.roundness){let t=r.ownerDocument.createElementNS(vN,"clipPath");t.id=`image-clipPath-${e.id}`;let n=r.ownerDocument.createElementNS(vN,"rect"),i=iW(Math.min(e.width,e.height),e);n.setAttribute("width",`${e.width}`),n.setAttribute("height",`${e.height}`),n.setAttribute("rx",`${i}`),n.setAttribute("ry",`${i}`),t.appendChild(n),U(t,e),k.setAttributeNS(vN,"clip-path",`url(#${t.id})`)}U(WY(e,b,[k],o.frameRendering,t)||k,e)}break}case"frame":case"magicframe":if(o.frameRendering.enabled&&o.frameRendering.outline){let t=document.createElementNS(vN,"rect");t.setAttribute("transform",`translate(${s||0} ${a||0}) rotate(${g} ${f} ${m})`),t.setAttribute("width",`${e.width}px`),t.setAttribute("height",`${e.height}px`),t.setAttribute("rx",tN.radius.toString()),t.setAttribute("ry",tN.radius.toString()),t.setAttribute("fill","none"),t.setAttribute("stroke",tN.strokeColor),t.setAttribute("stroke-width",tN.strokeWidth.toString()),U(t,e)}break;default:if(!mO(e))throw new Error(`Unimplemented type ${e.type}`);{let n=r.ownerDocument.createElementNS(vN,"g");1!==y&&(n.setAttribute("stroke-opacity",`${y}`),n.setAttribute("fill-opacity",`${y}`)),n.setAttribute("transform",`translate(${s||0} ${a||0}) rotate(${g} ${f} ${m})`);let i=e.text.replace(/\r\n?/g,"\n").split("\n"),l=WO(e.fontSize,e.lineHeight),c="center"===e.textAlign?e.width/2:"right"===e.textAlign?e.width:0,d=QH(e.fontFamily,e.fontSize,l),u=ML(e.text)?"rtl":"ltr",h="center"===e.textAlign?"middle":"right"===e.textAlign||"rtl"===u?"end":"start";for(let t=0;t<i.length;t++){let s=r.ownerDocument.createElementNS(vN,"text");s.textContent=i[t],s.setAttribute("x",`${c}`),s.setAttribute("y",`${t*l+d}`),s.setAttribute("font-family",mL(e)),s.setAttribute("font-size",`${e.fontSize}px`),s.setAttribute("fill",e.strokeColor),s.setAttribute("text-anchor",h),s.setAttribute("style","white-space: pre;"),s.setAttribute("direction",u),s.setAttribute("dominant-baseline","alphabetic"),n.appendChild(s)}U(WY(e,b,[n],o.frameRendering,t)||n,e)}}},VY=e=>{let t=e.extensions?.reduce((e,t)=>(e.push(lN[t]),e),[]),n=e.extensions?.reduce((e,t)=>"jpg"===t?e.concat(".jpg",".jpeg"):e.concat(`.${t}`),[]);return async function(...e){return(await aA).default(...e)}({description:e.description,extensions:n,mimeTypes:t,multiple:e.multiple??!1,legacySetup:(t,n,r)=>{let i=bL(n,500),s=()=>{a(),document.addEventListener("keyup",i),document.addEventListener("pointerup",i),i()},a=()=>{if(r.files?.length){let n=e.multiple?[...r.files]:r.files[0];t(n)}};requestAnimationFrame(()=>{window.addEventListener("focus",s)});let o=window.setInterval(()=>{a()},500);return e=>{clearInterval(o),i.cancel(),window.removeEventListener("focus",s),document.removeEventListener("keyup",i),document.removeEventListener("pointerup",i),e&&e(new SH)}}})},GY=(e,t)=>async function(...e){return(await oA).default(...e)}(e,{fileName:`${t.name}.${t.extension}`,description:t.description,extensions:[`.${t.extension}`],mimeTypes:t.mimeTypes},t.fileHandle),YY=(e,t)=>{let n={};for(let r of e)!r.isDeleted&&"fileId"in r&&r.fileId&&t[r.fileId]&&(n[r.fileId]=t[r.fileId]);return n},qY=(e,t,n,r)=>{let i={type:pN.excalidraw,version:wN,source:fN,elements:EQ(e),appState:fD(t),files:YY(e,n)};return JSON.stringify(i,null,2)},ZY=async(e,t,n,r=t.name||nD)=>{let i=qY(e,t,n),s=new Blob([i],{type:lN.excalidraw});return{fileHandle:await GY(s,{name:r,extension:"excalidraw",description:"Excalidraw file",fileHandle:_Q(t.fileHandle)?null:t.fileHandle})}},KY=e=>"object"==typeof e&&e&&e.type===pN.excalidrawLibrary&&(1===e.version||2===e.version),QY=e=>{let t={type:pN.excalidrawLibrary,version:SN,source:fN,libraryItems:e};return JSON.stringify(t,null,2)},JY=e=>new Promise((t,n)=>{let r=new Image;r.onload=()=>{t(r)},r.onerror=e=>{n(e)},r.src=e}),eq=async({fileIds:e,files:t,imageCache:n})=>{let r=new Map,i=new Map;return await Promise.all(e.reduce((e,s)=>{let a=t[s];return a&&!r.has(s)?(r.set(s,!0),e.concat((async()=>{try{if(a.mimeType===lN.binary)throw new Error("Only images can be added to ImageCache");let e=JY(a.dataURL),t={image:e,mimeType:a.mimeType};n.set(s,t);let r=await e;n.set(s,{...t,image:r})}catch{i.set(s,!0)}})())):e},[])),{imageCache:n,updatedFiles:r,erroredFiles:i}},tq=e=>e.filter(e=>dO(e)),nq=e=>{let t=(new DOMParser).parseFromString(e,lN.svg),n=t.querySelector("svg");if(t.querySelector("parsererror")||!(e=>"svg"===e?.nodeName.toLowerCase())(n))throw new Error("Invalid SVG");{n.hasAttribute("xmlns")||n.setAttribute("xmlns",vN);let e=n.getAttribute("width"),t=n.getAttribute("height");(e?.includes("%")||"auto"===e)&&(e=null),(t?.includes("%")||"auto"===t)&&(t=null);let r=n.getAttribute("viewBox");if(!e||!t){if(e=e||"50",t=t||"50",r){let n=r.match(/\d+ +\d+ +(\d+(?:\.\d+)?) +(\d+(?:\.\d+)?)/);n&&([,e,t]=n)}n.setAttribute("width",e),n.setAttribute("height",t)}return r||n.setAttribute("viewBox",`0 0 ${e} ${t}`),n.outerHTML}},rq=document.createElement("img");rq.src=`data:${lN.svg}, ${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#1971c2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>')}`;var iq=document.createElement("img");iq.src=`data:${lN.svg}, ${encodeURIComponent('<svg  xmlns="http://www.w3.org/2000/svg"  width="16"  height="16"  viewBox="0 0 24 24"  fill="none"  stroke="#1971c2"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-big-right-line"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 9v-3.586a1 1 0 0 1 1.707 -.707l6.586 6.586a1 1 0 0 1 0 1.414l-6.586 6.586a1 1 0 0 1 -1.707 -.707v-3.586h-6v-6h6z" /><path d="M3 9v6" /></svg>')}`;var sq=([e,t,n,r],i,s)=>{let a=14/s.zoom.value,o=14/s.zoom.value,l=14/s.zoom.value,c=(e+n)/2,d=(t+r)/2,u=6/(2*s.zoom.value),h=4/s.zoom.value,p=n+h-u,f=t-h-l+u,[m,g]=OD(PD(p+a/2,f+o/2),PD(c,d),i);return[m-a/2,g-o/2,a,o]},aq=(e,t,n,[r,i])=>{let s=4/n.zoom.value,[a,o,l,c]=sX(e,t),[d,u,h,p]=sq([a,o,l,c],e.angle,n);return r>d-s&&r<d+s+h&&i>u-s&&i<u+p+s},oq=(e,t,n,[r,i],s)=>!(!e.link||n.selectedElementIds[e.id])&&(!(s||!n.viewModeEnabled||!g$(r,i,e,t))||aq(e,t,n,PD(r,i))),lq=(e,t,n,r,i=!0)=>{e.beginPath(),e.arc(t,n,r,0,2*Math.PI),e.fill(),i&&e.stroke()},cq=(e,t)=>[e.width/t,e.height/t],dq=({canvas:e,scale:t,normalizedWidth:n,normalizedHeight:r,theme:i,isExporting:s,viewBackgroundColor:a})=>{let o=e.getContext("2d");return o.setTransform(1,0,0,1,0,0),o.scale(t,t),s&&i===eN&&(o.filter=gN),"string"==typeof a?(("transparent"===a||5===a.length||9===a.length||/(hsla|rgba)\(/.test(a))&&o.clearRect(0,0,n,r),o.save(),o.fillStyle=a,o.fillRect(0,0,n,r),o.restore()):o.clearRect(0,0,n,r),o},uq=(e,t)=>{let n=window.location.href;try{let t=new URL(n);return t.searchParams.set(lD,e),vG(t.toString())}catch(cA){}return vG(n)},hq=(e,t)=>{if(e.length>0&&pq(e)){if(1===e.length)return{id:e[0].id,type:"element"};if(e.length>1){let n=Object.keys(t.selectedGroupIds)[0];return n?{id:n,type:"group"}:{id:e[0].groupIds[0],type:"group"}}}return null},pq=e=>!!(1===e.length||e.length>1&&PV(e)),fq=e=>{try{let t=new URL(e);return t.searchParams.has(lD)&&t.host===window.location.host}catch{return!1}},mq="#dddddd",gq="#e5e5e5",bq=(e,t,n,r)=>{t.translate(e.x+r.scrollX,e.y+r.scrollY),t.beginPath(),t.roundRect?t.roundRect(0,0,e.width,e.height,tN.radius/r.zoom.value):t.rect(0,0,e.width,e.height),t.clip(),t.translate(-(e.x+r.scrollX),-(e.y+r.scrollY))},Uq={regularLink:null,elementLink:null},yq=(e,t,n,r)=>{if(e.link&&!n.selectedElementIds[e.id]){let[i,s,a,o]=sX(e,r),[l,c,d,u]=sq([i,s,a,o],e.angle,n),h=l+d/2,p=c+u/2;t.save(),t.translate(n.scrollX+h,n.scrollY+p),t.rotate(e.angle);let f=fq(e.link)?"elementLink":"regularLink",m=Uq[f];if(!m||m.zoom!==n.zoom.value){m=Object.assign(document.createElement("canvas"),{zoom:n.zoom.value}),m.width=d*window.devicePixelRatio*n.zoom.value,m.height=u*window.devicePixelRatio*n.zoom.value,Uq[f]=m;let e=m.getContext("2d");e.scale(window.devicePixelRatio*n.zoom.value,window.devicePixelRatio*n.zoom.value),e.fillStyle="#fff",e.fillRect(0,0,d,u),"elementLink"===f?e.drawImage(iq,0,0,d,u):e.drawImage(rq,0,0,d,u),e.restore()}t.drawImage(m,l-h,c-p,d,u),t.restore()}},xq=({canvas:e,rc:t,elementsMap:n,allElementsMap:r,visibleElements:i,scale:s,appState:a,renderConfig:o})=>{if(null===e)return;let{renderGrid:l=!0,isExporting:c}=o,[d,u]=cq(e,s),h=dq({canvas:e,scale:s,normalizedWidth:d,normalizedHeight:u,theme:a.theme,isExporting:c,viewBackgroundColor:a.viewBackgroundColor});h.scale(a.zoom.value,a.zoom.value),l&&((e,t,n,r,i,s,a,o)=>{let l=r%t-t,c=i%t-t,d=t*s.value,u=1/s.value;e.save(),1===s.value&&e.translate(l%1?0:.5,c%1?0:.5);for(let h=l;h<l+a+2*t;h+=t){let i=n>1&&Math.round(h-r)%(n*t)===0;if(!i&&d<10)continue;let a=Math.min(1/s.value,i?4:1);e.lineWidth=a;let l=[3*a,u+(a+u)];e.beginPath(),e.setLineDash(i?[]:l),e.strokeStyle=i?mq:gq,e.moveTo(h,c-t),e.lineTo(h,Math.ceil(c+o+2*t)),e.stroke()}for(let h=c;h<c+o+2*t;h+=t){let r=n>1&&Math.round(h-i)%(n*t)===0;if(!r&&d<10)continue;let o=Math.min(1/s.value,r?4:1);e.lineWidth=o;let c=[3*o,u+(o+u)];e.beginPath(),e.setLineDash(r?[]:c),e.strokeStyle=r?mq:gq,e.moveTo(l-t,h),e.lineTo(Math.ceil(l+a+2*t),h),e.stroke()}e.restore()})(h,a.gridSize,a.gridStep,a.scrollX,a.scrollY,a.zoom,d/a.zoom.value,u/a.zoom.value);let p=new Set;i.forEach(e=>{e.groupIds.length>0&&a.frameToHighlight&&a.selectedElementIds[e.id]&&(iK(e,a.frameToHighlight,n)||e.groupIds.find(e=>p.has(e)))&&e.groupIds.forEach(e=>p.add(e))});let f=new Map;i.filter(e=>!fO(e)).forEach(e=>{try{let i=e.frameId||a.frameToHighlight?.id;if(mO(e)&&e.containerId&&n.has(e.containerId))return;if(h.save(),i&&a.frameRendering.enabled&&a.frameRendering.clip){let i=UK(e,n,a);i&&xK(e,i,a,n,f)&&bq(i,h,0,a),SW(e,n,r,t,h,o,a)}else SW(e,n,r,t,h,o,a);let s=dG(e,n);s&&SW(s,n,r,t,h,o,a),h.restore(),c||yq(e,h,a,n)}catch(i){}}),i.filter(e=>fO(e)).forEach(e=>{try{let i=()=>{if(SW(e,n,r,t,h,o,a),fO(e)&&(c||hO(e)&&!0!==o.embedsValidationStatus.get(e.id))&&e.width&&e.height){let i=zY(e);SW(i,n,r,t,h,o,a)}c||yq(e,h,a,n)};if((e.frameId||a.frameToHighlight?.id)&&a.frameRendering.enabled&&a.frameRendering.clip){h.save();let t=UK(e,n,a);t&&xK(e,t,a,n,f)&&bq(t,h,0,a),i(),h.restore()}else i()}catch(i){}}),o.pendingFlowchartNodes?.forEach(e=>{try{SW(e,n,r,t,h,o,a)}catch(i){}})},vq=UL(e=>{xq(e)},{trailing:!0}),wq=(e,t)=>{t?vq(e):xq(e)},Sq=(e,t)=>{if(e.width<=t)return e;let n=document.createElement("canvas").getContext("2d");n.font=gL({fontFamily:e.fontFamily,fontSize:e.fontSize});let r=e.text;if(n.measureText(r).width>t)for(let i=r.length;i>0;i--){let e=`${r.slice(0,i)}...`;if(n.measureText(e).width<=t){r=e;break}}return LK(e,{text:r,width:t})},Eq=(e,t)=>(t=t||hD().frameRendering,{enabled:!!e||t.enabled,outline:!e&&t.outline,name:!e&&t.name,clip:!!e||t.clip}),kq=({elements:e,exportingFrame:t,frameRendering:n,exportWithDarkMode:r})=>{let i;return i=t?wK(e,t):n.enabled&&n.name?((e,t)=>{let n=[];for(let r of e){if(UO(r)){let e=WG({x:r.x,y:r.y-tN.nameOffsetY,fontFamily:qA.Helvetica,fontSize:tN.nameFontSize,lineHeight:tN.nameLineHeight,strokeColor:t.exportWithDarkMode?tN.nameColorDarkTheme:tN.nameColorLightTheme,text:vK(r)});e.y-=e.height,e=Sq(e,r.width),n.push(e)}n.push(r)}return n})(e,{exportWithDarkMode:r}):e,i},Cq=async(e,t,n,{exportBackground:r,exportPadding:i=yN,viewBackgroundColor:s,exportingFrame:a},o=(e,n)=>{let r=document.createElement("canvas");return r.width=e*t.exportScale,r.height=n*t.exportScale,{canvas:r,scale:t.exportScale}},l=async()=>{await KH.loadElementsFonts(e)})=>{await l();let c=Eq(a??null,t.frameRendering??null);a&&(c.clip=!1);let d=kq({elements:e,exportingFrame:a,exportWithDarkMode:t.exportWithDarkMode,frameRendering:c});a&&(i=0);let[u,h,p,f]=jq(a?[a]:lK(d),i),{canvas:m,scale:g=1}=o(p,f),b=hD(),{imageCache:U}=await eq({imageCache:new Map,fileIds:tq(d).map(e=>e.fileId),files:n});return wq({canvas:m,rc:wP.canvas(m),elementsMap:iO(DL(d)),allElementsMap:iO(DL(iY(e))),visibleElements:d,scale:g,appState:{...t,frameRendering:c,viewBackgroundColor:r?s:null,scrollX:-u+i,scrollY:-h+i,zoom:b.zoom,shouldCacheIgnoreZoom:!1,theme:t.exportWithDarkMode?eN:JA},renderConfig:{canvasBackgroundColor:s,imageCache:U,renderGrid:!1,isExporting:!0,embedsValidationStatus:new Map,elementsPendingErasure:new Set,pendingFlowchartNodes:null}}),m},_q=e=>document.createComment(` ${e} `),Mq=async(e,t,n,r)=>{let i=Eq(r?.exportingFrame??null,t.frameRendering??null),{exportPadding:s=yN,exportWithDarkMode:a=!1,viewBackgroundColor:o,exportScale:l=1,exportEmbedScene:c}=t,{exportingFrame:d=null}=r||{},u=kq({elements:e,exportingFrame:d,exportWithDarkMode:a,frameRendering:i});d&&(s=0);let[h,p,f,m]=jq(d?[d]:lK(u),s),g=-h+s,b=-p+s,U=document.createElementNS(vN,"svg");U.setAttribute("version","1.1"),U.setAttribute("xmlns",vN),U.setAttribute("viewBox",`0 0 ${f} ${m}`),U.setAttribute("width",""+f*l),U.setAttribute("height",""+m*l),a&&U.setAttribute("filter",gN);let y=U.ownerDocument.createElementNS(vN,"defs"),x=U.ownerDocument.createElementNS(vN,"metadata");if(U.appendChild(_q("svg-source:excalidraw")),U.appendChild(x),U.appendChild(y),c)try{Iq({metadataElement:x,payload:qY(e,t,n||{})})}catch(_){}let v=oK(e);if(v.length){let t=DL(e);for(let e of v){let n=U.ownerDocument.createElementNS(vN,"clipPath");n.setAttribute("id",e.id);let[r,i,s,a]=sX(e,t),o=(s-r)/2-(e.x-r),l=(a-i)/2-(e.y-i),c=U.ownerDocument.createElementNS(vN,"rect");c.setAttribute("transform",`translate(${e.x+g} ${e.y+b}) rotate(${e.angle} ${o} ${l})`),c.setAttribute("width",`${e.width}`),c.setAttribute("height",`${e.height}`),d||(c.setAttribute("rx",`${tN.radius}`),c.setAttribute("ry",`${tN.radius}`)),n.appendChild(c),y.appendChild(n)}}let w=r?.skipInliningFonts?[]:await KH.generateFontFaceDeclarations(e),S="\n      ",E=U.ownerDocument.createElementNS(vN,"style");if(E.classList.add("style-fonts"),E.appendChild(document.createTextNode(`${S}${w.join(S)}`)),y.appendChild(E),t.exportBackground&&o){let e=U.ownerDocument.createElementNS(vN,"rect");e.setAttribute("x","0"),e.setAttribute("y","0"),e.setAttribute("width",`${f}`),e.setAttribute("height",`${m}`),e.setAttribute("fill",o),U.appendChild(e)}let k=wP.svg(U),C=r?.renderEmbeddables??!1;return((e,t,n,r,i,s)=>{r&&(e.filter(e=>!fO(e)).forEach(e=>{if(!e.isDeleted){if(mO(e)&&e.containerId&&t.has(e.containerId))return;try{XY(e,t,n,r,i,e.x+s.offsetX,e.y+s.offsetY,s);let a=dG(e,t);a&&XY(a,t,n,r,i,a.x+s.offsetX,a.y+s.offsetY,s)}catch(o){}}}),e.filter(e=>fO(e)).forEach(e=>{if(!e.isDeleted)try{XY(e,t,n,r,i,e.x+s.offsetX,e.y+s.offsetY,s)}catch(o){}}))})(u,iO(DL(u)),k,U,n||{},{offsetX:g,offsetY:b,isExporting:!0,exportWithDarkMode:a,renderEmbeddables:C,frameRendering:i,canvasBackgroundColor:o,embedsValidationStatus:C?new Map(u.filter(e=>UO(e)).map(e=>[e.id,!0])):new Map,reuseImages:r?.reuseImages??!0}),U},Iq=({payload:e,metadataElement:t})=>{let n=qQ(JSON.stringify(KQ({text:e})),!0);t.appendChild(_q(`payload-type:${lN.excalidraw}`)),t.appendChild(_q("payload-version:2")),t.appendChild(_q("payload-start")),t.appendChild(document.createTextNode(n)),t.appendChild(_q("payload-end"))},jq=(e,t)=>{let[n,r,i,s]=gX(e);return[n,r,vL(n,i)+2*t,vL(r,s)+2*t]},Tq=class{constructor(e){this.scoreFunction=e,XM(this,"content",[])}sinkDown(e){let t=this.content[e];for(;e>0;){let n=(e+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(t)<this.scoreFunction(r)))break;this.content[n]=t,this.content[e]=r,e=n}}bubbleUp(e){let t=this.content.length,n=this.content[e],r=this.scoreFunction(n);for(;;){let i=e+1<<1,s=i-1,a=null,o=0;if(s<t){let e=this.content[s];o=this.scoreFunction(e),o<r&&(a=s)}if(i<t){let e=this.content[i];this.scoreFunction(e)<(null===a?r:o)&&(a=i)}if(null===a)break;this.content[e]=this.content[a],this.content[a]=n,e=a}}push(e){this.content.push(e),this.sinkDown(this.content.length-1)}pop(){if(0===this.content.length)return null;let e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),e}remove(e){if(0===this.content.length)return;let t=this.content.indexOf(e),n=this.content.pop();t<this.content.length&&(this.content[t]=n,this.scoreFunction(n)<this.scoreFunction(e)?this.sinkDown(t):this.bubbleUp(t))}size(){return this.content.length}rescoreElement(e){this.sinkDown(this.content.indexOf(e))}},Rq=40,Pq=1e6,Aq=(e,t,n,r)=>{if(e.points.length<2)return{points:n.points??e.points};e.x<-Pq||e.x>Pq||e.y<-Pq||e.y>Pq||e.x+(n?.points?.[n?.points?.length-1]?.[0]??0)<-Pq||e.x+(n?.points?.[n?.points?.length-1]?.[0]??0)>Pq||e.y+(n?.points?.[n?.points?.length-1]?.[1]??0)<-Pq||e.y+(n?.points?.[n?.points?.length-1]?.[1]??0)>Pq||e.x+(e?.points?.[e?.points?.length-1]?.[0]??0)<-Pq||e.x+(e?.points?.[e?.points?.length-1]?.[0]??0)>Pq||e.y+(e?.points?.[e?.points?.length-1]?.[1]??0)<-Pq||e.y,e.x=bD(e.x,-Pq,Pq),e.y=bD(e.y,-Pq,Pq),n.points&&(n.points=n.points.map(([e,t])=>PD(bD(e,-Pq,Pq),bD(t,-Pq,Pq))));let i=n.points?n.points&&2===n.points.length?e.points.map((t,r)=>0===r?n.points[0]:r===e.points.length-1?n.points[1]:t):n.points.slice():e.points.slice(),s=typeof n.startBinding<"u"?n.startBinding:e.startBinding,a=typeof n.endBinding<"u"?n.endBinding:e.endBinding,o=s&&qq(s.elementId,t),l=a&&qq(a.elementId,t);if(0===t.size&&iZ(i)||o?.id!==s?.elementId||l?.id!==a?.elementId)return Zq(i.map(t=>PD(e.x+t[0],e.y+t[1])),e.fixedSegments,e.startIsSpecial,e.endIsSpecial);let{startHeading:c,endHeading:d,startGlobalPoint:u,endGlobalPoint:h,hoveredStartElement:p,hoveredEndElement:f,...m}=Nq({x:e.x,y:e.y,startBinding:s,endBinding:a,startArrowhead:e.startArrowhead,endArrowhead:e.endArrowhead,points:e.points},t,i,o,l,r),g=n.fixedSegments??e.fixedSegments??[];return n.points||n.fixedSegments||n.startBinding||n.endBinding?n.startBinding===e.startBinding&&n.endBinding===e.endBinding&&(n.points??[]).every((t,n)=>LD(t,e.points[n]??PD(1/0,1/0)))?{}:0===g.length?Zq(Kq(Qq(Dq(e,{startHeading:c,endHeading:d,startGlobalPoint:u,endGlobalPoint:h,hoveredEndElement:f,...m})??[])),g,null,null):(e.fixedSegments?.length??0)>g.length?((e,t,n)=>{let r=t.map(e=>e.index),i=(e.fixedSegments?.map(e=>e.index)??[]).findIndex(e=>!r.includes(e));if(-1===i||!e.fixedSegments?.[i])return{points:e.points};let s=e.fixedSegments[i].index,a=e.fixedSegments[i-1],o=e.fixedSegments[i+1],l=e.x+(a?a.end[0]:0),c=e.y+(a?a.end[1]:0),d=a?null:e.startBinding,u=o?null:e.endBinding,{startHeading:h,endHeading:p,startGlobalPoint:f,endGlobalPoint:m,hoveredStartElement:g,hoveredEndElement:b,...U}=Nq({x:l,y:c,startBinding:d,endBinding:u,startArrowhead:null,endArrowhead:null,points:e.points},n,[PD(0,0),PD(e.x+(o?.start[0]??e.points[e.points.length-1][0])-l,e.y+(o?.start[1]??e.points[e.points.length-1][1])-c)],d&&qq(d.elementId,n),u&&qq(u.elementId,n),{isDragging:!1}),{points:y}=Zq(Kq(Qq(Dq(e,{startHeading:h,endHeading:p,startGlobalPoint:f,endGlobalPoint:m,hoveredEndElement:b,...U})??[])),t,null,null),x=[];if(a)for(let E=0;E<a.index;E++)x.push(PD(e.x+e.points[E][0],e.y+e.points[E][1]));if(y.forEach(t=>{x.push(PD(e.x+(a?a.end[0]:0)+t[0],e.y+(a?a.end[1]:0)+t[1]))}),o)for(let E=o.index;E<e.points.length;E++)x.push(PD(e.x+e.points[E][0],e.y+e.points[E][1]));let v=(o?.index??e.points.length)-(a?.index??0)-1,w=t.map(e=>e.index>s?{...e,index:e.index-v+(y.length-1)}:e),S=x.flatMap((e,t)=>{let n=x[t-1],r=x[t+1];if(n&&r){let i=BW(e,n),s=BW(r,e);if($W(i,s))return w.forEach(e=>{e.index>t&&(e.index-=1)}),[];if($W(i,VW(s)))return w.forEach(e=>{e.index>t&&(e.index+=1)}),[e,e]}return[e]});return Zq(S,w,!1,!1)})(e,g,t):n.points?n.points&&n.fixedSegments?n:((e,t,n,r,i,s,a,o,l)=>{let c=e.startIsSpecial??null,d=e.endIsSpecial??null,u=t.map((n,r)=>0===r||r===t.length-1?PD(e.x+n[0],e.y+n[1]):PD(e.x+e.points[r][0],e.y+e.points[r][1])),h=n.map(n=>({...n,start:PD(e.x+(n.start[0]-t[0][0]),e.y+(n.start[1]-t[0][1])),end:PD(e.x+(n.end[0]-t[0][0]),e.y+(n.end[1]-t[0][1]))})),p=[],f=2+(c?1:0),m=2+(d?1:0);for(;p.length+f<u.length-m;)p.push(u[p.length+f]);{let e=u[c?2:1],t=u[c?3:2],n=WW(r),i=WW(zW(CD(e,t)));if(o&&n===i){let e=$W(r,n?NW:DW);if(p.unshift(PD(i?s[0]+(e?Rq:-40):t[0],i?t[1]:s[1]+(e?Rq:-40))),p.unshift(PD(n?s[0]+(e?Rq:-40):s[0],n?s[1]:s[1]+(e?Rq:-40))),!c){c=!0;for(let e of h)e.index>1&&(e.index+=1)}}else if(p.unshift(PD(i?s[0]:e[0],i?e[1]:s[1])),c){c=!1;for(let e of h)e.index>1&&(e.index-=1)}p.unshift(s)}{let e=u[u.length-(d?3:2)],t=u[u.length-(d?4:3)],n=WW(i),r=HW(t,e);if(l&&n===r){let e=$W(i,n?NW:DW);p.push(PD(r?a[0]+(e?Rq:-40):t[0],r?t[1]:a[1]+(e?Rq:-40))),p.push(PD(n?a[0]+(e?Rq:-40):a[0],n?a[1]:a[1]+(e?Rq:-40))),d||(d=!0)}else p.push(PD(r?a[0]:e[0],r?e[1]:a[1])),d&&(d=!1)}return p.push(a),Zq(p,h.map(({index:e})=>({index:e,start:p[e-1],end:p[e]})).map(e=>({...e,start:PD(e.start[0]-s[0],e.start[1]-s[1]),end:PD(e.end[0]-s[0],e.end[1]-s[1])})),c,d)})(e,i,g,c,d,u,h,p,f):((e,t,n,r,i,s)=>{let a=t.map((t,n)=>null==e.fixedSegments||void 0===e.fixedSegments[n]||e.fixedSegments[n].index!==t.index||(t.start[0]!==e.fixedSegments[n].start[0]&&t.end[0]!==e.fixedSegments[n].end[0])!=(t.start[1]!==e.fixedSegments[n].start[1]&&t.end[1]!==e.fixedSegments[n].end[1])?n:null).filter(e=>null!==e).shift();if(null==a)return{points:e.points};let o=e.fixedSegments?.findIndex(e=>1===e.index)??-1,l=e.fixedSegments?.findIndex(t=>t.index===e.points.length-1)??-1,c=BD(t[a].start,t[a].end),d=c<45;if(-1===o&&1===t[a].index&&i){let e=WW(n),r=$W(n,e?NW:DW)?d?c/2:Rq:d?-c/2:-40;t[a].start=PD(t[a].start[0]+(e?r:0),t[a].start[1]+(e?0:r))}if(-1===l&&t[a].index===e.points.length-1&&s){let e=WW(r),n=$W(r,e?NW:DW)?d?c/2:Rq:d?-c/2:-40;t[a].end=PD(t[a].end[0]+(e?n:0),t[a].end[1]+(e?0:n))}let u=t.map(t=>({...t,start:PD(e.x+t.start[0],e.y+t.start[1]),end:PD(e.x+t.end[0],e.y+t.end[1])})),h=e.points.map((t,n)=>PD(e.x+t[0],e.y+t[1])),p=u[a].index-1,f=u[a].index,m=u[a].start,g=u[a].end,b=h[p-1]&&!LD(h[p],h[p-1])?HW(h[p-1],h[p]):void 0,U=h[f+1]&&!LD(h[f],h[f+1])?HW(h[f+1],h[f]):void 0;if(void 0!==b){let e=b?1:0;h[p-1][e]=m[e]}if(h[p]=m,h[f]=g,void 0!==U){let e=U?1:0;h[f+1][e]=g[e]}let y=u.findIndex(e=>e.index===p);if(-1!==y){let e=HW(u[y].end,u[y].start)?1:0;u[y].start[e]=m[e],u[y].end=m}let x=u.findIndex(e=>e.index===f+1);if(-1!==x){let e=HW(u[x].end,u[x].start)?1:0;u[x].end[e]=g[e],u[x].start=g}if(-1===o&&0===p){let t=i?WW(n):HW(h[1],h[0]);h.unshift(PD(t?m[0]:e.x+e.points[0][0],t?e.y+e.points[0][1]:m[1])),i&&h.unshift(PD(e.x+e.points[0][0],e.y+e.points[0][1]));for(let e of u)e.index+=i?2:1}if(-1===l&&f===e.points.length-1){let t=WW(r);h.push(PD(t?g[0]:e.x+e.points[e.points.length-1][0],t?e.y+e.points[e.points.length-1][1]:g[1])),s&&h.push(PD(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]))}return Zq(h,u.map(t=>({...t,start:PD(t.start[0]-e.x,t.start[1]-e.y),end:PD(t.end[0]-e.x,t.end[1]-e.y)})),!1,!1)})(e,g,c,d,p,f):((e,t)=>{let n=e.fixedSegments?e.fixedSegments.slice():null;if(n){let r=[];e.points.map(t=>PD(e.x+t[0],e.y+t[1])).forEach((t,i,s)=>{if(i<2)return r.push(t);let a=BW(t,s[i-1]),o=BW(s[i-1],s[i-2]);if($W(a,o)){let t=n?.findIndex(e=>e.index===i-1)??-1,a=n?.findIndex(e=>e.index===i)??-1;-1!==a&&(n[a].start=PD(s[i-2][0]-e.x,s[i-2][1]-e.y)),-1!==t&&n.splice(t,1),r.splice(-1,1),n.forEach(e=>{e.index>i-1&&(e.index-=1)})}return r.push(t)});let i=[];r.forEach((e,t,r)=>{if(t<3)return i.push(e);if(BD(r[t-2],r[t-1])<1){let s=n?.findIndex(e=>e.index===t-2)??-1,a=n?.findIndex(e=>e.index===t-1)??-1;-1!==a&&n.splice(a,1),-1!==s&&n.splice(s,1),i.splice(-2,2),n.forEach(e=>{e.index>t-2&&(e.index-=2)});let o=HW(e,r[t-1]);return i.push(PD(o?e[0]:r[t-2][0],o?r[t-2][1]:e[1]))}i.push(e)});let s=n.filter(e=>1!==e.index&&e.index!==i.length-1);return 0===s.length?Zq(Kq(Qq(Dq(e,Nq(e,t,i.map(t=>PD(t[0]-e.x,t[1]-e.y)),e.startBinding&&qq(e.startBinding.elementId,t),e.endBinding&&qq(e.endBinding.elementId,t)))??[])),s,null,null):(BM.DEV&&YL(iZ(i),"Invalid elbow points with fixed segments"),Zq(i,s,e.startIsSpecial,e.endIsSpecial))}return{x:e.x,y:e.y,points:e.points,fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}})(e,t)},Nq=(e,t,n,r,i,s)=>{let a=FD(n[0],kD(e.x,e.y)),o=FD(n[n.length-1],kD(e.x,e.y)),l=r,c=i;if(s?.isDragging){let e=Array.from(t.values());l=nZ(a,t,e,s?.zoom)||r,c=nZ(o,t,e,s?.zoom)||i}let d=eZ({...e,points:n},"start",e.startBinding?.fixedPoint,a,r,l,s?.isDragging),u=eZ({...e,points:n},"end",e.endBinding?.fixedPoint,o,i,c,s?.isDragging),h=tZ(d,u,t,l,a),p=tZ(u,d,t,c,o),f=[d[0]-2,d[1]-2,d[0]+2,d[1]+2],m=[u[0]-2,u[1]-2,u[0]+2,u[1]+2],g=l?nW(l,Lq(h,e.startArrowhead?30:10,1)):f,b=c?nW(c,Lq(p,e.endArrowhead?30:10,1)):m,U=rW(d,c?nW(c,Lq(p,Rq,Rq)):m)||rW(u,l?nW(l,Lq(h,Rq,Rq)):f),y=Yq(U?[f,m]:[g,b]),x=Bq(U?f:g,U?m:b,y,U?Lq(h,l||c?Rq:0,0):Lq(h,l||c?Rq-(e.startArrowhead?30:10):0,Rq),U?Lq(p,l||c?Rq:0,0):Lq(p,l||c?Rq-(e.endArrowhead?30:10):0,Rq),U,l&&nW(l),c&&nW(c));return{dynamicAABBs:x,startDonglePosition:$q(x[0],h,d),startGlobalPoint:d,startHeading:h,endDonglePosition:$q(x[1],p,u),endGlobalPoint:u,endHeading:p,commonBounds:y,hoveredStartElement:l,hoveredEndElement:c,boundsOverlap:U,startElementBounds:g,endElementBounds:b}},Dq=(e,t)=>{let{dynamicAABBs:n,startDonglePosition:r,startGlobalPoint:i,startHeading:s,endDonglePosition:a,endGlobalPoint:o,endHeading:l,commonBounds:c,hoveredEndElement:d}=t,u=Hq(n,r||i,s,a||o,l,c),h=r&&Gq(r,u),p=a&&Gq(a,u),f=Gq(o,u);f&&d&&(f.closed=!0);let m=Gq(i,u);m&&e.startBinding&&(m.closed=!0);let g=h&&p&&(rW(h.pos,n[1])||rW(p.pos,n[0])),b=Oq(h||m,p||f,u,s||NW,l||NW,g?[]:n);if(b){let e=b.map(e=>[e.pos[0],e.pos[1]]);return h&&e.unshift(i),p&&e.push(o),e}return null},Lq=(e,t,n)=>{switch(e){case OW:return[t,n,n,n];case NW:return[n,t,n,n];case DW:return[n,n,t,n]}return[n,n,n,t]},Oq=(e,t,n,r,i,s)=>{let a=zq(e.pos,t.pos),o=new Tq(e=>e.f);for(o.push(e);o.size()>0;){let l=o.pop();if(!l||l.closed)continue;if(l===t)return Fq(e,l);l.closed=!0;let c=Xq(l.addr,n);for(let n=0;n<4;n++){let d=c[n];if(!d||d.closed)continue;let u=$D(d.pos,l.pos,.5);if(aO(...s.map(e=>rW(u,e))))continue;let h=Jq(n),p=l.parent?zW(CD(l.pos,l.parent.pos)):r,f=VW(p);if($W(f,h)||rZ(e.addr,d.addr)&&$W(h,r)||rZ(t.addr,d.addr)&&$W(h,i))continue;let m=p!==h,g=l.g+zq(d.pos,l.pos)+(m?Math.pow(a,3):0),b=d.visited;if(!b||g<d.g){let e=Wq(d,t,h,i);d.visited=!0,d.parent=l,d.h=zq(t.pos,d.pos)+e*Math.pow(a,2),d.g=g,d.f=d.g+d.h,b?o.rescoreElement(d):o.push(d)}}}return null},Fq=(e,t)=>{let n=t,r=[];for(;n.parent;)r.unshift(n),n=n.parent;return r.unshift(e),r},zq=(e,t)=>Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1]),Bq=(e,t,n,r,i,s,a,o)=>{let l=a??e,c=o??t,[d,u,h,p]=r??[0,0,0,0],[f,m,g,b]=i??[0,0,0,0],U=[e[0]>t[2]?e[1]>t[3]||e[3]<t[1]?Math.min((l[0]+c[2])/2,e[0]-p):(l[0]+c[2])/2:e[0]>t[0]?e[0]-p:n[0]-p,e[1]>t[3]?e[0]>t[2]||e[2]<t[0]?Math.min((l[1]+c[3])/2,e[1]-d):(l[1]+c[3])/2:e[1]>t[1]?e[1]-d:n[1]-d,e[2]<t[0]?e[1]>t[3]||e[3]<t[1]?Math.max((l[2]+c[0])/2,e[2]+u):(l[2]+c[0])/2:e[2]<t[2]?e[2]+u:n[2]+u,e[3]<t[1]?e[0]>t[2]||e[2]<t[0]?Math.max((l[3]+c[1])/2,e[3]+h):(l[3]+c[1])/2:e[3]<t[3]?e[3]+h:n[3]+h],y=[t[0]>e[2]?t[1]>e[3]||t[3]<e[1]?Math.min((c[0]+l[2])/2,t[0]-b):(c[0]+l[2])/2:t[0]>e[0]?t[0]-b:n[0]-b,t[1]>e[3]?t[0]>e[2]||t[2]<e[0]?Math.min((c[1]+l[3])/2,t[1]-f):(c[1]+l[3])/2:t[1]>e[1]?t[1]-f:n[1]-f,t[2]<e[0]?t[1]>e[3]||t[3]<e[1]?Math.max((c[2]+l[0])/2,t[2]+m):(c[2]+l[0])/2:t[2]<e[2]?t[2]+m:n[2]+m,t[3]<e[1]?t[0]>e[2]||t[2]<e[0]?Math.max((c[3]+l[1])/2,t[3]+g):(c[3]+l[1])/2:t[3]<e[3]?t[3]+g:n[3]+g],x=Yq([U,y]);if(!s&&U[2]-U[0]+y[2]-y[0]>x[2]-x[0]+1e-11&&U[3]-U[1]+y[3]-y[1]>x[3]-x[1]+1e-11){let[n,r]=[(y[0]+y[2])/2,(y[1]+y[3])/2];if(t[0]>e[2]&&e[1]>t[3]){let t=U[2]+(y[0]-U[2])/2,i=y[3]+(U[1]-y[3])/2;return _D(kD(e[2]-n,e[1]-r),kD(e[0]-n,e[3]-r))>0?[[U[0],U[1],t,U[3]],[t,y[1],y[2],y[3]]]:[[U[0],i,U[2],U[3]],[y[0],y[1],y[2],i]]}if(e[2]<t[0]&&e[3]<t[1]){let t=U[2]+(y[0]-U[2])/2,i=U[3]+(y[1]-U[3])/2;return _D(kD(e[0]-n,e[1]-r),kD(e[2]-n,e[3]-r))>0?[[U[0],U[1],U[2],i],[y[0],i,y[2],y[3]]]:[[U[0],U[1],t,U[3]],[t,y[1],y[2],y[3]]]}if(e[0]>t[2]&&e[3]<t[1]){let t=y[2]+(U[0]-y[2])/2,i=U[3]+(y[1]-U[3])/2;return _D(kD(e[2]-n,e[1]-r),kD(e[0]-n,e[3]-r))>0?[[t,U[1],U[2],U[3]],[y[0],y[1],t,y[3]]]:[[U[0],U[1],U[2],i],[y[0],i,y[2],y[3]]]}if(e[0]>t[2]&&e[1]>t[3]){let t=y[2]+(U[0]-y[2])/2,i=y[3]+(U[1]-y[3])/2;return _D(kD(e[0]-n,e[1]-r),kD(e[2]-n,e[3]-r))>0?[[t,U[1],U[2],U[3]],[y[0],y[1],t,y[3]]]:[[U[0],i,U[2],U[3]],[y[0],y[1],y[2],i]]}}return[U,y]},Hq=(e,t,n,r,i,s)=>{let a=new Set,o=new Set;n===LW||n===NW?o.add(t[1]):a.add(t[0]),i===LW||i===NW?o.add(r[1]):a.add(r[0]),e.forEach(e=>{a.add(e[0]),a.add(e[2]),o.add(e[1]),o.add(e[3])}),a.add(s[0]),a.add(s[2]),o.add(s[1]),o.add(s[3]);let l=Array.from(o).sort((e,t)=>e-t),c=Array.from(a).sort((e,t)=>e-t);return{row:l.length,col:c.length,data:l.flatMap((e,t)=>c.map((n,r)=>({f:0,g:0,h:0,closed:!1,visited:!1,parent:null,addr:[r,t],pos:[n,e]})))}},$q=(e,t,n)=>{switch(t){case OW:return PD(n[0],e[1]);case NW:return PD(e[2],n[1]);case DW:return PD(n[0],e[3])}return PD(e[0],n[1])},Wq=(e,t,n,r)=>{if(r===NW)switch(n){case NW:return e.pos[0]>=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2;case OW:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case DW:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case LW:return e.pos[1]===t.pos[1]?4:2}else if(r===LW)switch(n){case NW:return e.pos[1]===t.pos[1]?4:2;case OW:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case DW:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case LW:return e.pos[0]<=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2}else if(r===OW)switch(n){case NW:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case OW:return e.pos[1]>=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case DW:return e.pos[0]===t.pos[0]?4:2;case LW:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3}else if(r===DW)switch(n){case NW:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case OW:return e.pos[0]===t.pos[0]?4:2;case DW:return e.pos[1]<=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case LW:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3}return 0},Xq=([e,t],n)=>[Vq([e,t-1],n),Vq([e+1,t],n),Vq([e,t+1],n),Vq([e-1,t],n)],Vq=([e,t],n)=>e<0||e>=n.col||t<0||t>=n.row?null:n.data[t*n.col+e]??null,Gq=(e,t)=>{for(let n=0;n<t.col;n++)for(let r=0;r<t.row;r++){let i=Vq([n,r],t);if(i&&e[0]===i.pos[0]&&e[1]===i.pos[1])return i}return null},Yq=e=>[Math.min(...e.map(e=>e[0])),Math.min(...e.map(e=>e[1])),Math.max(...e.map(e=>e[2])),Math.max(...e.map(e=>e[3]))],qq=(e,t)=>{let n=t.get(e);return n&&_O(n)?n:null},Zq=(e,t,n,r)=>{let i=e[0][0],s=e[0][1],a=e.map(t=>FD(t,TD(CD(e[0]),-1)));return i<-Pq||i>Pq||s<-Pq||s>Pq||i+a[a.length-1][0]<-Pq||s+a[a.length-1][0]>Pq||i+a[a.length-1][1]<-Pq||a[a.length-1][1],a=a.map(([e,t])=>PD(bD(e,-1e6,1e6),bD(t,-1e6,1e6))),{points:a,x:bD(i,-1e6,1e6),y:bD(s,-1e6,1e6),fixedSegments:(t?.length??0)>0?t:null,...tX(a),startIsSpecial:n,endIsSpecial:r}},Kq=e=>{if(e.length>1){let t=Math.abs(e[0][1]-e[1][1])<Math.abs(e[0][0]-e[1][0]);return e.filter((n,r)=>{if(0===r||r===e.length-1)return!0;let i=e[r+1],s=Math.abs(n[1]-i[1])<Math.abs(n[0]-i[0]);return t===s?(t=s,!1):(t=s,!0)})}return e},Qq=e=>e.length>=4?e.filter((t,n)=>{if(0===n||n===e.length-1)return!0;return BD(e[n-1],t)>1}):e,Jq=e=>{switch(e){case 0:return OW;case 1:return NW;case 2:return DW}return LW},eZ=(e,t,n,r,i,s,a)=>{if(a){if(s){return((e,t,n=.05)=>{let{x:r,y:i,width:s,height:a,angle:o}=e,l=PD(r+s/2-.1,i+a/2-.1),c=OD(t,l,-o),d=bD(n*a,5,80),u=bD(n*s,5,80);return c[0]<=r+s/2&&c[1]>l[1]-d&&c[1]<l[1]+d?OD(PD(r-5,l[1]),l,o):c[1]<=i+a/2&&c[0]>l[0]-u&&c[0]<l[0]+u?OD(PD(l[0],i-5),l,o):c[0]>=r+s/2&&c[1]>l[1]-d&&c[1]<l[1]+d?OD(PD(r+s+5,l[1]),l,o):c[1]>=i+a/2&&c[0]>l[0]-u&&c[0]<l[0]+u?OD(PD(l[0],i+a+5),l,o):t})(s,GX(e,s,t))}return r}if(i){let r=fV(n||[0,0],i);return Math.abs(wX(i,r)-5)>.01?GX(e,i,t):r}return r},tZ=(e,t,n,r,i)=>((e,t,n,r,i,s,a)=>{let o=zW(CD(t,e));return n&&r?VX(s,n,i,a)?XW(n,r,e):zW(CD(e,PD(n.x+n.width/2,n.y+n.height/2))):o})(e,t,r,r&&nW(r,Array(4).fill(wX(r,e))),n,i),nZ=(e,t,n,r)=>FX(IL(e),n,t,r,!0,!0),rZ=(e,t)=>e[0]===t[0]&&e[1]===t[1],iZ=(e,t=1)=>e.slice(1).map((n,r)=>Math.abs(n[0]-e[r][0])<t||Math.abs(n[1]-e[r][1])<t).every(Boolean),sZ={selection:!0,text:!0,rectangle:!0,diamond:!0,ellipse:!0,line:!0,image:!0,arrow:!0,freedraw:!0,eraser:!1,custom:!0,frame:!0,embeddable:!0,hand:!0,laser:!1,magicframe:!1},aZ=(e,t)=>{if(!t)return null;let n=t.focus||0;return SO(e)?LO(t)?{...t,focus:n,fixedPoint:gV(t.fixedPoint??[0,0])}:null:{...t,focus:n}},oZ=(e,t)=>{let n={type:t.type||e.type,version:e.version||1,versionNonce:e.versionNonce??0,index:e.index??null,isDeleted:e.isDeleted??!1,id:e.id||LG(),fillStyle:e.fillStyle||ON.fillStyle,strokeWidth:e.strokeWidth||ON.strokeWidth,strokeStyle:e.strokeStyle??ON.strokeStyle,roughness:e.roughness??ON.roughness,opacity:null==e.opacity?ON.opacity:e.opacity,angle:e.angle||0,x:t.x??e.x??0,y:t.y??e.y??0,strokeColor:e.strokeColor||ON.strokeColor,backgroundColor:e.backgroundColor||ON.backgroundColor,width:e.width||0,height:e.height||0,seed:e.seed??1,groupIds:e.groupIds??[],frameId:e.frameId??null,roundness:e.roundness?e.roundness:"round"===e.strokeSharpness?{type:PO(e.type)?TN:RN}:null,boundElements:e.boundElementIds?e.boundElementIds.map(e=>({type:"arrow",id:e})):e.boundElements??[],updated:e.updated??NL(),link:e.link?vG(e.link):null,locked:e.locked??!1};return("customData"in e||"customData"in t)&&(n.customData="customData"in t?t.customData:e.customData),{...e,...n,...WK(n),...t}},lZ=e=>{switch((e={...e}).type){case"text":delete e.rawText;let t=e.fontSize,n=e.fontFamily;if("font"in e){let[r,i]=e.font.split(" ");t=parseFloat(r),n=(e=>Object.keys(qA).includes(e)?qA[e]:rN)(i)}let r="string"==typeof e.text&&e.text||"",i=e.lineHeight||(e.height?(e=>{let t=$O(e.text).length;return e.height/t/e.fontSize})(e):JH(e.fontFamily));return e=oZ(e,{fontSize:t,fontFamily:n,text:r,textAlign:e.textAlign||iN,verticalAlign:e.verticalAlign||sN,containerId:e.containerId??null,originalText:e.originalText||r,autoResize:e.autoResize??!0,lineHeight:i}),!r&&!e.isDeleted&&(e={...e,originalText:r,isDeleted:!0},e=OK(e)),e;case"freedraw":return oZ(e,{points:e.points,lastCommittedPoint:null,simulatePressure:e.simulatePressure,pressures:e.pressures});case"image":return oZ(e,{status:e.status||"pending",fileId:e.fileId,scale:e.scale||[1,1],crop:e.crop??null});case"line":case"draw":let{startArrowhead:s=null,endArrowhead:a=null}=e,o=e.x,l=e.y,c=!Array.isArray(e.points)||e.points.length<2?[PD(0,0),PD(e.width,e.height)]:e.points;return(0!==c[0][0]||0!==c[0][1])&&({points:c,x:o,y:l}=eG.getNormalizedPoints(e)),oZ(e,{type:"draw"===e.type?"line":e.type,startBinding:aZ(e,e.startBinding),endBinding:aZ(e,e.endBinding),lastCommittedPoint:null,startArrowhead:s,endArrowhead:a,points:c,x:o,y:l,...tX(c)});case"arrow":{let{startArrowhead:t=null,endArrowhead:n="arrow"}=e,r=e.x,i=e.y,s=!Array.isArray(e.points)||e.points.length<2?[PD(0,0),PD(e.width,e.height)]:e.points;(0!==s[0][0]||0!==s[0][1])&&({points:s,x:r,y:i}=eG.getNormalizedPoints(e));let a={type:e.type,startBinding:aZ(e,e.startBinding),endBinding:aZ(e,e.endBinding),lastCommittedPoint:null,startArrowhead:t,endArrowhead:n,points:s,x:r,y:i,elbowed:e.elbowed,...tX(s)};return SO(e)?oZ(e,{...a,elbowed:!0,startBinding:aZ(e,e.startBinding),endBinding:aZ(e,e.endBinding),fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}):oZ(e,a)}case"ellipse":case"rectangle":case"diamond":case"iframe":case"embeddable":return oZ(e,{});case"magicframe":case"frame":return oZ(e,{name:e.name??null})}return null},cZ=(e,t)=>{if(e.boundElements){let n=e.boundElements.slice(),r=new Set;e.boundElements=n.reduce((n,i)=>{let s=t.get(i.id);if(s&&!r.has(i.id)){if(r.add(i.id),s.isDeleted)return n;n.push(i),mO(s)&&!s.containerId&&(s.containerId=e.id)}return n},[])}},dZ=(e,t)=>{let n=e.containerId?t.get(e.containerId):null;if(n){if(!e.isDeleted&&n.boundElements&&!n.boundElements.find(t=>t.id===e.id)){let t=(n.boundElements||(n.boundElements=[])).slice();t.push({type:"text",id:e.id}),n.boundElements=t}}else e.containerId=null},uZ=(e,t)=>{e.frameId&&(t.get(e.frameId)||(e.frameId=null))},hZ=(e,t,n)=>{let r=new Set,i=t?DL(t):null,s=iY((e||[]).reduce((e,t)=>{if("selection"!==t.type&&!FK(t)){let n=lZ(t);if(n){let s=i?.get(t.id);s&&s.version>n.version&&(n=OK(n,s.version)),r.has(n.id)&&(n={...n,id:LG()}),r.add(n.id),e.push(n)}}return e},[]));if(!n?.repairBindings)return s;let a=DL(s);for(let o of s)o.frameId&&uZ(o,a),mO(o)&&o.containerId?dZ(o,a):o.boundElements&&cZ(o,a),n.refreshDimensions&&mO(o)&&Object.assign(o,VG(o,uG(o,a),a)),vO(o)&&(o.startBinding&&(!a.has(o.startBinding.elementId)||!wO(o))&&(o.startBinding=null),o.endBinding&&(!a.has(o.endBinding.elementId)||!wO(o))&&(o.endBinding=null));return s.map(e=>{if(SO(e)&&null==e.startBinding&&null==e.endBinding&&!iZ(e.points))return{...e,...Aq(e,a,{points:[PD(0,0),e.points[e.points.length-1]]}),index:e.index};if(SO(e)&&e.startBinding&&e.endBinding&&e.startBinding.elementId===e.endBinding.elementId&&e.points.length>1&&e.points.some(([e,t])=>Math.abs(e)>1e6||Math.abs(t)>1e6)){let t=a.get(e.startBinding.elementId);return t?{...e,x:t.x+t.width/2,y:t.y-5,width:t.width,height:t.height,points:[PD(0,0),PD(0,-10),PD(t.width/2+5,-10),PD(t.width/2+5,t.height/2+5)]}:e}return e})},pZ=(e,t,n)=>{let r=t[e];return void 0!==r?r:n[e]},fZ={isSidebarDocked:(e,t)=>["defaultSidebarDockedPreference",e.isSidebarDocked??pZ("defaultSidebarDockedPreference",e,t)]},mZ=(e,t)=>{e=e||{};let n=hD(),r={};for(let i of Object.keys(fZ))if(i in e){let[t,s]=fZ[i](e,n);r[t]=s}for(let[i,s]of Object.entries(n)){let n=e[i],a=t?t[i]:void 0;r[i]=void 0!==n?n:void 0!==a?a:s}return{...r,cursorButton:t?.cursorButton||"up",penDetected:t?.penDetected??(!!e.penMode&&(e.penDetected??!1)),activeTool:{...wL(n,r.activeTool.type&&sZ[r.activeTool.type]?r.activeTool:{type:"selection"}),lastActiveTool:null,locked:r.activeTool.locked??!1},zoom:{value:yV(xD(e.zoom)?e.zoom:e.zoom?.value??n.zoom.value)},openSidebar:"string"==typeof e.openSidebar?{name:BN}:r.openSidebar,gridSize:xV(xD(e.gridSize)?e.gridSize:20),gridStep:vV(xD(e.gridStep)?e.gridStep:5),editingFrame:null}},gZ=(e,t,n,r)=>({elements:hZ(e?.elements,n,r),appState:mZ(e?.appState,t||null),files:e?.files||{}}),bZ=e=>{let t=hZ(wQ(e.elements),null);return t.length?{...e,elements:t}:null},UZ=(e=[],t)=>{let n=[];for(let r of e)if(Array.isArray(r)){let e=bZ({status:t,elements:r,id:LG(),created:Date.now()});e&&n.push(e)}else{let e=r,i=bZ({...e,id:e.id||LG(),status:e.status||t,created:e.created||Date.now()});i&&n.push(i)}return n},yZ=32,xZ=12,vZ=256,wZ="NOT_SPREADSHEET",SZ="VALID_SPREADSHEET",EZ=e=>{let t=/^([-+]?)[$€£¥₩]?([-+]?)([\d.,]+)[%]?$/.exec(e);return t?parseFloat(`${(t[1]||t[2])+t[3]}`.replace(/,/g,"")):null},kZ=(e,t)=>e.slice(1).every(e=>null!==EZ(e[t])),CZ=e=>{let t=e[0].length;if(t>2)return{type:wZ,reason:"More than 2 columns"};if(1===t){if(!kZ(e,0))return{type:wZ,reason:"Value is not numeric"};let t=null===EZ(e[0][0]),n=(t?e.slice(1):e).map(e=>EZ(e[0]));return n.length<2?{type:wZ,reason:"Less than two rows"}:{type:SZ,spreadsheet:{title:t?e[0][0]:null,labels:null,values:n}}}let n=kZ(e,0),r=kZ(e,1);if(!n&&!r)return{type:wZ,reason:"Value is not numeric"};let[i,s]=r?[0,1]:[1,0],a=null===EZ(e[0][s]),o=a?e.slice(1):e;return o.length<2?{type:wZ,reason:"Less than 2 rows"}:{type:SZ,spreadsheet:{title:a?e[0][s]:null,labels:o.map(e=>e[i]),values:o.map(e=>EZ(e[s]))}}},_Z=(e=>[hA.cyan[e],hA.blue[e],hA.violet[e],hA.grape[e],hA.pink[e],hA.green[e],hA.teal[e],hA.yellow[e],hA.orange[e],hA.red[e]])(4),MZ={fillStyle:"hachure",fontFamily:rN,fontSize:nN,opacity:100,roughness:1,strokeColor:hA.black,roundness:null,strokeStyle:"solid",strokeWidth:1,verticalAlign:kN,locked:!1},IZ=e=>({chartWidth:44*e.values.length+xZ,chartHeight:280}),jZ=(e,t,n,r,i)=>e.labels?.map((e,s)=>WG({groupIds:[r],backgroundColor:i,...MZ,text:e.length>8?`${e.slice(0,5)}...`:e,x:t+44*s+24,y:n+6,width:yZ,angle:5.87,fontSize:16,textAlign:"center",verticalAlign:"top"}))||[],TZ=(e,t,n,r,i)=>{let s=WG({groupIds:[r],backgroundColor:i,...MZ,x:t-xZ,y:n-xZ,text:"0",textAlign:"right"});return[s,WG({groupIds:[r],backgroundColor:i,...MZ,x:t-xZ,y:n-vZ-s.height/2,text:Math.max(...e.values).toLocaleString(),textAlign:"right"})]},RZ=(e,t,n,r,i)=>{let{chartWidth:s,chartHeight:a}=IZ(e);return[GG({backgroundColor:i,groupIds:[r],...MZ,type:"line",x:t,y:n,width:s,points:[PD(0,0),PD(s,0)]}),GG({backgroundColor:i,groupIds:[r],...MZ,type:"line",x:t,y:n,height:a,points:[PD(0,0),PD(0,-a)]}),GG({backgroundColor:i,groupIds:[r],...MZ,type:"line",x:t,y:n-vZ-xZ,strokeStyle:"dotted",width:s,opacity:50,points:[PD(0,0),PD(s,0)]})]},PZ=(e,t,n,r,i,s)=>{let{chartWidth:a,chartHeight:o}=IZ(e),l=e.title?WG({backgroundColor:i,groupIds:[r],...MZ,text:e.title,x:t+a/2,y:n-vZ-24-nN,roundness:null,textAlign:"center"}):null,c=s?FG({backgroundColor:i,groupIds:[r],...MZ,type:"rectangle",x:t,y:n-o,width:a,height:o,strokeColor:hA.black,fillStyle:"solid",opacity:6}):null;return[...c?[c]:[],...l?[l]:[],...jZ(e,t,n,r,i),...TZ(e,t,n,r,i),...RZ(e,t,n,r,i)]},AZ=(e,t,n,r)=>"line"===e?((e,t,n)=>{let r=Math.max(...e.values),i=LG(),s=_Z[Math.floor(Math.random()*_Z.length)],a=0,o=[];for(let m of e.values){let e=44*a,t=-m/r*vZ;o.push([e,t]),a++}let l=Math.max(...o.map(e=>e[0])),c=Math.max(...o.map(e=>e[1])),d=Math.min(...o.map(e=>e[0])),u=Math.min(...o.map(e=>e[1])),h=GG({backgroundColor:s,groupIds:[i],...MZ,type:"line",x:t+xZ+16,y:n-xZ,height:c-u,width:l-d,strokeWidth:2,points:o}),p=e.values.map((e,a)=>{let o=44*a+6,l=-e/r*vZ+6;return FG({backgroundColor:s,groupIds:[i],...MZ,fillStyle:"solid",strokeWidth:2,type:"ellipse",x:t+o+16,y:n+l-24,width:xZ,height:xZ})}),f=e.values.map((e,a)=>{let o=44*a+6,l=e/r*vZ+6+xZ;return GG({backgroundColor:s,groupIds:[i],...MZ,type:"line",x:t+o+16+6,y:n-l,height:l,strokeStyle:"dotted",opacity:50,points:[PD(0,0),PD(0,l)]})});return[...PZ(e,t,n,i,s,BM.DEV),h,...f,...p]})(t,n,r):((e,t,n)=>{let r=Math.max(...e.values),i=LG(),s=_Z[Math.floor(Math.random()*_Z.length)];return[...e.values.map((e,a)=>{let o=e/r*vZ;return FG({backgroundColor:s,groupIds:[i],...MZ,type:"rectangle",x:t+44*a+xZ,y:n-o-xZ,width:yZ,height:o})}),...PZ(e,t,n,i,s,BM.DEV)]})(t,n,r),NZ="clipboard"in navigator&&"writeText"in navigator.clipboard,DZ="clipboard"in navigator&&"write"in navigator.clipboard&&"ClipboardItem"in window&&"toBlob"in HTMLCanvasElement.prototype,LZ=async(e,t,n)=>{await HZ((({elements:e,files:t})=>{let n=DL(e),r=new Set(e.filter(e=>UO(e))),i=!1,s=e.reduce((e,n)=>(dO(n)&&(i=!0,t&&t[n.fileId]&&(e[n.fileId]=t[n.fileId])),e),{}),a={type:pN.excalidrawClipboard,elements:e.map(e=>{if(uK(e,n)&&!r.has(uK(e,n))){let t=KG(e);return DK(t,{frameId:null}),t}return e}),files:t?s:void 0};return JSON.stringify(a)})({elements:e,files:t}),n)},OZ=e=>{let t=(e=>{let t=e.trim().split("\n").map(e=>e.trim().split("\t"));if(t.length&&2!==t[0].length&&(t=e.trim().split("\n").map(e=>e.trim().split(","))),0===t.length)return{type:wZ,reason:"No values"};let n=t[0].length;if(!t.every(e=>e.length===n))return{type:wZ,reason:"All rows don't have same number of columns"};let r=CZ(t);if(r.type!==SZ){let e=CZ((e=>{let t=[];for(let n=0;n<e[0].length;n++){let r=[];for(let t=0;t<e.length;t++)r.push(e[t][n]);t.push(r)}return t})(t));if(e.type===SZ)return e}return r})(e);return t.type===SZ?{spreadsheet:t.spreadsheet}:null};function FZ(e){let t=[];for(let n of e.childNodes)if(3===n.nodeType){let e=n.textContent?.trim();e&&t.push({type:"text",value:e})}else if(n instanceof HTMLImageElement){let e=n.getAttribute("src");e&&e.startsWith("http")&&t.push({type:"imageUrl",value:e})}else t=t.concat(FZ(n));return t}var zZ=e=>{let t=e.clipboardData?.getData(lN.html);if(!t)return null;try{let e=FZ((new DOMParser).parseFromString(t,lN.html).body);if(e.length)return{type:"mixedContent",value:e}}catch(n){}return null},BZ=async(e,t=!1)=>{let n=await(async(e,t=!1)=>{try{let n=!t&&e&&zZ(e);return n?n.value.every(e=>"text"===e.type)?{type:"text",value:e.clipboardData?.getData(lN.text)||n.value.map(e=>e.value).join("\n").trim()}:n:{type:"text",value:(e.clipboardData?.getData(lN.text)||"").trim()}}catch{return{type:"text",value:""}}})(e,t);if("mixedContent"===n.type)return{mixedContent:n.value};try{let e=!t&&OZ(n.value);if(e)return e}catch(cA){}try{let e=JSON.parse(n.value),r=e.type===pN.excalidrawClipboardWithAPI;if((e=>!(![pN.excalidraw,pN.excalidrawClipboard,pN.excalidrawClipboardWithAPI].includes(e?.type)||!Array.isArray(e.elements)))(e))return{elements:e.elements,files:e.files,text:t?JSON.stringify(e.elements,null,2):void 0,programmaticAPI:r}}catch{}return{text:n.value}},HZ=async(e,t)=>{if(NZ)try{return void(await navigator.clipboard.writeText(e||""))}catch(n){}try{if(t){if(t.clipboardData?.setData(lN.text,e||""),t.clipboardData?.getData(lN.text)!==e)throw new Error("Failed to setData on clipboardEvent");return}}catch(n){}if(!$Z(e))throw new Error("Error copying to clipboard.")},$Z=e=>{e||(e=" ");let t="rtl"===document.documentElement.getAttribute("dir"),n=document.createElement("textarea");n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";let r=window.pageYOffset||document.documentElement.scrollTop;n.style.top=`${r}px`,n.style.fontSize="12pt",n.setAttribute("readonly",""),n.value=e,document.body.appendChild(n);let i=!1;try{n.select(),n.setSelectionRange(0,n.value.length),i=document.execCommand("copy")}catch(s){}return n.remove(),i},WZ=({elements:e,appState:t,files:n,maxWidthOrHeight:r,getDimensions:i,exportPadding:s,exportingFrame:a})=>{let{elements:o,appState:l}=gZ({elements:e,appState:t},null,null),{exportBackground:c,viewBackgroundColor:d}=l;return Cq(o,{...l,offsetTop:0,offsetLeft:0,width:0,height:0},n||{},{exportBackground:c,exportPadding:s,viewBackgroundColor:d,exportingFrame:a},(e,n)=>{let s=document.createElement("canvas");if(r){let i=Math.max(e,n),a=r<i?r/i:t?.exportScale??1;return s.width=e*a,s.height=n*a,{canvas:s,scale:a}}let a=i?.(e,n)||{width:e,height:n};return s.width=a.width,s.height=a.height,{canvas:s,scale:a.scale??1}})},XZ=async({elements:e,appState:t=hD(),files:n={},exportPadding:r,renderEmbeddables:i,exportingFrame:s,skipInliningFonts:a,reuseImages:o})=>{let{elements:l,appState:c}=gZ({elements:e,appState:t},null,null),d={...c,exportPadding:r};return Mq(l,d,n,{exportingFrame:s,renderEmbeddables:i,skipInliningFonts:a,reuseImages:o})},VZ=e=>vO(e)||yO(e)?e.points:(e=>"diamond"===e.type?[PD(e.width/2,0),PD(e.width,e.height/2),PD(e.width/2,e.height),PD(0,e.height/2)]:[PD(0,0),PD(0+e.width,0),PD(0+e.width,e.height),PD(0,e.height)])(e),GZ=e=>{let t=e.reduce((e,[t,n])=>(e.minY=Math.min(e.minY,n),e.minX=Math.min(e.minX,t),e.maxX=Math.max(e.maxX,t),e.maxY=Math.max(e.maxY,n),e),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,cx:0,cy:0});return t.cx=(t.maxX+t.minX)/2,t.cy=(t.maxY+t.minY)/2,t},YZ=(e,t)=>{let n=(e=>{let t=VZ(e),{cx:n,cy:r}=GZ(t),i=PD(n,r),s=t.map(t=>OD(t,i,e.angle)),{minX:a,minY:o,maxX:l,maxY:c}=GZ(s);return[a+e.x,o+e.y,l+e.x,c+e.y]})(e);return(cL(n[0],aL(t[0],t[2]))||cL(t[0],aL(n[0],n[2])))&&(cL(n[1],aL(t[1],t[3]))||cL(t[1],aL(n[1],n[3])))};function qZ(e){return[Math.min(e[0][0],e[1][0]),Math.min(e[0][1],e[1][1]),Math.max(e[0][0],e[1][0]),Math.max(e[0][1],e[1][1])]}function ZZ(e,t){let n=_D(CD(e[1],e[0]),CD(t,e[0]));return Math.abs(n)<1e-6}function KZ(e,t){return _D(CD(e[1],e[0]),CD(t,e[0]))<0}function QZ(e,t){return ZZ(e,t[0])||ZZ(e,t[1])||(KZ(e,t[0])?!KZ(e,t[1]):KZ(e,t[1]))}var JZ=(e,t,n)=>{let r=DL(e);for(let i of t)if(i.frameId){let e=n.get(i.id),t=n.get(i.frameId);if(e){let n=r.get(e);n&&DK(n,{frameId:t??i.frameId},!1)}}};function eK(e,t,n){let r=aX(t,n),i=aX(e,n);return r.some(e=>i.some(t=>function(e,t){return function(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}(qZ(e),qZ(t))&&QZ(e,t)&&QZ(t,e)}(e,t)))}var tK=(e,t,n)=>bK(kK(e,t,n,!1)).filter(e=>!UO(e)&&!e.frameId||e.frameId===t.id),nK=(e,t,n)=>kK([t],e,n).some(e=>e.id===t.id),rK=(e,t,n)=>{let[r,i,s,a]=sX(t,n),[o,l,c,d]=gX(e);return r<=o&&i<=l&&s>=c&&a>=d},iK=(e,t,n)=>rK([e],t,n)||eK(e,t,n)||nK(e,t,n),sK=(e,t,n)=>{let[r,i,s,a]=sX(t,n);return WD(PD(r,i),PD(e.x,e.y),PD(s,a))},aK=(e,t)=>{let n=[];for(let r of e.values())r.frameId===t&&n.push(r);return n},oK=e=>e.filter(e=>UO(e)),lK=e=>{let t=DL(oK(e));return e.filter(e=>t.has(e.id)||!e.frameId||!t.has(e.frameId))},cK=(e,t,n,r)=>{let i=aK(e,t.id),s=new Set(i),a=new Set([...tK(e,t,r),...i.filter(e=>nK(e,t,r))]),o=i.filter(e=>!a.has(e)),l=new Set(Array.from(a).flatMap(e=>e.groupIds));for(let h of o)if(eK(h,t,r)){if(h.groupIds.length>0)for(let e of h.groupIds)l.add(e)}else 0===h.groupIds.length&&s.delete(h);for(let h of o)if(h.groupIds.length>0){let e=!0;for(let t of h.groupIds)l.has(t)&&(e=!1);e&&s.delete(h)}let c=Array.from(a).filter(e=>0===e.groupIds.length);for(let h of c)s.add(h);let d=Array.from(a).filter(e=>e.groupIds.length>0),u=_V(d,n);for(let[h,p]of Object.entries(u))if(p){let n=jV(e,h);if(rK(n,t,r))for(let e of n)s.add(e)}return[...s].filter(e=>!(mO(e)&&e.containerId))},dK=(e,t,n)=>{let r=[],i=new Map;for(let s of e){let e=!1;if(s.groupIds.length>0){if(s.groupIds.some(e=>i.get(e)))e=!0;else{let r=new Set(s.groupIds.flatMap(e=>jV(n,e)));e=!rK(Array.from(r),t,n)}s.groupIds.forEach(t=>{i.set(t,e)})}e||r.push(s)}return r},uK=(e,t)=>e.frameId&&t.get(e.frameId)||null,hK=(e,t,n,r)=>{let i=DL(e),s=new Map;for(let c of e.values())c.frameId===n.id&&s.set(c.id,!0);let a=new Set(t.map(e=>e.id)),o=[],l=new Set;for(let c of t)UO(c)&&c.id!==n.id&&l.add(c.id);for(let c of bK(e,t)){if(UO(c)||c.frameId&&l.has(c.frameId)||c.frameId&&r.selectedElementIds[c.id]&&r.selectedElementIds[c.frameId])continue;s.has(c.id)||o.push(c);let e=dG(c,i);e&&!a.has(e.id)&&!s.has(e.id)&&o.push(e)}for(let c of o)DK(c,{frameId:n.id},!1);return e},pK=(e,t)=>{let n=new Map,r=new Map;for(let i of e)if(i.frameId){n.set(i.id,i);let e=r.get(i.frameId)||[];e.push(i);let s=dG(i,t);s&&(n.set(s.id,s),e.push(s)),r.set(i.frameId,e)}for(let[,i]of n)DK(i,{frameId:null},!1)},fK=(e,t)=>{let n=aK(e,t.id);return pK(n,DL(e)),e},mK=(e,t,n,r)=>hK(fK(e,n),t,n,r.state).slice(),gK=(e,t,n)=>{let r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,elements:e}),i=new Set(r);if(t.editingGroupId)for(let o of r)0===o.groupIds.length?i.add(o):o.groupIds.flatMap(t=>jV(e,t)).forEach(e=>i.add(e));let s=new Set,a=DL(e);return i.forEach(e=>{e.frameId&&!UO(e)&&!yK(e,a,t)&&s.add(e)}),s.size>0&&pK(s,a),e},bK=(e,t)=>{let n=new Set,r=t||e;for(let a of r.values()){let e=a.groupIds[a.groupIds.length-1];e&&n.add(e)}let i=new Set;for(let a of n)jV(e,a).some(e=>UO(e))&&i.add(a);let s=[];for(let a of r.values())i.has(a.groupIds[a.groupIds.length-1])||s.push(a);return s},UK=(e,t,n)=>{let r=mO(e)&&uG(e,t)||e;return r.frameId&&n.selectedElementIds[r.id]&&n.selectedElementIds[r.frameId]?uK(r,t):n.selectedElementIds[r.id]&&n.selectedElementsAreBeingDragged?n.frameToHighlight:uK(r,t)},yK=(e,t,n,r)=>{let i=r?.targetFrame??UK(e,t,n);if(!i)return!1;let s=mO(e)&&uG(e,t)||e,a=e=>{r?.checkedGroups&&s.groupIds.forEach(t=>{r.checkedGroups?.set(t,e)})};if(!n.selectedElementIds[s.id]||!n.selectedElementsAreBeingDragged||n.selectedElementIds[s.id]&&n.selectedElementIds[i.id])return!0;if(0===s.groupIds.length)return iK(s,i,t);for(let l of s.groupIds)if(r?.checkedGroups?.has(l))return r.checkedGroups.get(l);let o=new Set(s.groupIds.filter(e=>!r?.checkedGroups||!r.checkedGroups.has(e)).flatMap(e=>jV(t,e)));if(n.editingGroupId&&n.selectedElementsAreBeingDragged){let e=new Set(MK(t,n));if(null!==n.frameToHighlight)return!0;e.forEach(e=>{o.delete(e)})}for(let l of o)if(UO(l))return a(!1),!1;for(let l of o)if(iK(l,i,t))return a(!0),!0;return!1},xK=(e,t,n,r,i)=>{if(!n.frameRendering||!n.frameRendering.clip)return!1;let s=eK(e,t,r)||nK(e,t,r);if(s){for(let t of e.groupIds)i?.set(t,!0);return!0}if(!s&&e.groupIds.length>0&&!rK([e],t,r)){let s=!1;if(n.selectedElementsAreBeingDragged)s=yK(e,r,n,{targetFrame:t,checkedGroups:i});else{s=e.frameId===t.id;for(let t of e.groupIds)i?.set(t,s)}for(let t of e.groupIds)i?.set(t,s);return s}return!1},vK=e=>null===e.name?gO(e)?"Frame":"AI Frame":e.name,wK=(e,t)=>(({elements:e,bounds:t,type:n,errorMargin:r=0})=>{IO(t)&&(t=mX(t,DL(e)));let i=[t[0]-r,t[1]-r,t[2]+r,t[3]+r],s=new Set;for(let a of e)if(!s.has(a.id)&&YZ(a,i)){if(s.add(a.id),a.boundElements)for(let e of a.boundElements)s.add(e.id);mO(a)&&a.containerId&&s.add(a.containerId),wO(a)&&(a.startBinding&&s.add(a.startBinding.elementId),a.endBinding&&s.add(a.endBinding?.elementId))}return e.filter(e=>s.has(e.id))})({elements:e,bounds:t,type:"overlap"}).filter(e=>!e.frameId||e.frameId===t.id),SK=e=>{let t=DL(e);return e.length>1&&e.some(e=>e.frameId&&t.has(e.frameId))},EK=e=>{let t=new Set;return e.forEach(e=>{UO(e)&&t.add(e.id)}),e.filter(e=>!(e.frameId&&t.has(e.frameId)))},kK=(e,t,n,r=!0)=>{let[i,s,a,o]=sX(t,n),l=e.filter(e=>{let[t,r,l,c]=mX(e,n),d=uK(e,n);if(d){let[e,i,s,a]=mX(d,n);t=Math.max(e,t),r=Math.max(i,r),l=Math.min(s,l),c=Math.min(a,c)}return!1===e.locked&&"selection"!==e.type&&!RO(e)&&i<=t&&s<=r&&a>=l&&o>=c});return l=r?EK(l):l,l=l.filter(e=>{let t=uK(e,n);return!t||iK(e,t,n)}),l},CK=(e,t,n,r)=>{let i=new Set(t.map(e=>e.id));return e.filter(e=>{let t=zK(e,n.width,n.height,n,r);return!i.has(e.id)&&t})},_K=function(){let e=null,t=null,n=null,r=(r,i)=>(null!=n&&r===e&&i.selectedElementIds===t||(n=r.some(e=>i.selectedElementIds[e.id]),e=r,t=i.selectedElementIds),n);return r.clearCache=()=>{e=null,t=null,n=null},r}(),MK=(e,t,n)=>{let r=new Set,i=[];for(let s of e.values())(t.selectedElementIds[s.id]||n?.includeBoundTextElement&&RO(s)&&t.selectedElementIds[s?.containerId])&&(i.push(s),r.add(s.id));if(n?.includeElementsInFrames){let t=[];return i.forEach(n=>{UO(n)&&aK(e,n.id).forEach(e=>!r.has(e.id)&&t.push(e)),t.push(n)}),t}return i},IK=(e,t)=>t.editingTextElement?[t.editingTextElement]:t.newElement?[t.newElement]:MK(e,t,{includeBoundTextElement:!0}),jK=(e,t)=>XL(t.selectedElementIds,e)?t.selectedElementIds:e,TK=e=>{let t=new Map,n=[];for(let r of e)r.isDeleted||(n.push(r),t.set(r.id,r));return{elementsMap:t,elements:n}},RK=uR(e=>{(BM.DEV||BM.MODE===$A||window?.DEBUG_FRACTIONAL_INDICES)&&nY(e,{shouldThrow:BM.DEV||BM.MODE===$A,includeBoundTextValidation:!0})},6e4,{leading:!0,trailing:!1}),PK=e=>"string"==typeof e,AK=class e{constructor(){XM(this,"callbacks",new Set),XM(this,"nonDeletedElements",[]),XM(this,"nonDeletedElementsMap",iO(new Map)),XM(this,"elements",[]),XM(this,"nonDeletedFramesLikes",[]),XM(this,"frames",[]),XM(this,"elementsMap",iO(new Map)),XM(this,"selectedElementsCache",{selectedElementIds:null,elements:null,cache:new Map}),XM(this,"sceneNonce"),XM(this,"insertElement",e=>{let t=e.frameId?this.getElementIndex(e.frameId):this.elements.length;this.insertElementAtIndex(e,t)}),XM(this,"insertElements",e=>{if(!e.length)return;let t=e[0]?.frameId?this.getElementIndex(e[0].frameId):this.elements.length;this.insertElementsAtIndex(e,t)}),XM(this,"getContainerElement",e=>e&&e.containerId&&this.getElement(e.containerId)||null),XM(this,"getElementsFromId",e=>{let t=this.getNonDeletedElementsMap(),n=t.get(e);return n?[n]:jV(t,e)})}static mapElementToScene(e,t){PK(e)?this.sceneMapById.set(e,t):(this.sceneMapByElement.set(e,t),this.sceneMapById.set(e.id,t))}static getScene(e){return PK(e)?this.sceneMapById.get(e)||null:this.sceneMapByElement.get(e)||null}getSceneNonce(){return this.sceneNonce}getNonDeletedElementsMap(){return this.nonDeletedElementsMap}getElementsIncludingDeleted(){return this.elements}getElementsMapIncludingDeleted(){return this.elementsMap}getNonDeletedElements(){return this.nonDeletedElements}getFramesIncludingDeleted(){return this.frames}getSelectedElements(e){let t=(e=>{let t=["includeBoundTextElement","includeElementsInFrames"],n="";for(let r of t)n+=`${r}:${e[r]?"1":"0"}`;return n})(e),n=e?.elements||this.nonDeletedElements;if(this.selectedElementsCache.elements===n&&this.selectedElementsCache.selectedElementIds===e.selectedElementIds){let e=this.selectedElementsCache.cache.get(t);if(e)return e}else null==e?.elements&&this.selectedElementsCache.cache.clear();let r=MK(n,{selectedElementIds:e.selectedElementIds},e);return null==e?.elements&&(this.selectedElementsCache.selectedElementIds=e.selectedElementIds,this.selectedElementsCache.elements=this.nonDeletedElements,this.selectedElementsCache.cache.set(t,r)),r}getNonDeletedFramesLikes(){return this.nonDeletedFramesLikes}getElement(e){return this.elementsMap.get(e)||null}getNonDeletedElement(e){let t=this.getElement(e);return t&&SQ(t)?t:null}mapElements(e){let t=!1,n=this.elements.map(n=>{let r=e(n);return r!==n&&(t=!0),r});return t&&this.replaceAllElements(n),t}replaceAllElements(t){let n=t instanceof Array?t:Array.from(t.values()),r=[];RK(n),this.elements=iY(n),this.elementsMap.clear(),this.elements.forEach(t=>{UO(t)&&r.push(t),this.elementsMap.set(t.id,t),e.mapElementToScene(t,this)});let i=TK(this.elements);this.nonDeletedElements=i.elements,this.nonDeletedElementsMap=i.elementsMap,this.frames=r,this.nonDeletedFramesLikes=TK(this.frames).elements,this.triggerUpdate()}triggerUpdate(){this.sceneNonce=DG();for(let e of Array.from(this.callbacks))e()}onUpdate(e){if(this.callbacks.has(e))throw new Error;return this.callbacks.add(e),()=>{if(!this.callbacks.has(e))throw new Error;this.callbacks.delete(e)}}destroy(){this.elements=[],this.nonDeletedElements=[],this.nonDeletedFramesLikes=[],this.frames=[],this.elementsMap.clear(),this.selectedElementsCache.selectedElementIds=null,this.selectedElementsCache.elements=null,this.selectedElementsCache.cache.clear(),e.sceneMapById.forEach((t,n)=>{t===this&&e.sceneMapById.delete(n)}),this.callbacks.clear()}insertElementAtIndex(e,t){if(!Number.isFinite(t)||t<0)throw new Error("insertElementAtIndex can only be called with index >= 0");let n=[...this.elements.slice(0,t),e,...this.elements.slice(t)];rY(n,DL([e])),this.replaceAllElements(n)}insertElementsAtIndex(e,t){if(!e.length)return;if(!Number.isFinite(t)||t<0)throw new Error("insertElementAtIndex can only be called with index >= 0");let n=[...this.elements.slice(0,t),...e,...this.elements.slice(t)];rY(n,DL(e)),this.replaceAllElements(n)}getElementIndex(e){return this.elements.findIndex(t=>t.id===e)}};XM(AK,"sceneMapByElement",new WeakMap),XM(AK,"sceneMapById",new Map);var NK=AK,DK=(e,t,n=!0,r)=>{let i=!1,{points:s,fixedSegments:a,fileId:o,startBinding:l,endBinding:c}=t;if(SO(e)&&(0===Object.keys(t).length||typeof s<"u"||typeof a<"u"||typeof l<"u"||typeof c<"u")){let n=iO(NK.getScene(e)?.getNonDeletedElementsMap()??new Map);t={...t,angle:0,...Aq({...e,x:t.x||e.x,y:t.y||e.y},n,{fixedSegments:a,points:s,startBinding:l,endBinding:c},{isDragging:r?.isDragging})}}else typeof s<"u"&&(t={...tX(s),...t});for(let d in t){let n=t[d];if(typeof n<"u"){if(e[d]===n&&("object"!=typeof n||null===n||"groupIds"===d||"scale"===d))continue;if("scale"===d){let t=e[d],r=n;if(t[0]===r[0]&&t[1]===r[1])continue}else if("points"===d){let t=e[d],r=n;if(t.length===r.length){let e=!1,n=t.length;for(;--n;){let i=t[n],s=r[n];if(i[0]!==s[0]||i[1]!==s[1]){e=!0;break}}if(!e)continue}}e[d]=n,i=!0}}return i&&((typeof t.height<"u"||typeof t.width<"u"||typeof o<"u"||typeof s<"u")&&UF.delete(e),e.version++,e.versionNonce=DG(),e.updated=NL(),n&&NK.getScene(e)?.triggerUpdate()),e},LK=(e,t,n=!1)=>{let r=!1;for(let i in t){let n=t[i];if(typeof n<"u"){if(e[i]===n&&("object"!=typeof n||null===n))continue;r=!0}}return r||n?{...e,...t,updated:NL(),version:e.version+1,versionNonce:DG()}:e},OK=(e,t)=>(e.version=(t??e.version)+1,e.versionNonce=DG(),e.updated=NL(),e),FK=e=>vO(e)||yO(e)?e.points.length<2:0===e.width&&0===e.height,zK=(e,t,n,r,i)=>{let[s,a,o,l]=mX(e,i),c=EL({clientX:r.offsetLeft,clientY:r.offsetTop},r),d=EL({clientX:r.offsetLeft+t,clientY:r.offsetTop+n},r);return c.x<=o&&c.y<=l&&d.x>=s&&d.y>=a},BK=(e,t,n,r,i,s)=>{let[a,o,l,c]=gX(e,i),d=EL({clientX:r.offsetLeft+(s?.left||0),clientY:r.offsetTop+(s?.top||0)},r),u=EL({clientX:r.offsetLeft+t-(s?.right||0),clientY:r.offsetTop+n-(s?.bottom||0)},r);return a>=d.x&&o>=d.y&&l<=u.x&&c<=u.y},HK=(e,t,n)=>{let r=Math.abs(t),i=Math.abs(n);if("line"===e||"arrow"===e||"freedraw"===e){let e=Math.round(Math.atan(i/r)/_A)*_A;0===e?n=0:e===Math.PI/2?t=0:n=r*Math.tan(e)*Math.sign(n)||n}else"selection"!==e&&(n=r*Math.sign(n));return{width:t,height:n}},$K=(e,t,n,r)=>{let i=n-e,s=r-t,a=Math.round(Math.atan(s/i)/_A)*_A;if(0===a)s=0;else if(a===Math.PI/2)i=0;else{let o=Math.tan(a),l=-1,c=t-o*e,d=-1/o,u=-1,h=r-d*n;i=(l*h-u*c)/(o*u-d*l)-e,s=(c*d-h*o)/(o*u-d*l)-t}return{width:i,height:s}},WK=e=>{let t={width:e.width,height:e.height,x:e.x,y:e.y};if(e.width<0){let n=Math.abs(e.width);t.width=n,t.x=e.x-n}if(e.height<0){let n=Math.abs(e.height);t.height=n,t.y=e.y-n}return t},XK={mouse:8,pen:16,touch:28},VK={e:!0,s:!0,n:!0,w:!0},GK={e:!0,s:!0,n:!0,w:!0,nw:!0,se:!0},YK={e:!0,s:!0,n:!0,w:!0},qK=(e,t,n,r,i,s,a)=>{let[o,l]=OD(PD(e+n/2,t+r/2),PD(i,s),a);return[o-n/2,l-r/2,n,r]},ZK=e=>!(e.viewport.isMobile||e.isTouchScreen&&(vA||EA)),KK=e=>ZK(e)?VK:{},QK=([e,t,n,r,i,s],a,o,l,c={},d=4,u=2)=>{let h=XK[l],p=h/o.value,f=h/o.value,m=h/o.value,g=h/o.value,b=n-e,U=r-t,y=d/o.value,x=(h-2*u)/(2*o.value),v={nw:c.nw?void 0:qK(e-y-m+x,t-y-g+x,p,f,i,s,a),ne:c.ne?void 0:qK(n+y-x,t-y-g+x,p,f,i,s,a),sw:c.sw?void 0:qK(e-y-m+x,r+y-x,p,f,i,s,a),se:c.se?void 0:qK(n+y-x,r+y-x,p,f,i,s,a),rotation:c.rotation?void 0:qK(e+b/2-p/2,t-y-g+x-16/o.value,p,f,i,s,a)},w=5*XK.mouse/o.value;return Math.abs(b)>w&&(c.n||(v.n=qK(e+b/2-p/2,t-y-g+x,p,f,i,s,a)),c.s||(v.s=qK(e+b/2-p/2,r+y-x,p,f,i,s,a))),Math.abs(U)>w&&(c.w||(v.w=qK(e-y-m+x,t+U/2-f/2,p,f,i,s,a)),c.e||(v.e=qK(n+y-x,t+U/2-f/2,p,f,i,s,a))),v},JK=(e,t,n,r="mouse",i=VK)=>{if(e.locked||SO(e))return{};if("freedraw"===e.type||vO(e)){if(2===e.points.length){let[,t]=e.points;0===t[0]||0===t[1]?i=YK:t[0]>0&&t[1]<0?i=GK:t[0]>0&&t[1]>0?i=YK:t[0]<0&&t[1]>0?i=GK:t[0]<0&&t[1]<0&&(i=YK)}}else UO(e)&&(i={...i,rotation:!0});let s=vO(e)?10:uO(e)?0:2;return QK(sX(e,n,!0),e.angle,t,r,i,s,uO(e)?0:void 0)},eQ=(e,t)=>{if(t.editingLinearElement)return!1;if(e.length>1)return!0;let n=e[0];return!SO(n)&&(!vO(n)||n.points.length>2)},tQ=(e,t,n)=>t>=e[0]&&t<=e[0]+e[2]&&n>=e[1]&&n<=e[1]+e[3],nQ=(e,t,n,r,i,s,a,o)=>e.reduce((e,l)=>{if(e)return e;let c=((e,t,n,r,i,s,a,o)=>{if(!n.selectedElementIds[e.id])return!1;let{rotation:l,...c}=JK(e,s,t,a,KK(o));if(l&&tQ(l,r,i))return"rotation";let d=Object.keys(c).filter(e=>{let t=c[e];return!!t&&tQ(t,r,i)});if(d.length>0)return d[0];if(ZK(o)){let[n,a,o,l,c,d]=sX(e,t);if(!(vO(e)&&e.points.length<=2)){let t=uO(e)?0:4/s.value,u=4/s.value,h=aQ(PD(n-t,a-t),PD(o+t,l+t),PD(c,d),e.angle);for(let[e,n]of Object.entries(h))if(GD(PD(r,i),n,u))return e}}return!1})(l,a,t,n,r,i,s,o);return c?{element:l,transformHandleType:c}:null},null),rQ=([e,t,n,r],i,s,a,o,l)=>{let c=QK([e,t,n,r,(e+n)/2,(t+r)/2],0,a,o,KK(l)),d=Object.keys(c).find(e=>{let t=c[e];return t&&tQ(t,i,s)});if(d)return d;if(ZK(l)){let o=(e+n)/2,l=(t+r)/2,c=4/a.value,d=aQ(PD(e-c,t-c),PD(n+c,r+c),PD(o,l),0);for(let[e,t]of Object.entries(d))if(GD(PD(i,s),t,c))return e}return!1},iQ=["ns","nesw","ew","nwse"],sQ=e=>{let{element:t,transformHandleType:n}=e,r=t&&Math.sign(t.height)*Math.sign(t.width)===-1,i=null;switch(n){case"n":case"s":i="ns";break;case"w":case"e":i="ew";break;case"nw":case"se":i=r?"nesw":"nwse";break;case"ne":case"sw":i=r?"nwse":"nesw";break;case"rotation":return"grab"}return i&&t&&(i=((e,t)=>{let n=iQ.indexOf(e);if(n>=0){let r=Math.round(t/(Math.PI/4));e=iQ[(n+r)%iQ.length]}return e})(i,t.angle)),i?`${i}-resize`:""},aQ=([e,t],[n,r],i,s)=>{let a=OD(PD(e,t),i,s),o=OD(PD(n,t),i,s),l=OD(PD(e,r),i,s),c=OD(PD(n,r),i,s);return{n:[a,o],e:[o,c],s:[c,l],w:[l,a]}},oQ=(e,t,n,r,i,s)=>{let a,[o,l,c,d]=sX(e,t),u=(o+c)/2,h=(l+d)/2;UO(e)?a=0:(a=5*Math.PI/2+Math.atan2(i-h,r-u),s&&(a+=_A/2,a-=a%_A),a=wD(a));let p=cG(e);if(DK(e,{angle:a}),p){let t=n.getElement(p);t&&!wO(e)&&DK(t,{angle:a})}},lQ=(e,t,n,r)=>vO(e)||yO(e)?{points:nX(0,t,nX(1,n,e.points,r),r)}:{},cQ=(e,t,n)=>{let r=e.width;if(RO(e)){let n=uG(e,t);n&&(r=yG(n,e))}let i=e.fontSize*(n/r);return i<1?null:{size:i}},dQ=(e,t,n,r,i,s,a)=>{let[o,l,c,d,u,h]=sX(t,n),[p,f]=OD(PD(s,a),PD(u,h),-t.angle),m=0,g=0;"e"!==r&&"w"!==r&&(r.includes("e")&&(m=(p-o)/(c-o)),r.includes("w")&&(m=(c-p)/(c-o)),r.includes("n")&&(g=(d-f)/(d-l)),r.includes("s")&&(g=(f-l)/(d-l)));let b=Math.max(m,g);if(b>0){let e=t.width*b,s=t.height*b,a=cQ(t,n,e);if(null===a)return;let p=[o,l],f=[c,d],m=[u,h],g=PD(o,l);if(["n","w","nw"].includes(r)&&(g=PD(f[0]-Math.abs(e),f[1]-Math.abs(s))),"ne"===r){let e=[p[0],f[1]];g=PD(e[0],e[1]-Math.abs(s))}if("sw"===r){let t=[f[0],p[1]];g=PD(t[0]-Math.abs(e),t[1])}["s","n"].includes(r)&&(g[0]=m[0]-e/2),["e","w"].includes(r)&&(g[1]=m[1]-s/2),i&&(g[0]=m[0]-Math.abs(e)/2,g[1]=m[1]-Math.abs(s)/2);let U=t.angle,y=OD(g,PD(u,h),U),x=OD(PD(g[0]+Math.abs(e)/2,g[1]+Math.abs(s)/2),PD(u,h),U);g=OD(y,x,-U);let[v,w]=g;DK(t,{fontSize:a.size,width:e,height:s,x:v,y:w})}if("e"===r||"w"===r){let n=e.get(t.id),[i,o,l,c]=UX(n,n.width,n.height,!0),d=PD(i,o),u=PD(l,c),h=zD(d,u),p=OD(PD(s,a),h,-n.angle),[f,,m]=UX(t,t.width,t.height,!0),g=m-f,b=u[0]-d[0],U=BO(gL({fontSize:t.fontSize,fontFamily:t.fontFamily}),t.lineHeight),y=b/g;r.includes("e")&&(y=(p[0]-d[0])/g),r.includes("w")&&(y=(u[0]-p[0])/g);let x=t.width*y<U?U:t.width*y,v=uF(t.originalText,gL(t),Math.abs(x)),w=OO(v,gL(t),t.lineHeight),S=w.height,[E,k,C,_]=UX(n,x,S,!0),M=C-E,I=_-k,j=[...d];["n","w","nw"].includes(r)&&(j=[u[0]-Math.abs(M),d[1]]);let T=n.angle,R=OD(j,h,T),P=OD(PD(j[0]+Math.abs(M)/2,j[1]+Math.abs(I)/2),h,T);j=OD(R,P,-T);let A={width:Math.abs(x),height:Math.abs(w.height),x:j[0],y:j[1],text:v,autoResize:!1};DK(t,A)}},uQ=(e,t,n,r,i,s,a,o,l)=>{let c=5*Math.PI/2+Math.atan2(s-l,i-o);a&&(c+=_A/2,c-=c%_A);for(let d of t)if(!UO(d)){let[r,i,s,a]=sX(d,n),u=(r+s)/2,h=(i+a)/2,p=e.get(d.id)?.angle??d.angle,[f,m]=OD(PD(u,h),PD(o,l),c+p-d.angle);SO(d)?DK(d,{points:mV(d,n)}):DK(d,{x:d.x+(f-u),y:d.y+(m-h),angle:wD(c+p)},!1),$X(d,n,{simultaneouslyUpdated:t});let g=dG(d,n);g&&!wO(d)&&DK(g,{x:g.x+(f-u),y:g.y+(m-h),angle:wD(c+p)},!1)}r.triggerUpdate()},hQ=(e,t,n,r,i,s,a,{shouldInformMutation:o=!0,shouldMaintainAspectRatio:l=!1,shouldResizeFromCenter:c=!1}={})=>{let d={},u=dG(n,i);if(u){let r=s.get(u.id);if(r&&(d={fontSize:r.fontSize}),l){let t={...n,width:e},r=cQ(u,i,yG(t,u));if(null===r)return;d={fontSize:r.size}}else{let n=zO(gL(u),u.lineHeight),r=XO(u.fontSize,u.lineHeight);e=Math.max(e,n),t=Math.max(t,r)}}let h=lQ(r,e,t,!0),p=PD(r.x,r.y);if(vO(r)){let[e,t]=mX(r,s);p=PD(e,t)}let f=((e,t,n,r,i,s,a,o,l)=>{let c=((e,t,n)=>{if(n)return"center";if(t)switch(e){case"n":return"south-side";case"e":return"west-side";case"s":return"north-side";case"w":return"east-side";case"ne":return"bottom-left";case"nw":return"bottom-right";case"se":return"top-left";case"sw":return"top-right"}return["e","se","s"].includes(e)?"top-left":["n","nw","w"].includes(e)?"bottom-right":"ne"===e?"bottom-left":"top-right"})(a,o,l),[d,u]=e;switch(c){case"top-left":return{x:d+(t-r)/2+(r-t)/2*Math.cos(s)+(n-i)/2*Math.sin(s),y:u+(n-i)/2+(r-t)/2*Math.sin(s)+(i-n)/2*Math.cos(s)};case"top-right":return{x:d+(t-r)/2*(Math.cos(s)+1)+(n-i)/2*Math.sin(s),y:u+(n-i)/2+(t-r)/2*Math.sin(s)+(i-n)/2*Math.cos(s)};case"bottom-left":return{x:d+(t-r)/2*(1-Math.cos(s))+(i-n)/2*Math.sin(s),y:u+(n-i)/2*(Math.cos(s)+1)+(r-t)/2*Math.sin(s)};case"bottom-right":return{x:d+(t-r)/2*(Math.cos(s)+1)+(i-n)/2*Math.sin(s),y:u+(n-i)/2*(Math.cos(s)+1)+(t-r)/2*Math.sin(s)};case"center":return{x:d-(r-t)/2,y:u-(i-n)/2};case"east-side":return{x:d+(t-r)/2*(Math.cos(s)+1),y:u+(t-r)/2*Math.sin(s)+(n-i)/2};case"west-side":return{x:d+(t-r)/2*(1-Math.cos(s)),y:u+(r-t)/2*Math.sin(s)+(n-i)/2};case"north-side":return{x:d+(t-r)/2+(n-i)/2*Math.sin(s),y:u+(i-n)/2*(Math.cos(s)-1)};case"south-side":return{x:d+(t-r)/2+(i-n)/2*Math.sin(s),y:u+(n-i)/2*(Math.cos(s)+1)}}})(p,r.width,r.height,e,t,r.angle,a,l,c);if(vO(r)&&h.points){let e=r.x-p[0],t=r.y-p[1];f.x+=e,f.y+=t;let n=h.points[0][0],i=h.points[0][1];f.x+=n,f.y+=i,h.points=h.points.map(e=>PD(e[0]-n,e[1]-i))}if(e<0&&(f.x=f.x+e),t<0&&(f.y=f.y+t),"scale"in n&&"scale"in r&&DK(n,{scale:[(Math.sign(e)||r.scale[0])*r.scale[0],(Math.sign(t)||r.scale[1])*r.scale[1]]}),wO(n)&&u&&l){let t=e/n.width*u.fontSize;if(t<1)return;d.fontSize=t}if(0!==e&&0!==t&&Number.isFinite(f.x)&&Number.isFinite(f.y)){let r={...f,width:Math.abs(e),height:Math.abs(t),...h};DK(n,r,o),$X(n,i,{newSize:{width:e,height:t}}),u&&null!=d&&DK(u,{fontSize:d.fontSize}),oG(n,i,a,l)}},pQ=(e,t,n,r,i,s,a,{shouldMaintainAspectRatio:o=!1,shouldResizeFromCenter:l=!1}={})=>{let[c,d,u,h]=UX(t,t.width,t.height,!0),p=PD(c,d),f=PD(u,h),m=zD(p,f),g=OD(PD(s,a),m,-t.angle),[b,U,y,x]=UX(e,e.width,e.height,!0),v=y-b,w=x-U,S=(f[0]-p[0])/v,E=(f[1]-p[1])/w;i.includes("e")&&(S=(g[0]-p[0])/v),i.includes("s")&&(E=(g[1]-p[1])/w),i.includes("w")&&(S=(f[0]-g[0])/v),i.includes("n")&&(E=(f[1]-g[1])/w);let k=e.width*S,C=e.height*E;if(l&&(k=2*k-t.width,C=2*C-t.height),o){let e=Math.abs(k)/t.width,n=Math.abs(C)/t.height;if(1===i.length&&(C*=e,k*=n),2===i.length){let r=Math.max(e,n);k=t.width*r*Math.sign(k),C=t.height*r*Math.sign(C)}}return{nextWidth:k,nextHeight:C}},fQ=(e,t,n,r,i,s,{shouldMaintainAspectRatio:a=!1,shouldResizeFromCenter:o=!1}={})=>{let l=e.map(e=>t.get(e.id)),c=l.reduce((e,r)=>{if(!vO(r))return e;let i=cG(r);if(!i)return e;let s=t.get(i)??null;return RO(s)?[...e,{...s,...eG.getBoundTextElementPosition(r,s,n)}]:e},[]),d=xX(l.map(e=>e).concat(c)),{minX:u,minY:h,maxX:p,maxY:f,midX:m,midY:g}=d,b=p-u,U=f-h,y={ne:[u,f],se:[u,h],sw:[p,h],nw:[p,f],e:[u,h+U/2],w:[p,h+U/2],n:[u+b/2,f],s:[u+b/2,h]},[x,v]=o?[m,g]:y[r],w=o?2:1,S=Math.max(Math.abs(i-x)/b||0,Math.abs(s-v)/U||0)*w,E=r.includes("e")||r.includes("w")?Math.abs(i-x)*w:b,k=r.includes("n")||r.includes("s")?Math.abs(s-v)*w:U;a&&(E=b*S*Math.sign(i-x),k=U*S*Math.sign(s-v));let C={ne:[i<x,s>v],se:[i<x,s<v],sw:[i>x,s<v],nw:[i>x,s>v],e:[i<x,!1],w:[i>x,!1],n:[!1,s>v],s:[!1,s<v]},[_,M]=C[r].map(e=>e);return{originalBoundingBox:d,nextWidth:E,nextHeight:k,flipByX:_,flipByY:M}},mQ=(e,t,n,r,i,{shouldMaintainAspectRatio:s=!1,shouldResizeFromCenter:a=!1,flipByX:o=!1,flipByY:l=!1,nextHeight:c,nextWidth:d,originalBoundingBox:u}={})=>{if(void 0===d&&void 0===c&&void 0===o&&void 0===l||0===c||0===d)return;i||(i=t);let h,p=e.reduce((e,t)=>{let n=i.get(t.id);return n&&e.push({orig:n,latest:t}),e},[]);if(u)h=u;else{let e=p.reduce((e,{orig:n})=>{if(!vO(n))return e;let r=cG(n);if(!r)return e;let s=i.get(r)??null;return RO(s)?[...e,{...s,...eG.getBoundTextElementPosition(n,s,t)}]:e},[]);h=xX(p.map(({orig:e})=>e).concat(e))}let{minX:f,minY:m,maxX:g,maxY:b,midX:U,midY:y}=h,x=g-f,v=b-m;if(void 0===d&&void 0===c&&(d=x,c=v),s&&(void 0===d?d=c*(x/v):void 0===c?c=d*(v/x):Math.abs(d/c-x/v)>.001&&(d=c*(x/v))),d&&c){let e,u=n.includes("e")||n.includes("w")?Math.abs(d)/x:1,h=n.includes("n")||n.includes("s")?Math.abs(c)/v:1;e=1===n.length?n.includes("e")||n.includes("w")?u:h:Math.max(Math.abs(d)/x||0,Math.abs(c)/v||0);let w={ne:[f,b],se:[f,m],sw:[g,m],nw:[g,b],e:[f,m+v/2],w:[g,m+v/2],n:[f+x/2,b],s:[f+x/2,m]},[S,E]=a?[U,y]:w[n],k=s||p.some(e=>0!==e.latest.angle||mO(e.latest)||AV(e.latest));k&&(u=e,h=e);let[C,_]=[o?-1:1,l?-1:1],M=[];for(let{orig:n,latest:r}of p){if(mO(n)&&RO(n))continue;let s=n.width*u,a=n.height*h,c=wD(n.angle*C*_),d=vO(n)||yO(n),p=S+C*((n.x-S)*u+(o&&!d?s:0)),f=E+_*((n.y-E)*h+(l&&!d?a:0)),m=lQ(n,s*C,a*_,!1),g={x:p,y:f,width:s,height:a,angle:c,...m};if(SO(n)&&(n.startBinding&&(g.startBinding={...n.startBinding,fixedPoint:[o?1-n.startBinding.fixedPoint[0]:n.startBinding.fixedPoint[0],l?1-n.startBinding.fixedPoint[1]:n.startBinding.fixedPoint[1]]}),n.endBinding&&(g.endBinding={...n.endBinding,fixedPoint:[o?1-n.endBinding.fixedPoint[0]:n.endBinding.fixedPoint[0],l?1-n.endBinding.fixedPoint[1]:n.endBinding.fixedPoint[1]]}),n.fixedSegments&&m.points&&(g.fixedSegments=n.fixedSegments.map(e=>({...e,start:m.points[e.index-1],end:m.points[e.index]})))),uO(n)&&(g.scale=[n.scale[0]*C,n.scale[1]*_]),mO(n)){let e=cQ(n,t,s);if(!e)return;g.fontSize=e.size}let b=i.get(cG(n)??"");if(b)if(k){let t=b.fontSize*e;if(t<1)return;g.boundTextFontSize=t}else g.boundTextFontSize=b.fontSize;M.push({element:r,update:g})}let I=M.map(({element:e})=>e);for(let{element:r,update:{boundTextFontSize:i,...s}}of M){let{width:e,height:a,angle:o}=s;DK(r,s,!1,{isDragging:!0}),$X(r,t,{simultaneouslyUpdated:I,newSize:{width:e,height:a}});let l=dG(r,t);l&&i&&(DK(l,{fontSize:i,angle:vO(r)?void 0:o},!1),oG(r,t,n,!0))}r.triggerUpdate()}},gQ=(e,t,n,r)=>{let[i,s]=e,a=i+t.x+n.x,o=s+t.y+n.y;if(0===n.x||0===n.y){let[e,l]=qV(i+t.x,s+t.y,r);0===n.x&&(a=e),0===n.y&&(o=l)}return{x:a-i,y:o-s}},bQ=(e,t,n)=>{let r=e.originalElements.get(t.id)??t,i=r.x+n.x,s=r.y+n.y;DK(t,{x:i,y:s})},UQ=({newElement:e,elementType:t,originX:n,originY:r,x:i,y:s,width:a,height:o,shouldMaintainAspectRatio:l,shouldResizeFromCenter:c,zoom:d,widthAspectRatio:u=null,originOffset:h=null,informMutation:p=!0})=>{l&&"selection"!==e.type&&(u?o=a/u:(Math.abs(s-r)>Math.abs(i-n)?({width:a,height:o}=HK(t,o,i<n?-a:a)):({width:a,height:o}=HK(t,a,s<r?-o:o)),o<0&&(o=-o)));let f=i<n?n-a:n,m=s<r?r-o:r;c&&(f=n-(a+=a)/2,m=r-(o+=o)/2);let g=null;if(mO(e)){o=e.height;let t=BO(gL({fontSize:e.fontSize,fontFamily:e.fontFamily}),e.lineHeight);a=Math.max(a,t),Math.abs(i-n)>36/d&&(g={autoResize:!1}),m=r,c&&(f=n-a/2)}if(0!==a&&0!==o){let t=null;uO(e)&&(t={initialWidth:a,initialHeight:o}),DK(e,{x:f+(h?.x??0),y:m+(h?.y??0),width:a,height:o,...g,...t},p)}},yQ=(e,t)=>!(e.viewModeEnabled||"elementLinkSelector"===e.openDialog?.name||!("custom"!==e.activeTool.type&&(e.editingTextElement||"selection"!==e.activeTool.type&&"eraser"!==e.activeTool.type&&"hand"!==e.activeTool.type&&"laser"!==e.activeTool.type)||MK(t,e).length)),xQ=e=>{let t=5381;for(let n=0;n<e.length;n++){t=(t<<5)+t+e.charCodeAt(n)}return t>>>0},vQ=e=>e.filter(e=>!e.isDeleted&&!FK(e)),wQ=e=>e.filter(e=>!e.isDeleted),SQ=e=>!e.isDeleted,EQ=e=>(e=>wQ(e).map(e=>EO(e.type)?{...e,lastCommittedPoint:null}:e))(e),kQ=async e=>{let t;if(e.type===lN.png)try{return await(await Pt(async()=>{const{decodePngMetadata:e}=await Promise.resolve().then(()=>Noe);return{decodePngMetadata:e}},void 0)).decodePngMetadata(e)}catch(n){throw"INVALID"===n.message?new EH("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new EH("Error: cannot restore image")}else if(t="text"in Blob?await e.text():await new Promise(t=>{let n=new FileReader;n.readAsText(e,"utf8"),n.onloadend=()=>{n.readyState===FileReader.DONE&&t(n.result)}}),e.type===lN.svg)try{return(({svg:e})=>{if(e.includes(`payload-type:${lN.excalidraw}`)){let n=e.match(/<!-- payload-start -->\s*(.+?)\s*<!-- payload-end -->/);if(!n)throw new Error("INVALID");let r="1"!==(e.match(/<!-- payload-version:(\d+) -->/)?.[1]||"1");try{let e=ZQ(n[1],r),t=JSON.parse(e);if(!("encoded"in t)){if("type"in t&&t.type===pN.excalidraw)return e;throw new Error("FAILED")}return QQ(t)}catch(t){throw new Error("FAILED")}}throw new Error("INVALID")})({svg:t})}catch(n){throw"INVALID"===n.message?new EH("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new EH("Error: cannot restore image")}return t},CQ=e=>e&&e.name.match(/\.(json|excalidraw|png|svg)$/)?.[1]||null,_Q=e=>{let t=CQ(e);return"png"===t||"svg"===t},MQ=e=>!!e&&Object.values(oN).includes(e),IQ=e=>{let{type:t}=e||{};return MQ(t)},jQ=async(e,t,n,r)=>{let i,s=await kQ(e);try{try{i=JSON.parse(s)}catch(a){throw IQ(e)?new EH("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):a}if((e=>e?.type===pN.excalidraw&&(!e.elements||Array.isArray(e.elements)&&(!e.appState||"object"==typeof e.appState)))(i))return{type:lN.excalidraw,data:gZ({elements:EQ(i.elements||[]),appState:{theme:t?.theme,fileHandle:r||e.handle||null,...fD(i.appState||{}),...t?UV(i.elements||[],t):{}},files:i.files},t,n,{repairBindings:!0,refreshDimensions:!1})};if(KY(i))return{type:lN.excalidrawlib,data:i};throw new Error("Error: invalid file")}catch(a){throw a instanceof EH?a:new Error("Error: invalid file")}},TQ=async(e,t,n,r)=>{let i=await jQ(e,t,n,r);if(i.type!==lN.excalidraw)throw new Error("Error: invalid file");return i.data},RQ=(e,t="unpublished")=>{let n=JSON.parse(e);if(!KY(n))throw new Error("Invalid library");let r=n.libraryItems||n.library;return UZ(r,t)},PQ=async e=>new Promise(async(t,n)=>{try{HL(e)&&(e=await e),e.toBlob(e=>{if(!e)return n(new wH("Error: Canvas too big","CANVAS_POSSIBLY_TOO_BIG"));t(e)})}catch(cA){n(cA)}}),AQ=async e=>{try{let t=await window.crypto.subtle.digest("SHA-1",await XQ(e));return(e=>Array.from(e).map(e=>`0${e.toString(16)}`.slice(-2)).join(""))(new Uint8Array(t))}catch(t){return oR(40)}},NQ=async e=>new Promise((t,n)=>{let r=new FileReader;r.onload=()=>{let e=r.result;t(e)},r.onerror=e=>n(e),r.readAsDataURL(e)}),DQ=(e,t)=>`data:${t};base64,${qQ(VQ(e),!0)}`,LQ=e=>ZQ(e.slice(e.indexOf(",")+1)),OQ=async(e,t)=>{if(e.type===lN.svg)return e;let[n,r]=await Promise.all([Pt(()=>import("./pica-B_WanH_2.js").then(e=>e.p),__vite__mapDeps([4,2,1])).then(e=>e.default),Pt(()=>import("./image-blob-reduce.esm-DM2vqHRj.js"),[]).then(e=>e.default)]),i=r({pica:n({features:["js","wasm"]})});if(t.outputType){let{outputType:e}=t;i._create_blob=function(t){return this.pica.toBlob(t.out_canvas,e,.8).then(e=>(t.out_blob=e,t))}}if(!IQ(e))throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"});return new File([await i.toBlob(e,{max:t.maxWidthOrHeight,alpha:!0})],e.name,{type:t.outputType||e.type})},FQ=(e,t="")=>new File([(new TextEncoder).encode(e)],t,{type:lN.svg}),zQ=async(e,t="")=>{let n;try{n=await fetch(e)}catch{throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"})}if(!n.ok)throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"});let r=await n.blob();if(r.type&&IQ(r)){let e=t||r.name||"";return new File([r],e,{type:r.type})}throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"})},BQ=async e=>{if(sA)try{return await e.dataTransfer.items[0].getAsFileSystemHandle()||null}catch(t){return null}return null},HQ=e=>{let t=null,n=`${[...new Uint8Array(e).slice(0,8)].join(" ")} `,r="255 216 255 ",i="71 73 70 56 57 97 ";return n==="137 80 78 71 13 10 26 10 "?t=lN.png:n.startsWith(r)?t=lN.jpg:n.startsWith(i)&&(t=lN.gif),t},$Q=(e,t,n)=>new File([e],n||"",{type:t}),WQ=async e=>{if(e.type){if(IQ(e)){let t=await XQ(e),n=HQ(t);n&&n!==e.type&&(e=$Q(t,n,e.name))}}else if(e?.name?.endsWith(".excalidrawlib"))e=$Q(await XQ(e),lN.excalidrawlib,e.name);else if(e?.name?.endsWith(".excalidraw"))e=$Q(await XQ(e),lN.excalidraw,e.name);else{let t=await XQ(e),n=HQ(t);n&&(e=$Q(t,n,e.name))}return e},XQ=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((t,n)=>{let r=new FileReader;r.onload=e=>{if(!e.target?.result)return n(new Error("Couldn't convert blob to ArrayBuffer"));t(e.target.result)},r.readAsArrayBuffer(e)}),VQ=e=>{let t="string"==typeof e?(new TextEncoder).encode(e):e instanceof Uint8Array?e:new Uint8Array(e),n="";for(let r of t)n+=String.fromCharCode(r);return n},GQ=e=>{let t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return t},YQ=e=>new TextDecoder("utf-8").decode(GQ(e)),qQ=(e,t=!1)=>t?window.btoa(e):window.btoa(VQ(e)),ZQ=(e,t=!1)=>t?window.atob(e):YQ(window.atob(e)),KQ=({text:e,compress:t})=>{let n;if(!1!==t)try{n=VQ(iR(e))}catch(cA){}return{version:"1",encoding:"bstring",compressed:!!n,encoded:n||VQ(e)}},QQ=e=>{let t;if("bstring"!==e.encoding)throw new Error(`decode: unknown encoding "${e.encoding}"`);return t=e.compressed?e.encoded:YQ(e.encoded),e.compressed?sR(new Uint8Array(GQ(t)),{to:"string"}):t},JQ=async e=>{let t=YM(new Uint8Array(await XQ(e))).find(e=>"tEXt"===e.name);return t?tI.decode(t.data):null},eJ={paste:"Paste",pasteAsPlaintext:"Paste as plaintext",pasteCharts:"Paste charts",selectAll:"Select all",multiSelect:"Add element to selection",moveCanvas:"Move canvas",cut:"Cut",copy:"Copy",copyAsPng:"Copy to clipboard as PNG",copyAsSvg:"Copy to clipboard as SVG",copyText:"Copy to clipboard as text",copySource:"Copy source to clipboard",convertToCode:"Convert to code",bringForward:"Bring forward",sendToBack:"Send to back",bringToFront:"Bring to front",sendBackward:"Send backward",delete:"Delete",copyStyles:"Copy styles",pasteStyles:"Paste styles",stroke:"Stroke",changeStroke:"Change stroke color",background:"Background",changeBackground:"Change background color",fill:"Fill",strokeWidth:"Stroke width",strokeStyle:"Stroke style",strokeStyle_solid:"Solid",strokeStyle_dashed:"Dashed",strokeStyle_dotted:"Dotted",sloppiness:"Sloppiness",opacity:"Opacity",textAlign:"Text align",edges:"Edges",sharp:"Sharp",round:"Round",arrowheads:"Arrowheads",arrowhead_none:"None",arrowhead_arrow:"Arrow",arrowhead_bar:"Bar",arrowhead_circle:"Circle",arrowhead_circle_outline:"Circle (outline)",arrowhead_triangle:"Triangle",arrowhead_triangle_outline:"Triangle (outline)",arrowhead_diamond:"Diamond",arrowhead_diamond_outline:"Diamond (outline)",arrowhead_crowfoot_many:"Crow's foot (many)",arrowhead_crowfoot_one:"Crow's foot (one)",arrowhead_crowfoot_one_or_many:"Crow's foot (one or many)",more_options:"More options",arrowtypes:"Arrow type",arrowtype_sharp:"Sharp arrow",arrowtype_round:"Curved arrow",arrowtype_elbowed:"Elbow arrow",fontSize:"Font size",fontFamily:"Font family",addWatermark:'Add "Made with Excalidraw"',handDrawn:"Hand-drawn",normal:"Normal",code:"Code",small:"Small",medium:"Medium",large:"Large",veryLarge:"Very large",solid:"Solid",hachure:"Hachure",zigzag:"Zigzag",crossHatch:"Cross-hatch",thin:"Thin",bold:"Bold",left:"Left",center:"Center",right:"Right",extraBold:"Extra bold",architect:"Architect",artist:"Artist",cartoonist:"Cartoonist",fileTitle:"File name",colorPicker:"Color picker",canvasColors:"Used on canvas",canvasBackground:"Canvas background",drawingCanvas:"Drawing canvas",clearCanvas:"Clear canvas",layers:"Layers",actions:"Actions",language:"Language",liveCollaboration:"Live collaboration...",duplicateSelection:"Duplicate",untitled:"Untitled",name:"Name",yourName:"Your name",madeWithExcalidraw:"Made with Excalidraw",group:"Group selection",ungroup:"Ungroup selection",collaborators:"Collaborators",toggleGrid:"Toggle grid",addToLibrary:"Add to library",removeFromLibrary:"Remove from library",libraryLoadingMessage:"Loading library…",libraries:"Browse libraries",loadingScene:"Loading scene…",loadScene:"Load scene from file",align:"Align",alignTop:"Align top",alignBottom:"Align bottom",alignLeft:"Align left",alignRight:"Align right",centerVertically:"Center vertically",centerHorizontally:"Center horizontally",distributeHorizontally:"Distribute horizontally",distributeVertically:"Distribute vertically",flipHorizontal:"Flip horizontal",flipVertical:"Flip vertical",viewMode:"View mode",share:"Share",showStroke:"Show stroke color picker",showBackground:"Show background color picker",showFonts:"Show font picker",toggleTheme:"Toggle light/dark theme",theme:"Theme",personalLib:"Personal Library",excalidrawLib:"Excalidraw Library",decreaseFontSize:"Decrease font size",increaseFontSize:"Increase font size",unbindText:"Unbind text",bindText:"Bind text to the container",createContainerFromText:"Wrap text in a container",link:{edit:"Edit link",editEmbed:"Edit embeddable link",create:"Add link",label:"Link",labelEmbed:"Link & embed",empty:"No link is set",hint:"Type or paste your link here",goToElement:"Go to target element"},lineEditor:{edit:"Edit line",editArrow:"Edit arrow"},elementLock:{lock:"Lock",unlock:"Unlock",lockAll:"Lock all",unlockAll:"Unlock all"},statusPublished:"Published",sidebarLock:"Keep sidebar open",selectAllElementsInFrame:"Select all elements in frame",removeAllElementsFromFrame:"Remove all elements from frame",eyeDropper:"Pick color from canvas",textToDiagram:"Text to diagram",prompt:"Prompt",followUs:"Follow us",discordChat:"Discord chat",zoomToFitViewport:"Zoom to fit in viewport",zoomToFitSelection:"Zoom to fit selection",zoomToFit:"Zoom to fit all elements",installPWA:"Install Excalidraw locally (PWA)",autoResize:"Enable text auto-resizing",imageCropping:"Image cropping",unCroppedDimension:"Uncropped dimension",copyElementLink:"Copy link to object",linkToElement:"Link to object",wrapSelectionInFrame:"Wrap selection in frame"},tJ={title:"Link to object",desc:"Click on a shape on canvas or paste a link.",notFound:"Linked object wasn't found on canvas."},nJ={noItems:"No items added yet...",hint_emptyLibrary:"Select an item on canvas to add it here, or install a library from the public repository, below.",hint_emptyPrivateLibrary:"Select an item on canvas to add it here."},rJ={title:"Find on canvas",noMatch:"No matches found...",singleResult:"result",multipleResults:"results",placeholder:"Find text on canvas..."},iJ={clearReset:"Reset the canvas",exportJSON:"Export to file",exportImage:"Export image...",export:"Save to...",copyToClipboard:"Copy to clipboard",copyLink:"Copy link",save:"Save to current file",saveAs:"Save as",load:"Open",getShareableLink:"Get shareable link",close:"Close",selectLanguage:"Select language",scrollBackToContent:"Scroll back to content",zoomIn:"Zoom in",zoomOut:"Zoom out",resetZoom:"Reset zoom",menu:"Menu",done:"Done",edit:"Edit",undo:"Undo",redo:"Redo",resetLibrary:"Reset library",createNewRoom:"Create new room",fullScreen:"Full screen",darkMode:"Dark mode",lightMode:"Light mode",systemMode:"System mode",zenMode:"Zen mode",objectsSnapMode:"Snap to objects",exitZenMode:"Exit zen mode",cancel:"Cancel",clear:"Clear",remove:"Remove",embed:"Toggle embedding",publishLibrary:"Publish",submit:"Submit",confirm:"Confirm",embeddableInteractionButton:"Click to interact"},sJ={clearReset:"This will clear the whole canvas. Are you sure?",couldNotCreateShareableLink:"Couldn't create shareable link.",couldNotCreateShareableLinkTooBig:"Couldn't create shareable link: the scene is too big",couldNotLoadInvalidFile:"Couldn't load invalid file",importBackendFailed:"Importing from backend failed.",cannotExportEmptyCanvas:"Cannot export empty canvas.",couldNotCopyToClipboard:"Couldn't copy to clipboard.",decryptFailed:"Couldn't decrypt data.",uploadedSecurly:"The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can't read the content.",loadSceneOverridePrompt:"Loading external drawing will replace your existing content. Do you wish to continue?",collabStopOverridePrompt:"Stopping the session will overwrite your previous, locally stored drawing. Are you sure?\n\n(If you want to keep your local drawing, simply close the browser tab instead.)",errorAddingToLibrary:"Couldn't add item to the library",errorRemovingFromLibrary:"Couldn't remove item from the library",confirmAddLibrary:"This will add {{numShapes}} shape(s) to your library. Are you sure?",imageDoesNotContainScene:"This image does not seem to contain any scene data. Have you enabled scene embedding during export?",cannotRestoreFromImage:"Scene couldn't be restored from this image file",invalidSceneUrl:"Couldn't import scene from the supplied URL. It's either malformed, or doesn't contain valid Excalidraw JSON data.",resetLibrary:"This will clear your library. Are you sure?",removeItemsFromsLibrary:"Delete {{count}} item(s) from library?",invalidEncryptionKey:"Encryption key must be of 22 characters. Live collaboration is disabled.",collabOfflineWarning:"No internet connection available.\nYour changes will not be saved!"},aJ={unsupportedFileType:"Unsupported file type.",imageInsertError:"Couldn't insert image. Try again later...",fileTooBig:"File is too big. Maximum allowed size is {{maxSize}}.",svgImageInsertError:"Couldn't insert SVG image. The SVG markup looks invalid.",failedToFetchImage:"Failed to fetch image.",cannotResolveCollabServer:"Couldn't connect to the collab server. Please reload the page and try again.",importLibraryError:"Couldn't load library",saveLibraryError:"Couldn't save library to storage. Please save your library to a file locally to make sure you don't lose changes.",collabSaveFailed:"Couldn't save to the backend database. If problems persist, you should save your file locally to ensure you don't lose your work.",collabSaveFailed_sizeExceeded:"Couldn't save to the backend database, the canvas seems to be too big. You should save the file locally to ensure you don't lose your work.",imageToolNotSupported:"Images are disabled.",brave_measure_text_error:{line1:"Looks like you are using Brave browser with the <bold>Aggressively Block Fingerprinting</bold> setting enabled.",line2:"This could result in breaking the <bold>Text Elements</bold> in your drawings.",line3:"We strongly recommend disabling this setting. You can follow <link>these steps</link> on how to do so.",line4:"If disabling this setting doesn't fix the display of text elements, please open an <issueLink>issue</issueLink> on our GitHub, or write us on <discordLink>Discord</discordLink>"},libraryElementTypeError:{embeddable:"Embeddable elements cannot be added to the library.",iframe:"IFrame elements cannot be added to the library.",image:"Support for adding images to the library coming soon!"},asyncPasteFailedOnRead:"Couldn't paste (couldn't read from system clipboard).",asyncPasteFailedOnParse:"Couldn't paste.",copyToSystemClipboardFailed:"Couldn't copy to clipboard."},oJ={selection:"Selection",image:"Insert image",rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Draw",text:"Text",library:"Library",lock:"Keep selected tool active after drawing",penMode:"Pen mode - prevent touch",link:"Add / Update link for a selected shape",eraser:"Eraser",frame:"Frame tool",magicframe:"Wireframe to code",embeddable:"Web Embed",laser:"Laser pointer",hand:"Hand (panning tool)",extraTools:"More tools",mermaidToExcalidraw:"Mermaid to Excalidraw"},lJ={rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Freedraw",text:"Text",image:"Image",group:"Group",frame:"Frame",magicframe:"Wireframe to code",embeddable:"Web Embed",selection:"Selection",iframe:"IFrame"},cJ={canvasActions:"Canvas actions",selectedShapeActions:"Selected shape actions",shapes:"Shapes"},dJ={dismissSearch:"Escape to dismiss search",canvasPanning:"To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool",linearElement:"Click to start multiple points, drag for single line",arrowTool:"Click to start multiple points, drag for single line. Press {{arrowShortcut}} again to change arrow type.",freeDraw:"Click and drag, release when you're finished",text:"Tip: you can also add text by double-clicking anywhere with the selection tool",embeddable:"Click-drag to create a website embed",text_selected:"Double-click or press ENTER to edit text",text_editing:"Press Escape or CtrlOrCmd+ENTER to finish editing",linearElementMulti:"Click on last point or press Escape or Enter to finish",lockAngle:"You can constrain angle by holding SHIFT",resize:"You can constrain proportions by holding SHIFT while resizing,\nhold ALT to resize from the center",resizeImage:"You can resize freely by holding SHIFT,\nhold ALT to resize from the center",rotate:"You can constrain angles by holding SHIFT while rotating",lineEditor_info:"Hold CtrlOrCmd and Double-click or press CtrlOrCmd + Enter to edit points",lineEditor_pointSelected:"Press Delete to remove point(s),\nCtrlOrCmd+D to duplicate, or drag to move",lineEditor_nothingSelected:"Select a point to edit (hold SHIFT to select multiple),\nor hold Alt and click to add new points",placeImage:"Click to place the image, or click and drag to set its size manually",publishLibrary:"Publish your own library",bindTextToElement:"Press enter to add text",createFlowchart:"Hold CtrlOrCmd and Arrow key to create a flowchart",deepBoxSelect:"Hold CtrlOrCmd to deep select, and to prevent dragging",eraserRevert:"Hold Alt to revert the elements marked for deletion",firefox_clipboard_write:'This feature can likely be enabled by setting the "dom.events.asyncClipboard.clipboardItem" flag to "true". To change the browser flags in Firefox, visit the "about:config" page.',disableSnapping:"Hold CtrlOrCmd to disable snapping",enterCropEditor:"Double click the image or press ENTER to crop the image",leaveCropEditor:"Click outside the image or press ENTER or ESCAPE to finish cropping"},uJ={cannotShowPreview:"Cannot show preview",canvasTooBig:"The canvas may be too big.",canvasTooBigTip:"Tip: try moving the farthest elements a bit closer together."},hJ={headingMain:"Encountered an error. Try <button>reloading the page</button>.",clearCanvasMessage:"If reloading doesn't work, try <button>clearing the canvas</button>.",clearCanvasCaveat:" This will result in loss of work ",trackedToSentry:"The error with identifier {{eventId}} was tracked on our system.",openIssueMessage:"We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our <button>bug tracker</button>. Please include information below by copying and pasting into the GitHub issue.",sceneContent:"Scene content:"},pJ={or:"Or"},fJ={desc_intro:"Invite people to collaborate on your drawing.",desc_privacy:"Don't worry, the session is end-to-end encrypted, and fully private. Not even our server can see what you draw.",button_startSession:"Start session",button_stopSession:"Stop session",desc_inProgressIntro:"Live-collaboration session is now in progress.",desc_shareLink:"Share this link with anyone you want to collaborate with:",desc_exitSession:"Stopping the session will disconnect you from the room, but you'll be able to continue working with the scene, locally. Note that this won't affect other people, and they'll still be able to collaborate on their version.",shareTitle:"Join a live collaboration session on Excalidraw"},mJ={title:"Error"},gJ={disk_title:"Save to disk",disk_details:"Export the scene data to a file from which you can import later.",disk_button:"Save to file",link_title:"Shareable link",link_details:"Export as a read-only link.",link_button:"Export to Link",excalidrawplus_description:"Save the scene to your Excalidraw+ workspace.",excalidrawplus_button:"Export",excalidrawplus_exportError:"Couldn't export to Excalidraw+ at this moment..."},bJ={blog:"Read our blog",click:"click",deepSelect:"Deep select",deepBoxSelect:"Deep select within box, and prevent dragging",createFlowchart:"Create a flowchart from a generic element",navigateFlowchart:"Navigate a flowchart",curvedArrow:"Curved arrow",curvedLine:"Curved line",documentation:"Documentation",doubleClick:"double-click",drag:"drag",editor:"Editor",editLineArrowPoints:"Edit line/arrow points",editText:"Edit text / add label",github:"Found an issue? Submit",howto:"Follow our guides",or:"or",preventBinding:"Prevent arrow binding",tools:"Tools",shortcuts:"Keyboard shortcuts",textFinish:"Finish editing (text editor)",textNewLine:"Add new line (text editor)",title:"Help",view:"View",zoomToFit:"Zoom to fit all elements",zoomToSelection:"Zoom to selection",toggleElementLock:"Lock/unlock selection",movePageUpDown:"Move page up/down",movePageLeftRight:"Move page left/right",cropStart:"Crop image",cropFinish:"Finish image cropping"},UJ={title:"Clear canvas"},yJ={title:"Publish library",itemName:"Item name",authorName:"Author name",githubUsername:"GitHub username",twitterUsername:"Twitter username",libraryName:"Library name",libraryDesc:"Library description",website:"Website",placeholder:{authorName:"Your name or username",libraryName:"Name of your library",libraryDesc:"Description of your library to help people understand its usage",githubHandle:"GitHub handle (optional), so you can edit the library once submitted for review",twitterHandle:"Twitter username (optional), so we know who to credit when promoting over Twitter",website:"Link to your personal website or elsewhere (optional)"},errors:{required:"Required",website:"Enter a valid URL"},noteDescription:"Submit your library to be included in the <link>public library repository</link> for other people to use in their drawings.",noteGuidelines:"The library needs to be manually approved first. Please read the <link>guidelines</link> before submitting. You will need a GitHub account to communicate and make changes if requested, but it is not strictly required.",noteLicense:"By submitting, you agree the library will be published under the <link>MIT License</link>, which in short means anyone can use them without restrictions.",noteItems:"Each library item must have its own name so it's filterable. The following library items will be included:",atleastOneLibItem:"Please select at least one library item to get started",republishWarning:"Note: some of the selected items are marked as already published/submitted. You should only resubmit items when updating an existing library or submission."},xJ={title:"Library submitted",content:"Thank you {{authorName}}. Your library has been submitted for review. You can track the status <link>here</link>"},vJ={resetLibrary:"Reset library",removeItemsFromLib:"Remove selected items from library"},wJ={header:"Export image",label:{withBackground:"Background",onlySelected:"Only selected",darkMode:"Dark mode",embedScene:"Embed scene",scale:"Scale",padding:"Padding"},tooltip:{embedScene:"Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.\nWill increase exported file size."},title:{exportToPng:"Export to PNG",exportToSvg:"Export to SVG",copyPngToClipboard:"Copy PNG to clipboard"},button:{exportToPng:"PNG",exportToSvg:"SVG",copyPngToClipboard:"Copy to clipboard"}},SJ={tooltip:"Your drawings are end-to-end encrypted so Excalidraw's servers will never see them.",link:"Blog post on end-to-end encryption in Excalidraw"},EJ={angle:"Angle",shapes:"Shapes",height:"Height",scene:"Scene",selected:"Selected",storage:"Storage",fullTitle:"Canvas & Shape properties",title:"Properties",generalStats:"General",elementProperties:"Shape properties",total:"Total",version:"Version",versionCopy:"Click to copy",versionNotAvailable:"Version not available",width:"Width"},kJ={addedToLibrary:"Added to library",copyStyles:"Copied styles.",copyToClipboard:"Copied to clipboard.",copyToClipboardAsPng:"Copied {{exportSelection}} to clipboard as PNG\n({{exportColorScheme}})",copyToClipboardAsSvg:"Copied {{exportSelection}} to clipboard as SVG\n({{exportColorScheme}})",fileSaved:"File saved.",fileSavedToFilename:"Saved to {filename}",canvas:"canvas",selection:"selection",pasteAsSingleElement:"Use {{shortcut}} to paste as a single element,\nor paste into an existing text editor",unableToEmbed:"Embedding this url is currently not allowed. Raise an issue on GitHub to request the url whitelisted",unrecognizedLinkFormat:"The link you embedded does not match the expected format. Please try to paste the 'embed' string provided by the source site",elementLinkCopied:"Link copied to clipboard"},CJ={transparent:"Transparent",black:"Black",white:"White",red:"Red",pink:"Pink",grape:"Grape",violet:"Violet",gray:"Gray",blue:"Blue",cyan:"Cyan",teal:"Teal",green:"Green",yellow:"Yellow",orange:"Orange",bronze:"Bronze"},_J={app:{center_heading:"All your data is saved locally in your browser.",center_heading_plus:"Did you want to go to the Excalidraw+ instead?",menuHint:"Export, preferences, languages, ..."},defaults:{menuHint:"Export, preferences, and more...",center_heading:"Diagrams. Made. Simple.",toolbarHint:"Pick a tool & Start drawing!",helpHint:"Shortcuts & help"}},MJ={mostUsedCustomColors:"Most used custom colors",colors:"Colors",shades:"Shades",hexCode:"Hex code",noShades:"No shades available for this color"},IJ={action:{exportToImage:{title:"Export as image",button:"Export as image",description:"Export the scene data as an image from which you can import later."},saveToDisk:{title:"Save to disk",button:"Save to disk",description:"Export the scene data to a file from which you can import later."},excalidrawPlus:{title:"Excalidraw+",button:"Export to Excalidraw+",description:"Save the scene to your Excalidraw+ workspace."}},modal:{loadFromFile:{title:"Load from file",button:"Load from file",description:"Loading from a file will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first using one of the options below."},shareableLink:{title:"Load from link",button:"Replace my content",description:"Loading external drawing will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first by using one of the options below."}}},jJ={title:"Mermaid to Excalidraw",button:"Insert",description:"Currently only <flowchartLink>Flowchart</flowchartLink>,<sequenceLink> Sequence, </sequenceLink> and <classLink>Class </classLink>Diagrams are supported. The other types will be rendered as image in Excalidraw.",syntax:"Mermaid Syntax",preview:"Preview"},TJ={placeholder:"Quick search"},RJ={badge:{old:"old"},sceneFonts:"In this scene",availableFonts:"Available fonts",empty:"No fonts found"},PJ={empty:"No users found",hint:{text:"Click on user to follow",followStatus:"You're currently following this user",inCall:"User is in a voice call",micMuted:"User's microphone is muted",isSpeaking:"User is speaking"}},AJ={title:"Command palette",shortcuts:{select:"Select",confirm:"Confirm",close:"Close"},recents:"Recently used",search:{placeholder:"Search menus, commands, and discover hidden gems",noMatch:"No matching commands..."},itemNotAvailable:"Command is not available...",shortcutHint:"For Command palette, use {{shortcut}}"},NJ={labels:eJ,elementLink:tJ,library:nJ,search:rJ,buttons:iJ,alerts:sJ,errors:aJ,toolBar:oJ,element:lJ,headings:cJ,hints:dJ,canvasError:uJ,errorSplash:hJ,shareDialog:pJ,roomDialog:fJ,errorDialog:mJ,exportDialog:gJ,helpDialog:bJ,clearCanvasDialog:UJ,publishDialog:yJ,publishSuccessDialog:xJ,confirmDialog:vJ,imageExportDialog:wJ,encrypted:SJ,stats:EJ,toast:kJ,colors:CJ,welcomeScreen:_J,colorPicker:MJ,overwriteConfirm:IJ,mermaid:jJ,quickSearch:TJ,fontList:RJ,userList:PJ,commandPalette:AJ},DJ={"ar-SA":94,"az-AZ":17,"bg-BG":71,"bn-BD":52,"ca-ES":83,"cs-CZ":86,"da-DK":61,"de-DE":100,"el-GR":80,en:100,"es-ES":96,"eu-ES":97,"fa-IR":84,"fi-FI":76,"fr-FR":99,"gl-ES":86,"he-IL":77,"hi-IN":76,"hu-HU":76,"id-ID":91,"it-IT":98,"ja-JP":90,kaa:36,"kab-KAB":76,"kk-KZ":18,"km-KH":83,"ko-KR":100,"ku-TR":87,"lt-LT":48,"lv-LV":77,"mr-IN":98,"my-MM":35,"nb-NO":93,"nl-NL":75,"nn-NO":67,"oc-FR":92,"pa-IN":78,"pl-PL":99,"pt-BR":91,"pt-PT":83,"ro-RO":99,"ru-RU":92,"si-LK":7,"sk-SK":100,"sl-SI":100,"sv-SE":100,"ta-IN":81,"th-TH":44,"tr-TR":87,"uk-UA":93,"vi-VN":49,"zh-CN":100,"zh-HK":22,"zh-TW":100};const LJ={};let OJ=0;function FJ(e,t){const n="atom"+ ++OJ,r={toString(){return"production"!==(LJ?"production":void 0)&&this.debugLabel?n+":"+this.debugLabel:n}};return"function"==typeof e?r.read=e:(r.init=e,r.read=zJ,r.write=BJ),r}function zJ(e){return e(this)}function BJ(e,t,n){return t(this,"function"==typeof n?n(e(this)):n)}const HJ=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,$J=e=>"init"in e,WJ=e=>!!e.write,XJ=new WeakMap,VJ=e=>{var t;return GJ(e)&&!(null==(t=XJ.get(e))?void 0:t[1])},GJ=e=>"function"==typeof(null==e?void 0:e.then),YJ=e=>"v"in e||"e"in e,qJ=e=>{if("e"in e)throw e.e;if("production"!==(LJ?"production":void 0)&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},ZJ=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},KJ=(e,t,n,r,i)=>{var s;if("production"!==(LJ?"production":void 0)&&r===t)throw new Error("[Bug] atom cannot depend on itself");n.d.set(r,i.n),VJ(n.v)&&ZJ(t,n.v,i),null==(s=i.m)||s.t.add(t),e&&t0(e,r,t)},QJ=()=>({D:new Map,H:new Set,M:new Set,L:new Set}),JJ=(e,t,n)=>{e[t].add(n)},e0=(e,t,n)=>{e.D.has(t)||(e.D.set(t,new Set),JJ(e,"M",()=>{var t;null==(t=n.m)||t.l.forEach(t=>JJ(e,"M",t))}))},t0=(e,t,n)=>{const r=e.D.get(t);r&&r.add(n)},n0=e=>{let t,n=!1;const r=e=>{try{e()}catch(lA){n||(t=lA,n=!0)}};for(;e.H.size||e.M.size||e.L.size;)e.D.clear(),e.H.forEach(r),e.H.clear(),e.M.forEach(r),e.M.clear(),e.L.forEach(r),e.L.clear();if(n)throw t},r0=(...[e,t,n,r])=>{const i=(t,n,r)=>{const i="v"in n,s=n.v,a=VJ(n.v)?n.v:null;if(GJ(r)){(e=>{if(XJ.has(e))return;const t=[new Set,!1];XJ.set(e,t);const n=()=>{t[1]=!0};e.then(n,n),e.onCancel=e=>{t[0].add(e)}})(r);for(const i of n.d.keys())ZJ(t,r,e(i));n.v=r}else n.v=r;delete n.e,delete n.x,i&&Object.is(s,n.v)||(++n.n,a&&((e,t)=>{const n=XJ.get(e);if(n)n[1]=!0,n[0].forEach(e=>e(t));else if("production"!==(LJ?"production":void 0))throw new Error("[Bug] cancelable promise not found")})(a,r))},s=(n,r)=>{var a;const o=e(r);if(YJ(o)){if(o.m&&!o.x)return o;if(Array.from(o.d).every(([e,t])=>s(n,e).n===t))return o}o.d.clear();let d=!0;const u=t=>{if(HJ(r,t)){const n=e(t);if(!YJ(n)){if(!$J(t))throw new Error("no atom init");i(t,n,t.init)}return qJ(n)}const a=s(n,t);try{return qJ(a)}finally{if(d)KJ(n,r,o,t,a);else{const e=QJ();KJ(e,r,o,t,a),c(e,r,o),n0(e)}}};let h,p;const f={get signal(){return h||(h=new AbortController),h.signal},get setSelf(){return"production"!==(LJ?"production":void 0)&&WJ(r),!p&&WJ(r)&&(p=(...e)=>{if(!d)return l(r,...e)}),p}};try{const e=t(r,u,f);if(i(r,o,e),GJ(e)){null==(a=e.onCancel)||a.call(e,()=>null==h?void 0:h.abort());const t=()=>{if(o.m){const e=QJ();c(e,r,o),n0(e)}};e.then(t,t)}return o}catch(m){return delete o.v,o.e=m,delete o.x,++o.n,o}finally{d=!1}},a=(t,n,r)=>{var i,s;const a=new Map;for(const o of(null==(i=r.m)?void 0:i.t)||[]){const t=e(o);t.m&&a.set(o,t)}for(const o of r.p)a.set(o,e(o));return null==(s=((e,t)=>e.D.get(t))(t,n))||s.forEach(t=>{a.set(t,e(t))}),a},o=(t,r,...l)=>{let d=!0;const u=e=>qJ(s(t,e)),h=(n,...l)=>{const u=e(n);try{if(HJ(r,n)){if(!$J(n))throw new Error("atom not writable");const e=u.n,r=l[0];return i(n,u,r),c(t,n,u),void(e!==u.n&&(e0(t,n,u),((e,t,n)=>{const r=[],i=new Set,o=new Set,l=[[t,n]];for(;l.length>0;){const[t,n]=l[l.length-1];if(o.has(t))l.pop();else if(i.has(t))r.push([t,n,n.n]),o.add(t),n.x=!0,l.pop();else{i.add(t);for(const[r,s]of a(e,t,n))t===r||i.has(r)||l.push([r,s])}}JJ(e,"H",()=>{const n=new Set([t]);for(let t=r.length-1;t>=0;--t){const[i,a,o]=r[t];let l=!1;for(const e of a.d.keys())if(e!==i&&n.has(e)){l=!0;break}l&&(s(e,i),c(e,i,a),o!==a.n&&(e0(e,i,a),n.add(i))),delete a.x}})})(t,n,u)))}return o(t,n,...l)}finally{d||n0(t)}};try{return n(r,u,h,...l)}finally{d=!1}},l=(e,...t)=>{const n=QJ();try{return o(n,e,...t)}finally{n0(n)}},c=(t,n,r)=>{if(r.m&&!VJ(r.v)){for(const i of r.d.keys())if(!r.m.d.has(i)){d(t,i,e(i)).t.add(n),r.m.d.add(i)}for(const i of r.m.d||[])if(!r.d.has(i)){r.m.d.delete(i);const s=u(t,i,e(i));null==s||s.t.delete(n)}}},d=(t,n,i)=>{if(!i.m){s(t,n);for(const r of i.d.keys()){d(t,r,e(r)).t.add(n)}if(i.m={l:new Set,d:new Set(i.d.keys()),t:new Set},WJ(n)){const e=i.m;let s;const a=(e,t)=>{let r=!0;s=(...t)=>{try{return o(e,n,...t)}finally{r||n0(e)}};try{return t()}finally{r=!1}};JJ(t,"L",()=>{const i=a(t,()=>r(n,(...e)=>s(...e)));i&&(e.u=e=>a(e,i))})}}return i.m},u=(t,n,r)=>{if(r.m&&!r.m.l.size&&!Array.from(r.m.t).some(t=>{var r;return null==(r=e(t).m)?void 0:r.d.has(n)})){const i=r.m.u;i&&JJ(t,"L",()=>i(t)),delete r.m;for(const s of r.d.keys()){const r=u(t,s,e(s));null==r||r.t.delete(n)}return}return r.m};return{get:e=>qJ(s(void 0,e)),set:l,sub:(t,n)=>{const r=QJ(),i=e(t),s=d(r,t,i).l;return s.add(n),n0(r),()=>{s.delete(n);const e=QJ();u(e,t,i),n0(e)}},unstable_derive:i=>r0(...i(e,t,n,r))}},i0=()=>{const e=new WeakMap,t=r0(t=>{if("production"!==(LJ?"production":void 0)&&!t)throw new Error("Atom is undefined or null");let n=e.get(t);return n||(n={d:new Map,p:new Set,n:0},e.set(t,n)),n},(e,...t)=>e.read(...t),(e,...t)=>e.write(...t),(e,...t)=>{var n;return null==(n=e.onMount)?void 0:n.call(e,...t)});return"production"!==(LJ?"production":void 0)?(e=>{const t=new WeakMap,n=new Set;let r,i=0;const s=e.unstable_derive((e,s,a,o)=>(r=e,[r=>{let i=t.get(r);if(!i){const s=e(r);i=new Proxy(s,{set:(e,t,i)=>("m"===t&&n.add(r),Reflect.set(e,t,i)),deleteProperty:(e,t)=>("m"===t&&n.delete(r),Reflect.deleteProperty(e,t))}),t.set(r,i)}return i},s,(e,t,n,...r)=>i?n(e,...r):a(e,t,n,...r),o])),a=s.set,o={dev4_get_internal_weak_map:()=>({get:e=>{const t=r(e);if(0!==t.n)return t}}),dev4_get_mounted_atoms:()=>n,dev4_restore_atoms:e=>{a({read:()=>null,write:(t,n)=>{++i;try{for(const[t,r]of e)$J(t)&&n(t,r)}finally{--i}}})}};return Object.assign(s,o)})(t):t};let s0;const a0={},o0=vt.createContext(void 0),l0=e=>{const t=vt.useContext(o0);return(null==e?void 0:e.store)||t||(s0||(s0=i0(),"production"!==(LJ?"production":void 0)&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=s0),globalThis.__JOTAI_DEFAULT_STORE__)),s0)},c0=e=>"function"==typeof(null==e?void 0:e.then),d0=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},u0=St.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;throw"rejected"===e.status?e.reason:(d0(e),e)}),h0=new WeakMap,p0=e=>{let t=h0.get(e);return t||(t=new Promise((n,r)=>{let i=e;const s=e=>t=>{i===e&&n(t)},a=e=>t=>{i===e&&r(t)},o=e=>{"onCancel"in e&&"function"==typeof e.onCancel&&e.onCancel(r=>{if("production"!==(a0?"production":void 0)&&r===e)throw new Error("[Bug] p is not updated even after cancelation");c0(r)?(h0.set(r,t),i=r,r.then(s(r),a(r)),o(r)):n(r)})};e.then(s(e),a(e)),o(e)}),h0.set(e,t)),t};function f0(e,t){const n=l0(t),[[r,i,s],a]=vt.useReducer(t=>{const r=n.get(e);return Object.is(t[0],r)&&t[1]===n&&t[2]===e?t:[r,n,e]},void 0,()=>[n.get(e),n,e]);let o=r;i===n&&s===e||(a(),o=n.get(e));const l=null==t?void 0:t.delay;if(vt.useEffect(()=>{const t=n.sub(e,()=>{if("number"==typeof l){const t=n.get(e);return c0(t)&&d0(p0(t)),void setTimeout(a,l)}a()});return a(),t},[n,e,l]),vt.useDebugValue(o),c0(o)){const e=p0(o);return u0(e)}return o}function m0(e,t){const n=l0(t);return vt.useCallback((...t)=>{if("production"!==(a0?"production":void 0)&&!("write"in e))throw new Error("not writable atom");return n.set(e,...t)},[n,e])}const g0=new WeakMap;const b0=e=>{let t=g0.get(e);return t||(t=new WeakSet,g0.set(e,t)),t};function U0(){return U0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U0.apply(this,arguments)}function y0(){const t=vt.createContext(null);const n=e=>{const n=vt.useContext(t);if(!n)throw new Error("Missing Provider from createIsolation");return l0(U0({store:n},e))};return{Provider:function({store:n,initialValues:r=[],children:i}){const s=vt.useRef(n);return s.current||(s.current=i0()),function(e,t){const n=l0(t),r=b0(n);for(const[i,s]of e)r.has(i)&&!(null==t?void 0:t.dangerouslyForceHydrate)||(r.add(i),n.set(i,s))}(r,{store:s.current}),e.jsx(t.Provider,{value:s.current,children:i})},useStore:n,useAtom:(e,t)=>function(e,t){return[f0(e,t),m0(e,t)]}(e,U0({store:n()},t)),useAtomValue:(e,t)=>f0(e,U0({store:n()},t)),useSetAtom:(e,t)=>m0(e,U0({store:n()},t))}}const{read:x0,write:v0}=FJ(null);function w0(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e?.(r),!1===n||!r.defaultPrevented)return t?.(r)}}function S0(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function E0(...e){return t=>{let n=!1;const r=e.map(e=>{const r=S0(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){const n=r[t];"function"==typeof n?n():S0(e[t],null)}}}}function k0(...e){return vt.useCallback(E0(...e),e)}function C0(t,n=[]){let r=[];const i=()=>{const e=r.map(e=>vt.createContext(e));return function(n){const r=n?.[t]||e;return vt.useMemo(()=>({[`__scope${t}`]:{...n,[t]:r}}),[n,r])}};return i.scopeName=t,[function(n,i){const s=vt.createContext(i),a=r.length;r=[...r,i];const o=n=>{const{scope:r,children:i,...o}=n,l=r?.[t]?.[a]||s,c=vt.useMemo(()=>o,Object.values(o));return e.jsx(l.Provider,{value:c,children:i})};return o.displayName=n+"Provider",[o,function(e,r){const o=r?.[t]?.[a]||s,l=vt.useContext(o);if(l)return l;if(void 0!==i)return i;throw new Error(`\`${e}\` must be used within \`${n}\``)}]},_0(i,...n)]}function _0(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=n.reduce((t,{useScope:n,scopeName:r})=>({...t,...n(e)[`__scope${r}`]}),{});return vt.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}vt.createContext({scope:void 0,baseStore:void 0});var M0=vt.forwardRef((t,n)=>{const{children:r,...i}=t,s=vt.Children.toArray(r),a=s.find(T0);if(a){const t=a.props.children,r=s.map(e=>e===a?vt.Children.count(t)>1?vt.Children.only(null):vt.isValidElement(t)?t.props.children:null:e);return e.jsx(I0,{...i,ref:n,children:vt.isValidElement(t)?vt.cloneElement(t,void 0,r):null})}return e.jsx(I0,{...i,ref:n,children:r})});M0.displayName="Slot";var I0=vt.forwardRef((e,t)=>{const{children:n,...r}=e;if(vt.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),i=function(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...e)=>{s(...e),i(...e)}:i&&(n[r]=i):"style"===r?n[r]={...i,...s}:"className"===r&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==vt.Fragment&&(i.ref=t?E0(t,e):e),vt.cloneElement(n,i)}return vt.Children.count(n)>1?vt.Children.only(null):null});I0.displayName="SlotClone";var j0=({children:t})=>e.jsx(e.Fragment,{children:t});function T0(e){return vt.isValidElement(e)&&e.type===j0}var R0=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((t,n)=>{const r=vt.forwardRef((t,r)=>{const{asChild:i,...s}=t,a=i?M0:n;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),e.jsx(a,{...s,ref:r})});return r.displayName=`Primitive.${n}`,{...t,[n]:r}},{});function P0(e){const t=vt.useRef(e);return vt.useEffect(()=>{t.current=e}),vt.useMemo(()=>(...e)=>t.current?.(...e),[])}var A0,N0="dismissableLayer.update",D0="dismissableLayer.pointerDownOutside",L0="dismissableLayer.focusOutside",O0=vt.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),F0=vt.forwardRef((t,n)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,d=vt.useContext(O0),[u,h]=vt.useState(null),p=u?.ownerDocument??globalThis?.document,[,f]=vt.useState({}),m=k0(n,e=>h(e)),g=Array.from(d.layers),[b]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),U=g.indexOf(b),y=u?g.indexOf(u):-1,x=d.layersWithOutsidePointerEventsDisabled.size>0,v=y>=U,w=function(e,t=globalThis?.document){const n=P0(e),r=vt.useRef(!1),i=vt.useRef(()=>{});return vt.useEffect(()=>{const e=e=>{if(e.target&&!r.current){let r=function(){B0(D0,n,s,{discrete:!0})};const s={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",i.current),i.current=r,t.addEventListener("click",i.current,{once:!0})):r()}else t.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",e),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}(e=>{const t=e.target,n=[...d.branches].some(e=>e.contains(t));v&&!n&&(s?.(e),o?.(e),e.defaultPrevented||l?.())},p),S=function(e,t=globalThis?.document){const n=P0(e),r=vt.useRef(!1);return vt.useEffect(()=>{const e=e=>{if(e.target&&!r.current){B0(L0,n,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}(e=>{const t=e.target;[...d.branches].some(e=>e.contains(t))||(a?.(e),o?.(e),e.defaultPrevented||l?.())},p);return function(e,t=globalThis?.document){const n=P0(e);vt.useEffect(()=>{const e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[n,t])}(e=>{y===d.layers.size-1&&(i?.(e),!e.defaultPrevented&&l&&(e.preventDefault(),l()))},p),vt.useEffect(()=>{if(u)return r&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(A0=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),z0(),()=>{r&&1===d.layersWithOutsidePointerEventsDisabled.size&&(p.body.style.pointerEvents=A0)}},[u,p,r,d]),vt.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),z0())},[u,d]),vt.useEffect(()=>{const e=()=>f({});return document.addEventListener(N0,e),()=>document.removeEventListener(N0,e)},[]),e.jsx(R0.div,{...c,ref:m,style:{pointerEvents:x?v?"auto":"none":void 0,...t.style},onFocusCapture:w0(t.onFocusCapture,S.onFocusCapture),onBlurCapture:w0(t.onBlurCapture,S.onBlurCapture),onPointerDownCapture:w0(t.onPointerDownCapture,w.onPointerDownCapture)})});F0.displayName="DismissableLayer";function z0(){const e=new CustomEvent(N0);document.dispatchEvent(e)}function B0(e,n,r,{discrete:i}){const s=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});n&&s.addEventListener(e,n,{once:!0}),i?function(e,n){e&&t.flushSync(()=>e.dispatchEvent(n))}(s,a):s.dispatchEvent(a)}vt.forwardRef((t,n)=>{const r=vt.useContext(O0),i=vt.useRef(null),s=k0(n,i);return vt.useEffect(()=>{const e=i.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),e.jsx(R0.div,{...t,ref:s})}).displayName="DismissableLayerBranch";var H0=0;function $0(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var W0="focusScope.autoFocusOnMount",X0="focusScope.autoFocusOnUnmount",V0={bubbles:!1,cancelable:!0},G0=vt.forwardRef((t,n)=>{const{loop:r=!1,trapped:i=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=t,[l,c]=vt.useState(null),d=P0(s),u=P0(a),h=vt.useRef(null),p=k0(n,e=>c(e)),f=vt.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;vt.useEffect(()=>{if(i){let e=function(e){if(f.paused||!l)return;const t=e.target;l.contains(t)?h.current=t:K0(h.current,{select:!0})},t=function(e){if(f.paused||!l)return;const t=e.relatedTarget;null!==t&&(l.contains(t)||K0(h.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&K0(l)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(n);return l&&r.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[i,l,f.paused]),vt.useEffect(()=>{if(l){Q0.add(f);const t=document.activeElement;if(!l.contains(t)){const n=new CustomEvent(W0,V0);l.addEventListener(W0,d),l.dispatchEvent(n),n.defaultPrevented||(!function(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(K0(r,{select:t}),document.activeElement!==n)return}((e=Y0(l),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&K0(l))}return()=>{l.removeEventListener(W0,d),setTimeout(()=>{const e=new CustomEvent(X0,V0);l.addEventListener(X0,u),l.dispatchEvent(e),e.defaultPrevented||K0(t??document.body,{select:!0}),l.removeEventListener(X0,u),Q0.remove(f)},0)}}var e},[l,d,u,f]);const m=vt.useCallback(e=>{if(!r&&!i)return;if(f.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){const t=e.currentTarget,[i,s]=function(e){const t=Y0(e),n=q0(t,e),r=q0(t.reverse(),e);return[n,r]}(t);i&&s?e.shiftKey||n!==s?e.shiftKey&&n===i&&(e.preventDefault(),r&&K0(s,{select:!0})):(e.preventDefault(),r&&K0(i,{select:!0})):n===t&&e.preventDefault()}},[r,i,f.paused]);return e.jsx(R0.div,{tabIndex:-1,...o,ref:p,onKeyDown:m})});function Y0(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function q0(e,t){for(const n of e)if(!Z0(n,{upTo:t}))return n}function Z0(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function K0(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}G0.displayName="FocusScope";var Q0=function(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=J0(e,t),e.unshift(t)},remove(t){e=J0(e,t),e[0]?.resume()}}}();function J0(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}var e1=Boolean(globalThis?.document)?vt.useLayoutEffect:()=>{},t1=Et["useId".toString()]||(()=>{}),n1=0;function r1(e){const[t,n]=vt.useState(t1());return e1(()=>{n(e=>e??String(n1++))},[e]),e||(t?`radix-${t}`:"")}var i1=vt.forwardRef((t,n)=>{const{children:r,width:i=10,height:s=5,...a}=t;return e.jsx(R0.svg,{...a,ref:n,width:i,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});i1.displayName="Arrow";var s1=i1;var a1="Popper",[o1,l1]=C0(a1),[c1,d1]=o1(a1),u1=t=>{const{__scopePopper:n,children:r}=t,[i,s]=vt.useState(null);return e.jsx(c1,{scope:n,anchor:i,onAnchorChange:s,children:r})};u1.displayName=a1;var h1="PopperAnchor",p1=vt.forwardRef((t,n)=>{const{__scopePopper:r,virtualRef:i,...s}=t,a=d1(h1,r),o=vt.useRef(null),l=k0(n,o);return vt.useEffect(()=>{a.onAnchorChange(i?.current||o.current)}),i?null:e.jsx(R0.div,{...s,ref:l})});p1.displayName=h1;var f1="PopperContent",[m1,g1]=o1(f1),b1=vt.forwardRef((t,n)=>{const{__scopePopper:r,side:i="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:f="optimized",onPlaced:m,...g}=t,b=d1(f1,r),[U,y]=vt.useState(null),x=k0(n,e=>y(e)),[v,w]=vt.useState(null),S=function(e){const[t,n]=vt.useState(void 0);return e1(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const r=t[0];let i,s;if("borderBoxSize"in r){const e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;i=t.inlineSize,s=t.blockSize}else i=e.offsetWidth,s=e.offsetHeight;n({width:i,height:s})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),t}(v),E=S?.width??0,k=S?.height??0,C=i+("center"!==a?"-"+a:""),_="number"==typeof u?u:{top:0,right:0,bottom:0,left:0,...u},M=Array.isArray(d)?d:[d],I=M.length>0,j={padding:_,boundary:M.filter(v1),altBoundary:I},{refs:T,floatingStyles:R,placement:P,isPositioned:A,middlewareData:N}=Za({strategy:"fixed",placement:C,whileElementsMounted:(...e)=>Da(...e,{animationFrame:"always"===f}),elements:{reference:b.anchor},middleware:[Qa({mainAxis:s+k,alignmentAxis:o}),c&&Ja({mainAxis:!0,crossAxis:!1,limiter:"partial"===h?eo():void 0,...j}),c&&to({...j}),no({...j,apply:({elements:e,rects:t,availableWidth:n,availableHeight:r})=>{const{width:i,height:s}=t.reference,a=e.floating.style;a.setProperty("--radix-popper-available-width",`${n}px`),a.setProperty("--radix-popper-available-height",`${r}px`),a.setProperty("--radix-popper-anchor-width",`${i}px`),a.setProperty("--radix-popper-anchor-height",`${s}px`)}}),v&&io({element:v,padding:l}),w1({arrowWidth:E,arrowHeight:k}),p&&ro({strategy:"referenceHidden",...j})]}),[D,L]=S1(P),O=P0(m);e1(()=>{A&&O?.()},[A,O]);const F=N.arrow?.x,z=N.arrow?.y,B=0!==N.arrow?.centerOffset,[H,$]=vt.useState();return e1(()=>{U&&$(window.getComputedStyle(U).zIndex)},[U]),e.jsx("div",{ref:T.setFloating,"data-radix-popper-content-wrapper":"",style:{...R,transform:A?R.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:H,"--radix-popper-transform-origin":[N.transformOrigin?.x,N.transformOrigin?.y].join(" "),...N.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(m1,{scope:r,placedSide:D,onArrowChange:w,arrowX:F,arrowY:z,shouldHideArrow:B,children:e.jsx(R0.div,{"data-side":D,"data-align":L,...g,ref:x,style:{...g.style,animation:A?void 0:"none"}})})})});b1.displayName=f1;var U1="PopperArrow",y1={top:"bottom",right:"left",bottom:"top",left:"right"},x1=vt.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,s=g1(U1,r),a=y1[s.placedSide];return e.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:e.jsx(s1,{...i,ref:n,style:{...i.style,display:"block"}})})});function v1(e){return null!==e}x1.displayName=U1;var w1=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:i}=t,s=0!==i.arrow?.centerOffset,a=s?0:e.arrowWidth,o=s?0:e.arrowHeight,[l,c]=S1(n),d={start:"0%",center:"50%",end:"100%"}[c],u=(i.arrow?.x??0)+a/2,h=(i.arrow?.y??0)+o/2;let p="",f="";return"bottom"===l?(p=s?d:`${u}px`,f=-o+"px"):"top"===l?(p=s?d:`${u}px`,f=`${r.floating.height+o}px`):"right"===l?(p=-o+"px",f=s?d:`${h}px`):"left"===l&&(p=`${r.floating.width+o}px`,f=s?d:`${h}px`),{data:{x:p,y:f}}}});function S1(e){const[t,n="center"]=e.split("-");return[t,n]}var E1=u1,k1=p1,C1=b1,_1=x1,M1=vt.forwardRef((t,r)=>{const{container:i,...s}=t,[a,o]=vt.useState(!1);e1(()=>o(!0),[]);const l=i||a&&globalThis?.document?.body;return l?n.createPortal(e.jsx(R0.div,{...s,ref:r}),l):null});M1.displayName="Portal";var I1=e=>{const{present:t,children:n}=e,r=function(e){const[t,n]=vt.useState(),r=vt.useRef({}),i=vt.useRef(e),s=vt.useRef("none"),a=e?"mounted":"unmounted",[o,l]=function(e,t){return vt.useReducer((e,n)=>t[e][n]??e,e)}(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return vt.useEffect(()=>{const e=j1(r.current);s.current="mounted"===o?e:"none"},[o]),e1(()=>{const t=r.current,n=i.current;if(n!==e){const r=s.current,a=j1(t);if(e)l("MOUNT");else if("none"===a||"none"===t?.display)l("UNMOUNT");else{l(n&&r!==a?"ANIMATION_OUT":"UNMOUNT")}i.current=e}},[e,l]),e1(()=>{if(t){let e;const n=t.ownerDocument.defaultView??window,a=s=>{const a=j1(r.current).includes(s.animationName);if(s.target===t&&a&&(l("ANIMATION_END"),!i.current)){const r=t.style.animationFillMode;t.style.animationFillMode="forwards",e=n.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=r)})}},o=e=>{e.target===t&&(s.current=j1(r.current))};return t.addEventListener("animationstart",o),t.addEventListener("animationcancel",a),t.addEventListener("animationend",a),()=>{n.clearTimeout(e),t.removeEventListener("animationstart",o),t.removeEventListener("animationcancel",a),t.removeEventListener("animationend",a)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:vt.useCallback(e=>{e&&(r.current=getComputedStyle(e)),n(e)},[])}}(t),i="function"==typeof n?n({present:r.isPresent}):vt.Children.only(n),s=k0(r.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(i));return"function"==typeof n||r.isPresent?vt.cloneElement(i,{ref:s}):null};function j1(e){return e?.animationName||"none"}function T1({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=function({defaultProp:e,onChange:t}){const n=vt.useState(e),[r]=n,i=vt.useRef(r),s=P0(t);return vt.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}({defaultProp:t,onChange:n}),s=void 0!==e,a=s?e:r,o=P0(n);return[a,vt.useCallback(t=>{if(s){const n="function"==typeof t?t(e):t;n!==e&&o(n)}else i(t)},[s,e,i,o])]}I1.displayName="Presence";var R1="Popover",[P1]=C0(R1,[l1]),A1=l1(),[N1,D1]=P1(R1),L1=t=>{const{__scopePopover:n,children:r,open:i,defaultOpen:s,onOpenChange:a,modal:o=!1}=t,l=A1(n),c=vt.useRef(null),[d,u]=vt.useState(!1),[h=!1,p]=T1({prop:i,defaultProp:s,onChange:a});return e.jsx(E1,{...l,children:e.jsx(N1,{scope:n,contentId:r1(),triggerRef:c,open:h,onOpenChange:p,onOpenToggle:vt.useCallback(()=>p(e=>!e),[p]),hasCustomAnchor:d,onCustomAnchorAdd:vt.useCallback(()=>u(!0),[]),onCustomAnchorRemove:vt.useCallback(()=>u(!1),[]),modal:o,children:r})})};L1.displayName=R1;var O1="PopoverAnchor";vt.forwardRef((t,n)=>{const{__scopePopover:r,...i}=t,s=D1(O1,r),a=A1(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=s;return vt.useEffect(()=>(o(),()=>l()),[o,l]),e.jsx(k1,{...a,...i,ref:n})}).displayName=O1;var F1="PopoverTrigger",z1=vt.forwardRef((t,n)=>{const{__scopePopover:r,...i}=t,s=D1(F1,r),a=A1(r),o=k0(n,s.triggerRef),l=e.jsx(R0.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Q1(s.open),...i,ref:o,onClick:w0(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:e.jsx(k1,{asChild:!0,...a,children:l})});z1.displayName=F1;var B1="PopoverPortal",[H1,$1]=P1(B1,{forceMount:void 0}),W1=t=>{const{__scopePopover:n,forceMount:r,children:i,container:s}=t,a=D1(B1,n);return e.jsx(H1,{scope:n,forceMount:r,children:e.jsx(I1,{present:r||a.open,children:e.jsx(M1,{asChild:!0,container:s,children:i})})})};W1.displayName=B1;var X1="PopoverContent",V1=vt.forwardRef((t,n)=>{const r=$1(X1,t.__scopePopover),{forceMount:i=r.forceMount,...s}=t,a=D1(X1,t.__scopePopover);return e.jsx(I1,{present:i||a.open,children:a.modal?e.jsx(G1,{...s,ref:n}):e.jsx(Y1,{...s,ref:n})})});V1.displayName=X1;var G1=vt.forwardRef((t,n)=>{const r=D1(X1,t.__scopePopover),i=vt.useRef(null),s=k0(n,i),a=vt.useRef(!1);return vt.useEffect(()=>{const e=i.current;if(e)return ll(e)},[]),e.jsx(ql,{as:M0,allowPinchZoom:!0,children:e.jsx(q1,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:w0(t.onCloseAutoFocus,e=>{e.preventDefault(),a.current||r.triggerRef.current?.focus()}),onPointerDownOutside:w0(t.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;a.current=r},{checkForDefaultPrevented:!1}),onFocusOutside:w0(t.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),Y1=vt.forwardRef((t,n)=>{const r=D1(X1,t.__scopePopover),i=vt.useRef(!1),s=vt.useRef(!1);return e.jsx(q1,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{t.onCloseAutoFocus?.(e),e.defaultPrevented||(i.current||r.triggerRef.current?.focus(),e.preventDefault()),i.current=!1,s.current=!1},onInteractOutside:e=>{t.onInteractOutside?.(e),e.defaultPrevented||(i.current=!0,"pointerdown"===e.detail.originalEvent.type&&(s.current=!0));const n=e.target,a=r.triggerRef.current?.contains(n);a&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&s.current&&e.preventDefault()}})}),q1=vt.forwardRef((t,n)=>{const{__scopePopover:r,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...h}=t,p=D1(X1,r),f=A1(r);return vt.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??$0()),document.body.insertAdjacentElement("beforeend",e[1]??$0()),H0++,()=>{1===H0&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),H0--}},[]),e.jsx(G0,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:s,onUnmountAutoFocus:a,children:e.jsx(F0,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:e.jsx(C1,{"data-state":Q1(p.open),role:"dialog",id:p.contentId,...f,...h,ref:n,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Z1="PopoverClose";vt.forwardRef((t,n)=>{const{__scopePopover:r,...i}=t,s=D1(Z1,r);return e.jsx(R0.button,{type:"button",...i,ref:n,onClick:w0(t.onClick,()=>s.onOpenChange(!1))})}).displayName=Z1;var K1=vt.forwardRef((t,n)=>{const{__scopePopover:r,...i}=t,s=A1(r);return e.jsx(_1,{...s,...i,ref:n})});function Q1(e){return e?"open":"closed"}K1.displayName="PopoverArrow";var J1,e2=L1,t2=z1,n2=W1,r2=V1,i2=K1,s2={exports:{}};var a2,o2=(J1||(J1=1,s2.exports=a2={},a2.simpleFilter=function(e,t){return t.filter(function(t){return a2.test(e,t)})},a2.test=function(e,t){return null!==a2.match(e,t)},a2.match=function(e,t,n){n=n||{};var r,i=0,s=[],a=t.length,o=0,l=0,c=n.pre||"",d=n.post||"",u=n.caseSensitive&&t||t.toLowerCase();e=n.caseSensitive&&e||e.toLowerCase();for(var h=0;h<a;h++)r=t[h],u[h]===e[i]?(r=c+r+d,i+=1,l+=1+l):l=0,o+=l,s[s.length]=r;return i===e.length?(o=u===e?1/0:o,{rendered:s.join(""),score:o}):null},a2.filter=function(e,t,n){return t&&0!==t.length?"string"!=typeof e?t:(n=n||{},t.reduce(function(t,r,i,s){var a=r;n.extract&&(a=n.extract(r));var o=a2.match(e,a,n);return null!=o&&(t[t.length]={string:o.rendered,score:o.score,index:i,original:r}),t},[]).sort(function(e,t){var n=t.score-e.score;return n||e.index-t.index})):[]}),s2.exports);const l2=yt(o2),c2=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"==typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=r?r:"object"!=typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,s={setState:r,getState:i,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{n.clear()}},a=t=e(r,i,s);return s};var d2,u2,h2={exports:{}},p2={};const f2=yt((u2||(u2=1,h2.exports=function(){if(d2)return p2;d2=1;var e=kt(),t=au(),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=t.useSyncExternalStore,i=e.useRef,s=e.useEffect,a=e.useMemo,o=e.useDebugValue;return p2.useSyncExternalStoreWithSelector=function(e,t,l,c,d){var u=i(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;u=a(function(){function e(e){if(!s){if(s=!0,r=e,e=c(e),void 0!==d&&h.hasValue){var t=h.value;if(d(t,e))return i=t}return i=e}if(t=i,n(r,e))return t;var a=c(e);return void 0!==d&&d(t,a)?(r=e,t):(r=e,i=a)}var r,i,s=!1,a=void 0===l?null:l;return[function(){return e(t())},null===a?void 0:function(){return e(a())}]},[t,l,c,d]);var p=r(e,u[0],u[1]);return s(function(){h.hasValue=!0,h.value=p},[p]),o(p),p},p2}()),h2.exports)),m2={},{useDebugValue:g2}=St,{useSyncExternalStoreWithSelector:b2}=f2;let U2=!1;const y2=e=>e;const x2=e=>{const t="function"==typeof e?(e=>e?c2(e):c2)(e):e,n=(e,n)=>function(e,t=y2,n){"production"!==(m2?"production":void 0)&&n&&!U2&&(U2=!0);const r=b2(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return g2(r),r}(t,e,n);return Object.assign(n,t),n};var v2,w2;const S2="undefined"!=typeof window&&(null!=(v2=window.document)&&v2.createElement||"ReactNative"===(null==(w2=window.navigator)?void 0:w2.product))?St.useLayoutEffect:St.useEffect;function E2(){const e=(t=e=>({current:new Array,version:0,set:e}))?x2(t):x2;var t;return{In:({children:t})=>{const n=e(e=>e.set),r=e(e=>e.version);return S2(()=>{n(e=>({version:e.version+1}))},[]),S2(()=>(n(({current:e})=>({current:[...e,t]})),()=>n(({current:e})=>({current:e.filter(e=>e!==t)}))),[t,r]),null},Out:()=>{const t=e(e=>e.current);return St.createElement(St.Fragment,null,t)}}}function k2(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(null==e||e(r),!1===n||!r.defaultPrevented)return null==t?void 0:t(r)}}function C2(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=n.reduce((t,{useScope:n,scopeName:r})=>({...t,...n(e)[`__scope${r}`]}),{});return vt.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}function _2(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(null==e||e(r),!1===n||!r.defaultPrevented)return null==t?void 0:t(r)}}function M2(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=n.reduce((t,{useScope:n,scopeName:r})=>({...t,...n(e)[`__scope${r}`]}),{});return vt.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}function I2(...e){return t=>e.forEach(e=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(e,t))}function j2(...e){return vt.useCallback(I2(...e),e)}const T2=vt.forwardRef((e,t)=>{const{children:n,...r}=e,i=vt.Children.toArray(n),s=i.find(A2);if(s){const e=s.props.children,n=i.map(t=>t===s?vt.Children.count(e)>1?vt.Children.only(null):vt.isValidElement(e)?e.props.children:null:t);return vt.createElement(R2,Mt({},r,{ref:t}),vt.isValidElement(e)?vt.cloneElement(e,void 0,n):null)}return vt.createElement(R2,Mt({},r,{ref:t}),n)});T2.displayName="Slot";const R2=vt.forwardRef((e,t)=>{const{children:n,...r}=e;return vt.isValidElement(n)?vt.cloneElement(n,{...N2(r,n.props),ref:I2(t,n.ref)}):vt.Children.count(n)>1?vt.Children.only(null):null});R2.displayName="SlotClone";const P2=({children:e})=>vt.createElement(vt.Fragment,null,e);function A2(e){return vt.isValidElement(e)&&e.type===P2}function N2(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...e)=>{s(...e),i(...e)}:i&&(n[r]=i):"style"===r?n[r]={...i,...s}:"className"===r&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function D2(...e){return t=>e.forEach(e=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(e,t))}function L2(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=n.reduce((t,{useScope:n,scopeName:r})=>({...t,...n(e)[`__scope${r}`]}),{});return vt.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}const O2=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?vt.useLayoutEffect:()=>{},F2=Et["useId".toString()]||(()=>{});let z2=0;const B2=vt.forwardRef((e,t)=>{const{children:n,...r}=e,i=vt.Children.toArray(n),s=i.find(W2);if(s){const e=s.props.children,n=i.map(t=>t===s?vt.Children.count(e)>1?vt.Children.only(null):vt.isValidElement(e)?e.props.children:null:t);return vt.createElement(H2,Mt({},r,{ref:t}),vt.isValidElement(e)?vt.cloneElement(e,void 0,n):null)}return vt.createElement(H2,Mt({},r,{ref:t}),n)});B2.displayName="Slot";const H2=vt.forwardRef((e,t)=>{const{children:n,...r}=e;return vt.isValidElement(n)?vt.cloneElement(n,{...X2(r,n.props),ref:D2(t,n.ref)}):vt.Children.count(n)>1?vt.Children.only(null):null});H2.displayName="SlotClone";const $2=({children:e})=>vt.createElement(vt.Fragment,null,e);function W2(e){return vt.isValidElement(e)&&e.type===$2}function X2(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...e)=>{s(...e),i(...e)}:i&&(n[r]=i):"style"===r?n[r]={...i,...s}:"className"===r&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}const V2=["a","button","div","h2","h3","img","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{const n=vt.forwardRef((e,n)=>{const{asChild:r,...i}=e,s=r?B2:t;return vt.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),vt.createElement(s,Mt({},i,{ref:n}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function G2(e){const t=vt.useRef(e);return vt.useEffect(()=>{t.current=e}),vt.useMemo(()=>(...e)=>{var n;return null===(n=t.current)||void 0===n?void 0:n.call(t,...e)},[])}function Y2({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=function({defaultProp:e,onChange:t}){const n=vt.useState(e),[r]=n,i=vt.useRef(r),s=G2(t);return vt.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}({defaultProp:t,onChange:n}),s=void 0!==e,a=s?e:r,o=G2(n);return[a,vt.useCallback(t=>{if(s){const n="function"==typeof t?t(e):t;n!==e&&o(n)}else i(t)},[s,e,i,o])]}const q2=vt.createContext(void 0);function Z2(e){const t=vt.useContext(q2);return e||t||"ltr"}const K2="rovingFocusGroup.onEntryFocus",Q2={bubbles:!1,cancelable:!0},J2="RovingFocusGroup",[e5,t5,n5]=function(e){const t=e+"CollectionProvider",[n,r]=function(e,t=[]){let n=[];const r=()=>{const t=n.map(e=>vt.createContext(e));return function(n){const r=(null==n?void 0:n[e])||t;return vt.useMemo(()=>({[`__scope${e}`]:{...n,[e]:r}}),[n,r])}};return r.scopeName=e,[function(t,r){const i=vt.createContext(r),s=n.length;function a(t){const{scope:n,children:r,...a}=t,o=(null==n?void 0:n[e][s])||i,l=vt.useMemo(()=>a,Object.values(a));return vt.createElement(o.Provider,{value:l},r)}return n=[...n,r],a.displayName=t+"Provider",[a,function(n,a){const o=(null==a?void 0:a[e][s])||i,l=vt.useContext(o);if(l)return l;if(void 0!==r)return r;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},M2(r,...t)]}(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=e+"CollectionSlot",o=e+"CollectionItemSlot",l="data-radix-collection-item";return[{Provider:e=>{const{scope:t,children:n}=e,r=St.useRef(null),s=St.useRef(new Map).current;return St.createElement(i,{scope:t,itemMap:s,collectionRef:r},n)},Slot:St.forwardRef((e,t)=>{const{scope:n,children:r}=e,i=j2(t,s(a,n).collectionRef);return St.createElement(T2,{ref:i},r)}),ItemSlot:St.forwardRef((e,t)=>{const{scope:n,children:r,...i}=e,a=St.useRef(null),c=j2(t,a),d=s(o,n);return St.useEffect(()=>(d.itemMap.set(a,{ref:a,...i}),()=>{d.itemMap.delete(a)})),St.createElement(T2,{[l]:"",ref:c},r)})},function(t){const n=s(e+"CollectionConsumer",t),r=St.useCallback(()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${l}]`)),r=Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current));return r},[n.collectionRef,n.itemMap]);return r},r]}(J2),[r5,i5]=function(e,t=[]){let n=[];const r=()=>{const t=n.map(e=>vt.createContext(e));return function(n){const r=(null==n?void 0:n[e])||t;return vt.useMemo(()=>({[`__scope${e}`]:{...n,[e]:r}}),[n,r])}};return r.scopeName=e,[function(t,r){const i=vt.createContext(r),s=n.length;function a(t){const{scope:n,children:r,...a}=t,o=(null==n?void 0:n[e][s])||i,l=vt.useMemo(()=>a,Object.values(a));return vt.createElement(o.Provider,{value:l},r)}return n=[...n,r],a.displayName=t+"Provider",[a,function(n,a){const o=(null==a?void 0:a[e][s])||i,l=vt.useContext(o);if(l)return l;if(void 0!==r)return r;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},L2(r,...t)]}(J2,[n5]),[s5,a5]=r5(J2),o5=vt.forwardRef((e,t)=>vt.createElement(e5.Provider,{scope:e.__scopeRovingFocusGroup},vt.createElement(e5.Slot,{scope:e.__scopeRovingFocusGroup},vt.createElement(l5,Mt({},e,{ref:t}))))),l5=vt.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,...d}=e,u=vt.useRef(null),h=function(...e){return vt.useCallback(D2(...e),e)}(t,u),p=Z2(s),[f=null,m]=Y2({prop:a,defaultProp:o,onChange:l}),[g,b]=vt.useState(!1),U=G2(c),y=t5(n),x=vt.useRef(!1),[v,w]=vt.useState(0);return vt.useEffect(()=>{const e=u.current;if(e)return e.addEventListener(K2,U),()=>e.removeEventListener(K2,U)},[U]),vt.createElement(s5,{scope:n,orientation:r,dir:p,loop:i,currentTabStopId:f,onItemFocus:vt.useCallback(e=>m(e),[m]),onItemShiftTab:vt.useCallback(()=>b(!0),[]),onFocusableItemAdd:vt.useCallback(()=>w(e=>e+1),[]),onFocusableItemRemove:vt.useCallback(()=>w(e=>e-1),[])},vt.createElement(V2.div,Mt({tabIndex:g||0===v?-1:0,"data-orientation":r},d,{ref:h,style:{outline:"none",...e.style},onMouseDown:_2(e.onMouseDown,()=>{x.current=!0}),onFocus:_2(e.onFocus,e=>{const t=!x.current;if(e.target===e.currentTarget&&t&&!g){const t=new CustomEvent(K2,Q2);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=y().filter(e=>e.focusable);u5([e.find(e=>e.active),e.find(e=>e.id===f),...e].filter(Boolean).map(e=>e.ref.current))}}x.current=!1}),onBlur:_2(e.onBlur,()=>b(!1))})))}),c5=vt.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...a}=e,o=function(e){const[t,n]=vt.useState(F2());return O2(()=>{n(e=>null!=e?e:String(z2++))},[e]),t?`radix-${t}`:""}(),l=s||o,c=a5("RovingFocusGroupItem",n),d=c.currentTabStopId===l,u=t5(n),{onFocusableItemAdd:h,onFocusableItemRemove:p}=c;return vt.useEffect(()=>{if(r)return h(),()=>p()},[r,h,p]),vt.createElement(e5.ItemSlot,{scope:n,id:l,focusable:r,active:i},vt.createElement(V2.span,Mt({tabIndex:d?0:-1,"data-orientation":c.orientation},a,{ref:t,onMouseDown:_2(e.onMouseDown,e=>{r?c.onItemFocus(l):e.preventDefault()}),onFocus:_2(e.onFocus,()=>c.onItemFocus(l)),onKeyDown:_2(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void c.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:d5[r]}(e,c.orientation,c.dir);if(void 0!==t){e.preventDefault();let i=u().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)i.reverse();else if("prev"===t||"next"===t){"prev"===t&&i.reverse();const s=i.indexOf(e.currentTarget);i=c.loop?(r=s+1,(n=i).map((e,t)=>n[(r+t)%n.length])):i.slice(s+1)}setTimeout(()=>u5(i))}var n,r})})))}),d5={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function u5(e){const t=document.activeElement;for(const n of e){if(n===t)return;if(n.focus(),document.activeElement!==t)return}}const h5=o5,p5=c5;function f5(...e){return t=>e.forEach(e=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(e,t))}const m5=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?vt.useLayoutEffect:()=>{};const g5=e=>{const{present:n,children:r}=e,i=function(e){const[n,r]=vt.useState(),i=vt.useRef({}),s=vt.useRef(e),a=vt.useRef("none"),o=e?"mounted":"unmounted",[l,c]=function(e,t){return vt.useReducer((e,n)=>{const r=t[e][n];return null!=r?r:e},e)}(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return vt.useEffect(()=>{const e=b5(i.current);a.current="mounted"===l?e:"none"},[l]),m5(()=>{const t=i.current,n=s.current;if(n!==e){const r=a.current,i=b5(t);if(e)c("MOUNT");else if("none"===i||"none"===(null==t?void 0:t.display))c("UNMOUNT");else{c(n&&r!==i?"ANIMATION_OUT":"UNMOUNT")}s.current=e}},[e,c]),m5(()=>{if(n){const e=e=>{const r=b5(i.current).includes(e.animationName);e.target===n&&r&&t.flushSync(()=>c("ANIMATION_END"))},r=e=>{e.target===n&&(a.current=b5(i.current))};return n.addEventListener("animationstart",r),n.addEventListener("animationcancel",e),n.addEventListener("animationend",e),()=>{n.removeEventListener("animationstart",r),n.removeEventListener("animationcancel",e),n.removeEventListener("animationend",e)}}c("ANIMATION_END")},[n,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:vt.useCallback(e=>{e&&(i.current=getComputedStyle(e)),r(e)},[])}}(n),s="function"==typeof r?r({present:i.isPresent}):vt.Children.only(r),a=function(...e){return vt.useCallback(f5(...e),e)}(i.ref,s.ref);return"function"==typeof r||i.isPresent?vt.cloneElement(s,{ref:a}):null};function b5(e){return(null==e?void 0:e.animationName)||"none"}g5.displayName="Presence";const U5=vt.forwardRef((e,t)=>{const{children:n,...r}=e,i=vt.Children.toArray(n),s=i.find(v5);if(s){const e=s.props.children,n=i.map(t=>t===s?vt.Children.count(e)>1?vt.Children.only(null):vt.isValidElement(e)?e.props.children:null:t);return vt.createElement(y5,Mt({},r,{ref:t}),vt.isValidElement(e)?vt.cloneElement(e,void 0,n):null)}return vt.createElement(y5,Mt({},r,{ref:t}),n)});U5.displayName="Slot";const y5=vt.forwardRef((e,t)=>{const{children:n,...r}=e;return vt.isValidElement(n)?vt.cloneElement(n,{...w5(r,n.props),ref:f5(t,n.ref)}):vt.Children.count(n)>1?vt.Children.only(null):null});y5.displayName="SlotClone";const x5=({children:e})=>vt.createElement(vt.Fragment,null,e);function v5(e){return vt.isValidElement(e)&&e.type===x5}function w5(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...e)=>{s(...e),i(...e)}:i&&(n[r]=i):"style"===r?n[r]={...i,...s}:"className"===r&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}const S5=["a","button","div","h2","h3","img","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{const n=vt.forwardRef((e,n)=>{const{asChild:r,...i}=e,s=r?U5:t;return vt.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),vt.createElement(s,Mt({},i,{ref:n}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function E5(e){const t=vt.useRef(e);return vt.useEffect(()=>{t.current=e}),vt.useMemo(()=>(...e)=>{var n;return null===(n=t.current)||void 0===n?void 0:n.call(t,...e)},[])}function k5({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=function({defaultProp:e,onChange:t}){const n=vt.useState(e),[r]=n,i=vt.useRef(r),s=E5(t);return vt.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}({defaultProp:t,onChange:n}),s=void 0!==e,a=s?e:r,o=E5(n);return[a,vt.useCallback(t=>{if(s){const n="function"==typeof t?t(e):t;n!==e&&o(n)}else i(t)},[s,e,i,o])]}const C5=Et["useId".toString()]||(()=>{});let _5=0;function M5(e){const[t,n]=vt.useState(C5());return m5(()=>{n(e=>null!=e?e:String(_5++))},[e]),e||(t?`radix-${t}`:"")}const I5="Tabs",[j5]=function(e,t=[]){let n=[];const r=()=>{const t=n.map(e=>vt.createContext(e));return function(n){const r=(null==n?void 0:n[e])||t;return vt.useMemo(()=>({[`__scope${e}`]:{...n,[e]:r}}),[n,r])}};return r.scopeName=e,[function(t,r){const i=vt.createContext(r),s=n.length;function a(t){const{scope:n,children:r,...a}=t,o=(null==n?void 0:n[e][s])||i,l=vt.useMemo(()=>a,Object.values(a));return vt.createElement(o.Provider,{value:l},r)}return n=[...n,r],a.displayName=t+"Provider",[a,function(n,a){const o=(null==a?void 0:a[e][s])||i,l=vt.useContext(o);if(l)return l;if(void 0!==r)return r;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},C2(r,...t)]}(I5,[i5]),T5=i5(),[R5,P5]=j5(I5);function A5(e,t){return`${e}-trigger-${t}`}function N5(e,t){return`${e}-content-${t}`}const D5=vt.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:a="horizontal",dir:o,activationMode:l="automatic",...c}=e,d=Z2(o),[u,h]=k5({prop:r,onChange:i,defaultProp:s});return vt.createElement(R5,{scope:n,baseId:M5(),value:u,onValueChange:h,orientation:a,dir:d,activationMode:l},vt.createElement(S5.div,Mt({dir:d,"data-orientation":a},c,{ref:t})))}),L5=vt.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,s=P5("TabsList",n),a=T5(n);return vt.createElement(h5,Mt({asChild:!0},a,{orientation:s.orientation,dir:s.dir,loop:r}),vt.createElement(S5.div,Mt({role:"tablist","aria-orientation":s.orientation},i,{ref:t})))}),O5=vt.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=e,a=P5("TabsTrigger",n),o=T5(n),l=A5(a.baseId,r),c=N5(a.baseId,r),d=r===a.value;return vt.createElement(p5,Mt({asChild:!0},o,{focusable:!i,active:d}),vt.createElement(S5.button,Mt({type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l},s,{ref:t,onMouseDown:k2(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():a.onValueChange(r)}),onKeyDown:k2(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&a.onValueChange(r)}),onFocus:k2(e.onFocus,()=>{const e="manual"!==a.activationMode;d||i||!e||a.onValueChange(r)})})))}),F5=vt.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...a}=e,o=P5("TabsContent",n),l=A5(o.baseId,r),c=N5(o.baseId,r),d=r===o.value,u=vt.useRef(d);return vt.useEffect(()=>{const e=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(e)},[]),vt.createElement(g5,{present:i||d},({present:n})=>vt.createElement(S5.div,Mt({"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!n,id:c,tabIndex:0},a,{ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0}}),n&&s))});var z5,B5;var H5=function(){if(B5)return z5;B5=1;var e=/^\s+|\s+$/g,t=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,r=/^0o[0-7]+$/i,i=parseInt,s="object"==typeof xt&&xt&&xt.Object===Object&&xt,a="object"==typeof self&&self&&self.Object===Object&&self,o=s||a||Function("return this")(),l=Object.prototype.toString,c=Math.max,d=Math.min,u=function(){return o.Date.now()};function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function p(s){if("number"==typeof s)return s;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==l.call(e)}(s))return NaN;if(h(s)){var a="function"==typeof s.valueOf?s.valueOf():s;s=h(a)?a+"":a}if("string"!=typeof s)return 0===s?s:+s;s=s.replace(e,"");var o=n.test(s);return o||r.test(s)?i(s.slice(2),o?2:8):t.test(s)?NaN:+s}return z5=function(e,t,n){var r,i,s,a,o,l,f=0,m=!1,g=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function U(t){var n=r,s=i;return r=i=void 0,f=t,a=e.apply(s,n)}function y(e){var n=e-l;return void 0===l||n>=t||n<0||g&&e-f>=s}function x(){var e=u();if(y(e))return v(e);o=setTimeout(x,function(e){var n=t-(e-l);return g?d(n,s-(e-f)):n}(e))}function v(e){return o=void 0,b&&r?U(e):(r=i=void 0,a)}function w(){var e=u(),n=y(e);if(r=arguments,i=this,l=e,n){if(void 0===o)return function(e){return f=e,o=setTimeout(x,t),m?U(e):a}(l);if(g)return o=setTimeout(x,t),U(l)}return void 0===o&&(o=setTimeout(x,t)),a}return t=p(t)||0,h(n)&&(m=!!n.leading,s=(g="maxWait"in n)?c(p(n.maxWait)||0,t):s,b="trailing"in n?!!n.trailing:b),w.cancel=function(){void 0!==o&&clearTimeout(o),f=0,r=l=i=o=void 0},w.flush=function(){return void 0===o?a:v(u())},w},z5}();const $5=yt(H5);function W5([e,t,n],[r,i,s]){return[e+r,t+i,n+s]}function X5([e,t,n],[r,i,s]){return[e-r,t-i,n-s]}function V5([e,t,n],r){return[e*r,t*r,n*r]}function G5([e,t,n]){return[e/Math.sqrt(e**2+t**2),t/Math.sqrt(e**2+t**2),n]}function Y5([e,t,n],r){return[Math.cos(r)*e-Math.sin(r)*t,Math.sin(r)*e+Math.cos(r)*t,n]}function q5(e,t,n){return Math.atan2(n[1]-e[1],n[0]-e[0])-Math.atan2(t[1]-e[1],t[0]-e[0])}function Z5(e){return Math.atan2(Math.sin(e),Math.cos(e))}function K5([e,t]){return Math.sqrt(e**2+t**2)}function Q5([e,t],[n,r]){return Math.sqrt((n-e)**2+(r-t)**2)}!function(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}({},"LaserPointer",()=>n6);function J5(e,t,n){const r=Q5(t,n);if(0===r)return Q5(e,t);const i=(s=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r**2,a=0,o=1,Math.max(a,Math.min(o,s)));var s,a,o;return Q5([t[0]+i*(n[0]-t[0]),t[1]+i*(n[1]-t[1]),e[2]],e)}function e6(e,t){if(0===t)return e;if(e.length<=2)return e;const n=e[0],r=e[e.length-1],[i,s]=e.reduce(([e,t],i,s)=>{const a=J5(i,n,r);return a>e?[a,s]:[e,t]},[0,-1]);if(i>=t){const i=e[s];return[...e6([n,...e.slice(1,s),i],t).slice(0,-1),i,...e6([i,...e.slice(s,-1),r],t).slice(1)]}return[n,r]}const t6=class e{constructor(t){this.originalPoints=[],this.stablePoints=[],this.tailPoints=[],this.isFresh=!0,this.options=Object.assign({},e.defaults,t)}get lastPoint(){return this.tailPoints[this.tailPoints.length-1]??this.stablePoints[this.stablePoints.length-1]}addPoint(t){const n=this.originalPoints[this.originalPoints.length-1];if(!n||n[0]!==t[0]||n[1]!==t[1]){if(this.originalPoints.push(t),this.isFresh)return this.isFresh=!1,void this.stablePoints.push(t);this.options.streamline>0&&(t=function(e,t,n){return W5(e,V5(X5(t,e),n))}(this.lastPoint,t,1-this.options.streamline)),this.tailPoints.push(t),function(e){if(e.length<2)return 0;let t=0;for(let n=1;n<=e.length-1;n++)t+=Q5(e[n-1],e[n]);return t+=Q5(e[e.length-2],e[e.length-1]),t}(this.tailPoints)>e.constants.maxTailLength&&this.stabilizeTail()}}close(){this.stabilizeTail()}stabilizeTail(){if(this.options.simplify>0&&"tail"==this.options.simplifyPhase)throw new Error("Not implemented yet");this.stablePoints.push(...this.tailPoints),this.tailPoints=[]}getSize(e,t,n,r,i){return(e??this.options.size)*this.options.sizeMapping({pressure:t,runningLength:i,currentIndex:n,totalLength:r})}getStrokeOutline(t){if(this.isFresh)return[];let n=[...this.stablePoints,...this.tailPoints];this.options.simplify>0&&"input"===this.options.simplifyPhase&&(n=e6(n,this.options.simplify));const r=n.length;if(0===r)return[];if(1===r){const e=n[0],i=this.getSize(t,e[2],0,r,0);if(i<.5)return[];const s=[];for(let t=0;t<=2*Math.PI;t+=Math.PI/16)s.push(W5(e,V5(Y5([1,0,0],t),i)));return s.push(W5(e,V5([1,0,0],this.getSize(t,e[2],0,r,0)))),s}if(2===r){const e=n[0],i=n[1],s=this.getSize(t,e[2],0,r,0),a=this.getSize(t,i[2],0,r,0);if(s<.5||a<.5)return[];const o=[],l=q5(e,[e[0],e[1]-100,e[2]],i);for(let t=l;t<=Math.PI+l;t+=Math.PI/16)o.push(W5(e,V5(Y5([1,0,0],t),s)));for(let t=Math.PI+l;t<=2*Math.PI+l;t+=Math.PI/16)o.push(W5(i,V5(Y5([1,0,0],t),a)));return o.push(o[0]),o}const i=[],s=[];let a=0,o=0,l=0,c=0;for(let S=1;S<r-1;S++){const d=n[S-1],u=n[S],h=n[S+1];let p=u[2];const f=Q5(d,u);c+=f,a=o+.2*(f-o);const m=this.getSize(t,p,S,r,c);if(0===m){l=S+1;continue}const g=G5(X5(d,u)),b=G5(X5(h,u)),U=Y5(g,Math.PI/2),y=Y5(g,-Math.PI/2),x=Y5(b,Math.PI/2),v=Y5(b,-Math.PI/2),w=W5(u,V5(U,m)),E=W5(u,V5(y,m)),k=W5(u,V5(x,m)),C=W5(u,V5(v,m)),_=W5(U,v),M=W5(y,x),I=W5(u,V5(0===K5(_)?g:G5(_),m)),j=W5(u,V5(0===K5(M)?b:G5(M),m)),T=Z5(q5(u,d,h)),R=e.constants.cornerDetectionMaxAngle/180*Math.PI*e.constants.cornerDetectionVariance(a);if(Math.abs(T)<R){const e=Math.abs(Z5(Math.PI-T));if(0===e)continue;if(T<0){s.push(E,j);for(let t=0;t<=e;t+=e/4)i.push(W5(u,Y5(V5(U,m),t)));for(let t=e;t>=0;t-=e/4)s.push(W5(u,Y5(V5(U,m),t)));s.push(j,k)}else{i.push(w,I);for(let t=0;t<=e;t+=e/4)s.push(W5(u,Y5(V5(U,-m),-t)));for(let t=e;t>=0;t-=e/4)i.push(W5(u,Y5(V5(U,-m),-t)));i.push(I,C)}}else i.push(I),s.push(j);o=a}if(l>=r-2){if(this.options.keepHead){const e=n[r-1],t=[];for(let n=0;n<=2*Math.PI;n+=Math.PI/16)t.push(W5(e,V5(Y5([1,0,0],n),this.options.size)));return t.push(W5(e,V5([1,0,0],this.options.size))),t}return[]}const d=n[l],u=n[l+1],h=n[r-2],p=n[r-1],f=G5(X5(u,d)),m=G5(X5(h,p)),g=Y5(f,-Math.PI/2),b=Y5(m,Math.PI/2),U=this.getSize(t,d[2],0,r,0),y=[],x=this.options.keepHead?this.options.size:this.getSize(t,h[2],r-2,r,c),v=[];if(U>1){for(let e=0;e<=Math.PI;e+=Math.PI/16)y.unshift(W5(d,Y5(V5(g,U),-e)));y.unshift(W5(d,V5(g,-U)))}else y.push(d);for(let e=0;e<=3*Math.PI;e+=Math.PI/16)v.push(W5(p,Y5(V5(b,-x),-e)));const w=[...y,...i,...v.reverse(),...s.reverse()];return y.length>0&&w.push(y[0]),this.options.simplify>0&&"output"===this.options.simplifyPhase?e6(w,this.options.simplify):w}};t6.defaults={size:2,streamline:.45,simplify:.1,simplifyPhase:"output",keepHead:!1,sizeMapping:()=>1},t6.constants={cornerDetectionMaxAngle:75,cornerDetectionVariance:e=>e>35?.5:1,maxTailLength:50};let n6=t6;var r6=y0(),{useAtom:i6,useSetAtom:s6,useAtomValue:a6,useStore:o6}=r6,l6=r6.Provider,c6=i0(),d6=(e=>t=>{var n=e[t];if(n)return n();throw new Error("Module not found in bundle: "+t)})({"./locales/ar-SA.json":()=>Pt(()=>import("./ar-SA-G6X2FPQ2-6AiouNm8.js"),__vite__mapDeps([5,1,2])),"./locales/az-AZ.json":()=>Pt(()=>import("./az-AZ-76LH7QW2-cGfs3yC5.js"),__vite__mapDeps([6,1,2])),"./locales/bg-BG.json":()=>Pt(()=>import("./bg-BG-XCXSNQG7-De88n0TY.js"),__vite__mapDeps([7,1,2])),"./locales/bn-BD.json":()=>Pt(()=>import("./bn-BD-2XOGV67Q-BxDS7jbw.js"),__vite__mapDeps([8,1,2])),"./locales/ca-ES.json":()=>Pt(()=>import("./ca-ES-6MX7JW3Y-g-YVhXE2.js"),__vite__mapDeps([9,1,2])),"./locales/cs-CZ.json":()=>Pt(()=>import("./cs-CZ-2BRQDIVT-BdO1Df40.js"),__vite__mapDeps([10,1,2])),"./locales/da-DK.json":()=>Pt(()=>import("./da-DK-5WZEPLOC-_27cHQ-s.js"),__vite__mapDeps([11,1,2])),"./locales/de-DE.json":()=>Pt(()=>import("./de-DE-XR44H4JA-B_TLjETf.js"),__vite__mapDeps([12,1,2])),"./locales/el-GR.json":()=>Pt(()=>import("./el-GR-BZB4AONW-x454USvI.js"),__vite__mapDeps([13,1,2])),"./locales/en.json":()=>Pt(()=>Promise.resolve().then(()=>Doe),void 0),"./locales/es-ES.json":()=>Pt(()=>import("./es-ES-U4NZUMDT-CzbBzgJ8.js"),__vite__mapDeps([14,1,2])),"./locales/eu-ES.json":()=>Pt(()=>import("./eu-ES-A7QVB2H4-CQVFYKPd.js"),__vite__mapDeps([15,1,2])),"./locales/fa-IR.json":()=>Pt(()=>import("./fa-IR-HGAKTJCU-BXxKAELV.js"),__vite__mapDeps([16,1,2])),"./locales/fi-FI.json":()=>Pt(()=>import("./fi-FI-Z5N7JZ37-DhPKnT67.js"),__vite__mapDeps([17,1,2])),"./locales/fr-FR.json":()=>Pt(()=>import("./fr-FR-RHASNOE6-Bx24ci5h.js"),__vite__mapDeps([18,1,2])),"./locales/gl-ES.json":()=>Pt(()=>import("./gl-ES-HMX3MZ6V-CXq7RGdw.js"),__vite__mapDeps([19,1,2])),"./locales/he-IL.json":()=>Pt(()=>import("./he-IL-6SHJWFNN-DM6UvFHw.js"),__vite__mapDeps([20,1,2])),"./locales/hi-IN.json":()=>Pt(()=>import("./hi-IN-IWLTKZ5I-p1zNFcgz.js"),__vite__mapDeps([21,1,2])),"./locales/hu-HU.json":()=>Pt(()=>import("./hu-HU-A5ZG7DT2-CwsUrbhN.js"),__vite__mapDeps([22,1,2])),"./locales/id-ID.json":()=>Pt(()=>import("./id-ID-SAP4L64H-Cop4TcCc.js"),__vite__mapDeps([23,1,2])),"./locales/it-IT.json":()=>Pt(()=>import("./it-IT-JPQ66NNP-DLC4Ykk5.js"),__vite__mapDeps([24,1,2])),"./locales/ja-JP.json":()=>Pt(()=>import("./ja-JP-DBVTYXUO-DAwm2gor.js"),__vite__mapDeps([25,1,2])),"./locales/kaa.json":()=>Pt(()=>import("./kaa-6HZHGXH3-DlHHmpE9.js"),__vite__mapDeps([26,1,2])),"./locales/kab-KAB.json":()=>Pt(()=>import("./kab-KAB-ZGHBKWFO-B74LBuIP.js"),__vite__mapDeps([27,1,2])),"./locales/kk-KZ.json":()=>Pt(()=>import("./kk-KZ-P5N5QNE5-DxO2qDXg.js"),__vite__mapDeps([28,1,2])),"./locales/km-KH.json":()=>Pt(()=>import("./km-KH-HSX4SM5Z-DQ5_OW2c.js"),__vite__mapDeps([29,1,2])),"./locales/ko-KR.json":()=>Pt(()=>import("./ko-KR-MTYHY66A-W449jJan.js"),__vite__mapDeps([30,1,2])),"./locales/ku-TR.json":()=>Pt(()=>import("./ku-TR-6OUDTVRD-Cmc4nUPS.js"),__vite__mapDeps([31,1,2])),"./locales/lt-LT.json":()=>Pt(()=>import("./lt-LT-XHIRWOB4-DGmyWXAO.js"),__vite__mapDeps([32,1,2])),"./locales/lv-LV.json":()=>Pt(()=>import("./lv-LV-5QDEKY6T-CZ7hOv58.js"),__vite__mapDeps([33,1,2])),"./locales/mr-IN.json":()=>Pt(()=>import("./mr-IN-CRQNXWMA-BKk-yDd9.js"),__vite__mapDeps([34,1,2])),"./locales/my-MM.json":()=>Pt(()=>import("./my-MM-5M5IBNSE-BXDtjKec.js"),__vite__mapDeps([35,1,2])),"./locales/nb-NO.json":()=>Pt(()=>import("./nb-NO-T6EIAALU-cczhLa74.js"),__vite__mapDeps([36,1,2])),"./locales/nl-NL.json":()=>Pt(()=>import("./nl-NL-IS3SIHDZ-Bm9ap6K-.js"),__vite__mapDeps([37,1,2])),"./locales/nn-NO.json":()=>Pt(()=>import("./nn-NO-6E72VCQL-mBzWr1kB.js"),__vite__mapDeps([38,1,2])),"./locales/oc-FR.json":()=>Pt(()=>import("./oc-FR-POXYY2M6-oxQh5ixn.js"),__vite__mapDeps([39,1,2])),"./locales/pa-IN.json":()=>Pt(()=>import("./pa-IN-N4M65BXN-D2jKzlJf.js"),__vite__mapDeps([40,1,2])),"./locales/percentages.json":()=>Pt(()=>Promise.resolve().then(()=>Loe),void 0),"./locales/pl-PL.json":()=>Pt(()=>import("./pl-PL-T2D74RX3-CjGvx3hZ.js"),__vite__mapDeps([41,1,2])),"./locales/pt-BR.json":()=>Pt(()=>import("./pt-BR-5N22H2LF-Cb_0ZihV.js"),__vite__mapDeps([42,1,2])),"./locales/pt-PT.json":()=>Pt(()=>import("./pt-PT-UZXXM6DQ-Dwd47JVy.js"),__vite__mapDeps([43,1,2])),"./locales/ro-RO.json":()=>Pt(()=>import("./ro-RO-JPDTUUEW-DzoVO3Cm.js"),__vite__mapDeps([44,1,2])),"./locales/ru-RU.json":()=>Pt(()=>import("./ru-RU-B4JR7IUQ-BbBcsIBZ.js"),__vite__mapDeps([45,1,2])),"./locales/si-LK.json":()=>Pt(()=>import("./si-LK-N5RQ5JYF-CW6V4cIy.js"),__vite__mapDeps([46,1,2])),"./locales/sk-SK.json":()=>Pt(()=>import("./sk-SK-C5VTKIMK-BGs18HKx.js"),__vite__mapDeps([47,1,2])),"./locales/sl-SI.json":()=>Pt(()=>import("./sl-SI-NN7IZMDC-BZpMAmdo.js"),__vite__mapDeps([48,1,2])),"./locales/sv-SE.json":()=>Pt(()=>import("./sv-SE-XGPEYMSR-DuQbVOl4.js"),__vite__mapDeps([49,1,2])),"./locales/ta-IN.json":()=>Pt(()=>import("./ta-IN-2NMHFXQM-D5ut9Ody.js"),__vite__mapDeps([50,1,2])),"./locales/th-TH.json":()=>Pt(()=>import("./th-TH-HPSO5L25-nn2cACys.js"),__vite__mapDeps([51,1,2])),"./locales/tr-TR.json":()=>Pt(()=>import("./tr-TR-DEFEU3FU-B-fWluCi.js"),__vite__mapDeps([52,1,2])),"./locales/uk-UA.json":()=>Pt(()=>import("./uk-UA-QMV73CPH-BAgYUo6d.js"),__vite__mapDeps([53,1,2])),"./locales/vi-VN.json":()=>Pt(()=>import("./vi-VN-M7AON7JQ-BiEnX1Ky.js"),__vite__mapDeps([54,1,2])),"./locales/zh-CN.json":()=>Pt(()=>import("./zh-CN-LNUGB5OW-B7kxi2FR.js"),__vite__mapDeps([55,1,2])),"./locales/zh-HK.json":()=>Pt(()=>import("./zh-HK-E62DVLB3-BA-jPmFF.js"),__vite__mapDeps([56,1,2])),"./locales/zh-TW.json":()=>Pt(()=>import("./zh-TW-RAJ6MFWO-BI5vwXpf.js"),__vite__mapDeps([57,1,2]))}),u6={code:"en",label:"English"},h6=[u6,...[{code:"ar-SA",label:"العربية",rtl:!0},{code:"bg-BG",label:"Български"},{code:"ca-ES",label:"Català"},{code:"cs-CZ",label:"Česky"},{code:"de-DE",label:"Deutsch"},{code:"el-GR",label:"Ελληνικά"},{code:"es-ES",label:"Español"},{code:"eu-ES",label:"Euskara"},{code:"fa-IR",label:"فارسی",rtl:!0},{code:"fi-FI",label:"Suomi"},{code:"fr-FR",label:"Français"},{code:"gl-ES",label:"Galego"},{code:"he-IL",label:"עברית",rtl:!0},{code:"hi-IN",label:"हिन्दी"},{code:"hu-HU",label:"Magyar"},{code:"id-ID",label:"Bahasa Indonesia"},{code:"it-IT",label:"Italiano"},{code:"ja-JP",label:"日本語"},{code:"kab-KAB",label:"Taqbaylit"},{code:"kk-KZ",label:"Қазақ тілі"},{code:"ko-KR",label:"한국어"},{code:"ku-TR",label:"Kurdî"},{code:"lt-LT",label:"Lietuvių"},{code:"lv-LV",label:"Latviešu"},{code:"my-MM",label:"Burmese"},{code:"nb-NO",label:"Norsk bokmål"},{code:"nl-NL",label:"Nederlands"},{code:"nn-NO",label:"Norsk nynorsk"},{code:"oc-FR",label:"Occitan"},{code:"pa-IN",label:"ਪੰਜਾਬੀ"},{code:"pl-PL",label:"Polski"},{code:"pt-BR",label:"Português Brasileiro"},{code:"pt-PT",label:"Português"},{code:"ro-RO",label:"Română"},{code:"ru-RU",label:"Русский"},{code:"sk-SK",label:"Slovenčina"},{code:"sv-SE",label:"Svenska"},{code:"sl-SI",label:"Slovenščina"},{code:"tr-TR",label:"Türkçe"},{code:"uk-UA",label:"Українська"},{code:"zh-CN",label:"简体中文"},{code:"zh-TW",label:"繁體中文"},{code:"vi-VN",label:"Tiếng Việt"},{code:"mr-IN",label:"मराठी"}].filter(e=>DJ[e.code]>=85).sort((e,t)=>e.label>t.label?1:-1)],p6="__test__";BM.DEV&&h6.unshift({code:p6,label:"test language"},{code:`${p6}.rtl`,label:"‪test language (rtl)‬",rtl:!0});var f6=u6,m6={},g6=async e=>{if(f6=e,document.documentElement.dir=f6.rtl?"rtl":"ltr",document.documentElement.lang=f6.code,e.code.startsWith(p6))m6={};else try{m6=await d6(`./locales/${f6.code}.json`)}catch(t){m6=NJ}c6.set(x6,e.code)},b6=()=>f6,U6=(e,t)=>{for(let n=0;n<t.length;++n){let r=t[n];if(void 0===e[r])return;e=e[r]}if("string"==typeof e)return e},y6=(e,t,n)=>{if(f6.code.startsWith(p6))return`‪[[${t?`${e}(${JSON.stringify(t).slice(1,-1)})`:e}]]‬`;let r=e.split("."),i=U6(m6,r)||U6(NJ,r)||n;if(void 0===i){return""}if(t)for(let s in t)i=i.replace(`{{${s}}}`,String(t[s]));return i},x6=FJ(u6.code),v6=()=>{let e=a6(x6);return{t:y6,langCode:e}},w6=({size:t="1em",circleWidth:n=8,synchronized:r=!1,className:i=""})=>{let s=-St.useRef(Date.now()).current%1600;return e.jsx("div",{className:`Spinner ${i}`,children:e.jsx("svg",{viewBox:"0 0 100 100",style:{width:t,height:t,"--spinner-delay":r?`${s}ms`:0},children:e.jsx("circle",{cx:"50",cy:"50",r:50-n/2,strokeWidth:n,fill:"none",strokeMiterlimit:"10"})})})},S6=({delay:t,theme:n})=>{let[r,i]=vt.useState(!!t);return vt.useEffect(()=>{if(!t)return;let e=setTimeout(()=>{i(!1)},t);return()=>clearTimeout(e)},[t]),r?null:e.jsxs("div",{className:BP("LoadingMessage",{"LoadingMessage--dark":n===eN}),children:[e.jsx("div",{children:e.jsx(w6,{})}),e.jsx("div",{className:"LoadingMessage-text",children:y6("labels.loadingScene")})]})},E6=t=>{let[n,r]=vt.useState(!0);return vt.useEffect(()=>{let e=h6.find(e=>e.code===t.langCode)||u6;(async()=>{await g6(e),r(!1)})()},[t.langCode]),n?e.jsx(S6,{theme:t.theme}):t.children},k6=St.forwardRef(({size:t="medium",visible:n=!0,className:r="",...i},s)=>{let{id:a}=_re(),o=St.useRef(null);St.useImperativeHandle(s,()=>o.current);let l=`ToolIcon_size_${t}`,[c,d]=vt.useState(!1),u=vt.useRef(!0),h=async e=>{let t="onClick"in i&&i.onClick?.(e);if(HL(t))try{d(!0),await t}catch(n){if(!(n instanceof SH))throw n}finally{u.current&&d(!1)}};vt.useEffect(()=>(u.current=!0,()=>{u.current=!1}),[]);let p=vt.useRef(null);if("button"===i.type||"icon"===i.type||"submit"===i.type){let t="icon"===i.type?"button":i.type;return e.jsxs("button",{className:BP("ToolIcon_type_button",l,r,n&&!i.hidden?"ToolIcon_type_button--show":"ToolIcon_type_button--hide",{ToolIcon:!i.hidden,"ToolIcon--selected":i.selected,"ToolIcon--plain":"icon"===i.type}),style:i.style,"data-testid":i["data-testid"],hidden:i.hidden,title:i.title,"aria-label":i["aria-label"],type:t,onClick:h,ref:o,disabled:c||i.isLoading||!!i.disabled,children:[(i.icon||i.label)&&e.jsxs("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":!!i.disabled,children:[i.icon||i.label,i.keyBindingLabel&&e.jsx("span",{className:"ToolIcon__keybinding",children:i.keyBindingLabel}),i.isLoading&&e.jsx(w6,{})]}),i.showAriaLabel&&e.jsxs("div",{className:"ToolIcon__label",children:[i["aria-label"]," ",c&&e.jsx(w6,{})]}),i.children]})}return e.jsxs("label",{className:BP("ToolIcon",r),title:i.title,onPointerDown:e=>{p.current=e.pointerType||null,i.onPointerDown?.({pointerType:e.pointerType||null})},onPointerUp:()=>{requestAnimationFrame(()=>{p.current=null})},children:[e.jsx("input",{className:`ToolIcon_type_radio ${l}`,type:"radio",name:i.name,"aria-label":i["aria-label"],"aria-keyshortcuts":i["aria-keyshortcuts"],"data-testid":i["data-testid"],id:`${a}-${i.id}`,onChange:()=>{i.onChange?.({pointerType:p.current})},checked:i.checked,ref:o}),e.jsxs("div",{className:"ToolIcon__icon",children:[i.icon,i.keyBindingLabel&&e.jsx("span",{className:"ToolIcon__keybinding",children:i.keyBindingLabel})]})]})});k6.displayName="ToolButton";var C6=(e,t)=>{if(e.editingGroupId){let n=jV(wQ(t),e.editingGroupId);if(n.length)return{...e,selectedElementIds:{[n[0].id]:!0}}}return e},_6=kG({name:"deleteSelectedElements",label:"labels.delete",icon:VF,trackEvent:{category:"element",action:"delete"},perform:(e,t,n,r)=>{if(t.editingLinearElement){let{elementId:n,selectedPointsIndices:i,startBindingElement:s,endBindingElement:a}=t.editingLinearElement,o=r.scene.getNonDeletedElementsMap(),l=eG.getElement(n,o);if(!l||null==i)return!1;if(l.points.length<2){let n=e.map(e=>e.id===l.id?LK(e,{isDeleted:!0}):e);return{elements:n,appState:{...C6(t,n),editingLinearElement:null},captureUpdate:bY}}let c={startBindingElement:i?.includes(0)?null:s,endBindingElement:i?.includes(l.points.length-1)?null:a};return eG.deletePoints(l,i),{elements:e,appState:{...t,editingLinearElement:{...t.editingLinearElement,...c,selectedPointsIndices:i?.[0]>0?[i[0]-1]:[0]}},captureUpdate:bY}}let{elements:i,appState:s}=((e,t,n)=>{let r=new Set(MK(e.filter(e=>UO(e)),t).map(e=>e.id)),i={},s=n.scene.getNonDeletedElementsMap(),a=new Set;for(let d of r){let t=aK(e,d);for(let e of t)if(!a.has(e.id)){if(RO(e)){let t=uG(e,s);t&&(i[t.id]=!0)}else i[e.id]=!0;a.add(e.id)}}let o=!0,l=e.map(e=>{if(t.selectedElementIds[e.id]){let t=RO(e)?uG(e,s):null;return e.frameId&&r.has(e.frameId)?(o=!1,i[e.id]=!0,e):t?.frameId&&r.has(t?.frameId)?e:(e.boundElements&&e.boundElements.forEach(t=>{let r=n.scene.getNonDeletedElementsMap().get(t.id);r&&SO(r)&&(DK(r,{startBinding:e.id===r.startBinding?.elementId?null:r.startBinding,endBinding:e.id===r.endBinding?.elementId?null:r.endBinding}),DK(r,{points:r.points}))}),LK(e,{isDeleted:!0}))}return e.frameId&&r.has(e.frameId)?(o=!1,RO(e)||(i[e.id]=!0),LK(e,{frameId:null})):RO(e)&&t.selectedElementIds[e.containerId]?LK(e,{isDeleted:!0}):e}),c=t.editingGroupId;if(o&&t.editingGroupId){let e=jV(l,t.editingGroupId).filter(e=>!e.isDeleted);if(e.length>1)e[0]&&(i[e[0].id]=!0);else{c=null,e[0]&&(i[e[0].id]=!0);let n=e[0];if(n){let e=n.groupIds.findIndex(e=>e===t.editingGroupId),r=n.groupIds[e+1];if(r){let e=jV(l,r).filter(e=>!e.isDeleted);e.length>1&&(c=r,e.forEach(e=>{i[e.id]=!0}))}}}}return{elements:l,appState:{...t,...SV({selectedElementIds:i,editingGroupId:c},l,t,null)}}})(e,t,r);return rV(i,i.filter(e=>e.isDeleted)),s=C6(s,i),{elements:i,appState:{...s,activeTool:wL(t,{type:"selection"}),multiElement:null,activeEmbeddable:null},captureUpdate:_K(wQ(e),t)?bY:yY}},keyTest:(e,t,n)=>(e.key===$$.BACKSPACE||e.key===$$.DELETE)&&!e[$$.CTRL_OR_CMD],PanelComponent:({elements:t,appState:n,updateData:r})=>e.jsx(k6,{type:"button",icon:VF,title:y6("labels.delete"),"aria-label":y6("labels.delete"),onClick:()=>r(null),visible:_K(wQ(t),n)})}),M6=(e,t)=>e.frameId===t||e.id===t,I6=(e,t,n)=>{let r=[],i=[],s=null,a=-1,o=DL(n||MK(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0}));for(;++a<e.length;){let t=e[a];o.get(t.id)?(i.length&&(r=r.concat(i),i=[]),r.push(a),s=a+1):t.isDeleted&&s===a?(s=a+1,i.push(a)):i=[]}return r},j6=(e,t,n)=>{if("containerId"in e&&e.containerId){let r=NK.getScene(e).getElement(e.containerId);if(r)return"left"===n?Math.min(t.indexOf(r),t.indexOf(e)):Math.max(t.indexOf(r),t.indexOf(e))}else{let r=e.boundElements?.find(e=>"arrow"!==e.type)?.id;if(r){let i=NK.getScene(e).getElement(r);if(i)return"left"===n?Math.min(t.indexOf(i),t.indexOf(e)):Math.max(t.indexOf(i),t.indexOf(e))}}},T6=(e,t,n,r,i)=>{let s=t[n],a=t=>!t.isDeleted&&(i?t.frameId===i:!e.editingGroupId||t.groupIds.includes(e.editingGroupId)),o="left"===r?RL(t,e=>a(e),Math.max(0,n-1)):TL(t,e=>a(e),n+1),l=t[o];if(!l)return-1;if(e.editingGroupId){if(s?.groupIds.join("")===l?.groupIds.join(""))return j6(l,t,r)??o;if(!l?.groupIds.includes(e.editingGroupId))return-1}if(!i&&(l.frameId||UO(l))){let e=((e,t)=>{let n=-1,r=-1;return e.forEach((e,i)=>{M6(e,t)&&(-1===n&&(n=i),r=i)}),-1===n?[]:e.slice(n,r+1)})(t,l.frameId||l.id);return"left"===r?t.indexOf(e[0]):t.indexOf(e[e.length-1])}if(!l.groupIds.length)return j6(l,t,r)??o;let c=e.editingGroupId?l.groupIds[l.groupIds.indexOf(e.editingGroupId)-1]:l.groupIds[l.groupIds.length-1],d=jV(t,c);return d.length?"left"===r?t.indexOf(d[0]):t.indexOf(d[d.length-1]):o},R6=(e,t)=>t.reduce((t,n)=>{let r=e[n];return t.set(r.id,r),t},new Map),P6=(e,t,n)=>{let r=I6(e,t),i=R6(e,r),s=(e=>{let t=0;return e.reduce((n,r,i)=>(i>0&&e[i-1]!==r-1&&(t=++t),(n[t]||(n[t]=[])).push(r),n),[])})(r);"right"===n&&(s=s.reverse());let a=new Set(r.filter(t=>UO(e[t])).map(t=>e[t].id));return s.forEach((r,i)=>{let s=r[0],o=r[r.length-1],l="left"===n?s:o,c=r.some(t=>{let n=e[t];return n.frameId&&a.has(n.frameId)})?null:e[l]?.frameId,d=T6(t,e,l,n,c);if(-1===d||l===d)return;let u="left"===n?e.slice(0,d):e.slice(0,s),h=e.slice(s,o+1),p="left"===n?e.slice(d,s):e.slice(o+1,d+1),f="left"===n?e.slice(o+1):e.slice(d+1);e="left"===n?[...u,...h,...p,...f]:[...u,...p,...h,...f]}),rY(e,i),e},A6=(e,t,n,r,i)=>{let s,a,o=I6(e,t,i),l=R6(e,o),c=[];if("left"===n){if(r)s=TL(e,e=>M6(e,r));else if(t.editingGroupId){let n=jV(e,t.editingGroupId);if(!n.length)return e;s=e.indexOf(n[0])}else s=0;a=o[o.length-1]}else{if(r)a=RL(e,e=>M6(e,r));else if(t.editingGroupId){let n=jV(e,t.editingGroupId);if(!n.length)return e;a=e.indexOf(n[n.length-1])}else a=e.length-1;s=o[0]}-1===s&&(s=0);for(let f=s;f<a+1;f++)o.includes(f)||c.push(e[f]);let d=Array.from(l.values()),u=e.slice(0,s),h=e.slice(a+1),p="left"===n?[...u,...d,...c,...h]:[...u,...c,...d,...h];return rY(p,l),p};function N6(e,t,n,r){let i=DL(MK(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),s={regularElements:[],frameChildren:new Map},a=new Set;for(let c of e)i.has(c.id)&&UO(c)&&a.add(c.id);for(let c of e)if(i.has(c.id))if(UO(c)||c.frameId&&a.has(c.frameId))s.regularElements.push(c);else if(c.frameId){let e=s.frameChildren.get(c.frameId)||[];e.push(c),s.frameChildren.set(c.frameId,e)}else s.regularElements.push(c);let o=e,l=Array.from(s.frameChildren.entries());for(let[c,d]of l)o=r(e,t,n,c,d);return r(o,t,n,null,s.regularElements)}var D6=(e,t)=>P6(e,t,"left"),L6=(e,t)=>P6(e,t,"right"),O6=(e,t)=>N6(e,t,"left",A6),F6=(e,t)=>N6(e,t,"right",A6),z6=kG({name:"sendBackward",label:"labels.sendBackward",keywords:["move down","zindex","layer"],icon:vz,trackEvent:{category:"element"},perform:(e,t)=>({elements:D6(e,t),appState:t,captureUpdate:bY}),keyPriority:40,keyTest:e=>e[$$.CTRL_OR_CMD]&&!e.shiftKey&&e.code===M$,PanelComponent:({updateData:t,appState:n})=>e.jsx("button",{type:"button",className:"zIndexButton",onClick:()=>t(null),title:`${y6("labels.sendBackward")} — ${SL("CtrlOrCmd+[")}`,children:vz})}),B6=kG({name:"bringForward",label:"labels.bringForward",keywords:["move up","zindex","layer"],icon:xz,trackEvent:{category:"element"},perform:(e,t)=>({elements:L6(e,t),appState:t,captureUpdate:bY}),keyPriority:40,keyTest:e=>e[$$.CTRL_OR_CMD]&&!e.shiftKey&&e.code===_$,PanelComponent:({updateData:t,appState:n})=>e.jsx("button",{type:"button",className:"zIndexButton",onClick:()=>t(null),title:`${y6("labels.bringForward")} — ${SL("CtrlOrCmd+]")}`,children:xz})}),H6=kG({name:"sendToBack",label:"labels.sendToBack",keywords:["move down","zindex","layer"],icon:Sz,trackEvent:{category:"element"},perform:(e,t)=>({elements:O6(e,t),appState:t,captureUpdate:bY}),keyTest:e=>yA?e[$$.CTRL_OR_CMD]&&e.altKey&&e.code===M$:e[$$.CTRL_OR_CMD]&&e.shiftKey&&e.code===M$,PanelComponent:({updateData:t,appState:n})=>e.jsx("button",{type:"button",className:"zIndexButton",onClick:()=>t(null),title:`${y6("labels.sendToBack")} — ${SL(yA?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")}`,children:Sz})}),$6=kG({name:"bringToFront",label:"labels.bringToFront",keywords:["move up","zindex","layer"],icon:wz,trackEvent:{category:"element"},perform:(e,t)=>({elements:F6(e,t),appState:t,captureUpdate:bY}),keyTest:e=>yA?e[$$.CTRL_OR_CMD]&&e.altKey&&e.code===_$:e[$$.CTRL_OR_CMD]&&e.shiftKey&&e.code===_$,PanelComponent:({updateData:t,appState:n})=>e.jsx("button",{type:"button",className:"zIndexButton",onClick:e=>t(null),title:`${y6("labels.bringToFront")} — ${SL(yA?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")}`,children:wz})}),W6=kG({name:"selectAll",label:"labels.selectAll",icon:GB,trackEvent:{category:"canvas"},viewMode:!1,perform:(e,t,n,r)=>{if(t.editingLinearElement)return!1;let i=e.filter(e=>!(e.isDeleted||mO(e)&&e.containerId||e.locked)).reduce((e,t)=>(e[t.id]=!0,e),{});return{appState:{...t,...SV({editingGroupId:null,selectedElementIds:i},wQ(e),t,r),selectedLinearElement:1===Object.keys(i).length&&vO(e[0])?new eG(e[0]):null},captureUpdate:bY}},keyTest:e=>e[$$.CTRL_OR_CMD]&&e.key===$$.A}),X6=e=>{let t=(e=>e.reduce((e,t,n)=>(e.set(t.id,[t,n]),e),new Map))(e),n=e.slice(),r=new Set;return n.forEach((e,i)=>{e&&(e.boundElements?.length?(r.add(e),n[i]=null,e.boundElements.forEach(e=>{let i=t.get(e.id);i&&"text"===e.type&&(r.add(i[0]),n[i[1]]=null)})):"text"===e.type&&e.containerId&&t.get(e.containerId)?.[0].boundElements?.find(t=>t.id===e.id)||(r.add(e),n[i]=null))}),r.size!==e.length?e:[...r]},V6=e=>X6((e=>{let t=e.slice(),n=new Set,r=e=>{let t=e[0]?.groupIds?.join(""),n=[e[0]],i=[];for(let r of e.slice(1))r.groupIds?.join("")===t?n.push(r):i.push(r);return i.length?[...n,...r(i)]:n},i=new Map;return t.forEach((e,s)=>{if(!i.has(e.id))if(e.groupIds?.length){let a=e.groupIds[e.groupIds.length-1],o=t.slice(s).filter(e=>{let t=e?.groupIds?.some(e=>e===a);return t&&i.set(e.id,!0),t});for(let e of r(o))n.add(e)}else n.add(e)}),n.size!==e.length?e:[...n]})(e)),G6=kG({name:"duplicateSelection",label:"labels.duplicateSelection",icon:YF,trackEvent:{category:"element"},perform:(e,t,n,r)=>{if(t.editingLinearElement)try{return{elements:e,appState:eG.duplicateSelectedPoints(t,r.scene.getNonDeletedElementsMap()),captureUpdate:bY}}catch{return!1}let i=Y6(e,t);if(r.props.onDuplicate&&i.elements){let t=r.props.onDuplicate(i.elements,e);t&&(i.elements=t)}return{...i,captureUpdate:bY}},keyTest:e=>e[$$.CTRL_OR_CMD]&&e.key===$$.D,PanelComponent:({elements:t,appState:n,updateData:r})=>e.jsx(k6,{type:"button",icon:YF,title:`${y6("labels.duplicateSelection")} — ${SL("CtrlOrCmd+D")}`,"aria-label":y6("labels.duplicateSelection"),onClick:()=>r(null),visible:_K(wQ(t),n)})}),Y6=(e,t)=>{let n=new Map,r=[],i=[],s=new Map,a=new Map,o=DL(e),l=e=>{let o=cO(e).reduce((e,o)=>{if(d.has(o.id))return e;d.set(o.id,!0);let l=eY(t.editingGroupId,n,o,{x:o.x+10,y:o.y+10});return d.set(l.id,!0),a.set(l.id,l),s.set(o.id,l.id),i.push(o),r.push(l),e.push(l),e},[]);return Array.isArray(e)?o:o[0]||null};e=V6(e);let c=DL(MK(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),d=new Map,u=e.slice(),h=(e,t)=>{YL(-1!==e,"targetIndex === -1 "),(Array.isArray(t)||t)&&u.splice(e+1,0,...cO(t))},p=new Set(e.filter(e=>c.has(e.id)&&UO(e)).map(e=>e.id));for(let m of e){if(d.has(m.id)||!c.has(m.id))continue;let n=kV(t,m);if(n){let t=jV(e,n).flatMap(t=>UO(t)?[...aK(e,t.id),t]:[t]);h(RL(u,e=>e.groupIds?.includes(n)),l(t));continue}if(!m.frameId||!p.has(m.frameId)){if(UO(m)){let t=m.id,n=aK(e,t);h(RL(u,e=>e.frameId===t||e.id===t),l([...n,m]));continue}if(TO(m)){let e=dG(m,o),t=RL(u,e=>e.id===m.id||"containerId"in e&&e.containerId===m.id);h(t,l(e?[m,e]:m));continue}if(RO(m)){let e=uG(m,o),t=RL(u,t=>t.id===m.id||t.id===e?.id);h(t,l(e?[e,m]:m));continue}h(RL(u,e=>e.id===m.id),l(m))}}aG(u,i,s),tV(u,i,s),JZ(u,i,s);let f=EK(r);return{elements:u,appState:{...t,...SV({editingGroupId:t.editingGroupId,selectedElementIds:f.reduce((e,t)=>(RO(t)||(e[t.id]=!0),e),{})},wQ(u),t,null)}}},q6=new Set(["command_palette","export"]),Z6=(e,t,n,r)=>{try{if(typeof window>"u"||BM.VITE_WORKER_ID||"true"!==BM.VITE_APP_ENABLE_TRACKING||!q6.has(e)||BM.DEV)return;window.sa_event&&window.sa_event(t,{category:e,label:n,value:r})}catch(i){}},K6=vt.forwardRef((t,n)=>{let{title:r,className:i,testId:s,active:a,standalone:o,icon:l,onClick:c}=t;return e.jsx("button",{type:"button",ref:n,title:r,"data-testid":s,className:BP(i,{standalone:o,active:a}),onClick:c,children:l},r)}),Q6=t=>e.jsx("div",{className:"buttonList",children:t.options.map(n=>"button"===t.type?e.jsx(K6,{icon:n.icon,title:n.text,testId:n.testId,active:n.active??t.value===n.value,onClick:e=>t.onClick(n.value,e)},n.text):e.jsxs("label",{className:BP({active:t.value===n.value}),title:n.text,children:[e.jsx("input",{type:"radio",name:t.group,onChange:()=>t.onChange(n.value),checked:t.value===n.value,"data-testid":n.testId}),n.icon]},n.text))}),J6=({onChange:t,type:n,activeColor:r,topPicks:i})=>{let s;return"elementStroke"===n&&(s=fA),"elementBackground"===n&&(s=mA),"canvasBackground"===n&&(s=gA),i&&(s=i),s?e.jsx("div",{className:"color-picker__top-picks",children:s.map(n=>e.jsx("button",{className:BP("color-picker__button",{active:n===r,"is-transparent":"transparent"===n||!n}),style:{"--swatch-color":n},type:"button",title:n,onClick:()=>t(n),"data-testid":`color-top-pick-${n}`,children:e.jsx("div",{className:"color-picker__button-outline"})},n))}):null},e3=()=>e.jsx("div",{style:{width:1,height:"1rem",backgroundColor:"var(--default-border-color)",margin:"0 auto"}}),t3=({palette:e,color:t})=>{for(let[n,r]of Object.entries(e))if(Array.isArray(r)){let e=r.indexOf(t);if(e>-1)return{colorName:n,shade:e}}else if(r===t)return{colorName:n,shade:null};return null},n3=[["q","w","e","r","t"],["a","s","d","f","g"],["z","x","c","v","b"]].flat(),r3=({color:e,palette:t})=>!Object.values(t).flat().includes(e),i3=FJ(null),s3=(e,t,n)=>(299*e+587*t+114*n)/1e3>=160?"black":"white",a3=(e,t)=>{if(t){let t=(new Option).style;if(t.color=e,t.color){let e=t.color.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),n=parseInt(e[0]),r=parseInt(e[1]),i=parseInt(e[2]);return s3(n,r,i)}}if("transparent"===e)return"black";let n=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),i=parseInt(e.substring(5,7),16);return s3(n,r,i)},o3=({color:t,keyLabel:n,isCustomColor:r=!1,isShade:i=!1})=>e.jsxs("div",{className:"color-picker__button__hotkey-label",style:{color:a3(t,r)},children:[i&&"⇧",n]}),l3=({hex:t,onChange:n,palette:r})=>{let i=t3({color:t||"transparent",palette:r}),[s,a]=i6(i3),o=vt.useRef(null);if(vt.useEffect(()=>{o.current&&"shades"===s&&o.current.focus()},[i,s]),i){let{colorName:t,shade:l}=i,c=r[t];if(Array.isArray(c))return e.jsx("div",{className:"color-picker-content--default shades",children:c.map((r,i)=>e.jsxs("button",{ref:i===l&&"shades"===s?o:void 0,tabIndex:-1,type:"button",className:BP("color-picker__button color-picker__button--large",{active:i===l}),"aria-label":"Shade",title:`${t} - ${i+1}`,style:r?{"--swatch-color":r}:void 0,onClick:()=>{n(r),a("shades")},children:[e.jsx("div",{className:"color-picker__button-outline"}),e.jsx(o3,{color:r,keyLabel:i+1,isShade:!0})]},i))})}return e.jsxs("div",{className:"color-picker-content--default",style:{position:"relative"},tabIndex:-1,children:[e.jsx("button",{type:"button",tabIndex:-1,className:"color-picker__button color-picker__button--large color-picker__button--no-focus-visible"}),e.jsx("div",{tabIndex:-1,style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"0.75rem"},children:y6("colorPicker.noShades")})]})},c3=({palette:t,color:n,onChange:r,label:i,activeShade:s})=>{let a=t3({color:n||"transparent",palette:t}),[o,l]=i6(i3),c=vt.useRef(null);return vt.useEffect(()=>{c.current&&"baseColors"===o&&c.current.focus()},[a?.colorName,o]),e.jsx("div",{className:"color-picker-content--default",children:Object.entries(t).map(([t,n],i)=>{let o=(Array.isArray(n)?n[s]:n)||"transparent",d=n3[i],u=y6(`colors.${t.replace(/\d+/,"")}`,null,"");return e.jsxs("button",{ref:a?.colorName===t?c:void 0,tabIndex:-1,type:"button",className:BP("color-picker__button color-picker__button--large",{active:a?.colorName===t,"is-transparent":"transparent"===o||!o}),onClick:()=>{r(o),l("baseColors")},title:`${u}${o.startsWith("#")?` ${o}`:""} — ${d}`,"aria-label":`${u} — ${d}`,style:{"--swatch-color":o},"data-testid":`color-${t}`,children:[e.jsx("div",{className:"color-picker__button-outline"}),e.jsx(o3,{color:o,keyLabel:d})]},t)})})},d3=({colors:t,color:n,onChange:r,label:i})=>{let[s,a]=i6(i3),o=vt.useRef(null);return vt.useEffect(()=>{o.current&&o.current.focus()},[n,s]),e.jsx("div",{className:"color-picker-content--default",children:t.map((t,s)=>e.jsxs("button",{ref:n===t?o:void 0,tabIndex:-1,type:"button",className:BP("color-picker__button color-picker__button--large",{active:n===t,"is-transparent":"transparent"===t||!t}),onClick:()=>{r(t),a("custom")},title:t,"aria-label":i,style:{"--swatch-color":t},children:[e.jsx("div",{className:"color-picker__button-outline"}),e.jsx(o3,{color:t,keyLabel:s+1,isCustomColor:!0})]},s))})},u3=(e,t,n)=>{let r=Math.ceil(n/5);switch(t=t??-1,e){case"ArrowLeft":{let e=t-1;return e<0?n-1:e}case"ArrowRight":return(t+1)%n;case"ArrowDown":{let e=t+5;return e>=n?t%5:e}case"ArrowUp":{let e=t-5,i=e<0?5*r+e:e;return i>=n?void 0:i}}},h3=({event:e,activeColorPickerSection:t,palette:n,color:r,onChange:i,customColors:s,setActiveColorPickerSection:a,updateData:o,activeShade:l,onEyeDropperToggle:c,onEscape:d})=>{if(e[$$.CTRL_OR_CMD])return!1;if(e.key===$$.ESCAPE)return d(e),!0;if(e.key===$$.ALT)return c(!0),!0;if(e.key===$$.I)return c(),!0;let u=t3({color:r,palette:n});if(e.key===$$.TAB){let o={custom:!!s.length,baseColors:!0,shades:null!=u?.shade,hex:!0},l=Object.entries(o).reduce((e,[t,n])=>(n&&e.push(t),e),[]),c=l.indexOf(t),d=e.shiftKey?-1:1,h=l[c+d>l.length-1?0:c+d<0?l.length-1:c+d];return h&&a(h),"custom"===h?i(s[0]):"baseColors"===h&&(Object.entries(n).find(([e,t])=>Array.isArray(t)?t.includes(r):t===r?e:null)||i(hA.black)),e.preventDefault(),e.stopPropagation(),!0}if((({e:e,colorObj:t,onChange:n,palette:r,customColors:i,setActiveColorPickerSection:s,activeShade:a})=>{if(null!=t?.shade&&["Digit1","Digit2","Digit3","Digit4","Digit5"].includes(e.code)&&e.shiftKey){let i=Number(e.code.slice(-1))-1;return n(r[t.colorName][i]),s("shades"),!0}if(["1","2","3","4","5"].includes(e.key)&&i[Number(e.key)-1])return n(i[Number(e.key)-1]),s("custom"),!0;if(n3.includes(e.key)){let t=n3.indexOf(e.key),i=r[Object.keys(r)[t]];return n(Array.isArray(i)?i[a]:i),s("baseColors"),!0}return!1})({e:e,colorObj:u,onChange:i,palette:n,customColors:s,setActiveColorPickerSection:a,activeShade:l}))return!0;if("shades"===t&&u){let{shade:t}=u,r=u3(e.key,t,5);if(void 0!==r)return i(n[u.colorName][r]),!0}if("baseColors"===t&&u){let{colorName:t}=u,r=Object.keys(n),s=r.indexOf(t),a=u3(e.key,s,r.length);if(void 0!==a){let e=n[r[a]];return i(Array.isArray(e)?e[l]:e),!0}}if("custom"===t){let t=s.indexOf(r),n=u3(e.key,t,s.length);if(void 0!==n){return i(s[n]),!0}}return!1},p3=({children:t})=>e.jsx("div",{className:"color-picker__heading",children:t}),f3=({color:t,onChange:n,label:r,type:i,elements:s,palette:a,updateData:o,children:l,onEyeDropperToggle:c,onEscape:d})=>{let[u]=St.useState(()=>"canvasBackground"===i?[]:((e,t,n)=>{let r={elementBackground:"backgroundColor",elementStroke:"strokeColor"},i=e.filter(e=>{if(e.isDeleted)return!1;let i=e[r[t]];return r3({color:i,palette:n})}),s=new Map;return i.forEach(e=>{let n=e[r[t]];s.has(n)?s.set(n,s.get(n)+1):s.set(n,1)}),[...s.entries()].sort((e,t)=>t[1]-e[1]).map(e=>e[0]).slice(0,5)})(s,i,a)),[h,p]=i6(i3),f=t3({color:t,palette:a});vt.useEffect(()=>{if(!h){let e=r3({color:t,palette:a}),n=e&&!u.includes(t);p(n?"hex":e?"custom":null!=f?.shade?"shades":"baseColors")}},[h,t,a,p,f,u]);let[m,g]=vt.useState(f?.shade??("elementBackground"===i?1:4));vt.useEffect(()=>{null!=f?.shade&&g(f.shade);let e=e=>{e.key===$$.ALT&&c(!1)};return document.addEventListener("keyup",e,{capture:!0}),()=>{document.removeEventListener("keyup",e,{capture:!0})}},[f,c]);let b=St.useRef(null);return e.jsx("div",{role:"dialog","aria-modal":"true","aria-label":y6("labels.colorPicker"),children:e.jsxs("div",{ref:b,onKeyDown:e=>{h3({event:e,activeColorPickerSection:h,palette:a,color:t,onChange:n,onEyeDropperToggle:c,customColors:u,setActiveColorPickerSection:p,updateData:o,activeShade:m,onEscape:d})&&(e.preventDefault(),e.stopPropagation())},className:"color-picker-content properties-content",tabIndex:-1,children:[!!u.length&&e.jsxs("div",{children:[e.jsx(p3,{children:y6("colorPicker.mostUsedCustomColors")}),e.jsx(d3,{colors:u,color:t,label:y6("colorPicker.mostUsedCustomColors"),onChange:n})]}),e.jsxs("div",{children:[e.jsx(p3,{children:y6("colorPicker.colors")}),e.jsx(c3,{color:t,label:r,palette:a,onChange:n,activeShade:m})]}),e.jsxs("div",{children:[e.jsx(p3,{children:y6("colorPicker.shades")}),e.jsx(l3,{hex:t,onChange:n,palette:a})]}),l]})})},m3=St.createContext(null),g3=()=>St.useContext(m3),b3=e=>{let[t,n]=vt.useState(null),r=Cre(),{theme:i}=g3(),{container:s}=_re();return vt.useLayoutEffect(()=>{t&&(t.className="",t.classList.add("excalidraw",...e?.className?.split(/\s+/)||[]),t.classList.toggle("excalidraw--mobile",r.editor.isMobile),t.classList.toggle("theme--dark",i===eN))},[t,i,r.editor.isMobile,e?.className]),vt.useLayoutEffect(()=>{let t=e?.parentSelector?s?.querySelector(e.parentSelector):document.body;if(!t)return;let r=document.createElement("div");return t.appendChild(r),n(r),()=>{t.removeChild(r)}},[s,e?.parentSelector]),t};function U3(e,t,n){vt.useEffect(()=>{function r(r){let i=r;if(!e.current)return;let s=n?.(i,e.current);return!0!==s?!1===s?t(i):void(e.current.contains(i.target)||!document.documentElement.contains(i.target)||i.target.closest("[data-radix-portal]")||i.target===document.documentElement&&"none"===document.body.style.pointerEvents||i.target.closest("[data-prevent-outside-click]")||t(i)):void 0}return document.addEventListener("pointerdown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("pointerdown",r),document.removeEventListener("touchstart",r)}},[e,t,n])}var y3=e=>{let t=vt.useRef(e);return Object.assign(t.current,e),t.current},x3=FJ(null),v3=({onCancel:n,onChange:r,onSelect:i,colorPickerType:s})=>{let a=b3({className:"excalidraw-eye-dropper-backdrop",parentSelector:".excalidraw-eye-dropper-container"}),o=g3(),l=Mre(),c=Ere(),d=MK(l,o),u=y3({app:c,onCancel:n,onChange:r,onSelect:i,selectedElements:d}),{container:h}=_re();vt.useEffect(()=>{let e=p.current;if(!e||!c.canvas||!a)return;let t=!1,n=c.canvas.getContext("2d"),r=({clientX:e,clientY:t})=>{let r=n.getImageData((e-o.offsetLeft)*window.devicePixelRatio,(t-o.offsetTop)*window.devicePixelRatio,1,1).data;return((e,t,n)=>`#${((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}`)(r[0],r[1],r[2])},i=({clientX:n,clientY:i,altKey:a})=>{e.style.top=`${i+20}px`,e.style.left=`${n+20}px`;let o=r({clientX:n,clientY:i});t&&u.onChange(s,o,u.selectedElements,{altKey:a}),e.style.background=o},l=()=>{u.onCancel()},d=e=>{t=!0,e.stopImmediatePropagation()},f=e=>{t=!1,h?.focus(),e.stopImmediatePropagation(),e.preventDefault(),((e,t)=>{u.onSelect(e,t)})(r(e),e)},m=e=>{e.key===$$.ESCAPE&&(e.preventDefault(),e.stopImmediatePropagation(),l())};return a.tabIndex=-1,a.focus(),i({clientX:u.app.lastViewportPosition.x,clientY:u.app.lastViewportPosition.y,altKey:!1}),a.addEventListener("keydown",m),a.addEventListener("pointerdown",d),a.addEventListener("pointerup",f),window.addEventListener("pointermove",i,{passive:!0}),window.addEventListener("blur",l),()=>{t=!1,a.removeEventListener("keydown",m),a.removeEventListener("pointerdown",d),a.removeEventListener("pointerup",f),window.removeEventListener("pointermove",i),window.removeEventListener("blur",l)}},[u,c.canvas,a,s,h,o.offsetLeft,o.offsetTop]);let p=vt.useRef(null);return U3(p,()=>{n()},e=>!!e.target.closest(".excalidraw-eye-dropper-trigger, .excalidraw-eye-dropper-backdrop")),a?t.createPortal(e.jsx("div",{ref:p,className:"excalidraw-eye-dropper-preview"}),a):null},w3=({color:t,onChange:n,label:r,colorPickerType:i})=>{let s=Cre(),[a,o]=vt.useState(t),[l,c]=i6(i3);vt.useEffect(()=>{o(t)},[t]);let d=vt.useCallback(e=>{let t=e.toLowerCase(),r=C3(t);r&&n(r),o(t)},[n]),u=vt.useRef(null),h=vt.useRef(null);vt.useEffect(()=>{u.current&&u.current.focus()},[l]);let[p,f]=i6(x3);return vt.useEffect(()=>()=>{f(null)},[f]),e.jsxs("div",{className:"color-picker__input-label",children:[e.jsx("div",{className:"color-picker__input-hash",children:"#"}),e.jsx("input",{ref:"hex"===l?u:void 0,style:{border:0,padding:0},spellCheck:!1,className:"color-picker-input","aria-label":r,onChange:e=>{d(e.target.value)},value:(a||"").replace(/^#/,""),onBlur:()=>{o(t)},tabIndex:-1,onFocus:()=>c("hex"),onKeyDown:e=>{e.key!==$$.TAB&&(e.key===$$.ESCAPE&&h.current?.focus(),e.stopPropagation())}}),!s.editor.isMobile&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"1px",height:"1.25rem",backgroundColor:"var(--default-border-color)"}}),e.jsx("div",{ref:h,className:BP("excalidraw-eye-dropper-trigger",{selected:p}),onClick:()=>f(e=>e?null:{keepOpenOnAlt:!1,onSelect:e=>n(e),colorPickerType:i}),title:`${y6("labels.eyeDropper")} — ${$$.I.toLocaleUpperCase()} or ${SL("Alt")} `,children:TB})]})]})},S3=St.forwardRef(({children:t,padding:n,className:r,style:i},s)=>e.jsx("div",{className:BP("Island",r),style:{"--padding":n,...i},ref:s,children:t})),E3=St.forwardRef(({className:t,container:n,children:r,style:i,onClose:s,onKeyDown:a,onFocusOutside:o,onPointerLeave:l,onPointerDownOutside:c},d)=>{let u=Cre();return e.jsx(n2,{container:n,children:e.jsxs(r2,{ref:d,className:BP("focus-visible-none",t),"data-prevent-outside-click":!0,side:u.editor.isMobile&&!u.viewport.isLandscape?"bottom":"right",align:u.editor.isMobile&&!u.viewport.isLandscape?"center":"start",alignOffset:-16,sideOffset:20,style:{zIndex:"var(--zIndex-popup)"},onPointerLeave:l,onKeyDown:a,onFocusOutside:o,onPointerDownOutside:c,onCloseAutoFocus:e=>{e.stopPropagation(),e.preventDefault(),n&&!(e=>pL(e)||e instanceof Element&&!!e.closest("label, button"))(document.activeElement)&&n.focus(),s()},children:[e.jsx(S3,{padding:3,style:i,children:r}),e.jsx(i2,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})}),k3=e=>{let t=(new Option).style;return t.color=e,!!t.color},C3=e=>PL(e)?e:k3(`#${e}`)?`#${e}`:k3(e)?e:null,_3=({type:t,color:n,onChange:r,label:i,elements:s,palette:a=hA,updateData:o})=>{let{container:l}=_re(),[,c]=i6(i3),[d,u]=i6(x3),h=e.jsxs("div",{children:[e.jsx(p3,{children:y6("colorPicker.hexCode")}),e.jsx(w3,{color:n,label:i,onChange:e=>{r(e)},colorPickerType:t})]}),p=vt.useRef(null);return e.jsx(E3,{container:l,style:{maxWidth:"13rem"},onFocusOutside:e=>{p.current?.querySelector(".color-picker-content")?.focus(),e.preventDefault()},onPointerDownOutside:e=>{d&&e.preventDefault()},onClose:()=>{o({openPopup:null}),c(null)},children:a?e.jsx(f3,{palette:a,color:n,onChange:e=>{r(e)},onEyeDropperToggle:e=>{u(n=>e?((n=n||{keepOpenOnAlt:!0,onSelect:r,colorPickerType:t}).keepOpenOnAlt=!0,n):!1===e||n?null:{keepOpenOnAlt:!1,onSelect:r,colorPickerType:t})},onEscape:e=>{d?u(null):o({openPopup:null})},label:i,type:t,elements:s,updateData:o,children:h}):h})},M3=({label:t,color:n,type:r})=>e.jsx(t2,{type:"button",className:BP("color-picker__button active-color properties-trigger",{"is-transparent":"transparent"===n||!n}),"aria-label":t,style:n?{"--swatch-color":n}:void 0,title:y6("elementStroke"===r?"labels.showStroke":"labels.showBackground"),children:e.jsx("div",{className:"color-picker__button-outline"})}),I3=({type:t,color:n,onChange:r,label:i,elements:s,palette:a=hA,topPicks:o,updateData:l,appState:c})=>e.jsx("div",{children:e.jsxs("div",{role:"dialog","aria-modal":"true",className:"color-picker-container",children:[e.jsx(J6,{activeColor:n,onChange:r,type:t,topPicks:o}),e.jsx(e3,{}),e.jsxs(e2,{open:c.openPopup===t,onOpenChange:e=>{l({openPopup:e?t:null})},children:[e.jsx(M3,{color:n,label:i,type:t}),c.openPopup===t&&e.jsx(_3,{type:t,color:n,onChange:r,label:i,elements:s,palette:a,updateData:l})]})]})}),j3=({icon:t})=>e.jsx("span",{style:{width:"1em",margin:"0 0.5ex 0 0.5ex",display:"inline-block",lineHeight:0,verticalAlign:"middle"},children:t}),T3=({label:t,open:n,openTrigger:r,children:i,className:s})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},className:s,onClick:r,children:[t,e.jsx(j3,{icon:n?uH:dH})]}),n&&e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:i})]}),R3=FJ(!1);function P3({options:t,value:n,label:r,onChange:i,onClose:s,numberOfOptionsToAlwaysShow:a=t.length}){let o=Cre(),[l,c]=i6(R3),d=St.useMemo(()=>t.slice(0,a),[t,a]),u=St.useMemo(()=>t.slice(a),[t,a]);vt.useEffect(()=>{d.some(e=>e.value===n)||c(!0)},[n,d,c]);let h=t=>e.jsx("div",{className:"picker-content",children:t.map((t,r)=>e.jsxs("button",{type:"button",className:BP("picker-option",{active:n===t.value}),onClick:e=>{i(t.value)},title:`${t.text} ${t.keyBinding&&`— ${t.keyBinding.toUpperCase()}`}`,"aria-label":t.text||"none","aria-keyshortcuts":t.keyBinding||void 0,ref:e=>{n===t.value&&setTimeout(()=>{e?.focus()},0)},children:[t.icon,t.keyBinding&&e.jsx("span",{className:"picker-keybinding",children:t.keyBinding})]},t.text))});return e.jsx(r2,{side:o.editor.isMobile&&!o.viewport.isLandscape?"top":"bottom",align:"start",sideOffset:12,style:{zIndex:"var(--zIndex-popup)"},onKeyDown:e=>{let r=t.find(t=>t.keyBinding===e.key.toLowerCase());if(e.metaKey||e.altKey||e.ctrlKey||!r)if(e.key===$$.TAB){let r=t.findIndex(e=>e.value===n),s=e.shiftKey?(t.length+r-1)%t.length:(r+1)%t.length;i(t[s].value)}else if(V$(e.key)){let r=b6().rtl,s=t.findIndex(e=>e.value===n);if(-1!==s){let n=t.length,o=s;switch(e.key){case r?$$.ARROW_LEFT:$$.ARROW_RIGHT:o=(s+1)%n;break;case r?$$.ARROW_RIGHT:$$.ARROW_LEFT:o=(n+s-1)%n;break;case $$.ARROW_DOWN:o=(s+(a??1))%n;break;case $$.ARROW_UP:o=(n+s-(a??1))%n}i(t[o].value)}e.preventDefault()}else(e.key===$$.ESCAPE||e.key===$$.ENTER)&&(e.preventDefault(),s());else i(r.value),e.preventDefault();e.nativeEvent.stopImmediatePropagation(),e.stopPropagation()},children:e.jsxs("div",{className:"picker",role:"dialog","aria-modal":"true","aria-label":r,children:[h(d),u.length>0&&e.jsx(T3,{label:y6("labels.more_options"),open:l,openTrigger:()=>{c(e=>!e)},className:"picker-collapsible",children:h(u)})]})})}function A3({value:t,label:n,options:r,onChange:i,group:s="",numberOfOptionsToAlwaysShow:a}){let[o,l]=St.useState(!1),c=St.useRef(null);return e.jsx("div",{children:e.jsxs(e2,{open:o,onOpenChange:e=>l(e),children:[e.jsx(t2,{name:s,type:"button","aria-label":n,onClick:()=>l(!o),ref:c,className:o?"active":"",children:r.find(e=>e.value===t)?.icon}),o&&e.jsx(P3,{options:r,value:t,label:n,onChange:i,onClose:()=>{l(!1)},numberOfOptionsToAlwaysShow:a})]})})}var N3=St.forwardRef(({className:t,placeholder:n,onChange:r},i)=>e.jsxs("div",{className:BP("QuickSearch__wrapper",t),children:[HB,e.jsx("input",{ref:i,className:"QuickSearch__input",type:"text",placeholder:n,onChange:e=>r(e.target.value.trim().toLowerCase())})]})),D3=({className:t,placeholder:n,children:r})=>{let i=!vt.Children.count(r);return e.jsx("div",{className:BP("ScrollableList__wrapper",t),role:"menu",children:i?e.jsx("div",{className:"empty",children:n}):r})},L3=({children:t,className:n="",style:r,title:i})=>e.jsxs("div",{className:`dropdown-menu-group ${n}`,style:r,children:[i&&e.jsx("p",{className:"dropdown-menu-group-title",children:i}),t]}),O3=L3;L3.displayName="DropdownMenuGroup";var F3=St.createContext({}),z3=(e="",t=!1,n=!1)=>`dropdown-menu-item dropdown-menu-item-base ${e}\n  ${t?"dropdown-menu-item--selected":""} ${n?"dropdown-menu-item--hovered":""}`.trim(),B3=(e,t)=>{let n=vt.useContext(F3);return VL(e,e=>{let r=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});t?.(r),r.defaultPrevented||n.onSelect?.(r)})},H3=({textStyle:t,icon:n,shortcut:r,children:i})=>{let s=Cre();return e.jsxs(e.Fragment,{children:[n&&e.jsx("div",{className:"dropdown-menu-item__icon",children:n}),e.jsx("div",{style:t,className:"dropdown-menu-item__text",children:i}),r&&!s.editor.isMobile&&e.jsx("div",{className:"dropdown-menu-item__shortcut",children:r})]})},$3=({icon:t,value:n,order:r,children:i,shortcut:s,className:a,hovered:o,selected:l,textStyle:c,onSelect:d,onClick:u,...h})=>{let p=B3(u,d),f=vt.useRef(null);return vt.useEffect(()=>{o&&(0===r?f.current?.scrollIntoView({block:"end"}):f.current?.scrollIntoView({block:"nearest"}))},[o,r]),e.jsx("button",{...h,ref:f,value:n,onClick:p,className:z3(a,l,o),title:h.title??h["aria-label"],children:e.jsx(H3,{textStyle:c,icon:t,shortcut:s,children:i})})};$3.displayName="DropdownMenuItem";var W3="green",X3="red",V3="blue",G3=({type:t=V3,children:n})=>{let{theme:r}=Ire(),i={display:"inline-flex",marginLeft:"auto",padding:"2px 4px",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace",border:r===JA?"1.5px solid white":"none"};switch(t){case W3:Object.assign(i,{backgroundColor:"var(--background-color-badge)",color:"var(--color-badge)"});break;case X3:Object.assign(i,{backgroundColor:"pink",color:"darkred"});break;default:Object.assign(i,{background:"var(--color-promo)",color:"var(--color-surface-lowest)"})}return e.jsx("div",{className:"DropDownMenuItemBadge",style:i,children:n})};G3.displayName="DropdownMenuItemBadge",$3.Badge=G3;var Y3=$3,q3=St.memo(({selectedFontFamily:t,hoveredFontFamily:n,onSelect:r,onHover:i,onLeave:s,onOpen:a,onClose:o})=>{let{container:l}=_re(),{fonts:c}=Ere(),{showDeprecatedFonts:d}=kre(),[u,h]=vt.useState(""),p=vt.useRef(null),f=vt.useMemo(()=>Array.from(KH.registered.entries()).filter(([e,{metadata:t}])=>!t.serverSide&&!t.fallback).map(([e,{metadata:t,fontFaces:n}])=>{let r={value:e,icon:t.icon??fB,text:n[0]?.fontFace?.family??"Unknown"};return t.deprecated&&Object.assign(r,{deprecated:t.deprecated,badge:{type:X3,placeholder:y6("fontList.badge.old")}}),r}).sort((e,t)=>e.text.toLowerCase()>t.text.toLowerCase()?1:-1),[]),m=vt.useMemo(()=>new Set(c.getSceneFamilies()),[t]),g=vt.useMemo(()=>f.filter(e=>m.has(e.value)),[f,m]),b=vt.useMemo(()=>f.filter(e=>!m.has(e.value)&&(d||!e.deprecated)),[f,m,d]),U=vt.useMemo(()=>(e=>e.reduce((t,n,r)=>{let i={...n,prev:null,next:null};if(0!==r){let n=t[r-1];if(i.prev=n,n.next=i,r===e.length-1){let e=t[0];i.next=e,e.prev=i}}return t.push(i),t},[]))([...g,...b].filter(e=>e.text?.toLowerCase().includes(u))),[g,b,u]),y=vt.useMemo(()=>{let e;return n?e=U.find(e=>e.value===n):t&&(e=U.find(e=>e.value===t)),!e&&u&&(U[0]?.value?i(U[0].value):s()),e},[n,t,u,U,i,s]),x=vt.useCallback(e=>{(({event:e,inputRef:t,hoveredFont:n,filteredFonts:r,onClose:i,onSelect:s,onHover:a})=>!e[$$.CTRL_OR_CMD]&&e.shiftKey&&e.key.toLowerCase()===$$.F?(t.current?.focus(),!0):e.key===$$.ESCAPE?(i(),!0):e.key===$$.ENTER?(n?.value&&s(n.value),!0):e.key===$$.ARROW_DOWN?(n?.next?a(n.next.value):r[0]?.value&&a(r[0].value),!0):e.key===$$.ARROW_UP?(n?.prev?a(n.prev.value):r[r.length-1]?.value&&a(r[r.length-1].value),!0):void 0)({event:e,inputRef:p,hoveredFont:y,filteredFonts:U,onSelect:r,onHover:i,onClose:o})&&(e.preventDefault(),e.stopPropagation())},[y,U,r,i,o]);vt.useEffect(()=>(a(),()=>{o()}),[]);let v=vt.useMemo(()=>U.filter(e=>m.has(e.value)),[U,m]),w=vt.useMemo(()=>U.filter(e=>!m.has(e.value)),[U,m]),S=(n,s)=>e.jsxs(Y3,{icon:n.icon,value:n.value,order:s,textStyle:{fontFamily:mL({fontFamily:n.value})},hovered:n.value===y?.value,selected:n.value===t,tabIndex:n.value===t?0:-1,onClick:e=>{r(Number(e.currentTarget.value))},onMouseMove:()=>{y?.value!==n.value&&i(n.value)},children:[n.text,n.badge&&e.jsx(G3,{type:n.badge.type,children:n.badge.placeholder})]},n.value),E=[];return v.length&&E.push(e.jsx(O3,{title:y6("fontList.sceneFonts"),children:v.map(S)},"group_1")),w.length&&E.push(e.jsx(O3,{title:y6("fontList.availableFonts"),children:w.map((e,t)=>S(e,t+v.length))},"group_2")),e.jsxs(E3,{className:"properties-content",container:l,style:{width:"15rem"},onClose:o,onPointerLeave:s,onKeyDown:x,children:[e.jsx(N3,{ref:p,placeholder:y6("quickSearch.placeholder"),onChange:bL(h,20)}),e.jsx(D3,{className:"dropdown-menu fonts manual-hover",placeholder:y6("fontList.empty"),children:E.length?E:null})]})},(e,t)=>e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),Z3=({selectedFontFamily:t})=>{let n=vt.useMemo(()=>!(!t||J3(t)),[t]);return e.jsx(t2,{asChild:!0,children:e.jsx("div",{children:e.jsx(K6,{standalone:!0,icon:zF,title:y6("labels.showFonts"),className:"properties-trigger",testId:"font-family-show-fonts",active:n,onClick:()=>{}})})})},K3=[{value:qA.Excalifont,icon:FF,text:y6("labels.handDrawn"),testId:"font-family-hand-drawn"},{value:qA.Nunito,icon:fB,text:y6("labels.normal"),testId:"font-family-normal"},{value:qA["Comic Shanns"],icon:mB,text:y6("labels.code"),testId:"font-family-code"}],Q3=new Set(K3.map(e=>e.value)),J3=e=>!!e&&Q3.has(e),e8=St.memo(({isOpened:t,selectedFontFamily:n,hoveredFontFamily:r,onSelect:i,onHover:s,onLeave:a,onPopupChange:o})=>{let l=vt.useMemo(()=>K3,[]),c=vt.useCallback(e=>{e&&i(e)},[i]);return e.jsxs("div",{role:"dialog","aria-modal":"true",className:"FontPicker__container",children:[e.jsx(Q6,{type:"button",options:l,value:n,onClick:c}),e.jsx(e3,{}),e.jsxs(e2,{open:t,onOpenChange:o,children:[e.jsx(Z3,{selectedFontFamily:n}),t&&e.jsx(q3,{selectedFontFamily:n,hoveredFontFamily:r,onSelect:c,onHover:s,onLeave:a,onOpen:()=>o(!0),onClose:()=>o(!1)})]})]})},(e,t)=>e.isOpened===t.isOpened&&e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),t8=({updateData:t,appState:n,elements:r,testId:i})=>{let s=St.useRef(null),a=St.useRef(null),o=r8(r,n,e=>e.opacity,!0,n.currentItemOpacity);return vt.useEffect(()=>{if(s.current&&a.current){let e=s.current,t=a.current,n=e.offsetWidth,r=15,i=o/100*(n-r)+r/2;t.style.left=`${i}px`,e.style.background=`linear-gradient(to right, var(--color-slider-track) 0%, var(--color-slider-track) ${o}%, var(--button-bg) ${o}%, var(--button-bg) 100%)`}},[o]),e.jsxs("label",{className:"control-label",children:[y6("labels.opacity"),e.jsxs("div",{className:"range-wrapper",children:[e.jsx("input",{ref:s,type:"range",min:"0",max:"100",step:"10",onChange:e=>{t(+e.target.value)},value:o,className:"range-input","data-testid":i}),e.jsx("div",{className:"value-bubble",ref:a,children:0!==o?o:null}),e.jsx("div",{className:"zero-label",children:"0"})]})]})},n8=(e,t,n,r=!1)=>{let i=DL(MK(e,t,{includeBoundTextElement:r}));return e.map(e=>i.get(e.id)||e.id===t.editingTextElement?.id?n(e):e)},r8=function(e,t,n,r,i){let s=t.editingTextElement,a=wQ(e),o=null;return s&&(o=n(s)),o||(o=_K(a,t)?((e,t,n)=>{let r=Array.from(new Set(MK(e,t).map(e=>n(e))));return 1===r.length?r[0]:null})(!0===r?a:a.filter(e=>r(e)),t,n)??("function"==typeof i?i(!0):i):"function"==typeof i?i(!1):i),o},i8=(e,t,n,r,i)=>{let s=new Set,a=n8(e,t,e=>{if(mO(e)){let t=r(e);s.add(t);let i=LK(e,{fontSize:t});return sG(i,n.scene.getContainerElement(e),n.scene.getNonDeletedElementsMap()),i=((e,t)=>RO(t)||!t.autoResize?t:DK(t,{x:"left"===e.textAlign?e.x:e.x+(e.width-t.width)/("center"===e.textAlign?2:1),y:e.y+(e.height-t.height)/2},!1))(e,i),i}return e},!0),o=DL(a);return MK(e,t,{includeBoundTextElement:!0}).forEach(e=>{mO(e)&&$X(e,o)}),{elements:a,appState:{...t,currentItemFontSize:1===s.size?[...s][0]:i??t.currentItemFontSize},captureUpdate:bY}};kG({name:"changeStrokeColor",label:"labels.stroke",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemStrokeColor&&{elements:n8(e,t,e=>IW(e.type)?LK(e,{strokeColor:n.currentItemStrokeColor}):e,!0)},appState:{...t,...n},captureUpdate:n.currentItemStrokeColor?bY:yY}),PanelComponent:({elements:t,appState:n,updateData:r,appProps:i})=>e.jsxs(e.Fragment,{children:[e.jsx("h3",{"aria-hidden":"true",children:y6("labels.stroke")}),e.jsx(I3,{topPicks:fA,palette:bA,type:"elementStroke",label:y6("labels.stroke"),color:r8(t,n,e=>e.strokeColor,!0,n.currentItemStrokeColor),onChange:e=>r({currentItemStrokeColor:e}),elements:t,appState:n,updateData:r})]})}),kG({name:"changeBackgroundColor",label:"labels.changeBackground",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemBackgroundColor&&{elements:n8(e,t,e=>LK(e,{backgroundColor:n.currentItemBackgroundColor}))},appState:{...t,...n},captureUpdate:n.currentItemBackgroundColor?bY:yY}),PanelComponent:({elements:t,appState:n,updateData:r,appProps:i})=>e.jsxs(e.Fragment,{children:[e.jsx("h3",{"aria-hidden":"true",children:y6("labels.background")}),e.jsx(I3,{topPicks:mA,palette:UA,type:"elementBackground",label:y6("labels.background"),color:r8(t,n,e=>e.backgroundColor,!0,n.currentItemBackgroundColor),onChange:e=>r({currentItemBackgroundColor:e}),elements:t,appState:n,updateData:r})]})}),kG({name:"changeFillStyle",label:"labels.fill",trackEvent:!1,perform:(e,t,n,r)=>(Z6("element","changeFillStyle",`${n} (${r.device.editor.isMobile?"mobile":"desktop"})`),{elements:n8(e,t,e=>LK(e,{fillStyle:n})),appState:{...t,currentItemFillStyle:n},captureUpdate:bY}),PanelComponent:({elements:t,appState:n,updateData:r})=>{let i=MK(t,n),s=i.length>0&&i.every(e=>"zigzag"===e.fillStyle);return e.jsxs("fieldset",{children:[e.jsx("legend",{children:y6("labels.fill")}),e.jsx(Q6,{type:"button",options:[{value:"hachure",text:`${y6(s?"labels.zigzag":"labels.hachure")} (${SL("Alt-Click")})`,icon:s?Dz:Lz,active:!!s||void 0,testId:"fill-hachure"},{value:"cross-hatch",text:y6("labels.crossHatch"),icon:Oz,testId:"fill-cross-hatch"},{value:"solid",text:y6("labels.solid"),icon:Fz,testId:"fill-solid"}],value:r8(t,n,e=>e.fillStyle,e=>e.hasOwnProperty("fillStyle"),e=>e?null:n.currentItemFillStyle),onClick:(e,t)=>{let n=t.altKey&&"hachure"===e&&i.every(e=>"hachure"===e.fillStyle)?"zigzag":e;r(n)}})]})}}),kG({name:"changeStrokeWidth",label:"labels.strokeWidth",trackEvent:!1,perform:(e,t,n)=>({elements:n8(e,t,e=>LK(e,{strokeWidth:n})),appState:{...t,currentItemStrokeWidth:n},captureUpdate:bY}),PanelComponent:({elements:t,appState:n,updateData:r})=>e.jsxs("fieldset",{children:[e.jsx("legend",{children:y6("labels.strokeWidth")}),e.jsx(Q6,{group:"stroke-width",options:[{value:NN,text:y6("labels.thin"),icon:zz,testId:"strokeWidth-thin"},{value:DN,text:y6("labels.bold"),icon:Bz,testId:"strokeWidth-bold"},{value:LN,text:y6("labels.extraBold"),icon:Hz,testId:"strokeWidth-extraBold"}],value:r8(t,n,e=>e.strokeWidth,e=>e.hasOwnProperty("strokeWidth"),e=>e?null:n.currentItemStrokeWidth),onChange:e=>r(e)})]})}),kG({name:"changeSloppiness",label:"labels.sloppiness",trackEvent:!1,perform:(e,t,n)=>({elements:n8(e,t,e=>LK(e,{seed:DG(),roughness:n})),appState:{...t,currentItemRoughness:n},captureUpdate:bY}),PanelComponent:({elements:t,appState:n,updateData:r})=>e.jsxs("fieldset",{children:[e.jsx("legend",{children:y6("labels.sloppiness")}),e.jsx(Q6,{group:"sloppiness",options:[{value:0,text:y6("labels.architect"),icon:Xz},{value:1,text:y6("labels.artist"),icon:Vz},{value:2,text:y6("labels.cartoonist"),icon:Gz}],value:r8(t,n,e=>e.roughness,e=>e.hasOwnProperty("roughness"),e=>e?null:n.currentItemRoughness),onChange:e=>r(e)})]})}),kG({name:"changeStrokeStyle",label:"labels.strokeStyle",trackEvent:!1,perform:(e,t,n)=>({elements:n8(e,t,e=>LK(e,{strokeStyle:n})),appState:{...t,currentItemStrokeStyle:n},captureUpdate:bY}),PanelComponent:({elements:t,appState:n,updateData:r})=>e.jsxs("fieldset",{children:[e.jsx("legend",{children:y6("labels.strokeStyle")}),e.jsx(Q6,{group:"strokeStyle",options:[{value:"solid",text:y6("labels.strokeStyle_solid"),icon:zz},{value:"dashed",text:y6("labels.strokeStyle_dashed"),icon:$z},{value:"dotted",text:y6("labels.strokeStyle_dotted"),icon:Wz}],value:r8(t,n,e=>e.strokeStyle,e=>e.hasOwnProperty("strokeStyle"),e=>e?null:n.currentItemStrokeStyle),onChange:e=>r(e)})]})}),kG({name:"changeOpacity",label:"labels.opacity",trackEvent:!1,perform:(e,t,n)=>({elements:n8(e,t,e=>LK(e,{opacity:n}),!0),appState:{...t,currentItemOpacity:n},captureUpdate:bY}),PanelComponent:({elements:t,appState:n,updateData:r})=>e.jsx(t8,{updateData:r,elements:t,appState:n,testId:"opacity"})}),kG({name:"changeFontSize",label:"labels.fontSize",trackEvent:!1,perform:(e,t,n,r)=>i8(e,t,r,()=>n,n),PanelComponent:({elements:t,appState:n,updateData:r,app:i})=>e.jsxs("fieldset",{children:[e.jsx("legend",{children:y6("labels.fontSize")}),e.jsx(Q6,{group:"font-size",options:[{value:16,text:y6("labels.small"),icon:lB,testId:"fontSize-small"},{value:20,text:y6("labels.medium"),icon:cB,testId:"fontSize-medium"},{value:28,text:y6("labels.large"),icon:dB,testId:"fontSize-large"},{value:36,text:y6("labels.veryLarge"),icon:uB,testId:"fontSize-veryLarge"}],value:r8(t,n,e=>{if(mO(e))return e.fontSize;let t=dG(e,i.scene.getNonDeletedElementsMap());return t?t.fontSize:null},e=>mO(e)||null!==dG(e,i.scene.getNonDeletedElementsMap()),e=>e?null:n.currentItemFontSize||nN),onChange:e=>r(e)})]})});var s8=kG({name:"decreaseFontSize",label:"labels.decreaseFontSize",icon:hB,trackEvent:!1,perform:(e,t,n,r)=>i8(e,t,r,e=>Math.round(1/1.1*e.fontSize)),keyTest:e=>e[$$.CTRL_OR_CMD]&&e.shiftKey&&(e.key===$$.CHEVRON_LEFT||e.key===$$.COMMA)}),a8=kG({name:"increaseFontSize",label:"labels.increaseFontSize",icon:hB,trackEvent:!1,perform:(e,t,n,r)=>i8(e,t,r,e=>Math.round(1.1*e.fontSize)),keyTest:e=>e[$$.CTRL_OR_CMD]&&e.shiftKey&&(e.key===$$.CHEVRON_RIGHT||e.key===$$.PERIOD)});kG({name:"changeFontFamily",label:"labels.fontFamily",trackEvent:!1,perform:(e,t,n,r)=>{let{cachedElements:i,resetAll:s,resetContainers:a,...o}=n;if(s)return{elements:n8(e,t,e=>{let t=i?.get(e.id);return t?LK(e,{...t}):e},!0),appState:{...t,...o},captureUpdate:UY};let l,{currentItemFontFamily:c,currentHoveredFontFamily:d}=n,u=yY,h=!1;if(c)l=c,u=bY;else if(d){l=d,u=yY;let n=MK(e,t,{includeBoundTextElement:!0}).filter(e=>mO(e));if(n.length>200)h=!0;else{let e=0,t=0;for(;e<n.length&&t<5e3;){let r=n[e];t+=r?.originalText.length||0,e++}t>5e3&&(h=!0)}}let p={appState:{...t,...o},captureUpdate:u};if(l&&!h){let n=new Map,s=new Set,o=!1,u=Array.from(KH.loadedFontsCache.values()),h=Object.entries(qA).find(([e,t])=>t===l)?.[0];d&&h&&u.some(e=>e.startsWith(h))&&(o=!0),Object.assign(p,{elements:n8(e,t,e=>{if(mO(e)&&(e.fontFamily!==l||c)){let t=LK(e,{fontFamily:l,lineHeight:JH(l)}),c=i?.get(e.containerId||"")||{},d=r.scene.getContainerElement(e);return a&&d&&c&&DK(d,{...c},!1),o||(s=new Set([...s,...Array.from(t.originalText)])),n.set(t,d),t}return e},!0)});let f=`10px ${mL({fontFamily:l})}`,m=Array.from(s.values()).join();if(o||window.document.fonts.check(f,m))for(let[e,t]of n)sG(e,t,r.scene.getNonDeletedElementsMap(),!1);else window.document.fonts.load(f,m).then(e=>{for(let[t,i]of n){let e=r.scene.getElement(t.id),n=i?r.scene.getElement(i.id):null;e&&sG(e,n,r.scene.getNonDeletedElementsMap(),!1)}r.fonts.onLoaded(e)})}return p},PanelComponent:({elements:t,appState:n,app:r,updateData:i})=>{let s=vt.useRef(new Map),a=vt.useRef(null),[o,l]=vt.useState({}),c=vt.useRef(!0),d=vt.useMemo(()=>{let e=(e,t)=>r8(e,n,e=>{if(mO(e))return e.fontFamily;let n=dG(e,t);return n?n.fontFamily:null},e=>mO(e)||null!==dG(e,t),e=>e?null:n.currentItemFontFamily||rN);return"fontFamily"===o.openPopup&&"fontFamily"===n.openPopup?e(Array.from(s.current?.values()??[]),s.current):o.openPopup||"fontFamily"===n.openPopup?a.current:e(t,r.scene.getNonDeletedElementsMap())},[o.openPopup,n,t,r.scene]);return vt.useEffect(()=>{a.current=d},[d]),vt.useEffect(()=>{Object.keys(o).length&&(i(o),l({}))},[o]),vt.useEffect(()=>(c.current=!1,()=>{c.current=!0}),[]),e.jsxs("fieldset",{children:[e.jsx("legend",{children:y6("labels.fontFamily")}),e.jsx(e8,{isOpened:"fontFamily"===n.openPopup,selectedFontFamily:d,hoveredFontFamily:n.currentHoveredFontFamily,onSelect:e=>{l({openPopup:null,currentHoveredFontFamily:null,currentItemFontFamily:e}),s.current.clear()},onHover:e=>{l({currentHoveredFontFamily:e,cachedElements:new Map(s.current),resetContainers:!0})},onLeave:()=>{l({currentHoveredFontFamily:null,cachedElements:new Map(s.current),resetAll:!0})},onPopupChange:e=>{if(e){s.current.clear();let{editingTextElement:e}=n;if("text"===e?.type){let t=r.scene.getElement(e.id);s.current.set(e.id,LK(t||e,{},!0))}else{let e=MK(t,n,{includeBoundTextElement:!0});for(let t of e)s.current.set(t.id,LK(t,{},!0))}l({openPopup:"fontFamily"})}else{let e={openPopup:null,currentHoveredFontFamily:null,cachedElements:new Map(s.current),resetAll:!0};c.current?i({...o,...e}):l(e),s.current.clear()}}})]})}}),kG({name:"changeTextAlign",label:"Change text alignment",trackEvent:!1,perform:(e,t,n,r)=>({elements:n8(e,t,e=>{if(mO(e)){let t=LK(e,{textAlign:n});return sG(t,r.scene.getContainerElement(e),r.scene.getNonDeletedElementsMap()),t}return e},!0),appState:{...t,currentItemTextAlign:n},captureUpdate:bY}),PanelComponent:({elements:t,appState:n,updateData:r,app:i})=>{let s=i.scene.getNonDeletedElementsMap();return e.jsxs("fieldset",{children:[e.jsx("legend",{children:y6("labels.textAlign")}),e.jsx(Q6,{group:"text-align",options:[{value:"left",text:y6("labels.left"),icon:gB,testId:"align-left"},{value:"center",text:y6("labels.center"),icon:bB,testId:"align-horizontal-center"},{value:"right",text:y6("labels.right"),icon:UB,testId:"align-right"}],value:r8(t,n,e=>{if(mO(e))return e.textAlign;let t=dG(e,s);return t?t.textAlign:null},e=>mO(e)||null!==dG(e,s),e=>e?null:n.currentItemTextAlign),onChange:e=>r(e)})]})}}),kG({name:"changeVerticalAlign",label:"Change vertical alignment",trackEvent:{category:"element"},perform:(e,t,n,r)=>({elements:n8(e,t,e=>{if(mO(e)){let t=LK(e,{verticalAlign:n});return sG(t,r.scene.getContainerElement(e),r.scene.getNonDeletedElementsMap()),t}return e},!0),appState:{...t},captureUpdate:bY}),PanelComponent:({elements:t,appState:n,updateData:r,app:i})=>e.jsx("fieldset",{children:e.jsx(Q6,{group:"text-align",options:[{value:EN,text:y6("labels.alignTop"),icon:e.jsx(yB,{theme:n.theme}),testId:"align-top"},{value:kN,text:y6("labels.centerVertically"),icon:e.jsx(vB,{theme:n.theme}),testId:"align-middle"},{value:CN,text:y6("labels.alignBottom"),icon:e.jsx(xB,{theme:n.theme}),testId:"align-bottom"}],value:r8(t,n,e=>{if(mO(e)&&e.containerId)return e.verticalAlign;let t=dG(e,i.scene.getNonDeletedElementsMap());return t?t.verticalAlign:null},e=>mO(e)||null!==dG(e,i.scene.getNonDeletedElementsMap()),e=>e?null:kN),onChange:e=>r(e)})})}),kG({name:"changeRoundness",label:"Change edge roundness",trackEvent:!1,perform:(e,t,n)=>({elements:n8(e,t,e=>SO(e)?e:LK(e,{roundness:"round"===n?{type:PO(e.type)?PN:RN}:null})),appState:{...t,currentItemRoundness:n},captureUpdate:bY}),PanelComponent:({elements:t,appState:n,updateData:r})=>{let i=IK(wQ(t),n).some(e=>e.roundness?.type===TN);return e.jsxs("fieldset",{children:[e.jsx("legend",{children:y6("labels.edges")}),e.jsx(Q6,{group:"edges",options:[{value:"sharp",text:y6("labels.sharp"),icon:Yz},{value:"round",text:y6("labels.round"),icon:qz}],value:r8(t,n,e=>i?null:e.roundness?"round":"sharp",e=>!wO(e)&&e.hasOwnProperty("roundness"),e=>e?null:n.currentItemRoundness),onChange:e=>r(e)})]})}});var o8=t=>[{value:null,text:y6("labels.arrowhead_none"),keyBinding:"q",icon:Zz},{value:"arrow",text:y6("labels.arrowhead_arrow"),keyBinding:"w",icon:e.jsx(Kz,{flip:t})},{value:"triangle",text:y6("labels.arrowhead_triangle"),icon:e.jsx(tB,{flip:t}),keyBinding:"e"},{value:"triangle_outline",text:y6("labels.arrowhead_triangle_outline"),icon:e.jsx(nB,{flip:t}),keyBinding:"r"},{value:"circle",text:y6("labels.arrowhead_circle"),keyBinding:"a",icon:e.jsx(Qz,{flip:t})},{value:"circle_outline",text:y6("labels.arrowhead_circle_outline"),keyBinding:"s",icon:e.jsx(Jz,{flip:t})},{value:"diamond",text:y6("labels.arrowhead_diamond"),icon:e.jsx(rB,{flip:t}),keyBinding:"d"},{value:"diamond_outline",text:y6("labels.arrowhead_diamond_outline"),icon:e.jsx(iB,{flip:t}),keyBinding:"f"},{value:"bar",text:y6("labels.arrowhead_bar"),keyBinding:"z",icon:e.jsx(eB,{flip:t})},{value:"crowfoot_one",text:y6("labels.arrowhead_crowfoot_one"),icon:e.jsx(aB,{flip:t}),keyBinding:"c"},{value:"crowfoot_many",text:y6("labels.arrowhead_crowfoot_many"),icon:e.jsx(sB,{flip:t}),keyBinding:"x"},{value:"crowfoot_one_or_many",text:y6("labels.arrowhead_crowfoot_one_or_many"),icon:e.jsx(oB,{flip:t}),keyBinding:"v"}];kG({name:"changeArrowhead",label:"Change arrowheads",trackEvent:!1,perform:(e,t,n)=>({elements:n8(e,t,e=>{if(vO(e)){let{position:t,type:r}=n;if("start"===t)return LK(e,{startArrowhead:r});if("end"===t)return LK(e,{endArrowhead:r})}return e}),appState:{...t,["start"===n.position?"currentItemStartArrowhead":"currentItemEndArrowhead"]:n.type},captureUpdate:bY}),PanelComponent:({elements:t,appState:n,updateData:r})=>{let i=b6().rtl;return e.jsxs("fieldset",{children:[e.jsx("legend",{children:y6("labels.arrowheads")}),e.jsxs("div",{className:"iconSelectList buttonList",children:[e.jsx(A3,{label:"arrowhead_start",options:o8(!i),value:r8(t,n,e=>vO(e)&&AW(e.type)?e.startArrowhead:n.currentItemStartArrowhead,!0,n.currentItemStartArrowhead),onChange:e=>r({position:"start",type:e}),numberOfOptionsToAlwaysShow:4}),e.jsx(A3,{label:"arrowhead_end",group:"arrowheads",options:o8(!!i),value:r8(t,n,e=>vO(e)&&AW(e.type)?e.endArrowhead:n.currentItemEndArrowhead,!0,n.currentItemEndArrowhead),onChange:e=>r({position:"end",type:e}),numberOfOptionsToAlwaysShow:4})]})]})}}),kG({name:"changeArrowType",label:"Change arrow types",trackEvent:!1,perform:(e,t,n,r)=>{let i=n8(e,t,i=>{if(!wO(i))return i;let s=LK(i,{roundness:n===aD?{type:RN}:null,elbowed:n===oD,points:n===oD||i.elbowed?[i.points[0],i.points[i.points.length-1]]:i.points});if(SO(s)){let n=r.scene.getNonDeletedElementsMap();r.dismissLinearEditor();let i=eG.getPointAtIndexGlobalCoordinates(s,0,n),a=eG.getPointAtIndexGlobalCoordinates(s,-1,n),o=!s.startBinding&&FX(IL(i),e,n,t.zoom,!1,!0),l=!s.endBinding&&FX(IL(a),e,n,t.zoom,!1,!0),c=o||s.startBinding&&n.get(s.startBinding.elementId),d=l||s.endBinding&&n.get(s.endBinding.elementId),u=o?GX(s,o,"start"):i,h=l?GX(s,l,"end"):a;o&&AX(s,o,"start",n),l&&AX(s,l,"end",n),DK(s,{points:[u,h].map(e=>PD(e[0]-s.x,e[1]-s.y)),...c&&s.startBinding?{startBinding:{...s.startBinding,...KX(s,c,"start")}}:{},...d&&s.endBinding?{endBinding:{...s.endBinding,...KX(s,d,"end")}}:{}}),eG.updateEditorMidPointsCache(s,n,r.state)}return s}),s={...t,currentItemArrowType:n},a=t.selectedLinearElement?.elementId;if(a){let e=i.find(e=>e.id===a);e&&(s.selectedLinearElement=new eG(e))}return{elements:i,appState:s,captureUpdate:bY}},PanelComponent:({elements:t,appState:n,updateData:r})=>e.jsxs("fieldset",{children:[e.jsx("legend",{children:y6("labels.arrowtypes")}),e.jsx(Q6,{group:"arrowtypes",options:[{value:sD,text:y6("labels.arrowtype_sharp"),icon:oH,testId:"sharp-arrow"},{value:aD,text:y6("labels.arrowtype_round"),icon:cH,testId:"round-arrow"},{value:oD,text:y6("labels.arrowtype_elbowed"),icon:lH,testId:"elbow-arrow"}],value:r8(t,n,e=>wO(e)?e.elbowed?oD:e.roundness?aD:sD:null,e=>wO(e),e=>e?null:n.currentItemArrowType),onChange:e=>r(e)})]})});var l8=({viewportX:e,viewportY:t,nextZoom:n},r)=>{let i=e-r.offsetLeft,s=t-r.offsetTop,a=r.zoom.value;return{scrollX:r.scrollX+(i-i/a)+-(i-i/n),scrollY:r.scrollY+(s-s/a)+-(s-s/n),zoom:{value:n}}},c8=()=>{let e=document.querySelector(".excalidraw-tooltip");if(e)return e;let t=document.createElement("div");return document.body.appendChild(t),t.classList.add("excalidraw-tooltip"),t},d8=(e,t,n="bottom")=>{let r,i=e.getBoundingClientRect(),s=window.innerWidth,a=window.innerHeight,o=t.left+t.width/2-i.width/2;o<0?o=5:o+i.width>=s&&(o=s-i.width-5),"bottom"===n?(r=t.top+t.height+5,r+i.height>=a&&(r=t.top-i.height-5)):(r=t.top-i.height-5,r<0&&(r=t.top+t.height+5)),Object.assign(e.style,{top:`${r}px`,left:`${o}px`})},u8=({children:t,label:n,long:r=!1,style:i,disabled:s})=>(vt.useEffect(()=>()=>c8().classList.remove("excalidraw-tooltip--visible"),[]),s?null:e.jsx("div",{className:"excalidraw-tooltip-wrapper",onPointerEnter:e=>((e,t,n,r)=>{t.classList.add("excalidraw-tooltip--visible"),t.style.minWidth=r?"50ch":"10ch",t.style.maxWidth=r?"50ch":"15ch",t.textContent=n;let i=e.getBoundingClientRect();d8(t,i)})(e.currentTarget,c8(),n,r),onPointerLeave:()=>c8().classList.remove("excalidraw-tooltip--visible"),style:i,children:t}));kG({name:"changeViewBackgroundColor",label:"labels.canvasBackground",paletteName:"Change canvas background color",trackEvent:!1,predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.changeViewBackgroundColor&&!t.viewModeEnabled,perform:(e,t,n)=>({appState:{...t,...n},captureUpdate:n.viewBackgroundColor?bY:yY}),PanelComponent:({elements:t,appState:n,updateData:r,appProps:i})=>e.jsx(I3,{palette:null,topPicks:gA,label:y6("labels.canvasBackground"),type:"canvasBackground",color:n.viewBackgroundColor,onChange:e=>r({viewBackgroundColor:e}),"data-testid":"canvas-background-picker",elements:t,appState:n,updateData:r})});var h8=kG({name:"clearCanvas",label:"labels.clearCanvas",paletteName:"Clear canvas",icon:VF,trackEvent:{category:"canvas"},predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.clearCanvas&&!t.viewModeEnabled&&"elementLinkSelector"!==t.openDialog?.name,perform:(e,t,n,r)=>(r.imageCache.clear(),{elements:e.map(e=>LK(e,{isDeleted:!0})),appState:{...hD(),files:{},theme:t.theme,penMode:t.penMode,penDetected:t.penDetected,exportBackground:t.exportBackground,exportEmbedScene:t.exportEmbedScene,gridSize:t.gridSize,gridStep:t.gridStep,gridModeEnabled:t.gridModeEnabled,stats:t.stats,pasteDialog:t.pasteDialog,activeTool:"image"===t.activeTool.type?{...t.activeTool,type:"selection"}:t.activeTool},captureUpdate:bY})}),p8=kG({name:"zoomIn",label:"buttons.zoomIn",viewMode:!0,icon:$F,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>({appState:{...t,...l8({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:yV(t.zoom.value+mN)},t),userToFollow:null},captureUpdate:yY}),PanelComponent:({updateData:t,appState:n})=>e.jsx(k6,{type:"button",className:"zoom-in-button zoom-button",icon:$F,title:`${y6("buttons.zoomIn")} — ${SL("CtrlOrCmd++")}`,"aria-label":y6("buttons.zoomIn"),disabled:n.zoom.value>=30,onClick:()=>{t(null)}}),keyTest:e=>(e.code===w$||e.code===E$)&&(e[$$.CTRL_OR_CMD]||e.shiftKey)}),f8=kG({name:"zoomOut",label:"buttons.zoomOut",icon:WF,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>({appState:{...t,...l8({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:yV(t.zoom.value-mN)},t),userToFollow:null},captureUpdate:yY}),PanelComponent:({updateData:t,appState:n})=>e.jsx(k6,{type:"button",className:"zoom-out-button zoom-button",icon:WF,title:`${y6("buttons.zoomOut")} — ${SL("CtrlOrCmd+-")}`,"aria-label":y6("buttons.zoomOut"),disabled:n.zoom.value<=.1,onClick:()=>{t(null)}}),keyTest:e=>(e.code===S$||e.code===k$)&&(e[$$.CTRL_OR_CMD]||e.shiftKey)}),m8=kG({name:"resetZoom",label:"buttons.resetZoom",icon:XF,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>({appState:{...t,...l8({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:yV(1)},t),userToFollow:null},captureUpdate:yY}),PanelComponent:({updateData:t,appState:n})=>e.jsx(u8,{label:y6("buttons.resetZoom"),style:{height:"100%"},children:e.jsxs(k6,{type:"button",className:"reset-zoom-button zoom-button",title:y6("buttons.resetZoom"),"aria-label":y6("buttons.resetZoom"),onClick:()=>{t(null)},children:[(100*n.zoom.value).toFixed(0),"%"]})}),keyTest:e=>(e.code===P$||e.code===C$)&&(e[$$.CTRL_OR_CMD]||e.shiftKey)}),g8=({bounds:e,appState:t,canvasOffsets:n,fitToViewport:r=!1,viewportZoomFactor:i=1,minZoom:s=-1/0,maxZoom:a=1/0})=>{i=bD(i,.1,30);let o,[l,c,d,u]=e,h=(l+d)/2,p=(c+u)/2,f=n?.left??0,m=n?.top??0,g=n?.right??0,b=n?.bottom??0,U=t.width-f-g,y=t.height-m-b;if(r){let e=d-l,t=u-c;o=Math.min(U/e,y/t)*i}else o=((e,t,n=1)=>{let[r,i,s,a]=e,o=s-r,l=t.width/o,c=a-i,d=t.height/c,u=Math.min(l,d)*bD(n,.1,1);return Math.min(u,1)})(e,{width:U,height:y},i);let x=yV(bD(((e,t,n="round")=>{let r=1/t;return Math[n](e*r)/r})(o,mN,"floor"),s,a)),v=bV({scenePoint:{x:h,y:p},viewportDimensions:{width:t.width,height:t.height},offsets:n,zoom:{value:x}});return{appState:{...t,scrollX:v.scrollX,scrollY:v.scrollY,zoom:{value:x}},captureUpdate:yY}},b8=({canvasOffsets:e,targetElements:t,appState:n,fitToViewport:r,viewportZoomFactor:i,minZoom:s,maxZoom:a})=>{let o=gX(wQ(t));return g8({canvasOffsets:e,bounds:o,appState:n,fitToViewport:r,viewportZoomFactor:i,minZoom:s,maxZoom:a})};kG({name:"zoomToFitSelectionInViewport",label:"labels.zoomToFitViewport",icon:QB,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return b8({targetElements:i.length?i:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:r.getEditorUIOffsets()})},keyTest:e=>e.code===j$&&e.shiftKey&&!e.altKey&&!e[$$.CTRL_OR_CMD]}),kG({name:"zoomToFitSelection",label:"helpDialog.zoomToSelection",icon:QB,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return b8({targetElements:i.length?i:e,appState:{...t,userToFollow:null},fitToViewport:!0,canvasOffsets:r.getEditorUIOffsets()})},keyTest:e=>e.code===T$&&e.shiftKey&&!e.altKey&&!e[$$.CTRL_OR_CMD]}),kG({name:"zoomToFit",label:"helpDialog.zoomToFit",icon:QB,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>b8({targetElements:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:r.getEditorUIOffsets()}),keyTest:e=>e.code===I$&&e.shiftKey&&!e.altKey&&!e[$$.CTRL_OR_CMD]});var U8=kG({name:"toggleTheme",label:(e,t)=>t.theme===eN?"buttons.lightMode":"buttons.darkMode",keywords:["toggle","dark","light","mode","theme"],icon:e=>e.theme===JA?qF:ZF,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n)=>({appState:{...t,theme:n||(t.theme===JA?eN:JA)},captureUpdate:yY}),keyTest:e=>e.altKey&&e.shiftKey&&e.code===D$,predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.toggleTheme});kG({name:"toggleEraserTool",label:"toolBar.eraser",trackEvent:{category:"toolbar"},perform:(e,t)=>{let n;return n=mD(t)?wL(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):wL(t,{type:"eraser",lastActiveToolBeforeEraser:t.activeTool}),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:n},captureUpdate:bY}},keyTest:e=>e.key===$$.E});var y8=kG({name:"toggleHandTool",label:"toolBar.hand",paletteName:"Toggle hand tool",trackEvent:{category:"toolbar"},icon:EB,viewMode:!1,perform:(e,t,n,r)=>{let i;return gD(t)?i=wL(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):(i=wL(t,{type:"hand",lastActiveToolBeforeEraser:t.activeTool}),TG(r.interactiveCanvas,TA)),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:i},captureUpdate:bY}},keyTest:e=>!e.altKey&&!e[$$.CTRL_OR_CMD]&&e.key===$$.H}),x8=kG({name:"finalize",label:"",trackEvent:!1,perform:(e,t,n,r)=>{let{interactiveCanvas:i,focusContainer:s,scene:a}=r,o=a.getNonDeletedElementsMap();if(t.editingLinearElement){let{elementId:n,startBindingElement:r,endBindingElement:i}=t.editingLinearElement,s=eG.getElement(n,o);if(s)return kO(s)&&_X(s,r,i,o,a),{elements:s.points.length<2||FK(s)?e.filter(e=>e.id!==s.id):void 0,appState:{...t,cursorButton:"up",editingLinearElement:null},captureUpdate:bY}}let l=e,c=t.pendingImageElementId&&a.getElement(t.pendingImageElementId);c&&DK(c,{isDeleted:!0},!1),window.document.activeElement instanceof HTMLElement&&s();let d,u=t.multiElement?t.multiElement:"freedraw"===t.newElement?.type?t.newElement:null;if(u){if("freedraw"!==u.type&&"touch"!==t.lastPointerDownWith){let{points:e,lastCommittedPoint:t}=u;(!t||e[e.length-1]!==t)&&DK(u,{points:u.points.slice(0,-1)})}FK(u)&&(l=l.filter(e=>e.id!==u.id));let n=sW(u.points,t.zoom.value);if(("line"===u.type||"freedraw"===u.type)&&n){let e=u.points,t=e[0];DK(u,{points:e.map((n,r)=>r===e.length-1?PD(t[0],t[1]):n)})}if(kO(u)&&!n&&u.points.length>1){let[n,r]=eG.getPointAtIndexGlobalCoordinates(u,-1,DL(e));RX(u,t,{x:n,y:r},o,e)}}return(!t.activeTool.locked&&"freedraw"!==t.activeTool.type||!u)&&jG(i),d="eraser"===t.activeTool.type?wL(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):wL(t,{type:"selection"}),{elements:l,appState:{...t,cursorButton:"up",activeTool:(t.activeTool.locked||"freedraw"===t.activeTool.type)&&u?t.activeTool:d,activeEmbeddable:null,newElement:null,selectionElement:null,multiElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:u&&!t.activeTool.locked&&"freedraw"!==t.activeTool.type?{...t.selectedElementIds,[u.id]:!0}:t.selectedElementIds,selectedLinearElement:u&&vO(u)?new eG(u):t.selectedLinearElement,pendingImageElementId:null},captureUpdate:bY}},keyTest:(e,t)=>e.key===$$.ESCAPE&&(null!==t.editingLinearElement||!t.newElement&&null===t.multiElement)||(e.key===$$.ESCAPE||e.key===$$.ENTER)&&null!==t.multiElement,PanelComponent:({appState:t,updateData:n,data:r})=>e.jsx(k6,{type:"button",icon:fz,title:y6("buttons.done"),"aria-label":y6("buttons.done"),onClick:n,visible:null!=t.multiElement,size:r?.size||"medium",style:{pointerEvents:"all"}})}),v8=t=>{let{id:n}=_re(),[r,i]=vt.useState(t.value);return e.jsxs("div",{className:"ProjectName",children:[e.jsx("label",{className:"ProjectName-label",htmlFor:"filename",children:`${t.label}:`}),e.jsx("input",{type:"text",className:"TextInput",onBlur:e=>{t.ignoreFocus||(e=>{let t=e.parentElement;for(;t;){if(t.tabIndex>-1)return void t.focus();t=t.parentElement}})(e.target);let n=e.target.value;n!==t.value&&t.onChange(n)},onKeyDown:e=>{if(e.key===$$.ENTER){if(e.preventDefault(),e.nativeEvent.isComposing||229===e.keyCode)return;e.currentTarget.blur()}},id:`${n}-filename`,value:r,onChange:e=>i(e.target.value)})]})},w8=t=>{let n=t.title||(t.value===eN?y6("buttons.lightMode"):y6("buttons.darkMode"));return e.jsx(k6,{type:"icon",icon:t.value===JA?S8.MOON:S8.SUN,title:n,"aria-label":n,onClick:()=>t.onChange(t.value===eN?JA:eN),"data-testid":"toggle-dark-mode"})},S8={SUN:e.jsx("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:e.jsx("path",{fill:"currentColor",d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"})}),MOON:e.jsx("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:e.jsx("path",{fill:"currentColor",d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"})})},E8=(e,{selectedElementIds:t},n)=>{e=wQ(e);let r=n&&_K(e,{selectedElementIds:t}),i=null,s=r?MK(e,{selectedElementIds:t},{includeBoundTextElement:!0}):e;return r&&(1===s.length&&UO(s[0])?(i=s[0],s=wK(e,i)):s.length>1&&(s=MK(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}))),{exportingFrame:i,exportedElements:ZL(s)}},k8=async(e,t,n,r,{exportBackground:i,exportPadding:s=yN,viewBackgroundColor:a,name:o=n.name||nD,fileHandle:l=null,exportingFrame:c=null})=>{if(0===t.length)throw new Error(y6("alerts.cannotExportEmptyCanvas"));if("svg"===e||"clipboard-svg"===e){let d=Mq(t,{exportBackground:i,exportWithDarkMode:n.exportWithDarkMode,viewBackgroundColor:a,exportPadding:s,exportScale:n.exportScale,exportEmbedScene:n.exportEmbedScene&&"svg"===e},r,{exportingFrame:c});if("svg"===e)return GY(d.then(e=>new Blob([e.outerHTML],{type:lN.svg})),{description:"Export to SVG",name:o,extension:n.exportEmbedScene?"excalidraw.svg":"svg",mimeTypes:[oN.svg],fileHandle:l});if("clipboard-svg"===e){let e=await d.then(e=>e.outerHTML);try{await HZ(e)}catch{throw new Error(y6("errors.copyToSystemClipboardFailed"))}return}}let d=Cq(t,n,r,{exportBackground:i,viewBackgroundColor:a,exportPadding:s,exportingFrame:c});if("png"===e){let e=PQ(d);return n.exportEmbedScene&&(e=e.then(e=>Pt(async()=>{const{encodePngMetadata:e}=await Promise.resolve().then(()=>Noe);return{encodePngMetadata:e}},void 0).then(({encodePngMetadata:i})=>i({blob:e,metadata:qY(t,n,r)})))),GY(e,{description:"Export to PNG",name:o,extension:n.exportEmbedScene?"excalidraw.png":"png",mimeTypes:[oN.png],fileHandle:l})}if("clipboard"!==e)throw new Error("Unsupported export type");try{let e=PQ(d);await(async e=>{try{await navigator.clipboard.write([new window.ClipboardItem({[lN.png]:e})])}catch(n){if(!HL(e))throw n;await navigator.clipboard.write([new window.ClipboardItem({[lN.png]:await e})])}})(e)}catch(u){throw"CANVAS_POSSIBLY_TOO_BIG"===u.name?new Error(y6("canvasError.canvasTooBig")):wA&&"TypeError"===u.name?new Error(`${y6("alerts.couldNotCopyToClipboard")}\n\n${y6("hints.firefox_clipboard_write")}`):new Error(y6("alerts.couldNotCopyToClipboard"))}},C8=({children:t,checked:n,onChange:r,className:i})=>e.jsxs("div",{className:BP("Checkbox",i,{"is-checked":n}),onClick:e=>{r(!n,e),e.currentTarget.querySelector(".Checkbox-box").focus()},children:[e.jsx("button",{type:"button",className:"Checkbox-box",role:"checkbox","aria-checked":n,children:sz}),e.jsx("div",{className:"Checkbox-label",children:t})]}),_8=kG({name:"changeProjectName",label:"labels.fileTitle",trackEvent:!1,perform:(e,t,n)=>({appState:{...t,name:n},captureUpdate:yY}),PanelComponent:({appState:t,updateData:n,appProps:r,data:i,app:s})=>e.jsx(v8,{label:y6("labels.fileTitle"),value:s.getName(),onChange:e=>n(e),ignoreFocus:i?.ignoreFocus??!1})}),M8=kG({name:"changeExportScale",label:"imageExportDialog.scale",trackEvent:{category:"export",action:"scale"},perform:(e,t,n)=>({appState:{...t,exportScale:n},captureUpdate:yY}),PanelComponent:({elements:t,appState:n,updateData:r})=>{let i=wQ(t),s=_K(i,n)?MK(i,n):i;return e.jsx(e.Fragment,{children:UN.map(t=>{let[i,a]=((e,t,n)=>{let[,,r,i]=jq(e,t).map(e=>Math.trunc(e*n));return[r,i]})(s,yN,t),o=`${y6("imageExportDialog.label.scale")} ${t}x (${i}x${a})`;return e.jsx(k6,{size:"small",type:"radio",icon:`${t}x`,name:"export-canvas-scale",title:o,"aria-label":o,id:"export-canvas-scale",checked:t===n.exportScale,onChange:()=>r(t)},t)})})}}),I8=kG({name:"changeExportBackground",label:"imageExportDialog.label.withBackground",trackEvent:{category:"export",action:"toggleBackground"},perform:(e,t,n)=>({appState:{...t,exportBackground:n},captureUpdate:yY}),PanelComponent:({appState:t,updateData:n})=>e.jsx(C8,{checked:t.exportBackground,onChange:e=>n(e),children:y6("imageExportDialog.label.withBackground")})}),j8=kG({name:"changeExportEmbedScene",label:"imageExportDialog.tooltip.embedScene",trackEvent:{category:"export",action:"embedScene"},perform:(e,t,n)=>({appState:{...t,exportEmbedScene:n},captureUpdate:yY}),PanelComponent:({appState:t,updateData:n})=>e.jsxs(C8,{checked:t.exportEmbedScene,onChange:e=>n(e),children:[y6("imageExportDialog.label.embedScene"),e.jsx(u8,{label:y6("imageExportDialog.tooltip.embedScene"),long:!0,children:e.jsx("div",{className:"excalidraw-tooltip-icon",children:bz})})]})}),T8=kG({name:"saveToActiveFile",label:"buttons.save",icon:QF,trackEvent:{category:"export"},predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.saveToActiveFile&&!!t.fileHandle&&!t.viewModeEnabled,perform:async(e,t,n,r)=>{let i=!!t.fileHandle;try{let{fileHandle:n}=_Q(t.fileHandle)?await(async(e,t,n,r)=>{let{exportBackground:i,viewBackgroundColor:s,fileHandle:a}=t,o=CQ(a);if(!a||!(e=>"png"===e||"svg"===e)(o))throw new Error("fileHandle should exist and should be of type svg or png when resaving");t={...t,exportEmbedScene:!0};let{exportedElements:l,exportingFrame:c}=E8(e,t,!1);return await k8(o,l,t,n,{exportBackground:i,viewBackgroundColor:s,name:r,fileHandle:a,exportingFrame:c}),{fileHandle:a}})(e,t,r.files,r.getName()):await ZY(e,t,r.files,r.getName());return{captureUpdate:yY,appState:{...t,fileHandle:n,toast:i?{message:n?.name?y6("toast.fileSavedToFilename").replace("{filename}",`"${n.name}"`):y6("toast.fileSaved")}:null}}}catch(s){return{captureUpdate:yY}}},keyTest:e=>e.key===$$.S&&e[$$.CTRL_OR_CMD]&&!e.shiftKey}),R8=kG({name:"saveFileToDisk",label:"exportDialog.disk_title",icon:QF,viewMode:!0,trackEvent:{category:"export"},perform:async(e,t,n,r)=>{try{let{fileHandle:n}=await ZY(e,{...t,fileHandle:null},r.files,r.getName());return{captureUpdate:yY,appState:{...t,openDialog:null,fileHandle:n,toast:{message:y6("toast.fileSaved")}}}}catch(i){return{captureUpdate:yY}}},keyTest:e=>e.key===$$.S&&e.shiftKey&&e[$$.CTRL_OR_CMD],PanelComponent:({updateData:t})=>e.jsx(k6,{type:"button",icon:lz,title:y6("buttons.saveAs"),"aria-label":y6("buttons.saveAs"),showAriaLabel:Cre().editor.isMobile,hidden:!sA,onClick:()=>t(null),"data-testid":"save-as-button"})}),P8=kG({name:"loadScene",label:"buttons.load",trackEvent:{category:"export"},predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.loadScene&&!t.viewModeEnabled,perform:async(e,t,n,r)=>{try{let{elements:n,appState:r,files:i}=await(async(e,t)=>{let n=await VY({description:"Excalidraw files"});return TQ(await WQ(n),e,t,n.handle)})(t,e);return{elements:n,appState:r,files:i,captureUpdate:bY}}catch(i){return"AbortError"!==i?.name&&{elements:e,appState:{...t,errorMessage:i.message},files:r.files,captureUpdate:yY}}},keyTest:e=>e[$$.CTRL_OR_CMD]&&e.key===$$.O}),A8=kG({name:"exportWithDarkMode",label:"imageExportDialog.label.darkMode",trackEvent:{category:"export",action:"toggleTheme"},perform:(e,t,n)=>({appState:{...t,exportWithDarkMode:n},captureUpdate:yY}),PanelComponent:({appState:t,updateData:n})=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"-45px",marginBottom:"10px"},children:e.jsx(w8,{value:t.exportWithDarkMode?eN:JA,onChange:e=>{n(e===eN)},title:y6("imageExportDialog.label.darkMode")})})}),N8="{}",D8=kG({name:"copyStyles",label:"labels.copyStyles",icon:KB,trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=[],s=e.find(e=>t.selectedElementIds[e.id]);if(i.push(s),s&&TO(s)){let e=dG(s,r.scene.getNonDeletedElementsMap());i.push(e)}return s&&(N8=JSON.stringify(i)),{appState:{...t,toast:{message:y6("toast.copyStyles")}},captureUpdate:yY}},keyTest:e=>e[$$.CTRL_OR_CMD]&&e.altKey&&e.code===N$}),L8=kG({name:"pasteStyles",label:"labels.pasteStyles",icon:KB,trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=JSON.parse(N8),s=i[0],a=i[1];if(!IO(s))return{elements:e,captureUpdate:yY};let o=MK(e,t,{includeBoundTextElement:!0}),l=o.map(e=>e.id);return{elements:e.map(e=>{if(l.includes(e.id)){let t=s;if(mO(e)&&e.containerId&&(t=a),!t)return e;let n=LK(e,{backgroundColor:t?.backgroundColor,strokeWidth:t?.strokeWidth,strokeColor:t?.strokeColor,strokeStyle:t?.strokeStyle,fillStyle:t?.fillStyle,opacity:t?.opacity,roughness:t?.roughness,roundness:t.roundness?NO(t.roundness.type,e)?t.roundness:DO(e):null});if(mO(n)){let e=t.fontSize||nN,i=t.fontFamily||rN;n=LK(n,{fontSize:e,fontFamily:i,textAlign:t.textAlign||iN,lineHeight:t.lineHeight||JH(i)});let s=null;n.containerId&&(s=o.find(e=>mO(n)&&e.id===n.containerId)||null),sG(n,s,r.scene.getNonDeletedElementsMap())}return"arrow"===n.type&&wO(t)&&(n=LK(n,{startArrowhead:t.startArrowhead,endArrowhead:t.endArrowhead})),UO(e)&&(n=LK(n,{roundness:null,backgroundColor:"transparent"})),n}return e}),captureUpdate:bY}},keyTest:e=>e[$$.CTRL_OR_CMD]&&e.altKey&&e.code===O$});kG({name:"toggleCanvasMenu",label:"buttons.menu",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:"canvas"===t.openMenu?null:"canvas"},captureUpdate:yY}),PanelComponent:({appState:t,updateData:n})=>e.jsx(k6,{type:"button",icon:KF,"aria-label":y6("buttons.menu"),onClick:n,selected:"canvas"===t.openMenu})}),kG({name:"toggleEditMenu",label:"buttons.edit",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:"shape"===t.openMenu?null:"shape"},captureUpdate:yY}),PanelComponent:({elements:t,appState:n,updateData:r})=>e.jsx(k6,{visible:yQ(n,wQ(t)),type:"button",icon:dz,"aria-label":y6("buttons.edit"),onClick:r,selected:"shape"===n.openMenu})});var O8=kG({name:"toggleShortcuts",label:"welcomeScreen.defaults.helpHint",icon:ez,viewMode:!0,trackEvent:{category:"menu",action:"toggleHelpDialog"},perform:(e,t,n,{focusContainer:r})=>("help"===t.openDialog?.name&&r(),{appState:{...t,openDialog:"help"===t.openDialog?.name?null:{name:"help"}},captureUpdate:yY}),keyTest:e=>e.key===$$.QUESTION_MARK}),F8=(e,t,n)=>{let r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});return r.length>=2&&!(e=>{if(e.length>=2){let t=e[0].groupIds;for(let n of t)if(e.reduce((e,t)=>e&&IV(t,n),!0))return!0}return!1})(r)&&!SK(r)},z8=kG({name:"group",label:"labels.group",icon:t=>e.jsx(Az,{theme:t.theme}),trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=lK(r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}));if(i.length<2)return{appState:t,elements:e,captureUpdate:yY};let s=CV(t);if(1===s.length){let n=s[0],r=new Set(jV(e,n).map(e=>e.id)),a=new Set(i.map(e=>e.id));if(new Set([...Array.from(r),...Array.from(a)]).size===r.size)return{appState:t,elements:e,captureUpdate:yY}}let a=[...e];new Set(i.map(e=>e.frameId)).size>1&&(e=>{let t=new Map;for(let n of e){let r=UO(n)?n.id:n.frameId;r&&!t.has(r)&&t.set(r,aK(e,r))}return t})(i).forEach((e,t)=>{pK(e,r.scene.getNonDeletedElementsMap())});let o=LG(),l=DL(i);a=a.map(e=>l.get(e.id)?LK(e,{groupIds:TV(e.groupIds,o,t.editingGroupId)}):e);let c=jV(a,o),d=c[c.length-1],u=a.lastIndexOf(d),h=a.slice(u+1),p=a.slice(0,u).filter(e=>!IV(e,o)),f=rY([...p,...c,...h],DL(c));return{appState:{...t,...wV(o,{...t,selectedGroupIds:{}},wQ(a))},elements:f,captureUpdate:bY}},predicate:(e,t,n,r)=>F8(0,t,r),keyTest:e=>!e.shiftKey&&e[$$.CTRL_OR_CMD]&&e.key===$$.G,PanelComponent:({elements:t,appState:n,updateData:r,app:i})=>e.jsx(k6,{hidden:!F8(0,n,i),type:"button",icon:e.jsx(Az,{theme:n.theme}),onClick:()=>r(null),title:`${y6("labels.group")} — ${SL("CtrlOrCmd+G")}`,"aria-label":y6("labels.group"),visible:_K(wQ(t),n)})}),B8=kG({name:"ungroup",label:"labels.ungroup",icon:t=>e.jsx(Nz,{theme:t.theme}),trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=CV(t),s=DL(e);if(0===i.length)return{appState:t,elements:e,captureUpdate:yY};let a=[...e],o=[];a=a.map(e=>{RO(e)&&o.push(e.id);let n=((e,t)=>e.filter(e=>!t[e]))(e.groupIds,t.selectedGroupIds);return n.length===e.groupIds.length?e:LK(e,{groupIds:n})});let l=SV(t,wQ(a),t,null),c=r.scene.getSelectedElements(t),d=new Set(c.filter(e=>e.frameId).map(e=>e.frameId));return oK(e).filter(e=>d.has(e.id)).forEach(e=>{e&&(a=mK(a,cK(a,e,t,s),e,r))}),l.selectedElementIds=Object.entries(l.selectedElementIds).reduce((e,[t,n])=>(n&&!o.includes(t)&&(e[t]=!0),e),{}),{appState:{...t,...l},elements:a,captureUpdate:bY}},keyTest:e=>e.shiftKey&&e[$$.CTRL_OR_CMD]&&e.key===$$.G.toUpperCase(),predicate:(e,t)=>CV(t).length>0,PanelComponent:({elements:t,appState:n,updateData:r})=>e.jsx(k6,{type:"button",hidden:0===CV(n).length,icon:e.jsx(Nz,{theme:n.theme}),onClick:()=>r(null),title:`${y6("labels.ungroup")} — ${SL("CtrlOrCmd+Shift+G")}`,"aria-label":y6("labels.ungroup"),visible:_K(wQ(t),n)})}),H8=(e,t,n,r,i,s,a)=>{e.beginPath(),e.moveTo(t+s,n),e.lineTo(t+r-s,n),e.quadraticCurveTo(t+r,n,t+r,n+s),e.lineTo(t+r,n+i-s),e.quadraticCurveTo(t+r,n+i,t+r-s,n+i),e.lineTo(t+s,n+i),e.quadraticCurveTo(t,n+i,t,n+i-s),e.lineTo(t,n+s),e.quadraticCurveTo(t,n,t+s,n),e.closePath(),e.fill(),a&&(e.strokeStyle=a),e.stroke()};var $8=(e,t)=>`hsl(${Math.abs(function(e){let t=0;if(0===e.length)return t;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n);return t}(t?.id||e))%37*10}, 100%, 83%)`,W8=({color:t,onClick:n,name:r,src:i,className:s})=>{let a=(e=>{let t=e?.trim()?.codePointAt(0);return(t?String.fromCodePoint(t):"?").toUpperCase()})(r),[o,l]=vt.useState(!1),c=!o&&i,d=c?void 0:{background:t};return e.jsx("div",{className:BP("Avatar",s),style:d,onClick:n,children:c?e.jsx("img",{className:"Avatar-img",src:i,alt:a,referrerPolicy:"no-referrer",onError:()=>l(!0)}):a})};kG({name:"goToCollaborator",label:"Go to a collaborator",viewMode:!0,trackEvent:{category:"collab"},perform:(e,t,n)=>!n.socketId||t.userToFollow?.socketId===n.socketId||n.isCurrentUser?{appState:{...t,userToFollow:null},captureUpdate:yY}:{appState:{...t,userToFollow:{socketId:n.socketId,username:n.username||""},openMenu:"canvas"===t.openMenu?null:t.openMenu},captureUpdate:yY},PanelComponent:({updateData:t,data:n,appState:r})=>{let{socketId:i,collaborator:s,withName:a,isBeingFollowed:o}=n,l=$8(i,s),c=BP({"is-followed":o,"is-current-user":!0===s.isCurrentUser,"is-speaking":s.isSpeaking,"is-in-call":s.isInCall,"is-muted":s.isMuted}),d=s.isInCall?s.isSpeaking?e.jsxs("div",{className:"UserList__collaborator-status-icon-speaking-indicator",title:y6("userList.hint.isSpeaking"),children:[e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{})]}):s.isMuted?e.jsx("div",{className:"UserList__collaborator-status-icon-microphone-muted",title:y6("userList.hint.micMuted"),children:XB}):e.jsx("div",{title:y6("userList.hint.inCall"),children:WB}):null;return a?e.jsxs("div",{className:`dropdown-menu-item dropdown-menu-item-base UserList__collaborator ${c}`,style:{"--avatar-size":"1.5rem"},onClick:()=>t(s),children:[e.jsx(W8,{color:l,onClick:()=>{},name:s.username||"",src:s.avatarUrl,className:c}),e.jsx("div",{className:"UserList__collaborator-name",children:s.username}),e.jsxs("div",{className:"UserList__collaborator-status-icons","aria-hidden":!0,children:[o&&e.jsx("div",{className:"UserList__collaborator-status-icon-is-followed",title:y6("userList.hint.followStatus"),children:FB}),d]})]}):e.jsxs("div",{className:`UserList__collaborator UserList__collaborator--avatar-only ${c}`,children:[e.jsx(W8,{color:l,onClick:()=>{t(s)},name:s.username||"",src:s.avatarUrl,className:c}),d&&e.jsx("div",{className:"UserList__collaborator-status-icon",children:d})]})}});var X8=kG({name:"addToLibrary",trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});for(let s of $N)if(i.some(e=>e.type===s))return{captureUpdate:yY,appState:{...t,errorMessage:y6(`errors.libraryElementTypeError.${s}`)}};return r.library.getLatestLibrary().then(e=>r.library.setLibrary([{id:LG(),status:"unpublished",elements:i.map(KG),created:Date.now()},...e])).then(()=>({captureUpdate:yY,appState:{...t,toast:{message:y6("toast.addedToLibrary")}}})).catch(e=>({captureUpdate:yY,appState:{...t,errorMessage:e.message}}))},label:"labels.addToLibrary"}),V8=(e,t,{axis:n,position:r})=>{let i=xX(e),[s,a]="x"===n?["minX","maxX"]:["minY","maxY"],o={x:0,y:0};return"start"===r?{...o,[n]:t[s]-i[s]}:"end"===r?{...o,[n]:t[a]-i[a]}:{...o,[n]:(t[s]+t[a])/2-(i[s]+i[a])/2}},G8=(e,t)=>{let n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(e=>UO(e))},Y8=(e,t,n,r)=>{let i=((e,t,n,r)=>{let i=RV(e,t),s=xX(e);return i.flatMap(e=>{let t=V8(e,s,n);return e.map(n=>{let i=DK(n,{x:n.x+t.x,y:n.y+t.y});return $X(n,r.getNonDeletedElementsMap(),{simultaneouslyUpdated:e}),i})})})(n.scene.getSelectedElements(t),DL(e),r,n.scene),s=DL(i);return gK(e.map(e=>s.get(e.id)||e),t,n)};kG({name:"alignTop",label:"labels.alignTop",icon:Ez,trackEvent:{category:"element"},predicate:(e,t,n,r)=>G8(t,r),perform:(e,t,n,r)=>({appState:t,elements:Y8(e,t,r,{position:"start",axis:"y"}),captureUpdate:bY}),keyTest:e=>e[$$.CTRL_OR_CMD]&&e.shiftKey&&e.key===$$.ARROW_UP,PanelComponent:({elements:t,appState:n,updateData:r,app:i})=>e.jsx(k6,{hidden:!G8(n,i),type:"button",icon:Ez,onClick:()=>r(null),title:`${y6("labels.alignTop")} — ${SL("CtrlOrCmd+Shift+Up")}`,"aria-label":y6("labels.alignTop"),visible:_K(wQ(t),n)})}),kG({name:"alignBottom",label:"labels.alignBottom",icon:kz,trackEvent:{category:"element"},predicate:(e,t,n,r)=>G8(t,r),perform:(e,t,n,r)=>({appState:t,elements:Y8(e,t,r,{position:"end",axis:"y"}),captureUpdate:bY}),keyTest:e=>e[$$.CTRL_OR_CMD]&&e.shiftKey&&e.key===$$.ARROW_DOWN,PanelComponent:({elements:t,appState:n,updateData:r,app:i})=>e.jsx(k6,{hidden:!G8(n,i),type:"button",icon:kz,onClick:()=>r(null),title:`${y6("labels.alignBottom")} — ${SL("CtrlOrCmd+Shift+Down")}`,"aria-label":y6("labels.alignBottom"),visible:_K(wQ(t),n)})}),kG({name:"alignLeft",label:"labels.alignLeft",icon:Cz,trackEvent:{category:"element"},predicate:(e,t,n,r)=>G8(t,r),perform:(e,t,n,r)=>({appState:t,elements:Y8(e,t,r,{position:"start",axis:"x"}),captureUpdate:bY}),keyTest:e=>e[$$.CTRL_OR_CMD]&&e.shiftKey&&e.key===$$.ARROW_LEFT,PanelComponent:({elements:t,appState:n,updateData:r,app:i})=>e.jsx(k6,{hidden:!G8(n,i),type:"button",icon:Cz,onClick:()=>r(null),title:`${y6("labels.alignLeft")} — ${SL("CtrlOrCmd+Shift+Left")}`,"aria-label":y6("labels.alignLeft"),visible:_K(wQ(t),n)})}),kG({name:"alignRight",label:"labels.alignRight",icon:_z,trackEvent:{category:"element"},predicate:(e,t,n,r)=>G8(t,r),perform:(e,t,n,r)=>({appState:t,elements:Y8(e,t,r,{position:"end",axis:"x"}),captureUpdate:bY}),keyTest:e=>e[$$.CTRL_OR_CMD]&&e.shiftKey&&e.key===$$.ARROW_RIGHT,PanelComponent:({elements:t,appState:n,updateData:r,app:i})=>e.jsx(k6,{hidden:!G8(n,i),type:"button",icon:_z,onClick:()=>r(null),title:`${y6("labels.alignRight")} — ${SL("CtrlOrCmd+Shift+Right")}`,"aria-label":y6("labels.alignRight"),visible:_K(wQ(t),n)})}),kG({name:"alignVerticallyCentered",label:"labels.centerVertically",icon:jz,trackEvent:{category:"element"},predicate:(e,t,n,r)=>G8(t,r),perform:(e,t,n,r)=>({appState:t,elements:Y8(e,t,r,{position:"center",axis:"y"}),captureUpdate:bY}),PanelComponent:({elements:t,appState:n,updateData:r,app:i})=>e.jsx(k6,{hidden:!G8(n,i),type:"button",icon:jz,onClick:()=>r(null),title:y6("labels.centerVertically"),"aria-label":y6("labels.centerVertically"),visible:_K(wQ(t),n)})}),kG({name:"alignHorizontallyCentered",label:"labels.centerHorizontally",icon:Tz,trackEvent:{category:"element"},predicate:(e,t,n,r)=>G8(t,r),perform:(e,t,n,r)=>({appState:t,elements:Y8(e,t,r,{position:"center",axis:"x"}),captureUpdate:bY}),PanelComponent:({elements:t,appState:n,updateData:r,app:i})=>e.jsx(k6,{hidden:!G8(n,i),type:"button",icon:Tz,onClick:()=>r(null),title:y6("labels.centerHorizontally"),"aria-label":y6("labels.centerHorizontally"),visible:_K(wQ(t),n)})});var q8=(e,t)=>{let n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(e=>UO(e))},Z8=(e,t,n,r)=>{let i=((e,t,n)=>{let[r,i,s,a]="x"===n.axis?["minX","midX","maxX","width"]:["minY","midY","maxY","height"],o=xX(e),l=RV(e,t).map(e=>[e,xX(e)]).sort((e,t)=>e[1][i]-t[1][i]),c=0;for(let h of l)c+=h[1][a];let d=(o[a]-c)/(l.length-1);if(d<0){let e=l.findIndex(e=>e[1][r]===o[r]),t=l.findIndex(e=>e[1][s]===o[s]),a=(l[t][1][i]-l[e][1][i])/(l.length-1),c=l[e][1][i];return l.flatMap(([r,s],o)=>{let l={x:0,y:0};return o!==e&&o!==t&&(c+=a,l[n.axis]=c-s[i]),r.map(e=>LK(e,{x:e.x+l.x,y:e.y+l.y}))})}let u=o[r];return l.flatMap(([e,t])=>{let i={x:0,y:0};return i[n.axis]=u-t[r],u+=d,u+=t[a],e.map(e=>LK(e,{x:e.x+i.x,y:e.y+i.y}))})})(n.scene.getSelectedElements(t),n.scene.getNonDeletedElementsMap(),r),s=DL(i);return gK(e.map(e=>s.get(e.id)||e),t,n)};kG({name:"distributeHorizontally",label:"labels.distributeHorizontally",trackEvent:{category:"element"},perform:(e,t,n,r)=>({appState:t,elements:Z8(e,t,r,{axis:"x"}),captureUpdate:bY}),keyTest:e=>!e[$$.CTRL_OR_CMD]&&e.altKey&&e.code===L$,PanelComponent:({elements:t,appState:n,updateData:r,app:i})=>e.jsx(k6,{hidden:!q8(n,i),type:"button",icon:Mz,onClick:()=>r(null),title:`${y6("labels.distributeHorizontally")} — ${SL("Alt+H")}`,"aria-label":y6("labels.distributeHorizontally"),visible:_K(wQ(t),n)})}),kG({name:"distributeVertically",label:"labels.distributeVertically",trackEvent:{category:"element"},perform:(e,t,n,r)=>({appState:t,elements:Z8(e,t,r,{axis:"y"}),captureUpdate:bY}),keyTest:e=>!e[$$.CTRL_OR_CMD]&&e.altKey&&e.code===O$,PanelComponent:({elements:t,appState:n,updateData:r,app:i})=>e.jsx(k6,{hidden:!q8(n,i),type:"button",icon:Iz,onClick:()=>r(null),title:`${y6("labels.distributeVertically")} — ${SL("Alt+V")}`,"aria-label":y6("labels.distributeVertically"),visible:_K(wQ(t),n)})});var K8=kG({name:"flipHorizontal",label:"labels.flipHorizontal",icon:ZB,trackEvent:{category:"element"},perform:(e,t,n,r)=>({elements:gK(J8(e,r.scene.getNonDeletedElementsMap(),t,"horizontal",r),t,r),appState:t,captureUpdate:bY}),keyTest:e=>e.shiftKey&&e.code===L$}),Q8=kG({name:"flipVertical",label:"labels.flipVertical",icon:qB,trackEvent:{category:"element"},perform:(e,t,n,r)=>({elements:gK(J8(e,r.scene.getNonDeletedElementsMap(),t,"vertical",r),t,r),appState:t,captureUpdate:bY}),keyTest:e=>e.shiftKey&&e.code===O$&&!e[$$.CTRL_OR_CMD]}),J8=(e,t,n,r,i)=>{let s=MK(wQ(e),n,{includeBoundTextElement:!0,includeElementsInFrames:!0}),a=e7(s,t,n,r,i),o=DL(a);return e.map(e=>o.get(e.id)||e)},e7=(e,t,n,r,i)=>{if(e.every(e=>wO(e)&&(e.startBinding||e.endBinding)))return e.map(e=>{let t=e;return LK(t,{startArrowhead:t.endArrowhead,endArrowhead:t.startArrowhead})});let{midX:s,midY:a}=xX(e);mQ(e,t,"nw",i.scene,new Map(Array.from(t.values()).map(e=>[e.id,KG(e)])),{flipByX:"horizontal"===r,flipByY:"vertical"===r,shouldResizeFromCenter:!0,shouldMaintainAspectRatio:!0}),jX(e.filter(vO),t,i.scene.getNonDeletedElements(),i.scene,CX(n),[],n.zoom);let{elbowArrows:o,otherElements:l}=e.reduce((e,t)=>SO(t)?{...e,elbowArrows:e.elbowArrows.concat(t)}:{...e,otherElements:e.otherElements.concat(t)},{elbowArrows:[],otherElements:[]}),{midX:c,midY:d}=xX(e),[u,h]=[s-c,a-d];return l.forEach(e=>DK(e,{x:e.x+u,y:e.y+h})),o.forEach(e=>DK(e,{x:e.x+u,y:e.y+h})),e},t7=kG({name:"copy",label:"labels.copy",icon:YF,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});try{await LZ(i,r.files,n)}catch(s){return{captureUpdate:yY,appState:{...t,errorMessage:s.message}}}return{captureUpdate:yY}},keyTest:void 0}),n7=kG({name:"paste",label:"labels.paste",trackEvent:{category:"element"},perform:async(e,t,n,r)=>{let i;try{i=await(async()=>{let e,n={};try{e=await(navigator.clipboard?.read())}catch(i){try{if(navigator.clipboard?.readText){let e=await(navigator.clipboard?.readText());if(e)return{[lN.text]:e}}}catch(r){if(!navigator.clipboard?.read){if("DataError"===r.name)return n;throw r}}throw i}for(let r of e)for(let e of r.types)if(qL(cN,e))try{if(e===lN.text||e===lN.html)n[e]=await(await r.getType(e)).text();else{if(!MQ(e))throw new MH(`Unsupported clipboard type: ${e}`);{let t=await r.getType(e),i=$Q(t,e,void 0);n[e]=i}}}catch(t){}return Object.keys(n).length,n})()}catch(s){return"AbortError"!==s.name&&"NotAllowedError"!==s.name&&(wA?{captureUpdate:yY,appState:{...t,errorMessage:y6("hints.firefox_clipboard_write")}}:{captureUpdate:yY,appState:{...t,errorMessage:y6("errors.asyncPasteFailedOnRead")}})}try{r.pasteFromClipboard((({types:e,files:t})=>{let n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});if(e)for(let[r,i]of Object.entries(e))if("string"==typeof i)try{if(n.clipboardData?.setData(r,i),n.clipboardData?.getData(r)!==i)throw new Error(`Failed to set "${r}" as clipboardData item`)}catch(s){throw new Error(s.message)}else(t=t||[]).push(i);if(t){let e=-1;for(let r of t){e++;try{if(n.clipboardData?.items.add(r),n.clipboardData?.files[e]!==r)throw new Error(`Failed to set file "${r.name}" as clipboardData item`)}catch(s){throw new Error(s.message)}}}return n})({types:i}))}catch(s){return{captureUpdate:yY,appState:{...t,errorMessage:y6("errors.asyncPasteFailedOnParse")}}}return{captureUpdate:yY}},keyTest:void 0}),r7=kG({name:"cut",label:"labels.cut",icon:_B,trackEvent:{category:"element"},perform:(e,t,n,r)=>(t7.perform(e,t,n,r),_6.perform(e,t,null,r)),keyTest:e=>e[$$.CTRL_OR_CMD]&&e.key===$$.X}),i7=kG({name:"copyAsSvg",label:"labels.copyAsSvg",icon:JB,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{if(!r.canvas)return{captureUpdate:yY};let{exportedElements:i,exportingFrame:s}=E8(e,t,!0);try{await k8("clipboard-svg",i,t,r.files,{...t,exportingFrame:s,name:r.getName()});let e=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});return{appState:{toast:{message:y6("toast.copyToClipboardAsSvg",{exportSelection:e.length?y6("toast.selection"):y6("toast.canvas"),exportColorScheme:t.exportWithDarkMode?y6("buttons.darkMode"):y6("buttons.lightMode")})}},captureUpdate:yY}}catch(a){return{appState:{errorMessage:a.message},captureUpdate:yY}}},predicate:e=>NZ&&e.length>0,keywords:["svg","clipboard","copy"]}),s7=kG({name:"copyAsPng",label:"labels.copyAsPng",icon:eH,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{if(!r.canvas)return{captureUpdate:yY};let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}),{exportedElements:s,exportingFrame:a}=E8(e,t,!0);try{return await k8("clipboard",s,t,r.files,{...t,exportingFrame:a,name:r.getName()}),{appState:{...t,toast:{message:y6("toast.copyToClipboardAsPng",{exportSelection:i.length?y6("toast.selection"):y6("toast.canvas"),exportColorScheme:t.exportWithDarkMode?y6("buttons.darkMode"):y6("buttons.lightMode")})}},captureUpdate:yY}}catch(o){return{appState:{...t,errorMessage:o.message},captureUpdate:yY}}},predicate:e=>DZ&&e.length>0,keyTest:e=>e.code===N$&&e.altKey&&e.shiftKey,keywords:["png","clipboard","copy"]}),a7=kG({name:"copyText",label:"labels.copyText",trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});try{HZ(((e,t="\n\n")=>e.reduce((e,t)=>(mO(t)&&e.push(t.text),e),[]).join(t))(i))}catch{throw new Error(y6("errors.copyToSystemClipboardFailed"))}return{captureUpdate:yY}},predicate:(e,t,n,r)=>NZ&&r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}).some(mO),keywords:["text","clipboard","copy"]}),o7=kG({name:"gridMode",icon:sH,keywords:["snap"],label:"labels.toggleGrid",viewMode:!0,trackEvent:{category:"canvas",predicate:e=>e.gridModeEnabled},perform(e,t){return{appState:{...t,gridModeEnabled:!this.checked(t),objectsSnapModeEnabled:!1},captureUpdate:yY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>void 0===n.gridModeEnabled,keyTest:e=>e[$$.CTRL_OR_CMD]&&e.code===R$}),l7=kG({name:"zenMode",label:"buttons.zenMode",icon:nH,paletteName:"Toggle zen mode",viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.zenModeEnabled},perform(e,t){return{appState:{...t,zenModeEnabled:!this.checked(t)},captureUpdate:yY}},checked:e=>e.zenModeEnabled,predicate:(e,t,n)=>typeof n.zenModeEnabled>"u",keyTest:e=>!e[$$.CTRL_OR_CMD]&&e.altKey&&e.code===F$}),c7=kG({name:"objectsSnapMode",label:"buttons.objectsSnapMode",icon:tH,viewMode:!1,trackEvent:{category:"canvas",predicate:e=>!e.objectsSnapModeEnabled},perform(e,t){return{appState:{...t,objectsSnapModeEnabled:!this.checked(t),gridModeEnabled:!1},captureUpdate:yY}},checked:e=>e.objectsSnapModeEnabled,predicate:(e,t,n)=>typeof n.objectsSnapModeEnabled>"u",keyTest:e=>!e[$$.CTRL_OR_CMD]&&e.altKey&&e.code===H$}),d7=kG({name:"stats",label:"stats.fullTitle",icon:YB,paletteName:"Toggle stats",viewMode:!0,trackEvent:{category:"menu"},keywords:["edit","attributes","customize"],perform(e,t){return{appState:{...t,stats:{...t.stats,open:!this.checked(t)}},captureUpdate:yY}},checked:e=>e.stats.open,keyTest:e=>!e[$$.CTRL_OR_CMD]&&e.altKey&&e.code===A$}),u7=kG({name:"unbindText",label:"labels.unbindText",trackEvent:{category:"element"},predicate:(e,t,n,r)=>r.scene.getSelectedElements(t).some(e=>TO(e)),perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t),s=r.scene.getNonDeletedElementsMap();return i.forEach(e=>{let t=dG(e,s);if(t){let{width:n,height:r}=OO(t.originalText,gL(t),t.lineHeight),i=(e=>nG[e]?.height??null)(e.id);iG(e.id);let{x:a,y:o}=lG(e,t,s);DK(t,{containerId:null,width:n,height:r,text:t.originalText,x:a,y:o}),DK(e,{boundElements:e.boundElements?.filter(e=>e.id!==t.id),height:i||e.height})}}),{elements:e,appState:t,captureUpdate:bY}}}),h7=kG({name:"bindText",label:"labels.bindText",trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);if(2===i.length){let e,t=mO(i[0])||mO(i[1]);if(MO(i[0])?e=i[0]:MO(i[1])&&(e=i[1]),t&&e&&null===dG(e,r.scene.getNonDeletedElementsMap()))return!0}return!1},perform:(e,t,n,r)=>{let i,s,a=r.scene.getSelectedElements(t);mO(a[0])&&MO(a[1])?(i=a[0],s=a[1]):(i=a[1],s=a[0]),DK(i,{containerId:s.id,verticalAlign:kN,textAlign:MN,autoResize:!0}),DK(s,{boundElements:(s.boundElements||[]).concat({type:"text",id:i.id})});let o=s.height;return sG(i,s,r.scene.getNonDeletedElementsMap()),rG(s.id,o),{elements:p7(e,s,i),appState:{...t,selectedElementIds:{[s.id]:!0}},captureUpdate:bY}}}),p7=(e,t,n)=>{let r=e.slice(),i=r.findIndex(e=>e.id===n.id);r.splice(i,1);let s=r.findIndex(e=>e.id===t.id);return r.splice(s+1,0,n),rY(r,DL([t,n])),r},f7=(e,t,n)=>{let r=e.slice(),i=r.findIndex(e=>e.id===t.id);r.splice(i,1);let s=r.findIndex(e=>e.id===n.id);return r.splice(s,0,t),rY(r,DL([t,n])),r},m7=kG({name:"wrapTextInContainer",label:"labels.createContainerFromText",trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t),s=i.every(e=>mO(e));return i.length>0&&s},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t),s=e.slice(),a={};for(let o of i)if(mO(o)){let e=FG({type:"rectangle",backgroundColor:t.currentItemBackgroundColor,boundElements:[...o.boundElements||[],{id:o.id,type:"text"}],angle:o.angle,fillStyle:t.currentItemFillStyle,strokeColor:t.currentItemStrokeColor,roughness:t.currentItemRoughness,strokeWidth:t.currentItemStrokeWidth,strokeStyle:t.currentItemStrokeStyle,roundness:"round"===t.currentItemRoundness?{type:PO("rectangle")?PN:RN}:null,opacity:100,locked:!1,x:o.x-5,y:o.y-5,width:UG(o.width,"rectangle"),height:UG(o.height,"rectangle"),groupIds:o.groupIds,frameId:o.frameId});if(o.boundElements?.length){let t=o.boundElements.filter(e=>"arrow"===e.type).map(e=>e.id);s.filter(e=>t.includes(e.id)).forEach(t=>{let n=t.startBinding,r=t.endBinding;n?.elementId===o.id&&(n={...n,elementId:e.id}),r?.elementId===o.id&&(r={...r,elementId:e.id}),(n||r)&&DK(t,{startBinding:n,endBinding:r},!1)})}DK(o,{containerId:e.id,verticalAlign:kN,boundElements:null,textAlign:MN,autoResize:!0},!1),sG(o,e,r.scene.getNonDeletedElementsMap()),s=f7([...s,e],e,o),a[e.id]=!0}return{elements:s,appState:{...t,selectedElementIds:a},captureUpdate:bY}}}),g7=!1,b7=new Map,U7=({element:t,elementsMap:n,setAppState:r,onLinkOpen:i,setToast:s,updateEmbedValidationStatus:a})=>{let o=Ire(),l=kre(),c=Cre(),d=t.link||"",[u,h]=vt.useState(d),p=vt.useRef(null),f="editor"===o.showHyperlinkPopup,m=vt.useCallback(()=>{if(!p.current)return;let e=vG(p.current.value)||null;if(!t.link&&e&&Z6("hyperlink","create"),hO(t)){if(o.activeEmbeddable?.element===t&&r({activeEmbeddable:null}),!e)return DK(t,{link:null}),void a(t,!1);if(HY(e,l.validateEmbeddable)){let{width:n,height:r}=t,i=FY(e);i?.error instanceof URIError&&s({message:y6("toast.unrecognizedLinkFormat"),closable:!0});let o=i?i.intrinsicSize.w/i.intrinsicSize.h:1,l=b7.get(t.id)!==t.link;DK(t,{...l?{width:"video"===i?.type?n>r?n:r*o:n,height:"video"===i?.type&&n>r?n/o:r}:{},link:e}),a(t,!0),b7.has(t.id)&&b7.delete(t.id)}else e&&s({message:y6("toast.unableToEmbed"),closable:!0}),t.link&&b7.set(t.id,t.link),DK(t,{link:e}),a(t,!1)}else DK(t,{link:e})},[t,s,l.validateEmbeddable,o.activeEmbeddable,r,a]);vt.useLayoutEffect(()=>()=>{m()},[m]),vt.useEffect(()=>{f&&p?.current&&!c.viewport.isMobile&&!c.isTouchScreen&&p.current.select()},[f,c.viewport.isMobile,c.isTouchScreen]),vt.useEffect(()=>{let e=null,i=i=>{f||(e&&clearTimeout(e),E7(t,n,o,PD(i.clientX,i.clientY))&&(e=window.setTimeout(()=>{r({showHyperlinkPopup:!1})},500)))};return window.addEventListener("pointermove",i,!1),()=>{window.removeEventListener("pointermove",i,!1),e&&clearTimeout(e)}},[o,t,f,r,n]);let g=vt.useCallback(()=>{Z6("hyperlink","delete"),DK(t,{link:null}),r({showHyperlinkPopup:!1})},[r,t]),{x:b,y:U}=y7(t,o,n);return o.contextMenu||o.selectedElementsAreBeingDragged||o.resizingElement||o.isRotating||o.openMenu||o.viewModeEnabled?null:e.jsxs("div",{className:"excalidraw-hyperlinkContainer",style:{top:`${U}px`,left:`${b}px`,width:380,padding:5},children:[f?e.jsx("input",{className:BP("excalidraw-hyperlinkContainer-input"),placeholder:y6("labels.link.hint"),ref:p,value:u,onChange:e=>h(e.target.value),autoFocus:!0,onKeyDown:e=>{e.stopPropagation(),e[$$.CTRL_OR_CMD]&&e.key===$$.K&&e.preventDefault(),(e.key===$$.ENTER||e.key===$$.ESCAPE)&&(m(),r({showHyperlinkPopup:"info"}))}}):t.link?e.jsx("a",{href:vG(t.link||""),className:"excalidraw-hyperlinkContainer-link",target:wG(t.link)?"_self":"_blank",onClick:e=>{if(t.link&&i){let n=zL("excalidraw-link",e.nativeEvent);i({...t,link:vG(t.link)},n),n.defaultPrevented&&e.preventDefault()}},rel:"noopener noreferrer",children:t.link}):e.jsx("div",{className:"excalidraw-hyperlinkContainer-link",children:y6("labels.link.empty")}),e.jsxs("div",{className:"excalidraw-hyperlinkContainer__buttons",children:[!f&&e.jsx(k6,{type:"button",title:y6("buttons.edit"),"aria-label":y6("buttons.edit"),label:y6("buttons.edit"),onClick:()=>{Z6("hyperlink","edit","popup-ui"),r({showHyperlinkPopup:"editor"})},className:"excalidraw-hyperlinkContainer--edit",icon:FF}),e.jsx(k6,{type:"button",title:y6("labels.linkToElement"),"aria-label":y6("labels.linkToElement"),label:y6("labels.linkToElement"),onClick:()=>{r({openDialog:{name:"elementLinkSelector",sourceElementId:t.id}})},icon:fH}),d&&!hO(t)&&e.jsx(k6,{type:"button",title:y6("buttons.remove"),"aria-label":y6("buttons.remove"),label:y6("buttons.remove"),onClick:g,className:"excalidraw-hyperlinkContainer--remove",icon:VF})]})]})},y7=(e,t,n)=>{let[r,i]=sX(e,n),{x:s,y:a}=kL({sceneX:r+e.width/2,sceneY:i},t);return{x:s-t.offsetLeft-190,y:a-t.offsetTop-85}},x7=(e,t)=>{let n=MK(e,t);return hO(n[0])?"labels.link.editEmbed":n[0]?.link?"labels.link.edit":"labels.link.create"},v7=null,w7=(e,t,n)=>{if(!e.link)return;let r=c8();r.classList.add("excalidraw-tooltip--visible"),r.style.maxWidth="20rem",r.textContent=fq(e.link)?y6("labels.link.goToElement"):e.link;let[i,s,a,o]=sX(e,n),[l,c,d,u]=sq([i,s,a,o],e.angle,t),h=kL({sceneX:l,sceneY:c},t);d8(r,{left:h.x,top:h.y,width:d,height:u},"top"),Z6("hyperlink","tooltip","link-icon"),g7=!0},S7=()=>{v7&&clearTimeout(v7),g7&&(g7=!1,c8().classList.remove("excalidraw-tooltip--visible"))},E7=(e,t,n,[r,i])=>{let{x:s,y:a}=EL({clientX:r,clientY:i},n),o=15/n.zoom.value;if(g$(s,a,e,t))return!1;let[l,c,d]=sX(e,t);if(s>=l&&s<=d&&a>=c-85&&a<=c)return!1;let{x:u,y:h}=y7(e,n,t);return!(r>=u-o&&r<=u+380+10+o&&i>=h-o&&i<=h+o+10+42)},k7=kG({name:"hyperlink",label:(e,t)=>x7(e,t),icon:az,perform:(e,t)=>"editor"!==t.showHyperlinkPopup&&{elements:e,appState:{...t,showHyperlinkPopup:"editor",openMenu:null},captureUpdate:bY},trackEvent:{category:"hyperlink",action:"click"},keyTest:e=>e[$$.CTRL_OR_CMD]&&e.key===$$.K,predicate:(e,t)=>1===MK(e,t).length,PanelComponent:({elements:t,appState:n,updateData:r})=>{let i=MK(t,n);return e.jsx(k6,{type:"button",icon:az,"aria-label":y6(x7(t,n)),title:`${hO(t[0])?y6("labels.link.labelEmbed"):y6("labels.link.label")} - ${SL("CtrlOrCmd+K")}`,onClick:()=>r(null),selected:1===i.length&&!!i[0].link})}}),C7=e=>e.every(e=>!e.locked),_7=kG({name:"toggleElementLock",label:(e,t,n)=>{let r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1});return 1!==r.length||UO(r[0])?C7(r)?"labels.elementLock.lockAll":"labels.elementLock.unlockAll":r[0].locked?"labels.elementLock.unlock":"labels.elementLock.lock"},icon:(e,t)=>{let n=MK(t,e);return C7(n)?MF:_F},trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return i.length>0&&!i.some(e=>e.locked&&e.frameId)},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});if(!i.length)return!1;let s=C7(i),a=DL(i);return{elements:e.map(e=>a.has(e.id)?LK(e,{locked:s}):e),appState:{...t,selectedLinearElement:s?null:t.selectedLinearElement},captureUpdate:bY}},keyTest:(e,t,n,r)=>e.key.toLocaleLowerCase()===$$.L&&e[$$.CTRL_OR_CMD]&&e.shiftKey&&r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}).length>0}),M7=kG({name:"unlockAllElements",paletteName:"Unlock all elements",trackEvent:{category:"canvas"},viewMode:!1,icon:_F,predicate:(e,t)=>0===MK(e,t).length&&e.some(e=>e.locked),perform:(e,t)=>{let n=e.filter(e=>e.locked);return{elements:e.map(e=>e.locked?LK(e,{locked:!1}):e),appState:{...t,selectedElementIds:Object.fromEntries(n.map(e=>[e.id,!0]))},captureUpdate:bY}},label:"labels.elementLock.unlockAll"}),I7=n=>{let{closeOnClickOutside:r=!0}=n,i=b3({className:"excalidraw-modal-container"}),s=vt.useRef(document.body.classList.contains("excalidraw-animations-disabled"));if(!i)return null;return t.createPortal(e.jsxs("div",{className:BP("Modal",n.className,{"animations-disabled":s.current}),role:"dialog","aria-modal":"true",onKeyDown:e=>{e.key===$$.ESCAPE&&(e.nativeEvent.stopImmediatePropagation(),e.stopPropagation(),n.onCloseRequest())},"aria-labelledby":n.labelledBy,"data-prevent-outside-click":!0,children:[e.jsx("div",{className:"Modal__background",onClick:r?n.onCloseRequest:void 0}),e.jsx("div",{className:"Modal__content",style:{"--max-width":`${n.maxWidth}px`},tabIndex:0,children:n.children})]}),i)},j7=FJ(new Map),T7=async e=>await XZ({elements:e,appState:{exportBackground:!1,viewBackgroundColor:hA.white},files:null,renderEmbeddables:!1,skipInliningFonts:!0}),R7=()=>{let[e]=i6(j7);return{clearLibraryCache:()=>e.clear(),deleteItemsFromLibraryCache:t=>{t.forEach(t=>e.delete(t))},svgCache:e}},P7=new fY,A7=FJ({status:"loaded",isInitialized:!1,libraryItems:[]}),N7=e=>ZL(e),D7=(e,t)=>!e.find(e=>e.elements.length===t.elements.length&&e.elements.every((e,n)=>e.id===t.elements[n].id&&e.versionNonce===t.elements[n].versionNonce)),L7=class{constructor(e){XM(this,"currLibraryItems",[]),XM(this,"prevLibraryItems",N7(this.currLibraryItems)),XM(this,"app"),XM(this,"updateQueue",[]),XM(this,"getLastUpdateTask",()=>this.updateQueue[this.updateQueue.length-1]),XM(this,"notifyListeners",()=>{if(this.updateQueue.length>0)c6.set(A7,e=>({status:"loading",libraryItems:this.currLibraryItems,isInitialized:e.isInitialized}));else{c6.set(A7,{status:"loaded",libraryItems:this.currLibraryItems,isInitialized:!0});try{let e=this.prevLibraryItems;this.prevLibraryItems=N7(this.currLibraryItems);let t=N7(this.currLibraryItems);this.app.props.onLibraryChange?.(t),P7.trigger(((e,t)=>{let n=DL(t),r={deletedItems:new Map,addedItems:new Map};for(let s of e)n.has(s.id)||r.deletedItems.set(s.id,s);let i=DL(e);for(let s of t)i.has(s.id)||r.addedItems.set(s.id,s);return r})(e,t),t)}catch(e){}}}),XM(this,"destroy",()=>{this.updateQueue=[],this.currLibraryItems=[],c6.set(j7,new Map)}),XM(this,"resetLibrary",()=>this.setLibrary([])),XM(this,"getLatestLibrary",()=>new Promise(async e=>{try{let t=await(this.getLastUpdateTask()||this.currLibraryItems);this.updateQueue.length>0?e(this.getLatestLibrary()):e(N7(t))}catch{return e(this.currLibraryItems)}})),XM(this,"updateLibrary",async({libraryItems:e,prompt:t=!1,merge:n=!1,openLibraryMenu:r=!1,defaultStatus:i="unpublished"})=>(r&&this.app.setState({openSidebar:{name:BN,tab:FN}}),this.setLibrary(()=>new Promise(async(r,s)=>{try{let a,o=await("function"!=typeof e||e instanceof Blob?e:e(this.currLibraryItems));a=o instanceof Blob?await(async(e,t="unpublished")=>RQ(await kQ(e),t))(o,i):UZ(o,i),!t||window.confirm(y6("alerts.confirmAddLibrary",{numShapes:a.length}))?(t&&this.app.focusContainer(),r(n?((e,t)=>{let n=[];for(let r of t)D7(e,r)&&n.push(r);return[...n,...e]})(this.currLibraryItems,a):a)):s(new SH)}catch(a){s(a)}})))),XM(this,"setLibrary",e=>{let t=new Promise(async(t,n)=>{try{await this.getLastUpdateTask(),"function"==typeof e&&(e=e(this.currLibraryItems)),this.currLibraryItems=N7(await e),t(this.currLibraryItems)}catch(r){n(r)}}).catch(e=>{if("AbortError"===e.name)return this.currLibraryItems;throw e}).finally(()=>{this.updateQueue=this.updateQueue.filter(e=>e!==t),this.notifyListeners()});return this.updateQueue.push(t),this.notifyListeners(),t}),this.app=e}},O7=e=>{let t=Math.ceil(Math.sqrt(e.length)),n=[],r=n=>e.slice(n*t,n*t+t).reduce((e,t)=>{let{height:n}=xX(t.elements);return Math.max(e,n)},0),i=n=>{let r=0,i=0,s=0;for(let a of e){if(r%t===0&&(i=0),i===n){let{width:e}=xX(a.elements);s=Math.max(s,e)}r++,i++}return s},s=0,a=0,o=0,l=0,c=0,d=0,u=0;for(let h of e){c&&c%t===0&&(a+=o+50,s=0,d=0,u++),0===d&&(o=r(u)),l=i(d);let{minX:e,minY:p,width:f,height:m}=xX(h.elements),g=(l-f)/2,b=(o-m)/2;n.push(...h.elements.map(t=>({...t,x:t.x+s+g-e,y:t.y+a+b-p}))),s+=l+50,c++,d++}return n},F7=class e{constructor(e){XM(this,"adapter"),this.adapter=e}static async getLibraryItems(t,n,r=!0){let i=()=>new Promise(async(e,r)=>{try{let r=await t.load({source:n});e(UZ(r?.libraryItems||[],"published"))}catch(i){r(i)}});return r?e.queue.push(i):i()}getLibraryItems(t){return e.getLibraryItems(this.adapter,t,!1)}};XM(F7,"queue",new class{constructor(){XM(this,"jobs",[]),XM(this,"running",!1)}tick(){if(this.running)return;let e=this.jobs.shift();e?(this.running=!0,e.promise.resolve(sO(e.jobFactory,...e.args).finally(()=>{this.running=!1,this.tick()}))):this.running=!1}push(e,...t){let n=(()=>{let e,t,n=new Promise((n,r)=>{e=n,t=r});return n.resolve=e,n.reject=t,n})();return this.jobs.push({jobFactory:e,promise:n,args:t}),this.tick(),n}}),XM(F7,"run",async(e,t)=>{let n=new F7(e);return F7.queue.push(()=>t(n))});var z7=vt.forwardRef(({children:t,gap:n,align:r,justifyContent:i,className:s,style:a},o)=>e.jsx("div",{className:BP("Stack Stack_horizontal",s),style:{"--gap":n,alignItems:r,justifyContent:i,...a},ref:o,children:t})),B7=vt.forwardRef(({children:t,gap:n,align:r,justifyContent:i,className:s,style:a},o)=>e.jsx("div",{className:BP("Stack Stack_vertical",s),style:{"--gap":n,justifyItems:r,justifyContent:i,...a},ref:o,children:t})),H7={Row:z7,Col:B7},$7=({theme:t,id:n,libraryReturnUrl:r})=>{let i=r||window.location.origin+window.location.pathname;return e.jsx("a",{className:"library-menu-browse-button",href:`${BM.VITE_APP_LIBRARY_URL}?target=${window.name||"_blank"}&referrer=${i}&useHash=true&token=${n}&theme=${t}&version=${SN}`,target:"_excalidraw_libraries",children:y6("labels.libraries")})},W7=({libraryReturnUrl:t,theme:n,id:r,style:i,children:s,className:a})=>e.jsxs("div",{className:BP("library-menu-control-buttons",a),style:i,children:[e.jsx($7,{id:r,libraryReturnUrl:t,theme:n}),s]}),X7=/({{[\w-]+}})|(<[\w-]+>)|(<\/[\w-]+>)/g,V7=/{{([\w-]+)}}/,G7=/<([\w-]+)>/,Y7=/<\/([\w-]+)>/,q7=({i18nKey:e,children:t,...n})=>{let{t:r}=v6();return St.createElement(St.Fragment,{},...((e,t)=>{let n=[{name:"",children:[]}];return e.split(X7).filter(Boolean).forEach(e=>{let r=e.match(G7),i=e.match(Y7),s=e.match(V7);if(null!==r){let e=r[1];t.hasOwnProperty(e)&&n.push({name:e,children:[]})}else if(null!==i){if(i[1]===n[n.length-1].name){let e=n.pop(),r=St.createElement(St.Fragment,{},...e.children),i=t[e.name];"function"==typeof i&&n[n.length-1].children.push(i(r))}}else if(null!==s){let e=s[1];t.hasOwnProperty(e)&&n[n.length-1].children.push(t[e])}else n[n.length-1].children.push(e)}),n.length,n[0].children})(r(e),n))},Z7=({label:t,onClick:n,className:r,children:i,actionType:s,type:a="button",isLoading:o,...l})=>{let c=s?`Dialog__action-button--${s}`:"";return e.jsxs("button",{className:BP("Dialog__action-button",c,r),type:a,"aria-label":t,onClick:n,...l,children:[i&&e.jsx("div",{style:o?{visibility:"hidden"}:{},children:i}),e.jsx("div",{style:o?{visibility:"hidden"}:{},children:t}),o&&e.jsx("div",{style:{position:"absolute",inset:0},children:e.jsx(w6,{})})]})},K7=n=>{let{onConfirm:r,onCancel:i,children:s,confirmText:a=y6("buttons.confirm"),cancelText:o=y6("buttons.cancel"),className:l="",...c}=n,d=jre(),u=s6(S4),{container:h}=_re();return e.jsxs(I4,{onCloseRequest:i,size:"small",...c,className:`confirm-dialog ${l}`,children:[s,e.jsxs("div",{className:"confirm-dialog-buttons",children:[e.jsx(Z7,{label:o,onClick:()=>{d({openMenu:null}),u(!1),t.flushSync(()=>{i()}),h?.focus()}}),e.jsx(Z7,{label:a,onClick:()=>{d({openMenu:null}),u(!1),t.flushSync(()=>{r()}),h?.focus()},actionType:"danger"})]})]})},Q7=class{static has(e){try{return!!window.localStorage.getItem(e)}catch(t){return!1}}static get(e){try{let t=window.localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return null}}};XM(Q7,"set",(e,t)=>{try{return window.localStorage.setItem(e,JSON.stringify(t)),!0}catch(cA){return!1}}),XM(Q7,"delete",e=>{try{window.localStorage.removeItem(e)}catch(t){}});var J7=async e=>{let t=Math.round(8),n=Math.max(Math.round(2),2),r=((e,t)=>{if(!e.length||t<1)return[];let n=0,r=0,i=Array(Math.ceil(e.length/t));for(;n<e.length;)i[r++]=e.slice(n,n+=t);return i})(e,6),i=document.createElement("canvas");i.width=128*r[0].length+(r[0].length+1)*(2*t)-2*t,i.height=128*r.length+(r.length+1)*(2*t)-2*t;let s=i.getContext("2d");s.fillStyle=aR.white,s.fillRect(0,0,i.width,i.height);for(let[a,o]of e.entries()){let e=await WZ({elements:o.elements,files:null,maxWidthOrHeight:128}),{width:r,height:i}=e,l=Math.floor(a/6)*(128+2*t),c=a%6*(128+2*t);s.drawImage(e,c+(128-r)/2+t,l+(128-i)/2+t),s.lineWidth=n,s.strokeStyle=aR.gray[4],s.strokeRect(c+t/2,l+t/2,128+t,128+t)}return await OQ(new File([await PQ(i)],"preview",{type:lN.png}),{outputType:lN.jpg,maxWidthOrHeight:5e3})},e4=({libItem:t,appState:n,index:r,onChange:i,onRemove:s})=>{let a=vt.useRef(null),o=vt.useRef(null);return vt.useEffect(()=>{let e=a.current;e&&(async()=>{let r=await XZ({elements:t.elements,appState:{...n,viewBackgroundColor:aR.white,exportBackground:!0},files:null,skipInliningFonts:!0});e.innerHTML=r.outerHTML})()},[t.elements,n]),e.jsxs("div",{className:"single-library-item",children:["published"===t.status&&e.jsx("span",{className:"single-library-item-status",children:y6("labels.statusPublished")}),e.jsx("div",{ref:a,className:"single-library-item__svg"}),e.jsx(k6,{"aria-label":y6("buttons.remove"),type:"button",icon:Pz,className:"single-library-item--remove",onClick:s.bind(null,t.id),title:y6("buttons.remove")}),e.jsxs("div",{style:{display:"flex",margin:"0.8rem 0",width:"100%",fontSize:"14px",fontWeight:500,flexDirection:"column"},children:[e.jsxs("label",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"0.5em 0"},children:[e.jsx("span",{style:{fontWeight:500,color:aR.gray[6]},children:y6("publishDialog.itemName")}),e.jsx("span",{"aria-hidden":"true",className:"required",children:"*"})]}),e.jsx("input",{type:"text",ref:o,style:{width:"80%",padding:"0.2rem"},defaultValue:t.name,placeholder:"Item name",onChange:e=>{i(e.target.value,r)}})]}),e.jsx("span",{className:"error",children:t.error})]})]})},t4=({onClose:t,libraryItems:n,appState:r,onSuccess:i,onError:s,updateItemsInStorage:a,onRemove:o})=>{let[l,c]=vt.useState({authorName:"",githubHandle:"",name:"",description:"",twitterHandle:"",website:""}),[d,u]=vt.useState(!1);vt.useEffect(()=>{let e=Q7.get(tD);e&&c(e)},[]);let[h,p]=vt.useState(n.slice());vt.useEffect(()=>{p(n.slice())},[n]);let f=e=>{c({...l,[e.target.name]:e.target.value})},m=vt.useCallback(()=>{a(h),Q7.set(tD,l),t()},[h,t,a,l]),g=!!n.length,b=n.some(e=>"published"===e.status);return e.jsx(I4,{onCloseRequest:m,title:y6("publishDialog.title"),className:"publish-library",children:g?e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),u(!0);let t=[],n=!1;if(h.forEach(e=>{let r="";e.name||(r=y6("publishDialog.errors.required"),n=!0),t.push({...e,error:r})}),n)return p(t),void u(!1);let r=await J7(h),a={type:pN.excalidrawLibrary,version:SN,source:fN,libraryItems:h},o=JSON.stringify(a,null,2),c=new Blob([o],{type:"application/json"}),d=new FormData;d.append("excalidrawLib",c),d.append("previewImage",r),d.append("previewImageType",r.type),d.append("title",l.name),d.append("authorName",l.authorName),d.append("githubHandle",l.githubHandle),d.append("name",l.name),d.append("description",l.description),d.append("twitterHandle",l.twitterHandle),d.append("website",l.website),fetch(`${BM.VITE_APP_LIBRARY_BACKEND}/submit`,{method:"post",body:d}).then(e=>e.ok?e.json().then(({url:e})=>{Q7.delete(tD),i({url:e,authorName:l.authorName,items:h})}):e.json().catch(()=>{throw new Error(e.statusText||"something went wrong")}).then(t=>{throw new Error(t.message||e.statusText||"something went wrong")}),e=>{s(e),u(!1)}).catch(e=>{s(e),u(!1)})},children:[e.jsx("div",{className:"publish-library-note",children:e.jsx(q7,{i18nKey:"publishDialog.noteDescription",link:t=>e.jsx("a",{href:"https://libraries.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:t})})}),e.jsx("span",{className:"publish-library-note",children:e.jsx(q7,{i18nKey:"publishDialog.noteGuidelines",link:t=>e.jsx("a",{href:"https://github.com/excalidraw/excalidraw-libraries#guidelines",target:"_blank",rel:"noopener noreferrer",children:t})})}),e.jsx("div",{className:"publish-library-note",children:y6("publishDialog.noteItems")}),b&&e.jsx("span",{className:"publish-library-note publish-library-warning",children:y6("publishDialog.republishWarning")}),(()=>{let t=[];return h.forEach((n,i)=>{t.push(e.jsx("div",{className:"single-library-item-wrapper",children:e.jsx(e4,{libItem:n,appState:r,index:i,onChange:(e,t)=>{let n=h.slice();n[t].name=e,p(n)},onRemove:o})},i))}),e.jsx("div",{className:"selected-library-items",children:t})})(),e.jsxs("div",{className:"publish-library__fields",children:[e.jsxs("label",{children:[e.jsxs("div",{children:[e.jsx("span",{children:y6("publishDialog.libraryName")}),e.jsx("span",{"aria-hidden":"true",className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"name",required:!0,value:l.name,onChange:f,placeholder:y6("publishDialog.placeholder.libraryName")})]}),e.jsxs("label",{style:{alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("span",{children:y6("publishDialog.libraryDesc")}),e.jsx("span",{"aria-hidden":"true",className:"required",children:"*"})]}),e.jsx("textarea",{name:"description",rows:4,required:!0,value:l.description,onChange:f,placeholder:y6("publishDialog.placeholder.libraryDesc")})]}),e.jsxs("label",{children:[e.jsxs("div",{children:[e.jsx("span",{children:y6("publishDialog.authorName")}),e.jsx("span",{"aria-hidden":"true",className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"authorName",required:!0,value:l.authorName,onChange:f,placeholder:y6("publishDialog.placeholder.authorName")})]}),e.jsxs("label",{children:[e.jsx("span",{children:y6("publishDialog.githubUsername")}),e.jsx("input",{type:"text",name:"githubHandle",value:l.githubHandle,onChange:f,placeholder:y6("publishDialog.placeholder.githubHandle")})]}),e.jsxs("label",{children:[e.jsx("span",{children:y6("publishDialog.twitterUsername")}),e.jsx("input",{type:"text",name:"twitterHandle",value:l.twitterHandle,onChange:f,placeholder:y6("publishDialog.placeholder.twitterHandle")})]}),e.jsxs("label",{children:[e.jsx("span",{children:y6("publishDialog.website")}),e.jsx("input",{type:"text",name:"website",pattern:"https?://.+",title:y6("publishDialog.errors.website"),value:l.website,onChange:f,placeholder:y6("publishDialog.placeholder.website")})]}),e.jsx("span",{className:"publish-library-note",children:e.jsx(q7,{i18nKey:"publishDialog.noteLicense",link:t=>e.jsx("a",{href:"https://github.com/excalidraw/excalidraw-libraries/blob/main/LICENSE",target:"_blank",rel:"noopener noreferrer",children:t})})})]}),e.jsxs("div",{className:"publish-library__buttons",children:[e.jsx(Z7,{label:y6("buttons.cancel"),onClick:m,"data-testid":"cancel-clear-canvas-button"}),e.jsx(Z7,{type:"submit",label:y6("buttons.submit"),actionType:"primary",isLoading:d})]})]}):e.jsx("p",{style:{padding:"1em",textAlign:"center",fontWeight:500},children:y6("publishDialog.atleastOneLibItem")})})},n4=({className:t="",children:n,onToggle:r,title:i,...s})=>{let a=BP(`dropdown-menu-button ${t}`,"zen-mode-transition",{"dropdown-menu-button--mobile":Cre().editor.isMobile}).trim();return e.jsx("button",{"data-prevent-outside-click":!0,className:a,onClick:r,type:"button","data-testid":"dropdown-menu-button",title:i,...s,children:n})},r4=n4;n4.displayName="DropdownMenuTrigger";var i4=()=>e.jsx("div",{style:{height:"1px",backgroundColor:"var(--default-border-color)",margin:".5rem 0"}}),s4=i4;i4.displayName="DropdownMenuSeparator";var a4=({children:t,onClickOutside:n,className:r="",onSelect:i,style:s})=>{let a=Cre(),o=vt.useRef(null),l=y3({onClickOutside:n});U3(o,()=>{l.onClickOutside?.()}),vt.useEffect(()=>{let e=e=>{e.key===$$.ESCAPE&&(e.stopImmediatePropagation(),l.onClickOutside?.())},t={capture:!0};return document.addEventListener("keydown",e,t),()=>{document.removeEventListener("keydown",e,t)}},[l]);let c=BP(`dropdown-menu ${r}`,{"dropdown-menu--mobile":a.editor.isMobile}).trim();return e.jsx(F3.Provider,{value:{onSelect:i},children:e.jsx("div",{ref:o,className:c,style:s,"data-testid":"dropdown-menu",children:a.editor.isMobile?e.jsx(H7.Col,{className:"dropdown-menu-container",children:t}):e.jsx(S3,{className:"dropdown-menu-container",padding:2,style:{zIndex:2},children:t})})})};a4.displayName="DropdownMenuContent";var o4=a4,l4=({icon:t,shortcut:n,href:r,children:i,onSelect:s,className:a="",selected:o,rel:l="noreferrer",...c})=>{let d=B3(c.onClick,s);return e.jsx("a",{...c,href:r,target:"_blank",rel:"noreferrer",className:z3(a,o),title:c.title??c["aria-label"],onClick:d,children:e.jsx(H3,{icon:t,shortcut:n,children:i})})},c4=l4;l4.displayName="DropdownMenuItemLink";var d4=({children:t,className:n="",selected:r,...i})=>e.jsx("div",{...i,className:`dropdown-menu-item-base dropdown-menu-item-custom ${n} ${r?"dropdown-menu-item--selected":""}`.trim(),children:t}),u4=({children:t,open:n})=>{let r=(e=>{let t=St.Children.toArray(e).find(e=>St.isValidElement(e)&&"string"!=typeof e.type&&e?.type.displayName&&"DropdownMenuTrigger"===e.type.displayName);return t||null})(t),i=(e=>{let t=St.Children.toArray(e).find(e=>St.isValidElement(e)&&"string"!=typeof e.type&&e?.type.displayName&&"DropdownMenuContent"===e.type.displayName);return t||null})(t);return e.jsxs(e.Fragment,{children:[r,n&&i]})};u4.Trigger=r4,u4.Content=o4,u4.Item=Y3,u4.ItemLink=c4,u4.ItemCustom=d4,u4.Group=O3,u4.Separator=s4;var h4=u4;u4.displayName="DropdownMenu";var p4=(e,t)=>e.filter(e=>t.includes(e.id)),f4=({setAppState:t,selectedItems:n,library:r,onRemoveFromLibrary:i,resetLibrary:s,onSelectItems:a,appState:o,className:l})=>{let[c]=i6(A7),[d,u]=i6(S4),[h,p]=vt.useState(!1),f=!!n.length,m=f?c.libraryItems.filter(e=>n.includes(e.id)):c.libraryItems,g=y6(f?"buttons.remove":"buttons.resetLibrary"),[b,U]=vt.useState(!1),[y,x]=vt.useState(null),v=vt.useCallback(()=>e.jsxs(I4,{onCloseRequest:()=>x(null),title:y6("publishSuccessDialog.title"),className:"publish-library-success",size:"small",children:[e.jsx("p",{children:e.jsx(q7,{i18nKey:"publishSuccessDialog.content",authorName:y.authorName,link:t=>e.jsx("a",{href:y?.url,target:"_blank",rel:"noopener noreferrer",children:t})})}),e.jsx(k6,{type:"button",title:y6("buttons.close"),"aria-label":y6("buttons.close"),label:y6("buttons.close"),onClick:()=>x(null),"data-testid":"publish-library-success-close",className:"publish-library-success-close"})]}),[x,y]),w=async()=>{try{await r.updateLibrary({libraryItems:VY({description:"Excalidraw library files"}),merge:!0,openLibraryMenu:!0})}catch(e){if("AbortError"===e?.name)return;t({errorMessage:y6("errors.importLibraryError")})}},S=async()=>{(async e=>{let t=QY(e);await GY(new Blob([t],{type:lN.excalidrawlib}),{name:"library",extension:"excalidrawlib",description:"Excalidraw library file"})})(f?m:await r.getLatestLibrary()).catch(jL).catch(e=>{t({errorMessage:e.message})})};return e.jsxs("div",{className:BP("library-menu-dropdown-container",l),children:[e.jsxs(h4,{open:d,children:[e.jsx(h4.Trigger,{onToggle:()=>u(!d),children:kF}),e.jsxs(h4.Content,{onClickOutside:()=>u(!1),onSelect:()=>u(!1),className:"library-menu",children:[!f&&e.jsx(h4.Item,{onSelect:w,icon:cz,"data-testid":"lib-dropdown--load",children:y6("buttons.load")}),!!m.length&&e.jsx(h4.Item,{onSelect:S,icon:QF,"data-testid":"lib-dropdown--export",children:y6("buttons.export")}),!!m.length&&e.jsx(h4.Item,{onSelect:()=>p(!0),icon:VF,children:g}),f&&e.jsx(h4.Item,{icon:SB,onSelect:()=>U(!0),"data-testid":"lib-dropdown--remove",children:y6("buttons.publishLibrary")})]})]}),n.length>0&&e.jsx("div",{className:"library-actions-counter",children:n.length}),h&&(()=>{let t=n.length?y6("alerts.removeItemsFromsLibrary",{count:n.length}):y6("alerts.resetLibrary"),r=n.length?y6("confirmDialog.removeItemsFromLib"):y6("confirmDialog.resetLibrary");return e.jsx(K7,{onConfirm:()=>{n.length?i():s(),p(!1)},onCancel:()=>{p(!1)},title:r,children:e.jsx("p",{children:t})})})(),b&&e.jsx(t4,{onClose:()=>U(!1),libraryItems:p4(c.libraryItems,n),appState:o,onSuccess:e=>((e,t)=>{U(!1),x({url:e.url,authorName:e.authorName});let i=t.slice();i.forEach(e=>{n.includes(e.id)&&(e.status="published")}),r.setLibrary(i)})(e,c.libraryItems),onError:e=>window.alert(e),updateItemsInStorage:()=>r.setLibrary(c.libraryItems),onRemove:e=>a(n.filter(t=>t!==e))}),y&&v()]})},m4=({selectedItems:t,onSelectItems:n,className:r})=>{let{library:i}=Ere(),{clearLibraryCache:s,deleteItemsFromLibraryCache:a}=R7(),o=g3(),l=jre(),[c]=i6(A7);return e.jsx(f4,{appState:o,setAppState:l,selectedItems:t,onSelectItems:n,library:i,onRemoveFromLibrary:()=>(async e=>{let r=e.filter(e=>!t.includes(e.id));i.setLibrary(r).catch(()=>{l({errorMessage:y6("alerts.errorRemovingFromLibrary")})}),a(t),n([])})(c.libraryItems),resetLibrary:()=>{i.resetLibrary(),s()},className:r})},g4=vt.memo(({id:t,elements:n,isPending:r,onClick:i,selected:s,onToggle:a,onDrag:o,svgCache:l})=>{let c=vt.useRef(null),d=((e,t,n)=>{let[r,i]=vt.useState();return vt.useEffect(()=>{if(t)if(e){let r=n.get(e);r?i(r):(async()=>{let r=await T7(t);r.querySelector(".style-fonts")?.remove(),r&&(n.set(e,r),i(r))})()}else(async()=>{let e=await T7(t);i(e)})()},[e,t,n,i]),r})(t,n,l);vt.useEffect(()=>{let e=c.current;if(e)return d&&(e.innerHTML=d.outerHTML),()=>{e.innerHTML=""}},[d]);let[u,h]=vt.useState(!1),p=Cre().editor.isMobile,f=r&&e.jsx("div",{className:"library-unit__adder",children:EF});return e.jsxs("div",{className:BP("library-unit",{"library-unit__active":n,"library-unit--hover":n&&u,"library-unit--selected":s,"library-unit--skeleton":!d}),onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[e.jsx("div",{className:BP("library-unit__dragger",{"library-unit__pulse":!!r}),ref:c,draggable:!!n,onClick:n||r?e=>{t&&e.shiftKey?a(t,e):i(t)}:void 0,onDragStart:e=>{t?(h(!1),o(t,e)):e.preventDefault()}}),f,t&&n&&(u||p||s)&&e.jsx(C8,{checked:s,onChange:(e,n)=>a(t,n),className:"library-unit__checkbox"})]})}),b4=()=>e.jsx("div",{className:"library-unit library-unit--skeleton"});var U4=St.useTransition||function(){return[!1,vt.useCallback(e=>e(),[])]},y4=({children:t})=>e.jsx("div",{className:"library-menu-items-container__grid",children:t}),x4=vt.memo(({items:t,onItemSelectToggle:n,onItemDrag:r,isItemSelected:i,onClick:s,svgCache:a,itemsRenderedPerBatch:o})=>{let[,l]=U4(),[c,d]=vt.useState(0);return vt.useEffect(()=>{c<t.length&&l(()=>{d(c+o)})},[c,t.length,l,o]),e.jsx(e.Fragment,{children:t.map((t,o)=>o<c?e.jsx(g4,{elements:t?.elements,isPending:!t?.id&&!!t?.elements,onClick:s,svgCache:a,id:t?.id,selected:i(t.id),onToggle:n,onDrag:r},t?.id??o):e.jsx(b4,{},o))})}),v4=FJ(0);function w4({isLoading:t,libraryItems:n,onAddToLibrary:r,onInsertLibraryItems:i,pendingElements:s,theme:a,id:o,libraryReturnUrl:l,onSelectItems:c,selectedItems:d}){let u=vt.useRef(null),h=(e=>{let[t,n]=i6(v4);return vt.useEffect(()=>{let{current:t}=e;if(!t)return;let r=uR(()=>{let{scrollTop:e}=t;n(e)},200);return t.addEventListener("scroll",r),()=>{r.cancel(),t.removeEventListener("scroll",r)}},[e,n]),t})(u);vt.useEffect(()=>{h>0&&u.current?.scrollTo(0,h)},[]);let{svgCache:p}=R7(),f=vt.useMemo(()=>n.filter(e=>"published"!==e.status),[n]),m=vt.useMemo(()=>n.filter(e=>"published"===e.status),[n]),g=!n.length&&!s.length,b=!s.length&&!f.length&&!m.length,[U,y]=vt.useState(null),x=vt.useCallback((e,t)=>{let n=!d.includes(e),r=[...f,...m];if(n){if(t.shiftKey&&U){let t=r.findIndex(e=>e.id===U),n=r.findIndex(t=>t.id===e);if(-1===t||-1===n)return void c([...d,e]);let i=DL(d),s=r.reduce((e,r,s)=>((s>=t&&s<=n||i.has(r.id))&&e.push(r.id),e),[]);c(s)}else c([...d,e]);y(e)}else y(null),c(d.filter(t=>t!==e))},[U,c,m,d,f]),v=vt.useCallback(e=>{let t;return t=d.includes(e)?n.filter(e=>d.includes(e.id)):n.filter(t=>t.id===e),t.map(e=>({...e,elements:tY(e.elements,{randomizeSeed:!0})}))},[n,d]),w=vt.useCallback((e,t)=>{t.dataTransfer.setData(lN.excalidrawlib,QY(v(e)))},[v]),S=vt.useCallback(e=>!!e&&d.includes(e),[d]),E=vt.useCallback(()=>{r(s)},[s,r]),k=vt.useCallback(e=>{e&&i(v(e))},[v,i]),C=p.size>=n.length?64:17;return e.jsxs("div",{className:"library-menu-items-container",style:s.length||f.length||m.length?{justifyContent:"flex-start"}:{borderBottom:0},children:[!b&&e.jsx(m4,{selectedItems:d,onSelectItems:c,className:"library-menu-dropdown-container--in-heading"}),e.jsxs(H7.Col,{className:"library-menu-items-container__items",align:"start",gap:1,style:{flex:m.length>0?1:"0 1 auto",marginBottom:0},ref:u,children:[e.jsxs(e.Fragment,{children:[!b&&e.jsx("div",{className:"library-menu-items-container__header",children:y6("labels.personalLib")}),t&&e.jsx("div",{style:{position:"absolute",top:"var(--container-padding-y)",right:"var(--container-padding-x)",transform:"translateY(50%)"},children:e.jsx(w6,{})}),s.length||f.length?e.jsxs(y4,{children:[s.length>0&&e.jsx(x4,{itemsRenderedPerBatch:C,items:[{id:null,elements:s}],onItemSelectToggle:x,onItemDrag:w,onClick:E,isItemSelected:S,svgCache:p}),e.jsx(x4,{itemsRenderedPerBatch:C,items:f,onItemSelectToggle:x,onItemDrag:w,onClick:k,isItemSelected:S,svgCache:p})]}):e.jsxs("div",{className:"library-menu-items__no-items",children:[e.jsx("div",{className:"library-menu-items__no-items__label",children:y6("library.noItems")}),e.jsx("div",{className:"library-menu-items__no-items__hint",children:m.length>0?y6("library.hint_emptyPrivateLibrary"):y6("library.hint_emptyLibrary")})]})]}),e.jsxs(e.Fragment,{children:[(m.length>0||s.length>0||f.length>0)&&e.jsx("div",{className:"library-menu-items-container__header library-menu-items-container__header--excal",children:y6("labels.excalidrawLib")}),m.length>0?e.jsx(y4,{children:e.jsx(x4,{itemsRenderedPerBatch:C,items:m,onItemSelectToggle:x,onItemDrag:w,onClick:k,isItemSelected:S,svgCache:p})}):f.length>0?e.jsx("div",{style:{margin:"1rem 0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",fontSize:".9rem"},children:y6("library.noItems")}):null]}),g&&e.jsx(W7,{style:{padding:"16px 0",width:"100%"},id:o,libraryReturnUrl:l,theme:a,children:e.jsx(m4,{selectedItems:d,onSelectItems:c})})]})]})}var S4=FJ(!1),E4=({children:t})=>e.jsx("div",{className:"layer-ui__library",children:t}),k4=vt.memo(({onInsertLibraryItems:t,pendingElements:n,onAddToLibrary:r,setAppState:i,libraryReturnUrl:s,library:a,id:o,theme:l,selectedItems:c,onSelectItems:d})=>{let[u]=i6(A7),h=vt.useCallback(e=>{(async(e,t)=>{Z6("element","addToLibrary","ui");for(let r of $N)if(e.some(e=>e.type===r))return i({errorMessage:y6(`errors.libraryElementTypeError.${r}`)});let n=[{status:"unpublished",elements:e,id:LG(),created:Date.now()},...t];r(),a.setLibrary(n).catch(()=>{i({errorMessage:y6("alerts.errorAddingToLibrary")})})})(e,u.libraryItems)},[r,a,i,u.libraryItems]),p=vt.useMemo(()=>u.libraryItems,[u]);if("loading"===u.status&&!u.isInitialized)return e.jsx(E4,{children:e.jsx("div",{className:"layer-ui__library-message",children:e.jsxs("div",{children:[e.jsx(w6,{size:"2em"}),e.jsx("span",{children:y6("labels.libraryLoadingMessage")})]})})});let f=u.libraryItems.length>0||n.length>0;return e.jsxs(E4,{children:[e.jsx(w4,{isLoading:"loading"===u.status,libraryItems:p,onAddToLibrary:h,onInsertLibraryItems:t,pendingElements:n,id:o,libraryReturnUrl:s,theme:l,onSelectItems:d,selectedItems:c}),f&&e.jsx(W7,{className:"library-menu-control-buttons--at-bottom",style:{padding:"16px 12px 0 12px"},id:o,libraryReturnUrl:s,theme:l})]})}),C4=(e,t)=>({elements:e,pending:MK(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}),selectedElementIds:t}),_4=vt.memo(()=>{let t=Ere(),{onInsertElements:n}=t,r=kre(),i=g3(),s=jre(),[a,o]=vt.useState([]),l=vt.useMemo(()=>t.library,[t.library]),c=((e,t)=>{let n=Mre(),[r,i]=vt.useState(()=>C4(n,e.selectedElementIds)),s=vt.useRef(new Map);return vt.useEffect(()=>{for(let e of r.pending)s.current.set(e.id,e.version)},[r.pending]),vt.useEffect(()=>{"up"===t.state.cursorButton&&"selection"===t.state.activeTool.type&&i(r=>{if(!XL(r.selectedElementIds,e.selectedElementIds))return s.current.clear(),C4(n,e.selectedElementIds);let i=t.scene.getNonDeletedElementsMap();for(let t of Object.keys(e.selectedElementIds)){let r=i.get(t)?.version;if(r&&r!==s.current.get(t))return C4(n,e.selectedElementIds)}return r})},[t,t.state.cursorButton,t.state.activeTool.type,e.selectedElementIds,n]),r.pending})(i,t),d=vt.useCallback(e=>{n(O7(e))},[n]),u=vt.useCallback(()=>{s({selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null})},[s]);return e.jsx(k4,{pendingElements:c,onInsertLibraryItems:d,onAddToLibrary:u,setAppState:s,libraryReturnUrl:r.libraryReturnUrl,library:l,id:t.id,theme:i.theme,selectedItems:a,onSelectItems:o})});function M4(e){if(e&&"number"==typeof e)return e;switch(e){case"small":return 550;case"wide":return 1024;default:return 800}}var I4=t=>{let[n,r]=(()=>{let[e,t]=vt.useState(null),n=vt.useCallback(e=>t(e),[]);return[e,n]})(),[i]=vt.useState(document.activeElement),{id:s}=_re(),a=Cre().viewport.isMobile;vt.useEffect(()=>{if(!n)return;let e=$L(n);setTimeout(()=>{e.length>0&&!1!==t.autofocus&&(e[1]||e[0]).focus()});let r=e=>{if(e.key===$$.TAB){let t=$L(n),{activeElement:r}=document,i=t.findIndex(e=>e===r);0===i&&e.shiftKey?(t[t.length-1].focus(),e.preventDefault()):i===t.length-1&&!e.shiftKey&&(t[0].focus(),e.preventDefault())}};return n.addEventListener("keydown",r),()=>n.removeEventListener("keydown",r)},[n,t.autofocus]);let o=jre(),l=s6(S4),c=()=>{o({openMenu:null}),l(!1),i.focus(),t.onCloseRequest()};return e.jsx(I7,{className:BP("Dialog",t.className,{"Dialog--fullscreen":a}),labelledBy:"dialog-title",maxWidth:M4(t.size),onCloseRequest:c,closeOnClickOutside:t.closeOnClickOutside,children:e.jsxs(S3,{ref:r,children:[t.title&&e.jsx("h2",{id:`${s}-dialog-title`,className:"Dialog__title",children:e.jsx("span",{className:"Dialog__titleContent",children:t.title})}),a&&e.jsx("button",{className:"Dialog__close",onClick:c,title:y6("buttons.close"),"aria-label":y6("buttons.close"),type:"button",children:Pz}),e.jsx("div",{className:"Dialog__content",children:t.children})]})})},j4=({type:t="button",onSelect:n,selected:r,children:i,className:s="",...a})=>e.jsx("button",{onClick:VL(a.onClick,e=>{n()}),type:t,className:BP("excalidraw-button",s,{selected:r}),...a,children:i}),T4=vt.forwardRef(({onChange:t,label:n,fullWidth:r,placeholder:i,readonly:s,selectOnRender:a,onKeyDown:o,isRedacted:l=!1,icon:c,className:d,...u},h)=>{let p=vt.useRef(null);vt.useImperativeHandle(h,()=>p.current),vt.useLayoutEffect(()=>{a&&(p.current?.focus(),p.current?.select())},[a]);let[f,m]=vt.useState(!1);return e.jsxs("div",{className:BP("ExcTextField",d,{"ExcTextField--fullWidth":r,"ExcTextField--hasIcon":!!c}),onClick:()=>{p.current?.focus()},children:[c,n&&e.jsx("div",{className:"ExcTextField__label",children:n}),e.jsxs("div",{className:BP("ExcTextField__input",{"ExcTextField__input--readonly":s}),children:[e.jsx("input",{className:BP({"is-redacted":"value"in u&&u.value&&l&&!f}),readOnly:s,value:"value"in u?u.value:void 0,defaultValue:"defaultValue"in u?u.defaultValue:void 0,placeholder:i,ref:p,onChange:e=>t?.(e.target.value),onKeyDown:o}),l&&e.jsx(j4,{onSelect:()=>m(!f),style:{border:0,userSelect:"none"},children:f?zB:FB})]})]})}),R4={toggleTheme:[SL("Shift+Alt+D")],saveScene:[SL("CtrlOrCmd+S")],loadScene:[SL("CtrlOrCmd+O")],clearCanvas:[SL("CtrlOrCmd+Delete")],imageExport:[SL("CtrlOrCmd+Shift+E")],commandPalette:[SL("CtrlOrCmd+/"),SL("CtrlOrCmd+Shift+P")],cut:[SL("CtrlOrCmd+X")],copy:[SL("CtrlOrCmd+C")],paste:[SL("CtrlOrCmd+V")],copyStyles:[SL("CtrlOrCmd+Alt+C")],pasteStyles:[SL("CtrlOrCmd+Alt+V")],selectAll:[SL("CtrlOrCmd+A")],deleteSelectedElements:[SL("Delete")],duplicateSelection:[SL("CtrlOrCmd+D"),SL(`Alt+${y6("helpDialog.drag")}`)],sendBackward:[SL("CtrlOrCmd+[")],bringForward:[SL("CtrlOrCmd+]")],sendToBack:[SL(yA?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")],bringToFront:[SL(yA?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")],copyAsPng:[SL("Shift+Alt+C")],group:[SL("CtrlOrCmd+G")],ungroup:[SL("CtrlOrCmd+Shift+G")],gridMode:[SL("CtrlOrCmd+'")],zenMode:[SL("Alt+Z")],objectsSnapMode:[SL("Alt+S")],stats:[SL("Alt+/")],addToLibrary:[],flipHorizontal:[SL("Shift+H")],flipVertical:[SL("Shift+V")],viewMode:[SL("Alt+R")],hyperlink:[SL("CtrlOrCmd+K")],toggleElementLock:[SL("CtrlOrCmd+Shift+L")],resetZoom:[SL("CtrlOrCmd+0")],zoomOut:[SL("CtrlOrCmd+-")],zoomIn:[SL("CtrlOrCmd++")],zoomToFitSelection:[SL("Shift+3")],zoomToFit:[SL("Shift+1")],zoomToFitSelectionInViewport:[SL("Shift+2")],toggleEraserTool:[SL("E")],toggleHandTool:[SL("H")],setFrameAsActiveTool:[SL("F")],saveFileToDisk:[SL("CtrlOrCmd+S")],saveToActiveFile:[SL("CtrlOrCmd+S")],toggleShortcuts:[SL("?")],searchMenu:[SL("CtrlOrCmd+F")],wrapSelectionInFrame:[]},P4=(e,t=0)=>{let n=R4[e];return n&&n.length>0?n[t]||n[0]:""},A4=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),N4=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,D4={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"E","æ":"e","Þ":"T","þ":"t","ß":"s","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"I","ĳ":"i","Œ":"E","œ":"e","ŉ":"n","ſ":"s"},L4=e=>e.replace(N4,e=>D4[e]||e).replace(A4,""),O4=St.createContext(null),F4=()=>St.useContext(O4),z4=y0(),B4=(e,t)=>{let n=t[0]?.type||null;for(let r of t)if(r.type!==n){n=null;break}return IW(e.activeTool.type)&&"image"!==e.activeTool.type&&"image"!==n&&"frame"!==n&&"magicframe"!==n||t.some(e=>IW(e.type))},H4=(e,t)=>MW(e.activeTool.type)||t.some(e=>MW(e.type)),$4=({appState:t,elementsMap:n,renderAction:r,app:i})=>{let s=IK(n,t),a=!1;2===s.length&&(TO(s[0])||TO(s[1]))&&(a=!0);let o=!(!t.editingTextElement&&!t.newElement),l=Cre(),c="rtl"===document.documentElement.getAttribute("dir"),d=MW(t.activeTool.type)&&!PL(t.currentItemBackgroundColor)||s.some(e=>MW(e.type)&&!PL(e.backgroundColor)),u=1===s.length||a,h=!t.editingLinearElement&&1===s.length&&vO(s[0])&&!SO(s[0]),p=!t.croppingElementId&&1===s.length&&uO(s[0]),f=!a&&G8(t,i);return e.jsxs("div",{className:"panelColumn",children:[e.jsx("div",{children:B4(t,s)&&r("changeStrokeColor")}),H4(t,s)&&e.jsx("div",{children:r("changeBackgroundColor")}),d&&r("changeFillStyle"),(jW(t.activeTool.type)||s.some(e=>jW(e.type)))&&r("changeStrokeWidth"),("freedraw"===t.activeTool.type||s.some(e=>"freedraw"===e.type))&&r("changeStrokeShape"),(TW(t.activeTool.type)||s.some(e=>TW(e.type)))&&e.jsxs(e.Fragment,{children:[r("changeStrokeStyle"),r("changeSloppiness")]}),(RW(t.activeTool.type)||s.some(e=>RW(e.type)))&&e.jsx(e.Fragment,{children:r("changeRoundness")}),(PW(t.activeTool.type)||s.some(e=>PW(e.type)))&&e.jsx(e.Fragment,{children:r("changeArrowType")}),("text"===t.activeTool.type||s.some(mO))&&e.jsxs(e.Fragment,{children:[r("changeFontFamily"),r("changeFontSize"),("text"===t.activeTool.type||gG(s,n))&&r("changeTextAlign")]}),mG(s,n)&&r("changeVerticalAlign"),(AW(t.activeTool.type)||s.some(e=>AW(e.type)))&&e.jsx(e.Fragment,{children:r("changeArrowhead")}),r("changeOpacity"),e.jsxs("fieldset",{children:[e.jsx("legend",{children:y6("labels.layers")}),e.jsxs("div",{className:"buttonList",children:[r("sendToBack"),r("sendBackward"),r("bringForward"),r("bringToFront")]})]}),f&&!a&&e.jsxs("fieldset",{children:[e.jsx("legend",{children:y6("labels.align")}),e.jsxs("div",{className:"buttonList",children:[c?e.jsxs(e.Fragment,{children:[r("alignRight"),r("alignHorizontallyCentered"),r("alignLeft")]}):e.jsxs(e.Fragment,{children:[r("alignLeft"),r("alignHorizontallyCentered"),r("alignRight")]}),s.length>2&&r("distributeHorizontally"),e.jsx("div",{style:{flexBasis:"100%",height:0}}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:".5rem",marginTop:"-0.5rem"},children:[r("alignTop"),r("alignVerticallyCentered"),r("alignBottom"),s.length>2&&r("distributeVertically")]})]})]}),!o&&s.length>0&&e.jsxs("fieldset",{children:[e.jsx("legend",{children:y6("labels.actions")}),e.jsxs("div",{className:"buttonList",children:[!l.editor.isMobile&&r("duplicateSelection"),!l.editor.isMobile&&r("deleteSelectedElements"),r("group"),r("ungroup"),u&&r("hyperlink"),p&&r("cropEditor"),h&&r("toggleLinearEditor")]})]})]})},W4=({activeTool:t,appState:n,app:r,UIOptions:i})=>{let[s,a]=vt.useState(!1),o="frame"===t.type,l="laser"===t.type,c="embeddable"===t.type,{TTDDialogTriggerTunnel:d}=F4();return e.jsxs(e.Fragment,{children:[Z$.map(({value:s,icon:a,key:o,numericKey:l,fillable:c},d)=>{if(!1===i.tools?.[s])return null;let u=y6(`toolBar.${s}`),h=o&&hL("string"==typeof o?o:o[0]),p=h?`${h} ${y6("helpDialog.or")} ${l}`:`${l}`;return e.jsx(k6,{className:BP("Shape",{fillable:c}),type:"radio",icon:a,checked:t.type===s,name:"editor-current-shape",title:`${hL(u)} — ${p}`,keyBindingLabel:l||h,"aria-label":hL(u),"aria-keyshortcuts":p,"data-testid":`toolbar-${s}`,onPointerDown:({pointerType:e})=>{!n.penDetected&&"pen"===e&&r.togglePenMode(!0)},onChange:({pointerType:e})=>{n.activeTool.type!==s&&Z6("toolbar",s,"ui"),"image"===s?r.setActiveTool({type:s,insertOnCanvasDirectly:"mouse"!==e}):r.setActiveTool({type:s})}},s)}),e.jsx("div",{className:"App-toolbar__divider"}),e.jsxs(h4,{open:s,children:[e.jsx(h4.Trigger,{className:BP("App-toolbar__extra-tools-trigger",{"App-toolbar__extra-tools-trigger--selected":o||c||l&&!r.props.isCollaborating}),onToggle:()=>a(!s),title:y6("toolBar.extraTools"),children:RB}),e.jsxs(h4.Content,{onClickOutside:()=>a(!1),onSelect:()=>a(!1),className:"App-toolbar__extra-tools-dropdown",children:[e.jsx(h4.Item,{onSelect:()=>r.setActiveTool({type:"frame"}),icon:PB,shortcut:$$.F.toLocaleUpperCase(),"data-testid":"toolbar-frame",selected:o,children:y6("toolBar.frame")}),e.jsx(h4.Item,{onSelect:()=>r.setActiveTool({type:"embeddable"}),icon:GF,"data-testid":"toolbar-embeddable",selected:c,children:y6("toolBar.embeddable")}),e.jsx(h4.Item,{onSelect:()=>r.setActiveTool({type:"laser"}),icon:DB,"data-testid":"toolbar-laser",selected:l,shortcut:$$.K.toLocaleUpperCase(),children:y6("toolBar.laser")}),e.jsx("div",{style:{margin:"6px 0",fontSize:14,fontWeight:600},children:"Generate"}),!1!==r.props.aiEnabled&&e.jsx(d.Out,{}),e.jsx(h4.Item,{onSelect:()=>r.setOpenDialog({name:"ttd",tab:"mermaid"}),icon:AB,"data-testid":"toolbar-embeddable",children:y6("toolBar.mermaidToExcalidraw")}),!1!==r.props.aiEnabled&&r.plugins.diagramToCode&&e.jsx(e.Fragment,{children:e.jsxs(h4.Item,{onSelect:()=>r.onMagicframeToolSelect(),icon:LB,"data-testid":"toolbar-magicframe",children:[y6("toolBar.magicframe"),e.jsx(h4.Item.Badge,{children:"AI"})]})})]})]})]})},X4=({renderAction:t,zoom:n})=>e.jsx(H7.Col,{gap:1,className:XA,children:e.jsxs(H7.Row,{align:"center",children:[t("zoomOut"),t("resetZoom"),t("zoomIn")]})}),V4=({renderAction:t,className:n})=>e.jsxs("div",{className:`undo-redo-buttons ${n}`,children:[e.jsx("div",{className:"undo-button-container",children:e.jsx(u8,{label:y6("buttons.undo"),children:t("undo")})}),e.jsx("div",{className:"redo-button-container",children:e.jsxs(u8,{label:y6("buttons.redo"),children:[" ",t("redo")]})})]}),G4=({actionManager:t,showExitZenModeBtn:n})=>e.jsx("button",{type:"button",className:BP("disable-zen-mode",{"disable-zen-mode--visible":n}),onClick:()=>t.executeAction(l7),children:y6("buttons.exitZenMode")}),Y4=({renderAction:t,className:n})=>e.jsx("div",{className:`finalize-button ${n}`,children:t("finalize",{size:"small"})}),q4=e=>{let t=vt.useRef({userFn:e});return t.current.userFn=e,t.current.stableFn||(t.current.stableFn=(...e)=>t.current.userFn(...e)),t.current.stableFn},Z4=FJ(null),K4=()=>{let[t,n]=i6(Z4),r=Tre();return t&&"clearCanvas"===t?e.jsx(K7,{onConfirm:()=>{r.executeAction(h8),n(null)},onCancel:()=>n(null),title:y6("clearCanvasDialog.title"),children:e.jsxs("p",{className:"clear-canvas__content",children:[" ",y6("alerts.clearReset")]})}):null},Q4={};WM(Q4,{toggleTheme:()=>J4});var J4={...U8,category:"App",label:"Toggle theme",perform:({actionManager:e})=>{e.executeAction(U8,"commandPalette")}},e9=kG({name:"copyElementLink",label:"labels.copyElementLink",icon:CB,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{let i=MK(e,t);try{if(window.location){let n=hq(i,t);return n?(await HZ(r.props.generateLinkForSelection?r.props.generateLinkForSelection(n.id,n.type):uq(n.id,n.type)),{appState:{toast:{message:y6("toast.elementLinkCopied"),closable:!0}},captureUpdate:yY}):{appState:t,elements:e,app:r,captureUpdate:yY}}}catch(s){}return{appState:t,elements:e,app:r,captureUpdate:yY}},predicate:(e,t)=>pq(MK(e,t))}),t9=kG({name:"linkToElement",label:"labels.linkToElement",icon:fH,perform:(e,t,n,r)=>{let i=MK(e,t);return 1===i.length&&pq(i)?{appState:{...t,openDialog:{name:"elementLinkSelector",sourceElementId:MK(e,t)[0].id}},captureUpdate:bY}:{elements:e,appState:t,app:r,captureUpdate:yY}},predicate:(e,t,n,r)=>{let i=MK(e,t);return"elementLinkSelector"!==t.openDialog?.name&&1===i.length&&pq(i)},trackEvent:!1}),n9=FJ(null),r9="App",i9="Export",s9="Tools",a9="Editor",o9="Elements",l9="Links",c9=e=>{switch(e){case r9:return 1;case i9:return 2;case a9:return 3;case s9:return 4;case o9:return 5;case l9:return 6;default:return 10}},d9=({shortcut:t,className:n,children:r})=>{let i=t.replace("++","+$").split("+");return e.jsxs("div",{className:BP("shortcut",n),children:[i.map((t,n)=>e.jsx("div",{className:"shortcut-wrapper",children:e.jsx("div",{className:"shortcut-key",children:"$"===t?"+":t})},t)),e.jsx("div",{className:"shortcut-desc",children:r})]})},u9=e=>!e.altKey&&e[$$.CTRL_OR_CMD]&&(e.shiftKey&&e.key.toLowerCase()===$$.P||e.key===$$.SLASH);function h9({customCommandPaletteItems:t}){let n=Ere(),r=g3(),i=jre(),s=kre(),a=Tre(),[o,l]=i6(n9),[c,d]=vt.useState(null),u=vt.useRef(null),h=y3({uiAppState:r,customCommandPaletteItems:t,appProps:s});vt.useEffect(()=>{let{uiAppState:e,customCommandPaletteItems:t,appProps:r}=h,s=t=>{let r="";return t.label&&(r="function"==typeof t.label?y6(t.label(n.scene.getNonDeletedElements(),e,n)):y6(t.label)),r},c=t=>"function"==typeof t.icon?t.icon(e,n.scene.getNonDeletedElements()):t.icon,u=[],p=(e,t,n)=>{let r={label:s(e),icon:c(e),category:t,shortcut:P4(e.name),keywords:e.keywords,predicate:e.predicate,viewMode:e.viewMode,perform:()=>{a.executeAction(e,"commandPalette")}};return n?n(r,e):r};if(e&&n.scene&&a){let h=[a.actions.group,a.actions.ungroup,a.actions.cut,a.actions.copy,a.actions.deleteSelectedElements,a.actions.wrapSelectionInFrame,a.actions.copyStyles,a.actions.pasteStyles,a.actions.bringToFront,a.actions.bringForward,a.actions.sendBackward,a.actions.sendToBack,a.actions.alignTop,a.actions.alignBottom,a.actions.alignLeft,a.actions.alignRight,a.actions.alignVerticallyCentered,a.actions.alignHorizontallyCentered,a.actions.duplicateSelection,a.actions.flipHorizontal,a.actions.flipVertical,a.actions.zoomToFitSelection,a.actions.zoomToFitSelectionInViewport,a.actions.increaseFontSize,a.actions.decreaseFontSize,a.actions.toggleLinearEditor,a.actions.cropEditor,k7,e9,t9].map(e=>p(e,o9,(e,t)=>({...e,predicate:t.predicate?t.predicate:(e,t,n,r)=>MK(e,t).length>0}))),f=[a.actions.toggleHandTool,a.actions.setFrameAsActiveTool].map(e=>p(e,s9)),m=[a.actions.undo,a.actions.redo,a.actions.zoomIn,a.actions.zoomOut,a.actions.resetZoom,a.actions.zoomToFit,a.actions.zenMode,a.actions.viewMode,a.actions.gridMode,a.actions.objectsSnapMode,a.actions.toggleShortcuts,a.actions.selectAll,a.actions.toggleElementLock,a.actions.unlockAllElements,a.actions.stats].map(e=>p(e,a9)),g=[a.actions.saveToActiveFile,a.actions.saveFileToDisk,a.actions.copyAsPng,a.actions.copyAsSvg].map(e=>p(e,i9));u=[...h,...m,{label:s(h8),icon:c(h8),shortcut:P4(h8.name),category:a9,keywords:["delete","destroy"],viewMode:!1,perform:()=>{c6.set(Z4,"clearCanvas")}},{label:y6("buttons.exportImage"),category:i9,icon:hz,shortcut:P4("imageExport"),keywords:["export","image","png","jpeg","svg","clipboard","picture"],perform:()=>{i({openDialog:{name:"imageExport"}})}},...g];let b=[{label:y6("toolBar.library"),category:r9,icon:SF,viewMode:!1,perform:()=>{e.openSidebar?i({openSidebar:null}):i({openSidebar:{name:BN,tab:HN}})}},{label:y6("search.title"),category:r9,icon:HB,viewMode:!0,perform:()=>{a.executeAction(m9)}},{label:y6("labels.changeStroke"),keywords:["color","outline"],category:o9,icon:uz,viewMode:!1,predicate:(e,t)=>{let n=MK(e,t);return n.length>0&&B4(t,n)},perform:()=>{i(e=>({openMenu:"shape"===e.openMenu?null:"shape",openPopup:"elementStroke"}))}},{label:y6("labels.changeBackground"),keywords:["color","fill"],icon:uz,category:o9,viewMode:!1,predicate:(e,t)=>{let n=MK(e,t);return n.length>0&&H4(t,n)},perform:()=>{i(e=>({openMenu:"shape"===e.openMenu?null:"shape",openPopup:"elementBackground"}))}},{label:y6("labels.canvasBackground"),keywords:["color"],icon:uz,category:a9,viewMode:!1,perform:()=>{i(e=>({openMenu:"canvas"===e.openMenu?null:"canvas",openPopup:"canvasBackground"}))}},...Z$.reduce((e,t)=>{let{value:i,icon:s,key:a,numericKey:o}=t;if(!1===r.UIOptions.tools?.[i])return e;let l=a&&hL("string"==typeof a?a:a[0])||o,c={label:y6(`toolBar.${i}`),category:s9,shortcut:l,icon:s,keywords:["toolbar"],viewMode:!1,perform:({event:e})=>{"image"===i?n.setActiveTool({type:i,insertOnCanvasDirectly:"keydown"===e.type}):n.setActiveTool({type:i})}};return e.push(c),e},[]),...f,{label:y6("toolBar.lock"),category:s9,icon:e.activeTool.locked?MF:_F,shortcut:$$.Q.toLocaleUpperCase(),viewMode:!1,perform:()=>{n.toggleLock()}},{label:`${y6("labels.textToDiagram")}...`,category:s9,icon:BB,viewMode:!1,predicate:r.aiEnabled,perform:()=>{i(e=>({...e,openDialog:{name:"ttd",tab:"text-to-diagram"}}))}},{label:`${y6("toolBar.mermaidToExcalidraw")}...`,category:s9,icon:AB,viewMode:!1,predicate:r.aiEnabled,perform:()=>{i(e=>({...e,openDialog:{name:"ttd",tab:"mermaid"}}))}}],U=[...u,...b,...t||[]].map(e=>({...e,icon:e.icon||VB,order:e.order??c9(e.category),haystack:`${L4(e.label.toLocaleLowerCase())} ${e.keywords?.join(" ")||""}`}));d(U),l(U.find(e=>e.label===o?.label)??null)}},[h,n,a,d,o?.label,l,i]);let[p,f]=vt.useState(""),[m,g]=vt.useState(null),[b,U]=vt.useState({}),y=e=>{i({openDialog:null},e),f("")},x=(e,t)=>{"commandPalette"===r.openDialog?.name&&(t.stopPropagation(),t.preventDefault(),document.body.classList.add("excalidraw-animations-disabled"),y(()=>{e.perform({actionManager:a,event:t}),l(e),requestAnimationFrame(()=>{document.body.classList.remove("excalidraw-animations-disabled")})}))},v=q4(e=>(!1!==e.viewMode||!r.viewModeEnabled)&&("function"==typeof e.predicate?e.predicate(n.scene.getNonDeletedElements(),r,s,n):void 0===e.predicate||e.predicate)),w=q4(e=>{let t=fL(e.target)||u9(e)||e.key===$$.ESCAPE;if(t&&e.key!==$$.ARROW_UP&&e.key!==$$.ARROW_DOWN&&e.key!==$$.ENTER)return;let n=Object.values(b).flat(),r=o&&!p&&v(o);if(e.key===$$.ARROW_UP){e.preventDefault();let t,i=n.findIndex(e=>e.label===m?.label);if(r){if(0===i)return void g(o);if(m===o){let e=n[n.length-1];return void(e&&g(e))}}t=-1===i||0===i?n.length-1:(i-1)%n.length;let s=n[t];return void(s&&g(s))}if(e.key===$$.ARROW_DOWN){e.preventDefault();let t=n.findIndex(e=>e.label===m?.label);if(r){if(!m||t===n.length-1)return void g(o);if(m===o){let e=n[0];return void(e&&g(e))}}let i=n[(t+1)%n.length];return void(i&&g(i))}if(e.key===$$.ENTER&&m&&setTimeout(()=>{x(m,e)}),!t){if(e.stopPropagation(),/^[a-zA-Z0-9]$/.test(e.key))return void u?.current?.focus();e.preventDefault()}});return vt.useEffect(()=>(window.addEventListener("keydown",w,{capture:!0}),()=>window.removeEventListener("keydown",w,{capture:!0})),[w]),vt.useEffect(()=>{if(!c)return;let e=e=>{let t={};for(let n of e)t[n.category]?t[n.category].push(n):t[n.category]=[n];return t},t=c.filter(v).sort((e,t)=>e.order-t.order),n=!p&&o&&v(o);if(!p)return U(e(n?t.filter(e=>e.label!==o?.label):t)),void g(n?o:t[0]||null);let r=L4(p.toLocaleLowerCase().replace(/[<>_| -]/g,""));t=l2.filter(r,t,{extract:e=>e.haystack}).sort((e,t)=>t.score-e.score).map(e=>e.original),U(e(t)),g(t[0]??null)},[p,c,v,o]),e.jsxs(I4,{onCloseRequest:()=>y(),closeOnClickOutside:!0,title:!1,size:720,autofocus:!0,className:"command-palette-dialog",children:[e.jsx(T4,{value:p,placeholder:y6("commandPalette.search.placeholder"),onChange:e=>{f(e)},selectOnRender:!0,ref:u}),!n.device.viewport.isMobile&&e.jsxs("div",{className:"shortcuts-wrapper",children:[e.jsx(d9,{shortcut:"↑↓",children:y6("commandPalette.shortcuts.select")}),e.jsx(d9,{shortcut:"↵",children:y6("commandPalette.shortcuts.confirm")}),e.jsx(d9,{shortcut:SL("Esc"),children:y6("commandPalette.shortcuts.close")})]}),e.jsxs("div",{className:"commands",children:[o&&!p&&e.jsxs("div",{className:"command-category",children:[e.jsxs("div",{className:"command-category-title",children:[y6("commandPalette.recents"),e.jsx("div",{className:"icon",style:{marginLeft:"6px"},children:$B})]}),e.jsx(p9,{command:o,isSelected:o.label===m?.label,onClick:e=>x(o,e),disabled:!v(o),onMouseMove:()=>g(o),showShortcut:!n.device.viewport.isMobile,appState:r})]}),Object.keys(b).length>0?Object.keys(b).map((t,i)=>e.jsxs("div",{className:"command-category",children:[e.jsx("div",{className:"command-category-title",children:t}),b[t].map(t=>e.jsx(p9,{command:t,isSelected:t.label===m?.label,onClick:e=>x(t,e),onMouseMove:()=>g(t),showShortcut:!n.device.viewport.isMobile,appState:r},t.label))]},t)):c?e.jsxs("div",{className:"no-match",children:[e.jsx("div",{className:"icon",children:HB})," ",y6("commandPalette.search.noMatch")]}):null]})]})}Object.assign(t=>{let n=g3(),r=jre();return vt.useEffect(()=>{let e=e=>{u9(e)&&(e.preventDefault(),e.stopPropagation(),r(e=>{let t="commandPalette"===e.openDialog?.name?null:{name:"commandPalette"};return t&&Z6("command_palette","open","shortcut"),{openDialog:t}}))};return window.addEventListener("keydown",e,{capture:!0}),()=>window.removeEventListener("keydown",e,{capture:!0})},[r]),"commandPalette"!==n.openDialog?.name?null:e.jsx(h9,{...t})},{defaultItems:Q4});var p9=({command:t,isSelected:n,disabled:r,onMouseMove:i,onClick:s,showShortcut:a,appState:o})=>{let l=()=>{};return e.jsxs("div",{className:BP("command-item",{"item-selected":n,"item-disabled":r}),ref:e=>{n&&!r&&e?.scrollIntoView?.({block:"nearest"})},onClick:r?l:s,onMouseMove:r?l:i,title:r?y6("commandPalette.itemNotAvailable"):"",children:[e.jsxs("div",{className:"name",children:[t.icon&&e.jsx(j3,{icon:"function"==typeof t.icon?t.icon(o):t.icon}),t.label]}),a&&t.shortcut&&e.jsx(d9,{shortcut:t.shortcut})]})},f9=kG({name:"toggleLinearEditor",category:o9,label:(e,t,n)=>"arrow"===n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds})[0]?.type?"labels.lineEditor.editArrow":"labels.lineEditor.edit",keywords:["line"],trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return!(t.editingLinearElement||1!==i.length||!vO(i[0])||SO(i[0]))},perform(e,t,n,r){let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0],s=t.editingLinearElement?.elementId===i.id?null:new eG(i);return{appState:{...t,editingLinearElement:s},captureUpdate:bY}},PanelComponent:({appState:t,updateData:n,app:r})=>{let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds})[0],s=y6("arrow"===i.type?"labels.lineEditor.editArrow":"labels.lineEditor.edit");return e.jsx(k6,{type:"button",icon:aH,title:s,"aria-label":s,onClick:()=>n(null)})}}),m9=kG({name:"searchMenu",icon:HB,keywords:["search","find"],label:"search.title",viewMode:!0,trackEvent:{category:"search_menu",action:"toggle",predicate:e=>e.gridModeEnabled},perform(e,t,n,r){if(t.openSidebar?.name===BN&&t.openSidebar.tab===zN){let e=r.excalidrawContainerValue.container?.querySelector(`.${VA} input`);return e?.matches(":focus")?{appState:{...t,openSidebar:null},captureUpdate:yY}:(e?.focus(),e?.select(),!1)}return{appState:{...t,openSidebar:{name:BN,tab:zN},openDialog:null},captureUpdate:yY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>void 0===n.gridModeEnabled,keyTest:e=>e[$$.CTRL_OR_CMD]&&e.key===$$.F}),g9=kG({name:"cropEditor",label:"helpDialog.cropStart",icon:pH,viewMode:!0,trackEvent:{category:"menu"},keywords:["image","crop"],perform(e,t,n,r){let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0];return{appState:{...t,isCropping:!1,croppingElementId:i.id},captureUpdate:bY}},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return!(t.croppingElementId||1!==i.length||!uO(i[0]))},PanelComponent:({appState:t,updateData:n,app:r})=>{let i=y6("helpDialog.cropStart");return e.jsx(k6,{type:"button",icon:pH,title:i,"aria-label":i,onClick:()=>n(null)})}}),b9=class{constructor(e=!0,t=!0){this.isUndoStackEmpty=e,this.isRedoStackEmpty=t}},U9=class e{constructor(){XM(this,"onHistoryChangedEmitter",new fY),XM(this,"undoStack",[]),XM(this,"redoStack",[])}get isUndoStackEmpty(){return 0===this.undoStack.length}get isRedoStackEmpty(){return 0===this.redoStack.length}clear(){this.undoStack.length=0,this.redoStack.length=0}record(e,t){let n=y9.create(t,e);n.isEmpty()||(this.undoStack.push(n.inverse()),n.elementsChange.isEmpty()||(this.redoStack.length=0),this.onHistoryChangedEmitter.trigger(new b9(this.isUndoStackEmpty,this.isRedoStackEmpty)))}undo(t,n,r){return this.perform(t,n,r,()=>e.pop(this.undoStack),n=>e.push(this.redoStack,n,t))}redo(t,n,r){return this.perform(t,n,r,()=>e.pop(this.redoStack),n=>e.push(this.undoStack,n,t))}perform(e,t,n,r,i){try{let s=r();if(null===s)return;let a=e,o=t,l=!1;for(;s;){try{[a,o,l]=s.applyTo(a,o,n)}finally{i(s)}if(l)break;s=r()}return[a,o]}finally{this.onHistoryChangedEmitter.trigger(new b9(this.isUndoStackEmpty,this.isRedoStackEmpty))}}static pop(e){if(!e.length)return null;let t=e.pop();return void 0!==t?t:null}static push(e,t,n){let r=t.inverse().applyLatestChanges(n);return e.push(r)}},y9=class e{constructor(e,t){this.appStateChange=e,this.elementsChange=t}static create(t,n){return new e(t,n)}inverse(){return new e(this.appStateChange.inverse(),this.elementsChange.inverse())}applyTo(e,t,n){let[r,i]=this.elementsChange.applyTo(e,n.elements),[s,a]=this.appStateChange.applyTo(t,r);return[r,s,i||a]}applyLatestChanges(t){let n=this.elementsChange.applyLatestChanges(t);return e.create(this.appStateChange,n)}isEmpty(){return this.appStateChange.isEmpty()&&this.elementsChange.isEmpty()}},x9=(e,t)=>{let[n,r]=vt.useState(t);return vt.useEffect(()=>{let t=e.on(e=>{r(e)});return()=>{t()}},[e]),n},v9=(e,t,n)=>{if(!(t.multiElement||t.resizingElement||t.editingTextElement||t.newElement||t.selectedElementsAreBeingDragged||t.selectionElement||e.flowChartCreator.isCreatingChart)){let e=n();if(!e)return{captureUpdate:yY};let[t,r]=e;return{appState:r,elements:Array.from(t.values()),captureUpdate:UY}}return{captureUpdate:yY}},w9=(e,t,n,r,i,s)=>{if(e.trackEvent)try{"object"==typeof e.trackEvent&&(!e.trackEvent.predicate||e.trackEvent.predicate(n,r,s))&&Z6(e.trackEvent.category,e.trackEvent.action||e.name,`${t} (${i.device.editor.isMobile?"mobile":"desktop"})`)}catch(a){}},S9=class{constructor(t,n,r,i){XM(this,"actions",{}),XM(this,"updater"),XM(this,"getAppState"),XM(this,"getElementsIncludingDeleted"),XM(this,"app"),XM(this,"renderAction",(t,n)=>{let r=this.app.props.UIOptions.canvasActions;if(this.actions[t]&&"PanelComponent"in this.actions[t]&&(!(t in r)||r[t])){let r=this.actions[t],i=r.PanelComponent;i.displayName="PanelComponent";let s=this.getElementsIncludingDeleted(),a=this.getAppState(),o=e=>{w9(r,"ui",a,s,this.app,e),this.updater(r.perform(this.getElementsIncludingDeleted(),this.getAppState(),e,this.app))};return e.jsx(i,{elements:this.getElementsIncludingDeleted(),appState:this.getAppState(),updateData:o,appProps:this.app.props,app:this.app,data:n})}return null}),XM(this,"isActionEnabled",e=>{let t=this.getElementsIncludingDeleted(),n=this.getAppState();return!e.predicate||e.predicate(t,n,this.app.props,this.app)}),this.updater=e=>{if(!HL(e))return t(e);e.then(e=>t(e))},this.getAppState=n,this.getElementsIncludingDeleted=r,this.app=i}registerAction(e){this.actions[e.name]=e}registerAll(e){e.forEach(e=>this.registerAction(e))}handleKeyDown(e){let t=this.app.props.UIOptions.canvasActions,n=Object.values(this.actions).sort((e,t)=>(t.keyPriority||0)-(e.keyPriority||0)).filter(n=>(!(n.name in t)||t[n.name])&&n.keyTest&&n.keyTest(e,this.getAppState(),this.getElementsIncludingDeleted(),this.app));if(1!==n.length)return n.length,!1;let r=n[0];if(this.getAppState().viewModeEnabled&&!0!==r.viewMode)return!1;let i=this.getElementsIncludingDeleted(),s=this.getAppState();return w9(r,"keyboard",s,i,this.app,null),e.preventDefault(),e.stopPropagation(),this.updater(n[0].perform(i,s,null,this.app)),!0}executeAction(e,t="api",n=null){let r=this.getElementsIncludingDeleted(),i=this.getAppState();w9(e,t,i,r,this.app,n),this.updater(e.perform(r,i,n,this.app))}},E9=e=>{let t=Array.from(e.values());return{x:C9(t,e=>e.x)/t.length,y:C9(t,e=>e.y)/t.length}},k9=([e,t])=>Math.hypot(e.x-t.x,e.y-t.y),C9=(e,t)=>e.reduce((e,n)=>e+t(n),0),_9=({children:n,left:r,top:i,onCloseRequest:s,fitInViewport:a=!1,offsetLeft:o=0,offsetTop:l=0,viewportWidth:c=window.innerWidth,viewportHeight:d=window.innerHeight})=>{let u=vt.useRef(null);vt.useEffect(()=>{let e=u.current;if(!e)return;e.contains(document.activeElement)||e.focus();let t=t=>{if(t.key===$$.TAB){let n=$L(e),{activeElement:r}=document,i=n.findIndex(e=>e===r);r===e?(t.shiftKey?n[n.length-1]?.focus():n[0].focus(),t.preventDefault(),t.stopImmediatePropagation()):0===i&&t.shiftKey?(n[n.length-1]?.focus(),t.preventDefault(),t.stopImmediatePropagation()):i===n.length-1&&!t.shiftKey&&(n[0]?.focus(),t.preventDefault(),t.stopImmediatePropagation())}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)},[]);let h=vt.useRef(null);return vt.useLayoutEffect(()=>{if(a&&u.current&&null!=i&&null!=r){let e=u.current,{width:t,height:n}=e.getBoundingClientRect();if(h.current?.top===i&&h.current?.left===r)return;h.current={top:i,left:r},t>=c?(e.style.width=`${c}px`,e.style.left="0px",e.style.overflowX="scroll"):e.style.left=r+t-o>c?c-t-10+"px":`${r}px`,n>=d?(e.style.height=d-20+"px",e.style.top="10px",e.style.overflowY="scroll"):e.style.top=i+n-l>d?d-n+"px":`${i}px`}},[i,r,a,c,d,o,l]),vt.useEffect(()=>{if(s){let e=e=>{u.current?.contains(e.target)||t.unstable_batchedUpdates(()=>s(e))};return document.addEventListener("pointerdown",e,!1),()=>document.removeEventListener("pointerdown",e,!1)}},[s]),e.jsx("div",{className:"popover",ref:u,tabIndex:-1,children:n})},M9="separator",I9=St.memo(({actionManager:t,items:n,top:r,left:i,onClose:s})=>{let a=Ire(),o=Mre(),l=n.reduce((e,n)=>(n&&(n===M9||!n.predicate||n.predicate(o,a,t.app.props,t.app))&&e.push(n),e),[]);return e.jsx(_9,{onCloseRequest:()=>{s()},top:r,left:i,fitInViewport:!0,offsetLeft:a.offsetLeft,offsetTop:a.offsetTop,viewportWidth:a.width,viewportHeight:a.height,children:e.jsx("ul",{className:"context-menu",onContextMenu:e=>e.preventDefault(),children:l.map((n,r)=>{if(n===M9)return l[r-1]&&l[r-1]!==M9?e.jsx("hr",{className:"context-menu-item-separator"},r):null;let i=n.name,c="";return n.label&&(c="function"==typeof n.label?y6(n.label(o,a,t.app)):y6(n.label)),e.jsx("li",{"data-testid":i,onClick:()=>{s(()=>{t.executeAction(n,"contextMenu")})},children:e.jsxs("button",{type:"button",className:BP("context-menu-item",{dangerous:"deleteSelectedElements"===i,checkmark:n.checked?.(a)}),children:[e.jsx("div",{className:"context-menu-item__label",children:c}),e.jsx("kbd",{className:"context-menu-item__shortcut",children:i?P4(i):""})]})},r)})})})}),j9=({children:t,onClose:n})=>{let[r,i]=vt.useState(!!t),{container:s}=_re(),a=St.useCallback(()=>{i(!1),n&&n(),s?.focus()},[n,s]);return e.jsx(e.Fragment,{children:r&&e.jsx(I4,{size:"small",onCloseRequest:a,title:y6("errorDialog.title"),children:e.jsx("div",{style:{whiteSpace:"pre-wrap"},children:t})})})},T9=function({onChange:t,value:n,choices:r,name:i}){return e.jsx("div",{className:"RadioGroup",children:r.map(r=>e.jsxs("div",{className:BP("RadioGroup__choice",{active:r.value===n}),title:r.ariaLabel,children:[e.jsx("input",{name:i,type:"radio",checked:r.value===n,onChange:()=>t(r.value),"aria-label":r.ariaLabel}),r.label]},String(r.value)))})},R9=({title:t,name:n,checked:r,onChange:i,disabled:s=!1})=>e.jsx("div",{className:BP("Switch",{toggled:r,disabled:s}),children:e.jsx("input",{name:n,id:n,title:t,type:"checkbox",checked:r,disabled:s,onChange:()=>i(!r),onKeyDown:e=>{" "===e.key&&i(!r)}})}),P9=vt.forwardRef(({children:t,icon:n,onClick:r,label:i,variant:s="filled",color:a="primary",size:o="medium",fullWidth:l,className:c,status:d},u)=>{let[h,p]=vt.useState(!1),f=h?"loading":d;return a="success"===f?"success":a,e.jsx("button",{className:BP("ExcButton",`ExcButton--color-${a}`,`ExcButton--variant-${s}`,`ExcButton--size-${o}`,`ExcButton--status-${f}`,{"ExcButton--fullWidth":l},c),onClick:async e=>{let t=r?.(e);if(HL(t)){let e=window.setTimeout(()=>{p(!0)},50);try{await t}catch(n){if(!(n instanceof SH))throw n}finally{clearTimeout(e),p(!1)}}},type:"button","aria-label":i,ref:u,disabled:"loading"===f||"success"===f,children:e.jsxs("div",{className:"ExcButton__contents",children:["loading"===f?e.jsx(w6,{className:"ExcButton__statusIcon"}):"success"===f&&e.jsx("div",{className:"ExcButton__statusIcon",children:IB}),n&&e.jsx("div",{className:"ExcButton__icon","aria-hidden":!0,children:n}),"icon"!==s&&(t??i)]})})}),A9="filter"in document.createElement("canvas").getContext("2d"),N9=()=>e.jsxs("div",{children:[e.jsx("h3",{children:y6("canvasError.cannotShowPreview")}),e.jsx("p",{children:e.jsx("span",{children:y6("canvasError.canvasTooBig")})}),e.jsxs("em",{children:["(",y6("canvasError.canvasTooBigTip"),")"]})]}),D9=({appStateSnapshot:t,elementsSnapshot:n,files:r,actionManager:i,onExportImage:s,name:a})=>{let o=_K(n,t),[l,c]=vt.useState(a),[d,u]=vt.useState(o),[h,p]=vt.useState(t.exportBackground),[f,m]=vt.useState(t.exportWithDarkMode),[g,b]=vt.useState(t.exportEmbedScene),[U,y]=vt.useState(t.exportScale),x=vt.useRef(null),[v,w]=vt.useState(null),{onCopy:S,copyStatus:E,resetCopyStatus:k}=(()=>{let[e,t]=vt.useState(null),n=vt.useRef(0);return{copyStatus:e,resetCopyStatus:vt.useCallback(()=>{t(null)},[]),onCopy:()=>{clearTimeout(n.current),t("success"),n.current=window.setTimeout(()=>{t(null)},2e3)}}})();vt.useEffect(()=>{k()},[l,h,f,U,g,k]);let{exportedElements:C,exportingFrame:_}=E8(n,t,d);return vt.useEffect(()=>{let e=x.current;if(!e)return;let n=e.offsetWidth,i=e.offsetHeight;n&&WZ({elements:C,appState:{...t,name:l,exportBackground:h,exportWithDarkMode:f,exportScale:U,exportEmbedScene:g},files:r,exportPadding:yN,maxWidthOrHeight:Math.max(n,i),exportingFrame:_}).then(t=>(w(null),PQ(t).then(()=>{e.replaceChildren(t)}).catch(e=>{throw"CANVAS_POSSIBLY_TOO_BIG"===e.name?new Error(y6("canvasError.canvasTooBig")):e}))).catch(e=>{w(e)})},[t,r,C,_,l,h,f,U,g]),e.jsxs("div",{className:"ImageExportModal",children:[e.jsx("h3",{children:y6("imageExportDialog.header")}),e.jsxs("div",{className:"ImageExportModal__preview",children:[e.jsx("div",{className:"ImageExportModal__preview__canvas",ref:x,children:v&&e.jsx(N9,{})}),e.jsx("div",{className:"ImageExportModal__preview__filename",children:!sA&&e.jsx("input",{type:"text",className:"TextInput",value:l,style:{width:"30ch"},onChange:e=>{c(e.target.value),i.executeAction(_8,"ui",e.target.value)}})})]}),e.jsxs("div",{className:"ImageExportModal__settings",children:[e.jsx("h3",{children:y6("imageExportDialog.header")}),o&&e.jsx(L9,{label:y6("imageExportDialog.label.onlySelected"),name:"exportOnlySelected",children:e.jsx(R9,{name:"exportOnlySelected",checked:d,onChange:e=>{u(e)}})}),e.jsx(L9,{label:y6("imageExportDialog.label.withBackground"),name:"exportBackgroundSwitch",children:e.jsx(R9,{name:"exportBackgroundSwitch",checked:h,onChange:e=>{p(e),i.executeAction(I8,"ui",e)}})}),A9&&e.jsx(L9,{label:y6("imageExportDialog.label.darkMode"),name:"exportDarkModeSwitch",children:e.jsx(R9,{name:"exportDarkModeSwitch",checked:f,onChange:e=>{m(e),i.executeAction(A8,"ui",e)}})}),e.jsx(L9,{label:y6("imageExportDialog.label.embedScene"),tooltip:y6("imageExportDialog.tooltip.embedScene"),name:"exportEmbedSwitch",children:e.jsx(R9,{name:"exportEmbedSwitch",checked:g,onChange:e=>{b(e),i.executeAction(j8,"ui",e)}})}),e.jsx(L9,{label:y6("imageExportDialog.label.scale"),name:"exportScale",children:e.jsx(T9,{name:"exportScale",value:U,onChange:e=>{y(e),i.executeAction(M8,"ui",e)},choices:UN.map(e=>({value:e,label:`${e}×`}))})}),e.jsxs("div",{className:"ImageExportModal__settings__buttons",children:[e.jsx(P9,{className:"ImageExportModal__settings__buttons__button",label:y6("imageExportDialog.title.exportToPng"),onClick:()=>s(dN,C,{exportingFrame:_}),icon:kB,children:y6("imageExportDialog.button.exportToPng")}),e.jsx(P9,{className:"ImageExportModal__settings__buttons__button",label:y6("imageExportDialog.title.exportToSvg"),onClick:()=>s(uN,C,{exportingFrame:_}),icon:kB,children:y6("imageExportDialog.button.exportToSvg")}),(DZ||wA)&&e.jsx(P9,{className:"ImageExportModal__settings__buttons__button",label:y6("imageExportDialog.title.copyPngToClipboard"),status:E,onClick:async()=>{await s(hN,C,{exportingFrame:_}),S()},icon:CB,children:y6("imageExportDialog.button.copyPngToClipboard")})]})]})]})},L9=({label:t,children:n,tooltip:r,name:i})=>e.jsxs("div",{className:"ImageExportModal__settings__setting",title:t,children:[e.jsxs("label",{htmlFor:i,className:"ImageExportModal__settings__setting__label",children:[t,r&&e.jsx(u8,{label:r,long:!0,children:MB})]}),e.jsx("div",{className:"ImageExportModal__settings__setting__content",children:n})]}),O9=({elements:t,appState:n,files:r,actionManager:i,onExportImage:s,onCloseRequest:a,name:o})=>{let[{appStateSnapshot:l,elementsSnapshot:c}]=vt.useState(()=>({appStateSnapshot:ZL(n),elementsSnapshot:ZL(t)}));return e.jsx(I4,{onCloseRequest:a,size:"wide",title:!1,children:e.jsx(D9,{elementsSnapshot:c,appStateSnapshot:l,files:r,actionManager:i,onExportImage:s,name:o})})},F9=({children:t,side:n,className:r})=>e.jsx("div",{className:BP("FixedSideContainer",`FixedSideContainer_side_${n}`,r),children:t}),z9=100,B9=100,H9=e=>{switch(e){case $$.ARROW_UP:return"up";case $$.ARROW_DOWN:return"down";case $$.ARROW_RIGHT:return"right";case $$.ARROW_LEFT:return"left";default:return"right"}},$9=(e,t,n,r)=>{let i=[...n.values()].reduce((r,i)=>{let s;if(SO(i)&&(s=i["predecessors"===e?"startBinding":"endBinding"])&&i["predecessors"===e?"endBinding":"startBinding"]?.elementId===t.id){let a=n.get(s.elementId);if(!a)return r;YL(_O(a),"not an ExcalidrawBindableElement");let o="predecessors"===e?i.points[i.points.length-1]:[0,0],l=XW(t,nW(t),[o[0]+i.x,o[1]+i.y]);r.push({relative:a,heading:l})}return r},[]);switch(r){case"up":return i.filter(e=>$W(e.heading,OW)).map(e=>e.relative);case"down":return i.filter(e=>$W(e.heading,DW)).map(e=>e.relative);case"right":return i.filter(e=>$W(e.heading,NW)).map(e=>e.relative);case"left":return i.filter(e=>$W(e.heading,LW)).map(e=>e.relative)}},W9=(e,t,n)=>$9("successors",e,t,n),X9=(e,t,n)=>$9("predecessors",e,t,n),V9=(e,t,n,r)=>{let i=((e,t,n)=>{let r=B9+e.width;if("up"===n||"down"===n){let r=z9+e.height,i=e.x,s=e.x+e.width;if(t.every(e=>e.x+e.width<i||e.x>s))return{x:0,y:r*("up"===n?-1:1)}}else if("right"===n||"left"===n){let r=e.y,i=e.y+e.height;if(t.every(e=>e.y+e.height<r||e.y>i))return{x:(B9+e.width)*("left"===n?-1:1),y:0}}if("up"===n||"down"===n){let i=z9+e.height,s=(t.length,i),a=0===t.length?0:(t.length+1)%2==0?(t.length+1)/2*r:t.length/2*r*-1;return"up"===n?{x:a,y:-1*s}:{x:a,y:s}}let i=z9+e.height,s=(t.length,B9+e.width),a=0===t.length?0:(t.length+1)%2==0?(t.length+1)/2*i:t.length/2*i*-1;return"left"===n?{x:-1*s,y:a}:{x:s,y:a}})(e,[...W9(e,t,r),...X9(e,t,r)],r),s=FG({type:e.type,x:e.x+i.x,y:e.y+i.y,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});return YL(jO(s),"not an ExcalidrawFlowchartNodeElement"),{nextNode:s,bindingArrow:G9(e,s,t,r,n)}},G9=(e,t,n,r,i)=>{let s,a,o,l;switch(r){case"up":s=e.x+e.width/2,a=e.y-6;break;case"down":s=e.x+e.width/2,a=e.y+e.height+6;break;case"right":s=e.x+e.width+6,a=e.y+e.height/2;break;case"left":s=e.x-6,a=e.y+e.height/2}switch(r){case"up":o=t.x+t.width/2-s,l=t.y+t.height-a+6;break;case"down":o=t.x+t.width/2-s,l=t.y-a-6;break;case"right":o=t.x-s-6,l=t.y-a+t.height/2;break;case"left":o=t.x+t.width-s+6,l=t.y-a+t.height/2}let c=YG({type:"arrow",x:s,y:a,startArrowhead:null,endArrowhead:i.currentItemEndArrowhead,strokeColor:e.strokeColor,strokeStyle:e.strokeStyle,strokeWidth:e.strokeWidth,opacity:e.opacity,roughness:e.roughness,points:[PD(0,0),PD(o,l)],elbowed:!0});AX(c,e,"start",n),AX(c,t,"end",n);let d=new Map;d.set(e.id,e),d.set(t.id,t),d.set(c.id,c),eG.movePoints(c,[{index:1,point:c.points[1]}]);let u=Aq(c,iO(new Map([...n.entries(),[e.id,e],[t.id,t],[c.id,c]])),{points:c.points});return{...c,...u}},Y9=class{constructor(){XM(this,"isExploring",!1),XM(this,"sameLevelNodes",[]),XM(this,"sameLevelIndex",0),XM(this,"direction",null),XM(this,"visitedNodes",new Set)}clear(){this.isExploring=!1,this.sameLevelNodes=[],this.sameLevelIndex=0,this.direction=null,this.visitedNodes.clear()}exploreByDirection(e,t,n){if(!_O(e))return null;if(n!==this.direction&&this.clear(),this.visitedNodes.has(e.id)||this.visitedNodes.add(e.id),this.isExploring&&n===this.direction&&this.sameLevelNodes.length>1)return this.sameLevelIndex=(this.sameLevelIndex+1)%this.sameLevelNodes.length,this.sameLevelNodes[this.sameLevelIndex].id;let r=[...W9(e,t,n),...X9(e,t,n)];if(r.length>0)return this.sameLevelIndex=0,this.isExploring=!0,this.sameLevelNodes=r,this.direction=n,this.visitedNodes.add(r[0].id),r[0].id;if(n===this.direction||!this.isExploring){this.isExploring||this.visitedNodes.add(e.id);let r=["up","right","down","left"].filter(e=>e!==n).map(n=>[...W9(e,t,n),...X9(e,t,n)]).flat().filter(e=>!this.visitedNodes.has(e.id));for(let e of r)if(!this.visitedNodes.has(e.id))return this.visitedNodes.add(e.id),this.isExploring=!0,this.direction=n,e.id}return null}},q9=class{constructor(){XM(this,"isCreatingChart",!1),XM(this,"numberOfNodes",0),XM(this,"direction","right"),XM(this,"pendingNodes",null)}createNodes(e,t,n,r){if(r!==this.direction){let{nextNode:i,bindingArrow:s}=V9(e,t,n,r);this.numberOfNodes=1,this.isCreatingChart=!0,this.direction=r,this.pendingNodes=[i,s]}else{this.numberOfNodes+=1;let i=((e,t,n,r,i)=>{let s=[];for(let a=0;a<i;a++){let o,l;if("left"===r||"right"===r){let t=z9*(i-1)+i*e.height,n=e.y+e.height/2-t/2,s=B9+e.width;"left"===r&&(s*=-1),o=e.x+s,l=n+(z9+e.height)*a}else{let t=B9*(i-1)+i*e.width,n=e.x+e.width/2-t/2,s=z9+e.height;"up"===r&&(s*=-1),l=e.y+s,o=n+(B9+e.width)*a}let c=FG({type:e.type,x:o,y:l,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});YL(jO(c),"not an ExcalidrawFlowchartNodeElement");let d=G9(e,c,t,r,n);s.push(c),s.push(d)}return s})(e,t,n,r,this.numberOfNodes);this.isCreatingChart=!0,this.direction=r,this.pendingNodes=i}if(e.frameId){let n=t.get(e.frameId);YL(n&&gO(n),"not an ExcalidrawFrameElement"),n&&this.pendingNodes.every(e=>rK([e],n,t)||iK(e,n,t))&&(this.pendingNodes=this.pendingNodes.map(t=>DK(t,{frameId:e.frameId},!1)))}}clear(){this.isCreatingChart=!1,this.pendingNodes=null,this.direction=null,this.numberOfNodes=0}},Z9=({appState:t,isMobile:n,device:r,app:i})=>{let s=(({appState:e,isMobile:t,device:n,app:r})=>{let{activeTool:i,isResizing:s,isRotating:a,lastPointerDownWith:o}=e,l=null!==e.multiElement;if(e.openSidebar?.name===BN&&e.openSidebar.tab===zN&&e.searchMatches?.length)return y6("hints.dismissSearch");if(e.openSidebar&&!n.editor.canFitSidebar)return null;if(mD(e))return y6("hints.eraserRevert");if("arrow"===i.type||"line"===i.type)return l?y6("hints.linearElementMulti"):"arrow"===i.type?y6("hints.arrowTool",{arrowShortcut:SL("A")}):y6("hints.linearElement");if("freedraw"===i.type)return y6("hints.freeDraw");if("text"===i.type)return y6("hints.text");if("embeddable"===i.type)return y6("hints.embeddable");if("image"===e.activeTool.type&&e.pendingImageElementId)return y6("hints.placeImage");let c=r.scene.getSelectedElements(e);if(s&&"mouse"===o&&1===c.length){let e=c[0];return vO(e)&&2===e.points.length?y6("hints.lockAngle"):uO(e)?y6("hints.resizeImage"):y6("hints.resize")}if(a&&"mouse"===o)return y6("hints.rotate");if(1===c.length&&mO(c[0]))return y6("hints.text_selected");if(e.editingTextElement)return y6("hints.text_editing");if(e.croppingElementId)return y6("hints.leaveCropEditor");if(1===c.length&&uO(c[0]))return y6("hints.enterCropEditor");if("selection"===i.type){if(e.selectionElement&&!c.length&&!e.editingTextElement&&!e.editingLinearElement)return y6("hints.deepBoxSelect");if(OV(r)&&e.selectedElementsAreBeingDragged)return y6("hints.disableSnapping");if(!c.length&&!t)return y6("hints.canvasPanning");if(1===c.length){if(vO(c[0]))return e.editingLinearElement?e.editingLinearElement.selectedPointsIndices?y6("hints.lineEditor_pointSelected"):y6("hints.lineEditor_nothingSelected"):y6("hints.lineEditor_info");if(!e.newElement&&!e.selectedElementsAreBeingDragged&&MO(c[0]))return jO(c[0])?(((e,t)=>{for(let[,n]of t)if("arrow"===n.type&&(n.startBinding?.elementId===e.id||n.endBinding?.elementId===e.id))return!0})(c[0],r.scene.getNonDeletedElementsMap()),[y6("hints.bindTextToElement"),y6("hints.createFlowchart")]):y6("hints.bindTextToElement")}}return null})({appState:t,isMobile:n,device:r,app:i});if(!s)return null;let a=Array.isArray(s)?s.map(e=>SL(e).replace(/\. ?$/,"")).join(". "):SL(s);return e.jsx("div",{className:"HintViewer",children:e.jsx("span",{children:a})})},K9={CHECKED:MF,UNCHECKED:_F},Q9=t=>e.jsxs("label",{className:BP("ToolIcon ToolIcon__lock","ToolIcon_size_medium",{"is-mobile":t.isMobile}),title:`${t.title} — Q`,children:[e.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:t.name,onChange:t.onChange,checked:t.checked,"aria-label":t.title,"data-testid":"toolbar-lock"}),e.jsx("div",{className:"ToolIcon__icon",children:t.checked?K9.CHECKED:K9.UNCHECKED})]}),J9=({heading:t,children:n,...r})=>{let{id:i}=_re(),s=e.jsx("h2",{className:"visually-hidden",id:`${i}-${t}-title`,children:y6(`headings.${t}`)});return e.jsx("section",{...r,"aria-labelledby":`${i}-${t}-title`,children:"function"==typeof n?n(s):e.jsxs(e.Fragment,{children:[s,n]})})},eee=(e,t,n)=>{let[r,i]=[e.horizontal,e.vertical].map(e=>null!=e&&e.x<=t&&t<=e.x+e.width&&e.y<=n&&n<=e.y+e.height);return{isOverEither:r||i,isOverHorizontal:r,isOverVertical:i}},tee=t=>t.penDetected?e.jsxs("label",{className:BP("ToolIcon ToolIcon__penMode","ToolIcon_size_medium",{"is-mobile":t.isMobile}),title:`${t.title}`,children:[e.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:t.name,onChange:t.onChange,checked:t.checked,"aria-label":t.title}),e.jsx("div",{className:"ToolIcon__icon",children:OF})]}):null,nee=t=>e.jsx(k6,{className:BP("Shape",{fillable:!1}),type:"radio",icon:EB,name:"editor-current-shape",checked:t.checked,title:`${t.title} — H`,keyBindingLabel:t.isMobile?void 0:$$.H.toLocaleUpperCase(),"aria-label":`${t.title} — H`,"aria-keyshortcuts":$$.H,"data-testid":"toolbar-hand",onChange:()=>t.onChange?.()}),ree=({appState:t,elements:n,actionManager:r,setAppState:i,onLockToggle:s,onHandToolToggle:a,onPenModeToggle:o,renderTopRightUI:l,renderCustomStats:c,renderSidebars:d,device:u,renderWelcomeScreen:h,UIOptions:p,app:f})=>{let{WelcomeScreenCenterTunnel:m,MainMenuTunnel:g,DefaultSidebarTriggerTunnel:b}=F4();return e.jsxs(e.Fragment,{children:[d(),!t.viewModeEnabled&&"elementLinkSelector"!==t.openDialog?.name&&e.jsxs(F9,{side:"top",className:"App-top-bar",children:[h&&e.jsx(m.Out,{}),e.jsx(J9,{heading:"shapes",children:n=>e.jsx(H7.Col,{gap:4,align:"center",children:e.jsxs(H7.Row,{gap:1,className:"App-toolbar-container",children:[e.jsxs(S3,{padding:1,className:"App-toolbar App-toolbar--mobile",children:[n,e.jsx(H7.Row,{gap:1,children:e.jsx(W4,{appState:t,activeTool:t.activeTool,UIOptions:p,app:f})})]}),l&&l(!0,t),e.jsxs("div",{className:"mobile-misc-tools-container",children:[!t.viewModeEnabled&&"elementLinkSelector"!==t.openDialog?.name&&e.jsx(b.Out,{}),e.jsx(tee,{checked:t.penMode,onChange:()=>o(null),title:y6("toolBar.penMode"),isMobile:!0,penDetected:t.penDetected}),e.jsx(Q9,{checked:t.activeTool.locked,onChange:s,title:y6("toolBar.lock"),isMobile:!0}),e.jsx(nee,{checked:gD(t),onChange:()=>a(),title:y6("toolBar.hand"),isMobile:!0})]})]})})}),e.jsx(Z9,{appState:t,isMobile:!0,device:u,app:f})]}),e.jsx("div",{className:"App-bottom-bar",style:{marginBottom:14,marginLeft:14,marginRight:14},children:e.jsxs(S3,{padding:0,children:["shape"===t.openMenu&&!t.viewModeEnabled&&"elementLinkSelector"!==t.openDialog?.name&&yQ(t,n)?e.jsx(J9,{className:"App-mobile-menu",heading:"selectedShapeActions",children:e.jsx($4,{appState:t,elementsMap:f.scene.getNonDeletedElementsMap(),renderAction:r.renderAction,app:f})}):null,e.jsxs("footer",{className:"App-toolbar",children:[t.viewModeEnabled||"elementLinkSelector"===t.openDialog?.name?e.jsx("div",{className:"App-toolbar-content",children:e.jsx(g.Out,{})}):e.jsxs("div",{className:"App-toolbar-content",children:[e.jsx(g.Out,{}),r.renderAction("toggleEditMenu"),r.renderAction(t.multiElement?"finalize":"duplicateSelection"),r.renderAction("deleteSelectedElements"),e.jsxs("div",{children:[r.renderAction("undo"),r.renderAction("redo")]})]}),t.scrolledOutside&&!t.openMenu&&!t.openSidebar&&e.jsx("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{i(e=>({...UV(n,e)}))},children:y6("buttons.scrollBackToContent")})]})]})})]})},iee=t=>{let n=vt.useRef(null),[r,i]=vt.useState(null);return vt.useLayoutEffect(()=>{if(!t.spreadsheet)return;let e=AZ(t.chartType,t.spreadsheet,0,0);i(e);let r,s=n.current;return(async()=>{r=await Mq(e,{exportBackground:!1,viewBackgroundColor:aR.white},null,{skipInliningFonts:!0}),r.querySelector(".style-fonts")?.remove(),s.replaceChildren(),s.appendChild(r),t.selected&&s.parentNode.focus()})(),()=>{s.replaceChildren()}},[t.spreadsheet,t.chartType,t.selected]),e.jsx("button",{type:"button",className:"ChartPreview",onClick:()=>{r&&t.onClick(t.chartType,r)},children:e.jsx("div",{ref:n})})},see=({setAppState:t,appState:n,onClose:r})=>{let{onInsertElements:i}=Ere(),s=St.useCallback(()=>{r&&r()},[r]),a=(e,n)=>{i(n),Z6("paste","chart",e),t({currentChartType:e,pasteDialog:{shown:!1,data:null}})};return e.jsx(I4,{size:"small",onCloseRequest:s,title:y6("labels.pasteCharts"),className:"PasteChartDialog",autofocus:!1,children:e.jsxs("div",{className:"container",children:[e.jsx(iee,{chartType:"bar",spreadsheet:n.pasteDialog.data,selected:"bar"===n.currentChartType,onClick:a}),e.jsx(iee,{chartType:"line",spreadsheet:n.pasteDialog.data,selected:"line"===n.currentChartType,onClick:a})]})})},aee=()=>e.jsxs("div",{className:"HelpDialog__header",children:[e.jsxs("a",{className:"HelpDialog__btn",href:"https://docs.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:[e.jsx("div",{className:"HelpDialog__link-icon",children:tz}),y6("helpDialog.documentation")]}),e.jsxs("a",{className:"HelpDialog__btn",href:"https://plus.excalidraw.com/blog",target:"_blank",rel:"noopener noreferrer",children:[e.jsx("div",{className:"HelpDialog__link-icon",children:tz}),y6("helpDialog.blog")]}),e.jsxs("a",{className:"HelpDialog__btn",href:"https://github.com/excalidraw/excalidraw/issues",target:"_blank",rel:"noopener noreferrer",children:[e.jsx("div",{className:"HelpDialog__link-icon",children:nz}),y6("helpDialog.github")]}),e.jsxs("a",{className:"HelpDialog__btn",href:"https://youtube.com/@excalidraw",target:"_blank",rel:"noopener noreferrer",children:[e.jsx("div",{className:"HelpDialog__link-icon",children:iH}),"YouTube"]})]}),oee=t=>e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:t.title}),e.jsx("div",{className:"HelpDialog__islands-container",children:t.children})]}),lee=t=>e.jsxs("div",{className:`HelpDialog__island ${t.className}`,children:[e.jsx("h4",{className:"HelpDialog__island-title",children:t.caption}),e.jsx("div",{className:"HelpDialog__island-content",children:t.children})]});function*cee(e,t){let n=!0;for(let r of e)n||(yield t),n=!1,yield r}var dee=e=>e.replace(/\b[a-z]\b/,e=>e.toUpperCase()),uee=({label:t,shortcuts:n,isOr:r=!0})=>{let i=n.map(t=>(t.endsWith("++")?[...t.slice(0,-2).split("+"),"+"]:t.split("+")).map(t=>e.jsx(hee,{children:dee(t)},t)));return e.jsxs("div",{className:"HelpDialog__shortcut",children:[e.jsx("div",{children:t}),e.jsx("div",{className:"HelpDialog__key-container",children:[...cee(i,r?y6("helpDialog.or"):null)]})]})},hee=t=>e.jsx("kbd",{className:"HelpDialog__key",...t}),pee=({onClose:t})=>{let n=St.useCallback(()=>{t&&t()},[t]);return e.jsx(e.Fragment,{children:e.jsxs(I4,{onCloseRequest:n,title:y6("helpDialog.title"),className:"HelpDialog",children:[e.jsx(aee,{}),e.jsxs(oee,{title:y6("helpDialog.shortcuts"),children:[e.jsxs(lee,{className:"HelpDialog__island--tools",caption:y6("helpDialog.tools"),children:[e.jsx(uee,{label:y6("toolBar.hand"),shortcuts:[$$.H]}),e.jsx(uee,{label:y6("toolBar.selection"),shortcuts:[$$.V,$$[1]]}),e.jsx(uee,{label:y6("toolBar.rectangle"),shortcuts:[$$.R,$$[2]]}),e.jsx(uee,{label:y6("toolBar.diamond"),shortcuts:[$$.D,$$[3]]}),e.jsx(uee,{label:y6("toolBar.ellipse"),shortcuts:[$$.O,$$[4]]}),e.jsx(uee,{label:y6("toolBar.arrow"),shortcuts:[$$.A,$$[5]]}),e.jsx(uee,{label:y6("toolBar.line"),shortcuts:[$$.L,$$[6]]}),e.jsx(uee,{label:y6("toolBar.freedraw"),shortcuts:[$$.P,$$[7]]}),e.jsx(uee,{label:y6("toolBar.text"),shortcuts:[$$.T,$$[8]]}),e.jsx(uee,{label:y6("toolBar.image"),shortcuts:[$$[9]]}),e.jsx(uee,{label:y6("toolBar.eraser"),shortcuts:[$$.E,$$[0]]}),e.jsx(uee,{label:y6("toolBar.frame"),shortcuts:[$$.F]}),e.jsx(uee,{label:y6("toolBar.laser"),shortcuts:[$$.K]}),e.jsx(uee,{label:y6("labels.eyeDropper"),shortcuts:[$$.I,"Shift+S","Shift+G"]}),e.jsx(uee,{label:y6("helpDialog.editLineArrowPoints"),shortcuts:[SL("CtrlOrCmd+Enter")]}),e.jsx(uee,{label:y6("helpDialog.editText"),shortcuts:[SL("Enter")]}),e.jsx(uee,{label:y6("helpDialog.textNewLine"),shortcuts:[SL("Enter"),SL("Shift+Enter")]}),e.jsx(uee,{label:y6("helpDialog.textFinish"),shortcuts:[SL("Esc"),SL("CtrlOrCmd+Enter")]}),e.jsx(uee,{label:y6("helpDialog.curvedArrow"),shortcuts:["A",y6("helpDialog.click"),y6("helpDialog.click"),y6("helpDialog.click")],isOr:!1}),e.jsx(uee,{label:y6("helpDialog.curvedLine"),shortcuts:["L",y6("helpDialog.click"),y6("helpDialog.click"),y6("helpDialog.click")],isOr:!1}),e.jsx(uee,{label:y6("helpDialog.cropStart"),shortcuts:[y6("helpDialog.doubleClick"),SL("Enter")],isOr:!0}),e.jsx(uee,{label:y6("helpDialog.cropFinish"),shortcuts:[SL("Enter"),SL("Escape")],isOr:!0}),e.jsx(uee,{label:y6("toolBar.lock"),shortcuts:[$$.Q]}),e.jsx(uee,{label:y6("helpDialog.preventBinding"),shortcuts:[SL("CtrlOrCmd")]}),e.jsx(uee,{label:y6("toolBar.link"),shortcuts:[SL("CtrlOrCmd+K")]})]}),e.jsxs(lee,{className:"HelpDialog__island--view",caption:y6("helpDialog.view"),children:[e.jsx(uee,{label:y6("buttons.zoomIn"),shortcuts:[SL("CtrlOrCmd++")]}),e.jsx(uee,{label:y6("buttons.zoomOut"),shortcuts:[SL("CtrlOrCmd+-")]}),e.jsx(uee,{label:y6("buttons.resetZoom"),shortcuts:[SL("CtrlOrCmd+0")]}),e.jsx(uee,{label:y6("helpDialog.zoomToFit"),shortcuts:["Shift+1"]}),e.jsx(uee,{label:y6("helpDialog.zoomToSelection"),shortcuts:["Shift+2"]}),e.jsx(uee,{label:y6("helpDialog.movePageUpDown"),shortcuts:["PgUp/PgDn"]}),e.jsx(uee,{label:y6("helpDialog.movePageLeftRight"),shortcuts:["Shift+PgUp/PgDn"]}),e.jsx(uee,{label:y6("buttons.zenMode"),shortcuts:[SL("Alt+Z")]}),e.jsx(uee,{label:y6("buttons.objectsSnapMode"),shortcuts:[SL("Alt+S")]}),e.jsx(uee,{label:y6("labels.toggleGrid"),shortcuts:[SL("CtrlOrCmd+'")]}),e.jsx(uee,{label:y6("labels.viewMode"),shortcuts:[SL("Alt+R")]}),e.jsx(uee,{label:y6("labels.toggleTheme"),shortcuts:[SL("Alt+Shift+D")]}),e.jsx(uee,{label:y6("stats.fullTitle"),shortcuts:[SL("Alt+/")]}),e.jsx(uee,{label:y6("search.title"),shortcuts:[P4("searchMenu")]}),e.jsx(uee,{label:y6("commandPalette.title"),shortcuts:wA?[P4("commandPalette")]:[P4("commandPalette"),P4("commandPalette",1)]})]}),e.jsxs(lee,{className:"HelpDialog__island--editor",caption:y6("helpDialog.editor"),children:[e.jsx(uee,{label:y6("helpDialog.createFlowchart"),shortcuts:[SL("CtrlOrCmd+Arrow Key")],isOr:!0}),e.jsx(uee,{label:y6("helpDialog.navigateFlowchart"),shortcuts:[SL("Alt+Arrow Key")],isOr:!0}),e.jsx(uee,{label:y6("labels.moveCanvas"),shortcuts:[SL(`Space+${y6("helpDialog.drag")}`),SL(`Wheel+${y6("helpDialog.drag")}`)],isOr:!0}),e.jsx(uee,{label:y6("buttons.clearReset"),shortcuts:[SL("CtrlOrCmd+Delete")]}),e.jsx(uee,{label:y6("labels.delete"),shortcuts:[SL("Delete")]}),e.jsx(uee,{label:y6("labels.cut"),shortcuts:[SL("CtrlOrCmd+X")]}),e.jsx(uee,{label:y6("labels.copy"),shortcuts:[SL("CtrlOrCmd+C")]}),e.jsx(uee,{label:y6("labels.paste"),shortcuts:[SL("CtrlOrCmd+V")]}),e.jsx(uee,{label:y6("labels.pasteAsPlaintext"),shortcuts:[SL("CtrlOrCmd+Shift+V")]}),e.jsx(uee,{label:y6("labels.selectAll"),shortcuts:[SL("CtrlOrCmd+A")]}),e.jsx(uee,{label:y6("labels.multiSelect"),shortcuts:[SL(`Shift+${y6("helpDialog.click")}`)]}),e.jsx(uee,{label:y6("helpDialog.deepSelect"),shortcuts:[SL(`CtrlOrCmd+${y6("helpDialog.click")}`)]}),e.jsx(uee,{label:y6("helpDialog.deepBoxSelect"),shortcuts:[SL(`CtrlOrCmd+${y6("helpDialog.drag")}`)]}),(DZ||wA)&&e.jsx(uee,{label:y6("labels.copyAsPng"),shortcuts:[SL("Shift+Alt+C")]}),e.jsx(uee,{label:y6("labels.copyStyles"),shortcuts:[SL("CtrlOrCmd+Alt+C")]}),e.jsx(uee,{label:y6("labels.pasteStyles"),shortcuts:[SL("CtrlOrCmd+Alt+V")]}),e.jsx(uee,{label:y6("labels.sendToBack"),shortcuts:[SL(yA?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")]}),e.jsx(uee,{label:y6("labels.bringToFront"),shortcuts:[SL(yA?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")]}),e.jsx(uee,{label:y6("labels.sendBackward"),shortcuts:[SL("CtrlOrCmd+[")]}),e.jsx(uee,{label:y6("labels.bringForward"),shortcuts:[SL("CtrlOrCmd+]")]}),e.jsx(uee,{label:y6("labels.alignTop"),shortcuts:[SL("CtrlOrCmd+Shift+Up")]}),e.jsx(uee,{label:y6("labels.alignBottom"),shortcuts:[SL("CtrlOrCmd+Shift+Down")]}),e.jsx(uee,{label:y6("labels.alignLeft"),shortcuts:[SL("CtrlOrCmd+Shift+Left")]}),e.jsx(uee,{label:y6("labels.alignRight"),shortcuts:[SL("CtrlOrCmd+Shift+Right")]}),e.jsx(uee,{label:y6("labels.duplicateSelection"),shortcuts:[SL("CtrlOrCmd+D"),SL(`Alt+${y6("helpDialog.drag")}`)]}),e.jsx(uee,{label:y6("helpDialog.toggleElementLock"),shortcuts:[SL("CtrlOrCmd+Shift+L")]}),e.jsx(uee,{label:y6("buttons.undo"),shortcuts:[SL("CtrlOrCmd+Z")]}),e.jsx(uee,{label:y6("buttons.redo"),shortcuts:xA?[SL("CtrlOrCmd+Y"),SL("CtrlOrCmd+Shift+Z")]:[SL("CtrlOrCmd+Shift+Z")]}),e.jsx(uee,{label:y6("labels.group"),shortcuts:[SL("CtrlOrCmd+G")]}),e.jsx(uee,{label:y6("labels.ungroup"),shortcuts:[SL("CtrlOrCmd+Shift+G")]}),e.jsx(uee,{label:y6("labels.flipHorizontal"),shortcuts:[SL("Shift+H")]}),e.jsx(uee,{label:y6("labels.flipVertical"),shortcuts:[SL("Shift+V")]}),e.jsx(uee,{label:y6("labels.showStroke"),shortcuts:[SL("S")]}),e.jsx(uee,{label:y6("labels.showBackground"),shortcuts:[SL("G")]}),e.jsx(uee,{label:y6("labels.showFonts"),shortcuts:[SL("Shift+F")]}),e.jsx(uee,{label:y6("labels.decreaseFontSize"),shortcuts:[SL("CtrlOrCmd+Shift+<")]}),e.jsx(uee,{label:y6("labels.increaseFontSize"),shortcuts:[SL("CtrlOrCmd+Shift+>")]})]})]})]})})},fee=({shouldWrap:t,children:n,username:r})=>t?e.jsx(u8,{label:r||"Unknown user",children:n}):e.jsx(e.Fragment,{children:n}),mee=({actionManager:t,collaborator:n,socketId:r,withName:i=!1,shouldWrapWithTooltip:s=!1,isBeingFollowed:a})=>{let o={socketId:r,collaborator:n,withName:i,isBeingFollowed:a},l=t.renderAction("goToCollaborator",o);return e.jsx(fee,{username:n.username,shouldWrap:s,children:l},r)},gee=["avatarUrl","id","socketId","username","isInCall","isSpeaking","isMuted"],bee=St.memo(({className:t,mobile:n,collaborators:r,userToFollow:i})=>{let s=Tre(),a=new Map;r.forEach((e,t)=>{let n=e.id||t;a.set(n,{...e,socketId:t})});let o=Array.from(a.values()).filter(e=>e.username?.trim()),[l,c]=St.useState(""),d=o.filter(e=>e.username?.toLowerCase().includes(l)),u=St.useRef(null);vt.useLayoutEffect(()=>{if(u.current){let e=e=>{let t=Math.max(1,Math.min(8,Math.floor(e/38)));p(t)};if(e(u.current.clientWidth),!kA)return;let t=new ResizeObserver(t=>{for(let n of t){let{width:t}=n.contentRect;e(t)}});return t.observe(u.current),()=>{t.disconnect()}}},[]);let[h,p]=St.useState(4),f=o.slice(0,h-1).map(e=>mee({actionManager:s,collaborator:e,socketId:e.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:e.socketId===i}));return n?e.jsx("div",{className:BP("UserList UserList_mobile",t),children:o.map(e=>mee({actionManager:s,collaborator:e,socketId:e.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:e.socketId===i}))}):e.jsx("div",{className:"UserList__wrapper",ref:u,children:e.jsxs("div",{className:BP("UserList",t),style:{"--max-avatars":h},children:[f,o.length>h-1&&e.jsxs(e2,{children:[e.jsxs(t2,{className:"UserList__more",children:["+",o.length-h+1]}),e.jsx(r2,{style:{zIndex:2,width:"15rem",textAlign:"left"},align:"end",sideOffset:10,children:e.jsxs(S3,{padding:2,children:[o.length>=8&&e.jsx(N3,{placeholder:y6("quickSearch.placeholder"),onChange:c}),e.jsx(D3,{className:"dropdown-menu UserList__collaborators",placeholder:y6("userList.empty"),children:d.length>0?[e.jsx("div",{className:"hint",children:y6("userList.hint.text")}),d.map(e=>mee({actionManager:s,collaborator:e,socketId:e.socketId,withName:!0,isBeingFollowed:e.socketId===i}))]:[]}),e.jsx(i2,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})]})]})})},(e,t)=>{if(e.collaborators.size!==t.collaborators.size||e.mobile!==t.mobile||e.className!==t.className||e.userToFollow!==t.userToFollow)return!1;let n=t.collaborators.keys();for(let[r,i]of e.collaborators){let e=t.collaborators.get(r);if(!e||r!==n.next().value||!XL(i,e,gee))return!1}return!0}),Uee=({children:t,color:n})=>e.jsx("div",{className:"Card",style:{"--card-color":"primary"===n?"var(--color-primary)":aR[n][7],"--card-color-darker":"primary"===n?"var(--color-primary-darker)":aR[n][8],"--card-color-darkest":"primary"===n?"var(--color-primary-darkest)":aR[n][9]},children:t}),yee=({elements:t,appState:n,setAppState:r,files:i,actionManager:s,exportOpts:a,canvas:o,onCloseRequest:l})=>{let{onExportToBackend:c}=a;return e.jsx("div",{className:"ExportDialog ExportDialog--json",children:e.jsxs("div",{className:"ExportDialog-cards",children:[a.saveFileToDisk&&e.jsxs(Uee,{color:"lime",children:[e.jsx("div",{className:"Card-icon",children:pz}),e.jsx("h2",{children:y6("exportDialog.disk_title")}),e.jsxs("div",{className:"Card-details",children:[y6("exportDialog.disk_details"),!sA&&s.renderAction("changeProjectName")]}),e.jsx(k6,{className:"Card-button",type:"button",title:y6("exportDialog.disk_button"),"aria-label":y6("exportDialog.disk_button"),showAriaLabel:!0,onClick:()=>{s.executeAction(R8,"ui")}})]}),c&&e.jsxs(Uee,{color:"pink",children:[e.jsx("div",{className:"Card-icon",children:az}),e.jsx("h2",{children:y6("exportDialog.link_title")}),e.jsx("div",{className:"Card-details",children:y6("exportDialog.link_details")}),e.jsx(k6,{className:"Card-button",type:"button",title:y6("exportDialog.link_button"),"aria-label":y6("exportDialog.link_button"),showAriaLabel:!0,onClick:async()=>{try{Z6("export","link",`ui (${(()=>{try{return window.self===window.top?"top":"iframe"}catch{return"iframe"}})()})`),await c(t,n,i),l()}catch(e){r({errorMessage:e.message})}}})]}),a.renderCustomUI&&a.renderCustomUI(t,n,i,o)]})})},xee=({elements:t,appState:n,files:r,actionManager:i,exportOpts:s,canvas:a,setAppState:o})=>{let l=St.useCallback(()=>{o({openDialog:null})},[o]);return e.jsx(e.Fragment,{children:"jsonExport"===n.openDialog?.name&&e.jsx(I4,{onCloseRequest:l,title:y6("buttons.export"),children:e.jsx(yee,{elements:t,appState:n,setAppState:o,files:r,actionManager:i,onCloseRequest:l,exportOpts:s,canvas:a})})})},vee=t=>e.jsx("button",{className:"help-icon",onClick:t.onClick,type:"button",title:`${y6("helpDialog.title")} — ?`,"aria-label":y6("helpDialog.title"),children:JF}),wee=({appState:t,actionManager:n,showExitZenModeBtn:r,renderWelcomeScreen:i})=>{let{FooterCenterTunnel:s,WelcomeScreenHelpHintTunnel:a}=F4(),o=Cre(),l=!t.viewModeEnabled&&t.multiElement&&o.isTouchScreen;return e.jsxs("footer",{role:"contentinfo",className:"layer-ui__wrapper__footer App-menu App-menu_bottom",children:[e.jsx("div",{className:BP("layer-ui__wrapper__footer-left zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":t.zenModeEnabled}),children:e.jsx(H7.Col,{gap:2,children:e.jsxs(J9,{heading:"canvasActions",children:[e.jsx(X4,{renderAction:n.renderAction,zoom:t.zoom}),!t.viewModeEnabled&&e.jsx(V4,{renderAction:n.renderAction,className:BP("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":t.zenModeEnabled})}),l&&e.jsx(Y4,{renderAction:n.renderAction,className:BP("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":t.zenModeEnabled})})]})})}),e.jsx(s.Out,{}),e.jsx("div",{className:BP("layer-ui__wrapper__footer-right zen-mode-transition",{"transition-right":t.zenModeEnabled}),children:e.jsxs("div",{style:{position:"relative"},children:[i&&e.jsx(a.Out,{}),e.jsx(vee,{onClick:()=>n.executeAction(O8)})]})}),e.jsx(G4,{actionManager:n,showExitZenModeBtn:r})]})},See=wee;wee.displayName="Footer";var Eee=St.createContext({}),kee=({children:t,className:n})=>{let r=Cre(),i=vt.useContext(Eee),s=!(!r.editor.canFitSidebar||!i.shouldRenderDockButton);return e.jsxs("div",{className:BP("sidebar__header",n),"data-testid":"sidebar-header",children:[t,e.jsxs("div",{className:"sidebar__header__buttons",children:[s&&e.jsx(u8,{label:y6("labels.sidebarLock"),children:e.jsx(j4,{onSelect:()=>i.onDock?.(!i.docked),selected:!!i.docked,className:"sidebar__dock","data-testid":"sidebar-dock","aria-label":y6("labels.sidebarLock"),children:CF})}),e.jsx(j4,{"data-testid":"sidebar-close",className:"sidebar__close",onSelect:i.onCloseRequest,"aria-label":y6("buttons.close"),children:Pz})]})]})};kee.displayName="SidebarHeader";var Cee=({name:t,tab:n,icon:r,title:i,children:s,onToggle:a,className:o,style:l})=>{let c=jre(),d=g3();return e.jsxs("label",{title:i,className:"sidebar-trigger__label-element",children:[e.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",onChange:e=>{document.querySelector(".layer-ui__wrapper")?.classList.remove("animate");let r=e.target.checked;c({openSidebar:r?{name:t,tab:n}:null}),a?.(r)},checked:d.openSidebar?.name===t,"aria-label":i,"aria-keyshortcuts":"0"}),e.jsxs("div",{className:BP("sidebar-trigger",o),style:l,children:[r&&e.jsx("div",{children:r}),s&&e.jsx("div",{className:"sidebar-trigger__label",children:s})]})]})};Cee.displayName="SidebarTrigger";var _ee=({children:t,...n})=>e.jsx(L5,{className:"sidebar-triggers",...n,children:t});_ee.displayName="SidebarTabTriggers";var Mee=({children:t,tab:n,onSelect:r,...i})=>e.jsx(O5,{value:n,asChild:!0,onSelect:r,children:e.jsx("button",{type:"button",className:"excalidraw-button sidebar-tab-trigger",...i,children:t})});Mee.displayName="SidebarTabTrigger";var Iee=({children:t,...n})=>{let r=g3(),i=jre();if(!r.openSidebar)return null;let{name:s}=r.openSidebar;return e.jsx(D5,{className:"sidebar-tabs-root",value:r.openSidebar.tab,onValueChange:e=>i(t=>({...t,openSidebar:{...t.openSidebar,name:s,tab:e}})),...n,children:t})};Iee.displayName="SidebarTabs";var jee=({tab:t,children:n,...r})=>e.jsx(F5,{...r,value:t,"data-testid":t,children:n});jee.displayName="SidebarTab";var Tee=FJ(!1),Ree=vt.forwardRef(({name:t,children:n,onDock:r,docked:i,className:s,...a},o)=>{let l=jre(),c=s6(Tee);vt.useLayoutEffect(()=>(c(!!i),()=>{c(!1)}),[c,i]);let d=vt.useRef({});d.current.onCloseRequest=()=>{l({openSidebar:null})},d.current.onDock=e=>r?.(e),d.current=BL(d.current,{docked:i,shouldRenderDockButton:!!r&&null!=i});let u=vt.useRef(null);vt.useImperativeHandle(o,()=>u.current);let h=Cre(),p=vt.useCallback(()=>{document.querySelector(".Dialog")||l({openSidebar:null})},[l]);return U3(u,vt.useCallback(e=>{e.target.closest(".sidebar-trigger")||(!i||!h.editor.canFitSidebar)&&p()},[p,i,h.editor.canFitSidebar])),vt.useEffect(()=>{let e=e=>{e.key===$$.ESCAPE&&(!i||!h.editor.canFitSidebar)&&p()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[p,i,h.editor.canFitSidebar]),e.jsx(S3,{...a,className:BP("sidebar",{"sidebar--docked":i},s),ref:u,children:e.jsx(Eee.Provider,{value:d.current,children:n})})});Ree.displayName="SidebarInner";var Pee=Object.assign(vt.forwardRef((e,t)=>{let n=g3(),{onStateChange:r}=e,i=vt.useRef(n.openSidebar);vt.useEffect(()=>{(!n.openSidebar&&i?.current?.name===e.name||n.openSidebar?.name===e.name&&i?.current?.name!==e.name||i.current?.name===e.name)&&n.openSidebar!==i.current&&r?.(n.openSidebar?.name!==e.name?null:n.openSidebar),i.current=n.openSidebar},[n.openSidebar,r,e.name]);let[s,a]=vt.useState(!1);return vt.useLayoutEffect(()=>(a(!0),()=>a(!1)),[]),s&&n.openSidebar?.name===e.name?vt.createElement(Ree,{...e,ref:t,key:e.name}):null}),{Header:kee,TabTriggers:_ee,TabTrigger:Mee,Tabs:Iee,Tab:jee,Trigger:Cee});Pee.displayName="Sidebar";var Aee={};WM(Aee,{ChangeCanvasBackground:()=>Vee,ClearCanvas:()=>Wee,CommandPalette:()=>Bee,Export:()=>Gee,Help:()=>$ee,LiveCollaborationTrigger:()=>qee,LoadScene:()=>Oee,SaveAsImage:()=>zee,SaveToActiveFile:()=>Fee,SearchMenu:()=>Hee,Socials:()=>Yee,ToggleTheme:()=>Xee});var Nee=FJ({active:!1});var Dee=({value:t,shortcut:n,onChange:r,choices:i,children:s,name:a})=>{let o=Cre();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dropdown-menu-item-base dropdown-menu-item-bare",children:[e.jsx("label",{className:"dropdown-menu-item__text",htmlFor:a,children:s}),e.jsx(T9,{name:a,value:t,onChange:r,choices:i})]}),n&&!o.editor.isMobile&&e.jsx("div",{className:"dropdown-menu-item__shortcut dropdown-menu-item__shortcut--orphaned",children:n})]})};Dee.displayName="DropdownMenuItemContentRadio";var Lee=Dee,Oee=()=>{let{t:t}=v6(),n=Tre(),r=Mre();return n.isActionEnabled(P8)?e.jsx(Y3,{icon:cz,onSelect:async()=>{(!r.length||await async function({title:e,description:t,actionLabel:n,color:r}){return new Promise(i=>{c6.set(Nee,{active:!0,onConfirm:()=>i(!0),onClose:()=>i(!1),onReject:()=>i(!1),title:e,description:t,actionLabel:n,color:r})})}({title:t("overwriteConfirm.modal.loadFromFile.title"),actionLabel:t("overwriteConfirm.modal.loadFromFile.button"),color:"warning",description:e.jsx(q7,{i18nKey:"overwriteConfirm.modal.loadFromFile.description",bold:t=>e.jsx("strong",{children:t}),br:()=>e.jsx("br",{})})}))&&n.executeAction(P8)},"data-testid":"load-button",shortcut:P4("loadScene"),"aria-label":t("buttons.load"),children:t("buttons.load")}):null};Oee.displayName="LoadScene";var Fee=()=>{let{t:t}=v6(),n=Tre();return n.isActionEnabled(T8)?e.jsx(Y3,{shortcut:P4("saveScene"),"data-testid":"save-button",onSelect:()=>n.executeAction(T8),icon:oz,"aria-label":`${t("buttons.save")}`,children:`${t("buttons.save")}`}):null};Fee.displayName="SaveToActiveFile";var zee=()=>{let t=jre(),{t:n}=v6();return e.jsx(Y3,{icon:hz,"data-testid":"image-export-button",onSelect:()=>t({openDialog:{name:"imageExport"}}),shortcut:P4("imageExport"),"aria-label":n("buttons.exportImage"),children:n("buttons.exportImage")})};zee.displayName="SaveAsImage";var Bee=t=>{let n=jre(),{t:r}=v6();return e.jsx(Y3,{icon:VB,"data-testid":"command-palette-button",onSelect:()=>{Z6("command_palette","open","menu"),n({openDialog:{name:"commandPalette"}})},shortcut:P4("commandPalette"),"aria-label":r("commandPalette.title"),className:t?.className,children:r("commandPalette.title")})};Bee.displayName="CommandPalette";var Hee=t=>{let{t:n}=v6(),r=Tre();return e.jsx(Y3,{icon:HB,"data-testid":"search-menu-button",onSelect:()=>{r.executeAction(m9)},shortcut:P4("searchMenu"),"aria-label":n("search.title"),className:t?.className,children:n("search.title")})};Hee.displayName="SearchMenu";var $ee=()=>{let{t:t}=v6(),n=Tre();return e.jsx(Y3,{"data-testid":"help-menu-item",icon:JF,onSelect:()=>n.executeAction(O8),shortcut:"?","aria-label":t("helpDialog.title"),children:t("helpDialog.title")})};$ee.displayName="Help";var Wee=()=>{let{t:t}=v6(),n=s6(Z4);return Tre().isActionEnabled(h8)?e.jsx(Y3,{icon:VF,onSelect:()=>n("clearCanvas"),"data-testid":"clear-canvas-button","aria-label":t("buttons.clearReset"),children:t("buttons.clearReset")}):null};Wee.displayName="ClearCanvas";var Xee=t=>{let{t:n}=v6(),r=g3(),i=Tre(),s=P4("toggleTheme");return i.isActionEnabled(U8)?t?.allowSystemTheme?e.jsx(Lee,{name:"theme",value:t.theme,onChange:e=>t.onSelect(e),choices:[{value:JA,label:ZF,ariaLabel:`${n("buttons.lightMode")} - ${s}`},{value:eN,label:qF,ariaLabel:`${n("buttons.darkMode")} - ${s}`},{value:"system",label:rH,ariaLabel:n("buttons.systemMode")}],children:n("labels.theme")}):e.jsx(Y3,{onSelect:e=>{if(e.preventDefault(),!t?.onSelect)return i.executeAction(U8);t.onSelect(r.theme===eN?JA:eN)},icon:r.theme===eN?ZF:qF,"data-testid":"toggle-dark-mode",shortcut:s,"aria-label":r.theme===eN?n("buttons.lightMode"):n("buttons.darkMode"),children:r.theme===eN?n("buttons.lightMode"):n("buttons.darkMode")}):null};Xee.displayName="ToggleTheme";var Vee=()=>{let{t:t}=v6(),n=g3(),r=Tre(),i=kre();return n.viewModeEnabled||!i.UIOptions.canvasActions.changeViewBackgroundColor?null:e.jsxs("div",{style:{marginTop:"0.5rem"},children:[e.jsx("div",{"data-testid":"canvas-background-label",style:{fontSize:".75rem",marginBottom:".5rem"},children:t("labels.canvasBackground")}),e.jsx("div",{style:{padding:"0 0.625rem"},children:r.renderAction("changeViewBackgroundColor")})]})};Vee.displayName="ChangeCanvasBackground";var Gee=()=>{let{t:t}=v6(),n=jre();return e.jsx(Y3,{icon:QF,onSelect:()=>{n({openDialog:{name:"jsonExport"}})},"data-testid":"json-export-button","aria-label":t("buttons.export"),children:t("buttons.export")})};Gee.displayName="Export";var Yee=()=>{let{t:t}=v6();return e.jsxs(e.Fragment,{children:[e.jsx(c4,{icon:nz,href:"https://github.com/excalidraw/excalidraw","aria-label":"GitHub",children:"GitHub"}),e.jsx(c4,{icon:iz,href:"https://x.com/excalidraw","aria-label":"X",children:t("labels.followUs")}),e.jsx(c4,{icon:rz,href:"https://discord.gg/UexuTaE","aria-label":"Discord",children:t("labels.discordChat")})]})};Yee.displayName="Socials";var qee=({onSelect:t,isCollaborating:n})=>{let{t:r}=v6();return e.jsx(Y3,{"data-testid":"collab-button",icon:Rz,className:BP({"active-collab":n}),onSelect:t,children:r("labels.liveCollaboration")})};qee.displayName="LiveCollaborationTrigger";var Zee=(t,n)=>{let r=FJ(0),i=t=>{let{tunnelsJotai:{useAtom:i}}=F4(),[,s]=i(r),a=vt.useRef({preferHost:!1,counter:0});return vt.useLayoutEffect(()=>{let e=a.current;return s(t=>{let n=t+1;return e.counter=n,n}),()=>{s(t=>{let n=t-1;return e.counter=n,n||(e.preferHost=!1),n})}},[s]),t.__fallback||(a.current.preferHost=!0),!a.current.counter&&t.__fallback&&a.current.preferHost||a.current.counter>1&&t.__fallback?null:e.jsx(n,{...t})};return i.displayName=t,i},Kee=Object.assign(Zee("MainMenu",({children:t,onSelect:n})=>{let{MainMenuTunnel:r}=F4(),i=Cre(),s=g3(),a=jre(),o=i.editor.isMobile?void 0:()=>a({openMenu:null});return e.jsx(r.In,{children:e.jsxs(h4,{open:"canvas"===s.openMenu,children:[e.jsx(h4.Trigger,{onToggle:()=>{a({openMenu:"canvas"===s.openMenu?null:"canvas"})},"data-testid":"main-menu-trigger",className:"main-menu-trigger",children:KF}),e.jsxs(h4.Content,{onClickOutside:o,onSelect:VL(n,()=>{a({openMenu:null})}),children:[t,i.editor.isMobile&&s.collaborators.size>0&&e.jsxs("fieldset",{className:"UserList-Wrapper",children:[e.jsx("legend",{children:y6("labels.collaborators")}),e.jsx(bee,{mobile:!0,collaborators:s.collaborators,userToFollow:s.userToFollow?.socketId||null})]})]})]})})}),{Trigger:h4.Trigger,Item:h4.Item,ItemLink:h4.ItemLink,ItemCustom:h4.ItemCustom,Group:h4.Group,Separator:h4.Separator,DefaultItems:Aee}),Qee=Kee,Jee=({title:t,children:n,actionLabel:r,onClick:i})=>e.jsxs("div",{className:"OverwriteConfirm__Actions__Action",children:[e.jsx("h4",{children:t}),e.jsx("div",{className:"OverwriteConfirm__Actions__Action__content",children:n}),e.jsx(P9,{variant:"outlined",color:"muted",label:r,size:"large",fullWidth:!0,onClick:i})]}),ete=Object.assign(({children:t})=>e.jsx("div",{className:"OverwriteConfirm__Actions",children:t}),{ExportToImage:()=>{let{t:t}=v6(),n=Tre(),r=jre();return e.jsx(Jee,{title:t("overwriteConfirm.action.exportToImage.title"),actionLabel:t("overwriteConfirm.action.exportToImage.button"),onClick:()=>{n.executeAction(j8,"ui",!0),r({openDialog:{name:"imageExport"}})},children:t("overwriteConfirm.action.exportToImage.description")})},SaveToDisk:()=>{let{t:t}=v6(),n=Tre();return e.jsx(Jee,{title:t("overwriteConfirm.action.saveToDisk.title"),actionLabel:t("overwriteConfirm.action.saveToDisk.button"),onClick:()=>{n.executeAction(R8,"ui")},children:t("overwriteConfirm.action.saveToDisk.description")})}}),tte=Object.assign(Zee("OverwriteConfirmDialog",({children:t})=>{let{OverwriteConfirmDialogTunnel:n}=F4(),[r,i]=i6(Nee);if(!r.active)return null;return e.jsx(n.In,{children:e.jsx(I4,{onCloseRequest:()=>{r.onClose(),i(e=>({...e,active:!1}))},title:!1,size:916,children:e.jsxs("div",{className:"OverwriteConfirm",children:[e.jsx("h3",{children:r.title}),e.jsxs("div",{className:`OverwriteConfirm__Description OverwriteConfirm__Description--color-${r.color}`,children:[e.jsx("div",{className:"OverwriteConfirm__Description__icon",children:jB}),e.jsx("div",{children:r.description}),e.jsx("div",{className:"OverwriteConfirm__Description__spacer"}),e.jsx(P9,{color:r.color,size:"large",label:r.actionLabel,onClick:()=>{r.onConfirm(),i(e=>({...e,active:!1}))}})]}),e.jsx(ete,{children:t})]})})})}),{Actions:ete,Action:Jee}),nte=FJ(""),rte=FJ(null),ite=()=>{let t=Ere(),n=jre(),r=vt.useRef(null),[i,s]=i6(nte),a=i.trim(),[o,l]=vt.useState(!1),[c,d]=vt.useState({nonce:null,items:[]}),u=vt.useRef(null),h=vt.useRef(void 0),[p,f]=i6(rte),m=t.scene.getNonDeletedElementsMap();vt.useEffect(()=>{o||(a!==u.current||t.scene.getSceneNonce()!==h.current)&&(u.current=null,cte(a,t,(e,r)=>{d({nonce:DG(),items:e}),u.current=a,h.current=t.scene.getSceneNonce(),n({searchMatches:e.map(e=>({id:e.textElement.id,focus:!1,matchedLines:e.matchedLines}))})}))},[o,a,m,t,n,f,h]);let g=()=>{c.items.length>0&&f(e=>null===e?0:(e+1)%c.items.length)},b=()=>{c.items.length>0&&f(e=>null===e?0:e-1<0?c.items.length-1:e-1)};vt.useEffect(()=>{n(e=>({searchMatches:e.searchMatches.map((e,t)=>t===p?{...e,focus:!0}:{...e,focus:!1})}))},[p,n]),vt.useEffect(()=>{if(c.items.length>0&&null!==p){let e=c.items[p];if(e){let n=t.state.zoom.value,r=WG({text:e.searchQuery,x:e.textElement.x+(e.matchedLines[0]?.offsetX??0),y:e.textElement.y+(e.matchedLines[0]?.offsetY??0),width:e.matchedLines[0]?.width,height:e.matchedLines[0]?.height,fontSize:e.textElement.fontSize,fontFamily:e.textElement.fontFamily}),i=14,s=e.textElement.fontSize,a=s*n<i;if(!BK([r],t.canvas.width/window.devicePixelRatio,t.canvas.height/window.devicePixelRatio,{offsetLeft:t.state.offsetLeft,offsetTop:t.state.offsetTop,scrollX:t.state.scrollX,scrollY:t.state.scrollY,zoom:t.state.zoom},t.scene.getNonDeletedElementsMap(),t.getEditorUIOffsets())||a){let e;e=a?s>=i?{fitToContent:!0}:{fitToViewport:!0,maxZoom:UD(i/s,1)}:{fitToContent:!0},t.scrollToContent(r,{animate:!0,duration:300,...e,canvasOffsets:t.getEditorUIOffsets()})}}}},[p,c,t]),vt.useEffect(()=>()=>{f(null),u.current=null,h.current=void 0,n({searchMatches:[]}),l(!1)},[n,f]);let U=y3({goToNextItem:g,goToPreviousItem:b,searchMatches:c});vt.useEffect(()=>QL(window,"keydown",e=>{if(e.key===$$.ESCAPE&&!t.state.openDialog&&!t.state.openPopup)return e.preventDefault(),e.stopPropagation(),void n({openSidebar:null});e[$$.CTRL_OR_CMD]&&e.key===$$.F&&(e.preventDefault(),e.stopPropagation(),r.current?.matches(":focus")?n({openSidebar:null}):(t.state.openDialog&&n({openDialog:null}),r.current?.focus(),r.current?.select())),e.target instanceof HTMLElement&&e.target.closest(".layer-ui__search")&&U.searchMatches.items.length&&(e.key===$$.ENTER&&(e.stopPropagation(),U.goToNextItem()),e.key===$$.ARROW_UP?(e.stopPropagation(),U.goToPreviousItem()):e.key===$$.ARROW_DOWN&&(e.stopPropagation(),U.goToNextItem()))},{capture:!0,passive:!1}),[n,U,t]);let y=`${c.items.length} ${1===c.items.length?y6("search.singleResult"):y6("search.multipleResults")}`;return e.jsxs("div",{className:"layer-ui__search",children:[e.jsx("div",{className:"layer-ui__search-header",children:e.jsx(T4,{className:VA,value:i,ref:r,placeholder:y6("search.placeholder"),icon:HB,onChange:e=>{s(e),l(!0);let r=e.trim();cte(r,t,(e,i)=>{d({nonce:DG(),items:e}),f(i),u.current=r,h.current=t.scene.getSceneNonce(),n({searchMatches:e.map(e=>({id:e.textElement.id,focus:!1,matchedLines:e.matchedLines}))}),l(!1)})},selectOnRender:!0})}),e.jsxs("div",{className:"layer-ui__search-count",children:[c.items.length>0&&e.jsxs(e.Fragment,{children:[null!==p&&p>-1?e.jsxs("div",{children:[p+1," / ",y]}):e.jsx("div",{children:y}),e.jsxs("div",{className:"result-nav",children:[e.jsx(j4,{onSelect:()=>{g()},className:"result-nav-btn",children:dH}),e.jsx(j4,{onSelect:()=>{b()},className:"result-nav-btn",children:hH})]})]}),0===c.items.length&&a&&u.current&&e.jsx("div",{style:{margin:"1rem auto"},children:y6("search.noMatch")})]}),e.jsx(ate,{matches:c,onItemClick:f,focusIndex:p,searchQuery:a})]})},ste=t=>{let n=[t.preview.moreBefore?"...":"",t.preview.previewText.slice(0,t.preview.indexInSearchQuery),t.preview.previewText.slice(t.preview.indexInSearchQuery,t.preview.indexInSearchQuery+t.searchQuery.length),t.preview.previewText.slice(t.preview.indexInSearchQuery+t.searchQuery.length),t.preview.moreAfter?"...":""];return e.jsx("div",{tabIndex:-1,className:BP("layer-ui__result-item",{active:t.highlighted}),onClick:t.onClick,ref:e=>{t.highlighted&&e?.scrollIntoView({behavior:"auto",block:"nearest"})},children:e.jsx("div",{className:"preview-text",children:n.flatMap((t,n)=>e.jsx(vt.Fragment,{children:2===n?e.jsx("b",{children:t}):t},n))})})},ate=vt.memo(t=>e.jsx("div",{className:"layer-ui__search-result-container",children:t.matches.items.map((n,r)=>e.jsx(ste,{searchQuery:t.searchQuery,preview:n.preview,highlighted:r===t.focusIndex,onClick:()=>t.onItemClick(r)},n.textElement.id+n.index))}),(e,t)=>e.matches.nonce===t.matches.nonce&&e.focusIndex===t.focusIndex),ote=(e,t,n)=>{let r=e.slice(0,t),i=r.split(/\s+/),s=r.endsWith(" "),a=i.length-2-1-(s?0:1),o=i.slice(a<=0?0:a).join(" ")+(s?" ":"");o=o.length>20?o.slice(-20):o;let l=e.slice(t+n.length),c=l.split(/\s+/),d=!l.startsWith(" "),u=d?6:5,h=(d?"":" ")+c.slice(0,u).join(" ");return{indexInSearchQuery:o.length,previewText:o+n+h,moreBefore:a>0,moreAfter:c.length>u}},lte=(e,t,n)=>{let r=((e,t)=>{let n=e.split("\n"),r=[],i=0;for(let s=0;s<n.length;s++){let e=n[s],a=n[s+1];if(a){let n=t.indexOf(a,i);if(n>e.length+i){let t=n-(e.length+i);for(;t>0;)e+=" ",t--}}r.push(e),i+=e.length}return r.join("\n")})(e.text,e.originalText).split("\n"),i=[],s=0,a=0;for(let d of r){let e=s,t=e+d.length-1;i.push({line:d,startIndex:e,endIndex:t,lineNumber:a}),s=t+1,a++}let o=n,l=e.originalText.slice(n,n+t.length),c=[];for(let d of i){if(""===l)break;if(o>=d.startIndex&&o<=d.endIndex){let t=d.endIndex+1-o,n=d.line.slice(0,o-d.startIndex),r=l.slice(0,t);l=l.slice(t);let i=OO(n,gL(e),e.lineHeight);if(""===n&&(i.width=0),"left"!==e.textAlign&&d.line.length>0){let t=OO(d.line,gL(e),e.lineHeight),n="center"===e.textAlign?(e.width-t.width)/2:e.width-t.width;i.width+=n}let{width:s,height:a}=OO(r,gL(e),e.lineHeight),u=i.width,h=d.lineNumber*i.height;c.push({offsetX:u,offsetY:h,width:s,height:a}),o+=t}}return c},cte=$5((e,t,n)=>{if(!e||""===e)return void n([],null);let r=t.scene.getNonDeletedElements().filter(e=>mO(e));r.sort((e,t)=>e.y-t.y);let i=[],s=new RegExp((e=>e.replace(/[.*+?^${}()|[\]\\-]/g,"\\$&"))(e),"gi");for(let l of r){let t=null,n=l.originalText;for(;null!==(t=s.exec(n));){let r=ote(n,t.index,e),s=lte(l,e,t.index);s.length>0&&i.push({textElement:l,searchQuery:e,preview:r,index:t.index,matchedLines:s})}}let a=new Set(t.visibleElements.map(e=>e.id)),o=i.findIndex(e=>a.has(e.textElement.id))??null;n(i,o)},350),dte=Zee("DefaultSidebarTrigger",t=>{let{DefaultSidebarTriggerTunnel:n}=F4();return e.jsx(n.In,{children:e.jsx(Pee.Trigger,{...t,className:"default-sidebar-trigger",name:BN})})});dte.displayName="DefaultSidebarTrigger";var ute=({children:t})=>{let{DefaultSidebarTabTriggersTunnel:n}=F4();return e.jsx(n.In,{children:t})};ute.displayName="DefaultTabTriggers";var hte=Object.assign(Zee("DefaultSidebar",({children:t,className:n,onDock:r,docked:i,...s})=>{let a=g3(),o=jre(),{DefaultSidebarTabTriggersTunnel:l}=F4(),c=a.openSidebar?.tab===zN;return vt.createElement(Pee,{...s,name:"default",key:"default",className:BP("default-sidebar",n),docked:c||(i??a.defaultSidebarDockedPreference),onDock:c||!1===r||!r&&null!=i?void 0:VL(r,e=>{o({defaultSidebarDockedPreference:e})})},e.jsxs(Pee.Tabs,{children:[e.jsx(Pee.Header,{children:e.jsxs(Pee.TabTriggers,{children:[e.jsx(Pee.TabTrigger,{tab:zN,children:HB}),e.jsx(Pee.TabTrigger,{tab:FN,children:SF}),e.jsx(l.Out,{})]})}),e.jsx(Pee.Tab,{tab:FN,children:e.jsx(_4,{})}),e.jsx(Pee.Tab,{tab:zN,children:e.jsx(ite,{})}),t]}))}),{Trigger:dte,TabTriggers:ute}),pte=t=>e.jsxs("label",{className:BP("ToolIcon ToolIcon__LaserPointer","ToolIcon_size_small",{"is-mobile":t.isMobile}),title:`${t.title}`,children:[e.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:t.name,onChange:t.onChange,checked:t.checked,"aria-label":t.title,"data-testid":"toolbar-LaserPointer"}),e.jsx("div",{className:"ToolIcon__icon",children:DB})]}),fte=async({canvasRef:e,mermaidToExcalidrawLib:t,mermaidDefinition:n,setError:r,data:i})=>{let s=e.current,a=s?.parentElement;if(s&&a){if(!n)return void(({canvasRef:e,setError:t})=>{let n=e.current;if(!n)return;let r=n.parentElement;r&&(r.style.background="",t(null),n.replaceChildren())})({canvasRef:e,setError:r});try{let e,l=await t.api;try{e=await l.parseMermaidToExcalidraw(n)}catch{e=await l.parseMermaidToExcalidraw(n.replace(/"/g,"'"))}let{elements:c,files:d}=e;r(null),i.current={elements:Tne(c,{regenerateIds:!0}),files:d};let u=await WZ({elements:i.current.elements,files:i.current.files,exportPadding:yN,maxWidthOrHeight:Math.max(a.offsetWidth,a.offsetHeight)*window.devicePixelRatio});try{await PQ(u)}catch(o){throw"CANVAS_POSSIBLY_TOO_BIG"===o.name?new Error(y6("canvasError.canvasTooBig")):o}a.style.background="var(--default-bg-color)",s.replaceChildren(u)}catch(l){throw a.style.background="var(--default-bg-color)",n&&r(l),l}}},mte=e=>{Q7.set(eD,e)},gte=({app:e,data:t,text:n,shouldSaveMermaidDataToStorage:r})=>{let{elements:i,files:s}=t.current;i.length&&(e.addElementsFromPasteOrLibrary({elements:i,files:s,position:"center",fitToContent:!0}),e.setOpenDialog(null),r&&n&&mte(n))},bte=({children:t})=>e.jsx("div",{className:"ttd-dialog-panels",children:t}),Ute=({label:t,children:n,panelAction:r,panelActionDisabled:i=!1,onTextSubmitInProgess:s,renderTopRight:a,renderSubmitShortcut:o,renderBottomRight:l})=>e.jsxs("div",{className:"ttd-dialog-panel",children:[e.jsxs("div",{className:"ttd-dialog-panel__header",children:[e.jsx("label",{children:t}),a?.()]}),n,e.jsxs("div",{className:BP("ttd-dialog-panel-button-container",{invisible:!r}),style:{display:"flex",alignItems:"center"},children:[e.jsxs(j4,{className:"ttd-dialog-panel-button",onSelect:r?r.action:()=>{},disabled:i||s,children:[e.jsxs("div",{className:BP({invisible:s}),children:[r?.label,r?.icon&&e.jsx("span",{children:r.icon})]}),s&&e.jsx(w6,{})]}),!i&&!s&&o?.(),l?.()]})]}),yte=({input:t,placeholder:n,onChange:r,onKeyboardSubmit:i})=>{let s=vt.useRef(null),a=vt.useRef(i);return a.current=i,vt.useEffect(()=>{if(!a.current)return;let e=s.current;if(e){let t=e=>{e[$$.CTRL_OR_CMD]&&e.key===$$.ENTER&&(e.preventDefault(),a.current?.())};return e.addEventListener("keydown",t),()=>{e.removeEventListener("keydown",t)}}},[]),e.jsx("textarea",{className:"ttd-dialog-input",onChange:r,value:t,placeholder:n,autoFocus:!0,ref:s})},xte=({error:t})=>e.jsxs("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",e.jsx("p",{children:t})]}),vte=({error:t,canvasRef:n,loaded:r})=>e.jsxs("div",{className:"ttd-dialog-output-wrapper",children:[t&&e.jsx(xte,{error:t.message}),r?e.jsx("div",{ref:n,style:{opacity:t?"0.15":1},className:"ttd-dialog-output-canvas-container"}):e.jsx(w6,{size:"2rem"})]}),wte=()=>e.jsxs("div",{className:"ttd-dialog-submit-shortcut",children:[e.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:SL("CtrlOrCmd")}),e.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:SL("Enter")})]}),Ste=bL(mte,300),Ete=({mermaidToExcalidrawLib:t})=>{let[n,r]=vt.useState(()=>Q7.get(eD)||"flowchart TD\n A[Christmas] --\x3e|Get money| B(Go shopping)\n B --\x3e C{Let me think}\n C --\x3e|One| D[Laptop]\n C --\x3e|Two| E[iPhone]\n C --\x3e|Three| F[Car]"),i=vt.useDeferredValue(n.trim()),[s,a]=vt.useState(null),o=vt.useRef(null),l=vt.useRef({elements:[],files:null}),c=Ere();vt.useEffect(()=>{fte({canvasRef:o,data:l,mermaidToExcalidrawLib:t,setError:a,mermaidDefinition:i}).catch(e=>{FL()}),Ste(i)},[i,t]),vt.useEffect(()=>()=>{Ste.flush()},[]);let d=()=>{gte({app:c,data:l,text:n,shouldSaveMermaidDataToStorage:!0})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"ttd-dialog-desc",children:e.jsx(q7,{i18nKey:"mermaid.description",flowchartLink:t=>e.jsx("a",{href:"https://mermaid.js.org/syntax/flowchart.html",children:t}),sequenceLink:t=>e.jsx("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",children:t}),classLink:t=>e.jsx("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",children:t})})}),e.jsxs(bte,{children:[e.jsx(Ute,{label:y6("mermaid.syntax"),children:e.jsx(yte,{input:n,placeholder:"Write Mermaid diagram defintion here...",onChange:e=>r(e.target.value),onKeyboardSubmit:()=>{d()}})}),e.jsx(Ute,{label:y6("mermaid.preview"),panelAction:{action:()=>{d()},label:y6("mermaid.button"),icon:NB},renderSubmitShortcut:()=>e.jsx(wte,{}),children:e.jsx(vte,{canvasRef:o,loaded:t.loaded,error:s})})]})]})},kte=t=>{let n=jre(),r=vt.useRef(null),i=vt.useRef(0);return e.jsx(D5,{ref:r,className:"ttd-dialog-tabs-root",value:t.tab,onValueChange:e=>{if(!e)return;let s=r.current?.closest(".Modal__content");if(s){let e=s.offsetHeight||0;e>i.current&&(i.current=e,s.style.minHeight=`min(${i.current}px, 100%)`)}"ttd"===t.dialog&&qL(["text-to-diagram","mermaid"],e)&&n({openDialog:{name:t.dialog,tab:e}})},children:t.children})};kte.displayName="TTDDialogTabs";var Cte=kte,_te=({children:t,...n})=>e.jsx(L5,{className:"ttd-dialog-triggers",...n,children:t});_te.displayName="TTDDialogTabTriggers";var Mte=({children:t,tab:n,onSelect:r,...i})=>e.jsx(O5,{value:n,asChild:!0,onSelect:r,children:e.jsx("button",{type:"button",className:"ttd-dialog-tab-trigger",...i,children:t})});Mte.displayName="TTDDialogTabTrigger";var Ite=({tab:t,children:n,...r})=>e.jsx(F5,{...r,value:t,children:n});Ite.displayName="TTDDialogTab";var jte=1e3,Tte=FJ(null),Rte=FJ(null),Pte=t=>{let n=g3();return"ttd"!==n.openDialog?.name?null:e.jsx(Ate,{...t,tab:n.openDialog.tab})},Ate=Zee("TTDDialogBase",({tab:t,...n})=>{let r=Ere(),i=jre(),s=vt.useRef(null),[a,o]=i6(Rte),[l,c]=vt.useState(a?.prompt??""),d=l.trim(),[u,h]=vt.useState(!1),[p,f]=i6(Tte),m=async()=>{if(d.length>jte||d.length<3||u||0===p?.rateLimitRemaining||"__fallback"in n)return d.length<3&&v(new Error("Prompt is too short (min 3 characters)")),void(d.length>jte&&v(new Error("Prompt is too long (max 1000 characters)")));try{h(!0),Z6("ai","generate","ttd");let{generatedResponse:t,error:r,rateLimit:i,rateLimitRemaining:a}=await n.onTextSubmit(d);if("string"==typeof t&&o(e=>({generatedResponse:t,prompt:e?.prompt??null})),xD(i)&&xD(a)&&f({rateLimit:i,rateLimitRemaining:a}),r)return void v(r);if(!t)return void v(new Error("Generation failed"));try{await fte({canvasRef:s,data:y,mermaidToExcalidrawLib:b,setError:v,mermaidDefinition:t}),Z6("ai","mermaid parse success","ttd")}catch(e){Z6("ai","mermaid parse failed","ttd"),v(new Error("Generated an invalid diagram :(. You may also try a different prompt."))}}catch(t){let e=t.message;(!e||"Failed to fetch"===e)&&(e="Request failed"),v(new Error(e))}finally{h(!1)}},g=vt.useRef(m);g.current=m;let[b,U]=vt.useState({loaded:!1,api:Pt(()=>import("./index-B0KF03Tm.js").then(e=>e.b5),__vite__mapDeps([58,2]))});vt.useEffect(()=>{(async()=>{await b.api,U(e=>({...e,loaded:!0}))})()},[b.api]);let y=vt.useRef({elements:[],files:null}),[x,v]=vt.useState(null);return e.jsx(I4,{className:"ttd-dialog",onCloseRequest:()=>{r.setOpenDialog(null)},size:1200,title:!1,...n,autofocus:!1,children:e.jsxs(Cte,{dialog:"ttd",tab:t,children:["__fallback"in n&&n.__fallback?e.jsx("p",{className:"dialog-mermaid-title",children:y6("mermaid.title")}):e.jsxs(_te,{children:[e.jsx(Mte,{tab:"text-to-diagram",children:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[y6("labels.textToDiagram"),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"1px 6px",marginLeft:"10px",fontSize:10,borderRadius:"12px",background:"var(--color-promo)",color:"var(--color-surface-lowest)"},children:"AI Beta"})]})}),e.jsx(Mte,{tab:"mermaid",children:"Mermaid"})]}),e.jsx(Ite,{className:"ttd-dialog-content",tab:"mermaid",children:e.jsx(Ete,{mermaidToExcalidrawLib:b})}),!("__fallback"in n)&&e.jsxs(Ite,{className:"ttd-dialog-content",tab:"text-to-diagram",children:[e.jsx("div",{className:"ttd-dialog-desc",children:"Currently we use Mermaid as a middle step, so you'll get best results if you describe a diagram, workflow, flow chart, and similar."}),e.jsxs(bte,{children:[e.jsx(Ute,{label:y6("labels.prompt"),panelAction:{action:m,label:"Generate",icon:NB},onTextSubmitInProgess:u,panelActionDisabled:d.length>jte||0===p?.rateLimitRemaining,renderTopRight:()=>p?e.jsxs("div",{className:"ttd-dialog-rate-limit",style:{fontSize:12,marginLeft:"auto",color:0===p.rateLimitRemaining?"var(--color-danger)":void 0},children:[p.rateLimitRemaining," requests left today"]}):null,renderSubmitShortcut:()=>e.jsx(wte,{}),renderBottomRight:()=>{if("string"==typeof a?.generatedResponse)return e.jsxs("div",{className:"excalidraw-link",style:{marginLeft:"auto",fontSize:14},onClick:()=>{"string"==typeof a?.generatedResponse&&(mte(a.generatedResponse),i({openDialog:{name:"ttd",tab:"mermaid"}}))},children:["View as Mermaid",e.jsx(j3,{icon:NB})]});let t=d.length/jte;return t>.8?e.jsxs("div",{style:{marginLeft:"auto",fontSize:12,fontFamily:"monospace",color:t>1?"var(--color-danger)":void 0},children:["Length: ",d.length,"/",jte]}):null},children:e.jsx(yte,{onChange:e=>{c(e.target.value),o(t=>({generatedResponse:t?.generatedResponse??null,prompt:e.target.value}))},input:l,placeholder:"Describe what you want to see...",onKeyboardSubmit:()=>{g.current()}})}),e.jsx(Ute,{label:"Preview",panelAction:{action:()=>{gte({app:r,data:y})},label:"Insert",icon:NB},children:e.jsx(vte,{canvasRef:s,error:x,loaded:b.loaded})})]})]})]})})}),Nte=(e,t)=>!("height"===t&&mO(e)||"width"===t&&mO(e)||"angle"===t&&UO(e)),Dte=(e,t)=>{let n=e+t/2;return n-n%t},Lte=(e,t,n)=>Object.keys(e).map(e=>({original:(n??t).get(e),latest:t.get(e)})).filter(e=>void 0!==e.original&&void 0!==e.latest),Ote=(e,t,n,r,i,s,a,o=!0)=>{let l=r.get(n.id);if(!l)return;let[c,d]=[n.x+n.width/2,n.y+n.height/2],[u,h]=OD(PD(n.x,n.y),PD(c,d),n.angle),p=e-u,f=t-h,[m,g]=OD(PD(e,t),PD(c+p,d+f),-n.angle);DK(l,{x:m,y:g},o),zte(l,r,i,s);let b=dG(n,a);if(b){let e=r.get(b.id);e&&DK(e,{x:b.x+p,y:b.y+f},o)}},Fte=(e,t)=>{let n=CV(t).map(t=>jV(e,t).reduce((e,t)=>(e[t.id]=!0,e),{}));return e.filter(e=>!AV(e)).forEach(e=>{n.push({[e.id]:!0})}),n},zte=(e,t,n,r,i)=>{vO(e)?jX([e],t,n,r,!0,[],i?.zoom):$X(e,t,i)},Bte=({label:t,icon:n,dragInputCallback:r,value:i,elements:s,editable:a=!0,shouldKeepAspectRatio:o,property:l,scene:c,appState:d,sensitivity:u=1})=>{let h=Ere(),p=vt.useRef(null),f=vt.useRef(null),[m,g]=vt.useState(i.toString()),b=vt.useRef(null);b.current||(b.current={originalAppState:ZL(d),originalElements:s,lastUpdatedValue:m,updatePending:!1}),vt.useEffect(()=>{let e=i.toString();g(e),b.current.lastUpdatedValue=e},[i]);let U=(e,t,n)=>{if(!b.current.updatePending)return!1;b.current.updatePending=!1;let s=Number(e);if(isNaN(s))return void g(i.toString());let a=Number(s.toFixed(2)),d=Number(i);(isNaN(d)||Math.abs(a-d)>=.01)&&(b.current.lastUpdatedValue=e,r({accumulatedChange:0,instantChange:0,originalElements:t,originalElementsMap:h.scene.getNonDeletedElementsMap(),shouldKeepAspectRatio:o,shouldChangeByStepSize:!1,scene:c,nextValue:a,property:l,originalAppState:n,setInputValue:e=>g(String(e))}),h.syncActionResult({captureUpdate:bY}))},y=vt.useRef({});return y.current.handleInputValue=U,vt.useEffect(()=>{let e=p.current,t=y.current;return()=>{let n=e?.value;n&&t.handleInputValue?.(n,b.current.originalElements,b.current.originalAppState),window.removeEventListener("pointermove",t.onPointerMove,!1),window.removeEventListener("pointerup",t.onPointerUp,!1)}},[a]),a?e.jsxs("div",{className:BP("drag-input-container",!a&&"disabled"),"data-testid":t,children:[e.jsx("div",{className:"drag-input-label",ref:f,onPointerDown:e=>{if(p.current&&a){document.body.classList.add("excalidraw-cursor-resize"),Number(p.current.value);let e=null,t=h.scene.getNonDeletedElements().reduce((e,t)=>(e.set(t.id,KG(t)),e),new Map),n=s.map(e=>t.get(e.id)),i=ZL(d),a=0,f=0,m=s=>{if(e&&null!==t&&null!==n){let d=s.clientX-e.x;0!==d&&(f+=d,Math.abs(f)>=u&&(f=Math.sign(f)*Math.floor(Math.abs(f)/u),a+=f,r({accumulatedChange:a,instantChange:f,originalElements:n,originalElementsMap:t,shouldKeepAspectRatio:o,shouldChangeByStepSize:s.shiftKey,property:l,scene:c,originalAppState:i,setInputValue:e=>g(String(e))}),f=0))}e={x:s.clientX,y:s.clientY}},b=()=>{window.removeEventListener("pointermove",m,!1),h.syncActionResult({captureUpdate:bY}),e=null,a=0,f=0,n=null,t=null,document.body.classList.remove("excalidraw-cursor-resize"),window.removeEventListener("pointerup",b,!1)};y.current.onPointerMove=m,y.current.onPointerUp=b,window.addEventListener("pointermove",m,!1),window.addEventListener("pointerup",b,!1)}},onPointerEnter:()=>{f.current&&(f.current.style.cursor="ew-resize")},children:n?e.jsx(j3,{icon:n}):t}),e.jsx("input",{className:"drag-input",autoComplete:"off",spellCheck:"false",onKeyDown:e=>{if(a){let t=e.target;t instanceof HTMLInputElement&&e.key===$$.ENTER&&(U(t.value,s,d),h.focusContainer())}},ref:p,value:m,onChange:e=>{b.current.updatePending=!0,g(e.target.value)},onFocus:e=>{e.target.select(),b.current.originalElements=s,b.current.originalAppState=ZL(d)},onBlur:e=>{m?a&&U(e.target.value,b.current.originalElements,b.current.originalAppState):g(i.toString())},disabled:!a})]}):null},Hte=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldKeepAspectRatio:r,shouldChangeByStepSize:i,nextValue:s,property:a,originalAppState:o,instantChange:l,scene:c})=>{let d=c.getNonDeletedElementsMap(),u=t[0],h=d.get(u.id);if(u&&h){let t=r||(e=>"image"===e.type)(u),c=u.width/u.height;if(o.croppingElementId===u.id){let e=d.get(u.id);if(!e||!uO(e)||!e.crop)return;let t=e.crop,n={...t},r=-1===e.scale[0],i=-1===e.scale[1],{width:o,height:c}=lW(e),h=t.naturalWidth/o,p=t.naturalHeight/c,f=r?t.width+t.x:t.naturalWidth-t.x,m=i?t.height+t.y:t.naturalHeight-t.y,g=aW*h,b=aW*p;if(void 0!==s){if("width"===a){let e=bD(s*h,g,f);n={...n,width:e,x:r?t.x+t.width-e:t.x}}else if("height"===a){let e=bD(s*p,b,m);n={...n,height:e,y:i?t.y+t.height-e:t.y}}return void DK(e,{crop:n,width:n.width/(t.naturalWidth/o),height:n.height/(t.naturalHeight/c)})}let U="width"===a?l:0,y="height"===a?l:0,x=bD(t.width+U,g,f),v=bD(t.height+y,g,m);return n={...t,x:r?t.x+t.width-x:t.x,y:i?t.y+t.height-v:t.y,width:x,height:v},void DK(e,{crop:n,width:n.width/(t.naturalWidth/o),height:n.height/(t.naturalHeight/c)})}if(void 0!==s){let e=Math.max("width"===a?s:t?s*c:u.width,1),r=Math.max("height"===a?s:t?s/c:u.height,1);return void hQ(e,r,h,u,d,n,"width"===a?"e":"s",{shouldMaintainAspectRatio:t})}let p="width"===a?e:0,f="height"===a?e:0,m=Math.max(0,u.width+p);"width"===a&&(m=i?Dte(m,10):Math.round(m));let g=Math.max(0,u.height+f);"height"===a&&(g=i?Dte(g,10):Math.round(g)),t&&("width"===a?g=Math.round(m/c*100)/100:m=Math.round(g*c*100)/100),g=Math.max(1,g),m=Math.max(1,m),hQ(m,g,h,u,d,n,"width"===a?"e":"s",{shouldMaintainAspectRatio:t})}},$te=({property:t,element:n,scene:r,appState:i})=>{let s=UD("width"===t?n.width:n.height,2);if(i.croppingElementId&&i.croppingElementId===n.id&&uO(n)&&n.crop){let{width:e,height:r}=lW(n);if("width"===t){let t=e/n.crop.naturalWidth;s=UD(n.crop.width*t,2)}if("height"===t){let e=r/n.crop.naturalHeight;s=UD(n.crop.height*e,2)}}return e.jsx(Bte,{label:"width"===t?"W":"H",elements:[n],dragInputCallback:Hte,value:s,editable:Nte(n,t),scene:r,appState:i,property:t})},Wte=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,scene:i})=>{let s=i.getNonDeletedElementsMap(),a=i.getNonDeletedElements(),o=t[0];if(o&&!SO(o)){let t=s.get(o.id);if(!t)return;if(void 0!==r){let e=SD(r);DK(t,{angle:e}),zte(t,s,a,i);let n=dG(t,s);return void(n&&!wO(t)&&DK(n,{angle:e}))}let l=(Math.round(100*ED(o.angle))/100+Math.round(e))%360;n&&(l=Dte(l,15)),l=l<0?l+360:l;let c=SD(l);DK(t,{angle:c}),zte(t,s,a,i);let d=dG(t,s);d&&!wO(t)&&DK(d,{angle:c})}},Xte=({element:t,scene:n,appState:r,property:i})=>e.jsx(Bte,{label:"A",icon:wB,value:Math.round(ED(t.angle)%360*100)/100,elements:[t],dragInputCallback:Wte,editable:Nte(t,"angle"),scene:n,appState:r,property:i}),Vte=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,scene:i})=>{let s=i.getNonDeletedElementsMap(),a=t[0];if(a){let t,o=s.get(a.id);if(!o||!mO(o))return;if(void 0!==r)t=Math.max(Math.round(r),4);else if("text"===a.type){let r=Math.round(a.fontSize),i=Math.round(e);t=Math.max(r+i,4),n&&(t=Dte(t,4))}t&&(DK(o,{fontSize:t}),sG(o,i.getContainerElement(o),i.getNonDeletedElementsMap()))}},Gte=({element:t,scene:n,appState:r,property:i})=>{let s=mO(t)?t:TO(t)?dG(t,n.getNonDeletedElementsMap()):null;return s?e.jsx(Bte,{label:"F",value:Math.round(10*s.fontSize)/10,elements:[s],dragInputCallback:Vte,icon:hB,appState:r,scene:n,property:i}):null},Yte=10,qte=(e,t,n,r,i,s,a,o)=>{let l=((e,t,n,r)=>{let i=r.x-e,s=r.y-t,a=r.width*n,o=r.height*n;return{width:a,height:o,x:e+i*n,y:t+s*n,...lQ(r,a,o,!1),...mO(r)?{fontSize:r.fontSize*n}:{}}})(e,t,r,s);DK(i,l,!1);let c=dG(s,o);if(c){let e=c.fontSize*r;$X(i,a,{newSize:{width:l.width,height:l.height}});let t=a.get(c.id);t&&mO(t)&&(DK(t,{fontSize:e},!1),oG(i,a,"width"===n?"e":"s",!0))}},Zte=(e,t,n,r,i,s,a,o,l,c)=>{"width"===s?t=Math.round(e/r*100)/100:e=Math.round(t*r*100)/100;let d=t/n;for(let u=0;u<o.length;u++){let e=o[u],t=a[u];qte(i[0],i[1],s,d,t,e,l,c)}},Kte=({accumulatedChange:e,originalElements:t,originalElementsMap:n,originalAppState:r,shouldChangeByStepSize:i,nextValue:s,scene:a,property:o})=>{let l=a.getNonDeletedElementsMap(),c=Fte(t,r);if(void 0!==s){for(let e of c){let t=Lte(e,l,n);if(t.length>1){let e=t.map(e=>e.latest),r=t.map(e=>e.original),[i,a,c,d]=gX(r),u=c-i,h=d-a,p=u/h,f=Math.max(1,"width"===o?Math.max(0,s):u),m=Math.max(1,"height"===o?Math.max(0,s):h);Zte(f,m,h,p,PD(i,a),o,e,r,l,n)}else{let[e]=t,r=e?.latest,a=e?.original;if(r&&a&&Nte(r,o)){let e="width"===o?Math.max(0,s):r.width;"width"===o&&(e=i?Dte(e,Yte):Math.round(e));let t="height"===o?Math.max(0,s):r.height;"height"===o&&(t=i?Dte(t,Yte):Math.round(t)),e=Math.max(1,e),t=Math.max(1,t),hQ(e,t,r,a,l,n,"width"===o?"e":"s",{shouldInformMutation:!1})}}}return void a.triggerUpdate()}let d="width"===o?e:0,u="height"===o?e:0;for(let h of c){let e=Lte(h,l,n);if(e.length>1){let t=e.map(e=>e.latest),r=e.map(e=>e.original),[s,a,c,h]=gX(r),p=c-s,f=h-a,m=p/f,g=Math.max(0,p+d);"width"===o&&(g=i?Dte(g,Yte):Math.round(g));let b=Math.max(0,f+u);"height"===o&&(b=i?Dte(b,Yte):Math.round(b)),g=Math.max(1,g),b=Math.max(1,b),Zte(g,b,f,m,PD(s,a),o,t,r,l,n)}else{let[t]=e,r=t?.latest,s=t?.original;if(r&&s&&Nte(r,o)){let e=Math.max(0,s.width+d);"width"===o&&(e=i?Dte(e,Yte):Math.round(e));let t=Math.max(0,s.height+u);"height"===o&&(t=i?Dte(t,Yte):Math.round(t)),e=Math.max(1,e),t=Math.max(1,t),hQ(e,t,r,s,l,n,"width"===o?"e":"s",{shouldInformMutation:!1})}}}a.triggerUpdate()},Qte=({property:t,elements:n,elementsMap:r,atomicUnits:i,scene:s,appState:a})=>{let o=vt.useMemo(()=>i.map(e=>{let n=Lte(e,r);if(n.length>1){let[e,r,i,s]=gX(n.map(e=>e.latest));return Math.round(100*("width"===t?i-e:s-r))/100}let[i]=n;return Math.round(100*("width"===t?i.latest.width:i.latest.height))/100}),[r,i,t]),l=1===new Set(o).size?Math.round(100*o[0])/100:"Mixed",c=o.length>0;return e.jsx(Bte,{label:"width"===t?"W":"H",elements:n,dragInputCallback:Kte,value:l,editable:c,appState:a,property:t,scene:s})},Jte=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,property:i,scene:s})=>{let a=s.getNonDeletedElementsMap(),o=t.map(e=>a.get(e.id)).filter(e=>e&&!AV(e)&&Nte(e,i)),l=t.filter(e=>!AV(e)&&Nte(e,i));if(void 0!==r){let e=SD(r);for(let t of o){if(!t)continue;DK(t,{angle:e},!1);let n=dG(t,a);n&&!wO(t)&&DK(n,{angle:e},!1)}return void s.triggerUpdate()}for(let c=0;c<o.length;c++){let t=o[c];if(!t)continue;let r=l[c],i=(Math.round(100*ED(r.angle))/100+Math.round(e))%360;n&&(i=Dte(i,15)),i=i<0?i+360:i;let s=SD(i);DK(t,{angle:s},!1);let d=dG(t,a);d&&!wO(t)&&DK(d,{angle:s},!1)}s.triggerUpdate()},ene=({elements:t,scene:n,appState:r,property:i})=>{let s=t.filter(e=>!AV(e)&&Nte(e,"angle")),a=s.map(e=>Math.round(ED(e.angle)%360*100)/100),o=1===new Set(a).size?a[0]:"Mixed",l=s.some(e=>Nte(e,"angle"));return e.jsx(Bte,{label:"A",icon:wB,value:o,elements:t,dragInputCallback:Jte,editable:l,appState:r,scene:n,property:i})},tne=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,scene:i})=>{let s,a=i.getNonDeletedElementsMap(),o=t.map(e=>a.get(e.id));if(r){s=Math.max(Math.round(r),4);for(let e of o)DK(e,{fontSize:s},!1),sG(e,i.getContainerElement(e),a,!1);i.triggerUpdate()}else{let r=t;for(let t=0;t<o.length;t++){let s=o[t],l=r[t],c=Math.round(l.fontSize),d=Math.round(e),u=Math.max(c+d,4);n&&(u=Dte(u,4)),DK(s,{fontSize:u},!1),sG(s,i.getContainerElement(s),a,!1)}i.triggerUpdate()}},nne=({elements:t,scene:n,appState:r,property:i,elementsMap:s})=>{let a=((e,t)=>e.reduce((e,n)=>{if(!n||AV(n))return e;if(mO(n))return e.push(n),e;if(TO(n)){let r=dG(n,t);if(r)return e.push(r),e}return e},[]))(t,s);if(!a.length)return null;let o=a.map(e=>Math.round(10*e.fontSize)/10),l=1===new Set(o).size?o[0]:"Mixed",c=o.length>0;return e.jsx(Bte,{label:"F",icon:hB,elements:a,dragInputCallback:tne,value:l,editable:c,scene:n,property:i,appState:r})},rne=({accumulatedChange:e,instantChange:t,originalElements:n,originalElementsMap:r,shouldChangeByStepSize:i,nextValue:s,property:a,scene:o,originalAppState:l})=>{let c=o.getNonDeletedElementsMap(),d=o.getNonDeletedElements(),u=n[0],[h,p]=[u.x+u.width/2,u.y+u.height/2],[f,m]=OD(PD(u.x,u.y),PD(h,p),u.angle);if(l.croppingElementId===u.id){let e=c.get(u.id);if(!e||!uO(e)||!e.crop)return;let n=e.crop,r=n,i=-1===e.scale[0],o=-1===e.scale[1],{width:l,height:d}=lW(e);if(void 0!==s){if("x"===a){let e=s*(n.naturalWidth/l);r=i?{...n,x:bD(n.naturalWidth-e-n.width,0,n.naturalWidth-n.width)}:{...n,x:bD(s*(n.naturalWidth/l),0,n.naturalWidth-n.width)}}return"y"===a&&(r={...n,y:bD(s*(n.naturalHeight/d),0,n.naturalHeight-n.height)}),void DK(e,{crop:r})}let h=("x"===a?t:0)*(i?-1:1),p=("y"===a?t:0)*(o?-1:1);return r={...n,x:bD(n.x+h,0,n.naturalWidth-n.width),y:bD(n.y+p,0,n.naturalHeight-n.height)},void DK(e,{crop:r})}if(void 0!==s)return void Ote("x"===a?s:f,"y"===a?s:m,u,c,d,o,r);let g="x"===a?e:0,b="y"===a?e:0,U="x"===a?Math.round(i?Dte(u.x+g,10):f+g):f,y="y"===a?Math.round(i?Dte(u.y+b,10):m+b):m;Ote(U,y,u,c,d,o,r)},ine=({property:t,element:n,elementsMap:r,scene:i,appState:s})=>{let[a,o]=OD(PD(n.x,n.y),PD(n.x+n.width/2,n.y+n.height/2),n.angle),l=UD("x"===t?a:o,2);if(s.croppingElementId===n.id&&uO(n)&&n.crop){let e=((e,t=!1)=>{let n=e.crop;if(!n)return null;let r=-1===e.scale[0],i=-1===e.scale[1],s=n.x,a=n.y;if(r&&(s=n.naturalWidth-n.width-n.x),i&&(a=n.naturalHeight-n.height-n.y),t)return{x:s,y:a};let{width:o,height:l}=lW(e);return{x:s/(n.naturalWidth/o),y:a/(n.naturalHeight/l)}})(n);e&&(l=UD("x"===t?e.x:e.y,2))}return e.jsx(Bte,{label:"x"===t?"X":"Y",elements:[n],dragInputCallback:rne,scene:i,value:l,property:t,appState:s})},sne=(e,t,n,r,i,s,a)=>{let[o,l,,]=gX(n),c=e-o,d=t-l;for(let u=0;u<n.length;u++){let e=n[u],t=r.get(e.id);if(t&&(!mO(t)||!t.containerId)){let[n,o]=[t.x+t.width/2,t.y+t.height/2],[l,u]=OD(PD(t.x,t.y),PD(n,o),t.angle);Ote(l+c,u+d,e,r,i,a,s,!1)}}},ane=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldChangeByStepSize:r,nextValue:i,property:s,scene:a,originalAppState:o})=>{let l=a.getNonDeletedElementsMap(),c=a.getNonDeletedElements();if(void 0!==i){for(let e of Fte(t,o)){let t=Lte(e,l,n);if(t.length>1){let[e,r,,]=gX(t.map(e=>e.latest));sne("x"===s?i:e,"y"===s?i:r,t.map(e=>e.original),l,c,n,a)}else{let e=t[0]?.original,r=t[0]?.latest;if(e&&r&&Nte(r,s)){let[t,r]=[e.x+e.width/2,e.y+e.height/2],[o,d]=OD(PD(e.x,e.y),PD(t,r),e.angle);Ote("x"===s?i:o,"y"===s?i:d,e,l,c,a,n,!1)}}}return void a.triggerUpdate()}let d=r?Dte(e,10):e;((e,t,n,r,i,s,a,o)=>{for(let l=0;l<r.length;l++){let c=i[l],[d,u]=[c.x+c.width/2,c.y+c.height/2],[h,p]=OD(PD(c.x,c.y),PD(d,u),c.angle),f="x"===e?Math.round(h+t):h,m="y"===e?Math.round(p+n):p;Ote(f,m,c,s,r,o,a,!1)}})(s,"x"===s?d:0,"y"===s?d:0,t,t,l,n,a),a.triggerUpdate()},one=({property:t,elements:n,elementsMap:r,atomicUnits:i,scene:s,appState:a})=>{let o=vt.useMemo(()=>i.map(e=>{let n=Object.keys(e).map(e=>r.get(e)).filter(e=>void 0!==e);if(n.length>1){let[e,r]=gX(n);return Math.round(100*("x"===t?e:r))/100}let[i]=n,[s,a]=[i.x+i.width/2,i.y+i.height/2],[o,l]=OD(PD(i.x,i.y),PD(s,a),i.angle);return Math.round(100*("x"===t?o:l))/100}),[i,r,t]),l=1===new Set(o).size?o[0]:"Mixed";return e.jsx(Bte,{label:"x"===t?"X":"Y",elements:n,dragInputCallback:ane,value:l,property:t,scene:s,appState:a})},lne=({property:t,scene:n,appState:r,setAppState:i})=>e.jsx(Bte,{label:"Grid step",sensitivity:8,elements:[],dragInputCallback:({nextValue:e,instantChange:t,shouldChangeByStepSize:n,setInputValue:r})=>{i(i=>{let s;return e?s=e:t&&(s=n?Dte(i.gridStep+5*Math.sign(t),5):i.gridStep+t),s?(s=vV(s),r(s),{gridStep:s}):(r(i.gridStep),null)})},scene:n,value:r.gridStep,property:t,appState:r}),cne=t=>{let n=Ire(),r=t.app.scene.getSceneNonce()||1,i=t.app.scene.getSelectedElements({selectedElementIds:n.selectedElementIds,includeBoundTextElement:!1}),s=OV(t.app);return e.jsx(hne,{...t,appState:n,sceneNonce:r,selectedElements:i,gridModeEnabled:s})},dne=({children:t,columns:n=1,heading:r,style:i,...s})=>e.jsx("div",{className:BP("exc-stats__row",{"exc-stats__row--heading":r}),style:{gridTemplateColumns:`repeat(${n}, 1fr)`,...i},...s,children:t});dne.displayName="StatsRow";var une=({children:t,order:n,style:r,...i})=>e.jsx("div",{className:"exc-stats__rows",style:{order:n,...r},...i,children:t});une.displayName="StatsRows",cne.StatsRow=dne,cne.StatsRows=une;var hne=vt.memo(({app:t,onClose:n,renderCustomStats:r,selectedElements:i,appState:s,sceneNonce:a,gridModeEnabled:o})=>{let l=t.scene,c=l.getNonDeletedElements(),d=l.getNonDeletedElementsMap(),u=jre(),h=1===i.length?i[0]:null,p=i.length>1?i:null,f=s.croppingElementId&&uO(h),m=f?lW(h):null,[g,b]=vt.useState({width:0,height:0}),U=vt.useMemo(()=>uR(e=>{let t=gX(e);b({width:Math.round(t[2])-Math.round(t[0]),height:Math.round(t[3])-Math.round(t[1])})},50),[]);vt.useEffect(()=>{U(c)},[a,c,U]),vt.useEffect(()=>()=>U.cancel(),[U]);let y=vt.useMemo(()=>Fte(i,s),[i,s]),x=vt.useMemo(()=>SK(i),[i]);return e.jsx("div",{className:"exc-stats",children:e.jsxs(S3,{padding:3,children:[e.jsxs("div",{className:"title",children:[e.jsx("h2",{children:y6("stats.title")}),e.jsx("div",{className:"close",onClick:n,children:Pz})]}),e.jsxs(T3,{label:e.jsx("h3",{children:y6("stats.generalStats")}),open:!!(s.stats.panels&rD),openTrigger:()=>u(e=>({stats:{open:!0,panels:e.stats.panels^rD}})),children:[e.jsxs(une,{children:[e.jsx(dne,{heading:!0,children:y6("stats.scene")}),e.jsxs(dne,{columns:2,children:[e.jsx("div",{children:y6("stats.shapes")}),e.jsx("div",{children:c.length})]}),e.jsxs(dne,{columns:2,children:[e.jsx("div",{children:y6("stats.width")}),e.jsx("div",{children:g.width})]}),e.jsxs(dne,{columns:2,children:[e.jsx("div",{children:y6("stats.height")}),e.jsx("div",{children:g.height})]}),o&&e.jsxs(e.Fragment,{children:[e.jsx(dne,{heading:!0,children:"Canvas"}),e.jsx(dne,{children:e.jsx(lne,{property:"gridStep",scene:l,appState:s,setAppState:u})})]})]}),r?.(c,s)]}),!x&&i.length>0&&e.jsx("div",{id:"elementStats",style:{marginTop:12},children:e.jsx(T3,{label:e.jsx("h3",{children:y6("stats.elementProperties")}),open:!!(s.stats.panels&iD),openTrigger:()=>u(e=>({stats:{open:!0,panels:e.stats.panels^iD}})),children:e.jsxs(une,{children:[h&&e.jsxs(e.Fragment,{children:[f&&e.jsx(dne,{heading:!0,children:y6("labels.unCroppedDimension")}),s.croppingElementId&&uO(h)&&m&&e.jsxs(dne,{columns:2,children:[e.jsx("div",{children:y6("stats.width")}),e.jsx("div",{children:UD(m.width,2)})]}),s.croppingElementId&&uO(h)&&m&&e.jsxs(dne,{columns:2,children:[e.jsx("div",{children:y6("stats.height")}),e.jsx("div",{children:UD(m.height,2)})]}),e.jsx(dne,{heading:!0,"data-testid":"stats-element-type",children:s.croppingElementId?y6("labels.imageCropping"):y6(`element.${h.type}`)}),e.jsx(dne,{children:e.jsx(ine,{element:h,property:"x",elementsMap:d,scene:l,appState:s})}),e.jsx(dne,{children:e.jsx(ine,{element:h,property:"y",elementsMap:d,scene:l,appState:s})}),e.jsx(dne,{children:e.jsx($te,{property:"width",element:h,scene:l,appState:s})}),e.jsx(dne,{children:e.jsx($te,{property:"height",element:h,scene:l,appState:s})}),!SO(h)&&e.jsx(dne,{children:e.jsx(Xte,{property:"angle",element:h,scene:l,appState:s})}),e.jsx(dne,{children:e.jsx(Gte,{property:"fontSize",element:h,scene:l,appState:s})})]}),p&&e.jsxs(e.Fragment,{children:[PV(p)&&e.jsx(dne,{heading:!0,children:y6("element.group")}),e.jsxs(dne,{columns:2,style:{margin:"0.3125rem 0"},children:[e.jsx("div",{children:y6("stats.shapes")}),e.jsx("div",{children:i.length})]}),e.jsx(dne,{children:e.jsx(one,{property:"x",elements:p,elementsMap:d,atomicUnits:y,scene:l,appState:s})}),e.jsx(dne,{children:e.jsx(one,{property:"y",elements:p,elementsMap:d,atomicUnits:y,scene:l,appState:s})}),e.jsx(dne,{children:e.jsx(Qte,{property:"width",elements:p,elementsMap:d,atomicUnits:y,scene:l,appState:s})}),e.jsx(dne,{children:e.jsx(Qte,{property:"height",elements:p,elementsMap:d,atomicUnits:y,scene:l,appState:s})}),e.jsx(dne,{children:e.jsx(ene,{property:"angle",elements:p,scene:l,appState:s})}),e.jsx(dne,{children:e.jsx(nne,{property:"fontSize",elements:p,scene:l,appState:s,elementsMap:d})})]})]})})})]})})},(e,t)=>e.sceneNonce===t.sceneNonce&&e.selectedElements===t.selectedElements&&e.appState.stats.panels===t.appState.stats.panels&&e.gridModeEnabled===t.gridModeEnabled&&e.appState.gridStep===t.appState.gridStep&&e.appState.croppingElementId===t.appState.croppingElementId),pne=({sourceElementId:t,onClose:n,elementsMap:r,appState:i,generateLinkForSelection:s=uq})=>{let a=r.get(t)?.link??null,[o,l]=vt.useState(a),[c,d]=vt.useState(!1);vt.useEffect(()=>{let e=MK(r,i),t=a;if(e.length>0&&s){let n=hq(e,i);n&&(t=vG(s(n.id,n.type)))}l(t)},[r,i,i.selectedElementIds,a,s]);let u=vt.useCallback(()=>{if(o&&o!==r.get(t)?.link){let e=r.get(t);e&&DK(e,{link:o})}if(!o&&c&&t){let e=r.get(t);e&&DK(e,{link:null})}n?.()},[t,o,r,c,n]);return vt.useEffect(()=>{let e=e=>{"elementLinkSelector"===i.openDialog?.name&&e.key===$$.ENTER&&u(),"elementLinkSelector"===i.openDialog?.name&&e.key===$$.ESCAPE&&n?.()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[i,n,u]),e.jsxs("div",{className:"ElementLinkDialog",children:[e.jsxs("div",{className:"ElementLinkDialog__header",children:[e.jsx("h2",{children:y6("elementLink.title")}),e.jsx("p",{children:y6("elementLink.desc")})]}),e.jsxs("div",{className:"ElementLinkDialog__input",children:[e.jsx(T4,{value:o??"",onChange:e=>{c||d(!0),l(e)},onKeyDown:e=>{e.key===$$.ENTER&&u()},className:"ElementLinkDialog__input-field",selectOnRender:!0}),a&&o&&e.jsx(k6,{type:"button",title:y6("buttons.remove"),"aria-label":y6("buttons.remove"),label:y6("buttons.remove"),onClick:()=>{l(null),d(!0)},className:"ElementLinkDialog__remove",icon:VF})]}),e.jsxs("div",{className:"ElementLinkDialog__actions",children:[e.jsx(Z7,{label:y6("buttons.cancel"),onClick:()=>{n?.()},style:{marginRight:10}}),e.jsx(Z7,{label:y6("buttons.confirm"),onClick:u,actionType:"primary"})]})]})},fne=({UIOptions:t})=>e.jsxs(Qee,{__fallback:!0,children:[e.jsx(Qee.DefaultItems.LoadScene,{}),e.jsx(Qee.DefaultItems.SaveToActiveFile,{}),t.canvasActions.export&&e.jsx(Qee.DefaultItems.Export,{}),t.canvasActions.saveAsImage&&e.jsx(Qee.DefaultItems.SaveAsImage,{}),e.jsx(Qee.DefaultItems.SearchMenu,{}),e.jsx(Qee.DefaultItems.Help,{}),e.jsx(Qee.DefaultItems.ClearCanvas,{}),e.jsx(Qee.Separator,{}),e.jsx(Qee.Group,{title:"Excalidraw links",children:e.jsx(Qee.DefaultItems.Socials,{})}),e.jsx(Qee.Separator,{}),e.jsx(Qee.DefaultItems.ToggleTheme,{}),e.jsx(Qee.DefaultItems.ChangeCanvasBackground,{})]}),mne=()=>e.jsxs(tte,{__fallback:!0,children:[e.jsx(tte.Actions.SaveToDisk,{}),e.jsx(tte.Actions.ExportToImage,{})]}),gne=e=>{let{suggestedBindings:t,startBoundElement:n,cursorButton:r,scrollX:i,scrollY:s,...a}=e;return a},bne=St.memo(({actionManager:t,appState:n,files:r,setAppState:i,elements:s,canvas:a,onLockToggle:o,onHandToolToggle:l,onPenModeToggle:c,showExitZenModeBtn:d,renderTopRightUI:u,renderCustomStats:h,UIOptions:p,onExportImage:f,renderWelcomeScreen:m,children:g,app:b,isCollaborating:U,generateLinkForSelection:y})=>{let x=Cre(),v=St.useMemo(()=>({MainMenuTunnel:E2(),WelcomeScreenMenuHintTunnel:E2(),WelcomeScreenToolbarHintTunnel:E2(),WelcomeScreenHelpHintTunnel:E2(),WelcomeScreenCenterTunnel:E2(),FooterCenterTunnel:E2(),DefaultSidebarTriggerTunnel:E2(),DefaultSidebarTabTriggersTunnel:E2(),OverwriteConfirmDialogTunnel:E2(),TTDDialogTriggerTunnel:E2(),tunnelsJotai:z4}),[]),w=v.tunnelsJotai.Provider,[S,E]=i6(x3),k=()=>p.canvasActions.export?e.jsx(xee,{elements:s,appState:n,files:r,actionManager:t,exportOpts:p.canvasActions.export,canvas:a,setAppState:i}):null,C=()=>p.canvasActions.saveAsImage&&"imageExport"===n.openDialog?.name?e.jsx(O9,{elements:s,appState:n,files:r,actionManager:t,onExportImage:f,onCloseRequest:()=>i({openDialog:null}),name:b.getName()}):null,_=()=>e.jsx(hte,{__fallback:!0,onDock:e=>{Z6("sidebar",`toggleDock (${e?"dock":"undock"})`,`(${x.editor.isMobile?"mobile":"desktop"})`)}}),M=a6(Tee),I=e.jsxs(e.Fragment,{children:[g,e.jsx(fne,{UIOptions:p}),e.jsx(hte.Trigger,{__fallback:!0,icon:SF,title:hL(y6("toolBar.library")),onToggle:e=>{e&&Z6("sidebar",`${BN} (open)`,`button (${x.editor.isMobile?"mobile":"desktop"})`)},tab:HN,children:y6("toolBar.library")}),e.jsx(mne,{}),"ttd"===n.openDialog?.name&&e.jsx(Pte,{__fallback:!0}),n.isLoading&&e.jsx(S6,{delay:250}),n.errorMessage&&e.jsx(j9,{onClose:()=>i({errorMessage:null}),children:n.errorMessage}),S&&!x.editor.isMobile&&e.jsx(v3,{colorPickerType:S.colorPickerType,onCancel:()=>{E(null)},onChange:(e,t,n,{altKey:r})=>{if("elementBackground"===e||"elementStroke"===e)if(n.length){for(let i of n)DK(i,{[r&&S.swapPreviewOnAlt?"elementBackground"===e?"strokeColor":"backgroundColor":"elementBackground"===e?"backgroundColor":"strokeColor"]:t},!1),UF.delete(i);NK.getScene(n[0])?.triggerUpdate()}else i("elementBackground"===e?{currentItemBackgroundColor:t}:{currentItemStrokeColor:t})},onSelect:(e,t)=>{E(e=>e?.keepOpenOnAlt&&t.altKey?e:null),S?.onSelect?.(e,t)}}),"help"===n.openDialog?.name&&e.jsx(pee,{onClose:()=>{i({openDialog:null})}}),e.jsx(K4,{}),"elementLinkSelector"===n.openDialog?.name&&e.jsx(pne,{sourceElementId:n.openDialog.sourceElementId,onClose:()=>{i({openDialog:null})},elementsMap:b.scene.getNonDeletedElementsMap(),appState:n,generateLinkForSelection:y}),e.jsx(v.OverwriteConfirmDialogTunnel.Out,{}),C(),k(),n.pasteDialog.shown&&e.jsx(see,{setAppState:i,appState:n,onClose:()=>i({pasteDialog:{shown:!1,data:null}})}),x.editor.isMobile&&e.jsx(ree,{app:b,appState:n,elements:s,actionManager:t,renderJSONExportDialog:k,renderImageExportDialog:C,setAppState:i,onLockToggle:o,onHandToolToggle:l,onPenModeToggle:c,renderTopRightUI:u,renderCustomStats:h,renderSidebars:_,device:x,renderWelcomeScreen:m,UIOptions:p}),!x.editor.isMobile&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"layer-ui__wrapper",style:n.openSidebar&&M&&x.editor.canFitSidebar?{width:"calc(100% - var(--right-sidebar-width))"}:{},children:[m&&e.jsx(v.WelcomeScreenCenterTunnel.Out,{}),(()=>{let r=yQ(n,s),i=n.stats.open&&!n.zenModeEnabled&&!n.viewModeEnabled&&"elementLinkSelector"!==n.openDialog?.name;return e.jsx(F9,{side:"top",children:e.jsxs("div",{className:"App-menu App-menu_top",children:[e.jsxs(H7.Col,{gap:6,className:BP("App-menu_top__left"),children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx(v.MainMenuTunnel.Out,{}),m&&e.jsx(v.WelcomeScreenMenuHintTunnel.Out,{})]}),r&&e.jsx(J9,{heading:"selectedShapeActions",className:BP("selected-shape-actions zen-mode-transition",{"transition-left":n.zenModeEnabled}),children:e.jsx(S3,{className:WA,padding:2,style:{maxHeight:n.height-166+"px"},children:e.jsx($4,{appState:n,elementsMap:b.scene.getNonDeletedElementsMap(),renderAction:t.renderAction,app:b})})})]}),!n.viewModeEnabled&&"elementLinkSelector"!==n.openDialog?.name&&e.jsx(J9,{heading:"shapes",className:"shapes-section",children:t=>e.jsxs("div",{style:{position:"relative"},children:[m&&e.jsx(v.WelcomeScreenToolbarHintTunnel.Out,{}),e.jsx(H7.Col,{gap:4,align:"start",children:e.jsxs(H7.Row,{gap:1,className:BP("App-toolbar-container",{"zen-mode":n.zenModeEnabled}),children:[e.jsxs(S3,{padding:1,className:BP("App-toolbar",{"zen-mode":n.zenModeEnabled}),children:[e.jsx(Z9,{appState:n,isMobile:x.editor.isMobile,device:x,app:b}),t,e.jsxs(H7.Row,{gap:1,children:[e.jsx(tee,{zenModeEnabled:n.zenModeEnabled,checked:n.penMode,onChange:()=>c(null),title:y6("toolBar.penMode"),penDetected:n.penDetected}),e.jsx(Q9,{checked:n.activeTool.locked,onChange:o,title:y6("toolBar.lock")}),e.jsx("div",{className:"App-toolbar__divider"}),e.jsx(nee,{checked:gD(n),onChange:()=>l(),title:y6("toolBar.hand"),isMobile:!0}),e.jsx(W4,{appState:n,activeTool:n.activeTool,UIOptions:p,app:b})]})]}),U&&e.jsx(S3,{style:{marginLeft:8,alignSelf:"center",height:"fit-content"},children:e.jsx(pte,{title:y6("toolBar.laser"),checked:n.activeTool.type===JN,onChange:()=>b.setActiveTool({type:JN}),isMobile:!0})})]})})]})}),e.jsxs("div",{className:BP("layer-ui__wrapper__top-right zen-mode-transition",{"transition-right":n.zenModeEnabled}),children:[n.collaborators.size>0&&e.jsx(bee,{collaborators:n.collaborators,userToFollow:n.userToFollow?.socketId||null}),u?.(x.editor.isMobile,n),!n.viewModeEnabled&&"elementLinkSelector"!==n.openDialog?.name&&(!M||n.openSidebar?.name!==BN)&&e.jsx(v.DefaultSidebarTriggerTunnel.Out,{}),i&&e.jsx(cne,{app:b,onClose:()=>{t.executeAction(d7)},renderCustomStats:h})]})]})})})(),e.jsx(See,{appState:n,actionManager:t,showExitZenModeBtn:d,renderWelcomeScreen:m}),n.scrolledOutside&&e.jsx("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{i(e=>({...UV(s,e)}))},children:y6("buttons.scrollBackToContent")})]}),_()]})]});return e.jsx(m3.Provider,{value:n,children:e.jsx(w,{children:e.jsx(O4.Provider,{value:v,children:I})})})},(e,t)=>{if(e.children!==t.children)return!1;let{canvas:n,appState:r,...i}=e,{canvas:s,appState:a,...o}=t;return XL(gne(r),gne(a),{selectedElementIds:XL,selectedGroupIds:XL})&&XL(i,o)}),Une=({message:t,onClose:n,closable:r=!1,duration:i=5e3,style:s})=>{let a=vt.useRef(0),o=i!==1/0,l=vt.useCallback(()=>{o&&(a.current=window.setTimeout(()=>n(),i))},[n,i,o]);return vt.useEffect(()=>{if(o)return l(),()=>clearTimeout(a.current)},[l,t,i,o]),e.jsxs("div",{className:"Toast",onMouseEnter:o?()=>clearTimeout(a?.current):void 0,onMouseLeave:o?l:void 0,style:s,children:[e.jsx("p",{className:"Toast__message",children:t}),r&&e.jsx(k6,{icon:Pz,"aria-label":"close",type:"icon",onClick:n,className:"close"})]})},yne=kG({name:"viewMode",label:"labels.viewMode",paletteName:"Toggle view mode",icon:FB,viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.viewModeEnabled},perform(e,t){return{appState:{...t,viewModeEnabled:!this.checked(t)},captureUpdate:yY}},checked:e=>e.viewModeEnabled,predicate:(e,t,n)=>typeof n.viewModeEnabled>"u",keyTest:e=>!e[$$.CTRL_OR_CMD]&&e.altKey&&e.code===B$}),xne=(e,t)=>{let n=t.scene.getSelectedElements(e);return 1===n.length&&UO(n[0])},vne=kG({name:"selectAllElementsInFrame",label:"labels.selectAllElementsInFrame",trackEvent:{category:"canvas"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t).at(0)||null;if(UO(i)){let n=aK(wQ(e),i.id).filter(e=>!("text"===e.type&&e.containerId));return{elements:e,appState:{...t,selectedElementIds:n.reduce((e,t)=>(e[t.id]=!0,e),{})},captureUpdate:bY}}return{elements:e,appState:t,captureUpdate:yY}},predicate:(e,t,n,r)=>xne(t,r)}),wne=kG({name:"removeAllElementsFromFrame",label:"labels.removeAllElementsFromFrame",trackEvent:{category:"history"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t).at(0)||null;return UO(i)?{elements:fK(e,i),appState:{...t,selectedElementIds:{[i.id]:!0}},captureUpdate:bY}:{elements:e,appState:t,captureUpdate:yY}},predicate:(e,t,n,r)=>xne(t,r)});kG({name:"updateFrameRendering",label:"labels.updateFrameRendering",viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t)=>({elements:e,appState:{...t,frameRendering:{...t.frameRendering,enabled:!t.frameRendering.enabled}},captureUpdate:yY}),checked:e=>e.frameRendering.enabled}),kG({name:"setFrameAsActiveTool",label:"toolBar.frame",trackEvent:{category:"toolbar"},icon:PB,viewMode:!1,perform:(e,t,n,r)=>{let i=wL(t,{type:"frame"});return PG(r.interactiveCanvas,{...t,activeTool:i}),{elements:e,appState:{...t,activeTool:wL(t,{type:"frame"})},captureUpdate:yY}},keyTest:e=>!e[$$.CTRL_OR_CMD]&&!e.shiftKey&&!e.altKey&&e.key.toLocaleLowerCase()===$$.F});var Sne=kG({name:"wrapSelectionInFrame",label:"labels.wrapSelectionInFrame",trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=MK(e,t);return i.length>0&&!i.some(e=>UO(e))},perform:(e,t,n,r)=>{let i=MK(e,t),[s,a,o,l]=gX(i,r.scene.getNonDeletedElementsMap()),c=BG({x:s-16,y:a-16,width:o-s+32,height:l-a+32});if(t.editingGroupId){let e=jV(i,t.editingGroupId);for(let n of e){let e=n.groupIds.indexOf(t.editingGroupId);DK(n,{groupIds:n.groupIds.slice(0,e)},!1)}}return{elements:hK([...r.scene.getElementsIncludingDeleted(),c],i,c,t),appState:{selectedElementIds:{[c.id]:!0}},captureUpdate:bY}}}),Ene=()=>e.jsxs("div",{"data-testid":"brave-measure-text-error",children:[e.jsx("p",{children:e.jsx(q7,{i18nKey:"errors.brave_measure_text_error.line1",bold:t=>e.jsx("span",{style:{fontWeight:600},children:t})})}),e.jsx("p",{children:e.jsx(q7,{i18nKey:"errors.brave_measure_text_error.line2",bold:t=>e.jsx("span",{style:{fontWeight:600},children:t})})}),e.jsx("p",{children:e.jsx(q7,{i18nKey:"errors.brave_measure_text_error.line3",link:t=>e.jsx("a",{href:"http://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser",children:t})})}),e.jsx("p",{children:e.jsx(q7,{i18nKey:"errors.brave_measure_text_error.line4",issueLink:t=>e.jsx("a",{href:"https://github.com/excalidraw/excalidraw/issues/new",children:t}),discordLink:t=>e.jsxs("a",{href:"https://discord.gg/UexuTaE",children:[t,"."]})})})]}),kne=100,Cne=0,_ne=100,Mne=(e,t,n)=>{let r=WG({x:0,y:0,textAlign:MN,verticalAlign:kN,...t,containerId:e.id,strokeColor:t.strokeColor||e.strokeColor});return Object.assign(e,{boundElements:(e.boundElements||[]).concat({type:"text",id:r.id})}),sG(r,e,n),[e,r]},Ine=(e,t,n,r,i)=>{let s,a;if(Object.assign(e,{startBinding:e?.startBinding||null,endBinding:e.endBinding||null}),t){let n,a=t?.width??_ne,o=t?.height??_ne;t.id&&(n=r.getElement(t.id));let l=t.x||e.x-a,c=t.y||e.y-o/2,d=n?n.type:t.type;if(d){if("text"===d){let r="";n&&"text"===n.type?r=n.text:"text"===t.type&&(r=t.text),s=WG({x:l,y:c,type:"text",...n,...t,text:r}),Object.assign(s,{x:t.x||e.x-s.width,y:t.y||e.y-s.height/2})}else switch(d){case"rectangle":case"ellipse":case"diamond":s=FG({x:l,y:c,width:a,height:o,...n,...t,type:d});break;default:GL(e,`Unhandled element start type "${t.type}"`,!0)}AX(e,s,"start",i)}}if(n){let t,s=n?.height??_ne,o=n?.width??_ne;n.id&&(t=r.getElement(n.id));let l=n.x||e.x+e.width,c=n.y||e.y-s/2,d=t?t.type:n.type;if(d){if("text"===d){let r="";t&&"text"===t.type?r=t.text:"text"===n.type&&(r=n.text),a=WG({x:l,y:c,type:"text",...t,...n,text:r}),Object.assign(a,{y:n.y||e.y-a.height/2})}else switch(d){case"rectangle":case"ellipse":case"diamond":a=FG({x:l,y:c,width:o,height:s,...t,...n,type:d});break;default:GL(e,`Unhandled element end type "${d}"`,!0)}AX(e,a,"end",i)}}if(e.points.length<2)return{linearElement:e,startBoundElement:s,endBoundElement:a};let o=e.points.length-1,l=.5,c=ZL(e.points);return e.points[o][0]>e.points[o-1][0]&&(c[0][0]=l,c[o][0]-=l),e.points[o][0]<e.points[o-1][0]&&(c[0][0]=-l,c[o][0]+=l),e.points[o][1]>e.points[o-1][1]&&(c[0][1]=l,c[o][1]-=l),e.points[o][1]<e.points[o-1][1]&&(c[0][1]=-l,c[o][1]+=l),Object.assign(e,{points:c}),{linearElement:e,startBoundElement:s,endBoundElement:a}},jne=class{constructor(){XM(this,"excalidrawElements",new Map),XM(this,"add",e=>{e&&this.excalidrawElements.set(e.id,e)}),XM(this,"getElements",()=>iY(Array.from(this.excalidrawElements.values()))),XM(this,"getElementsMap",()=>iO(DL(this.getElements()))),XM(this,"getElement",e=>this.excalidrawElements.get(e))}},Tne=(e,t)=>{if(!e)return[];let n=ZL(e),r=new jne,i=new Map,s=new Map;for(let o of n){let e,n=o.id;switch(!1!==t?.regenerateIds&&Object.assign(o,{id:LG()}),o.type){case"rectangle":case"ellipse":case"diamond":{let t=o?.label?.text&&void 0===o.width?0:o?.width||_ne,n=o?.label?.text&&void 0===o.height?0:o?.height||_ne;e=FG({...o,width:t,height:n});break}case"line":{let t=o.width||kne,n=o.height||Cne;e=GG({width:t,height:n,points:[PD(0,0),PD(t,n)],...o});break}case"arrow":{let t=o.width||kne,n=o.height||Cne;e=YG({width:t,height:n,endArrowhead:"arrow",points:[PD(0,0),PD(t,n)],...o,type:"arrow"}),Object.assign(e,tX(e.points));break}case"text":{let t=o?.fontFamily||rN,n=o?.fontSize||nN,r=o?.lineHeight||JH(t),i=o.text??"",s=HO(i),a=OO(s,gL({fontFamily:t,fontSize:n}),r);e=WG({width:a.width,height:a.height,fontFamily:t,fontSize:n,...o});break}case"image":e=qG({width:o?.width||_ne,height:o?.height||_ne,...o});break;case"frame":e=BG({x:0,y:0,...o});break;case"magicframe":e=HG({x:0,y:0,...o});break;case"freedraw":case"iframe":case"embeddable":e=o;break;default:e=o,GL(o,`Unhandled element type "${o.type}"`,!0)}r.getElement(e.id)||(r.add(e),i.set(e.id,o),n&&s.set(n,e.id))}let a=r.getElementsMap();for(let[o,l]of i){let e=r.getElement(o);switch(l.type){case"rectangle":case"ellipse":case"diamond":case"arrow":if(l.label?.text){let[t,n]=Mne(e,l?.label,a);if(r.add(t),r.add(n),wO(t)){let e="arrow"===l.type?l?.start:void 0,n="arrow"===l.type?l?.end:void 0;if(e&&e.id){let t=s.get(e.id);t&&Object.assign(e,{id:t})}if(n&&n.id){let e=s.get(n.id);e&&Object.assign(n,{id:e})}let{linearElement:i,startBoundElement:o,endBoundElement:c}=Ine(t,e,n,r,a);t=i,r.add(i),r.add(o),r.add(c)}}else switch(l.type){case"arrow":{let{start:t,end:n}=l;if(t&&t.id){let e=s.get(t.id);Object.assign(t,{id:e})}if(n&&n.id){let e=s.get(n.id);Object.assign(n,{id:e})}let{linearElement:i,startBoundElement:o,endBoundElement:c}=Ine(e,t,n,r,a);r.add(i),r.add(o),r.add(c);break}}}}for(let[o,l]of i){if("frame"!==l.type&&"magicframe"!==l.type)continue;let e=r.getElement(o);if(!e)throw new Error(`Excalidraw element with id ${o} doesn't exist`);let t=[];l.children.forEach(n=>{let i=s.get(n);if(!i)throw new Error(`Element with ${n} wasn't mapped correctly`);let a=r.getElement(i);if(!a)throw new Error(`Frame element with id ${i} doesn't exist`);Object.assign(a,{frameId:e.id}),a?.boundElements?.forEach(n=>{let i=r.getElement(n.id);if(!i)throw new Error(`Bound element with id ${n.id} doesn't exist`);Object.assign(i,{frameId:e.id}),t.push(i)}),t.push(a)});let[n,i,a,c]=gX(t),d=10;n-=d,i-=d,a+=d,c+=d;let u=e?.x||n,h=e?.y||i,p=e?.width||a-n,f=e?.height||c-i;Object.assign(e,{x:u,y:h,width:p,height:f}),FL()&&l.children.length}return r.getElements()},Rne=e=>n=>{t.unstable_batchedUpdates(e,n)},Pne=e=>UL(n=>{t.unstable_batchedUpdates(e,n)}),Ane=(()=>{let e;try{let t=vt.version.split(".");e=Number(t[0])>17}catch{e=!1}let t=!1;return()=>!0===window.EXCALIDRAW_THROTTLE_RENDER&&(!!e||(t||(t=!0),!1))})(),Nne=(e,t,n)=>{if(!n.zenModeEnabled){let n=e.points[0],r=e.points[e.points.length-1];One(n,r,t)}for(let r of e.points)Lne(r,n,t)},Dne=(e,t,n)=>{Lne(e.points[0],n,t),n.zenModeEnabled||One(e.points[0],e.points[1],t)},Lne=([e,t],n,r)=>{r.save();let i=(n.zenModeEnabled?3:2)/n.zoom.value;r.beginPath(),r.moveTo(e-i,t-i),r.lineTo(e+i,t+i),r.moveTo(e+i,t-i),r.lineTo(e-i,t+i),r.stroke(),r.restore()},One=(e,t,n)=>{n.beginPath(),n.lineTo(e[0],e[1]),n.lineTo(t[0],t[1]),n.stroke()},Fne=(e,t,n,r,i)=>{let s=8/r.zoom.value,a=s/2,o=s/4;if("horizontal"===n){let n=[(e[0]+t[0])/2,e[1]];r.zenModeEnabled||One(PD(e[0],e[1]-s),PD(e[0],e[1]+s),i),One(PD(n[0]-o,n[1]-a),PD(n[0]-o,n[1]+a),i),One(PD(n[0]+o,n[1]-a),PD(n[0]+o,n[1]+a),i),r.zenModeEnabled||(One(PD(t[0],t[1]-s),PD(t[0],t[1]+s),i),One(e,t,i))}else{let n=[e[0],(e[1]+t[1])/2];r.zenModeEnabled||One(PD(e[0]-s,e[1]),PD(e[0]+s,e[1]),i),One(PD(n[0]-a,n[1]-o),PD(n[0]+a,n[1]-o),i),One(PD(n[0]-a,n[1]+o),PD(n[0]+a,n[1]+o),i),r.zenModeEnabled||(One(PD(t[0]-s,t[1]),PD(t[0]+s,t[1]),i),One(e,t,i))}},zne=(e,t,n)=>{t.fillStyle="rgba(105, 101, 219, 0.4)",lq(t,e[0],e[1],eG.POINT_HANDLE_SIZE/n.zoom.value,!1)},Bne=(e,t,n,r,i,s,a,o,l=!1,c=0)=>{e.save(),e.translate(s,a),e.rotate(o),l&&e.fillRect(t-s,n-a,r,i),c&&e.roundRect?(e.beginPath(),e.roundRect(t-s,n-a,r,i,c),e.stroke(),e.closePath()):e.strokeRect(t-s,n-a,r,i),e.restore()},Hne=(e,t,n,r,i,s=!1)=>{e.strokeStyle="#5e5ad8",e.setLineDash([]),e.fillStyle="rgba(255, 255, 255, 0.9)",i?e.fillStyle="rgba(134, 131, 226, 0.9)":s&&(e.fillStyle="rgba(177, 151, 252, 0.7)"),lq(e,n[0],n[1],r/t.zoom.value,!s)},$ne=(e,t,n,r)=>{let[i,s,a,o]=sX(t,n),l=a-i,c=o-s;e.strokeStyle="rgba(0,0,0,.05)";let d=r.value<1?r.value:1;e.lineWidth=10/d;let u=e.lineWidth/2+4,h=iW(Math.min(t.width,t.height),t);switch(t.type){case"rectangle":case"text":case"image":case"iframe":case"embeddable":case"frame":case"magicframe":Bne(e,i-u,s-u,l+2*u,c+2*u,i+l/2,s+c/2,t.angle,void 0,h);break;case"diamond":let n=Math.hypot(l,c);((e,t,n,r,i,s)=>{e.save(),e.translate(r,i),e.rotate(s),e.beginPath(),e.moveTo(0,n/2),e.lineTo(t/2,0),e.lineTo(0,-n/2),e.lineTo(-t/2,0),e.closePath(),e.stroke(),e.restore()})(e,l+2*(u*n/c),c+2*(u*n/l),i+l/2,s+c/2,t.angle);break;case"ellipse":((e,t,n,r,i,s)=>{e.beginPath(),e.ellipse(r,i,t/2,n/2,s,0,2*Math.PI),e.stroke()})(e,l+2*u,c+2*u,i+l/2,s+c/2,t.angle)}},Wne=(e,t,n,r)=>{let[i,s,a]=t,o=aV(a,a.width,a.height,r);e.strokeStyle="rgba(0,0,0,0)",e.fillStyle="rgba(0,0,0,.05)",("both"===s?[0,-1]:"start"===s?[0]:[-1]).forEach(t=>{let[r,s]=eG.getPointAtIndexGlobalCoordinates(i,t,n);lq(e,r,s,o)})},Xne=(e,t,n)=>{let{angle:r,x1:i,y1:s,x2:a,y2:o,selectionColors:l,cx:c,cy:d,dashed:u,activeEmbeddable:h}=n,p=a-i,f=o-s,m=(n.padding??4)/t.zoom.value,g=8/t.zoom.value,b=4/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=(h?4:1)/t.zoom.value;let U=l.length;for(let y=0;y<U;++y)e.strokeStyle=l[y],u&&e.setLineDash([g,b+(g+b)*(U-1)]),e.lineDashOffset=(g+b)*y,Bne(e,i-m,s-m,p+2*m,f+2*m,c,d,r);e.restore()},Vne=(e,t,n)=>{let r=n.filter(e=>0===e.groupIds.length),i=n.filter(e=>e.groupIds.length>0),s=e=>{let[t,n,r,i]=gX(e);return{angle:0,x1:t,x2:r,y1:n,y2:i,selectionColors:["rgb(0,118,255)"],dashed:!1,cx:t+(r-t)/2,cy:n+(i-n)/2,activeEmbeddable:!1}};Object.entries(_V(i,t)).filter(([e,t])=>t).map(([e,t])=>e).map(e=>(e=>{let t=jV(n,e);return s(t)})(e)).concat(r.map(e=>s([e]))).forEach(n=>Xne(e,t,n))},Gne=(e,t,n,r)=>{if(!t.selectedLinearElement)return;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=1/t.zoom.value;let i=eG.getPointsGlobalCoordinates(n,r),{POINT_HANDLE_SIZE:s}=eG,a=t.editingLinearElement?s:s/2;if(i.forEach((r,s)=>{if(SO(n)&&0!==s&&s!==i.length-1)return;let o=!!t.editingLinearElement?.selectedPointsIndices?.includes(s);Hne(e,t,r,a,o)}),SO(n)){let r=n.fixedSegments?.map(e=>e.index)||[];i.slice(0,-1).forEach((a,o)=>{eG.isSegmentTooShort(n,i[o+1],i[o],o,t.zoom)||Hne(e,t,PD((a[0]+i[o+1][0])/2,(a[1]+i[o+1][1])/2),s/2,!1,!r.includes(o+1))})}else eG.getEditorMidPoints(n,r,t).filter((e,t,r)=>null!==e&&!(SO(n)&&(0===t||t===r.length-1))).forEach(n=>{(t.editingLinearElement||2===i.length)&&Hne(e,t,n,s/2,!1,!0)});e.restore()},Yne=(e,t,n,r,i)=>{Object.keys(r).forEach(s=>{let a=r[s];if(void 0!==a){let[r,o,l,c]=a;e.save(),e.lineWidth=1/n.zoom.value,t.selectionColor&&(e.strokeStyle=t.selectionColor),"rotation"===s?lq(e,r+l/2,o+c/2,l/2):e.roundRect?(e.beginPath(),e.roundRect(r,o,l,c,2/n.zoom.value),e.fill(),e.stroke()):Bne(e,r,o,l,c,r+l/2,o+c/2,i,!0),e.restore()}})},qne=({canvas:e,elementsMap:t,visibleElements:n,selectedElements:r,allElementsMap:i,scale:s,appState:a,renderConfig:o,device:l})=>{if(null===e)return{atLeastOneVisibleElement:!1,elementsMap:t};let c,[d,u]=cq(e,s),h=dq({canvas:e,scale:s,normalizedWidth:d,normalizedHeight:u});if(h.save(),h.scale(a.zoom.value,a.zoom.value),n.forEach(e=>{a.editingLinearElement?.elementId===e.id&&e&&(c=e)}),c&&Gne(h,a,c,t),a.selectionElement&&!a.isCropping)try{((e,t,n,r)=>{t.save(),t.translate(e.x+n.scrollX,e.y+n.scrollY),t.fillStyle="rgba(0, 0, 200, 0.04)";let i=.5/n.zoom.value;t.fillRect(i,i,e.width,e.height),t.lineWidth=1/n.zoom.value,t.strokeStyle=r,t.strokeRect(i,i,e.width,e.height),t.restore()})(a.selectionElement,h,a,o.selectionColor)}catch(m){}if(a.editingTextElement&&mO(a.editingTextElement)){let e=i.get(a.editingTextElement.id);e&&!e.autoResize&&((e,t,n,r)=>{t.save();let i=4/n.zoom.value,s=e.width+2*i,a=e.height+2*i,o=e.x+s/2,l=e.y+a/2,c=-(s/2+i),d=-(a/2+i);t.translate(o+n.scrollX,l+n.scrollY),t.rotate(e.angle),t.lineWidth=1/n.zoom.value,t.strokeStyle=r,t.strokeRect(c,d,s,a),t.restore()})(e,h,a,o.selectionColor)}a.isBindingEnabled&&a.suggestedBindings.filter(e=>null!=e).forEach(e=>{((e,t,n,r)=>{let i=Array.isArray(n)?Wne:$ne;e.save(),e.translate(t.scrollX,t.scrollY),i(e,n,r,t.zoom),e.restore()})(h,a,e,t)}),a.frameToHighlight&&((e,t,n,r)=>{let[i,s,a,o]=sX(n,r),l=a-i,c=o-s;e.strokeStyle="rgb(0,118,255)",e.lineWidth=tN.strokeWidth/t.zoom.value,e.save(),e.translate(t.scrollX,t.scrollY),Bne(e,i,s,l,c,i+l/2,s+c/2,n.angle,!1,tN.radius/t.zoom.value),e.restore()})(h,a,a.frameToHighlight,t),a.elementsToHighlight&&Vne(h,a,a.elementsToHighlight);let p,f=r.some(e=>UO(e));if(1===r.length&&a.editingLinearElement?.elementId===r[0].id&&Gne(h,a,r[0],t),SO(r[0])&&a.selectedLinearElement&&a.selectedLinearElement.segmentMidPointHoveredCoords?((e,t)=>{YL(t.selectedLinearElement,"selectedLinearElement is null");let{segmentMidPointHoveredCoords:n}=t.selectedLinearElement;YL(n,"midPointCoords is null"),e.save(),e.translate(t.scrollX,t.scrollY),zne(n,e,t),e.restore()})(h,a):a.selectedLinearElement&&a.selectedLinearElement.hoverPointIndex>=0&&!(SO(r[0])&&a.selectedLinearElement.hoverPointIndex>0&&a.selectedLinearElement.hoverPointIndex<r[0].points.length-1)&&((e,t,n)=>{let{elementId:r,hoverPointIndex:i}=t.selectedLinearElement;if(t.editingLinearElement?.selectedPointsIndices?.includes(i))return;let s=eG.getElement(r,n);if(!s)return;let a=eG.getPointAtIndexGlobalCoordinates(s,i,n);e.save(),e.translate(t.scrollX,t.scrollY),zne(a,e,t),e.restore()})(h,a,t),!a.multiElement&&!a.editingLinearElement){let e=eQ(r,a),n=1===r.length&&vO(r[0]);n&&a.selectedLinearElement?.elementId===r[0].id&&!r[0].locked&&Gne(h,a,r[0],t);let i=o.selectionColor||aR.black;if(e){let e=DL(r),s=[];for(let r of t.values()){let l=[],c=o.remoteSelectedElementIds.get(r.id);if(n&&SO(r)&&(r.startBinding||r.endBinding)||(e.has(r.id)&&!EV(a,r)&&l.push(i),c&&l.push(...c.map(e=>$8(e,a.collaborators.get(e))))),l.length){let[e,n,i,o,d,u]=sX(r,t,!0);s.push({angle:r.angle,x1:e,y1:n,x2:i,y2:o,selectionColors:l,dashed:!!c,cx:d,cy:u,activeEmbeddable:a.activeEmbeddable?.element===r&&"active"===a.activeEmbeddable.state,padding:r.id===a.croppingElementId||uO(r)?0:void 0})}}let l=e=>{let n=jV(t,e),[r,i,a,o]=gX(n);s.push({angle:0,x1:r,x2:a,y1:i,y2:o,selectionColors:[aR.black],dashed:!0,cx:r+(a-r)/2,cy:i+(o-i)/2,activeEmbeddable:!1})};for(let t of CV(a))l(t);a.editingGroupId&&l(a.editingGroupId),s.forEach(e=>Xne(h,a,e))}if(h.save(),h.translate(a.scrollX,a.scrollY),1===r.length){h.fillStyle=aR.white;let n=JK(r[0],a.zoom,t,"mouse",KK(l));if(!a.viewModeEnabled&&e&&!mO(a.editingTextElement)&&!a.croppingElementId&&Yne(h,o,a,n,r[0].angle),a.croppingElementId&&!a.isCropping){let e=t.get(a.croppingElementId);e&&uO(e)&&((e,t,n,r,i)=>{let[s,a,,,o,l]=sX(r,i),c=3/n.zoom.value,d=c/2,u=o-s+c,h=l-a+c,p=Math.min(20/n.zoom.value,u),f=Math.min(20/n.zoom.value,h);e.save(),e.fillStyle=t.selectionColor,e.strokeStyle=t.selectionColor,e.lineWidth=c,[[[-u,-h],[0,d],[p,d],[d,0],[d,f]],[[u-d,-h],[d,d],[-p+d,d],[0,0],[0,f]],[[-u,h],[0,-d],[p,-d],[d,0],[d,-f]],[[u-d,h],[d,-d],[-p+d,-d],[0,0],[0,-f]]].forEach(t=>{let[[n,i],[s,a],[c,d],[u,h],[p,f]]=t;e.save(),e.translate(o,l),e.rotate(r.angle),e.beginPath(),e.moveTo(n+s,i+a),e.lineTo(n+c,i+d),e.stroke(),e.beginPath(),e.moveTo(n+u,i+h),e.lineTo(n+p,i+f),e.stroke(),e.restore()}),e.restore()})(h,o,a,e,t)}}else if(r.length>1&&!a.isRotating){let e=4/a.zoom.value;h.fillStyle=aR.white;let[t,n,s,c]=gX(r),d=h.getLineDash();h.setLineDash([2/a.zoom.value]);let u=h.lineWidth;h.lineWidth=1/a.zoom.value,h.strokeStyle=i,Bne(h,t-e,n-e,s-t+2*e,c-n+2*e,(t+s)/2,(n+c)/2,0),h.lineWidth=u,h.setLineDash(d);let p=QK([t,n,s,c,(t+s)/2,(n+c)/2],0,a.zoom,"mouse",f?{...KK(l),rotation:!0}:KK(l));r.some(e=>!e.locked)&&Yne(h,o,a,p,0)}h.restore()}return a.searchMatches.forEach(({id:e,focus:n,matchedLines:r})=>{let i=t.get(e);if(i&&mO(i)){let[e,s,,,o,l]=sX(i,t,!0);h.save(),a.theme===JA?h.fillStyle=n?"rgba(255, 124, 0, 0.4)":"rgba(255, 226, 0, 0.4)":h.fillStyle=n?"rgba(229, 82, 0, 0.4)":"rgba(99, 52, 0, 0.4)",h.translate(a.scrollX,a.scrollY),h.translate(o,l),h.rotate(i.angle),r.forEach(t=>{h.fillRect(e+t.offsetX-o,s+t.offsetY-l,t.width,t.height)}),h.restore()}}),((e,t)=>{if(!t.snapLines.length)return;let n=t.theme===JA||t.zenModeEnabled?"#ff6b6b":"#ff0000",r=(t.zenModeEnabled?1.5:1)/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY);for(let i of t.snapLines)"pointer"===i.type?(e.lineWidth=r,e.strokeStyle=n,Dne(i,e,t)):"gap"===i.type?(e.lineWidth=r,e.strokeStyle=n,Fne(i.points[0],i.points[1],i.direction,t,e)):"points"===i.type&&(e.lineWidth=r,e.strokeStyle=n,Nne(i,e,t));e.restore()})(h,a),h.restore(),(({context:e,renderConfig:t,appState:n,normalizedWidth:r,normalizedHeight:i})=>{for(let[s,a]of t.remotePointerViewportCoords){let{x:o,y:l}=a,c=n.collaborators.get(s);o-=n.offsetLeft,l-=n.offsetTop;let d=11,u=14,h=o<0||o>r-d||l<0||l>i-u;o=Math.max(o,0),o=Math.min(o,r-d),l=Math.max(l,0),l=Math.min(l,i-u);let p=$8(s,c);e.save(),e.strokeStyle=p,e.fillStyle=p;let f=t.remotePointerUserStates.get(s),m=h||"idle"===f||"away"===f;m&&(e.globalAlpha=.3),"down"===t.remotePointerButton.get(s)&&(e.beginPath(),e.arc(o,l,15,0,2*Math.PI,!1),e.lineWidth=3,e.strokeStyle="#ffffff88",e.stroke(),e.closePath(),e.beginPath(),e.arc(o,l,15,0,2*Math.PI,!1),e.lineWidth=1,e.strokeStyle=p,e.stroke(),e.closePath());let g=n.theme===eN?"#2f6330":"#a2f1a6",b=c?.isSpeaking;b&&(e.fillStyle=g,e.strokeStyle=g,e.lineWidth=10,e.lineJoin="round",e.beginPath(),e.moveTo(o,l),e.lineTo(o+0,l+14),e.lineTo(o+4,l+9),e.lineTo(o+11,l+8),e.closePath(),e.stroke(),e.fill()),e.fillStyle=aN,e.strokeStyle=aN,e.lineWidth=6,e.lineJoin="round",e.beginPath(),e.moveTo(o,l),e.lineTo(o+0,l+14),e.lineTo(o+4,l+9),e.lineTo(o+11,l+8),e.closePath(),e.stroke(),e.fill(),e.fillStyle=p,e.strokeStyle=p,e.lineWidth=2,e.lineJoin="round",e.beginPath(),m?(e.moveTo(o-1,l-1),e.lineTo(o-1,l+15),e.lineTo(o+5,l+10),e.lineTo(o+12,l+9),e.closePath(),e.fill()):(e.moveTo(o,l),e.lineTo(o+0,l+14),e.lineTo(o+4,l+9),e.lineTo(o+11,l+8),e.closePath(),e.fill(),e.stroke());let U=t.remotePointerUsernames.get(s)||"";if(!h&&U){e.font="600 12px sans-serif";let t=(b?o+0:o)+d/2,n=(b?l+0:l)+u+2,r=5,i=3,s=e.measureText(U),a=s.actualBoundingBoxDescent+s.actualBoundingBoxAscent,c=Math.max(a,12),h=t-1,f=n-1,m=s.width+2+2*r+2,y=c+2+2*i+2;if(e.roundRect?(e.beginPath(),e.roundRect(h,f,m,y,8),e.fillStyle=p,e.fill(),e.strokeStyle=aN,e.stroke(),b&&(e.beginPath(),e.roundRect(h-2,f-2,m+4,y+4,8),e.strokeStyle=g,e.stroke())):H8(e,h,f,m,y,8,aN),e.fillStyle="#1e1e1e",e.fillText(U,t+r+1,n+i+s.actualBoundingBoxAscent+Math.floor((c-a)/2)+2),b){e.fillStyle=g;let t=8,n=8,r=5;e.fillRect(h+m+n,f+(y/2-t/2),2,t),e.fillRect(h+m+n+r,f+(y/2-2*t/2),2,2*t),e.fillRect(h+m+n+2*r,f+(y/2-t/2),2,t)}}e.restore(),e.closePath()}})({context:h,renderConfig:o,appState:a,normalizedWidth:d,normalizedHeight:u}),o.renderScrollbars&&(p=((e,t,n,r)=>{if(!e.length)return{horizontal:null,vertical:null};let[i,s,a,o]=gX(e),l=t/r.zoom.value,c=n/r.zoom.value,d=t-l,u=n-c,h={top:parseInt(CL("sat"))||0,bottom:parseInt(CL("sab"))||0,left:parseInt(CL("sal"))||0,right:parseInt(CL("sar"))||0},p=b6().rtl,f=-r.scrollX+d/2+h.left,m=-r.scrollY+u/2+h.top,g=f+l-h.right,b=m+c-h.bottom,U=Math.min(i,f),y=Math.min(s,m),x=Math.max(a,g),v=Math.max(o,b);return{horizontal:f===U&&g===x?null:{x:Math.max(h.left,4)+(f-U)/(x-U)*t,y:n-6-Math.max(4,h.bottom),width:(g-f)/(x-U)*t-Math.max(8,h.left+h.right),height:6},vertical:m===y&&b===v?null:{x:p?Math.max(h.left,4):t-6-Math.max(h.right,4),y:(m-y)/(v-y)*n+Math.max(h.top,4),width:6,height:(b-m)/(v-y)*n-Math.max(8,h.top+h.bottom)}}})(n,d,u,a),h.save(),h.fillStyle="rgba(0,0,0,0.3)",h.strokeStyle="rgba(255,255,255,0.8)",[p.horizontal,p.vertical].forEach(e=>{e&&H8(h,e.x,e.y,e.width,e.height,3)}),h.restore()),{scrollBars:p,atLeastOneVisibleElement:n.length>0,elementsMap:t}},Zne=UL(e=>{let t=qne(e);e.callback?.(t)},{trailing:!0}),Kne=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,editingGroupId:e.editingGroupId,editingLinearElement:e.editingLinearElement,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,pendingImageElementId:e.pendingImageElementId,selectionElement:e.selectionElement,selectedGroupIds:e.selectedGroupIds,selectedLinearElement:e.selectedLinearElement,multiElement:e.multiElement,isBindingEnabled:e.isBindingEnabled,suggestedBindings:e.suggestedBindings,isRotating:e.isRotating,elementsToHighlight:e.elementsToHighlight,collaborators:e.collaborators,activeEmbeddable:e.activeEmbeddable,snapLines:e.snapLines,zenModeEnabled:e.zenModeEnabled,editingTextElement:e.editingTextElement,isCropping:e.isCropping,croppingElementId:e.croppingElementId,searchMatches:e.searchMatches}),Qne=St.memo(t=>{let n=vt.useRef(!1);return vt.useEffect(()=>{if(!n.current)return void(n.current=!0);let e=new Map,r=new Map,i=new Map,s=new Map,a=new Map;t.appState.collaborators.forEach((n,o)=>{if(n.selectedElementIds)for(let e of Object.keys(n.selectedElementIds))i.has(e)||i.set(e,[]),i.get(e).push(o);!n.pointer||!1===n.pointer.renderCursor||(n.username&&s.set(o,n.username),n.userState&&a.set(o,n.userState),r.set(o,kL({sceneX:n.pointer.x,sceneY:n.pointer.y},t.appState)),e.set(o,n.button))});let o=t.containerRef?.current&&getComputedStyle(t.containerRef.current).getPropertyValue("--color-selection")||"#6965db";((e,t)=>{if(t)return void Zne(e);let n=qne(e);e.callback(n)})({canvas:t.canvas,elementsMap:t.elementsMap,visibleElements:t.visibleElements,selectedElements:t.selectedElements,allElementsMap:t.allElementsMap,scale:window.devicePixelRatio,appState:t.appState,renderConfig:{remotePointerViewportCoords:r,remotePointerButton:e,remoteSelectedElementIds:i,remotePointerUsernames:s,remotePointerUserStates:a,selectionColor:o,renderScrollbars:!1},device:t.device,callback:t.renderInteractiveSceneCallback},Ane())}),e.jsx("canvas",{className:"excalidraw__canvas interactive",style:{width:t.appState.width,height:t.appState.height,cursor:t.appState.viewModeEnabled?TA:AA},width:t.appState.width*t.scale,height:t.appState.height*t.scale,ref:t.handleCanvasRef,onContextMenu:t.onContextMenu,onPointerMove:t.onPointerMove,onPointerUp:t.onPointerUp,onPointerCancel:t.onPointerCancel,onTouchMove:t.onTouchMove,onPointerDown:t.onPointerDown,onDoubleClick:t.appState.viewModeEnabled?void 0:t.onDoubleClick,children:y6("labels.drawingCanvas")})},(e,t)=>e.selectionNonce===t.selectionNonce&&e.sceneNonce===t.sceneNonce&&e.scale===t.scale&&e.elementsMap===t.elementsMap&&e.visibleElements===t.visibleElements&&e.selectedElements===t.selectedElements&&XL(Kne(e.appState),Kne(t.appState))),Jne=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,hoveredElementIds:e.hoveredElementIds,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,pendingImageElementId:e.pendingImageElementId,shouldCacheIgnoreZoom:e.shouldCacheIgnoreZoom,viewBackgroundColor:e.viewBackgroundColor,exportScale:e.exportScale,selectedElementsAreBeingDragged:e.selectedElementsAreBeingDragged,gridSize:e.gridSize,gridStep:e.gridStep,frameRendering:e.frameRendering,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,editingGroupId:e.editingGroupId,currentHoveredFontFamily:e.currentHoveredFontFamily,croppingElementId:e.croppingElementId}),ere=St.memo(t=>{let n=vt.useRef(null),r=vt.useRef(!1);return vt.useEffect(()=>{let e=n.current;if(!e)return;let i=t.canvas;r.current||(r.current=!0,e.replaceChildren(i),i.classList.add("excalidraw__canvas","static"));let s=`${t.appState.width}px`,a=`${t.appState.height}px`;i.style.width!==s&&(i.style.width=s),i.style.height!==a&&(i.style.height=a);let o=t.appState.width*t.scale,l=t.appState.height*t.scale;i.width!==o&&(i.width=o),i.height!==l&&(i.height=l),wq({canvas:i,rc:t.rc,scale:t.scale,elementsMap:t.elementsMap,allElementsMap:t.allElementsMap,visibleElements:t.visibleElements,appState:t.appState,renderConfig:t.renderConfig},Ane())}),e.jsx("div",{className:"excalidraw__canvas-wrapper",ref:n})},(e,t)=>e.sceneNonce===t.sceneNonce&&e.scale===t.scale&&e.elementsMap===t.elementsMap&&e.visibleElements===t.visibleElements&&(XL(Jne(e.appState),Jne(t.appState))&&XL(e.renderConfig,t.renderConfig))),tre=class{constructor(e){XM(this,"scene"),XM(this,"getRenderableElements",(()=>(e=>{let t,n,r=function(r){let i=Object.entries(r);if(t){let e=!0;for(let[n,r]of i)if(t.get(n)!==r){e=!1;break}if(e)return n}let s=e(r);return t=new Map(i),n=s,s};return r.clear=()=>{t=void 0,n=void 0},r})(({zoom:e,offsetLeft:t,offsetTop:n,scrollX:r,scrollY:i,height:s,width:a,editingTextElement:o,newElementId:l,pendingImageElementId:c,sceneNonce:d})=>{let u=(({elements:e,editingTextElement:t,newElementId:n,pendingImageElementId:r})=>{let i=iO(new Map);for(let s of e)uO(s)&&r===s.id||n!==s.id&&(!t||"text"!==t.type||s.id!==t.id)&&i.set(s.id,s);return i})({elements:this.scene.getNonDeletedElements(),editingTextElement:o,newElementId:l,pendingImageElementId:c}),h=(({elementsMap:e,zoom:t,offsetLeft:n,offsetTop:r,scrollX:i,scrollY:s,height:a,width:o})=>{let l=[];for(let c of e.values())zK(c,o,a,{zoom:t,offsetLeft:n,offsetTop:r,scrollX:i,scrollY:s},e)&&l.push(c);return l})({elementsMap:u,zoom:e,offsetLeft:t,offsetTop:n,scrollX:r,scrollY:i,height:s,width:a});return{elementsMap:u,visibleElements:h}}))()),this.scene=e}destroy(){Zne.cancel(),vq.cancel(),this.getRenderableElements.clear()}},nre=({trails:t})=>{let n=vt.useRef(null);return vt.useEffect(()=>{if(n.current)for(let e of t)e.start(n.current);return()=>{for(let e of t)e.stop()}},t),e.jsx("div",{className:"SVGLayer",children:e.jsx("svg",{ref:n})})},rre=({children:t,element:n,elementsMap:r})=>{let i=Ire();if(i.contextMenu||i.newElement||i.resizingElement||i.isRotating||i.openMenu||i.viewModeEnabled)return null;let{x:s,y:a}=((e,t,n)=>{let[r,i]=sX(e,n),{x:s,y:a}=kL({sceneX:r+e.width,sceneY:i},t);return{x:s-t.offsetLeft+10,y:a-t.offsetTop}})(n,i,r);return e.jsx("div",{className:"excalidraw-canvas-buttons",style:{top:`${a}px`,left:`${s}px`,padding:5},children:t})},ire=t=>e.jsxs("label",{className:BP("ToolIcon ToolIcon__MagicButton","ToolIcon_size_small",{"is-mobile":t.isMobile}),title:`${t.title}`,children:[e.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:t.name,onChange:t.onChange,checked:t.checked,"aria-label":t.title}),e.jsx("div",{className:"ToolIcon__icon",children:t.icon})]}),sre=({height:t,width:n,userToFollow:r,onDisconnect:i})=>e.jsx("div",{className:"follow-mode",style:{width:n,height:t},children:e.jsxs("div",{className:"follow-mode__badge",children:[e.jsxs("div",{className:"follow-mode__badge__label",children:["Following"," ",e.jsx("span",{className:"follow-mode__badge__username",title:r.username,children:r.username})]}),e.jsx("button",{type:"button",onClick:i,className:"follow-mode__disconnect-btn",children:Pz})]})}),are=class{constructor(){XM(this,"targets",new WeakMap),XM(this,"rafIds",new WeakMap)}register(e,t){this.targets.set(e,{callback:t,stopped:!0})}start(e){let t=this.targets.get(e);t&&(this.rafIds.has(e)||(this.targets.set(e,{...t,stopped:!1}),this.scheduleFrame(e)))}stop(e){let t=this.targets.get(e);t&&!t.stopped&&this.targets.set(e,{...t,stopped:!0}),this.cancelFrame(e)}constructFrame(e){return t=>{let n=this.targets.get(e);if(!n)return;let r=this.onFrame(n,t);n.stopped||r?this.cancelFrame(e):this.scheduleFrame(e)}}scheduleFrame(e){let t=requestAnimationFrame(this.constructFrame(e));this.rafIds.set(e,t)}cancelFrame(e){if(this.rafIds.has(e)){let t=this.rafIds.get(e);cancelAnimationFrame(t)}this.rafIds.delete(e)}onFrame(e,t){return e.callback(t)??!1}},ore=class{constructor(e,t,n){this.animationFrameHandler=e,this.app=t,this.options=n,XM(this,"currentTrail"),XM(this,"pastTrails",[]),XM(this,"container"),XM(this,"trailElement"),this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.trailElement=document.createElementNS(vN,"path")}get hasCurrentTrail(){return!!this.currentTrail}hasLastPoint(e,t){if(this.currentTrail){let n=this.currentTrail.originalPoints.length;return this.currentTrail.originalPoints[n-1][0]===e&&this.currentTrail.originalPoints[n-1][1]===t}return!1}start(e){e&&(this.container=e),this.trailElement.parentNode!==this.container&&this.container&&this.container.appendChild(this.trailElement),this.animationFrameHandler.start(this)}stop(){this.animationFrameHandler.stop(this),this.trailElement.parentNode===this.container&&this.container?.removeChild(this.trailElement)}startPath(e,t){this.currentTrail=new n6(this.options),this.currentTrail.addPoint([e,t,performance.now()]),this.update()}addPointToPath(e,t){this.currentTrail&&(this.currentTrail.addPoint([e,t,performance.now()]),this.update())}endPath(){this.currentTrail&&(this.currentTrail.close(),this.currentTrail.options.keepHead=!1,this.pastTrails.push(this.currentTrail),this.currentTrail=void 0,this.update())}update(){this.start()}onFrame(){let e=[];for(let n of this.pastTrails)e.push(this.drawTrail(n,this.app.state));if(this.currentTrail){let t=this.drawTrail(this.currentTrail,this.app.state);e.push(t)}this.pastTrails=this.pastTrails.filter(e=>0!==e.getStrokeOutline().length),0===e.length&&this.stop();let t=e.join(" ").trim();this.trailElement.setAttribute("d",t),this.trailElement.setAttribute("fill",(this.options.fill??(()=>"black"))(this))}drawTrail(e,t){return function(e,t=!0){let n=e.length;if(n<4)return"";let r=e[0],i=e[1],s=e[2],a=`M${r[0].toFixed(2)},${r[1].toFixed(2)} Q${i[0].toFixed(2)},${i[1].toFixed(2)} ${yD(i[0],s[0]).toFixed(2)},${yD(i[1],s[1]).toFixed(2)} T`;for(let o=2,l=n-1;o<l;o++)r=e[o],i=e[o+1],a+=`${yD(r[0],i[0]).toFixed(2)},${yD(r[1],i[1]).toFixed(2)} `;return t&&(a+="Z"),a}(e.getStrokeOutline(e.options.size/t.zoom.value).map(([e,n])=>{let r=kL({sceneX:e,sceneY:n},t);return[r.x,r.y]}),!0)}},lre=class{constructor(e,t){this.animationFrameHandler=e,this.app=t,XM(this,"localTrail"),XM(this,"collabTrails",new Map),XM(this,"container"),this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.localTrail=new ore(e,t,{...this.getTrailOptions(),fill:()=>"red"})}getTrailOptions(){return{simplify:0,streamline:.4,sizeMapping:e=>{let t=Math.max(0,1-(performance.now()-e.pressure)/1e3),n=(50-Math.min(50,e.totalLength-e.currentIndex))/50;return Math.min(yL(n),yL(t))}}}startPath(e,t){this.localTrail.startPath(e,t)}addPointToPath(e,t){this.localTrail.addPointToPath(e,t)}endPath(){this.localTrail.endPath()}start(e){this.container=e,this.animationFrameHandler.start(this),this.localTrail.start(e)}stop(){this.animationFrameHandler.stop(this),this.localTrail.stop()}onFrame(){this.updateCollabTrails()}updateCollabTrails(){if(this.container&&0!==this.app.state.collaborators.size){for(let[e,t]of this.app.state.collaborators.entries()){let n;this.collabTrails.has(e)?n=this.collabTrails.get(e):(n=new ore(this.animationFrameHandler,this.app,{...this.getTrailOptions(),fill:()=>t.pointer?.laserColor||$8(e,t)}),n.start(this.container),this.collabTrails.set(e,n)),t.pointer&&"laser"===t.pointer.tool&&("down"===t.button&&!n.hasCurrentTrail&&n.startPath(t.pointer.x,t.pointer.y),"down"===t.button&&n.hasCurrentTrail&&!n.hasLastPoint(t.pointer.x,t.pointer.y)&&n.addPointToPath(t.pointer.x,t.pointer.y),"up"===t.button&&n.hasCurrentTrail&&(n.addPointToPath(t.pointer.x,t.pointer.y),n.endPath()))}for(let e of this.collabTrails.keys())this.app.state.collaborators.has(e)||(this.collabTrails.get(e).stop(),this.collabTrails.delete(e))}}},cre=(e,t,n,r,i,s)=>{let{zoom:a}=r,o=180*n/Math.PI,l=e*(a.value-1)/2,c=t*(a.value-1)/2;return e>i&&1!==a.value&&(l=i*(a.value-1)/2),t>s&&1!==a.value&&(c=s*(a.value-1)/2),`translate(${l}px, ${c}px) scale(${a.value}) rotate(${o}deg)`},dre=({id:e,onChange:t,onSubmit:n,getViewportCoords:r,element:i,canvas:s,excalidrawContainer:a,app:o,autoSelect:l=!0})=>{let c=()=>{let t=o.state,n=NK.getScene(i)?.getElement(e);if(!n)return;let{textAlign:s,verticalAlign:a}=n,l=o.scene.getNonDeletedElementsMap();if(n&&mO(n)){let e=n.x,i=n.y,c=uG(n,o.scene.getNonDeletedElementsMap()),u=n.width,h=n.height,p=n.width,f=n.height;if(c&&n.containerId){if(wO(c)){let t=eG.getBoundTextElementPosition(c,n,l);e=t.x,i=t.y}let t,r=((e,t)=>{if(!t.style.fontFamily||!t.style.fontSize)return!1;let n=t.style.fontFamily.replace(/"/g,"");return mL({fontFamily:e.fontFamily})!==n||`${e.fontSize}px`!==t.style.fontSize})(n,d);if(r?t=rG(c.id,c.height):(t=nG[c.id],t||(t=rG(c.id,c.height))),p=yG(c,n),f=xG(c,n),!wO(c)&&h>f){let e=UG(h,c.type);return void DK(c,{height:e})}if(!wO(c)&&c.height>t.height&&h<f){let e=UG(h,c.type);DK(c,{height:e})}else{let{y:e}=lG(c,n,l);i=e}}let[m,g]=r(e,i),b=d.selectionStart,U=d.selectionEnd,y=d.value.length;if(b===U&&U!==y){let e=y-U;d.selectionStart=d.value.length-e,d.selectionEnd=d.value.length-e}c?u+=.5:(p=(t.width-8-m)/t.zoom.value,u=Math.min(u,p)),h*=1.05;let x=gL(n),v=(t.height-g)/t.zoom.value;Object.assign(d.style,{font:x,lineHeight:n.lineHeight,width:`${u}px`,height:`${h}px`,left:`${m}px`,top:`${g}px`,transform:cre(u,h,fG(n,c),t,p,v),textAlign:s,verticalAlign:a,color:n.strokeColor,opacity:n.opacity/100,filter:"var(--theme-filter)",maxHeight:`${v}px`}),d.scrollTop=0,OL()&&(d.style.fontFamily=mL(n)),DK(n,{x:e,y:i})}},d=document.createElement("textarea");d.dir="auto",d.tabIndex=0,d.dataset.type="wysiwyg",d.wrap="off",d.classList.add("excalidraw-wysiwyg");let u="pre",h="normal";(RO(i)||!i.autoResize)&&(u="pre-wrap",h="break-word"),Object.assign(d.style,{position:"absolute",display:"inline-block",minHeight:"1em",backfaceVisibility:"hidden",margin:0,padding:0,border:0,outline:0,resize:"none",background:"transparent",overflow:"hidden",zIndex:"var(--zIndex-wysiwyg)",wordBreak:h,whiteSpace:u,overflowWrap:"break-word",boxSizing:"content-box"}),d.value=i.originalText,c(),t&&(d.onpaste=async e=>{let t=await BZ(e,!0);if(!t.text)return;let n=HO(t.text);if(!n)return;let r=uG(i,o.scene.getNonDeletedElementsMap()),s=gL({fontSize:o.state.currentItemFontSize,fontFamily:o.state.currentItemFontFamily});if(r){let e=dG(r,o.scene.getNonDeletedElementsMap()),t=uF(`${d.value}${n}`,s,yG(r,e)),i=YO(t,s);d.style.width=`${i}px`}},d.oninput=()=>{let e=HO(d.value);if(d.value!==e){let t=d.selectionStart;d.value=e,d.selectionStart=t,d.selectionEnd=t}t(d.value)}),d.onkeydown=e=>{if(!e.shiftKey&&p8.keyTest(e))e.preventDefault(),o.actionManager.executeAction(p8),c();else if(!e.shiftKey&&f8.keyTest(e))e.preventDefault(),o.actionManager.executeAction(f8),c();else if(!e.shiftKey&&m8.keyTest(e))e.preventDefault(),o.actionManager.executeAction(m8),c();else if(s8.keyTest(e))o.actionManager.executeAction(s8);else if(a8.keyTest(e))o.actionManager.executeAction(a8);else if(e.key===$$.ESCAPE)e.preventDefault(),y=!0,x();else if(e.key===$$.ENTER&&e[$$.CTRL_OR_CMD]){if(e.preventDefault(),e.isComposing||229===e.keyCode)return;y=!0,x()}else if(e.key===$$.TAB||e[$$.CTRL_OR_CMD]&&(e.code===M$||e.code===_$)){if(e.preventDefault(),e.isComposing)return;e.shiftKey||e.code===M$?g():m(),d.dispatchEvent(new Event("input"))}};let p=" ".repeat(4),f=new RegExp("^ {1,4}"),m=()=>{let{selectionStart:e,selectionEnd:t}=d,n=b(),r=d.value;n.forEach(e=>{let t=r.slice(0,e),n=r.slice(e);r=`${t}${p}${n}`}),d.value=r,d.selectionStart=e+4,d.selectionEnd=t+4*n.length},g=()=>{let{selectionStart:e,selectionEnd:t}=d,n=b(),r=[],i=d.value;n.forEach(e=>{let t=i.slice(e,e+4).match(f);if(t){let n=i.slice(0,e),s=i.slice(e+t[0].length);i=`${n}${s}`,r.push(e)}}),d.value=i,r.length&&(e>r[r.length-1]?d.selectionStart=Math.max(e-4,r[r.length-1]):d.selectionStart=e,d.selectionEnd=Math.max(d.selectionStart,t-4*r.length))},b=()=>{let{selectionStart:e,selectionEnd:t,value:n}=d,r=n.slice(0,e).match(/[^\n]*$/)[0].length;return e-=r,n.slice(e,t).split("\n").reduce((t,n,r,i)=>t.concat(r?t[r-1]+i[r-1].length+1:e),[]).reverse()},U=e=>{e.target instanceof HTMLCanvasElement&&(e.preventDefault(),e.stopPropagation())},y=!1,x=()=>{if(_)return;_=!0,v();let e=NK.getScene(i)?.getElement(i.id);if(!e)return;let t=uG(e,o.scene.getNonDeletedElementsMap());if(t){if(d.value.trim()){let e=cG(t);e&&e===i.id?wO(t)&&OK(t):DK(t,{boundElements:(t.boundElements||[]).concat({type:"text",id:i.id})})}else DK(t,{boundElements:t.boundElements?.filter(e=>!mO(e))});sG(e,t,o.scene.getNonDeletedElementsMap())}n({viaKeyboard:y,nextOriginalText:d.value})},v=()=>{d.onblur=null,d.oninput=null,d.onkeydown=null,M&&M.disconnect(),window.removeEventListener("resize",c),window.removeEventListener("wheel",U,!0),window.removeEventListener("pointerdown",E),window.removeEventListener("pointerup",w),window.removeEventListener("blur",x),window.removeEventListener("beforeunload",x),k(),C(),d.remove()},w=e=>{window.removeEventListener("pointerup",w);let t=e?.target,n=t instanceof HTMLElement&&t.classList.contains("properties-trigger");setTimeout(()=>{d.onblur=x,n||d.focus()})},S=()=>{d.onblur=null,window.addEventListener("pointerup",w),window.addEventListener("blur",x)},E=e=>{let t=e?.target;if(e.button===DA)return t instanceof HTMLTextAreaElement&&(e.preventDefault(),o.handleCanvasPanUsingWheelOrSpaceDrag(e)),void S();let n=t instanceof HTMLElement&&t.classList.contains("properties-trigger");(e.target instanceof HTMLElement||e.target instanceof SVGElement)&&e.target.closest(`.${WA}, .${XA}`)&&!fL(e.target)||n?S():e.target instanceof HTMLCanvasElement&&!OL()&&requestAnimationFrame(()=>{x()})},k=o.scene.onUpdate(()=>{c(),document.activeElement?.closest(".properties-content")||d.focus()}),C=o.onScrollChangeEmitter.on(()=>{c()}),_=!1;l&&d.select(),w();let M=null;s&&"ResizeObserver"in window?(M=new window.ResizeObserver(()=>{c()}),M.observe(s)):window.addEventListener("resize",c),d.onpointerdown=e=>e.stopPropagation(),requestAnimationFrame(()=>{window.addEventListener("pointerdown",E,{capture:!0})}),window.addEventListener("beforeunload",x),a?.querySelector(".excalidraw-textEditorContainer").appendChild(d)},ure=kG({name:"autoResize",label:"labels.autoResize",icon:null,trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=MK(e,t);return 1===i.length&&mO(i[0])&&!i[0].autoResize},perform:(e,t,n,r)=>{let i=MK(e,t);return{appState:t,elements:e.map(e=>{if(e.id===i[0].id&&mO(e)){let t=OO(e.originalText,gL(e),e.lineHeight);return LK(e,{autoResize:!0,width:t.width,height:t.height,text:e.originalText})}return e}),captureUpdate:bY}}}),hre=({canvas:e,rc:t,newElement:n,elementsMap:r,allElementsMap:i,scale:s,appState:a,renderConfig:o})=>{if(e){let[l,c]=cq(e,s),d=dq({canvas:e,scale:s,normalizedWidth:l,normalizedHeight:c});d.save(),d.scale(a.zoom.value,a.zoom.value),n&&"selection"!==n.type?SW(n,r,i,t,d,o,a):d.clearRect(0,0,l,c)}},pre=UL(e=>{hre(e)},{trailing:!0}),fre=t=>{let n=vt.useRef(null);return vt.useEffect(()=>{n.current&&((e,t)=>{t?pre(e):hre(e)})({canvas:n.current,scale:t.scale,newElement:t.appState.newElement,elementsMap:t.elementsMap,allElementsMap:t.allElementsMap,rc:t.rc,renderConfig:t.renderConfig,appState:t.appState},Ane())}),e.jsx("canvas",{className:"excalidraw__canvas",style:{width:t.appState.width,height:t.appState.height},width:t.appState.width*t.scale,height:t.appState.height*t.scale,ref:n})},mre=St.createContext(null),gre=St.createContext(null),bre={viewport:{isMobile:!1,isLandscape:!1},editor:{isMobile:!1,canFitSidebar:!1},isTouchScreen:!1},Ure=St.createContext(bre);Ure.displayName="DeviceContext";var yre=St.createContext({container:null,id:null});yre.displayName="ExcalidrawContainerContext";var xre=St.createContext([]);xre.displayName="ExcalidrawElementsContext";var vre=St.createContext({...hD(),width:0,height:0,offsetLeft:0,offsetTop:0});vre.displayName="ExcalidrawAppStateContext";var wre=St.createContext(()=>{});wre.displayName="ExcalidrawSetAppStateContext";var Sre=St.createContext(null);Sre.displayName="ExcalidrawActionManagerContext";var Ere=()=>vt.useContext(mre),kre=()=>vt.useContext(gre),Cre=()=>vt.useContext(Ure),_re=()=>vt.useContext(yre),Mre=()=>vt.useContext(xre),Ire=()=>vt.useContext(vre),jre=()=>vt.useContext(wre),Tre=()=>vt.useContext(Sre),Rre=!1,Pre=0,Are=!1,Nre=!1,Dre=!1,Lre={horizontal:null,vertical:null},Ore=0,Fre=!1,zre=new Map,Bre=!1,Hre=0,$re=!1,Wre=null,Xre={pointers:new Map,lastCenter:null,initialDistance:null,initialScale:null},Vre=class n extends St.Component{constructor(r){super(r),XM(this,"canvas"),XM(this,"interactiveCanvas",null),XM(this,"rc"),XM(this,"unmounted",!1),XM(this,"actionManager"),XM(this,"device",bre),XM(this,"excalidrawContainerRef",St.createRef()),XM(this,"scene"),XM(this,"fonts"),XM(this,"renderer"),XM(this,"visibleElements"),XM(this,"resizeObserver"),XM(this,"nearestScrollableContainer"),XM(this,"library"),XM(this,"libraryItemsFromStorage"),XM(this,"id"),XM(this,"store"),XM(this,"history"),XM(this,"excalidrawContainerValue"),XM(this,"files",{}),XM(this,"imageCache",new Map),XM(this,"iFrameRefs",new Map),XM(this,"embedsValidationStatus",new Map),XM(this,"initializedEmbeds",new Set),XM(this,"elementsPendingErasure",new Set),XM(this,"flowChartCreator",new q9),XM(this,"flowChartNavigator",new Y9),XM(this,"hitLinkElement"),XM(this,"lastPointerDownEvent",null),XM(this,"lastPointerUpEvent",null),XM(this,"lastPointerMoveEvent",null),XM(this,"lastPointerMoveCoords",null),XM(this,"lastViewportPosition",{x:0,y:0}),XM(this,"animationFrameHandler",new are),XM(this,"laserTrails",new lre(this.animationFrameHandler,this)),XM(this,"eraserTrail",new ore(this.animationFrameHandler,this,{streamline:.2,size:5,keepHead:!0,sizeMapping:e=>{let t=Math.max(0,1-(performance.now()-e.pressure)/200),n=(10-Math.min(10,e.totalLength-e.currentIndex))/10;return Math.min(yL(n),yL(t))},fill:()=>this.state.theme===JA?"rgba(0, 0, 0, 0.2)":"rgba(255, 255, 255, 0.2)"})),XM(this,"onChangeEmitter",new fY),XM(this,"onPointerDownEmitter",new fY),XM(this,"onPointerUpEmitter",new fY),XM(this,"onUserFollowEmitter",new fY),XM(this,"onScrollChangeEmitter",new fY),XM(this,"missingPointerEventCleanupEmitter",new fY),XM(this,"onRemoveEventListenersEmitter",new fY),XM(this,"getEffectiveGridSize",()=>OV(this)?this.state.gridSize:null),XM(this,"updateEmbedValidationStatus",(e,t)=>{this.embedsValidationStatus.set(e.id,t),UF.delete(e)}),XM(this,"updateEmbeddables",()=>{let e=new Set,t=!1;this.scene.getNonDeletedElements().filter(n=>{if(hO(n)){if(e.add(n.id),!this.embedsValidationStatus.has(n.id)){t=!0;let e=HY(n.link,this.props.validateEmbeddable);this.updateEmbedValidationStatus(n,e)}}else pO(n)&&e.add(n.id);return!1}),t&&this.scene.triggerUpdate(),this.iFrameRefs.forEach((t,n)=>{e.has(n)||this.iFrameRefs.delete(n)})}),XM(this,"getFrameNameDOMId",e=>`${this.id}-frame-name-${e.id}`),XM(this,"frameNameBoundsCache",{get:e=>{let t=this.frameNameBoundsCache._cache.get(e.id);if(!t||t.zoom!==this.state.zoom.value||t.versionNonce!==e.versionNonce){let n=document.getElementById(this.getFrameNameDOMId(e));if(n){let r=n.getBoundingClientRect(),i=EL({clientX:r.x,clientY:r.y},this.state),s=EL({clientX:r.right,clientY:r.bottom},this.state);return t={x:i.x,y:i.y,width:s.x-i.x,height:s.y-i.y,angle:0,zoom:this.state.zoom.value,versionNonce:e.versionNonce},this.frameNameBoundsCache._cache.set(e.id,t),t}return null}return t},_cache:new Map}),XM(this,"resetEditingFrame",e=>{e&&DK(e,{name:e.name?.trim()||null}),this.setState({editingFrame:null})}),XM(this,"renderFrameNames",()=>{if(!this.state.frameRendering.enabled||!this.state.frameRendering.name)return this.state.editingFrame&&this.resetEditingFrame(null),null;let t=this.state.theme===eN;return this.scene.getNonDeletedFramesLikes().map(n=>{if(!zK(n,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap()))return this.state.editingFrame===n.id&&this.resetEditingFrame(n),null;let r,{x:i,y:s}=kL({sceneX:n.x,sceneY:n.y},this.state),a=vK(n);if(n.id===this.state.editingFrame){let s=a;r=e.jsx("input",{autoFocus:!0,value:s,onChange:e=>{DK(n,{name:e.target.value})},onFocus:e=>e.target.select(),onBlur:()=>this.resetEditingFrame(n),onKeyDown:e=>{(e.key===$$.ESCAPE||e.key===$$.ENTER)&&this.resetEditingFrame(n)},style:{background:this.state.viewBackgroundColor,filter:t?gN:"none",zIndex:2,border:"none",display:"block",padding:"6px",borderRadius:4,boxShadow:"inset 0 0 0 1px var(--color-primary)",fontFamily:"Assistant",fontSize:"14px",transform:"translate(-6px, 6px)",color:"var(--color-gray-80)",overflow:"hidden",maxWidth:document.body.clientWidth-i-6+"px"},size:s.length+1||1,dir:"auto",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off"})}else r=a;return e.jsx("div",{id:this.getFrameNameDOMId(n),style:{position:"absolute",bottom:`${this.state.height+tN.nameOffsetY-s+this.state.offsetTop}px`,left:i-this.state.offsetLeft+"px",zIndex:2,fontSize:tN.nameFontSize,color:t?tN.nameColorDarkTheme:tN.nameColorLightTheme,lineHeight:tN.nameLineHeight,width:"max-content",maxWidth:`${n.width}px`,overflow:n.id===this.state.editingFrame?"visible":"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",cursor:PA,pointerEvents:this.state.viewModeEnabled?BA:zA},onPointerDown:e=>this.handleCanvasPointerDown(e),onWheel:e=>this.handleWheel(e),onContextMenu:this.handleCanvasContextMenu,onDoubleClick:()=>{this.setState({editingFrame:n.id})},children:r},n.id)})}),XM(this,"focusContainer",()=>{this.excalidrawContainerRef.current?.focus()}),XM(this,"getSceneElementsIncludingDeleted",()=>this.scene.getElementsIncludingDeleted()),XM(this,"getSceneElements",()=>this.scene.getNonDeletedElements()),XM(this,"onInsertElements",e=>{this.addElementsFromPasteOrLibrary({elements:e,position:"center",files:null})}),XM(this,"onExportImage",async(e,t,n)=>{Z6("export",e,"ui");let r=await k8(e,t,this.state,this.files,{exportBackground:this.state.exportBackground,name:this.getName(),viewBackgroundColor:this.state.viewBackgroundColor,exportingFrame:n.exportingFrame}).catch(jL).catch(e=>{this.setState({errorMessage:e.message})});this.state.exportEmbedScene&&r&&_Q(r)&&this.setState({fileHandle:r})}),XM(this,"magicGenerations",new Map),XM(this,"updateMagicGeneration",({frameElement:e,data:t})=>{"pending"===t.status?DK(e,{customData:{generationData:void 0}},!1):DK(e,{customData:{generationData:t}},!1),this.magicGenerations.set(e.id,t),this.triggerRender()}),XM(this,"plugins",{}),XM(this,"onMagicframeToolSelect",()=>{let e=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds});if(0===e.length)this.setActiveTool({type:QN}),Z6("ai","tool-select (empty-selection)","d2c");else{let t,n=1===e.length&&bO(e[0])&&e[0];if(!n&&e.some(e=>UO(e)||e.frameId))return void this.setActiveTool({type:QN});if(Z6("ai","tool-select (existing selection)","d2c"),n)t=n;else{let[n,r,i,s]=gX(e),a=50;t=HG({...tN,x:n-a,y:r-a,width:i-n+2*a,height:s-r+2*a,opacity:100,locked:!1}),this.scene.insertElement(t);for(let o of e)DK(o,{frameId:t.id});this.setState({selectedElementIds:{[t.id]:!0}})}this.onMagicFrameGenerate(t,"upstream")}}),XM(this,"openEyeDropper",({type:e})=>{c6.set(x3,{swapPreviewOnAlt:!0,colorPickerType:"stroke"===e?"elementStroke":"elementBackground",onSelect:(t,n)=>{let r="background"===e&&n.altKey||"stroke"===e&&!n.altKey;this.scene.getSelectedElements(this.state).length&&"selection"===this.state.activeTool.type?this.updateScene({elements:this.scene.getElementsIncludingDeleted().map(e=>this.state.selectedElementIds[e.id]?LK(e,{[r?"strokeColor":"backgroundColor"]:t}):e),captureUpdate:bY}):r?this.syncActionResult({appState:{...this.state,currentItemStrokeColor:t},captureUpdate:bY}):this.syncActionResult({appState:{...this.state,currentItemBackgroundColor:t},captureUpdate:bY})},keepOpenOnAlt:!1})}),XM(this,"dismissLinearEditor",()=>{setTimeout(()=>{this.setState({editingLinearElement:null})})}),XM(this,"syncActionResult",Rne(e=>{if(this.unmounted||!1===e)return;e.captureUpdate===UY?this.store.shouldUpdateSnapshot():e.captureUpdate===bY&&this.store.shouldCaptureIncrement();let t=!1,n=null;if(e.elements&&(this.scene.replaceAllElements(e.elements),t=!0),e.files&&(this.addMissingFiles(e.files,e.replaceFiles),this.addNewImagesToImageCache()),e.appState||n||this.state.contextMenu){let r=e?.appState?.viewModeEnabled||!1,i=e?.appState?.zenModeEnabled||!1,s=e?.appState?.theme||this.props.theme||JA,a=e?.appState?.name??this.state.name,o=e?.appState?.errorMessage??this.state.errorMessage;typeof this.props.viewModeEnabled<"u"&&(r=this.props.viewModeEnabled),typeof this.props.zenModeEnabled<"u"&&(i=this.props.zenModeEnabled),n=e.appState?.editingTextElement||null,e.elements&&n&&e.elements.forEach(e=>{n?.id===e.id&&n!==e&&SQ(e)&&mO(e)&&(n=e)}),n?.isDeleted&&(n=null),this.setState(t=>({...t,...e.appState||{},contextMenu:null,editingTextElement:n,viewModeEnabled:r,zenModeEnabled:i,theme:s,name:a,errorMessage:o})),t=!0}!t&&e.captureUpdate!==yY&&this.scene.triggerUpdate()})),XM(this,"onBlur",Rne(()=>{Are=!1,this.setState({isBindingEnabled:!0})})),XM(this,"onUnload",()=>{this.onBlur()}),XM(this,"disableEvent",e=>{e.preventDefault()}),XM(this,"resetHistory",()=>{this.history.clear()}),XM(this,"resetStore",()=>{this.store.clear()}),XM(this,"resetScene",Rne(e=>{this.scene.replaceAllElements([]),this.setState(t=>({...hD(),isLoading:!e?.resetLoadingState&&t.isLoading,theme:this.state.theme})),this.resetStore(),this.resetHistory()})),XM(this,"initializeScene",async()=>{"launchQueue"in window&&"LaunchParams"in window&&window.launchQueue.setConsumer(async e=>{if(!e.files.length)return;let t=e.files[0],n=await t.getFile();this.loadFileToCanvas(new File([n],n.name||"",{type:n.type}),t)}),this.props.theme&&this.setState({theme:this.props.theme}),this.state.isLoading||this.setState({isLoading:!0});let e=null;try{e="function"==typeof this.props.initialData?await this.props.initialData()||null:await this.props.initialData||null,e?.libraryItems&&this.library.updateLibrary({libraryItems:e.libraryItems,merge:!0}).catch(e=>{})}catch(n){e={appState:{errorMessage:n.message||"Encountered an error during importing or restoring scene data"}}}let t=gZ(e,null,null,{repairBindings:!0});t.appState={...t.appState,theme:this.props.theme||t.appState.theme,openSidebar:t.appState?.openSidebar||this.state.openSidebar,activeTool:"image"===t.appState.activeTool.type?{...t.appState.activeTool,type:"selection"}:t.appState.activeTool,isLoading:!1,toast:this.state.toast},e?.scrollToContent&&(t.appState={...t.appState,...UV(t.elements,{...t.appState,width:this.state.width,height:this.state.height,offsetTop:this.state.offsetTop,offsetLeft:this.state.offsetLeft})}),this.resetStore(),this.resetHistory(),this.syncActionResult({...t,captureUpdate:UY}),this.clearImageShapeCache(),this.fonts.loadSceneFonts().then(e=>{this.fonts.onLoaded(e)}),fq(window.location.href)&&this.scrollToContent(window.location.href,{animate:!1})}),XM(this,"isMobileBreakpoint",(e,t)=>e<730||t<500&&e<1e3),XM(this,"refreshViewportBreakpoints",()=>{if(!this.excalidrawContainerRef.current)return;let{clientWidth:e,clientHeight:t}=document.body,n=this.device.viewport,r=BL(n,{isLandscape:e>t,isMobile:this.isMobileBreakpoint(e,t)});return n!==r&&(this.device={...this.device,viewport:r},!0)}),XM(this,"refreshEditorBreakpoints",()=>{let e=this.excalidrawContainerRef.current;if(!e)return;let{width:t,height:n}=e.getBoundingClientRect(),r=null!=this.props.UIOptions.dockedSidebarBreakpoint?this.props.UIOptions.dockedSidebarBreakpoint:1229,i=this.device.editor,s=BL(i,{isMobile:this.isMobileBreakpoint(t,n),canFitSidebar:t>r});return i!==s&&(this.device={...this.device,editor:s},!0)}),XM(this,"onResize",Rne(()=>{this.scene.getElementsIncludingDeleted().forEach(e=>UF.delete(e)),this.refreshViewportBreakpoints(),this.updateDOMRect(),kA||this.refreshEditorBreakpoints(),this.setState({})})),XM(this,"onFullscreenChange",()=>{!document.fullscreenElement&&"active"===this.state.activeEmbeddable?.state&&this.setState({activeEmbeddable:null})}),XM(this,"renderInteractiveSceneCallback",({atLeastOneVisibleElement:e,scrollBars:t,elementsMap:n})=>{t&&(Lre=t);let r=!this.state.editingTextElement&&(!e&&n.size>0);this.state.scrolledOutside!==r&&this.setState({scrolledOutside:r}),this.scheduleImageRefresh()}),XM(this,"onScroll",bL(()=>{let{offsetTop:e,offsetLeft:t}=this.getCanvasOffsets();this.setState(n=>n.offsetLeft===t&&n.offsetTop===e?null:{offsetTop:e,offsetLeft:t})},100)),XM(this,"onCut",Rne(e=>{!this.excalidrawContainerRef.current?.contains(document.activeElement)||fL(e.target)||(this.actionManager.executeAction(r7,"keyboard",e),e.preventDefault(),e.stopPropagation())})),XM(this,"onCopy",Rne(e=>{!this.excalidrawContainerRef.current?.contains(document.activeElement)||fL(e.target)||(this.actionManager.executeAction(t7,"keyboard",e),e.preventDefault(),e.stopPropagation())})),XM(this,"onTouchStart",e=>{if(EA&&e.preventDefault(),!Rre)return Rre=!0,clearTimeout(Pre),void(Pre=window.setTimeout(n.resetTapTwice,300));if(Rre&&1===e.touches.length){let t=e.touches[0];this.handleCanvasDoubleClick({clientX:t.clientX,clientY:t.clientY}),Rre=!1,clearTimeout(Pre)}2===e.touches.length&&this.setState({selectedElementIds:jK({},this.state),activeEmbeddable:null})}),XM(this,"onTouchEnd",e=>{this.resetContextMenuTimer(),e.touches.length>0?this.setState({previousSelectedElementIds:{},selectedElementIds:jK(this.state.previousSelectedElementIds,this.state)}):Xre.pointers.clear()}),XM(this,"pasteFromClipboard",Rne(async e=>{let t=!!Bre,n=document.activeElement,r=this.excalidrawContainerRef.current?.contains(n);if(e&&!r)return;let i=document.elementFromPoint(this.lastViewportPosition.x,this.lastViewportPosition.y);if(e&&(!(i instanceof HTMLCanvasElement)||fL(n)))return;let{x:s,y:a}=EL({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),o=e?.clipboardData?.files[0],l=await BZ(e,t);if(!o&&!t){if(l.mixedContent)return this.addElementsFromMixedContentPaste(l.mixedContent,{isPlainPaste:t,sceneX:s,sceneY:a});if(l.text){let e=l.text.trim();e.startsWith("<svg")&&e.endsWith("</svg>")&&(o=FQ(e))}}if(IQ(o)&&!l.spreadsheet){if(!this.isToolSupported("image"))return void this.setState({errorMessage:y6("errors.imageToolNotSupported")});let e=this.createImageElement({sceneX:s,sceneY:a});return this.insertImageElement(e,o),this.initializeImageDimensions(e),void this.setState({selectedElementIds:jK({[e.id]:!0},this.state)})}if(this.props.onPaste)try{if(!1===await this.props.onPaste(l,e))return}catch(c){}if(l.errorMessage)this.setState({errorMessage:l.errorMessage});else if(l.spreadsheet&&!t)this.setState({pasteDialog:{data:l.spreadsheet,shown:!0}});else if(l.elements){let e=l.programmaticAPI?Tne(l.elements):l.elements;this.addElementsFromPasteOrLibrary({elements:e,files:l.files||null,position:"cursor",retainSeed:t})}else if(l.text){if(l.text&&(e=>new RegExp(`^(?:%%{.*?}%%[\\s\\n]*)?\\b(?:${["flowchart","graph","sequenceDiagram","classDiagram","stateDiagram","stateDiagram-v2","erDiagram","journey","gantt","pie","quadrantChart","requirementDiagram","gitGraph","C4Context","mindmap","timeline","zenuml","sankey","xychart","block"].map(e=>`\\s*${e}(-beta)?`).join("|")})\\b`).test(e.trim()))(l.text)){let e=await Pt(()=>import("./index-B0KF03Tm.js").then(e=>e.b5),__vite__mapDeps([58,2]));try{let{elements:t,files:n}=await e.parseMermaidToExcalidraw(l.text),r=Tne(t,{regenerateIds:!0});return void this.addElementsFromPasteOrLibrary({elements:r,files:n,position:"cursor"})}catch(d){}}let e=rO(l.text).split(/\n+/).map(e=>e.trim()).filter(Boolean),n=e.map(e=>(e=>{let t=e.match(jY);if(t&&2===t.length)return t[1];let n=e.match(NY);if(n&&2===n.length)return n[1];let r=e.match(MY);if(r&&2===r.length)return r[1];if(PY.test(e))return`https://giphy.com/embed/${PY.exec(e)[1]}`;let i=e.match(RY);return i&&2===i.length?i[1]:e})(e)).filter(e=>HY(e,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(e)||"video"===FY(e)?.type));if(!Bre&&n.length>0&&n.length===e.length){let e=[];for(let t of n){let n=e[e.length-1],r=this.insertEmbeddableElement({sceneX:n?n.x+n.width+20:s,sceneY:a,link:vG(t)});r&&e.push(r)}return void(e.length&&this.setState({selectedElementIds:Object.fromEntries(e.map(e=>[e.id,!0]))}))}this.addTextFromPaste(l.text,t)}this.setActiveTool({type:"selection"}),e?.preventDefault()})),XM(this,"addElementsFromPasteOrLibrary",e=>{let t=hZ(e.elements,null,void 0),[n,r,i,s]=gX(t),a=vL(n,i)/2,o=vL(r,s)/2,l="object"==typeof e.position?e.position.clientX:"cursor"===e.position?this.lastViewportPosition.x:this.state.width/2+this.state.offsetLeft,c="object"==typeof e.position?e.position.clientY:"cursor"===e.position?this.lastViewportPosition.y:this.state.height/2+this.state.offsetTop,{x:d,y:u}=EL({clientX:l,clientY:c},this.state),h=d-a,p=u-o,[f,m]=qV(h,p,this.getEffectiveGridSize()),g=tY(t.map(e=>LK(e,{x:e.x+f-n,y:e.y+m-r})),{randomizeSeed:!e.retainSeed}),b=this.scene.getElementsIncludingDeleted(),U=[...b,...g];U=this.props.onDuplicate?.(U,b)||U,rY(U,DL(g));let y=this.getTopLayerFrameAtSceneCoords({x:d,y:u});if(y){let e=((e,t)=>{let n=new Set,r=DL(e);e=bK(e);for(let a of e)UO(a)&&a.id!==t.id&&n.add(a.id);let i=new Set,s=[];for(let a of e)if(!(UO(a)||a.frameId&&n.has(a.frameId)))if(a.groupIds.length){let n=a.groupIds.at(-1);if(!i.has(n)){i.add(n);let a=jV(e,n);if(a.some(e=>iK(e,t,r)))for(let e of a)s.push(e)}}else iK(a,t,r)&&s.push(a);return s})(g,y);hK(U,e,y,this.state)}this.scene.replaceAllElements(U),g.forEach(e=>{if(mO(e)&&RO(e)){let t=uG(e,this.scene.getElementsMapIncludingDeleted());sG(e,t,this.scene.getElementsMapIncludingDeleted())}}),SA&&KH.loadElementsFonts(g).then(e=>{this.fonts.onLoaded(e)}),e.files&&this.addMissingFiles(e.files),this.store.shouldCaptureIncrement();let x=EK(g);this.setState({...this.state,openSidebar:this.state.openSidebar&&this.device.editor.canFitSidebar&&c6.get(Tee)?this.state.openSidebar:null,...SV({editingGroupId:null,selectedElementIds:x.reduce((e,t)=>(RO(t)||(e[t.id]=!0),e),{})},this.scene.getNonDeletedElements(),this.state,this)},()=>{e.files&&this.addNewImagesToImageCache()}),this.setActiveTool({type:"selection"}),e.fitToContent&&this.scrollToContent(g,{fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()})}),XM(this,"setAppState",(e,t)=>{this.setState(e,t)}),XM(this,"removePointer",e=>{Ore&&this.resetContextMenuTimer(),Xre.pointers.delete(e.pointerId)}),XM(this,"toggleLock",(e="ui")=>{this.state.activeTool.locked||Z6("toolbar","toggleLock",`${e} (${this.device.editor.isMobile?"mobile":"desktop"})`),this.setState(e=>({activeTool:{...e.activeTool,...wL(this.state,e.activeTool.locked?{type:"selection"}:e.activeTool),locked:!e.activeTool.locked}}))}),XM(this,"updateFrameRendering",e=>{this.setState(t=>{let n="function"==typeof e?e(t.frameRendering):e;return{frameRendering:{enabled:n?.enabled??t.frameRendering.enabled,clip:n?.clip??t.frameRendering.clip,name:n?.name??t.frameRendering.name,outline:n?.outline??t.frameRendering.outline}}})}),XM(this,"togglePenMode",e=>{this.setState(t=>({penMode:e??!t.penMode,penDetected:!0}))}),XM(this,"onHandToolToggle",()=>{this.actionManager.executeAction(y8)}),XM(this,"zoomCanvas",e=>{this.setState({...l8({viewportX:this.state.width/2+this.state.offsetLeft,viewportY:this.state.height/2+this.state.offsetTop,nextZoom:yV(e)},this.state)})}),XM(this,"cancelInProgressAnimation",null),XM(this,"scrollToContent",(e=this.scene.getNonDeletedElements(),t)=>{if("string"==typeof e){let n;if(n=fq(e)?(e=>{try{let{searchParams:t}=new URL(e);if(t.has(lD))return t.get(lD)}catch{}return null})(e):e,n){let r=this.scene.getElementsFromId(n);r?.length?this.scrollToContent(r,{fitToContent:t?.fitToContent??!0,animate:t?.animate??!0}):fq(e)&&this.setState({toast:{message:y6("elementLink.notFound"),duration:3e3,closable:!0}})}return}this.cancelInProgressAnimation?.();let n=Array.isArray(e)?e:[e],r=this.state.zoom,i=this.state.scrollX,s=this.state.scrollY;if(t?.fitToContent||t?.fitToViewport){let{appState:e}=b8({canvasOffsets:t.canvasOffsets,targetElements:n,appState:this.state,fitToViewport:!!t?.fitToViewport,viewportZoomFactor:t?.viewportZoomFactor,minZoom:t?.minZoom,maxZoom:t?.maxZoom});r=e.zoom,i=e.scrollX,s=e.scrollY}else{let e=UV(n,this.state);i=e.scrollX,s=e.scrollY}if(t?.animate){let e=(({fromValues:e,toValues:t,onStep:n,duration:r=250,interpolateValue:i,onStart:s,onEnd:a,onCancel:o})=>{let l,c=!1,d=0;return d=window.requestAnimationFrame(function o(u){if(c)return;void 0===l&&(l=u,s?.());let h=Math.min(u-l,r),p=yL(h/r),f={};if(Object.keys(e).forEach(n=>{let r=n,i=(t[r]-e[r])*p+e[r];f[r]=i}),n(f),h<r){let s=h/r,a={};Object.keys(e).forEach(n=>{let r,o=n,l=e[o],c=t[o];r=i?i(l,c,s,o):xL(l,c,s),null==r&&(r=xL(l,c,s)),a[o]=r}),n(a),d=window.requestAnimationFrame(o)}else n(t),a?.()}),()=>{o?.(),c=!0,window.cancelAnimationFrame(d)}})({fromValues:{scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom.value},toValues:{scrollX:i,scrollY:s,zoom:r.value},interpolateValue:(e,t,n,r)=>{if("zoom"===r)return e*Math.pow(t/e,yL(n))},onStep:({scrollX:e,scrollY:t,zoom:n})=>{this.setState({scrollX:e,scrollY:t,zoom:{value:n}})},onStart:()=>{this.setState({shouldCacheIgnoreZoom:!0})},onEnd:()=>{this.setState({shouldCacheIgnoreZoom:!1})},onCancel:()=>{this.setState({shouldCacheIgnoreZoom:!1})},duration:t?.duration??500});this.cancelInProgressAnimation=()=>{e(),this.cancelInProgressAnimation=null}}else this.setState({scrollX:i,scrollY:s,zoom:r})}),XM(this,"maybeUnfollowRemoteUser",()=>{this.state.userToFollow&&this.setState({userToFollow:null})}),XM(this,"translateCanvas",e=>{this.cancelInProgressAnimation?.(),this.maybeUnfollowRemoteUser(),this.setState(e)}),XM(this,"setToast",e=>{this.setState({toast:e})}),XM(this,"restoreFileFromShare",async()=>{try{let e=await caches.open("web-share-target"),t=await e.match("shared-file");if(t){let n=await t.blob(),r=new File([n],n.name||"",{type:n.type});this.loadFileToCanvas(r,null),await e.delete("shared-file"),window.history.replaceState(null,"Excalidraw",window.location.pathname)}}catch(e){this.setState({errorMessage:e.message})}}),XM(this,"addFiles",Rne(e=>{let{addedFiles:t}=this.addMissingFiles(e);this.clearImageShapeCache(t),this.scene.triggerUpdate(),this.addNewImagesToImageCache()})),XM(this,"addMissingFiles",(e,t=!1)=>{let n=t?{}:{...this.files},r={},i=Array.isArray(e)?e:Object.values(e);for(let a of i)if(!n[a.id]&&(r[a.id]=a,n[a.id]=a,a.mimeType===lN.svg))try{let e=DQ(nq(LQ(a.dataURL)),lN.svg);a.dataURL!==e&&(a.version=(a.version??1)+1,a.dataURL=e)}catch(s){}return this.files=n,{addedFiles:r}}),XM(this,"updateScene",Rne(e=>{let t=iY(e.elements??[]);if(e.captureUpdate&&e.captureUpdate!==yY){let n=this.store.snapshot.appState,r=this.store.snapshot.elements,i=e.appState?Object.assign({},n,e.appState):n,s=e.elements?this.store.filterUncomittedElements(this.scene.getElementsMapIncludingDeleted(),DL(t)):r;e.captureUpdate===bY?this.store.captureIncrement(s,i):e.captureUpdate===UY&&this.store.updateSnapshot(s,i)}e.appState&&this.setState(e.appState),e.elements&&this.scene.replaceAllElements(t),e.collaborators&&this.setState({collaborators:e.collaborators})})),XM(this,"triggerRender",e=>{!0===e?this.scene.triggerUpdate():this.setState({})}),XM(this,"toggleSidebar",({name:e,tab:t,force:n})=>{let r;r=void 0===n?this.state.openSidebar?.name===e&&this.state.openSidebar?.tab===t?null:e:n?e:null;let i=r?{name:r}:null;return i&&t&&(i.tab=t),this.setState({openSidebar:i}),!!r}),XM(this,"updateCurrentCursorPosition",Rne(e=>{this.lastViewportPosition.x=e.clientX,this.lastViewportPosition.y=e.clientY})),XM(this,"getEditorUIOffsets",()=>{let e=this.excalidrawContainerRef?.current?.querySelector(".App-toolbar")?.getBoundingClientRect()?.bottom??0,t=this.excalidrawContainerRef?.current?.querySelector(".sidebar")?.getBoundingClientRect(),n=this.excalidrawContainerRef?.current?.querySelector(".App-menu__left")?.getBoundingClientRect(),r=16;return b6().rtl?{top:e+r,right:Math.max(this.state.width-(n?.left??this.state.width),0)+r,bottom:r,left:Math.max(t?.right??0,0)+r}:{top:e+r,right:Math.max(this.state.width-(t?.left??this.state.width)+r,0),bottom:r,left:Math.max(n?.right??0,0)+r}}),XM(this,"onKeyDown",Rne(e=>{if("Proxy"in window&&(!e.shiftKey&&/^[A-Z]$/.test(e.key)||e.shiftKey&&/^[a-z]$/.test(e.key))&&(e=new Proxy(e,{get(t,n){let r=t[n];return"function"==typeof r?r.bind(t):"key"===n?e.shiftKey?t.key.toUpperCase():t.key.toLowerCase():r}})),!pL(e.target)){if((e.key===$$.ESCAPE||e.key===$$.ENTER)&&this.state.croppingElementId)return void this.finishImageCropping();let t=MK(this.scene.getNonDeletedElementsMap(),this.state);if(1===t.length&&uO(t[0])&&e.key===$$.ENTER)return void this.startImageCropping(t[0]);if(e.key===$$.ESCAPE&&this.flowChartCreator.isCreatingChart)return this.flowChartCreator.clear(),void this.triggerRender(!0);let n=V$(e.key);if(e[$$.CTRL_OR_CMD]&&n&&!e.shiftKey){e.preventDefault();let t=MK(this.scene.getNonDeletedElementsMap(),this.state);return 1===t.length&&jO(t[0])&&this.flowChartCreator.createNodes(t[0],this.scene.getNonDeletedElementsMap(),this.state,H9(e.key)),void(this.flowChartCreator.pendingNodes?.length&&!BK(this.flowChartCreator.pendingNodes,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(this.flowChartCreator.pendingNodes,{animate:!0,duration:300,fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()}))}if(e.altKey){let t=MK(this.scene.getNonDeletedElementsMap(),this.state);if(1===t.length&&n){e.preventDefault();let n=this.flowChartNavigator.exploreByDirection(t[0],this.scene.getNonDeletedElementsMap(),H9(e.key));if(n){this.setState(e=>({selectedElementIds:jK({[n]:!0},e)}));let e=this.scene.getNonDeletedElementsMap().get(n);e&&!BK([e],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(e,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})}return}}}if(e[$$.CTRL_OR_CMD]&&e.key===$$.P&&!e.shiftKey&&!e.altKey)return this.setToast({message:y6("commandPalette.shortcutHint",{shortcut:P4("commandPalette")})}),void e.preventDefault();if(e[$$.CTRL_OR_CMD]&&e.key.toLowerCase()===$$.V&&(Bre=e.shiftKey,clearTimeout(Hre),Hre=window.setTimeout(()=>{Bre=!1},100)),e[$$.CTRL_OR_CMD]&&fL(e.target)&&(e.code===S$||e.code===w$))return void e.preventDefault();if(fL(e.target)&&e.key!==$$.ESCAPE||V$(e.key)&&pL(e.target))return;if(e.key===$$.QUESTION_MARK)return void this.setState({openDialog:{name:"help"}});if(e.key.toLowerCase()===$$.E&&e.shiftKey&&e[$$.CTRL_OR_CMD])return e.preventDefault(),void this.setState({openDialog:{name:"imageExport"}});if(e.key===$$.PAGE_UP||e.key===$$.PAGE_DOWN){let t=(e.shiftKey?this.state.width:this.state.height)/this.state.zoom.value;e.key===$$.PAGE_DOWN&&(t=-t),e.shiftKey?this.translateCanvas(e=>({scrollX:e.scrollX+t})):this.translateCanvas(e=>({scrollY:e.scrollY+t}))}if("elementLinkSelector"===this.state.openDialog?.name||this.actionManager.handleKeyDown(e)||this.state.viewModeEnabled)return;if(e[$$.CTRL_OR_CMD]&&this.state.isBindingEnabled&&this.setState({isBindingEnabled:!1}),V$(e.key)){let t=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}),n=t.find(SO),r=new Set;t.filter(SO).filter(e=>{let n=e.startBinding&&!t.some(t=>t.id===e.startBinding?.elementId),r=e.endBinding&&!t.some(t=>t.id===e.endBinding?.elementId);return n||r}).forEach(e=>r.add(e.id)),t=t.filter(e=>!r.has(e.id));let i=this.getEffectiveGridSize()&&(e.shiftKey?1:this.getEffectiveGridSize())||(e.shiftKey?5:1),s=0,a=0;e.key===$$.ARROW_LEFT?s=-i:e.key===$$.ARROW_RIGHT?s=i:e.key===$$.ARROW_UP?a=-i:e.key===$$.ARROW_DOWN&&(a=i),t.forEach(e=>{DK(e,{x:e.x+s,y:e.y+a},!1),$X(e,this.scene.getNonDeletedElementsMap(),{simultaneouslyUpdated:t})}),this.setState({suggestedBindings:TX(t.filter(e=>e.id!==n?.id||0!==i),this.scene.getNonDeletedElementsMap(),this.state.zoom)}),this.scene.triggerUpdate(),e.preventDefault()}else if(e.key===$$.ENTER){let t=this.scene.getSelectedElements(this.state);if(1===t.length){let n=t[0];if(e[$$.CTRL_OR_CMD])vO(n)&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==t[0].id)&&(this.store.shouldCaptureIncrement(),SO(n)||this.setState({editingLinearElement:new eG(n)}));else{if(mO(n)||(e=>bG.has(e.type))(n)){let t;mO(n)||(t=n);let r=hG(n,this.state,this.scene.getNonDeletedElementsMap()),i=r.x,s=r.y;return this.startTextEditing({sceneX:i,sceneY:s,container:t}),void e.preventDefault()}UO(n)&&this.setState({editingFrame:n.id})}}}else if(!(e.ctrlKey||e.altKey||e.metaKey||this.state.newElement||this.state.selectionElement||this.state.selectedElementsAreBeingDragged)){let t=(e=>Z$.find((t,n)=>null!=t.numericKey&&e===t.numericKey.toString()||t.key&&("string"==typeof t.key?t.key===e:t.key.includes(e)))?.value||null)(e.key);t?(this.state.activeTool.type!==t&&Z6("toolbar",t,`keyboard (${this.device.editor.isMobile?"mobile":"desktop"})`),"arrow"===t&&"arrow"===this.state.activeTool.type&&this.setState(e=>({currentItemArrowType:e.currentItemArrowType===sD?aD:e.currentItemArrowType===aD?oD:sD})),this.setActiveTool({type:t}),e.stopPropagation()):e.key===$$.Q&&(this.toggleLock("keyboard"),e.stopPropagation())}if(e.key===$$.SPACE&&0===Xre.pointers.size&&(Are=!0,TG(this.interactiveCanvas,TA),e.preventDefault()),!(e.key!==$$.G&&e.key!==$$.S||e.altKey||e[$$.CTRL_OR_CMD])){let t=this.scene.getSelectedElements(this.state);if("selection"===this.state.activeTool.type&&!t.length)return;e.key===$$.G&&(MW(this.state.activeTool.type)||t.some(e=>MW(e.type)))&&(this.setState({openPopup:"elementBackground"}),e.stopPropagation()),e.key===$$.S&&(this.setState({openPopup:"elementStroke"}),e.stopPropagation())}if(!e[$$.CTRL_OR_CMD]&&e.shiftKey&&e.key.toLowerCase()===$$.F){let t=this.scene.getSelectedElements(this.state);if("selection"===this.state.activeTool.type&&!t.length)return;("text"===this.state.activeTool.type||t.find(e=>mO(e)||dG(e,this.scene.getNonDeletedElementsMap())))&&(e.preventDefault(),this.setState({openPopup:"fontFamily"}))}if(e.key===$$.K&&!e.altKey&&!e[$$.CTRL_OR_CMD])return void("laser"===this.state.activeTool.type?this.setActiveTool({type:"selection"}):this.setActiveTool({type:"laser"}));e[$$.CTRL_OR_CMD]&&(e.key===$$.BACKSPACE||e.key===$$.DELETE)&&c6.set(Z4,"clearCanvas");let t=e.key.toLocaleLowerCase(),n=t===$$.S&&e.shiftKey,r=e.key===$$.I||t===$$.G&&e.shiftKey;(n||r)&&this.openEyeDropper({type:n?"stroke":"background"})})),XM(this,"onKeyUp",Rne(e=>{if(e.key===$$.SPACE&&(this.state.viewModeEnabled||"elementLinkSelector"===this.state.openDialog?.name?TG(this.interactiveCanvas,TA):"selection"===this.state.activeTool.type?jG(this.interactiveCanvas):(PG(this.interactiveCanvas,this.state),this.setState({selectedElementIds:jK({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})),Are=!1),!e[$$.CTRL_OR_CMD]&&!this.state.isBindingEnabled&&this.setState({isBindingEnabled:!0}),V$(e.key)&&(jX(this.scene.getSelectedElements(this.state).filter(vO),this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements(),this.scene,CX(this.state),this.state.selectedLinearElement?.selectedPointsIndices??[],this.state.zoom),this.setState({suggestedBindings:[]})),e.altKey||this.flowChartNavigator.isExploring&&(this.flowChartNavigator.clear(),this.syncActionResult({captureUpdate:bY})),!e[$$.CTRL_OR_CMD]&&this.flowChartCreator.isCreatingChart){this.flowChartCreator.pendingNodes?.length&&this.scene.insertElements(this.flowChartCreator.pendingNodes);let e=this.flowChartCreator.pendingNodes?.[0];e&&(this.setState(t=>({selectedElementIds:jK({[e.id]:!0},t)})),BK([e],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())||this.scrollToContent(e,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})),this.flowChartCreator.clear(),this.syncActionResult({captureUpdate:bY})}})),XM(this,"isToolSupported",e=>!1!==this.props.UIOptions.tools?.[e]),XM(this,"setActiveTool",e=>{if(!this.isToolSupported(e.type))return;let t=wL(this.state,e);"hand"===t.type?TG(this.interactiveCanvas,TA):Are||PG(this.interactiveCanvas,{...this.state,activeTool:t}),(e=>e instanceof HTMLElement&&e.className.includes("ToolIcon"))(document.activeElement)&&this.focusContainer(),EO(t.type)||this.setState({suggestedBindings:[]}),"image"===t.type&&this.onImageAction({insertOnCanvasDirectly:("image"===e.type&&e.insertOnCanvasDirectly)??!1}),this.setState(e=>{let n={snapLines:e.snapLines.length?[]:e.snapLines,originSnapOffset:null,activeEmbeddable:null};return"freedraw"===t.type&&this.store.shouldCaptureIncrement(),"selection"!==t.type?{...e,activeTool:t,selectedElementIds:jK({},e),selectedGroupIds:jK({},e),editingGroupId:null,multiElement:null,...n}:{...e,activeTool:t,...n}})}),XM(this,"setOpenDialog",e=>{this.setState({openDialog:e})}),XM(this,"setCursor",e=>{TG(this.interactiveCanvas,e)}),XM(this,"resetCursor",()=>{jG(this.interactiveCanvas)}),XM(this,"isTouchScreenMultiTouchGesture",()=>Xre.pointers.size>=2),XM(this,"getName",()=>this.state.name||this.props.name||`${y6("labels.untitled")}-${uL()}`),XM(this,"onGestureStart",Rne(e=>{e.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({selectedElementIds:jK({},this.state),activeEmbeddable:null}),Xre.initialScale=this.state.zoom.value})),XM(this,"onGestureChange",Rne(e=>{if(e.preventDefault(),this.isTouchScreenMultiTouchGesture())return;let t=Xre.initialScale;t&&this.setState(n=>({...l8({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:yV(t*e.scale)},n)}))})),XM(this,"onGestureEnd",Rne(e=>{e.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({previousSelectedElementIds:{},selectedElementIds:jK(this.state.previousSelectedElementIds,this.state)}),Xre.initialScale=null})),XM(this,"startTextEditing",({sceneX:e,sceneY:t,insertAtParentCenter:n=!0,container:r,autoEdit:i=!0})=>{let s=!1,a=n&&this.getTextWysiwygSnappedToCenterPosition(e,t,this.state,r);r&&a&&(dG(r,this.scene.getNonDeletedElementsMap())||(s=!0));let o=null,l=this.scene.getSelectedElements(this.state);o=1===l.length?mO(l[0])?l[0]:r?dG(l[0],this.scene.getNonDeletedElementsMap()):this.getTextElementAtPosition(e,t):this.getTextElementAtPosition(e,t);let c=o?.fontFamily||this.state.currentItemFontFamily,d=o?.lineHeight||JH(c),u=this.state.currentItemFontSize;if(!o&&s&&r&&!wO(r)){let n=zO(gL({fontSize:u,fontFamily:c}),d),i=XO(u,d),s=Math.max(r.height,i),o=Math.max(r.width,n);DK(r,{height:s,width:o}),e=r.x+o/2,t=r.y+s/2,a&&(a=this.getTextWysiwygSnappedToCenterPosition(e,t,this.state,r))}let h=this.getTopLayerFrameAtSceneCoords({x:e,y:t}),p=o||WG({x:a?a.elementCenterX:e,y:a?a.elementCenterY:t,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:"",fontSize:u,fontFamily:c,textAlign:a?"center":this.state.currentItemTextAlign,verticalAlign:a?kN:sN,containerId:s?r?.id:void 0,groupIds:r?.groupIds??[],lineHeight:d,angle:r?.angle??0,frameId:h?h.id:null});if(!o&&s&&r&&DK(r,{boundElements:(r.boundElements||[]).concat({type:"text",id:p.id})}),this.setState({editingTextElement:p}),!o)if(r&&s){let e=this.scene.getElementIndex(r.id);this.scene.insertElementAtIndex(p,e+1)}else this.scene.insertElement(p);i||o||r?this.handleTextWysiwyg(p,{isExistingElement:!!o}):this.setState({newElement:p,multiElement:null})}),XM(this,"startImageCropping",e=>{this.store.shouldCaptureIncrement(),this.setState({croppingElementId:e.id})}),XM(this,"finishImageCropping",()=>{this.state.croppingElementId&&(this.store.shouldCaptureIncrement(),this.setState({croppingElementId:null}))}),XM(this,"handleCanvasDoubleClick",e=>{if(this.state.multiElement||"selection"!==this.state.activeTool.type)return;let t=this.scene.getSelectedElements(this.state),{x:n,y:r}=EL(e,this.state);if(1===t.length&&vO(t[0])){if(!(!e[$$.CTRL_OR_CMD]||this.state.editingLinearElement&&this.state.editingLinearElement.elementId===t[0].id||SO(t[0])))return this.store.shouldCaptureIncrement(),void this.setState({editingLinearElement:new eG(t[0])});if(this.state.selectedLinearElement&&SO(t[0])){let e=eG.getSegmentMidpointHitCoords(this.state.selectedLinearElement,{x:n,y:r},this.state,this.scene.getNonDeletedElementsMap()),i=e?eG.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,e,this.scene.getNonDeletedElementsMap()):-1;if(i&&i>-1){this.store.shouldCaptureIncrement(),eG.deleteFixedSegment(t[0],i);let s=eG.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:n,y:r},this.state,this.scene.getNonDeletedElementsMap()),a=s?eG.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,s,this.scene.getNonDeletedElementsMap()):null;return void this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:{...this.state.selectedLinearElement.pointerDownState,segmentMidpoint:{index:a,value:e,added:!1}},segmentMidPointHoveredCoords:s}})}}}if(1===t.length&&uO(t[0]))this.startImageCropping(t[0]);else{if(jG(this.interactiveCanvas),CV(this.state).length>0){let e=this.getElementAtPosition(n,r),t=e&&((e,t)=>e.groupIds.find(e=>t[e]))(e,this.state.selectedGroupIds);if(t)return this.store.shouldCaptureIncrement(),void this.setState(n=>({...n,...SV({editingGroupId:t,selectedElementIds:{[e.id]:!0}},this.scene.getNonDeletedElements(),n,this)}))}if(jG(this.interactiveCanvas),!e[$$.CTRL_OR_CMD]&&!this.state.viewModeEnabled){let t=this.getElementAtPosition(n,r);if(fO(t))return void this.setState({activeEmbeddable:{element:t,state:"active"}});let i=this.getTextBindableContainerAtPosition(n,r);if(i&&(TO(i)||!PL(i.backgroundColor)||m$({x:n,y:r,element:i,shape:K$(i,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()}))){let e=hG(i,this.state,this.scene.getNonDeletedElementsMap());n=e.x,r=e.y}this.startTextEditing({sceneX:n,sceneY:r,insertAtParentCenter:!e.altKey,container:i})}}}),XM(this,"getElementLinkAtPosition",(e,t)=>{let n=this.scene.getNonDeletedElements(),r=-1;for(let i=n.length-1;i>=0;i--){let s=n[i];if(t&&s.id===t.id&&(r=i),s.link&&i>=r&&oq(s,this.scene.getNonDeletedElementsMap(),this.state,PD(e.x,e.y),this.device.editor.isMobile))return s}}),XM(this,"redirectToLink",(e,t)=>{let n=BD(PD(this.lastPointerDownEvent.clientX,this.lastPointerDownEvent.clientY),PD(this.lastPointerUpEvent.clientX,this.lastPointerUpEvent.clientY));if(!this.hitLinkElement||n>CA)return;let r=EL(this.lastPointerDownEvent,this.state),i=this.scene.getNonDeletedElementsMap(),s=oq(this.hitLinkElement,i,this.state,PD(r.x,r.y),this.device.editor.isMobile),a=EL(this.lastPointerUpEvent,this.state),o=oq(this.hitLinkElement,i,this.state,PD(a.x,a.y),this.device.editor.isMobile);if(s&&o){S7();let t=this.hitLinkElement.link;if(t){let n;if(t=vG(t),this.props.onLinkOpen&&(n=zL("excalidraw-link",e.nativeEvent),this.props.onLinkOpen({...this.hitLinkElement,link:t},n)),!n?.defaultPrevented){let e=wG(t)?"_self":"_blank",n=window.open(void 0,e);n&&(n.opener=null,n.location=t)}}}}),XM(this,"getTopLayerFrameAtSceneCoords",e=>{let t=this.scene.getNonDeletedElementsMap(),n=this.scene.getNonDeletedFramesLikes().filter(n=>sK(e,n,t));return n.length?n[n.length-1]:null}),XM(this,"handleCanvasPointerMove",e=>{this.savePointer(e.clientX,e.clientY,this.state.cursorButton),this.lastPointerMoveEvent=e.nativeEvent,Xre.pointers.has(e.pointerId)&&Xre.pointers.set(e.pointerId,{x:e.clientX,y:e.clientY});let n=Xre.initialScale;if(2===Xre.pointers.size&&Xre.lastCenter&&n&&Xre.initialDistance){let e=E9(Xre.pointers),t=e.x-Xre.lastCenter.x,r=e.y-Xre.lastCenter.y;Xre.lastCenter=e;let i=k9(Array.from(Xre.pointers.values())),s="freedraw"===this.state.activeTool.type&&this.state.penMode?1:i/Xre.initialDistance,a=s?yV(n*s):this.state.zoom.value;this.setState(n=>{let i=l8({viewportX:e.x,viewportY:e.y,nextZoom:a},n);this.translateCanvas({zoom:i.zoom,scrollX:i.scrollX+t/a*2,scrollY:i.scrollY+r/a*2,shouldCacheIgnoreZoom:!0})}),this.resetShouldCacheIgnoreZoomDebounced()}else Xre.lastCenter=Xre.initialDistance=Xre.initialScale=null;if(Are||Nre||Dre||gD(this.state))return;let r=eee(Lre,e.clientX-this.state.offsetLeft,e.clientY-this.state.offsetTop).isOverEither;!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.multiElement&&(r?jG(this.interactiveCanvas):PG(this.interactiveCanvas,this.state));let i=EL(e,this.state),{x:s,y:a}=i;if(!this.state.newElement&&(e=>e===XN||e===GN||e===VN||e===KN||e===QN||e===qN||e===YN)(this.state.activeTool.type)){let{originOffset:t,snapLines:n}=((e,t,n,r,i)=>{if(!FV({event:r,selectedElements:[],app:t}))return{originOffset:{x:0,y:0},snapLines:[]};let s=CK(e,[],t.state,i),a=NV(t.state.zoom.value),o={x:a,y:a},l=[],c=[];for(let d of s){let e=zV([d],i);for(let t of e){let e=t[0]-n.x;Math.abs(e)<=Math.abs(o.x)&&(Math.abs(e)<Math.abs(o.x)&&(c.length=0),c.push({type:"pointer",points:[t,PD(t[0],n.y)],direction:"vertical"}),o.x=e);let r=t[1]-n.y;Math.abs(r)<=Math.abs(o.y)&&(Math.abs(r)<Math.abs(o.y)&&(l.length=0),l.push({type:"pointer",points:[t,PD(n.x,t[1])],direction:"horizontal"}),o.y=r)}}return{originOffset:{x:c.length>0?c[0].points[0][0]-n.x:0,y:l.length>0?l[0].points[0][1]-n.y:0},snapLines:[...c,...l]}})(this.scene.getNonDeletedElements(),this,{x:s,y:a},e,this.scene.getNonDeletedElementsMap());this.setState(e=>{let r=KL(e.snapLines,n),i=e.originSnapOffset?KL(e.originSnapOffset,t):t;return e.snapLines===r&&e.originSnapOffset===i?null:{snapLines:r,originSnapOffset:i}})}else!this.state.newElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.selectionElement&&this.setState(e=>e.snapLines.length?{snapLines:[]}:null);if(this.state.editingLinearElement&&!this.state.editingLinearElement.isDragging){let n=eG.handlePointerMove(e,s,a,this,this.scene.getNonDeletedElementsMap());n&&n!==this.state.editingLinearElement&&t.flushSync(()=>{this.setState({editingLinearElement:n})}),null!=n?.lastUncommittedPoint?this.maybeSuggestBindingAtCursor(i,n.elbowed):t.flushSync(()=>{this.setState({suggestedBindings:[]})})}if(CO(this.state.activeTool.type)){let{newElement:e}=this.state;kO(e,!1)?this.maybeSuggestBindingsForLinearElementAtCoords(e,[i],this.state.startBoundElement):this.maybeSuggestBindingAtCursor(i,!1)}if(this.state.multiElement){let{multiElement:t}=this.state,{x:n,y:r}=t,{points:i,lastCommittedPoint:o}=t,l=i[i.length-1];if(PG(this.interactiveCanvas,this.state),l===o)BD(PD(s-n,a-r),l)>=8?DK(t,{points:[...i,PD(s-n,a-r)]},!1):TG(this.interactiveCanvas,RA);else if(i.length>2&&o&&BD(PD(s-n,a-r),o)<8)TG(this.interactiveCanvas,RA),DK(t,{points:i.slice(0,-1)},!1);else{let[o,l]=qV(s,a,e[$$.CTRL_OR_CMD]||SO(t)?null:this.getEffectiveGridSize()),[c,d]=t?.lastCommittedPoint??[0,0],u=o-n-c,h=l-r-d;q$(e)&&({width:u,height:h}=$K(c+n,d+r,o,l)),sW(i,this.state.zoom.value)&&TG(this.interactiveCanvas,RA),DK(t,{points:[...i.slice(0,-1),PD(c+u,d+h)]},!1,{isDragging:!0}),this.triggerRender(!1)}return}if(e.buttons||"selection"!==this.state.activeTool.type&&"text"!==this.state.activeTool.type&&"eraser"!==this.state.activeTool.type)return;let o=this.scene.getNonDeletedElements(),l=this.scene.getSelectedElements(this.state);if(1!==l.length||r||this.state.editingLinearElement){if(l.length>1&&!r&&"elementLinkSelector"!==this.state.openDialog?.name){let t=rQ(gX(l),s,a,this.state.zoom,e.pointerType,this.device);if(t)return void TG(this.interactiveCanvas,sQ({transformHandleType:t}))}}else if(this.state.selectedLinearElement&&this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,s,a),!(this.state.selectedLinearElement&&-1!==this.state.selectedLinearElement.hoverPointIndex||"elementLinkSelector"===this.state.openDialog?.name||1===l.length&&SO(l[0]))){let t=nQ(o,this.state,s,a,this.state.zoom,e.pointerType,this.scene.getNonDeletedElementsMap(),this.device);if(t&&t.transformHandleType)return void TG(this.interactiveCanvas,sQ(t))}let c=this.getElementAtPosition(i.x,i.y);this.hitLinkElement=this.getElementLinkAtPosition(i,c),!mD(this.state)&&(this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?(TG(this.interactiveCanvas,RA),((e,t,n)=>{v7&&clearTimeout(v7),v7=window.setTimeout(()=>w7(e,t,n),300)})(this.hitLinkElement,this.state,this.scene.getNonDeletedElementsMap())):(S7(),c&&(c.link||hO(c))&&this.state.selectedElementIds[c.id]&&!this.state.contextMenu&&!this.state.showHyperlinkPopup?this.setState({showHyperlinkPopup:"info"}):"text"===this.state.activeTool.type?TG(this.interactiveCanvas,mO(c)?MA:IA):this.state.viewModeEnabled?TG(this.interactiveCanvas,TA):"elementLinkSelector"===this.state.openDialog?.name||r?TG(this.interactiveCanvas,AA):this.state.selectedLinearElement?this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,s,a):e[$$.CTRL_OR_CMD]?TG(this.interactiveCanvas,AA):(c||this.isHittingCommonBoundingBoxOfSelectedElements(i,l))&&!c?.locked&&(c&&fO(c)&&this.isIframeLikeElementCenter(c,e,s,a)?(TG(this.interactiveCanvas,RA),this.setState({activeEmbeddable:{element:c,state:"hover"}})):(!c||!SO(c))&&(TG(this.interactiveCanvas,PA),"hover"===this.state.activeEmbeddable?.state&&this.setState({activeEmbeddable:null})))),"elementLinkSelector"===this.state.openDialog?.name&&c?this.setState(e=>({hoveredElementIds:KL(e.hoveredElementIds,SV({editingGroupId:e.editingGroupId,selectedElementIds:{[c.id]:!0}},this.scene.getNonDeletedElements(),e,this).selectedElementIds)})):"elementLinkSelector"===this.state.openDialog?.name&&!c&&this.setState(e=>({hoveredElementIds:KL(e.hoveredElementIds,{})})))}),XM(this,"handleEraser",(e,t,n)=>{this.eraserTrail.addPointToPath(n.x,n.y);let r=!1,i=new Set,s=this.scene.getNonDeletedElements(),a=t=>{for(let n of t){if(n.locked)return;if(e.altKey?this.elementsPendingErasure.delete(n.id)&&(r=!0):this.elementsPendingErasure.has(n.id)||(r=!0,this.elementsPendingErasure.add(n.id)),r&&n.groupIds?.length){let t=n.groupIds.at(-1);if(!i.has(t)){i.add(t);let n=jV(s,t);for(let t of n)e.altKey?this.elementsPendingErasure.delete(t.id):this.elementsPendingErasure.add(t.id)}}}},o=BD(PD(t.lastCoords.x,t.lastCoords.y),PD(n.x,n.y)),l=this.getElementHitThreshold(),c={...t.lastCoords},d=0;for(;d<=o;){if(a(this.getElementsAtPosition(c.x,c.y)),d===o)break;d=Math.min(d+l,o);let e=d/o,t=(1-e)*c.x+e*n.x,r=(1-e)*c.y+e*n.y;c.x=t,c.y=r}if(t.lastCoords.x=n.x,t.lastCoords.y=n.y,r){for(let t of this.scene.getNonDeletedElements())RO(t)&&(this.elementsPendingErasure.has(t.id)||this.elementsPendingErasure.has(t.containerId))&&(e.altKey?(this.elementsPendingErasure.delete(t.id),this.elementsPendingErasure.delete(t.containerId)):(this.elementsPendingErasure.add(t.id),this.elementsPendingErasure.add(t.containerId)));this.elementsPendingErasure=new Set(this.elementsPendingErasure),this.triggerRender()}}),XM(this,"handleTouchMove",e=>{Fre=!0}),XM(this,"handleCanvasPointerDown",e=>{let t=e.target;if(t.setPointerCapture&&t.setPointerCapture(e.pointerId),this.maybeCleanupAfterMissingPointerUp(e.nativeEvent),this.maybeUnfollowRemoteUser(),this.state.searchMatches&&(this.setState(e=>({searchMatches:e.searchMatches.map(e=>({...e,focus:!1}))})),c6.set(rte,null)),this.state.contextMenu&&this.setState({contextMenu:null}),this.state.snapLines&&this.setAppState({snapLines:[]}),this.updateGestureOnPointerDown(e),"touch"===e.pointerType&&this.state.newElement&&"freedraw"===this.state.newElement.type){let e=this.state.newElement;return void this.updateScene({...e.points.length<10?{elements:this.scene.getElementsIncludingDeleted().filter(t=>t.id!==e.id)}:{},appState:{newElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:jK(Object.keys(this.state.selectedElementIds).filter(t=>t!==e.id).reduce((e,t)=>(e[t]=this.state.selectedElementIds[t],e),{}),this.state)},captureUpdate:"elementLinkSelector"===this.state.openDialog?.name?yY:UY})}let n=document.getSelection();if(n?.anchorNode&&n.removeAllRanges(),this.maybeOpenContextMenuAfterPointerDownOnTouchDevices(e),!this.state.penDetected&&"pen"===e.pointerType&&this.setState(e=>({penMode:!0,penDetected:!0})),!this.device.isTouchScreen&&["pen","touch"].includes(e.pointerType)&&(this.device=BL(this.device,{isTouchScreen:!0})),Nre||(this.lastPointerDownEvent=e,this.handleCanvasPanUsingWheelOrSpaceDrag(e)))return;if(this.setState({lastPointerDownWith:e.pointerType,cursorButton:"down"}),this.savePointer(e.clientX,e.clientY,"down"),e.button===FA&&this.state.activeTool.type!==ZN)return void this.setState({activeTool:wL(this.state,{type:ZN,lastActiveToolBeforeEraser:this.state.activeTool})},()=>{this.handleCanvasPointerDown(e);let t,n=()=>{r(),t?.(),mD(this.state)&&this.setState({activeTool:wL(this.state,{...this.state.activeTool.lastActiveTool||{type:WN},lastActiveToolBeforeEraser:null})})},r=QL(window,"pointerup",n,{once:!0});requestAnimationFrame(()=>{t=this.missingPointerEventCleanupEmitter.once(n)})});if(e.button!==NA&&e.button!==OA&&e.button!==FA||Xre.pointers.size>1)return;let r=this.initialPointerDownState(e);if(this.setState({selectedElementsAreBeingDragged:!1}),this.handleDraggingScrollBar(e,r)||(this.clearSelectionIfNotUsingSelection(),this.updateBindingEnabledOnPointerMove(e),this.handleSelectionOnPointerDown(e,r))||this.state.penMode&&"touch"===e.pointerType&&"selection"!==this.state.activeTool.type&&"text"!==this.state.activeTool.type&&"image"!==this.state.activeTool.type)return;if("text"===this.state.activeTool.type)this.handleTextOnPointerDown(e,r);else if("arrow"===this.state.activeTool.type||"line"===this.state.activeTool.type)this.handleLinearElementOnPointerDown(e,this.state.activeTool.type,r);else if("image"===this.state.activeTool.type){TG(this.interactiveCanvas,IA);let t=this.state.pendingImageElementId&&this.scene.getElement(this.state.pendingImageElementId);if(!t)return;this.setState({newElement:t,pendingImageElementId:null,multiElement:null});let{x:n,y:r}=EL(e,this.state),i=this.getTopLayerFrameAtSceneCoords({x:n,y:r});DK(t,{x:n,y:r,frameId:i?i.id:null})}else"freedraw"===this.state.activeTool.type?this.handleFreeDrawElementOnPointerDown(e,this.state.activeTool.type,r):"custom"===this.state.activeTool.type?PG(this.interactiveCanvas,this.state):this.state.activeTool.type===KN||this.state.activeTool.type===QN?this.createFrameElementOnPointerDown(r,this.state.activeTool.type):"laser"===this.state.activeTool.type?this.laserTrails.startPath(r.lastCoords.x,r.lastCoords.y):"eraser"!==this.state.activeTool.type&&"hand"!==this.state.activeTool.type&&this.createGenericElementOnPointerDown(this.state.activeTool.type,r);this.props?.onPointerDown?.(this.state.activeTool,r),this.onPointerDownEmitter.trigger(this.state.activeTool,r,e),"eraser"===this.state.activeTool.type&&this.eraserTrail.startPath(r.lastCoords.x,r.lastCoords.y);let i=this.onPointerMoveFromPointerDownHandler(r),s=this.onPointerUpFromPointerDownHandler(r),a=this.onKeyDownFromPointerDownHandler(r),o=this.onKeyUpFromPointerDownHandler(r);this.missingPointerEventCleanupEmitter.once(t=>s(t||e.nativeEvent)),(!this.state.viewModeEnabled||"laser"===this.state.activeTool.type)&&(window.addEventListener("pointermove",i),window.addEventListener("pointerup",s),window.addEventListener("keydown",a),window.addEventListener("keyup",o),r.eventListeners.onMove=i,r.eventListeners.onUp=s,r.eventListeners.onKeyUp=o,r.eventListeners.onKeyDown=a)}),XM(this,"handleCanvasPointerUp",e=>{this.removePointer(e),this.lastPointerUpEvent=e;let t=EL({clientX:e.clientX,clientY:e.clientY},this.state),n=e.timeStamp-(this.lastPointerDownEvent?.timeStamp??0);if(this.device.editor.isMobile&&n<300){let n=this.getElementAtPosition(t.x,t.y);if(fO(n)&&this.isIframeLikeElementCenter(n,e,t.x,t.y))return void this.handleEmbeddableCenterClick(n)}if(this.device.isTouchScreen){let e=this.getElementAtPosition(t.x,t.y);this.hitLinkElement=this.getElementLinkAtPosition(t,e)}this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?n<300&&fO(this.hitLinkElement)&&!aq(this.hitLinkElement,this.scene.getNonDeletedElementsMap(),this.state,PD(t.x,t.y))?this.handleEmbeddableCenterClick(this.hitLinkElement):this.redirectToLink(e,this.device.isTouchScreen):this.state.viewModeEnabled&&this.setState({activeEmbeddable:null,selectedElementIds:{}})}),XM(this,"maybeOpenContextMenuAfterPointerDownOnTouchDevices",e=>{"touch"===e.pointerType&&(Fre=!1,Ore?Fre=!0:Ore=window.setTimeout(()=>{Ore=0,Fre||this.handleCanvasContextMenu(e)},500))}),XM(this,"resetContextMenuTimer",()=>{clearTimeout(Ore),Ore=0,Fre=!1}),XM(this,"maybeCleanupAfterMissingPointerUp",e=>{Wre?.(),this.missingPointerEventCleanupEmitter.trigger(e).clear()}),XM(this,"handleCanvasPanUsingWheelOrSpaceDrag",e=>{if(!(Xre.pointers.size<=1&&(e.button===DA||e.button===NA&&Are||gD(this.state)||this.state.viewModeEnabled)))return!1;Nre=!0,this.focusContainer(),this.state.editingTextElement||e.preventDefault();let t=!1,n=void 0!==typeof window&&/Linux/.test(window.navigator.platform);TG(this.interactiveCanvas,jA);let{clientX:r,clientY:i}=e,s=Pne(e=>{let s=r-e.clientX,a=i-e.clientY;if(r=e.clientX,i=e.clientY,n&&!t&&(Math.abs(s)>1||Math.abs(a)>1)){t=!0;let e=t=>{document.body.removeEventListener("paste",e),t.stopPropagation()},n=()=>{setTimeout(()=>{document.body.removeEventListener("paste",e),window.removeEventListener("pointerup",n)},100)};document.body.addEventListener("paste",e),window.addEventListener("pointerup",n)}this.translateCanvas({scrollX:this.state.scrollX-s/this.state.zoom.value,scrollY:this.state.scrollY-a/this.state.zoom.value})}),a=Rne(Wre=()=>{Wre=null,Nre=!1,Are||(this.state.viewModeEnabled?TG(this.interactiveCanvas,TA):PG(this.interactiveCanvas,this.state)),this.setState({cursorButton:"up"}),this.savePointer(e.clientX,e.clientY,"up"),window.removeEventListener("pointermove",s),window.removeEventListener("pointerup",a),window.removeEventListener("blur",a),s.flush()});return window.addEventListener("blur",a),window.addEventListener("pointermove",s,{passive:!0}),window.addEventListener("pointerup",a),!0}),XM(this,"clearSelectionIfNotUsingSelection",()=>{"selection"!==this.state.activeTool.type&&this.setState({selectedElementIds:jK({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})}),XM(this,"handleSelectionOnPointerDown",(e,t)=>{if("selection"===this.state.activeTool.type){let n=this.scene.getNonDeletedElements(),r=this.scene.getNonDeletedElementsMap(),i=this.scene.getSelectedElements(this.state);if(1!==i.length||this.state.editingLinearElement||SO(i[0])||this.state.selectedLinearElement&&-1!==this.state.selectedLinearElement.hoverPointIndex)i.length>1&&(t.resize.handleType=rQ(gX(i),t.origin.x,t.origin.y,this.state.zoom,e.pointerType,this.device));else{let r=nQ(n,this.state,t.origin.x,t.origin.y,this.state.zoom,e.pointerType,this.scene.getNonDeletedElementsMap(),this.device);null!=r&&("rotation"===r.transformHandleType?(this.setState({resizingElement:r.element}),t.resize.handleType=r.transformHandleType):(this.state.croppingElementId||this.setState({resizingElement:r.element}),t.resize.handleType=r.transformHandleType))}if(t.resize.handleType)t.resize.isResizing=!0,t.resize.offset=IL(((e,t,n,r,i)=>{let[s,a,o,l]=1===t.length?sX(t[0],n):gX(t),c=(s+o)/2,d=(a+l)/2,u=1===t.length?t[0].angle:0;switch([r,i]=OD(PD(r,i),PD(c,d),-u),e){case"n":return OD(PD(r-(s+o)/2,i-a),PD(0,0),u);case"s":return OD(PD(r-(s+o)/2,i-l),PD(0,0),u);case"w":return OD(PD(r-s,i-(a+l)/2),PD(0,0),u);case"e":return OD(PD(r-o,i-(a+l)/2),PD(0,0),u);case"nw":return OD(PD(r-s,i-a),PD(0,0),u);case"ne":return OD(PD(r-o,i-a),PD(0,0),u);case"sw":return OD(PD(r-s,i-l),PD(0,0),u);case"se":return OD(PD(r-o,i-l),PD(0,0),u);default:return[0,0]}})(t.resize.handleType,i,r,t.origin.x,t.origin.y)),1===i.length&&vO(i[0])&&2===i[0].points.length&&(t.resize.arrowDirection=((e,t)=>{let[,[n,r]]=t.points;return"nw"===e&&(n<0||r<0)||"ne"===e&&n>=0||"sw"===e&&n<=0||"se"===e&&(n>0||r>0)?"end":"origin"})(t.resize.handleType,i[0]));else{if(this.state.selectedLinearElement){let n=this.state.editingLinearElement||this.state.selectedLinearElement,r=eG.handlePointerDown(e,this,this.store,t.origin,n,this.scene);if(r.hitElement&&(t.hit.element=r.hitElement),r.linearElementEditor&&(this.setState({selectedLinearElement:r.linearElementEditor}),this.state.editingLinearElement&&this.setState({editingLinearElement:r.linearElementEditor})),r.didAddPoint)return!0}if(t.hit.element=t.hit.element??this.getElementAtPosition(t.origin.x,t.origin.y),this.hitLinkElement=this.getElementLinkAtPosition(t.origin,t.hit.element),this.hitLinkElement)return!0;if(this.state.croppingElementId&&t.hit.element?.id!==this.state.croppingElementId&&this.finishImageCropping(),t.hit.element&&this.getElementLinkAtPosition({x:t.origin.x,y:t.origin.y},t.hit.element))return!1;t.hit.allHitElements=this.getElementsAtPosition(t.origin.x,t.origin.y);let n=t.hit.element,r=t.hit.allHitElements.some(e=>this.isASelectedElement(e));if((null===n||!r)&&!e.shiftKey&&!t.hit.hasHitCommonBoundingBoxOfSelectedElements&&this.clearSelection(n),this.state.editingLinearElement)this.setState({selectedElementIds:jK({[this.state.editingLinearElement.elementId]:!0},this.state)});else if(null!=n){if(e[$$.CTRL_OR_CMD])return this.state.selectedElementIds[n.id]||(t.hit.wasAddedToSelection=!0),this.setState(e=>({...MV(e,n),previousSelectedElementIds:this.state.selectedElementIds})),!1;this.state.selectedElementIds[n.id]||(this.state.editingGroupId&&!IV(n,this.state.editingGroupId)&&this.setState({selectedElementIds:jK({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),!r&&!t.hit.hasHitCommonBoundingBoxOfSelectedElements&&(this.setState(e=>{let t={...e.selectedElementIds,[n.id]:!0},r=[];if(Object.keys(e.selectedElementIds).forEach(e=>{let t=this.scene.getElement(e);t&&r.push(t)}),UO(n))aK(r,n.id).forEach(e=>{delete t[e.id]});else if(n.frameId)t[n.frameId]&&delete t[n.id];else{let e=n.groupIds,i=new Set(e.flatMap(e=>jV(this.scene.getNonDeletedElements(),e)).filter(e=>UO(e)).map(e=>e.id));i.size>0&&r.forEach(e=>{e.frameId&&i.has(e.frameId)&&(delete t[e.id],e.groupIds.flatMap(e=>jV(this.scene.getNonDeletedElements(),e)).forEach(e=>{delete t[e.id]}))})}return"elementLinkSelector"===e.openDialog?.name&&(n.groupIds.some(t=>e.selectedGroupIds[t])||(t={[n.id]:!0})),{...SV({editingGroupId:e.editingGroupId,selectedElementIds:t},this.scene.getNonDeletedElements(),e,this),showHyperlinkPopup:!(!n.link&&!hO(n))&&"info"}}),t.hit.wasAddedToSelection=!0))}this.setState({previousSelectedElementIds:this.state.selectedElementIds})}}return!1}),XM(this,"handleTextOnPointerDown",(e,t)=>{if(this.state.editingTextElement)return;let n=t.origin.x,r=t.origin.y,i=this.getElementAtPosition(n,r,{includeBoundTextElement:!0}),s=this.getTextBindableContainerAtPosition(n,r);TO(i)&&(s=i,n=i.x+i.width/2,r=i.y+i.height/2),this.startTextEditing({sceneX:n,sceneY:r,insertAtParentCenter:!e.altKey,container:s,autoEdit:!1}),jG(this.interactiveCanvas),this.state.activeTool.locked||this.setState({activeTool:wL(this.state,{type:"selection"})})}),XM(this,"handleFreeDrawElementOnPointerDown",(e,t,n)=>{let[r,i]=qV(n.origin.x,n.origin.y,null),s=this.getTopLayerFrameAtSceneCoords({x:r,y:i}),a=.5===e.pressure,o=(e=>({...OG(e.type,e),points:e.points||[],pressures:e.pressures||[],simulatePressure:e.simulatePressure,lastCommittedPoint:null}))({type:t,x:r,y:i,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:null,simulatePressure:a,locked:!1,frameId:s?s.id:null,points:[PD(0,0)],pressures:a?[]:[e.pressure]});this.scene.insertElement(o),this.setState(e=>{let t={...e.selectedElementIds};return delete t[o.id],{selectedElementIds:jK(t,e)}});let l=FX(n.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom);this.setState({newElement:o,startBoundElement:l,suggestedBindings:[]})}),XM(this,"insertIframeElement",({sceneX:e,sceneY:t,width:n,height:r})=>{let[i,s]=qV(e,t,this.lastPointerDownEvent?.[$$.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=(e=>({...OG("iframe",e)}))({type:"iframe",x:i,y:s,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("iframe"),opacity:this.state.currentItemOpacity,locked:!1,width:n,height:r});return this.scene.insertElement(a),a}),XM(this,"insertEmbeddableElement",({sceneX:e,sceneY:t,link:n})=>{let[r,i]=qV(e,t,this.lastPointerDownEvent?.[$$.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),s=FY(n);if(!s)return;s.error instanceof URIError&&this.setToast({message:y6("toast.unrecognizedLinkFormat"),closable:!0});let a=zG({type:"embeddable",x:r,y:i,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("embeddable"),opacity:this.state.currentItemOpacity,locked:!1,width:s.intrinsicSize.w,height:s.intrinsicSize.h,link:n});return this.scene.insertElement(a),a}),XM(this,"createImageElement",({sceneX:e,sceneY:t,addToFrameUnderCursor:n=!0})=>{let[r,i]=qV(e,t,this.lastPointerDownEvent?.[$$.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),s=n?this.getTopLayerFrameAtSceneCoords({x:r,y:i}):null;return qG({type:"image",x:r,y:i,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:null,opacity:this.state.currentItemOpacity,locked:!1,frameId:s?s.id:null})}),XM(this,"handleLinearElementOnPointerDown",(e,t,n)=>{if(this.state.multiElement){let{multiElement:e}=this.state;if("line"===e.type&&sW(e.points,this.state.zoom.value))return DK(e,{lastCommittedPoint:e.points[e.points.length-1]}),void this.actionManager.executeAction(x8);if(SO(e)&&e.points.length>1)return DK(e,{lastCommittedPoint:e.points[e.points.length-1]}),void this.actionManager.executeAction(x8);let{x:t,y:r,lastCommittedPoint:i}=e;if(e.points.length>1&&i&&BD(PD(n.origin.x-t,n.origin.y-r),i)<8)return void this.actionManager.executeAction(x8);this.setState(t=>({selectedElementIds:jK({...t.selectedElementIds,[e.id]:!0},t)})),DK(e,{lastCommittedPoint:e.points[e.points.length-1]}),TG(this.interactiveCanvas,RA)}else{let[r,i]=qV(n.origin.x,n.origin.y,e[$$.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),s=this.getTopLayerFrameAtSceneCoords({x:r,y:i}),{currentItemStartArrowhead:a,currentItemEndArrowhead:o}=this.state,[l,c]="arrow"===t?[a,o]:[null,null],d="arrow"===t?YG({type:t,x:r,y:i,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemArrowType===aD?{type:RN}:null,startArrowhead:l,endArrowhead:c,locked:!1,frameId:s?s.id:null,elbowed:this.state.currentItemArrowType===oD,fixedSegments:this.state.currentItemArrowType===oD?[]:null}):GG({type:t,x:r,y:i,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:"round"===this.state.currentItemRoundness?{type:RN}:null,locked:!1,frameId:s?s.id:null});this.setState(e=>{let t={...e.selectedElementIds};return delete t[d.id],{selectedElementIds:jK(t,e)}}),DK(d,{points:[...d.points,PD(0,0)]});let u=FX(n.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,SO(d),SO(d));this.scene.insertElement(d),this.setState({newElement:d,startBoundElement:u,suggestedBindings:[]})}}),XM(this,"createGenericElementOnPointerDown",(e,t)=>{let n,[r,i]=qV(t.origin.x,t.origin.y,this.lastPointerDownEvent?.[$$.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),s=this.getTopLayerFrameAtSceneCoords({x:r,y:i}),a={x:r,y:i,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.getCurrentItemRoundness(e),locked:!1,frameId:s?s.id:null};n="embeddable"===e?zG({type:"embeddable",...a}):FG({type:e,...a}),"selection"===n.type?this.setState({selectionElement:n}):(this.scene.insertElement(n),this.setState({multiElement:null,newElement:n}))}),XM(this,"createFrameElementOnPointerDown",(e,t)=>{let[n,r]=qV(e.origin.x,e.origin.y,this.lastPointerDownEvent?.[$$.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),i={x:n,y:r,opacity:this.state.currentItemOpacity,locked:!1,...tN},s=t===QN?HG(i):BG(i);this.scene.insertElement(s),this.setState({multiElement:null,newElement:s})}),XM(this,"restoreReadyToEraseElements",()=>{this.elementsPendingErasure=new Set,this.triggerRender()}),XM(this,"eraseElements",()=>{let e=!1,t=this.scene.getElementsIncludingDeleted().map(t=>this.elementsPendingErasure.has(t.id)||t.frameId&&this.elementsPendingErasure.has(t.frameId)||RO(t)&&this.elementsPendingErasure.has(t.containerId)?(e=!0,LK(t,{isDeleted:!0})):t);this.elementsPendingErasure=new Set,e&&(this.store.shouldCaptureIncrement(),this.scene.replaceAllElements(t))}),XM(this,"initializeImage",async({imageFile:e,imageElement:t,showCursorImagePreview:n=!1})=>{if(!IQ(e))throw new Error(y6("errors.unsupportedFileType"));let r=e.type;if(TG(this.interactiveCanvas,"wait"),r===lN.svg)try{e=FQ(nq(await e.text()),e.name)}catch(o){throw new Error(y6("errors.svgImageInsertError"))}let i=await(this.props.generateIdForFile?.(e)||AQ(e));if(!i)throw new Error(y6("errors.imageInsertError"));if(!this.files[i]?.dataURL){try{e=await OQ(e,{maxWidthOrHeight:1440})}catch(o){}if(e.size>xN)throw new Error(y6("errors.fileTooBig",{maxSize:`${Math.trunc(4)}MB`}))}if(n){let t=this.files[i]?.dataURL,n=t&&((e,t="")=>{let n=e.indexOf(","),r=atob(e.slice(n+1)),i=e.slice(0,n).split(":")[1].split(";")[0],s=new ArrayBuffer(r.length),a=new Uint8Array(s);for(let o=0;o<r.length;o++)a[o]=r.charCodeAt(o);return new File([s],t,{type:i})})(t);this.setImagePreviewCursor(n||e)}let s=this.files[i]?.dataURL||await NQ(e),a=DK(t,{fileId:i},!1);return new Promise(async(e,t)=>{try{this.addMissingFiles([{mimeType:r,id:i,dataURL:s,created:Date.now(),lastRetrieved:Date.now()}]);let t=this.imageCache.get(i);t||(this.addNewImagesToImageCache(),await this.updateImageCache([a])),t?.image instanceof Promise&&await t.image,this.state.pendingImageElementId!==a.id&&this.state.newElement?.id!==a.id&&this.initializeImageDimensions(a,!0),e(a)}catch(o){t(new Error(y6("errors.imageInsertError")))}finally{n||jG(this.interactiveCanvas)}})}),XM(this,"insertImageElement",async(e,t,n)=>{if(this.isToolSupported("image")){this.scene.insertElement(e);try{return await this.initializeImage({imageFile:t,imageElement:e,showCursorImagePreview:n})}catch(r){return DK(e,{isDeleted:!0}),this.actionManager.executeAction(x8),this.setState({errorMessage:r.message||y6("errors.imageInsertError")}),null}}else this.setState({errorMessage:y6("errors.imageToolNotSupported")})}),XM(this,"setImagePreviewCursor",async e=>{let t;try{t=await OQ(e,{maxWidthOrHeight:96})}catch(r){throw"UNSUPPORTED"===r.cause?new Error(y6("errors.unsupportedFileType")):r}let n=await NQ(t);if(e.type===lN.svg){let e=await JY(n),t=Math.min(e.height,96),r=t*(e.width/e.height);r>96&&(r=96,t=r*(e.height/e.width));let i=document.createElement("canvas");i.height=t,i.width=r,i.getContext("2d").drawImage(e,0,0,r,t),n=i.toDataURL(lN.svg)}this.state.pendingImageElementId&&TG(this.interactiveCanvas,`url(${n}) 4 4, auto`)}),XM(this,"onImageAction",async({insertOnCanvasDirectly:e})=>{try{let t=this.state.width/2+this.state.offsetLeft,n=this.state.height/2+this.state.offsetTop,{x:r,y:i}=EL({clientX:t,clientY:n},this.state),s=await VY({description:"Image",extensions:Object.keys(oN)}),a=this.createImageElement({sceneX:r,sceneY:i,addToFrameUnderCursor:!1});e?(this.insertImageElement(a,s),this.initializeImageDimensions(a),this.setState({selectedElementIds:jK({[a.id]:!0},this.state)},()=>{this.actionManager.executeAction(x8)})):this.setState({pendingImageElementId:a.id},()=>{this.insertImageElement(a,s,!0)})}catch(t){t.name,this.setState({pendingImageElementId:null,newElement:null,activeTool:wL(this.state,{type:"selection"})},()=>{this.actionManager.executeAction(x8)})}}),XM(this,"initializeImageDimensions",(e,t=!1)=>{let n=dO(e)&&this.imageCache.get(e.fileId)?.image;if(!n||n instanceof Promise){if(e.width<CA/this.state.zoom.value&&e.height<CA/this.state.zoom.value){let t=100/this.state.zoom.value;DK(e,{x:e.x-t/2,y:e.y-t/2,width:t,height:t})}}else if(t||e.width<CA/this.state.zoom.value&&e.height<CA/this.state.zoom.value){let t=Math.max(this.state.height-120,160),r=Math.min(t,Math.floor(.5*this.state.height)/this.state.zoom.value),i=Math.min(n.naturalHeight,r),s=i*(n.naturalWidth/n.naturalHeight),a=e.x+e.width/2-s/2,o=e.y+e.height/2-i/2;DK(e,{x:a,y:o,width:s,height:i,crop:null})}}),XM(this,"updateImageCache",async(e,t=this.files)=>{let{updatedFiles:n,erroredFiles:r}=await eq({imageCache:this.imageCache,fileIds:e.map(e=>e.fileId),files:t});if(n.size||r.size)for(let i of e)n.has(i.fileId)&&UF.delete(i);return r.size&&this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().map(e=>dO(e)&&r.has(e.fileId)?LK(e,{status:"error"}):e)),{updatedFiles:n,erroredFiles:r}}),XM(this,"addNewImagesToImageCache",async(e=tq(this.scene.getNonDeletedElements()),t=this.files)=>{let n=e.filter(e=>!e.isDeleted&&!this.imageCache.has(e.fileId));if(n.length){let{updatedFiles:e}=await this.updateImageCache(n,t);e.size&&this.scene.triggerUpdate()}}),XM(this,"scheduleImageRefresh",uR(()=>{this.addNewImagesToImageCache()},500)),XM(this,"updateBindingEnabledOnPointerMove",e=>{let t=(e=>!e[$$.CTRL_OR_CMD])(e);this.state.isBindingEnabled!==t&&this.setState({isBindingEnabled:t})}),XM(this,"maybeSuggestBindingAtCursor",(e,t)=>{let n=FX(e,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,!1,t);this.setState({suggestedBindings:null!=n?[n]:[]})}),XM(this,"maybeSuggestBindingsForLinearElementAtCoords",(e,t,n)=>{if(!t.length)return;let r=t.reduce((t,r)=>{let i=FX(r,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,SO(e),SO(e));return null!=i&&!DX(e,n?.id,i)&&t.push(i),t},[]);this.setState({suggestedBindings:r})}),XM(this,"handleInteractiveCanvasRef",e=>{null!==e?(this.interactiveCanvas=e,this.interactiveCanvas.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.interactiveCanvas.addEventListener("touchend",this.onTouchEnd)):(this.interactiveCanvas?.removeEventListener("touchstart",this.onTouchStart),this.interactiveCanvas?.removeEventListener("touchend",this.onTouchEnd))}),XM(this,"handleAppOnDrop",async e=>{let{file:t,fileHandle:n}=await(async e=>{let t=e.dataTransfer.files.item(0),n=await BQ(e);return{file:t?await WQ(t):null,fileHandle:n}})(e),{x:r,y:i}=EL(e,this.state);try{if(IQ(t)&&this.isToolSupported("image")){if(t?.type===lN.png||t?.type===lN.svg)try{let e=await TQ(t,this.state,this.scene.getElementsIncludingDeleted(),n);return void this.syncActionResult({...e,appState:{...e.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:bY})}catch(a){if("EncodingError"!==a.name)throw new Error(y6("alerts.couldNotLoadInvalidFile"))}let e=this.createImageElement({sceneX:r,sceneY:i});return this.insertImageElement(e,t),this.initializeImageDimensions(e),void this.setState({selectedElementIds:jK({[e.id]:!0},this.state)})}}catch(o){return this.setState({isLoading:!1,errorMessage:o.message})}let s=e.dataTransfer.getData(lN.excalidrawlib);if(s&&"string"==typeof s)try{let t=RQ(s);this.addElementsFromPasteOrLibrary({elements:O7(t),position:e,files:null})}catch(o){this.setState({errorMessage:o.message})}else if(t&&await this.loadFileToCanvas(t,n),e.dataTransfer?.types?.includes("text/plain")){let t=e.dataTransfer?.getData("text");if(t&&HY(t,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(t)||"video"===FY(t)?.type)){let e=this.insertEmbeddableElement({sceneX:r,sceneY:i,link:vG(t)});e&&this.setState({selectedElementIds:{[e.id]:!0}})}}}),XM(this,"loadFileToCanvas",async(e,t)=>{e=await WQ(e);try{let r,i=this.scene.getElementsIncludingDeleted();try{r=await jQ(e,this.state,i,t)}catch(n){let e=n instanceof EH;if(e&&"IMAGE_NOT_CONTAINS_SCENE_DATA"===n.code&&!this.isToolSupported("image"))return void this.setState({isLoading:!1,errorMessage:y6("errors.imageToolNotSupported")});let t=y6(e?"alerts.cannotRestoreFromImage":"alerts.couldNotLoadInvalidFile");this.setState({isLoading:!1,errorMessage:t})}if(!r)return;r.type===lN.excalidraw?(iY(i.concat(r.data.elements)),this.store.updateSnapshot(DL(i),this.state),this.setState({isLoading:!0}),this.syncActionResult({...r.data,appState:{...r.data.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:bY})):r.type===lN.excalidrawlib&&await this.library.updateLibrary({libraryItems:e,merge:!0,openLibraryMenu:!0}).catch(e=>{this.setState({errorMessage:y6("errors.importLibraryError")})})}catch(r){this.setState({isLoading:!1,errorMessage:r.message})}}),XM(this,"handleCanvasContextMenu",e=>{if(e.preventDefault(),("pointerType"in e.nativeEvent&&"touch"===e.nativeEvent.pointerType||"pointerType"in e.nativeEvent&&"pen"===e.nativeEvent.pointerType&&e.button!==LA)&&"selection"!==this.state.activeTool.type)return;let{x:t,y:n}=EL(e,this.state),r=this.getElementAtPosition(t,n,{preferSelected:!0,includeLockedElements:!0}),i=this.scene.getSelectedElements(this.state),s=this.isHittingCommonBoundingBoxOfSelectedElements({x:t,y:n},i),a=r||s?"element":"canvas",o=this.excalidrawContainerRef.current,{top:l,left:c}=o.getBoundingClientRect(),d=e.clientX-c,u=e.clientY-l;Z6("contextMenu","openContextMenu",a),this.setState({...r&&!this.state.selectedElementIds[r.id]?{...this.state,...SV({editingGroupId:this.state.editingGroupId,selectedElementIds:{[r.id]:!0}},this.scene.getNonDeletedElements(),this.state,this),selectedLinearElement:vO(r)?new eG(r):null}:this.state,showHyperlinkPopup:!1},()=>{this.setState({contextMenu:{top:u,left:d,items:this.getContextMenuItems(a)}})})}),XM(this,"maybeDragNewGenericElement",(e,t,n=!0)=>{let r=this.state.selectionElement,i=e.lastCoords;if(r&&"eraser"!==this.state.activeTool.type)return void UQ({newElement:r,elementType:this.state.activeTool.type,originX:e.origin.x,originY:e.origin.y,x:i.x,y:i.y,width:vL(e.origin.x,i.x),height:vL(e.origin.y,i.y),shouldMaintainAspectRatio:Y$(t),shouldResizeFromCenter:G$(t),zoom:this.state.zoom.value,informMutation:n});let s=this.state.newElement;if(!s)return;let[a,o]=qV(i.x,i.y,t[$$.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),l=dO(s)&&this.imageCache.get(s.fileId)?.image,c=!l||l instanceof Promise?null:l.width/l.height;this.maybeCacheReferenceSnapPoints(t,[s]);let{snapOffset:d,snapLines:u}=((e,t,n,r,i,s)=>{if(!FV({event:n,selectedElements:[e],app:t}))return{snapOffset:{x:0,y:0},snapLines:[]};let a=[PD(r.x+i.x,r.y+i.y)],o=NV(t.state.zoom.value),l={x:o,y:o},c=[],d=[];$V([e],a,t,n,c,d,l);let u={x:c[0]?.offset??0,y:d[0]?.offset??0};l.x=0,l.y=0,c.length=0,d.length=0;let h=zV([e],s,{boundingBoxCorners:!0,omitCenter:!0});return $V([e],h,t,n,c,d,l),{snapOffset:u,snapLines:VV(c,d)}})(s,this,t,{x:e.originInGrid.x+(this.state.originSnapOffset?.x??0),y:e.originInGrid.y+(this.state.originSnapOffset?.y??0)},{x:a-e.originInGrid.x,y:o-e.originInGrid.y},this.scene.getNonDeletedElementsMap());a+=d.x,o+=d.y,this.setState({snapLines:u}),UQ({newElement:s,elementType:this.state.activeTool.type,originX:e.originInGrid.x,originY:e.originInGrid.y,x:a,y:o,width:vL(e.originInGrid.x,a),height:vL(e.originInGrid.y,o),shouldMaintainAspectRatio:uO(s)?!Y$(t):Y$(t),shouldResizeFromCenter:G$(t),zoom:this.state.zoom.value,widthAspectRatio:c,originOffset:this.state.originSnapOffset,informMutation:n}),this.setState({newElement:s}),(this.state.activeTool.type===KN||this.state.activeTool.type===QN)&&this.setState({elementsToHighlight:cK(this.scene.getNonDeletedElements(),s,this.state,this.scene.getNonDeletedElementsMap())})}),XM(this,"maybeHandleCrop",(e,t)=>{if(!this.state.croppingElementId)return!1;let n=e.resize.handleType,r=e.lastCoords,[i,s]=qV(r.x-e.resize.offset.x,r.y-e.resize.offset.y,t[$$.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(n&&a&&uO(a)){let o=e.originalElements.get(a.id),l=dO(a)&&this.imageCache.get(a.fileId)?.image;if(o&&uO(o)&&l&&!(l instanceof Promise)){let[c,d]=qV(r.x,r.y,t[$$.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),u={x:c-e.originInGrid.x,y:d-e.originInGrid.y};this.maybeCacheReferenceSnapPoints(t,[a]);let{snapOffset:h,snapLines:p}=YV([a],[o],this,t,u,n);DK(a,((e,t,n,r,i,s,a)=>{let{width:o,height:l}=lW(e),c=n/o,d=r/l,u=(e.crop?.x??0)/c,h=(e.crop?.y??0)/d,p=OD(PD(i,s),PD(e.x+e.width/2,e.y+e.height/2),-e.angle);i=p[0],s=p[1];let f=e.width,m=e.height,g=e.crop??{x:0,y:0,width:n,height:r,naturalWidth:n,naturalHeight:r},b=g.height,U=g.width,y=-1===e.scale[0],x=-1===e.scale[1],v=s-e.y,w=i-e.x;t.includes("n")&&(m=bD(e.height-v,aW,x?l-h:e.height+h)),t.includes("s")&&(v=s-e.y-e.height,m=bD(e.height+v,aW,x?e.height+h:l-h)),t.includes("e")&&(w=i-e.x-e.width,f=bD(e.width+w,aW,y?e.width+u:o-u)),t.includes("w")&&(f=bD(e.width-w,aW,y?o-u:e.width+u));let S=e=>{e.height=m*d,e.width=f*c};S(g);let E=(e,t)=>{S(t),e.includes("n")&&(x||(t.y+=b-t.height)),e.includes("s")&&x&&(t.y+=b-t.height),e.includes("e")&&y&&(t.x+=U-t.width),e.includes("w")&&(y||(t.x+=U-t.width))};switch(t){case"n":if(a){let t=u+e.width/2,n=o-u-e.width/2,r=2*Math.min(t,n);f=bD(m*a,aW,r),m=f/a}E(t,g),a&&(g.x+=(U-g.width)/2);break;case"s":if(a){let t=u+e.width/2,n=o-u-e.width/2,r=2*Math.min(t,n);f=bD(m*a,aW,r),m=f/a}E(t,g),a&&(g.x+=(U-g.width)/2);break;case"w":if(a){let t=h+e.height/2,n=l-h-e.height/2,r=2*Math.min(t,n);m=bD(f/a,aW,r),f=m*a}E(t,g),a&&(g.y+=(b-g.height)/2);break;case"e":if(a){let t=h+e.height/2,n=l-h-e.height/2,r=2*Math.min(t,n);m=bD(f/a,aW,r),f=m*a}E(t,g),a&&(g.y+=(b-g.height)/2);break;case"ne":if(a)if(w>-v){let t=x?l-h:h+e.height;m=bD(f/a,aW,t),f=m*a}else{let t=y?u+e.width:o-u;f=bD(m*a,aW,t),m=f/a}E(t,g);break;case"nw":if(a)if(w<v){let t=x?l-h:h+e.height;m=bD(f/a,aW,t),f=m*a}else{let t=y?o-u:u+e.width;f=bD(m*a,aW,t),m=f/a}E(t,g);break;case"se":if(a)if(w>v){let t=x?h+e.height:l-h;m=bD(f/a,aW,t),f=m*a}else{let t=y?u+e.width:o-u;f=bD(m*a,aW,t),m=f/a}E(t,g);break;case"sw":if(a)if(-w>v){let t=x?h+e.height:l-h;m=bD(f/a,aW,t),f=m*a}else{let t=y?o-u:u+e.width;f=bD(m*a,aW,t),m=f/a}E(t,g)}let k=oW(e,t,f,m,!!a);return vD(g.width,g.naturalWidth)&&vD(g.height,g.naturalHeight)&&(g=null),{x:k[0],y:k[1],width:f,height:m,crop:g}})(a,n,l.naturalWidth,l.naturalHeight,i+h.x,s+h.y,t.shiftKey?o.width/o.height:void 0)),$X(a,this.scene.getNonDeletedElementsMap(),{newSize:{width:a.width,height:a.height}}),this.setState({isCropping:n&&"rotation"!==n,snapLines:p})}return!0}return!1}),XM(this,"maybeHandleResize",(e,t)=>{let n=this.scene.getSelectedElements(this.state),r=n.filter(e=>UO(e)),i=e.resize.handleType;if(r.length>0&&"rotation"===i||1===n.length&&SO(n[0])||this.state.croppingElementId)return!1;this.setState({isResizing:i&&"rotation"!==i,isRotating:"rotation"===i,activeEmbeddable:null});let s=e.lastCoords,[a,o]=qV(s.x-e.resize.offset.x,s.y-e.resize.offset.y,t[$$.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),l=new Map;if(r.forEach(e=>{aK(this.scene.getNonDeletedElements(),e.id).forEach(t=>{l.set(e.id+t.id,{x:t.x-e.x,y:t.y-e.y})})}),!this.state.selectedElementsAreBeingDragged){let[r,l]=qV(s.x,s.y,t[$$.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),c={x:r-e.originInGrid.x,y:l-e.originInGrid.y},d=[...e.originalElements.values()];this.maybeCacheReferenceSnapPoints(t,n);let{snapOffset:u,snapLines:h}=YV(n,MK(d,this.state),this,t,c,i);a+=u.x,o+=u.y,this.setState({snapLines:h})}if(((e,t,n,r,i,s,a,o,l,c,d,u)=>{if(1===n.length){let[d]=n;if("rotation"===t)SO(d)||(oQ(d,r,i,l,c,s),$X(d,r));else{if(mO(d)&&t)return dQ(e,d,r,t,a,l,c),$X(d,r),!0;if(t){let i=n[0].id,s=r.get(i),d=e.get(i);if(s&&d){let{nextWidth:n,nextHeight:i}=pQ(s,d,r,e,t,l,c,{shouldMaintainAspectRatio:o,shouldResizeFromCenter:a});hQ(n,i,s,d,r,e,t,{shouldMaintainAspectRatio:o,shouldResizeFromCenter:a})}}}return!0}if(n.length>1){if("rotation"===t)return uQ(e,n,r,i,l,c,s,d,u),!0;if(t){let{nextWidth:s,nextHeight:d,flipByX:u,flipByY:h,originalBoundingBox:p}=fQ(n,e,r,t,l,c,{shouldMaintainAspectRatio:o,shouldResizeFromCenter:a});return mQ(n,r,t,i,e,{shouldResizeFromCenter:a,shouldMaintainAspectRatio:o,flipByX:u,flipByY:h,nextWidth:s,nextHeight:d,originalBoundingBox:p}),!0}}return!1})(e.originalElements,i,n,this.scene.getElementsMapIncludingDeleted(),this.scene,q$(t),G$(t),n.some(e=>uO(e))?!Y$(t):Y$(t),a,o,e.resize.center.x,e.resize.center.y)){let e=TX(n,this.scene.getNonDeletedElementsMap(),this.state.zoom),t=new Set;return r.forEach(e=>{cK(this.scene.getNonDeletedElements(),e,this.state,this.scene.getNonDeletedElementsMap()).forEach(e=>t.add(e))}),this.setState({elementsToHighlight:[...t],suggestedBindings:e}),!0}return!1}),XM(this,"getContextMenuItems",e=>{let t=[];return t.push(s7,i7),"canvas"===e?this.state.viewModeEnabled?[...t,o7,l7,yne,d7]:[n7,M9,s7,i7,a7,M9,W6,M7,M9,o7,c7,l7,yne,d7]:(t.push(a7),this.state.viewModeEnabled?[t7,...t]:[M9,r7,t7,n7,M9,vne,wne,Sne,M9,g9,M9,...t,M9,D8,L8,M9,z8,ure,u7,h7,m7,B8,M9,X8,M9,z6,B6,H6,$6,M9,K8,Q8,M9,f9,M9,k7,e9,M9,G6,_7,M9,_6])}),XM(this,"handleWheel",Rne(e=>{if(!(e.target instanceof HTMLCanvasElement||e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLIFrameElement))return void(e[$$.CTRL_OR_CMD]&&e.preventDefault());if(e.preventDefault(),Nre)return;let{deltaX:t,deltaY:n}=e;if(e.metaKey||e.ctrlKey){let e=Math.sign(n),t=10,r=Math.abs(n),i=n;r>t&&(i=t*e);let s=this.state.zoom.value-i/100;return s+=Math.log10(Math.max(1,this.state.zoom.value))*-e*Math.min(1,r/20),this.translateCanvas(e=>({...l8({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:yV(s)},e),shouldCacheIgnoreZoom:!0})),void this.resetShouldCacheIgnoreZoomDebounced()}e.shiftKey?this.translateCanvas(({zoom:e,scrollX:r})=>({scrollX:r-(n||t)/e.value})):this.translateCanvas(({zoom:e,scrollX:r,scrollY:i})=>({scrollX:r-t/e.value,scrollY:i-n/e.value}))})),XM(this,"savePointer",(e,t,n)=>{if(!e||!t)return;let{x:r,y:i}=EL({clientX:e,clientY:t},this.state),s={x:r,y:i,tool:"laser"===this.state.activeTool.type?"laser":"pointer"};this.props.onPointerUpdate?.({pointer:s,button:n,pointersMap:Xre.pointers})}),XM(this,"resetShouldCacheIgnoreZoomDebounced",bL(()=>{this.unmounted||this.setState({shouldCacheIgnoreZoom:!1})},300)),XM(this,"updateDOMRect",e=>{if(this.excalidrawContainerRef?.current){let t=this.excalidrawContainerRef.current,{width:n,height:r,left:i,top:s}=t.getBoundingClientRect(),{width:a,height:o,offsetTop:l,offsetLeft:c}=this.state;if(n===a&&r===o&&i===c&&s===l)return void(e&&e());this.setState({width:n,height:r,offsetLeft:i,offsetTop:s},()=>{e&&e()})}}),XM(this,"refresh",()=>{this.setState({...this.getCanvasOffsets()})});let i=hD(),{excalidrawAPI:s,viewModeEnabled:a=!1,zenModeEnabled:o=!1,gridModeEnabled:l=!1,objectsSnapModeEnabled:c=!1,theme:d=i.theme,name:u=`${y6("labels.untitled")}-${uL()}`}=r;if(this.state={...i,theme:d,isLoading:!0,...this.getCanvasOffsets(),viewModeEnabled:a,zenModeEnabled:o,objectsSnapModeEnabled:c,gridModeEnabled:l??i.gridModeEnabled,name:u,width:window.innerWidth,height:window.innerHeight},this.id=oR(),this.library=new L7(this),this.actionManager=new S9(this.syncActionResult,()=>this.state,()=>this.scene.getElementsIncludingDeleted(),this),this.scene=new NK,this.canvas=document.createElement("canvas"),this.rc=wP.canvas(this.canvas),this.renderer=new tre(this.scene),this.visibleElements=[],this.store=new vY,this.history=new U9,s){let e={updateScene:this.updateScene,updateLibrary:this.library.updateLibrary,addFiles:this.addFiles,resetScene:this.resetScene,getSceneElementsIncludingDeleted:this.getSceneElementsIncludingDeleted,history:{clear:this.resetHistory},scrollToContent:this.scrollToContent,getSceneElements:this.getSceneElements,getAppState:()=>this.state,getFiles:()=>this.files,getName:this.getName,registerAction:e=>{this.actionManager.registerAction(e)},refresh:this.refresh,setToast:this.setToast,id:this.id,setActiveTool:this.setActiveTool,setCursor:this.setCursor,resetCursor:this.resetCursor,updateFrameRendering:this.updateFrameRendering,toggleSidebar:this.toggleSidebar,onChange:e=>this.onChangeEmitter.on(e),onPointerDown:e=>this.onPointerDownEmitter.on(e),onPointerUp:e=>this.onPointerUpEmitter.on(e),onScrollChange:e=>this.onScrollChangeEmitter.on(e),onUserFollow:e=>this.onUserFollowEmitter.on(e)};"function"==typeof s&&s(e)}this.excalidrawContainerValue={container:this.excalidrawContainerRef.current,id:this.id},this.fonts=new KH(this.scene),this.history=new U9,this.actionManager.registerAll(EG),this.actionManager.registerAction(((t,n)=>({name:"undo",label:"buttons.undo",icon:mz,trackEvent:{category:"history"},viewMode:!1,perform:(e,r,i,s)=>v9(s,r,()=>t.undo(DL(e),r,n.snapshot)),keyTest:e=>e[$$.CTRL_OR_CMD]&&X$(e,$$.Z)&&!e.shiftKey,PanelComponent:({updateData:n,data:r})=>{let{isUndoStackEmpty:i}=x9(t.onHistoryChangedEmitter,new b9(t.isUndoStackEmpty,t.isRedoStackEmpty));return e.jsx(k6,{type:"button",icon:mz,"aria-label":y6("buttons.undo"),onClick:n,size:r?.size||"medium",disabled:i,"data-testid":"button-undo"})}}))(this.history,this.store)),this.actionManager.registerAction(((t,n)=>({name:"redo",label:"buttons.redo",icon:gz,trackEvent:{category:"history"},viewMode:!1,perform:(e,r,i,s)=>v9(s,r,()=>t.redo(DL(e),r,n.snapshot)),keyTest:e=>e[$$.CTRL_OR_CMD]&&e.shiftKey&&X$(e,$$.Z)||xA&&e.ctrlKey&&!e.shiftKey&&X$(e,$$.Y),PanelComponent:({updateData:n,data:r})=>{let{isRedoStackEmpty:i}=x9(t.onHistoryChangedEmitter,new b9(t.isUndoStackEmpty,t.isRedoStackEmpty));return e.jsx(k6,{type:"button",icon:gz,"aria-label":y6("buttons.redo"),onClick:n,size:r?.size||"medium",disabled:i,"data-testid":"button-redo"})}}))(this.history,this.store))}onWindowMessage(e){if("https://player.vimeo.com"!==e.origin&&"https://www.youtube.com"!==e.origin)return;let t=null;try{t=JSON.parse(e.data)}catch{}if(t)switch(e.origin){case"https://player.vimeo.com":if("paused"===t.method){let n=null,r=document.body.querySelectorAll("iframe.excalidraw__embeddable");if(!r)break;for(let t of r)t.contentWindow===e.source&&(n=t.contentWindow);n?.postMessage(JSON.stringify({method:t.value?"play":"pause",value:!0}),"*")}break;case"https://www.youtube.com":if("infoDelivery"===t.event&&t.info&&t.id&&"number"==typeof t.info.playerState){let e=t.id,n=t.info.playerState;Object.values(HA).includes(n)&&zre.set(e,n)}}}cacheEmbeddableRef(e,t){t&&this.iFrameRefs.set(e.id,t)}getHTMLIFrameElement(e){return this.iFrameRefs.get(e.id)}handleEmbeddableCenterClick(e){if(this.state.activeEmbeddable?.element===e&&"active"===this.state.activeEmbeddable?.state||(setTimeout(()=>{this.setState({activeEmbeddable:{element:e,state:"active"},selectedElementIds:{[e.id]:!0},newElement:null,selectionElement:null})},100),pO(e)))return;let t=this.getHTMLIFrameElement(e);if(t?.contentWindow){if(t.src.includes("youtube")){let n=zre.get(e.id);switch(n||(zre.set(e.id,HA.UNSTARTED),t.contentWindow.postMessage(JSON.stringify({event:"listening",id:e.id}),"*")),n){case HA.PLAYING:case HA.BUFFERING:t.contentWindow?.postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:""}),"*");break;default:t.contentWindow?.postMessage(JSON.stringify({event:"command",func:"playVideo",args:""}),"*")}}t.src.includes("player.vimeo.com")&&t.contentWindow.postMessage(JSON.stringify({method:"paused"}),"*")}}isIframeLikeElementCenter(e,t,n,r){return e&&!t.altKey&&!t.shiftKey&&!t.metaKey&&!t.ctrlKey&&(this.state.activeEmbeddable?.element!==e||"hover"===this.state.activeEmbeddable?.state||!this.state.activeEmbeddable)&&n>=e.x+e.width/3&&n<=e.x+2*e.width/3&&r>=e.y+e.height/3&&r<=e.y+2*e.height/3}renderEmbeddables(){let t=this.state.zoom.value,n=this.state.width,r=this.state.height,i=this.scene.getNonDeletedElements().filter(e=>hO(e)&&!0===this.embedsValidationStatus.get(e.id)||pO(e));return e.jsx(e.Fragment,{children:i.map(i=>{let s,{x:a,y:o}=kL({sceneX:i.x,sceneY:i.y},this.state),l=zK(i,n,r,this.state,this.scene.getNonDeletedElementsMap()),c=this.initializedEmbeds.has(i.id);if(l&&!c&&this.initializedEmbeds.add(i.id),!l&&!c)return null;if(pO(i)){s=null;let e=(i.customData?.generationData??this.magicGenerations.get(i.id))||{status:"error",message:"No generation data",code:"ERR_NO_GENERATION_DATA"};if("done"===e.status){let t=e.html;s={intrinsicSize:{w:i.width,h:i.height},type:"document",srcdoc:()=>t}}else if("pending"===e.status)s={intrinsicSize:{w:i.width,h:i.height},type:"document",srcdoc:()=>OY(`\n                    <style>\n                      html, body {\n                        width: 100%;\n                        height: 100%;\n                        color: ${this.state.theme===eN?"white":"black"};\n                      }\n                      body {\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        flex-direction: column;\n                        gap: 1rem;\n                      }\n\n                      .Spinner {\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        margin-left: auto;\n                        margin-right: auto;\n                      }\n\n                      .Spinner svg {\n                        animation: rotate 1.6s linear infinite;\n                        transform-origin: center center;\n                        width: 40px;\n                        height: 40px;\n                      }\n\n                      .Spinner circle {\n                        stroke: currentColor;\n                        animation: dash 1.6s linear 0s infinite;\n                        stroke-linecap: round;\n                      }\n\n                      @keyframes rotate {\n                        100% {\n                          transform: rotate(360deg);\n                        }\n                      }\n\n                      @keyframes dash {\n                        0% {\n                          stroke-dasharray: 1, 300;\n                          stroke-dashoffset: 0;\n                        }\n                        50% {\n                          stroke-dasharray: 150, 300;\n                          stroke-dashoffset: -200;\n                        }\n                        100% {\n                          stroke-dasharray: 1, 300;\n                          stroke-dashoffset: -280;\n                        }\n                      }\n                    </style>\n                    <div class="Spinner">\n                      <svg\n                        viewBox="0 0 100 100"\n                      >\n                        <circle\n                          cx="50"\n                          cy="50"\n                          r="46"\n                          stroke-width="8"\n                          fill="none"\n                          stroke-miter-limit="10"\n                        />\n                      </svg>\n                    </div>\n                    <div>Generating...</div>\n                  `)};else{let t;t="ERR_GENERATION_INTERRUPTED"===e.code?"Generation was interrupted...":e.message||"Generation failed",s={intrinsicSize:{w:i.width,h:i.height},type:"document",srcdoc:()=>OY(`\n                    <style>\n                    html, body {\n                      height: 100%;\n                    }\n                      body {\n                        display: flex;\n                        flex-direction: column;\n                        align-items: center;\n                        justify-content: center;\n                        color: ${hA.red[3]};\n                      }\n                      h1, h3 {\n                        margin-top: 0;\n                        margin-bottom: 0.5rem;\n                      }\n                    </style>\n                    <h1>Error!</h1>\n                    <h3>${t}</h3>\n                  `)}}}else s=FY(SG(i.link||""));let d=this.state.activeEmbeddable?.element===i&&"active"===this.state.activeEmbeddable?.state,u=this.state.activeEmbeddable?.element===i&&"hover"===this.state.activeEmbeddable?.state;return e.jsx("div",{className:BP("excalidraw__embeddable-container",{"is-hovered":u}),style:{transform:l?`translate(${a-this.state.offsetLeft}px, ${o-this.state.offsetTop}px) scale(${t})`:"none",display:l?"block":"none",opacity:mW(i,uK(i,this.scene.getNonDeletedElementsMap()),this.elementsPendingErasure,null,"elementLinkSelector"===this.state.openDialog?.name?.3:1),"--embeddable-radius":`${iW(Math.min(i.width,i.height),i)}px`},children:e.jsxs("div",{className:"excalidraw__embeddable-container__inner",style:{width:l?`${i.width}px`:0,height:l?`${i.height}px`:0,transform:l?`rotate(${i.angle}rad)`:"none",pointerEvents:d?zA:BA},children:[u&&e.jsx("div",{className:"excalidraw__embeddable-hint",children:y6("buttons.embeddableInteractionButton")}),e.jsx("div",{className:"excalidraw__embeddable__outer",style:{padding:`${i.strokeWidth}px`},children:(hO(i)?this.props.renderEmbeddable?.(i,this.state):null)??e.jsx("iframe",{ref:e=>this.cacheEmbeddableRef(i,e),className:"excalidraw__embeddable",srcDoc:"document"===s?.type?s.srcdoc(this.state.theme):void 0,src:"document"!==s?.type?s?.link??"":void 0,scrolling:"no",referrerPolicy:"no-referrer-when-downgrade",title:"Excalidraw Embedded Content",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,sandbox:(s?.sandbox?.allowSameOrigin?"allow-same-origin":"")+" allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation allow-downloads"})})]})},i.id)})})}toggleOverscrollBehavior(e){document.documentElement.style.overscrollBehaviorX="pointerenter"===e.type?"none":"auto"}render(){let t=this.scene.getSelectedElements(this.state),{renderTopRightUI:n,renderCustomStats:r}=this.props,i=this.scene.getSceneNonce(),{elementsMap:s,visibleElements:a}=this.renderer.getRenderableElements({sceneNonce:i,zoom:this.state.zoom,offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,height:this.state.height,width:this.state.width,editingTextElement:this.state.editingTextElement,newElementId:this.state.newElement?.id,pendingImageElementId:this.state.pendingImageElementId});this.visibleElements=a;let o=this.scene.getNonDeletedElementsMap(),l=!("setPointerCapture"in HTMLElement.prototype)&&(this.state.selectionElement||this.state.newElement||this.state.selectedElementsAreBeingDragged||this.state.resizingElement||"laser"===this.state.activeTool.type&&"down"===this.state.cursorButton),c=t[0];return e.jsx("div",{className:BP("excalidraw excalidraw-container",{"excalidraw--view-mode":this.state.viewModeEnabled||"elementLinkSelector"===this.state.openDialog?.name,"excalidraw--mobile":this.device.editor.isMobile}),style:{"--ui-pointerEvents":l?BA:zA,"--right-sidebar-width":"302px"},ref:this.excalidrawContainerRef,onDrop:this.handleAppOnDrop,tabIndex:0,onKeyDown:this.props.handleKeyboardGlobally?void 0:this.onKeyDown,onPointerEnter:this.toggleOverscrollBehavior,onPointerLeave:this.toggleOverscrollBehavior,children:e.jsx(mre.Provider,{value:this,children:e.jsx(gre.Provider,{value:this.props,children:e.jsx(yre.Provider,{value:this.excalidrawContainerValue,children:e.jsx(Ure.Provider,{value:this.device,children:e.jsx(wre.Provider,{value:this.setAppState,children:e.jsx(vre.Provider,{value:this.state,children:e.jsxs(xre.Provider,{value:this.scene.getNonDeletedElements(),children:[e.jsxs(Sre.Provider,{value:this.actionManager,children:[e.jsx(bne,{canvas:this.canvas,appState:this.state,files:this.files,setAppState:this.setAppState,actionManager:this.actionManager,elements:this.scene.getNonDeletedElements(),onLockToggle:this.toggleLock,onPenModeToggle:this.togglePenMode,onHandToolToggle:this.onHandToolToggle,langCode:b6().code,renderTopRightUI:n,renderCustomStats:r,showExitZenModeBtn:typeof this.props?.zenModeEnabled>"u"&&this.state.zenModeEnabled,UIOptions:this.props.UIOptions,onExportImage:this.onExportImage,renderWelcomeScreen:!this.state.isLoading&&this.state.showWelcomeScreen&&"selection"===this.state.activeTool.type&&!this.state.zenModeEnabled&&!this.scene.getElementsIncludingDeleted().length,app:this,isCollaborating:this.props.isCollaborating,generateLinkForSelection:this.props.generateLinkForSelection,children:this.props.children}),e.jsx("div",{className:"excalidraw-textEditorContainer"}),e.jsx("div",{className:"excalidraw-contextMenuContainer"}),e.jsx("div",{className:"excalidraw-eye-dropper-container"}),e.jsx(nre,{trails:[this.laserTrails,this.eraserTrail]}),1===t.length&&"elementLinkSelector"!==this.state.openDialog?.name&&this.state.showHyperlinkPopup&&e.jsx(U7,{element:c,elementsMap:o,setAppState:this.setAppState,onLinkOpen:this.props.onLinkOpen,setToast:this.setToast,updateEmbedValidationStatus:this.updateEmbedValidationStatus},c.id),!1!==this.props.aiEnabled&&1===t.length&&bO(c)&&e.jsx(rre,{element:c,elementsMap:s,children:e.jsx(ire,{title:y6("labels.convertToCode"),icon:LB,checked:!1,onChange:()=>this.onMagicFrameGenerate(c,"button")})}),1===t.length&&pO(c)&&"done"===c.customData?.generationData?.status&&e.jsxs(rre,{element:c,elementsMap:s,children:[e.jsx(ire,{title:y6("labels.copySource"),icon:CB,checked:!1,onChange:()=>this.onIframeSrcCopy(c)}),e.jsx(ire,{title:"Enter fullscreen",icon:OB,checked:!1,onChange:()=>{let e=this.getHTMLIFrameElement(c);if(e)try{e.requestFullscreen(),this.setState({activeEmbeddable:{element:c,state:"active"},selectedElementIds:{[c.id]:!0},newElement:null,selectionElement:null})}catch(t){this.setState({errorMessage:"Couldn't enter fullscreen"})}}})]}),null!==this.state.toast&&e.jsx(Une,{message:this.state.toast.message,onClose:()=>this.setToast(null),duration:this.state.toast.duration,closable:this.state.toast.closable}),this.state.contextMenu&&e.jsx(I9,{items:this.state.contextMenu.items,top:this.state.contextMenu.top,left:this.state.contextMenu.left,actionManager:this.actionManager,onClose:e=>{this.setState({contextMenu:null},()=>{this.focusContainer(),e?.()})}}),e.jsx(ere,{canvas:this.canvas,rc:this.rc,elementsMap:s,allElementsMap:o,visibleElements:a,sceneNonce:i,selectionNonce:this.state.selectionElement?.versionNonce,scale:window.devicePixelRatio,appState:this.state,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:OV(this),canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:this.flowChartCreator.pendingNodes}}),this.state.newElement&&e.jsx(fre,{appState:this.state,scale:window.devicePixelRatio,rc:this.rc,elementsMap:s,allElementsMap:o,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:!1,canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:null}}),e.jsx(Qne,{containerRef:this.excalidrawContainerRef,canvas:this.interactiveCanvas,elementsMap:s,visibleElements:a,allElementsMap:o,selectedElements:t,sceneNonce:i,selectionNonce:this.state.selectionElement?.versionNonce,scale:window.devicePixelRatio,appState:this.state,device:this.device,renderInteractiveSceneCallback:this.renderInteractiveSceneCallback,handleCanvasRef:this.handleInteractiveCanvasRef,onContextMenu:this.handleCanvasContextMenu,onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.handleCanvasPointerUp,onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,onPointerDown:this.handleCanvasPointerDown,onDoubleClick:this.handleCanvasDoubleClick}),this.state.userToFollow&&e.jsx(sre,{width:this.state.width,height:this.state.height,userToFollow:this.state.userToFollow,onDisconnect:this.maybeUnfollowRemoteUser}),this.renderFrameNames()]}),this.renderEmbeddables()]})})})})})})})})}setPlugins(e){Object.assign(this.plugins,e)}async onMagicFrameGenerate(e,t){let n=this.plugins.diagramToCode?.generate;if(!n)return void this.setState({errorMessage:"No diagram to code plugin found"});let r=wK(this.scene.getNonDeletedElements(),e).filter(e=>!bO(e));if(!r.length)return void("button"===t?(this.setState({errorMessage:"Cannot generate from an empty frame"}),Z6("ai","generate (no-children)","d2c")):this.setActiveTool({type:"magicframe"}));let i=this.insertIframeElement({sceneX:e.x+e.width+30,sceneY:e.y,width:e.width,height:e.height});if(i){this.updateMagicGeneration({frameElement:i,data:{status:"pending"}}),this.setState({selectedElementIds:{[i.id]:!0}}),Z6("ai","generate (start)","d2c");try{let{html:t}=await n({frame:e,children:r});if(Z6("ai","generate (success)","d2c"),!t.trim())return void this.updateMagicGeneration({frameElement:i,data:{status:"error",code:"ERR_OAI",message:"Nothing genereated :("}});let s=t.includes("<!DOCTYPE html>")&&t.includes("</html>")?t.slice(t.indexOf("<!DOCTYPE html>"),t.indexOf("</html>")+7):t;this.updateMagicGeneration({frameElement:i,data:{status:"done",html:s}})}catch(s){Z6("ai","generate (failed)","d2c"),this.updateMagicGeneration({frameElement:i,data:{status:"error",code:"ERR_OAI",message:s.message||"Unknown error during generation"}})}}}onIframeSrcCopy(e){"done"===e.customData?.generationData?.status&&(HZ(e.customData.generationData.html),this.setToast({message:"copied to clipboard",closable:!1,duration:1500}))}clearImageShapeCache(e){let t=e??this.files;this.scene.getNonDeletedElements().forEach(e=>{dO(e)&&t[e.fileId]&&(this.imageCache.delete(e.fileId),UF.delete(e))})}async componentDidMount(){this.unmounted=!1,this.excalidrawContainerValue.container=this.excalidrawContainerRef.current,(BM.MODE===$A||BM.DEV)&&(this.setState.bind(this),Object.defineProperties(window.h,{state:{configurable:!0,get:()=>this.state},setState:{configurable:!0,value:(...e)=>this.setState(...e)},app:{configurable:!0,value:this},history:{configurable:!0,value:this.history},store:{configurable:!0,value:this.store},fonts:{configurable:!0,value:this.fonts}})),this.store.onStoreIncrementEmitter.on(e=>{this.history.record(e.elementsChange,e.appStateChange)}),this.scene.onUpdate(this.triggerRender),this.addEventListeners(),this.props.autoFocus&&this.excalidrawContainerRef.current&&this.focusContainer(),OL()||(this.refreshViewportBreakpoints(),this.refreshEditorBreakpoints()),kA&&this.excalidrawContainerRef.current&&(this.resizeObserver=new ResizeObserver(()=>{this.refreshEditorBreakpoints(),this.updateDOMRect()}),this.resizeObserver?.observe(this.excalidrawContainerRef.current)),new URLSearchParams(window.location.search.slice(1)).has("web-share-target")?this.restoreFileFromShare():this.updateDOMRect(this.initializeScene),"isBrave"===navigator.brave?.isBrave?.name&&!(YO(FO,gL({fontSize:nN,fontFamily:rN}))>0)&&this.setState({errorMessage:e.jsx(Ene,{})})}componentWillUnmount(){window.launchQueue?.setConsumer(()=>{}),this.renderer.destroy(),this.scene.destroy(),this.scene=new NK,this.fonts=new KH(this.scene),this.renderer=new tre(this.scene),this.files={},this.imageCache.clear(),this.resizeObserver?.disconnect(),this.unmounted=!0,this.removeEventListeners(),this.library.destroy(),this.laserTrails.stop(),this.eraserTrail.stop(),this.onChangeEmitter.clear(),this.store.onStoreIncrementEmitter.clear(),UF.destroy(),LV.destroy(),clearTimeout(Ore),_K.clearCache(),SV.clearCache(),Ore=0,document.documentElement.style.overscrollBehaviorX=""}removeEventListeners(){this.onRemoveEventListenersEmitter.trigger()}addEventListeners(){this.removeEventListeners(),this.props.handleKeyboardGlobally&&this.onRemoveEventListenersEmitter.once(QL(document,"keydown",this.onKeyDown,!1)),this.onRemoveEventListenersEmitter.once(QL(this.excalidrawContainerRef.current,"wheel",this.handleWheel,{passive:!1}),QL(window,"message",this.onWindowMessage,!1),QL(document,"pointerup",this.removePointer,{passive:!1}),QL(document,"copy",this.onCopy,{passive:!1}),QL(document,"keyup",this.onKeyUp,{passive:!0}),QL(document,"pointermove",this.updateCurrentCursorPosition,{passive:!1}),QL(document.fonts,"loadingdone",e=>{let t=e.fontfaces;this.fonts.onLoaded(t)},{passive:!1}),QL(document,"gesturestart",this.onGestureStart,!1),QL(document,"gesturechange",this.onGestureChange,!1),QL(document,"gestureend",this.onGestureEnd,!1),QL(window,"focus",()=>{this.maybeCleanupAfterMissingPointerUp(null),this.triggerRender(!0)},{passive:!1})),!this.state.viewModeEnabled&&(this.onRemoveEventListenersEmitter.once(QL(document,"fullscreenchange",this.onFullscreenChange,{passive:!1}),QL(document,"paste",this.pasteFromClipboard,{passive:!1}),QL(document,"cut",this.onCut,{passive:!1}),QL(window,"resize",this.onResize,!1),QL(window,"unload",this.onUnload,!1),QL(window,"blur",this.onBlur,!1),QL(this.excalidrawContainerRef.current,"wheel",this.handleWheel,{passive:!1}),QL(this.excalidrawContainerRef.current,"dragover",this.disableEvent,!1),QL(this.excalidrawContainerRef.current,"drop",this.disableEvent,!1)),this.props.detectScroll&&this.onRemoveEventListenersEmitter.once(QL((e=>{let t=e.parentElement;for(;t;){if(t===document.body)return document;let{overflowY:e}=window.getComputedStyle(t);if(t.scrollHeight>t.clientHeight&&("auto"===e||"scroll"===e||"overlay"===e))return t;t=t.parentElement}return document})(this.excalidrawContainerRef.current),"scroll",this.onScroll,{passive:!1})))}componentDidUpdate(e,t){this.updateEmbeddables();let n=this.scene.getElementsIncludingDeleted(),r=this.scene.getElementsMapIncludingDeleted(),i=this.scene.getNonDeletedElementsMap();!this.state.showWelcomeScreen&&!n.length&&this.setState({showWelcomeScreen:!0}),e.UIOptions.dockedSidebarBreakpoint!==this.props.UIOptions.dockedSidebarBreakpoint&&this.refreshEditorBreakpoints(),t.userToFollow&&!this.state.collaborators.has(t.userToFollow.socketId)&&this.maybeUnfollowRemoteUser(),(t.zoom.value!==this.state.zoom.value||t.scrollX!==this.state.scrollX||t.scrollY!==this.state.scrollY)&&(this.props?.onScrollChange?.(this.state.scrollX,this.state.scrollY,this.state.zoom),this.onScrollChangeEmitter.trigger(this.state.scrollX,this.state.scrollY,this.state.zoom)),t.userToFollow!==this.state.userToFollow&&(t.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:t.userToFollow,action:"UNFOLLOW"}),this.state.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:this.state.userToFollow,action:"FOLLOW"})),Object.keys(this.state.selectedElementIds).length&&mD(this.state)&&this.setState({activeTool:wL(this.state,{type:"selection"})}),"eraser"===this.state.activeTool.type&&t.theme!==this.state.theme&&RG(this.interactiveCanvas,this.state.theme),"selection"===t.activeTool.type&&"selection"!==this.state.activeTool.type&&this.state.showHyperlinkPopup&&this.setState({showHyperlinkPopup:!1}),e.langCode!==this.props.langCode&&this.updateLanguage(),mD(t)&&!mD(this.state)&&this.eraserTrail.endPath(),e.viewModeEnabled!==this.props.viewModeEnabled&&this.setState({viewModeEnabled:!!this.props.viewModeEnabled}),t.viewModeEnabled!==this.state.viewModeEnabled&&(this.addEventListeners(),this.deselectElements()),("elementLinkSelector"===t.openDialog?.name||"elementLinkSelector"===this.state.openDialog?.name)&&t.openDialog?.name!==this.state.openDialog?.name&&(this.deselectElements(),this.setState({hoveredElementIds:{}})),e.zenModeEnabled!==this.props.zenModeEnabled&&this.setState({zenModeEnabled:!!this.props.zenModeEnabled}),e.theme!==this.props.theme&&this.props.theme&&this.setState({theme:this.props.theme}),this.excalidrawContainerRef.current?.classList.toggle("theme--dark",this.state.theme===eN),this.state.editingLinearElement&&!this.state.selectedElementIds[this.state.editingLinearElement.elementId]&&setTimeout(()=>{this.state.editingLinearElement&&this.actionManager.executeAction(x8)}),this.state.editingTextElement?.isDeleted&&this.setState({editingTextElement:null}),this.state.selectedLinearElement&&!this.state.selectedElementIds[this.state.selectedLinearElement.elementId]&&this.setState({selectedLinearElement:null});let{multiElement:s}=t;t.activeTool!==this.state.activeTool&&null!=s&&CX(this.state)&&kO(s,!1)&&RX(s,this.state,IL(eG.getPointAtIndexGlobalCoordinates(s,-1,i)),this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements()),this.store.commit(r,this.state),this.state.isLoading||(this.props.onChange?.(n,this.state,this.files),this.onChangeEmitter.trigger(n,this.state,this.files))}static resetTapTwice(){Rre=!1}async addElementsFromMixedContentPaste(e,{isPlainPaste:t,sceneX:n,sceneY:r}){if(!t&&e.some(e=>"imageUrl"===e.type)&&this.isToolSupported("image")){let t=e.filter(e=>"imageUrl"===e.type).map(e=>e.value),i=await Promise.all(t.map(async e=>{try{return{file:await zQ(e)}}catch(t){let e=t.message;return"FETCH_ERROR"===t.cause?e=y6("errors.failedToFetchImage"):"UNSUPPORTED"===t.cause&&(e=y6("errors.unsupportedFileType")),{errorMessage:e}}})),s=r,a=!1,o={};for(let e of i)if(e.file){let t=this.createImageElement({sceneX:n,sceneY:s}),r=await this.insertImageElement(t,e.file);r&&(a||(a=!0,s-=r.height/2),DK(r,{y:s},!1),s=t.y+t.height+25,o[t.id]=!0)}this.setState({selectedElementIds:jK(o,this.state)});let l=i.find(e=>!!e.errorMessage);l&&l.errorMessage&&this.setState({errorMessage:l.errorMessage})}else{let n=e.filter(e=>"text"===e.type);n.length&&this.addTextFromPaste(n.map(e=>e.value).join("\n\n"),t)}}addTextFromPaste(e,t=!1){let{x:n,y:r}=EL({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),i={x:n,y:r,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roundness:null,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:e,fontSize:this.state.currentItemFontSize,fontFamily:this.state.currentItemFontFamily,textAlign:iN,verticalAlign:sN,locked:!1},s=gL({fontSize:i.fontSize,fontFamily:i.fontFamily}),a=JH(i.fontFamily),[o,,l]=(({scrollX:e,scrollY:t,width:n,height:r,zoom:i})=>[-e,-t,-e+n/i.value,-t+r/i.value])(this.state),c=Math.max(Math.min(.5*(l-o),800),200),d=r,u=t?[e]:e.split("\n"),h=u.reduce((e,t,r)=>{let o=HO(t).trim();if(o.length){let t=this.getTopLayerFrameAtSceneCoords({x:n,y:d}),r=OO(o,s,a),l=r.width>c,u=l?uF(o,s,c):o;r=l?OO(u,s,a):r;let h=n-r.width/2,p=d-r.height/2,f=WG({...i,x:h,y:p,text:u,originalText:o,lineHeight:a,autoResize:!l,frameId:t?t.id:null});e.push(f),d+=f.height+10}else u[r-1]?.trim()&&(d+=WO(i.fontSize,a)+10);return e},[]);0!==h.length&&(this.scene.insertElements(h),this.setState({selectedElementIds:jK(Object.fromEntries(h.map(e=>[e.id,!0])),this.state)}),!t&&h.length>1&&!1===$re&&!this.device.editor.isMobile&&(this.setToast({message:y6("toast.pasteAsSingleElement",{shortcut:SL("CtrlOrCmd+Shift+V")}),duration:5e3}),$re=!0),this.store.shouldCaptureIncrement())}handleTextWysiwyg(e,{isExistingElement:n=!1}){let r=this.scene.getElementsMapIncludingDeleted(),i=(t,n)=>{this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted().map(i=>i.id===e.id&&mO(i)?LK(i,{originalText:t,isDeleted:n??i.isDeleted,...VG(i,uG(i,r),r,t)}):i)])};dre({id:e.id,canvas:this.canvas,getViewportCoords:(e,t)=>{let{x:n,y:r}=kL({sceneX:e,sceneY:t},this.state);return[n-this.state.offsetLeft,r-this.state.offsetTop]},onChange:Rne(t=>{i(t,!1),SQ(e)&&$X(e,this.scene.getNonDeletedElementsMap())}),onSubmit:Rne(({viaKeyboard:r,nextOriginalText:s})=>{let a=!s.trim();if(i(s,a),!a&&r){let n=e.containerId?e.containerId:e.id;t.flushSync(()=>{this.setState(e=>({selectedElementIds:jK({...e.selectedElementIds,[n]:!0},e)}))})}a&&rV(this.scene.getNonDeletedElements(),[e]),(!a||n)&&this.store.shouldCaptureIncrement(),t.flushSync(()=>{this.setState({newElement:null,editingTextElement:null})}),this.state.activeTool.locked&&PG(this.interactiveCanvas,this.state),this.focusContainer()}),element:e,excalidrawContainer:this.excalidrawContainerRef.current,app:this,autoSelect:!this.device.isTouchScreen}),this.deselectElements(),i(e.originalText,!1)}deselectElements(){this.setState({selectedElementIds:jK({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})}getTextElementAtPosition(e,t){let n=this.getElementAtPosition(e,t,{includeBoundTextElement:!0});return n&&mO(n)&&!n.isDeleted?n:null}getElementAtPosition(e,t,n){let r=this.getElementsAtPosition(e,t,n?.includeBoundTextElement,n?.includeLockedElements);if(r.length>1){if(n?.preferSelected)for(let e=r.length-1;e>-1;e--)if(this.state.selectedElementIds[r[e].id])return r[e];let i=r[r.length-1];return m$({x:e,y:t,element:i,shape:K$(i,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()/2,frameNameBound:UO(i)?this.frameNameBoundsCache.get(i):null})?i:r[r.length-2]}return 1===r.length?r[0]:null}getElementsAtPosition(e,t,n=!1,r=!1){let i=[],s=this.scene.getNonDeletedElementsMap();return(n&&r?this.scene.getNonDeletedElements():this.scene.getNonDeletedElements().filter(e=>(r||!e.locked)&&(n||!(mO(e)&&e.containerId)))).filter(n=>this.hitElement(e,t,n)).filter(n=>{let r=uK(n,s);return!(r&&this.state.frameRendering.enabled&&this.state.frameRendering.clip)||sK({x:e,y:t},r,s)}).filter(e=>!pO(e)||(i.push(e),!1)).concat(i)}getElementHitThreshold(){return 7.99999/this.state.zoom.value}hitElement(e,t,n,r=!0){if(r&&this.state.selectedElementIds[n.id]&&eQ([n],this.state)){let r=((e,t,n=10)=>{let[r,i,s,a,o,l]=sX(e,t,!0);r-=n,s+=n,i-=n,a+=n;let c=PD(o,l),d=OD(PD(r,i),c,e.angle),u=OD(PD(s,i),c,e.angle),h=OD(PD(r,a),c,e.angle);return{type:"polygon",data:[d,u,OD(PD(s,a),c,e.angle),h]}})(n,this.scene.getNonDeletedElementsMap(),uO(n)?0:this.getElementHitThreshold());if(a$(PD(e,t),r))return!0}return!!b$(e,t,Q$(n,this.scene.getNonDeletedElementsMap()))||m$({x:e,y:t,element:n,shape:K$(n,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold(),frameNameBound:UO(n)?this.frameNameBoundsCache.get(n):null})}getTextBindableContainerAtPosition(e,t){let n=this.scene.getNonDeletedElements(),r=this.scene.getSelectedElements(this.state);if(1===r.length)return MO(r[0],!1)?r[0]:null;let i=null;for(let s=n.length-1;s>=0;--s){if(n[s].isDeleted)continue;let[r,a,o,l]=sX(n[s],this.scene.getNonDeletedElementsMap());if(wO(n[s])&&m$({x:e,y:t,element:n[s],shape:K$(n[s],this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()})){i=n[s];break}if(r<e&&e<o&&a<t&&t<l){i=n[s];break}}return MO(i,!1)?i:null}handleHoverSelectedLinearElement(e,t,n){let r=this.scene.getNonDeletedElementsMap(),i=eG.getElement(e.elementId,r);if(i)if(this.state.selectedLinearElement){let s=-1,a=null;m$({x:t,y:n,element:i,shape:K$(i,this.scene.getNonDeletedElementsMap())})?(s=eG.getPointIndexUnderCursor(i,r,this.state.zoom,t,n),a=eG.getSegmentMidpointHitCoords(e,{x:t,y:n},this.state,this.scene.getNonDeletedElementsMap()),(SO(i)?0===s||s===i.points.length-1:s>=0)||a?TG(this.interactiveCanvas,RA):this.hitElement(t,n,i)&&TG(this.interactiveCanvas,PA)):this.hitElement(t,n,i)&&(!SO(i)||!(i.startBinding||i.endBinding))&&TG(this.interactiveCanvas,PA),this.state.selectedLinearElement.hoverPointIndex!==s&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,hoverPointIndex:s}}),eG.arePointsEqual(this.state.selectedLinearElement.segmentMidPointHoveredCoords,a)||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:a}})}else TG(this.interactiveCanvas,AA)}updateGestureOnPointerDown(e){Xre.pointers.set(e.pointerId,{x:e.clientX,y:e.clientY}),2===Xre.pointers.size&&(Xre.lastCenter=E9(Xre.pointers),Xre.initialScale=this.state.zoom.value,Xre.initialDistance=k9(Array.from(Xre.pointers.values())))}initialPointerDownState(e){let t=EL(e,this.state),n=this.scene.getSelectedElements(this.state),[r,i,s,a]=gX(n),o=0===n.findIndex(SO);return{origin:t,withCmdOrCtrl:e[$$.CTRL_OR_CMD],originInGrid:IL(qV(t.x,t.y,e[$$.CTRL_OR_CMD]||o?null:this.getEffectiveGridSize())),scrollbars:eee(Lre,e.clientX-this.state.offsetLeft,e.clientY-this.state.offsetTop),lastCoords:{...t},originalElements:this.scene.getNonDeletedElements().reduce((e,t)=>(e.set(t.id,KG(t)),e),new Map),resize:{handleType:!1,isResizing:!1,offset:{x:0,y:0},arrowDirection:"origin",center:{x:(s+r)/2,y:(a+i)/2}},hit:{element:null,allHitElements:[],wasAddedToSelection:!1,hasBeenDuplicated:!1,hasHitCommonBoundingBoxOfSelectedElements:this.isHittingCommonBoundingBoxOfSelectedElements(t,n)},drag:{hasOccurred:!1,offset:null},eventListeners:{onMove:null,onUp:null,onKeyUp:null,onKeyDown:null},boxSelection:{hasOccurred:!1}}}handleDraggingScrollBar(e,t){if(!t.scrollbars.isOverEither||this.state.multiElement)return!1;Dre=!0,t.lastCoords.x=e.clientX,t.lastCoords.y=e.clientY;let n=Pne(e=>{e.target instanceof HTMLElement&&this.handlePointerMoveOverScrollbars(e,t)}),r=Rne(()=>{Wre=null,Dre=!1,PG(this.interactiveCanvas,this.state),this.setState({cursorButton:"up"}),this.savePointer(e.clientX,e.clientY,"up"),window.removeEventListener("pointermove",n),window.removeEventListener("pointerup",r),n.flush()});return Wre=r,window.addEventListener("pointermove",n),window.addEventListener("pointerup",r),!0}isASelectedElement(e){return null!=e&&this.state.selectedElementIds[e.id]}isHittingCommonBoundingBoxOfSelectedElements(e,t){if(t.length<2)return!1;let n=this.getElementHitThreshold(),[r,i,s,a]=gX(t);return e.x>r-n&&e.x<s+n&&e.y>i-n&&e.y<a+n}getCurrentItemRoundness(e){return"round"===this.state.currentItemRoundness?{type:PO(e)?PN:RN}:null}maybeCacheReferenceSnapPoints(e,t,n=!1){FV({event:e,app:this,selectedElements:t})&&(n||!LV.getReferenceSnapPoints())&&LV.setReferenceSnapPoints(((e,t,n,r)=>{let i=BV(e,t,n,r);return RV(i,r).filter(e=>!(1===e.length&&RO(e[0]))).flatMap(e=>zV(e,r))})(this.scene.getNonDeletedElements(),t,this.state,this.scene.getNonDeletedElementsMap()))}maybeCacheVisibleGaps(e,t,n=!1){FV({event:e,app:this,selectedElements:t})&&(n||!LV.getVisibleGaps())&&LV.setVisibleGaps(((e,t,n,r)=>{let i=BV(e,t,n,r),s=RV(i,r).filter(e=>!(1===e.length&&RO(e[0]))).map(e=>gX(e).map(e=>WV(e))),a=s.sort((e,t)=>e[0]-t[0]),o=[],l=0;e:for(let u=0;u<a.length;u++){let e=a[u];for(let t=u+1;t<a.length;t++){if(++l>99999)break e;let n=a[t],[,r,i,s]=e,[c,d,,u]=n;i<c&&oL(aL(r,s),aL(d,u))&&o.push({startBounds:e,endBounds:n,startSide:[PD(i,r),PD(i,s)],endSide:[PD(c,d),PD(c,u)],length:c-i,overlap:lL(aL(r,s),aL(d,u))})}}let c=s.sort((e,t)=>e[1]-t[1]),d=[];l=0;e:for(let u=0;u<c.length;u++){let e=c[u];for(let t=u+1;t<c.length;t++){if(++l>99999)break e;let n=c[t],[r,,i,s]=e,[a,o,u]=n;s<o&&oL(aL(r,i),aL(a,u))&&d.push({startBounds:e,endBounds:n,startSide:[PD(r,s),PD(i,s)],endSide:[PD(a,o),PD(u,o)],length:o-s,overlap:lL(aL(r,i),aL(a,u))})}}return{horizontalGaps:o,verticalGaps:d}})(this.scene.getNonDeletedElements(),t,this.state,this.scene.getNonDeletedElementsMap()))}onKeyDownFromPointerDownHandler(e){return Rne(t=>{this.maybeHandleResize(e,t)||this.maybeDragNewGenericElement(e,t)})}onKeyUpFromPointerDownHandler(e){return Rne(t=>{t.key===$$.ALT&&t.preventDefault(),!this.maybeHandleResize(e,t)&&this.maybeDragNewGenericElement(e,t)})}onPointerMoveFromPointerDownHandler(e){return Pne(n=>{if("elementLinkSelector"===this.state.openDialog?.name)return;let r=EL(n,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.elbowed&&this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index){let[e,i]=qV(r.x,r.y,n[$$.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),s=this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index;if(s<0){let t=eG.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:e,y:i},this.state,this.scene.getNonDeletedElementsMap());s=t?eG.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,t,this.scene.getNonDeletedElementsMap()):-1}let a=eG.moveFixedSegment(this.state.selectedLinearElement,s,e,i,this.scene.getNonDeletedElementsMap());return void t.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:a.segmentMidPointHoveredCoords,pointerDownState:a.pointerDownState}})})}let i=this.lastPointerMoveCoords??e.origin;if(this.lastPointerMoveCoords=r,null===e.drag.offset&&(e.drag.offset=IL(((e,t,n)=>{let[r,i]=gX(e);return[t-r,n-i]})(this.scene.getSelectedElements(this.state),e.origin.x,e.origin.y))),!(n.target instanceof HTMLElement)||this.handlePointerMoveOverScrollbars(n,e))return;if(mD(this.state))return void this.handleEraser(n,e,r);"laser"===this.state.activeTool.type&&this.laserTrails.addPointToPath(r.x,r.y);let[s,a]=qV(r.x,r.y,n[$$.CTRL_OR_CMD]?null:this.getEffectiveGridSize());if(!e.drag.hasOccurred&&("arrow"===this.state.activeTool.type||"line"===this.state.activeTool.type)&&BD(PD(r.x,r.y),PD(e.origin.x,e.origin.y))<CA)return;if(e.resize.isResizing&&(e.lastCoords.x=r.x,e.lastCoords.y=r.y,this.maybeHandleCrop(e,n)||this.maybeHandleResize(e,n)))return!0;let o=this.scene.getNonDeletedElementsMap();if(this.state.selectedLinearElement){let i=this.state.editingLinearElement||this.state.selectedLinearElement;if(eG.shouldAddMidpoint(this.state.selectedLinearElement,r,this.state,o)){let e=eG.addMidpoint(this.state.selectedLinearElement,r,this,!n[$$.CTRL_OR_CMD],o);if(!e)return;return void t.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:e.pointerDownState,selectedPointsIndices:e.selectedPointsIndices}}),this.state.editingLinearElement&&this.setState({editingLinearElement:{...this.state.editingLinearElement,pointerDownState:e.pointerDownState,selectedPointsIndices:e.selectedPointsIndices}})})}if(null!==i.pointerDownState.segmentMidpoint.value&&!i.pointerDownState.segmentMidpoint.added)return;if(eG.handlePointDragging(n,this,r.x,r.y,(e,t)=>{this.maybeSuggestBindingsForLinearElementAtCoords(e,t)},i,this.scene))return e.lastCoords.x=r.x,e.lastCoords.y=r.y,e.drag.hasOccurred=!0,this.state.editingLinearElement&&!this.state.editingLinearElement.isDragging&&this.setState({editingLinearElement:{...this.state.editingLinearElement,isDragging:!0}}),void(this.state.selectedLinearElement.isDragging||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,isDragging:!0}}))}let l=e.hit.allHitElements.some(e=>this.isASelectedElement(e)),c=this.state.editingLinearElement&&n.shiftKey&&this.state.editingLinearElement.elementId===e.hit.element?.id;if((l||e.hit.hasHitCommonBoundingBoxOfSelectedElements)&&!c){let s=this.scene.getSelectedElements(this.state);if(s.every(e=>e.locked))return;let a=s.find(e=>UO(e)),l=this.getTopLayerFrameAtSceneCoords(r),c=l&&!a?l:null;if(this.state.frameToHighlight!==c&&t.flushSync(()=>{this.setState({frameToHighlight:c})}),e.drag.hasOccurred=!0,s.length>0&&!e.withCmdOrCtrl&&!this.state.editingTextElement&&"active"!==this.state.activeEmbeddable?.state){let t={x:r.x-e.origin.x,y:r.y-e.origin.y},a=[...e.originalElements.values()],l=n.shiftKey;if(l){let e=Math.abs(t.x),n=Math.abs(t.y),r=l&&e>n;l&&e<n&&(t.x=0),r&&(t.y=0)}if(this.state.croppingElementId){let t=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(t&&uO(t)&&null!==t.crop&&e.hit.element===t){let e=t.crop,n=dO(t)&&this.imageCache.get(t.fileId)?.image;if(n&&!(n instanceof Promise)){let s=TD(kD(r.x-i.x,r.y-i.y),Math.max(this.state.zoom.value,2)),[a,l,c,d,u,h]=sX(t,o),p=CD(OD(PD(a,l),PD(u,h),t.angle)),f=CD(OD(PD(c,l),PD(u,h),t.angle)),m=CD(OD(PD(a,d),PD(u,h),t.angle)),g=RD(jD(f,p)),b=RD(jD(m,p)),U=kD(MD(s,g),MD(s,b)),y={...e,x:bD(e.x-U[0]*Math.sign(t.scale[0]),0,n.naturalWidth-e.width),y:bD(e.y-U[1]*Math.sign(t.scale[1]),0,n.naturalHeight-e.height)};return void DK(t,{crop:y})}}}this.maybeCacheVisibleGaps(n,s),this.maybeCacheReferenceSnapPoints(n,s);let{snapOffset:c,snapLines:d}=((e,t,n,r,i)=>{let s=n.state,a=MK(e,s);if(!FV({app:n,event:r,selectedElements:a})||0===a.length)return{snapOffset:{x:0,y:0},snapLines:[]};t.x=WV(t.x),t.y=WV(t.y);let o=[],l=[],c=NV(s.zoom.value),d={x:c,y:c},u=zV(a,i,{dragOffset:t});$V(a,u,n,r,o,l,d),HV(a,t,n,r,o,l,d);let h={x:o[0]?.offset??0,y:l[0]?.offset??0};d.x=0,d.y=0,o.length=0,l.length=0;let p={x:WV(t.x+h.x),y:WV(t.y+h.y)};return $V(a,zV(a,i,{dragOffset:p}),n,r,o,l,d),HV(a,p,n,r,o,l,d),{snapOffset:h,snapLines:[...VV(o,l),...GV(a,p,[...o,...l].filter(e=>"gap"===e.type))]}})(a,t,this,n,this.scene.getNonDeletedElementsMap());if(this.setState({snapLines:d}),this.state.editingFrame||((e,t,n,r,i,s)=>{if(1===t.length&&SO(t[0])&&(t[0].startBinding||t[0].endBinding))return;let a=t.filter(e=>{if(SO(e)&&e.startBinding&&e.endBinding){let n=t.find(t=>t.id===e.startBinding?.elementId),r=t.find(t=>t.id===e.endBinding?.elementId);return n&&r}return!0}),o=new Set(a),l=a.filter(e=>UO(e)).map(e=>e.id);if(l.length>0)for(let u of r.getNonDeletedElements())null!==u.frameId&&l.includes(u.frameId)&&o.add(u);let c=gX(Array.from(o).map(t=>e.originalElements.get(t.id)??t)),d=gQ(c,n,i,s);o.forEach(t=>{if(bQ(e,t,d),!wO(t)){let n=dG(t,r.getNonDeletedElementsMap());n&&bQ(e,n,d),$X(t,r.getElementsMapIncludingDeleted(),{simultaneouslyUpdated:Array.from(o)})}})})(e,s,t,this.scene,c,n[$$.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),this.setState({selectedElementsAreBeingDragged:!0,selectionElement:null}),(1!==s.length||!SO(s[0]))&&this.setState({suggestedBindings:TX(s,this.scene.getNonDeletedElementsMap(),this.state.zoom)}),n.altKey&&!e.hit.hasBeenDuplicated){e.hit.hasBeenDuplicated=!0;let t=[],r=[],i=new Map,a=new Map,o=e.hit.element,l=new Set(this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}).map(e=>e.id)),c=this.scene.getElementsIncludingDeleted();for(let n of c){let s=l.has(n.id)||n.id===o?.id&&e.hit.wasAddedToSelection;if(Math.abs(n.x)>1e7||Math.abs(n.x)>1e7||Math.abs(n.width)>1e7||Math.abs(n.height)>1e7)return;if(s){let s=eY(this.state.editingGroupId,i,n);if(Math.abs(s.x)>1e7||Math.abs(s.x)>1e7||Math.abs(s.width)>1e7||Math.abs(s.height)>1e7)return;let o=e.originalElements.get(n.id);if(Math.abs(o.x)>1e7||Math.abs(o.x)>1e7||Math.abs(o.width)>1e7||Math.abs(o.height)>1e7)return;DK(s,{x:o.x,y:o.y}),e.originalElements.set(s.id,s),t.push(s),r.push(n),a.set(n.id,s.id)}else t.push(n)}let d=[...t,...r];d=this.props.onDuplicate?.(d,c)||d,rY(d,DL(r)),aG(t,r,a),tV(d,r,a,"duplicatesServeAsOld"),JZ(d,r,a),this.scene.replaceAllElements(d),this.maybeCacheVisibleGaps(n,s,!0),this.maybeCacheReferenceSnapPoints(n,s,!0)}return}}if(this.state.selectionElement)e.lastCoords.x=r.x,e.lastCoords.y=r.y,this.maybeDragNewGenericElement(e,n);else{let t=this.state.newElement;if(!t)return;if("freedraw"===t.type){let e=t.points,i=r.x-t.x,s=r.y-t.y,a=e.length>0&&e[e.length-1];if(!a||a[0]!==i||a[1]!==s){let r=t.simulatePressure?t.pressures:[...t.pressures,n.pressure];DK(t,{points:[...e,PD(i,s)],pressures:r},!1),this.setState({newElement:t})}}else if(vO(t)){e.drag.hasOccurred=!0;let i=t.points,o=s-t.x,l=a-t.y;q$(n)&&2===i.length&&({width:o,height:l}=$K(t.x,t.y,r.x,r.y)),1===i.length?DK(t,{points:[...i,PD(o,l)]},!1):(2===i.length||i.length>1&&SO(t))&&DK(t,{points:[...i.slice(0,-1),PD(o,l)]},!1,{isDragging:!0}),this.setState({newElement:t}),kO(t,!1)&&this.maybeSuggestBindingsForLinearElementAtCoords(t,[r],this.state.startBoundElement)}else e.lastCoords.x=r.x,e.lastCoords.y=r.y,this.maybeDragNewGenericElement(e,n,!1)}if("selection"===this.state.activeTool.type){e.boxSelection.hasOccurred=!0;let t=this.scene.getNonDeletedElements();if(this.state.editingLinearElement)eG.handleBoxSelection(n,this.state,this.setState.bind(this),this.scene.getNonDeletedElementsMap());else{let r=!0;!n.shiftKey&&_K(t,this.state)&&(e.withCmdOrCtrl&&e.hit.element?this.setState(t=>SV({...t,selectedElementIds:{[e.hit.element.id]:!0}},this.scene.getNonDeletedElements(),t,this)):r=!1);let i=this.state.selectionElement?kK(t,this.state.selectionElement,this.scene.getNonDeletedElementsMap(),!1):[];this.setState(t=>{let n={...r&&t.selectedElementIds,...i.reduce((e,t)=>(e[t.id]=!0,e),{})};return e.hit.element&&(i.length?delete n[e.hit.element.id]:n[e.hit.element.id]=!0),t=r?t:{...t,selectedGroupIds:{},editingGroupId:null},{...SV({editingGroupId:t.editingGroupId,selectedElementIds:n},this.scene.getNonDeletedElements(),t,this),selectedLinearElement:1===i.length&&vO(i[0])?new eG(i[0]):null,showHyperlinkPopup:!(1!==i.length||!i[0].link&&!hO(i[0]))&&"info"}})}}})}handlePointerMoveOverScrollbars(e,t){if(t.scrollbars.isOverHorizontal){let n=e.clientX,r=n-t.lastCoords.x;return this.translateCanvas({scrollX:this.state.scrollX-r/this.state.zoom.value}),t.lastCoords.x=n,!0}if(t.scrollbars.isOverVertical){let n=e.clientY,r=n-t.lastCoords.y;return this.translateCanvas({scrollY:this.state.scrollY-r/this.state.zoom.value}),t.lastCoords.y=n,!0}return!1}onPointerUpFromPointerDownHandler(e){return Rne(t=>{this.removePointer(t),e.eventListeners.onMove&&e.eventListeners.onMove.flush();let{newElement:n,resizingElement:r,croppingElementId:i,multiElement:s,activeTool:a,isResizing:o,isRotating:l,isCropping:c}=this.state;this.setState(e=>({isResizing:!1,isRotating:!1,isCropping:!1,resizingElement:null,selectionElement:null,frameToHighlight:null,elementsToHighlight:null,cursorButton:"up",snapLines:KL(e.snapLines,[]),originSnapOffset:null})),this.lastPointerMoveCoords=null,LV.setReferenceSnapPoints(null),LV.setVisibleGaps(null),this.savePointer(t.clientX,t.clientY,"up"),this.setState({selectedElementsAreBeingDragged:!1});let d=this.scene.getNonDeletedElementsMap();if(e.drag.hasOccurred&&e.hit?.element?.id){let t=d.get(e.hit.element.id);_O(t)&&t.boundElements?.filter(e=>"arrow"===e.type).map(e=>d.get(e.id)).filter(e=>SO(e)).forEach(e=>{e&&DK(e,{},!0)})}if(this.state.editingLinearElement)if(e.boxSelection.hasOccurred||e.hit?.element?.id===this.state.editingLinearElement.elementId){let e=eG.handlePointerUp(t,this.state.editingLinearElement,this.state,this.scene);e!==this.state.editingLinearElement&&this.setState({editingLinearElement:e,suggestedBindings:[]})}else this.actionManager.executeAction(x8);else if(this.state.selectedLinearElement){if(this.state.selectedLinearElement.elbowed){let e=eG.getElement(this.state.selectedLinearElement.elementId,this.scene.getNonDeletedElementsMap());e&&DK(e,{},!0)}if(e.hit?.element?.id!==this.state.selectedLinearElement.elementId)this.scene.getSelectedElements(this.state).length>1&&this.setState({selectedLinearElement:null});else{let e=eG.handlePointerUp(t,this.state.selectedLinearElement,this.state,this.scene),{startBindingElement:n,endBindingElement:r}=e,i=this.scene.getElement(e.elementId);kO(i)&&_X(i,n,r,d,this.scene),e!==this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...e,selectedPointsIndices:null},suggestedBindings:[]})}}if(this.missingPointerEventCleanupEmitter.clear(),window.removeEventListener("pointermove",e.eventListeners.onMove),window.removeEventListener("pointerup",e.eventListeners.onUp),window.removeEventListener("keydown",e.eventListeners.onKeyDown),window.removeEventListener("keyup",e.eventListeners.onKeyUp),this.state.pendingImageElementId&&this.setState({pendingImageElementId:null}),this.props?.onPointerUp?.(a,e),this.onPointerUpEmitter.trigger(this.state.activeTool,e,t),"freedraw"===n?.type){let e=EL(t,this.state),r=n.points,i=e.x-n.x,s=e.y-n.y;i===r[0][0]&&s===r[0][1]&&(s+=1e-4,i+=1e-4);let a=n.simulatePressure?[]:[...n.pressures,t.pressure];return DK(n,{points:[...r,PD(i,s)],pressures:a,lastCommittedPoint:PD(i,s)}),void this.actionManager.executeAction(x8)}if(uO(n)){let e=n;try{this.initializeImageDimensions(e),this.setState({selectedElementIds:jK({[e.id]:!0},this.state)},()=>{this.actionManager.executeAction(x8)})}catch(f){this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().filter(t=>t.id!==e.id)),this.actionManager.executeAction(x8)}return}if(vO(n)){n.points.length>1&&this.store.shouldCaptureIncrement();let r=EL(t,this.state);return void(e.drag.hasOccurred||!n||s?e.drag.hasOccurred&&!s&&(CX(this.state)&&kO(n,!1)&&RX(n,this.state,r,this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements()),this.setState({suggestedBindings:[],startBoundElement:null}),a.locked?this.setState(e=>({newElement:null})):(jG(this.interactiveCanvas),this.setState(e=>({newElement:null,activeTool:wL(this.state,{type:"selection"}),selectedElementIds:jK({...e.selectedElementIds,[n.id]:!0},e),selectedLinearElement:new eG(n)}))),this.scene.triggerUpdate()):(DK(n,{points:[...n.points,PD(r.x-n.x,r.y-n.y)]}),this.setState({multiElement:n,newElement:n})))}if(mO(n)){let e=BO(gL({fontSize:n.fontSize,fontFamily:n.fontFamily}),n.lineHeight);n.width<e&&DK(n,{autoResize:!0}),this.resetCursor(),this.handleTextWysiwyg(n,{isExistingElement:!0})}if("selection"!==a.type&&n&&FK(n))return void this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(e=>e.id!==n.id),appState:{newElement:null},captureUpdate:UY});if(UO(n)){let e=((e,t,n)=>dK(bK(e,tK(e,t,n)),t,n))(this.scene.getElementsIncludingDeleted(),n,this.scene.getNonDeletedElementsMap());this.scene.replaceAllElements(hK(this.scene.getElementsMapIncludingDeleted(),e,n,this.state))}if(n&&(DK(n,WK(n)),this.scene.triggerUpdate()),e.drag.hasOccurred){let e=EL(t,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.isDragging){let e=this.scene.getElement(this.state.selectedLinearElement.elementId);if(e?.frameId){let t=uK(e,d);t&&e&&(iK(e,t,this.scene.getNonDeletedElementsMap())||(DK(e,{groupIds:[]}),pK([e],this.scene.getNonDeletedElementsMap()),this.scene.triggerUpdate()))}}else{let t=this.getTopLayerFrameAtSceneCoords(e),n=this.scene.getSelectedElements(this.state),r=this.scene.getElementsMapIncludingDeleted(),i=e=>{if(e.length>0){for(let t of e){let e=t.groupIds.indexOf(this.state.editingGroupId);DK(t,{groupIds:t.groupIds.slice(0,e)},!1)}r.forEach(e=>{e.groupIds.length&&jV(r,e.groupIds[e.groupIds.length-1]).length<2&&DK(e,{groupIds:[]},!1)}),this.setState({editingGroupId:null})}};if(t&&!this.state.selectedElementIds[t.id]){let e=n.filter(e=>e.frameId!==t.id&&yK(e,r,this.state));this.state.editingGroupId&&i(e),r=hK(r,e,t,this.state)}else if(!t&&this.state.editingGroupId){i(n.filter(e=>e.frameId&&!yK(e,r,this.state)))}r=gK(r,this.state,this),this.scene.replaceAllElements(r)}}if(r&&this.store.shouldCaptureIncrement(),r&&FK(r)&&this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(e=>e.id!==r.id),captureUpdate:UY}),e.resize.isResizing){let e=gK(this.scene.getElementsIncludingDeleted(),this.state,this),t=this.scene.getSelectedElements(this.state).filter(e=>UO(e));for(let n of t)e=mK(e,cK(this.scene.getElementsIncludingDeleted(),n,this.state,d),n,this);this.scene.replaceAllElements(e)}let u=e.hit.element;this.state.selectedLinearElement?.elementId!==u?.id&&vO(u)&&1===this.scene.getSelectedElements(this.state).length&&this.setState({selectedLinearElement:new eG(u)}),(!i||i&&(!u&&!c||u&&u.id!==i))&&this.finishImageCropping();let h=this.lastPointerDownEvent,p=this.lastPointerUpEvent||this.lastPointerMoveEvent;if(mD(this.state)&&h&&p){if(this.eraserTrail.endPath(),0===BD(PD(h.clientX,h.clientY),PD(p.clientX,p.clientY))){let e=EL({clientX:p.clientX,clientY:p.clientY},this.state);this.getElementsAtPosition(e.x,e.y).forEach(e=>this.elementsPendingErasure.add(e.id))}this.eraseElements()}else{if(this.elementsPendingErasure.size&&this.restoreReadyToEraseElements(),u&&!e.drag.hasOccurred&&!e.hit.wasAddedToSelection&&(!this.state.editingLinearElement||!e.boxSelection.hasOccurred)&&(t.shiftKey&&!this.state.editingLinearElement?this.state.selectedElementIds[u.id]?EV(this.state,u)?this.setState(e=>{let t={...e.selectedElementIds};for(let n of u.groupIds.flatMap(e=>jV(this.scene.getNonDeletedElements(),e)))delete t[n.id];return{selectedGroupIds:{...e.selectedElementIds,...u.groupIds.map(e=>({[e]:!1})).reduce((e,t)=>({...e,...t}),{})},selectedElementIds:jK(t,e)}}):this.state.selectedLinearElement?.isDragging||this.setState(e=>{let t={...e.selectedElementIds};delete t[u.id];let n=MK(this.scene.getNonDeletedElements(),{selectedElementIds:t});return{...SV({editingGroupId:e.editingGroupId,selectedElementIds:t},this.scene.getNonDeletedElements(),e,this),selectedLinearElement:1===n.length&&vO(n[0])?new eG(n[0]):e.selectedLinearElement}}):u.frameId&&this.state.selectedElementIds[u.frameId]?this.setState(e=>{let t={...e.selectedElementIds,[u.id]:!0};return delete t[u.frameId],(this.scene.getElement(u.frameId)?.groupIds??[]).flatMap(e=>jV(this.scene.getNonDeletedElements(),e)).forEach(e=>{delete t[e.id]}),{...SV({editingGroupId:e.editingGroupId,selectedElementIds:t},this.scene.getNonDeletedElements(),e,this),showHyperlinkPopup:!(!u.link&&!hO(u))&&"info"}}):this.setState(e=>({selectedElementIds:jK({...e.selectedElementIds,[u.id]:!0},e)})):this.setState(e=>({...SV({editingGroupId:e.editingGroupId,selectedElementIds:{[u.id]:!0}},this.scene.getNonDeletedElements(),e,this),selectedLinearElement:vO(u)&&e.selectedLinearElement?.elementId!==u.id?new eG(u):e.selectedLinearElement}))),(!u||!SO(u))&&!e.drag.hasOccurred&&!this.state.isResizing&&(u&&((e,t)=>!m$(e)&&!b$(e.x,e.y,Q$(e.element,t))&&g$(e.x,e.y,e.element,t))({x:e.origin.x,y:e.origin.y,element:u,shape:K$(u,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold(),frameNameBound:UO(u)?this.frameNameBoundsCache.get(u):null},d)||!u&&e.hit.hasHitCommonBoundingBoxOfSelectedElements))return this.state.editingLinearElement?this.setState({editingLinearElement:null}):this.setState({selectedElementIds:jK({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),void TG(this.interactiveCanvas,AA);if(!a.locked&&"freedraw"!==a.type&&n&&this.setState(e=>({selectedElementIds:jK({...e.selectedElementIds,[n.id]:!0},e),showHyperlinkPopup:hO(n)&&!n.link?"editor":e.showHyperlinkPopup})),("selection"!==a.type||_K(this.scene.getNonDeletedElements(),this.state)||!XL(this.state.previousSelectedElementIds,this.state.selectedElementIds))&&this.store.shouldCaptureIncrement(),e.drag.hasOccurred||o||l||c){let e=this.scene.getSelectedElements(this.state).filter(vO);jX(e,this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements(),this.scene,CX(this.state),this.state.selectedLinearElement?.selectedPointsIndices??[],this.state.zoom)}"laser"!==a.type?(a.locked||"freedraw"===a.type?this.setState({newElement:null,suggestedBindings:[]}):(jG(this.interactiveCanvas),this.setState({newElement:null,suggestedBindings:[],activeTool:wL(this.state,{type:"selection"})})),u&&this.lastPointerUpEvent&&this.lastPointerDownEvent&&this.lastPointerUpEvent.timeStamp-this.lastPointerDownEvent.timeStamp<300&&Xre.pointers.size<=1&&fO(u)&&this.isIframeLikeElementCenter(u,this.lastPointerUpEvent,e.origin.x,e.origin.y)&&this.handleEmbeddableCenterClick(u)):this.laserTrails.endPath()}})}clearSelection(e){this.setState(t=>({selectedElementIds:jK({},t),activeEmbeddable:null,selectedGroupIds:{},editingGroupId:t.editingGroupId&&null!=e&&IV(e,t.editingGroupId)?t.editingGroupId:null})),this.setState({selectedElementIds:jK({},this.state),activeEmbeddable:null,previousSelectedElementIds:this.state.selectedElementIds})}getTextWysiwygSnappedToCenterPosition(e,t,n,r){if(r){let i=r.x+r.width/2,s=r.y+r.height/2,a=hG(r,n,this.scene.getNonDeletedElementsMap());if(a&&(i=a.x,s=a.y),Math.hypot(e-i,t-s)<30){let{x:e,y:t}=kL({sceneX:i,sceneY:s},n);return{viewportX:e,viewportY:t,elementCenterX:i,elementCenterY:s}}}}getCanvasOffsets(){if(this.excalidrawContainerRef?.current){let e=this.excalidrawContainerRef.current,{left:t,top:n}=e.getBoundingClientRect();return{offsetLeft:t,offsetTop:n}}return{offsetLeft:0,offsetTop:0}}async updateLanguage(){let e=h6.find(e=>e.code===this.props.langCode)||u6;await g6(e),this.setAppState({})}};(BM.MODE===$A||BM.DEV)&&(window.h=window.h||{},Object.defineProperties(window.h,{elements:{configurable:!0,get(){return this.app?.scene.getElementsIncludingDeleted()},set(e){return this.app?.scene.replaceAllElements(iY(e))}},scene:{configurable:!0,get(){return this.app?.scene}}}));var Gre=Vre,Yre=()=>{Array.prototype.at||Object.defineProperty(Array.prototype,"at",{value:function(e){if((e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]},writable:!0,enumerable:!1,configurable:!0}),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=function(...e){this.innerHTML="",this.append(...e)})},qre=()=>e.jsx("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"ExcalidrawLogo-icon",children:e.jsx("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),Zre=()=>e.jsxs("svg",{viewBox:"0 0 450 55",xmlns:"http://www.w3.org/2000/svg",fill:"none",className:"ExcalidrawLogo-text",children:[e.jsx("path",{d:"M429.27 96.74c2.47-1.39 4.78-3.02 6.83-4.95 1.43-1.35 2.73-2.86 3.81-4.51-.66.9-1.4 1.77-2.23 2.59-2.91 2.84-5.72 5.09-8.42 6.87h.01ZM343.6 69.36c.33 3.13.58 6.27.79 9.4.09 1.37.18 2.75.25 4.12-.12-4.46-.27-8.93-.5-13.39-.11-2.08-.24-4.16-.4-6.24-.06 1.79-.11 3.85-.13 6.11h-.01ZM378.47 98.34c.01-.37.07-1.13.01-6.51-.11 1.9-.22 3.81-.31 5.71-.07 1.42-.22 2.91-.16 4.35.39.03.78.07 1.17.1-.92-.85-.76-2.01-.72-3.66l.01.01ZM344.09 86.12c-.09-2.41-.22-4.83-.39-7.24v12.21c.15-.05.32-.09.47-.14.05-1.61-.03-3.23-.09-4.83h.01ZM440.69 66.79c-.22-.34-.45-.67-.69-.99-3.71-4.87-9.91-7.14-15.65-8.55-1.05-.26-2.12-.49-3.18-.71 2.29.59 4.48 1.26 6.64 2.02 7.19 2.54 10.57 5.41 12.88 8.23ZM305.09 72.46l1.2 3.6c.84 2.53 1.67 5.06 2.46 7.61.24.78.5 1.57.73 2.36.22-.04.44-.08.67-.12a776.9 776.9 0 0 1-5.01-13.57c-.02.04-.03.09-.05.13v-.01ZM345.49 90.25v.31c1.48-.42 3.05-.83 4.66-1.2-1.56.25-3.12.52-4.66.89ZM371.02 90.22c0-.57-.04-1.14-.11-1.71-.06-.02-.12-.04-.19-.05-.21-.05-.43-.08-.65-.11.42.16.74.88.95 1.87ZM398.93 54.23c-.13 0-.27-.01-.4-.02l.03.4c.11-.15.23-.27.37-.38ZM401.57 62.28v-.15c-1.22-.24-2.86-.61-3.23-1.25-.09-.15-.18-.51-.27-.98-.09.37-.2.73-.33 1.09 1.24.56 2.52.98 3.83 1.29ZM421.73 88.68c-2.97 1.65-6.28 3.12-9.69 3.68v.18c4.72-.14 11.63-3.85 16.33-8.38-2.04 1.75-4.33 3.24-6.63 4.53l-.01-.01ZM411.28 80.92c-.05-1.2-.09-2.4-.15-3.6-.21 5.66-.46 11.38-.47 14.51.24-.02.48-.04.71-.07.15-3.61.05-7.23-.09-10.83v-.01Z",transform:"translate(-144.023 -51.76)"}),e.jsx("path",{d:"M425.38 67.41c-3.5-1.45-7.19-2.57-14.06-3.62.09 1.97.06 4.88-.03 8.12.03.04.06.09.06.15.19 1.36.28 2.73.37 4.1.25 3.77.39 7.55.41 11.33 0 1.38-.01 2.76-.07 4.13 1.4-.25 2.78-.65 4.12-1.15 4.07-1.5 7.94-3.78 11.28-6.54 2.33-1.92 5.13-4.49 5.88-7.58.63-3.53-2.45-6.68-7.97-8.96l.01.02ZM411.35 92.53v-.06l-.34.03c.11.01.22.03.34.03ZM314.26 64.06c-.23-.59-.47-1.17-.7-1.75.57 1.62 1.11 3.25 1.6 4.9l.15.54 2.35 6.05c.32.82.66 1.64.98 2.46-1.38-4.1-2.83-8.17-4.39-12.2h.01ZM156.82 103.07c-.18.13-.38.23-.58.33 1.32-.03 2.66-.2 3.93-.34.86-.09 1.72-.22 2.58-.33-2.12.1-4.12.17-5.94.34h.01ZM210.14 68.88s.03.04.05.07c.18-.31.39-.64.58-.96-.21.3-.42.6-.64.89h.01ZM201.65 82.8c-.5.77-1.02 1.56-1.49 2.37 1.11-1.55 2.21-3.1 3.2-4.59-.23.23-.49.51-.75.79-.32.47-.65.95-.96 1.43ZM194.03 98.66c-.33-.4-.65-.84-1.05-1.17-.24-.2-.07-.49.17-.56-.23-.26-.42-.5-.63-.75 1.51-2.55 3.93-5.87 6.4-9.28-.17-.08-.29-.28-.2-.49.04-.09.09-.17.13-.26-1.21 1.78-2.42 3.55-3.61 5.33-.87 1.31-1.74 2.64-2.54 4-.29.5-.63 1.04-.87 1.61.81.65 1.63 1.27 2.47 1.88-.09-.11-.18-.21-.27-.32v.01ZM307.79 82.93c-1-3.17-2.05-6.32-3.1-9.48-1.62 4.08-3.69 9.17-6.16 15.19 3.32-1.04 6.77-1.87 10.27-2.5-.32-1.08-.67-2.15-1.01-3.21ZM149.5 80.7c.05-1.71.04-3.43 0-5.14-.1 2.26-.16 4.51-.22 6.77-.02.73-.03 1.46-.04 2.19.14-1.27.2-2.55.24-3.82h.02ZM228.98 98.3c.39 1.25.91 3.03.94 3.91.06-.03.12-.07.17-.1.08-1.29-.55-2.65-1.11-3.81ZM307.72 53.36c.81.5 1.53 1.04 2.07 1.49-.38-.8-.78-1.58-1.21-2.35-.17.03-.34.06-.51.11-.43.12-.86.26-1.29.41.35-.01.53.1.94.34ZM283.69 96.14c3.91-7.25 6.89-13.35 8.88-18.15l1.1-2.66c-1.27 2.64-2.56 5.27-3.83 7.9-1.53 3.15-3.06 6.31-4.58 9.47-.87 1.81-1.76 3.62-2.54 5.47.04.02.07.04.11.07.05.05.1.09.15.14.05-.73.27-1.48.71-2.24ZM289.92 103.23s-.04.01-.05.03c0-.02.04-.03.05-.04.05-.05.11-.1.16-.15l.21-.21c-.55 0-1.5-.27-2.55-.72.4.26.8.51 1.22.74.24.13.48.26.73.37.05.02.1.03.14.05a.27.27 0 0 1 .08-.07h.01ZM269.23 68.49c-.39-.19-.82-.48-1.33-.87-3.06-1.56-6.31-2.78-9.36-2.35-3.5.49-5.7 1.11-7.74 2.44 5.71-2.6 12.82-2.07 18.44.79l-.01-.01ZM177.87 53.69l1.06.03c-.96-.22-2-.25-2.89-.3-4.95-.26-9.99.33-14.86 1.19-2.44.43-4.88.95-7.28 1.59 9.09-1.76 15.69-2.77 23.97-2.51ZM219.85 55.51c-.18.12-.36.27-.56.45-.45.53-.86 1.11-1.26 1.66-1.91 2.61-3.71 5.31-5.57 7.95l-.12.18 8.05-10.11c-.18-.05-.36-.1-.55-.13h.01ZM510.71 54.1c.12-.15.29-.3.53-.45.69-.4 3.72-.63 5.87-.74-.36-.02-.73-.04-1.09-.05-1.84-.03-3.67.09-5.49.35.05.3.12.59.18.88v.01ZM510.76 86.02c1.37-3.07 2.49-6.27 3.57-9.46.55-1.64 1.12-3.3 1.6-4.97-1.59 4.01-3.67 9.14-6.2 15.3.24-.08.5-.14.74-.22.1-.22.19-.44.29-.65ZM566.95 75.76c.11-.02.23.03.31.11-.05-.13-.09-.26-.14-.39-.05.09-.11.18-.17.28ZM511.33 86.41c3.08-.89 6.24-1.62 9.46-2.14-1.51-3.98-2.98-7.96-4.39-11.87-.05.15-.09.31-.14.46-1.02 3.32-2.15 6.61-3.39 9.85-.48 1.25-.98 2.49-1.53 3.7h-.01ZM578.24 74.45c.11-.44.23-.87.35-1.31-.31.7-.64 1.39-.97 2.08.09.21.19.4.28.61.12-.46.23-.92.35-1.38h-.01ZM520.62 53.11c-.09 0-.18-.01-.28-.02.38.34.29 1.08.93 2.53l6.65 17.15c2.2 5.68 4.69 11.36 7.41 16.87l1.06 2.17c-2.95-7.05-5.92-14.08-8.87-21.13-1.58-3.79-3.16-7.59-4.7-11.4-.78-1.92-1.73-3.89-2.25-5.91-.03-.1 0-.19.04-.26h.01ZM578.78 77.87c1.45-5.77 3.07-10.43 3.58-13.36.05-.34.16-.88.31-1.55-.67 1.79-1.37 3.56-2.08 5.33-.12.43-.23.86-.35 1.29-.65 2.43-1.29 4.86-1.9 7.3.14.33.29.65.43 1l.01-.01ZM545.3 94.66c.02-.44.03-.83.05-1.12.02-1.01.05-2.02.11-3.02.03-6.66-.46-14.33-1.46-22.8-.13-.42-.27-1.24-.56-2.89 0-.02 0-.04-.01-.06.62 6.61.95 13.25 1.32 19.87.17 3.08.33 6.16.52 9.23.02.25.03.52.04.78l-.01.01ZM580.77 102.81c.13.2.27.38.37.49.27-.11.53-.22.8-.32-.43.09-.82.05-1.17-.16v-.01ZM530.48 104.07h.33c-.36-.13-.71-.32-1.04-.56.14.24.3.47.45.7.06-.08.14-.13.26-.13v-.01ZM542.63 58.82c.06.23.11.47.15.71.14-.33.36-.62.7-.86-.28.05-.57.11-.85.15ZM583.81 57.87c.15-.7.29-1.41.42-2.11-.14.45-.28.9-.42 1.34-.46 1.44-.89 2.89-1.31 4.34.44-1.19.88-2.37 1.31-3.57ZM523.62 91.48c-4.66 1.17-9.05 2.89-14.02 5.27 4.65-1.84 9.48-3.29 14.28-4.63-.09-.22-.17-.41-.26-.64ZM460.64 78.3c-.04-2.9-.11-5.81-.28-8.71-.1-1.68-.17-3.43-.5-5.09-.07.02-.14.03-.2.05.3 6.54.45 12.17.51 17.12.17-.07.34-.14.51-.2 0-1.06-.01-2.11-.03-3.17h-.01ZM470.63 63.24c-3.38-.26-6.81.32-10.1 1.1.41 2.01.47 4.14.57 6.18.18 3.55.25 7.11.27 10.67 3.31-1.38 6.5-3.12 9.3-5.35 1.96-1.56 3.86-3.41 5.02-5.66.73-1.41 1.19-3.22.26-4.65-1.09-1.7-3.46-2.14-5.32-2.29ZM460.29 63.68c1-.24 2.01-.46 3.04-.65-1.15.16-2.37.38-3.71.69v.13c.07-.02.15-.04.22-.05.11-.13.3-.18.45-.11v-.01ZM457.24 100.96c.43-.03.86-.07 1.29-.11.14-.49.27-.99.38-1.49-.44.7-1 1.23-1.67 1.6ZM482.88 104.98c-.18.23-.36.38-.55.47.14.09.27.19.4.28a70.76 70.76 0 0 0 4.37-4.63c.76-.89 1.52-1.81 2.19-2.77-.3-.27-.61-.53-.92-.79-.07 1.94-4.62 6.32-5.49 7.45v-.01Z",transform:"translate(-144.023 -51.76)"}),e.jsx("path",{d:"M474.36 63.31c-.4-.16-.84-.27-1.29-.37 1.56.42 3.08 1.22 3.76 2.74.62 1.4.32 2.95-.28 4.32.7-1.22.94-2.34.74-3.47-.24-1.33-1.19-2.54-2.93-3.21v-.01ZM477.34 89.18c-1.2-.81-2.4-1.62-3.6-2.42-.14.1-.26.19-.4.29 1.4.67 2.73 1.39 4 2.13ZM465.88 93.85c.37.25.74.5 1.1.75.46.32.92.65 1.38.97-1.57-1.2-2.01-1.61-2.49-1.72h.01ZM574.92 90.06c-2.28-5.21-4.93-11.13-5.67-12.26-.1-.15-1.57-3.01-1.63-3.08 0 0-.01.02-.02.02.4 1.37 1.09 2.69 1.65 3.99 2.14 4.95 4.36 9.86 6.67 14.73.6 1.26 1.21 2.52 1.83 3.78-.75-2.01-1.64-4.45-2.83-7.18ZM448.73 65.29c.1.2.22.38.34.57.22-.02.43-.06.65-.08v-.08c-.14-.05-.25 0-.99-.41ZM460.16 94.81c-.02.31-.06.59-.1.89-.03 1.71-.33 3.43-.79 5.07.15-.02.3-.03.45-.05.01-.04.02-.08.03-.11.09-.34.15-.69.2-1.03.17-1.07.25-2.16.33-3.24.05-.69.08-1.39.12-2.08-.27.1-.27.26-.24.57v-.02Z",transform:"translate(-144.023 -51.76)"}),e.jsx("path",{d:"m328.67 98.12-3.22-6.58c-1.29-2.63-2.53-5.29-3.72-7.97-.25-.85-.52-1.69-.79-2.53-.81-2.57-1.67-5.12-2.55-7.67-1.92-5.53-3.9-11.08-6.32-16.41-.72-1.58-1.46-3.44-2.63-4.79-.03-.17-.16-.29-.34-.36a.282.282 0 0 0-.23-.04c-.06-.01-.12 0-.18.01-.74.06-1.5.38-2.19.61-2.22.77-4.4 1.64-6.63 2.38-.03-.08-.06-.16-.09-.25-.15-.42-.82-.24-.67.19.03.09.07.19.1.28l-.18.06c-.36.11-.28.6 0 .68.18 1.18.63 2.36.98 3.49.03.09.06.17.08.26-.08.23-.17.46-.24.64-.37.98-.79 1.94-1.21 2.9-1.27 2.89-2.62 5.75-3.98 8.6-3.18 6.67-6.44 13.31-9.64 19.97-1.08 2.25-2.2 4.5-3.15 6.81-.13.32.24.5.5.37 1.34 1.33 2.84 2.5 4.4 3.57.65.44 1.31.87 2.01 1.24.4.22.86.48 1.33.5.24.01.35-.19.33-.37.11-.1.21-.21.28-.28.41-.41.81-.84 1.2-1.26.85-.92 1.69-1.87 2.5-2.84 6.31-2.34 12.6-4.31 18.71-5.84 2.14 5.3 3.43 8.43 3.97 9.58.55 1.05 1.15 1.88 1.82 2.52 1.32.56 6.96-.03 9.23-1.96.87-1.28 1.19-2.67.93-4.15-.09-.5-.22-.95-.4-1.33l-.01-.03Zm-20.09-45.61c.43.77.83 1.56 1.21 2.35-.54-.45-1.27-.99-2.07-1.49-.42-.24-.6-.35-.94-.34.43-.15.85-.29 1.29-.41.17-.05.34-.08.51-.11Zm-25.86 45.66c.78-1.85 1.67-3.66 2.54-5.47 1.51-3.16 3.05-6.31 4.58-9.47 1.28-2.63 2.56-5.26 3.83-7.9l-1.1 2.66c-1.99 4.79-4.97 10.9-8.88 18.15-.43.76-.66 1.51-.71 2.24-.05-.05-.1-.09-.15-.14a.259.259 0 0 0-.11-.07Zm6.24 4.71c-.42-.23-.82-.48-1.22-.74 1.05.45 2 .72 2.55.72l-.21.21c-.05.05-.11.1-.16.15-.01.01-.04.03-.05.04 0-.02.03-.02.05-.03a.27.27 0 0 0-.08.07c-.05-.02-.1-.03-.14-.05-.25-.1-.49-.24-.73-.37h-.01Zm15.73-29.43c1.05 3.15 2.1 6.31 3.1 9.48.34 1.06.69 2.13 1.01 3.21-3.5.63-6.95 1.46-10.27 2.5 2.48-6.03 4.54-11.11 6.16-15.19Zm4.79 12.57c-.23-.79-.49-1.58-.73-2.36-.79-2.54-1.63-5.08-2.46-7.61l-1.2-3.6c.02-.04.04-.09.05-.13 1.6 4.45 3.28 9 5.01 13.57l-.67.12v.01Zm5.83-18.27-.15-.54c-.49-1.64-1.03-3.28-1.6-4.9.23.58.47 1.17.7 1.75 1.56 4.03 3.01 8.1 4.39 12.2-.33-.82-.67-1.64-.98-2.46l-2.35-6.05h-.01ZM390.43 79.37c-.13-10.43-.22-17.5-.24-19.97-.24-1.6.21-2.88-.65-3.65-.14-.13-.32-.23-.52-.32h.03c.45 0 .45-.69 0-.7-1.75-.03-3.5-.04-5.25-.14-1.38-.08-2.76-.21-4.15-.31-.07 0-.12.01-.17.04-.21-.07-.47.03-.45.31l.03.45c-.11.14-.19.3-.22.5-.21 1.26-.32 13.67-.36 23.59-.32 5.79-.67 11.57-.97 17.36-.09 1.73-.29 3.54-.21 5.3-.39.02-.38.64.04.69v.12c.05.44.74.45.7 0v-.06c1.1.09 2.2.21 3.3.3 1.14.19 2.44.2 3.29.17 1.73-.05 2.92-.05 3.8-.37.45-.05.9-.11 1.35-.17.44-.06.25-.73-.19-.67h-.01c.24-.32.45-.72.62-1.25.66-1.84.41-6.36.34-11.33l-.13-9.9.02.01Zm-12.26 18.17c.09-1.91.2-3.81.31-5.71.06 5.38 0 6.14-.01 6.51-.05 1.65-.21 2.81.72 3.66-.39-.04-.78-.07-1.17-.1-.06-1.44.09-2.93.16-4.35l-.01-.01ZM588.97 53.85c-2.06-.25-3.17-.51-3.76-.6a.3.3 0 0 1 .04-.08c.22-.39-.39-.75-.6-.35-.56 1.02-.9 2.19-1.26 3.29-.61 1.88-1.17 3.78-1.72 5.68-.63 2.19-1.24 4.39-1.83 6.59-.81 2.03-1.67 4.05-2.61 6.03-1.7-3.64-3.11-6.04-4.03-7.57-2.26-3.74-2.85-5.48-3.57-6.08l.31-.09c.43-.12.25-.8-.19-.67-1.06.3-2.12.6-3.17.95-.93.32-1.85.69-2.76 1.07-.13.05-.19.16-.22.27-.04.02-.08.05-.11.07-.04-.06-.07-.12-.11-.18a.354.354 0 0 0-.48-.12c-.16.09-.22.32-.13.48l.33.54c0 .09.02.18.06.28.51 1.16.78 1.38.72 1.47-2.42 3.44-5.41 7.86-6.2 9.1-1.27 1.97-2.01 3.14-2.45 3.84l-.91-6.56-.43-4.1c-.19-1.85-.37-3.23-.53-4.13-.19-1.1-.3-2.15-.45-3.16-.2-1.36-.29-2.06-.47-2.42h.04c.45.02.45-.68 0-.7-3.43-.16-6.81.94-10.17 1.48-.24-.22-.73-.04-.58.32.24.59.33 1.25.43 1.87.17 1.06.29 2.13.4 3.2.32 3.09.53 6.2.74 9.3.44 6.75.77 13.51 1.17 20.26.11 1.95.13 3.96.46 5.89.05.3.37.31.55.14.74 1.71 2.87 1.27 6.13 1.27 1.34 0 2.39.04 2.99-.11.02.32.48.53.63.18 3.61-8.26 7.41-16.46 12.05-24.2.03-.05.04-.1.05-.15.3.73.64 1.45.94 2.16.97 2.26 1.97 4.52 2.98 6.76 2.26 5.03 4.54 10.07 7.09 14.96.47.9.94 1.79 1.47 2.65.2.32.4.67.66.96-.18.25 0 .68.34.54.91-.38 1.82-.75 2.76-1.07 1.04-.35 2.11-.65 3.17-.95.39-.11.28-.66-.07-.68.62-.4.95-.96.87-1.91-.3-3.34.72-7.47.86-8.52l2.14-11.43c1.75-10.74 3.13-17.51 3.23-20.86.02-.49.08-2.84.13-3.24.17-1.25.48-1-4.96-1.65l.03-.02Zm-46.19 5.67c-.04-.24-.09-.48-.15-.71l.85-.15c-.34.24-.56.53-.7.86Zm1.95 25.12c-.36-6.63-.7-13.26-1.32-19.87 0 .02 0 .04.01.06.29 1.65.44 2.47.56 2.89 1 8.46 1.5 16.14 1.46 22.8-.06.99-.1 2-.11 3.02-.01.29-.03.68-.05 1.12-.01-.26-.03-.53-.04-.78-.19-3.08-.35-6.16-.52-9.23l.01-.01Zm36.4 18.66c-.11-.11-.24-.29-.37-.49.35.21.74.26 1.17.16-.27.11-.53.22-.8.32v.01Zm-.89-33.72c.12-.43.23-.86.35-1.29.71-1.77 1.41-3.55 2.08-5.33-.15.68-.26 1.22-.31 1.55-.5 2.94-2.13 7.59-3.58 13.36-.15-.35-.29-.66-.43-1 .61-2.44 1.25-4.87 1.9-7.3l-.01.01Zm3.56-12.48c.14-.44.28-.89.42-1.34-.13.7-.27 1.41-.42 2.11-.43 1.19-.86 2.38-1.31 3.57.42-1.45.85-2.9 1.31-4.34Zm-5.22 16.05c-.11.44-.23.87-.35 1.31-.12.46-.23.92-.35 1.38-.1-.22-.19-.4-.28-.61.34-.69.66-1.38.97-2.08h.01Zm-11.64 2.62c.06-.1.12-.19.17-.28.05.13.09.26.14.39a.398.398 0 0 0-.31-.11Zm2.3 2.98c-.56-1.3-1.25-2.63-1.65-3.99 0 0 .01-.02.02-.02.06.08 1.52 2.93 1.63 3.08.73 1.13 3.38 7.04 5.67 12.26 1.2 2.73 2.08 5.17 2.83 7.18-.62-1.25-1.23-2.51-1.83-3.78-2.31-4.87-4.53-9.78-6.67-14.73ZM275.92 87.03c-1.06-2.18-1.13-3.45-2.44-2.93-1.52.57-2.94 1.3-4.5 2.1-1.4.72-2.68 1.44-3.92 2.12.01-.25-.24-.5-.51-.34-4.8 2.93-12.41 4.7-17.28 1.31-1.98-1.77-3.32-4.15-3.97-5.78-.29-.95-.49-1.94-.63-2.93-.14-3.34 1.58-6.53 3.9-9.12.8-.79 1.68-1.51 2.66-2.12 3.7-2.3 8.22-3.07 12.51-2.51 2.71.35 5.32 1.24 7.71 2.55.39.22.75-.39.35-.6-.18-.1-.37-.18-.55-.27.56.27 1.03.33 1.51.19l-.48.39c-.15.11-.23.3-.13.48.09.15.33.24.48.13 1.3-.97 2.46-2.09 3.45-3.37.37-.29.64-.6.65-.97v-.02c.08-.33-.03-.7-.21-1.08-.31-.87-.98-2.01-2.19-3.26-2.43-2.52-3.79-3.45-5.68-4.26-1.14-.49-3.12-1.06-4.42-1.23-3.28-.42-10.64-1.21-18.18 4.11-7.74 5.46-11.94 12.3-12.23 20.61-.08 2.06.04 3.98.34 5.71.74 4.18 2.57 8 5.44 11.34 4.26 4.99 9.76 7.52 16.34 7.52 4.85 0 9.69-1.77 14.89-4.62.23-.12.45-.23.68-.35 2.19-1.1 4.37-2.23 6.46-3.5.49-.3 1.03-.61 1.5-.98 1.47-.87 1.11-1.12.49-2.95-.39-1.14-.76-2.7-2.06-5.36l.02-.01Zm-17.38-21.76c3.05-.42 6.31.79 9.36 2.35.51.39.94.68 1.33.87-5.61-2.86-12.72-3.39-18.44-.79 2.05-1.33 4.24-1.95 7.74-2.44l.01.01ZM443.67 72.67c-.4-2.2-1.15-4.33-2.37-6.22-1.49-2.32-3.58-4.19-5.91-5.64-6.17-3.81-13.75-5.11-20.83-6.01-3.23-.41-6.47-.69-9.72-.92l-1.39-.12c-.85-.07-1.52-.1-2.05-.1-1.08-.06-2.17-.12-3.25-.17-.08 0-.14.02-.19.05-.1.05-.18.14-.16.3.27 2.55-.01 5.12-.92 7.52-.15.38.4.56.62.28 1.32.59 2.68 1.05 4.08 1.37 0 2.78-.14 7.58-.33 12.91 0 0 0 .02-.01.03-.61 3.66-.79 7.42-1 11.12-.23 4.01-.43 8.03-.44 12.05 0 .64 0 1.28.03 1.93.02.31 0 .68.15.96.06.11.14.16.24.17-.2.17-.21.54.11.59 3.83.67 7.78.71 11.68.25 2.3-.19 4.87-.65 7.65-1.56 1.85-.54 3.67-1.18 5.43-1.91 7.2-3.02 14.31-8.07 17.35-15.53.76-1.86 1.17-3.8 1.31-5.75.3-1.93.28-3.82-.09-5.58l.01-.02Zm-19.32-15.42c5.74 1.41 11.94 3.68 15.65 8.55.25.32.47.65.69.99-2.3-2.82-5.68-5.69-12.88-8.23-2.16-.76-4.35-1.43-6.64-2.02 1.06.21 2.13.45 3.18.71Zm-25.82-3.04c.13 0 .27.01.4.02-.14.1-.26.23-.37.38 0-.13-.02-.26-.03-.4Zm34.82 22.17c-.75 3.09-3.55 5.66-5.88 7.58-3.35 2.76-7.21 5.03-11.28 6.54-1.33.49-2.71.9-4.12 1.15.06-1.38.08-2.76.07-4.13-.02-3.78-.16-7.56-.41-11.33-.09-1.37-.18-2.74-.37-4.1 0-.06-.03-.11-.06-.15.09-3.25.12-6.16.03-8.12 6.86 1.05 10.56 2.17 14.06 3.62 5.52 2.28 8.59 5.44 7.97 8.96l-.01-.02Zm-22 16.15c-.12 0-.23-.02-.34-.03l.34-.03v.06Zm-.69-.7c0-3.13.26-8.84.47-14.51.06 1.2.11 2.41.15 3.6.15 3.6.25 7.23.09 10.83-.24.03-.48.05-.71.07v.01Zm-12.33-30.94c.37.63 2.01 1.01 3.23 1.25v.15c-1.31-.31-2.59-.73-3.83-1.29.12-.36.23-.72.33-1.09.08.48.18.84.27.98Zm13.7 31.65v-.18c3.41-.56 6.71-2.02 9.69-3.68 2.31-1.28 4.59-2.78 6.63-4.53-4.69 4.53-11.61 8.24-16.33 8.38l.01.01Zm24.07-.75c-2.05 1.93-4.37 3.56-6.83 4.95 2.7-1.78 5.52-4.03 8.42-6.87.82-.82 1.56-1.69 2.23-2.59-1.08 1.65-2.38 3.16-3.81 4.51h-.01ZM187.16 92.14c-.79-2.47-2.1-7.12-3.1-6.87-.19-.01-2.09.77-4.08 1.54-3.06 1.18-5.91 2.13-10.09 2.82-2.74.42-5.87 1.01-10.61 1.06.04-3.34.05-6.01.05-7.99 7.97-.65 12.33-2.11 16.37-3.55 1.11-.39 2.69-1.01 2.63-1.8-.08-.35-.55-1.39-1.17-2.61-.47-1.16-.98-2.31-1.61-3.38-.42-.71-1.04-1.69-1.86-2.06-.11-.08-.22-.13-.29-.12-.02 0-.04 0-.07.01-.19-.04-.39-.05-.6-.01-.17.03-.24.15-.25.28-.04.02-.09.04-.14.05-4.33 1.48-8.85 2.33-13.24 3.61a499.1 499.1 0 0 0-.31-8.19c4.51-.99 8.88-1.38 13.11-1.82 3.68-.38 6.28.12 7.47.34.59.11.9.16 1.16.18h.1c-.1.37.44.66.62.28.02-.04.03-.08.05-.13.15.2.53.22.62-.1.17-.58.19-1.21.21-1.81v-.36c.03-.15.05-.3.07-.45.52-2.47.33-5.09-.64-7.44-.11-.27-.44-.28-.6-.14-.08-.21-.15-.42-.24-.62-.19-.41-.79-.05-.6.35.03.07.05.15.09.22-.98-.42-2.15-.54-3.17-.63-2.17-.19-4.37-.14-6.54 0-5.7.35-11.4 1.3-16.91 2.79-2.08.56-4.13 1.22-6.14 2-4.54 1.05-3.79 1.51-2.17 6.07.18.51.46 1.68.54 1.94.82 2.47 1.08 2.13 3.1 2.13s0 .05 0 .08h.52c-.48 2.66-.51 5.45-.62 8.13-.15 3.48-.22 6.96-.28 10.45 0 .41-.01.82-.02 1.23-.16.29-.33.57-.51.85-.05.38-.09.77-.14 1.18-.42 3.52-.59 6.48-.52 8.8v.34c.02.47.05.76.06.87.16 1.57-.26 3.47 1.35 3.79 1.61.32 3.5.55 4.85.55.11 0 .22-.02.33-.02 1.79.24 3.67.05 5.45-.12 2.85-.28 5.69-.7 8.51-1.19 3.03-.53 6.05-1.14 9.04-1.86 2.4-.58 4.82-1.19 7.13-2.06.51-.19 1.73-.57 2.46-1.14 1.81-.68 2.18-1 1.57-2.67-.23-.62-.48-1.49-.91-2.78l-.03-.02Zm-11.12-38.71c.89.05 1.93.08 2.89.3-.33 0-.68-.02-1.06-.03-8.28-.26-14.88.75-23.97 2.51 2.41-.64 4.85-1.16 7.28-1.59 4.87-.86 9.91-1.45 14.86-1.19Zm-26.53 22.13c.03 1.71.04 3.43 0 5.14-.04 1.27-.11 2.55-.24 3.82 0-.73.02-1.46.04-2.19.05-2.26.12-4.51.22-6.77h-.02Zm6.73 27.85c.2-.1.4-.21.58-.33 1.82-.17 3.82-.24 5.94-.34-.86.11-1.72.24-2.58.33-1.27.14-2.61.31-3.93.34h-.01ZM534.48 85.44c-3.52-8.38-7.07-16.75-10.5-25.17-.63-1.54-1.25-3.09-1.86-4.65-.31-.8-.65-1.6-.87-2.43-.04-.17-.17-.24-.31-.25.1-.2 0-.51-.29-.53-1.59-.08-3.18-.22-4.78-.25-1.96-.03-3.91.13-5.84.42-.31.05-.31.38-.13.56-.03.06-.05.14-.04.22.23 1.54.63 3.06 1.16 4.53.13.35.27.7.41 1.06l-2.68 6.18c-.11.03-.2.09-.25.22-.67 1.9-1.52 3.73-2.34 5.56a536.85 536.85 0 0 1-3.9 8.45c-2.64 5.64-5.34 11.25-7.91 16.93-.44.97-.88 1.94-1.29 2.93-.2.48-.47 1-.55 1.52v.05c-.02.12.02.26.16.34 1.19.73 2.41 1.41 3.66 2.05 1.2.62 2.45 1.25 3.76 1.61.43.12.62-.55.19-.67-1.13-.31-2.2-.83-3.24-1.36 1.09.36 2.1.69 2.75.93 2.82 1.01 2.38 1.1 4.3-3.75 2.1-1.09 4.34-1.96 6.53-2.79 4.35-1.64 8.8-3.03 13.27-4.29.82 2.01 1.77 3.97 2.72 5.92.35.83.62 1.45.79 1.82.22.42.45.8.69 1.15.17.33.33.67.5 1 .42.8.84 1.63 1.4 2.35.23.29.6 0 .55-.31 1.53-.02 3.06-.07 4.58-.27.92-.12 1.82-.32 2.71-.54 1.39-.27 3.85-1.11 3.74-1.42-.67-1.96-1.55-3.87-2.34-5.78-1.57-3.78-3.16-7.56-4.75-11.33v-.01Zm-11.65-26.16c1.54 3.81 3.12 7.6 4.7 11.4 2.94 7.05 5.91 14.09 8.87 21.13l-1.06-2.17c-2.71-5.51-5.2-11.19-7.41-16.87l-6.65-17.15c-.65-1.45-.55-2.19-.93-2.53.09 0 .18.01.28.02a.29.29 0 0 0-.04.26c.52 2.02 1.47 3.98 2.25 5.91h-.01Zm-6.58 13.58c.05-.15.09-.31.14-.46 1.41 3.92 2.88 7.9 4.39 11.87-3.22.52-6.38 1.25-9.46 2.14.55-1.22 1.05-2.46 1.53-3.7 1.24-3.24 2.37-6.53 3.39-9.85h.01Zm-.23-20c.36 0 .73.03 1.09.05-2.15.1-5.18.33-5.87.74-.24.15-.41.3-.53.45-.06-.29-.13-.58-.18-.88 1.82-.26 3.65-.39 5.49-.35v-.01Zm-.09 18.72c-.49 1.67-1.05 3.33-1.6 4.97-1.07 3.19-2.19 6.38-3.57 9.46-.09.21-.19.43-.29.65-.25.07-.5.14-.74.22 2.53-6.16 4.61-11.29 6.2-15.3Zm-6.34 25.16c4.97-2.38 9.37-4.1 14.02-5.27l.26.64c-4.8 1.35-9.63 2.8-14.28 4.63Zm20.17 6.76c.33.23.68.42 1.04.56h-.33c-.12 0-.21.06-.26.13-.15-.23-.31-.45-.45-.7v.01ZM226.57 91.75c-3.55-4.74-6.68-9.11-9.31-12.99 9.2-15.25 10.05-17.81 10.35-18.38.17-.34 1.09-2.27.64-2.53-1.13-.65-1.03-.65-2.97-1.71-1.19-.65-3.04-1.61-4.53-2.12-1.71-.59-1.24-.36-3 2.77-.06.1-.11.2-.17.3-.75 1.02-1.48 2.05-2.2 3.09-1.88 2.71-3.73 5.45-5.69 8.1-3.68-4.91-6.88-8.76-9.51-11.43-.15-.15-.3-.29-.46-.42-1.27-1.28-7.24 3.53-7.93 5.58-.09.09-.19.16-.28.25-.27.26.03.64.33.58.19.65.5 1.29.94 1.91 3.85 5.06 7.19 9.76 9.94 14-1.23 2.61-3.06 5-4.67 7.38l-2.28 3.33c-.5.66-.93 1.23-1.29 1.69-.67.93-2.09 2.61-2.3 3.87-.51.85-1.16 1.84-1.29 2.83-.06.44.61.63.67.19.01-.08.04-.15.06-.22 1.36 1.08 2.76 2.11 4.19 3.11 1.3.91 2.62 1.85 4.04 2.56.21.1.4 0 .48-.17.24.07.48.14.72.2.44.1.62-.57.19-.67-2.02-.48-3.77-1.57-5.23-3.02-.47-.46-.9-.96-1.32-1.46 1.74 1.35 4.2 2.89 5.89 4.14 1.39 1.03 2.85-2.27 4.22-4.2 1.86-2.64 3.96-5.86 5.52-8.29l10.39 14.51c.67.81 1.14 1.21 1.57 1.36-.05.24.12.51.41.4 1.53-.58 3.05-1.19 4.54-1.87 1.52-.69 3.06-1.45 4.36-2.5a.28.28 0 0 0 .12-.23c1.66-1.1.81-1.74-1.41-4.91-1.13-1.58-1.71-2.36-3.7-5.01l-.03-.02Zm2.41 6.54c.56 1.15 1.19 2.52 1.11 3.81-.06.04-.12.07-.17.1-.03-.88-.55-2.66-.94-3.91Zm-16.51-32.73c1.86-2.65 3.65-5.35 5.57-7.95.4-.55.81-1.13 1.26-1.66.19-.18.38-.33.56-.45.18.03.36.08.55.13l-8.05 10.11.12-.18h-.01ZM192.7 95.48c.79-1.37 1.66-2.69 2.54-4 1.19-1.79 2.4-3.56 3.61-5.33-.04.09-.09.17-.13.26-.1.22.03.41.2.49-2.47 3.42-4.89 6.73-6.4 9.28.21.24.4.48.63.75-.24.07-.4.36-.17.56.4.33.72.77 1.05 1.17.09.11.18.21.27.32-.84-.61-1.66-1.24-2.47-1.88.24-.57.58-1.11.87-1.61v-.01Zm7.46-10.32c.47-.81.98-1.59 1.49-2.37.31-.48.64-.95.96-1.43.26-.29.52-.56.75-.79-.99 1.48-2.09 3.03-3.2 4.59Zm10.03-16.22s-.03-.05-.05-.07c.22-.29.43-.59.64-.89-.2.32-.4.65-.58.96h-.01ZM371.54 87.96c-.01-.08-.01-.16-.03-.23-.06-.38-.58-.29-.66.03-.3-.05-.6-.08-.81-.11-1.14-.15-2.29-.19-3.44-.2 1.04-.09 2.09-.18 3.14-.23.45-.02.45-.72 0-.7-6.57.35-13.14 1.23-19.65 2.11-1.53.21-3.05.42-4.57.68-.01 0-.02.01-.04.01-.04-3.33-.13-6.66-.24-9.99-.19-5.7-.4-11.41-.88-17.1-.13-1.51-.23-3.07-.49-4.58 0-.25 0-.48-.02-.68-.06-1.19-.04-2.61-.68-2.78-.16-.07-.72-.16-1.5-.24.22-.17.16-.62-.2-.63-1.19-.04-2.39.09-3.57.23-1.2.14-2.41.32-3.59.6-.16-.1-.41-.06-.5.12-.06.02-.13.03-.19.05-.35.1-.29.55-.03.66-.26.6-.19 2.27-.21 3-.02.66-.66 33.73-.9 40.3-.03.65.06 1.12.04 1.45-.16 3.05.87 4.96 6.34 3.93 1.09-.08 2.75-.77 5.36-1.43 4.13-1.04 5.78-1.52 6.2-1.65 6.43-1.69 6.78-1.97 11.72-2.43.55-.05 4.8-.38 6.03-.3.64.04 1.19.07 1.65.1.09 0 .16-.03.24-.05.1.27.56.33.66-.02.39-1.32.61-2.71.78-4.08.2-1.61.29-3.24.15-4.86.24.03.52-.23.38-.53-.09-.2-.27-.33-.49-.43v-.02Zm-.63.56c.07.57.11 1.14.11 1.71-.21-.99-.53-1.71-.95-1.87.22.03.44.06.65.11.06.01.12.04.19.05Zm-25.41 1.73c1.54-.36 3.1-.64 4.66-.89-1.61.37-3.18.77-4.66 1.2v-.31Zm-.86-7.37c-.07-1.37-.16-2.75-.25-4.12-.21-3.13-.45-6.27-.79-9.4.02-2.25.08-4.31.13-6.11.16 2.08.29 4.16.4 6.24.23 4.46.38 8.93.5 13.39h.01Zm-.94-4c.16 2.41.29 4.83.39 7.24.06 1.6.14 3.22.09 4.83-.15.05-.32.09-.47.14V78.88h-.01ZM483.72 92.83c-3.05-2.28-6.22-4.4-9.38-6.51 8.86-6.49 13.49-12.95 13.73-19.23.04-.76 0-1.5-.13-2.2-.67-3.82-3.5-6.68-8.39-8.48.13.04.27.08.4.13 3.92 1.39 7.74 4.23 8.5 8.56.34 1.95-.05 3.96-.98 5.69-.21.4.39.75.6.35 1.86-3.46 1.46-7.55-.97-10.63-3.53-4.47-9.76-5.88-15.16-6.16-2.32-.12-4.64-.04-6.95.19-6 .32-12.71 1.68-17.63 3.21-.37.11-.67.23-.92.35-.2-.17-.62.02-.57.37v.03c-.64.68-.18 1.64.48 3.21.38.91.67 1.89 1.15 2.58.32.76.68 1.51 1.13 2.19.14.21.38.19.53.07.19-.02.38-.05.57-.08v1.57c-.06.06-.1.13-.11.23-.27 4.18-.34 8.38-.48 12.57l-.3 9.03c-.24 3.91-.44 6.77-.46 7.26-.05.88-.11 1.95.07 2.81-.01.22-.02.43-.04.65 0 .11-.02.23-.03.35 0 .05-.03.27-.01.16-.05.4.5.59.64.28.05.04.12.08.2.08 1.75.13 3.5.28 5.25.3 1.69.02 3.38-.12 5.06-.32.08.23.36.39.55.15.06-.08.11-.17.16-.26.18-.09.24-.32.18-.48.05-.2.1-.4.13-.6.16-.86.25-1.74.33-2.62.11-1.17.17-2.34.23-3.51.15-.01.32-.03.52-.04.36-.03 1.73-.15 2.06-.15.39 0 .7-.02.95-.04 1.76 1.11 3.45 2.35 5.14 3.55 2.83 2.01 5.64 4.04 8.47 6.04 1.42 1 2.85 2 4.29 2.97.1.06.19.07.27.04.08 0 .17-.02.25-.1 1.61-1.56 3.15-3.18 4.6-4.88.75-.88 1.49-1.78 2.15-2.73.01.01.03.02.04.03.34.3.83-.2.49-.49-2.16-1.9-4.34-3.76-6.64-5.48l.03-.01Zm-6.38-3.65a55.72 55.72 0 0 0-4-2.13c.14-.1.26-.19.4-.29 1.2.81 2.4 1.61 3.6 2.42Zm-20.1 11.78c.67-.37 1.23-.91 1.67-1.6-.11.5-.24 1-.38 1.49-.43.04-.86.08-1.29.11Zm2.38-37.24c1.34-.31 2.56-.52 3.71-.69-1.03.19-2.04.41-3.04.65-.14-.07-.34-.02-.45.11-.07.02-.15.04-.22.05v-.13.01Zm.04.84c.07-.02.14-.03.2-.05.34 1.66.41 3.41.5 5.09.17 2.9.24 5.81.28 8.71l.03 3.17c-.17.07-.34.14-.51.2-.06-4.96-.21-10.58-.51-17.12h.01Zm16.04 5.62c-1.16 2.25-3.06 4.1-5.02 5.66-2.8 2.23-5.99 3.97-9.3 5.35-.01-3.56-.09-7.12-.27-10.67-.1-2.04-.16-4.16-.57-6.18 3.3-.78 6.72-1.36 10.1-1.1 1.85.14 4.23.59 5.32 2.29.92 1.43.46 3.24-.26 4.65Zm.85-.18c.6-1.37.9-2.92.28-4.32-.67-1.52-2.2-2.32-3.76-2.74.46.1.89.21 1.29.37 1.74.67 2.69 1.88 2.93 3.21.2 1.13-.05 2.25-.74 3.47V70Zm-27.47-4.14c-.12-.19-.23-.38-.34-.57.74.42.85.36.99.41v.08c-.22.03-.43.06-.65.08Zm11.21 30.46c-.08 1.08-.16 2.17-.33 3.24-.05.35-.11.69-.2 1.03 0 .04-.02.07-.03.11-.15.02-.3.04-.45.05.45-1.64.76-3.36.79-5.07.03-.29.08-.57.1-.89-.03-.31-.03-.47.24-.57-.04.69-.07 1.39-.12 2.08v.02Zm5.6-2.47c.48.11.92.52 2.49 1.72-.46-.32-.92-.65-1.38-.97-.37-.25-.73-.5-1.1-.75h-.01Zm21.23 7.24a70.76 70.76 0 0 1-4.37 4.63c-.14-.09-.27-.19-.4-.28.19-.09.37-.24.55-.47.87-1.14 5.43-5.51 5.49-7.45.31.26.62.53.92.79-.67.97-1.42 1.88-2.19 2.77v.01Z",fill:"currentColor",transform:"translate(-144.023 -51.76)"})]}),Kre=({style:t,size:n="small",withText:r})=>e.jsxs("div",{className:`ExcalidrawLogo is-${n}`,style:t,children:[e.jsx(qre,{}),r&&e.jsx(Zre,{})]}),Qre=({icon:t,shortcut:n,children:r})=>{let i=Cre();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"welcome-screen-menu-item__icon",children:t}),e.jsx("div",{className:"welcome-screen-menu-item__text",children:r}),n&&!i.editor.isMobile&&e.jsx("div",{className:"welcome-screen-menu-item__shortcut",children:n})]})};Qre.displayName="WelcomeScreenMenuItemContent";var Jre=({onSelect:t,children:n,icon:r,shortcut:i,className:s="",...a})=>e.jsx("button",{...a,type:"button",className:`welcome-screen-menu-item ${s}`,onClick:t,children:e.jsx(Qre,{icon:r,shortcut:i,children:n})});Jre.displayName="WelcomeScreenMenuItem";var eie=({children:t,href:n,icon:r,shortcut:i,className:s="",...a})=>e.jsx("a",{...a,className:`welcome-screen-menu-item ${s}`,href:n,target:"_blank",rel:"noreferrer",children:e.jsx(Qre,{icon:r,shortcut:i,children:t})});eie.displayName="WelcomeScreenMenuItemLink";var tie=({children:t})=>{let{WelcomeScreenCenterTunnel:n}=F4();return e.jsx(n.In,{children:e.jsx("div",{className:"welcome-screen-center",children:t||e.jsxs(e.Fragment,{children:[e.jsx(nie,{}),e.jsx(rie,{children:y6("welcomeScreen.defaults.center_heading")}),e.jsxs(iie,{children:[e.jsx(aie,{}),e.jsx(sie,{})]})]})})})};tie.displayName="Center";var nie=({children:t})=>e.jsx("div",{className:"welcome-screen-center__logo excalifont welcome-screen-decor",children:t||e.jsx(Kre,{withText:!0})});nie.displayName="Logo";var rie=({children:t})=>e.jsx("div",{className:"welcome-screen-center__heading welcome-screen-decor excalifont",children:t});rie.displayName="Heading";var iie=({children:t})=>e.jsx("div",{className:"welcome-screen-menu",children:t});iie.displayName="Menu";var sie=()=>{let t=Tre();return e.jsx(Jre,{onSelect:()=>t.executeAction(O8),shortcut:"?",icon:JF,children:y6("helpDialog.title")})};sie.displayName="MenuItemHelp";var aie=()=>{let t=g3(),n=Tre();return t.viewModeEnabled?null:e.jsx(Jre,{onSelect:()=>n.executeAction(P8),shortcut:P4("loadScene"),icon:cz,children:y6("buttons.load")})};aie.displayName="MenuItemLoadScene";var oie=({onSelect:t})=>{let{t:n}=v6();return e.jsx(Jre,{shortcut:null,onSelect:t,icon:Rz,children:n("labels.liveCollaboration")})};oie.displayName="MenuItemLiveCollaborationTrigger",tie.Logo=nie,tie.Heading=rie,tie.Menu=iie,tie.MenuItem=Jre,tie.MenuItemLink=eie,tie.MenuItemHelp=sie,tie.MenuItemLoadScene=aie,tie.MenuItemLiveCollaborationTrigger=oie;var lie=({children:t})=>{let{WelcomeScreenMenuHintTunnel:n}=F4();return e.jsx(n.In,{children:e.jsxs("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu",children:[IF,e.jsx("div",{className:"welcome-screen-decor-hint__label",children:t||y6("welcomeScreen.defaults.menuHint")})]})})};lie.displayName="MenuHint";var cie=({children:t})=>{let{WelcomeScreenToolbarHintTunnel:n}=F4();return e.jsx(n.In,{children:e.jsxs("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar",children:[e.jsx("div",{className:"welcome-screen-decor-hint__label",children:t||y6("welcomeScreen.defaults.toolbarHint")}),TF]})})};cie.displayName="ToolbarHint";var die=({children:t})=>{let{WelcomeScreenHelpHintTunnel:n}=F4();return e.jsx(n.In,{children:e.jsxs("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help",children:[e.jsx("div",{children:t||y6("welcomeScreen.defaults.helpHint")}),jF]})})};die.displayName="HelpHint";var uie=t=>e.jsx(e.Fragment,{children:t.children||e.jsxs(e.Fragment,{children:[e.jsx(tie,{}),e.jsx(lie,{}),e.jsx(cie,{}),e.jsx(die,{})]})});uie.displayName="WelcomeScreen",uie.Center=tie,uie.Hints={MenuHint:lie,ToolbarHint:cie,HelpHint:die};var hie=uie;uR((e,t,n)=>{if(BM.DEV||BM.MODE===$A||window?.DEBUG_FRACTIONAL_INDICES){let r=iY(e.map(e=>({...e})));nY(r,{shouldThrow:BM.DEV||BM.MODE===$A,includeBoundTextValidation:!0,reconciliationContext:{localElements:t,remoteElements:n}})}},6e4,{leading:!0,trailing:!1}),Yre();var pie=St.memo(t=>{let{onChange:n,initialData:r,excalidrawAPI:i,isCollaborating:s=!1,onPointerUpdate:a,renderTopRightUI:o,langCode:l=u6.code,viewModeEnabled:c,zenModeEnabled:d,gridModeEnabled:u,libraryReturnUrl:h,theme:p,name:f,renderCustomStats:m,onPaste:g,detectScroll:b=!0,handleKeyboardGlobally:U=!1,onLibraryChange:y,autoFocus:x=!1,generateIdForFile:v,onLinkOpen:w,generateLinkForSelection:S,onPointerDown:E,onPointerUp:k,onScrollChange:C,onDuplicate:_,children:M,validateEmbeddable:I,renderEmbeddable:j,aiEnabled:T,showDeprecatedFonts:R}=t,P=t.UIOptions?.canvasActions,A={...t.UIOptions,canvasActions:{...bN,...P},tools:{image:t.UIOptions?.tools?.image??!0}};return P?.export&&(A.canvasActions.export.saveFileToDisk=P.export?.saveFileToDisk??bN.export.saveFileToDisk),null===A.canvasActions.toggleTheme&&typeof p>"u"&&(A.canvasActions.toggleTheme=!0),vt.useEffect(()=>{(async()=>{await Pt(()=>import("./roundRect-PzbMZj1G.js"),[])})();let e=e=>{"number"==typeof e.scale&&1!==e.scale&&e.preventDefault()};return document.addEventListener("touchmove",e,{passive:!1}),()=>{document.removeEventListener("touchmove",e)}},[]),e.jsx(l6,{store:c6,children:e.jsx(E6,{langCode:l,theme:p,children:e.jsx(Gre,{onChange:n,initialData:r,excalidrawAPI:i,isCollaborating:s,onPointerUpdate:a,renderTopRightUI:o,langCode:l,viewModeEnabled:c,zenModeEnabled:d,gridModeEnabled:u,libraryReturnUrl:h,theme:p,name:f,renderCustomStats:m,UIOptions:A,onPaste:g,detectScroll:b,handleKeyboardGlobally:U,onLibraryChange:y,autoFocus:x,generateIdForFile:v,onLinkOpen:w,generateLinkForSelection:S,onPointerDown:E,onPointerUp:k,onScrollChange:C,onDuplicate:_,validateEmbeddable:I,renderEmbeddable:j,aiEnabled:!1!==T,showDeprecatedFonts:R,children:M})})})},(e,t)=>{if(e.children!==t.children)return!1;let{initialData:n,UIOptions:r={},...i}=e,{initialData:s,UIOptions:a={},...o}=t,l=Object.keys(r),c=Object.keys(a);return l.length===c.length&&(l.every(e=>"canvasActions"===e?Object.keys(r.canvasActions).every(e=>"export"===e&&r?.canvasActions?.export&&a?.canvasActions?.export?r.canvasActions.export.saveFileToDisk===a.canvasActions.export.saveFileToDisk:r?.canvasActions?.[e]===a?.canvasActions?.[e]):r[e]===a[e])&&XL(i,o))});function fie(t){const n=mie(t),r=vt.forwardRef((t,r)=>{const{children:i,...s}=t,a=vt.Children.toArray(i),o=a.find(bie);if(o){const t=o.props.children,i=a.map(e=>e===o?vt.Children.count(t)>1?vt.Children.only(null):vt.isValidElement(t)?t.props.children:null:e);return e.jsx(n,{...s,ref:r,children:vt.isValidElement(t)?vt.cloneElement(t,void 0,i):null})}return e.jsx(n,{...s,ref:r,children:i})});return r.displayName=`${t}.Slot`,r}function mie(e){const t=vt.forwardRef((e,t)=>{const{children:n,...r}=e;if(vt.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),i=function(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(n[r]=i):"style"===r?n[r]={...i,...s}:"className"===r&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==vt.Fragment&&(i.ref=t?Wr(t,e):e),vt.cloneElement(n,i)}return vt.Children.count(n)>1?vt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}pie.displayName="Excalidraw";var gie=Symbol("radix.slottable");function bie(e){return vt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===gie}var Uie="Dialog",[yie,xie]=Ci(Uie),[vie,wie]=yie(Uie),Sie=t=>{const{__scopeDialog:n,children:r,open:i,defaultOpen:s,onOpenChange:a,modal:o=!0}=t,l=vt.useRef(null),c=vt.useRef(null),[d,u]=ji({prop:i,defaultProp:s??!1,onChange:a,caller:Uie});return e.jsx(vie,{scope:n,triggerRef:l,contentRef:c,contentId:fs(),titleId:fs(),descriptionId:fs(),open:d,onOpenChange:u,onOpenToggle:vt.useCallback(()=>u(e=>!e),[u]),modal:o,children:r})};Sie.displayName=Uie;var Eie="DialogTrigger",kie=vt.forwardRef((t,n)=>{const{__scopeDialog:r,...i}=t,s=wie(Eie,r),a=Xr(n,s.triggerRef);return e.jsx(Ni.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Xie(s.open),...i,ref:a,onClick:ki(t.onClick,s.onOpenToggle)})});kie.displayName=Eie;var Cie="DialogPortal",[_ie,Mie]=yie(Cie,{forceMount:void 0}),Iie=t=>{const{__scopeDialog:n,forceMount:r,children:i,container:s}=t,a=wie(Cie,n);return e.jsx(_ie,{scope:n,forceMount:r,children:vt.Children.map(i,t=>e.jsx(Ro,{present:r||a.open,children:e.jsx(To,{asChild:!0,container:s,children:t})}))})};Iie.displayName=Cie;var jie="DialogOverlay",Tie=vt.forwardRef((t,n)=>{const r=Mie(jie,t.__scopeDialog),{forceMount:i=r.forceMount,...s}=t,a=wie(jie,t.__scopeDialog);return a.modal?e.jsx(Ro,{present:i||a.open,children:e.jsx(Pie,{...s,ref:n})}):null});Tie.displayName=jie;var Rie=fie("DialogOverlay.RemoveScroll"),Pie=vt.forwardRef((t,n)=>{const{__scopeDialog:r,...i}=t,s=wie(jie,r);return e.jsx(ql,{as:Rie,allowPinchZoom:!0,shards:[s.contentRef],children:e.jsx(Ni.div,{"data-state":Xie(s.open),...i,ref:n,style:{pointerEvents:"auto",...i.style}})})}),Aie="DialogContent",Nie=vt.forwardRef((t,n)=>{const r=Mie(Aie,t.__scopeDialog),{forceMount:i=r.forceMount,...s}=t,a=wie(Aie,t.__scopeDialog);return e.jsx(Ro,{present:i||a.open,children:a.modal?e.jsx(Die,{...s,ref:n}):e.jsx(Lie,{...s,ref:n})})});Nie.displayName=Aie;var Die=vt.forwardRef((t,n)=>{const r=wie(Aie,t.__scopeDialog),i=vt.useRef(null),s=Xr(n,r.contentRef,i);return vt.useEffect(()=>{const e=i.current;if(e)return ll(e)},[]),e.jsx(Oie,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ki(t.onCloseAutoFocus,e=>{e.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:ki(t.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:ki(t.onFocusOutside,e=>e.preventDefault())})}),Lie=vt.forwardRef((t,n)=>{const r=wie(Aie,t.__scopeDialog),i=vt.useRef(!1),s=vt.useRef(!1);return e.jsx(Oie,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{t.onCloseAutoFocus?.(e),e.defaultPrevented||(i.current||r.triggerRef.current?.focus(),e.preventDefault()),i.current=!1,s.current=!1},onInteractOutside:e=>{t.onInteractOutside?.(e),e.defaultPrevented||(i.current=!0,"pointerdown"===e.detail.originalEvent.type&&(s.current=!0));const n=e.target,a=r.triggerRef.current?.contains(n);a&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&s.current&&e.preventDefault()}})}),Oie=vt.forwardRef((t,n)=>{const{__scopeDialog:r,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=t,l=wie(Aie,r),c=vt.useRef(null),d=Xr(n,c);return es(),e.jsxs(e.Fragment,{children:[e.jsx(ss,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:s,onUnmountAutoFocus:a,children:e.jsx(Zi,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Xie(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(qie,{titleId:l.titleId}),e.jsx(Zie,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Fie="DialogTitle",zie=vt.forwardRef((t,n)=>{const{__scopeDialog:r,...i}=t,s=wie(Fie,r);return e.jsx(Ni.h2,{id:s.titleId,...i,ref:n})});zie.displayName=Fie;var Bie="DialogDescription",Hie=vt.forwardRef((t,n)=>{const{__scopeDialog:r,...i}=t,s=wie(Bie,r);return e.jsx(Ni.p,{id:s.descriptionId,...i,ref:n})});Hie.displayName=Bie;var $ie="DialogClose",Wie=vt.forwardRef((t,n)=>{const{__scopeDialog:r,...i}=t,s=wie($ie,r);return e.jsx(Ni.button,{type:"button",...i,ref:n,onClick:ki(t.onClick,()=>s.onOpenChange(!1))})});function Xie(e){return e?"open":"closed"}Wie.displayName=$ie;var Vie="DialogTitleWarning",[Gie,Yie]=function(t,n){const r=vt.createContext(n),i=t=>{const{children:n,...i}=t,s=vt.useMemo(()=>i,Object.values(i));return e.jsx(r.Provider,{value:s,children:n})};return i.displayName=t+"Provider",[i,function(e){const i=vt.useContext(r);if(i)return i;if(void 0!==n)return n;throw new Error(`\`${e}\` must be used within \`${t}\``)}]}(Vie,{contentName:Aie,titleName:Fie,docsSlug:"dialog"}),qie=({titleId:e})=>{const t=Yie(Vie),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return vt.useEffect(()=>{if(e){document.getElementById(e)}},[n,e]),null},Zie=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Yie("DialogDescriptionWarning").contentName}}.`;return vt.useEffect(()=>{const n=e.current?.getAttribute("aria-describedby");if(t&&n){document.getElementById(t)}},[n,e,t]),null},Kie=Sie,Qie=kie,Jie=Iie,ese=Tie,tse=Nie,nse=zie,rse=Hie,ise=Wie,sse=Symbol("radix.slottable");function ase(t){const n=({children:t})=>e.jsx(e.Fragment,{children:t});return n.displayName=`${t}.Slottable`,n.__radixId=sse,n}var ose="AlertDialog",[lse]=Ci(ose,[xie]),cse=xie(),dse=t=>{const{__scopeAlertDialog:n,...r}=t,i=cse(n);return e.jsx(Kie,{...i,...r,modal:!0})};dse.displayName=ose;var use=vt.forwardRef((t,n)=>{const{__scopeAlertDialog:r,...i}=t,s=cse(r);return e.jsx(Qie,{...s,...i,ref:n})});use.displayName="AlertDialogTrigger";var hse=t=>{const{__scopeAlertDialog:n,...r}=t,i=cse(n);return e.jsx(Jie,{...i,...r})};hse.displayName="AlertDialogPortal";var pse=vt.forwardRef((t,n)=>{const{__scopeAlertDialog:r,...i}=t,s=cse(r);return e.jsx(ese,{...s,...i,ref:n})});pse.displayName="AlertDialogOverlay";var fse="AlertDialogContent",[mse,gse]=lse(fse),bse=ase("AlertDialogContent"),Use=vt.forwardRef((t,n)=>{const{__scopeAlertDialog:r,children:i,...s}=t,a=cse(r),o=vt.useRef(null),l=Xr(n,o),c=vt.useRef(null);return e.jsx(Gie,{contentName:fse,titleName:yse,docsSlug:"alert-dialog",children:e.jsx(mse,{scope:r,cancelRef:c,children:e.jsxs(tse,{role:"alertdialog",...a,...s,ref:l,onOpenAutoFocus:ki(s.onOpenAutoFocus,e=>{e.preventDefault(),c.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[e.jsx(bse,{children:i}),e.jsx(Cse,{contentRef:o})]})})})});Use.displayName=fse;var yse="AlertDialogTitle",xse=vt.forwardRef((t,n)=>{const{__scopeAlertDialog:r,...i}=t,s=cse(r);return e.jsx(nse,{...s,...i,ref:n})});xse.displayName=yse;var vse="AlertDialogDescription",wse=vt.forwardRef((t,n)=>{const{__scopeAlertDialog:r,...i}=t,s=cse(r);return e.jsx(rse,{...s,...i,ref:n})});wse.displayName=vse;var Sse=vt.forwardRef((t,n)=>{const{__scopeAlertDialog:r,...i}=t,s=cse(r);return e.jsx(ise,{...s,...i,ref:n})});Sse.displayName="AlertDialogAction";var Ese="AlertDialogCancel",kse=vt.forwardRef((t,n)=>{const{__scopeAlertDialog:r,...i}=t,{cancelRef:s}=gse(Ese,r),a=cse(r),o=Xr(n,s);return e.jsx(ise,{...a,...i,ref:o})});kse.displayName=Ese;var Cse=({contentRef:e})=>{const t=`\`${fse}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${fse}\` by passing a \`${vse}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${fse}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return vt.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))},[t,e]),null},_se=pse,Mse=Use,Ise=Sse,jse=kse,Tse=xse,Rse=wse;const Pse=dse,Ase=use,Nse=hse,Dse=vt.forwardRef(({className:t,...n},r)=>e.jsx(_se,{className:ir("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n,ref:r}));Dse.displayName=_se.displayName;const Lse=vt.forwardRef(({className:t,...n},r)=>e.jsxs(Nse,{children:[e.jsx(Dse,{}),e.jsx(Mse,{ref:r,className:ir("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n})]}));Lse.displayName=Mse.displayName;const Ose=({className:t,...n})=>e.jsx("div",{className:ir("flex flex-col space-y-2 text-center sm:text-left",t),...n});Ose.displayName="AlertDialogHeader";const Fse=({className:t,...n})=>e.jsx("div",{className:ir("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n});Fse.displayName="AlertDialogFooter";const zse=vt.forwardRef(({className:t,...n},r)=>e.jsx(Tse,{ref:r,className:ir("text-lg font-semibold",t),...n}));zse.displayName=Tse.displayName;const Bse=vt.forwardRef(({className:t,...n},r)=>e.jsx(Rse,{ref:r,className:ir("text-sm text-muted-foreground",t),...n}));Bse.displayName=Rse.displayName;const Hse=vt.forwardRef(({className:t,...n},r)=>e.jsx(Ise,{ref:r,className:ir(ri(),t),...n}));Hse.displayName=Ise.displayName;const $se=vt.forwardRef(({className:t,...n},r)=>e.jsx(jse,{ref:r,className:ir(ri({variant:"outline"}),"mt-2 sm:mt-0",t),...n}));$se.displayName=jse.displayName;const Wse=()=>{const[t,n]=vt.useState(null),[r,i]=vt.useState(!0);vt.useEffect(()=>{const e=setTimeout(()=>{i(!1)},500);return()=>clearTimeout(e)},[]);return e.jsxs("div",{className:"relative h-full w-full overflow-hidden rounded-md border border-border bg-card/60 shadow-sm",children:[e.jsx("div",{className:"absolute right-4 top-4 z-50 flex gap-2",children:e.jsxs(Pse,{children:[e.jsx(Ase,{asChild:!0,children:e.jsxs(ii,{type:"button",size:"sm",variant:"destructive",className:"h-8 text-xs shadow-md backdrop-blur-sm",children:[e.jsx("span",{className:"material-symbols-outlined mr-1 text-sm",children:"delete_forever"}),"Clear Board"]})}),e.jsxs(Lse,{children:[e.jsxs(Ose,{children:[e.jsx(zse,{children:"Clear entire whiteboard?"}),e.jsx(Bse,{children:"This will delete all your drawings. This action cannot be undone easily via this button (though Excalidraw internal undo might still work)."})]}),e.jsxs(Fse,{children:[e.jsx($se,{children:"Cancel"}),e.jsx(Hse,{onClick:()=>{t&&t.resetScene()},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Clear All"})]})]})]})}),r&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/50 z-40 backdrop-blur-sm",children:e.jsx(gi,{className:"h-8 w-8 animate-spin text-primary"})}),e.jsx("div",{className:"h-full w-full",style:{height:"100%",width:"100%"},children:e.jsxs(pie,{onMount:e=>{n(e),i(!1)},theme:"light",UIOptions:{canvasActions:{changeViewBackgroundColor:!0,clearCanvas:!1,loadScene:!1,saveToActiveFile:!1,toggleTheme:!1,saveAsImage:!0}},children:[e.jsx(hie,{children:e.jsxs(hie.Center,{children:[e.jsx(hie.Center.Heading,{children:"Whiteboard"}),e.jsx(hie.Center.Menu,{children:e.jsx(hie.Center.MenuItemHelp,{})})]})}),e.jsxs(Qee,{children:[e.jsx(Qee.DefaultItems.SaveAsImage,{}),e.jsx(Qee.DefaultItems.Export,{}),e.jsx(Qee.Separator,{}),e.jsx(Qee.DefaultItems.ClearCanvas,{}),e.jsx(Qee.Separator,{}),e.jsx(Qee.DefaultItems.Help,{})]})]})})]})};var Xse=(e,t,n,r,i,s,a,o)=>{let l=document.documentElement,c=["light","dark"];function d(t){(Array.isArray(e)?e:[e]).forEach(e=>{let n="class"===e,r=n&&s?i.map(e=>s[e]||e):i;n?(l.classList.remove(...r),l.classList.add(s&&s[t]?s[t]:t)):l.setAttribute(e,t)}),function(e){o&&c.includes(e)&&(l.style.colorScheme=e)}(t)}if(r)d(r);else try{let e=localStorage.getItem(t)||n;d(a&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e)}catch(u){}},Vse=vt.createContext(void 0),Gse={setTheme:e=>{},themes:[]};vt.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:a,themes:o,nonce:l,scriptProps:c})=>{let d=JSON.stringify([n,t,s,e,o,a,r,i]).slice(1,-1);return vt.createElement("script",{...c,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?l:"",dangerouslySetInnerHTML:{__html:`(${Xse.toString()})(${d})`}})});const Yse=({...t})=>{const{theme:n="system"}=(()=>{var e;return null!=(e=vt.useContext(Vse))?e:Gse})();return e.jsx(RM,{theme:n,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},qse=vt.lazy(()=>Pt(()=>import("./SidePanel-CvuyAJOg.js"),__vite__mapDeps([59,1,2,60,61,62,63]))),Zse=vt.lazy(()=>Pt(()=>import("./GradingSidebar-DhcjkR6F.js"),__vite__mapDeps([64,1,2,62]))),Kse=vt.lazy(()=>Pt(()=>import("./ScratchpadCapture-DkvIJpRa.js"),__vite__mapDeps([65,1,2]))),Qse=vt.lazy(()=>Pt(()=>import("./FloatingControlPanel-Cj8_Rx1Y.js"),__vite__mapDeps([66,1,2,67,60,61,62,68,69])));function Jse(){const t=vt.useRef(null);vt.useRef(null);const[n,r]=vt.useState(null),[i,s]=vt.useState(null),a=vt.useRef(null),[o,l]=vt.useState(!1),[c,d]=vt.useState(!1),[u,h]=vt.useState(!1),[p,f]=vt.useState(null),m=vt.useRef(null),{cameraEnabled:g,screenEnabled:b,toggleCamera:U,toggleScreen:y,cameraVideoRef:x,screenVideoRef:v}=(({onCameraFrame:e,onScreenFrame:t})=>{const[n,r]=vt.useState(!1),[i,s]=vt.useState(!1),a=vt.useRef(null),o=vt.useRef(null),l=vt.useRef(null),c=vt.useRef(null),d=vt.useRef(null),u=vt.useRef(null);vt.useEffect(()=>(l.current=document.createElement("canvas"),c.current=document.createElement("canvas"),d.current=document.createElement("video"),d.current.autoplay=!0,d.current.playsInline=!0,u.current=document.createElement("video"),u.current.autoplay=!0,u.current.playsInline=!0,()=>{h(),p()}),[]);const h=vt.useCallback(()=>{a.current&&(a.current.getTracks().forEach(e=>e.stop()),a.current=null)},[]),p=vt.useCallback(()=>{o.current&&(o.current.getTracks().forEach(e=>e.stop()),o.current=null)},[]),f=vt.useCallback(async()=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{width:1280,height:720}});a.current=e;const t=d.current;t.srcObject=e,await new Promise(e=>{t.onloadedmetadata=()=>{const n=l.current;n.width=t.videoWidth,n.height=t.videoHeight,e()}})}catch(e){r(!1)}},[e]),m=vt.useCallback(async()=>{try{const e=await navigator.mediaDevices.getDisplayMedia({video:{width:1280,height:720}});o.current=e;const t=u.current;t.srcObject=e,e.getVideoTracks()[0].onended=()=>{s(!1),p()},await new Promise(e=>{t.onloadedmetadata=()=>{const n=c.current;n.width=t.videoWidth,n.height=t.videoHeight,e()}})}catch(e){s(!1)}},[t,p]);return{cameraEnabled:n,screenEnabled:i,toggleCamera:vt.useCallback(async e=>{r(e),e?await f():h()},[f,h]),toggleScreen:vt.useCallback(async e=>{s(e),e?await m():p()},[m,p]),cameraVideoRef:d,screenVideoRef:u}})({}),w=(e=>{const t=vt.useRef(null),n=vt.useRef(null),r=e.cameraEnabled||!1,i=e.screenEnabled||!1,[s,a]=vt.useState(!1),o=vt.useCallback(()=>{const s=t.current;if(!s)return;const a=s.getContext("2d",{alpha:!1});if(!a)return;const o=e.height/3;if(a.fillStyle="white",a.fillRect(0,0,e.width,o),n.current)try{a.drawImage(n.current,0,0,e.width,o)}catch(l){}if(a.fillStyle="black",a.fillRect(0,o,e.width,o),i&&e.screenVideoRef?.current)try{const t=e.screenVideoRef.current;t.readyState>=2&&a.drawImage(t,0,o,e.width,o)}catch(l){}if(a.fillStyle="#404040",a.fillRect(0,2*o,e.width,o),r&&e.cameraVideoRef?.current)try{const t=e.cameraVideoRef.current;t.readyState>=2&&a.drawImage(t,0,2*o,e.width,o)}catch(l){}},[e.width,e.height,r,i,e.cameraVideoRef,e.screenVideoRef]),l=vt.useCallback(e=>{n.current=e},[]);return vt.useEffect(()=>{if(!s)return;let t;const n=1e3/e.fps;let r=0;const i=e=>{e-r>=n&&(o(),r=e),s&&(t=requestAnimationFrame(i))};return t=requestAnimationFrame(i),()=>{t&&cancelAnimationFrame(t)}},[s,o,e.fps]),{canvasRef:t,updateScratchpadFrame:l,setIsRunning:a,mixFrames:()=>o()}})({width:1280,height:2160,fps:10,quality:.85,cameraEnabled:g,screenEnabled:b,cameraVideoRef:x,screenVideoRef:v});vt.useEffect(()=>{m.current=w},[w]),vt.useEffect(()=>{if(w.canvasRef.current)return w.setIsRunning(!0),()=>{w.setIsRunning(!1)}},[w]);const S=()=>{c||h(!1),d(!c)};return vt.useEffect(()=>{a.current&&i&&(a.current.srcObject=i)},[i]),e.jsx(Ei,{defaultTheme:"light",storageKey:"ai-tutor-theme",children:e.jsx("div",{className:"App",children:e.jsx(Ir,{children:e.jsxs(xr,{children:[e.jsx(ku,{sidebarOpen:c,onToggleSidebar:S}),e.jsx("div",{className:"streaming-console",children:e.jsxs(vt.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-full w-full",children:"Loading..."}),children:[e.jsx(qse,{open:c,onToggle:S}),e.jsx(Zse,{open:u,onToggle:()=>{u||d(!1),h(!u)},currentSkill:p}),e.jsx("main",{style:{marginRight:c?"260px":"0",marginLeft:u?"260px":"40px",transition:"all 0.5s cubic-bezier(0.16, 1, 0.3, 1)"},children:e.jsxs("div",{className:"main-app-area",children:[e.jsxs("div",{className:"question-panel",children:[e.jsx(_u,{}),e.jsxs(Kse,{onFrameCaptured:e=>{w.updateScratchpadFrame(e)},children:[e.jsx(DM,{onSkillChange:f}),o&&e.jsx("div",{className:"scratchpad-container",children:e.jsx(Wse,{})})]})]}),e.jsx(Qse,{renderCanvasRef:w.canvasRef,videoRef:t,supportsVideo:!0,onVideoStreamChange:r,onMixerStreamChange:s,enableEditingSettings:!0,onPaintClick:()=>l(!o),isPaintActive:o,cameraEnabled:g,screenEnabled:b,onToggleCamera:U,onToggleScreen:y,mediaMixerCanvasRef:w.canvasRef})]})})]})}),e.jsx(Yse,{richColors:!0,closeButton:!0})]})})})})}let eae=-1;const tae=e=>{addEventListener("pageshow",t=>{t.persisted&&(eae=t.timeStamp,e(t))},!0)},nae=(e,t,n,r)=>{let i,s;return a=>{var o,l;t.value>=0&&(a||r)&&(s=t.value-(i??0),(s||void 0===i)&&(i=t.value,t.delta=s,t.rating=(o=t.value)>(l=n)[1]?"poor":o>l[0]?"needs-improvement":"good",e(t)))}},rae=e=>{requestAnimationFrame(()=>requestAnimationFrame(()=>e()))},iae=()=>{const e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},sae=()=>{const e=iae();return e?.activationStart??0},aae=(e,t=-1)=>{const n=iae();let r="navigate";return eae>=0?r="back-forward-cache":n&&(document.prerendering||sae()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},oae=new WeakMap;function lae(e,t){return oae.get(e)||oae.set(e,new t),oae.get(e)}class cae{t;i=0;o=[];h(e){if(e.hadRecentInput)return;const t=this.o[0],n=this.o.at(-1);this.i&&t&&n&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),this.t?.(e)}}const dae=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(e=>{Promise.resolve().then(()=>{t(e.getEntries())})});return r.observe({type:e,buffered:!0,...n}),r}}catch{}},uae=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let hae=-1;const pae=new Set,fae=()=>"hidden"!==document.visibilityState||document.prerendering?1/0:0,mae=e=>{if("hidden"===document.visibilityState){if("visibilitychange"===e.type)for(const e of pae)e();isFinite(hae)||(hae="visibilitychange"===e.type?e.timeStamp:0,removeEventListener("prerenderingchange",mae,!0))}},gae=()=>{if(hae<0){const e=sae(),t=document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(t=>"hidden"===t.name&&t.startTime>e)[0]?.startTime;hae=t??fae(),addEventListener("visibilitychange",mae,!0),addEventListener("prerenderingchange",mae,!0),tae(()=>{setTimeout(()=>{hae=fae()})})}return{get firstHiddenTime(){return hae},onHidden(e){pae.add(e)}}},bae=e=>{document.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},Uae=[1800,3e3],yae=[.1,.25],xae=(e,t={})=>{const n=gae();((e,t={})=>{bae(()=>{const n=gae();let r,i=aae("FCP");const s=dae("paint",e=>{for(const t of e)"first-contentful-paint"===t.name&&(s.disconnect(),t.startTime<n.firstHiddenTime&&(i.value=Math.max(t.startTime-sae(),0),i.entries.push(t),r(!0)))});s&&(r=nae(e,i,Uae,t.reportAllChanges),tae(n=>{i=aae("FCP"),r=nae(e,i,Uae,t.reportAllChanges),rae(()=>{i.value=performance.now()-n.timeStamp,r(!0)})}))})})(uae(()=>{let r,i=aae("CLS",0);const s=lae(t,cae),a=e=>{for(const t of e)s.h(t);s.i>i.value&&(i.value=s.i,i.entries=s.o,r())},o=dae("layout-shift",a);o&&(r=nae(e,i,yae,t.reportAllChanges),n.onHidden(()=>{a(o.takeRecords()),r(!0)}),tae(()=>{s.i=0,i=aae("CLS",0),r=nae(e,i,yae,t.reportAllChanges),rae(()=>r())}),setTimeout(r))}))};let vae=0,wae=1/0,Sae=0;const Eae=e=>{for(const t of e)t.interactionId&&(wae=Math.min(wae,t.interactionId),Sae=Math.max(Sae,t.interactionId),vae=Sae?(Sae-wae)/7+1:0)};let kae;const Cae=()=>kae?vae:performance.interactionCount??0;let _ae=0;class Mae{u=[];l=new Map;m;p;v(){_ae=Cae(),this.u.length=0,this.l.clear()}L(){const e=Math.min(this.u.length-1,Math.floor((Cae()-_ae)/50));return this.u[e]}h(e){if(this.m?.(e),!e.interactionId&&"first-input"!==e.entryType)return;const t=this.u.at(-1);let n=this.l.get(e.interactionId);if(n||this.u.length<10||e.duration>t.P){if(n?e.duration>n.P?(n.entries=[e],n.P=e.duration):e.duration===n.P&&e.startTime===n.entries[0].startTime&&n.entries.push(e):(n={id:e.interactionId,entries:[e],P:e.duration},this.l.set(n.id,n),this.u.push(n)),this.u.sort((e,t)=>t.P-e.P),this.u.length>10){const e=this.u.splice(10);for(const t of e)this.l.delete(t.id)}this.p?.(n)}}}const Iae=e=>{const t=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?e():(e=uae(e),addEventListener("visibilitychange",e,{once:!0,capture:!0}),t(()=>{e(),removeEventListener("visibilitychange",e,{capture:!0})}))},jae=[200,500],Tae=(e,t={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;const n=gae();bae(()=>{"interactionCount"in performance||kae||(kae=dae("event",Eae,{type:"event",buffered:!0,durationThreshold:0}));let r,i=aae("INP");const s=lae(t,Mae),a=e=>{Iae(()=>{for(const n of e)s.h(n);const t=s.L();t&&t.P!==i.value&&(i.value=t.P,i.entries=t.entries,r())})},o=dae("event",a,{durationThreshold:t.durationThreshold??40});r=nae(e,i,jae,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),n.onHidden(()=>{a(o.takeRecords()),r(!0)}),tae(()=>{s.v(),i=aae("INP"),r=nae(e,i,jae,t.reportAllChanges)}))})};class Rae{m;h(e){this.m?.(e)}}const Pae=[2500,4e3];aM(),Bu=dM;var Aae=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Nae={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Dae=new class{#n=Nae;#r=!1;setTimeoutProvider(e){this.#n=e}setTimeout(e,t){return this.#n.setTimeout(e,t)}clearTimeout(e){this.#n.clearTimeout(e)}setInterval(e,t){return this.#n.setInterval(e,t)}clearInterval(e){this.#n.clearInterval(e)}};var Lae="undefined"==typeof window||"Deno"in globalThis;function Oae(){}function Fae(e){return"number"==typeof e&&e>=0&&e!==1/0}function zae(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Bae(e,t){return"function"==typeof e?e(t):e}function Hae(e,t){return"function"==typeof e?e(t):e}function $ae(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:a,stale:o}=e;if(a)if(r){if(t.queryHash!==Xae(a,t.options))return!1}else if(!Gae(t.queryKey,a))return!1;if("all"!==n){const e=t.isActive();if("active"===n&&!e)return!1;if("inactive"===n&&e)return!1}return("boolean"!=typeof o||t.isStale()===o)&&((!i||i===t.state.fetchStatus)&&!(s&&!s(t)))}function Wae(e,t){const{exact:n,status:r,predicate:i,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(Vae(t.options.mutationKey)!==Vae(s))return!1}else if(!Gae(t.options.mutationKey,s))return!1}return(!r||t.state.status===r)&&!(i&&!i(t))}function Xae(e,t){return(t?.queryKeyHashFn||Vae)(e)}function Vae(e){return JSON.stringify(e,(e,t)=>Qae(t)?Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}):t)}function Gae(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every(n=>Gae(e[n],t[n])))}var Yae=Object.prototype.hasOwnProperty;function qae(e,t){if(e===t)return e;const n=Kae(e)&&Kae(t);if(!(n||Qae(e)&&Qae(t)))return t;const r=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),s=i.length,a=n?new Array(s):{};let o=0;for(let l=0;l<s;l++){const s=n?l:i[l],c=e[s],d=t[s];if(c===d){a[s]=c,(n?l<r:Yae.call(e,s))&&o++;continue}if(null===c||null===d||"object"!=typeof c||"object"!=typeof d){a[s]=d;continue}const u=qae(c,d);a[s]=u,u===c&&o++}return r===s&&o===r?e:a}function Zae(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Kae(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Qae(e){if(!Jae(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!!Jae(n)&&(!!n.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function Jae(e){return"[object Object]"===Object.prototype.toString.call(e)}function eoe(e,t,n){return"function"==typeof n.structuralSharing?n.structuralSharing(e,t):!1!==n.structuralSharing?qae(e,t):t}function toe(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function noe(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var roe=Symbol();function ioe(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==roe?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}function soe(e,t){return"function"==typeof e?e(...t):!!e}var aoe=new class extends Aae{#i;#s;#a;constructor(){super(),this.#a=e=>{if(!Lae&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#s||this.setEventListener(this.#a)}onUnsubscribe(){this.hasListeners()||(this.#s?.(),this.#s=void 0)}setEventListener(e){this.#a=e,this.#s?.(),this.#s=e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()})}setFocused(e){this.#i!==e&&(this.#i=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return"boolean"==typeof this.#i?this.#i:"hidden"!==globalThis.document?.visibilityState}};function ooe(){let e,t;const n=new Promise((n,r)=>{e=n,t=r});function r(e){Object.assign(n,e),delete n.resolve,delete n.reject}return n.status="pending",n.catch(()=>{}),n.resolve=t=>{r({status:"fulfilled",value:t}),e(t)},n.reject=e=>{r({status:"rejected",reason:e}),t(e)},n}var loe=function(e){setTimeout(e,0)};var coe=function(){let e=[],t=0,n=e=>{e()},r=e=>{e()},i=loe;const s=r=>{t?e.push(r):i(()=>{n(r)})};return{batch:s=>{let a;t++;try{a=s()}finally{t--,t||(()=>{const t=e;e=[],t.length&&i(()=>{r(()=>{t.forEach(e=>{n(e)})})})})()}return a},batchCalls:e=>(...t)=>{s(()=>{e(...t)})},schedule:s,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{r=e},setScheduler:e=>{i=e}}}(),doe=new class extends Aae{#o=!0;#s;#a;constructor(){super(),this.#a=e=>{if(!Lae&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#s||this.setEventListener(this.#a)}onUnsubscribe(){this.hasListeners()||(this.#s?.(),this.#s=void 0)}setEventListener(e){this.#a=e,this.#s?.(),this.#s=e(this.setOnline.bind(this))}setOnline(e){this.#o!==e&&(this.#o=e,this.listeners.forEach(t=>{t(e)}))}isOnline(){return this.#o}};function uoe(e){return Math.min(1e3*2**e,3e4)}function hoe(e){return"online"!==(e??"online")||doe.isOnline()}var poe=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function foe(e){let t,n=!1,r=0;const i=ooe(),s=()=>"pending"!==i.status,a=()=>aoe.isFocused()&&("always"===e.networkMode||doe.isOnline())&&e.canRun(),o=()=>hoe(e.networkMode)&&e.canRun(),l=e=>{s()||(t?.(),i.resolve(e))},c=e=>{s()||(t?.(),i.reject(e))},d=()=>new Promise(n=>{t=e=>{(s()||a())&&n(e)},e.onPause?.()}).then(()=>{t=void 0,s()||e.onContinue?.()}),u=()=>{if(s())return;let t;const i=0===r?e.initialPromise:void 0;try{t=i??e.fn()}catch(o){t=Promise.reject(o)}Promise.resolve(t).then(l).catch(t=>{if(s())return;const i=e.retry??(Lae?0:3),o=e.retryDelay??uoe,l="function"==typeof o?o(r,t):o,h=!0===i||"number"==typeof i&&r<i||"function"==typeof i&&i(r,t);var p;!n&&h?(r++,e.onFail?.(r,t),(p=l,new Promise(e=>{Dae.setTimeout(e,p)})).then(()=>a()?void 0:d()).then(()=>{n?c(t):u()})):c(t)})};return{promise:i,status:()=>i.status,cancel:t=>{if(!s()){const n=new poe(t);c(n),e.onCancel?.(n)}},continue:()=>(t?.(),i),cancelRetry:()=>{n=!0},continueRetry:()=>{n=!1},canStart:o,start:()=>(o()?u():d().then(u),i)}}var moe=class{#l;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Fae(this.gcTime)&&(this.#l=Dae.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Lae?1/0:3e5))}clearGcTimeout(){this.#l&&(Dae.clearTimeout(this.#l),this.#l=void 0)}},goe=class extends moe{#c;#d;#u;#h;#p;#f;#m;constructor(e){super(),this.#m=!1,this.#f=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#h=e.client,this.#u=this.#h.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#c=yoe(this.options),this.state=e.state??this.#c,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#p?.promise}setOptions(e){if(this.options={...this.#f,...e},this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){const e=yoe(this.options);void 0!==e.data&&(this.setState(Uoe(e.data,e.dataUpdatedAt)),this.#c=e)}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#u.remove(this)}setData(e,t){const n=eoe(this.state.data,e,this.options);return this.#g({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#g({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#p?.promise;return this.#p?.cancel(e),t?t.then(Oae).catch(Oae):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#c)}isActive(){return this.observers.some(e=>!1!==Hae(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===roe||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===Bae(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!zae(this.state.dataUpdatedAt,e))}onFocus(){const e=this.observers.find(e=>e.shouldFetchOnWindowFocus());e?.refetch({cancelRefetch:!1}),this.#p?.continue()}onOnline(){const e=this.observers.find(e=>e.shouldFetchOnReconnect());e?.refetch({cancelRefetch:!1}),this.#p?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#u.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#p&&(this.#m?this.#p.cancel({revert:!0}):this.#p.cancelRetry()),this.scheduleGc()),this.#u.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#g({type:"invalidate"})}async fetch(e,t){if("idle"!==this.state.fetchStatus&&"rejected"!==this.#p?.status())if(void 0!==this.state.data&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#p)return this.#p.continueRetry(),this.#p.promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const n=new AbortController,r=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#m=!0,n.signal)})},i=()=>{const e=ioe(this.options,t),n=(()=>{const e={client:this.#h,queryKey:this.queryKey,meta:this.meta};return r(e),e})();return this.#m=!1,this.options.persister?this.options.persister(e,n,this):e(n)},s=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#h,state:this.state,fetchFn:i};return r(e),e})();this.options.behavior?.onFetch(s,this),this.#d=this.state,"idle"!==this.state.fetchStatus&&this.state.fetchMeta===s.fetchOptions?.meta||this.#g({type:"fetch",meta:s.fetchOptions?.meta}),this.#p=foe({initialPromise:t?.initialPromise,fn:s.fetchFn,onCancel:e=>{e instanceof poe&&e.revert&&this.setState({...this.#d,fetchStatus:"idle"}),n.abort()},onFail:(e,t)=>{this.#g({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#g({type:"pause"})},onContinue:()=>{this.#g({type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0});try{const e=await this.#p.start();if(void 0===e)throw new Error(`${this.queryHash} data is undefined`);return this.setData(e),this.#u.config.onSuccess?.(e,this),this.#u.config.onSettled?.(e,this.state.error,this),e}catch(a){if(a instanceof poe){if(a.silent)return this.#p.promise;if(a.revert){if(void 0===this.state.data)throw a;return this.state.data}}throw this.#g({type:"error",error:a}),this.#u.config.onError?.(a,this),this.#u.config.onSettled?.(this.state.data,a,this),a}finally{this.scheduleGc()}}#g(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...boe(t.data,this.options),fetchMeta:e.meta??null};case"success":const n={...t,...Uoe(e.data,e.dataUpdatedAt),dataUpdateCount:t.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#d=e.manual?n:void 0,n;case"error":const r=e.error;return{...t,error:r,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),coe.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),this.#u.notify({query:this,type:"updated",action:e})})}};function boe(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:hoe(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}function Uoe(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function yoe(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,n=void 0!==t,r=n?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function xoe(e){return{onFetch:(t,n)=>{const r=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,s=t.state.data?.pages||[],a=t.state.data?.pageParams||[];let o={pages:[],pageParams:[]},l=0;const c=async()=>{let n=!1;const c=ioe(t.options,t.fetchOptions),d=async(e,r,i)=>{if(n)return Promise.reject();if(null==r&&e.pages.length)return Promise.resolve(e);const s=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:r,direction:i?"backward":"forward",meta:t.options.meta};var s;return s=e,Object.defineProperty(s,"signal",{enumerable:!0,get:()=>(t.signal.aborted?n=!0:t.signal.addEventListener("abort",()=>{n=!0}),t.signal)}),e})(),a=await c(s),{maxPages:o}=t.options,l=i?noe:toe;return{pages:l(e.pages,a,o),pageParams:l(e.pageParams,r,o)}};if(i&&s.length){const e="backward"===i,t={pages:s,pageParams:a},n=(e?woe:voe)(r,t);o=await d(t,n,e)}else{const t=e??s.length;do{const e=0===l?a[0]??r.initialPageParam:voe(r,o);if(l>0&&null==e)break;o=await d(o,e),l++}while(l<t)}return o};t.options.persister?t.fetchFn=()=>t.options.persister?.(c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=c}}}function voe(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function woe(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var Soe=class extends moe{#h;#b;#U;#p;constructor(e){super(),this.#h=e.client,this.mutationId=e.mutationId,this.#U=e.mutationCache,this.#b=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#b.includes(e)||(this.#b.push(e),this.clearGcTimeout(),this.#U.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#b=this.#b.filter(t=>t!==e),this.scheduleGc(),this.#U.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#b.length||("pending"===this.state.status?this.scheduleGc():this.#U.remove(this))}continue(){return this.#p?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#g({type:"continue"})},n={client:this.#h,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#p=foe({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{this.#g({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#g({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#U.canRun(this)});const r="pending"===this.state.status,i=!this.#p.canStart();try{if(r)t();else{this.#g({type:"pending",variables:e,isPaused:i}),await(this.#U.config.onMutate?.(e,this,n));const t=await(this.options.onMutate?.(e,n));t!==this.state.context&&this.#g({type:"pending",context:t,variables:e,isPaused:i})}const s=await this.#p.start();return await(this.#U.config.onSuccess?.(s,e,this.state.context,this,n)),await(this.options.onSuccess?.(s,e,this.state.context,n)),await(this.#U.config.onSettled?.(s,null,this.state.variables,this.state.context,this,n)),await(this.options.onSettled?.(s,null,e,this.state.context,n)),this.#g({type:"success",data:s}),s}catch(s){try{throw await(this.#U.config.onError?.(s,e,this.state.context,this,n)),await(this.options.onError?.(s,e,this.state.context,n)),await(this.#U.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this,n)),await(this.options.onSettled?.(void 0,s,e,this.state.context,n)),s}finally{this.#g({type:"error",error:s})}}finally{this.#U.runNext(this)}}#g(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),coe.batch(()=>{this.#b.forEach(t=>{t.onMutationUpdate(e)}),this.#U.notify({mutation:this,type:"updated",action:e})})}};var Eoe=class extends Aae{constructor(e={}){super(),this.config=e,this.#y=new Set,this.#x=new Map,this.#v=0}#y;#x;#v;build(e,t,n){const r=new Soe({client:e,mutationCache:this,mutationId:++this.#v,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){this.#y.add(e);const t=koe(e);if("string"==typeof t){const n=this.#x.get(t);n?n.push(e):this.#x.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#y.delete(e)){const t=koe(e);if("string"==typeof t){const n=this.#x.get(t);if(n)if(n.length>1){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}else n[0]===e&&this.#x.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=koe(e);if("string"==typeof t){const n=this.#x.get(t),r=n?.find(e=>"pending"===e.state.status);return!r||r===e}return!0}runNext(e){const t=koe(e);if("string"==typeof t){const n=this.#x.get(t)?.find(t=>t!==e&&t.state.isPaused);return n?.continue()??Promise.resolve()}return Promise.resolve()}clear(){coe.batch(()=>{this.#y.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#y.clear(),this.#x.clear()})}getAll(){return Array.from(this.#y)}find(e){const t={exact:!0,...e};return this.getAll().find(e=>Wae(t,e))}findAll(e={}){return this.getAll().filter(t=>Wae(e,t))}notify(e){coe.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return coe.batch(()=>Promise.all(e.map(e=>e.continue().catch(Oae))))}};function koe(e){return e.options.scope?.id}var Coe=class extends Aae{constructor(e={}){super(),this.config=e,this.#w=new Map}#w;build(e,t,n){const r=t.queryKey,i=t.queryHash??Xae(r,t);let s=this.get(i);return s||(s=new goe({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(s)),s}add(e){this.#w.has(e.queryHash)||(this.#w.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#w.get(e.queryHash);t&&(e.destroy(),t===e&&this.#w.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){coe.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#w.get(e)}getAll(){return[...this.#w.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(e=>$ae(t,e))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>$ae(e,t)):t}notify(e){coe.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){coe.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){coe.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},_oe=vt.createContext(void 0),Moe=e=>{const t=vt.useContext(_oe);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Ioe=({client:t,children:n})=>(vt.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(_oe.Provider,{value:t,children:n}));const joe=vt.lazy(()=>Pt(()=>import("./LoginPage-C5u_ymsQ.js"),__vite__mapDeps([70,1,2,67,61,71]))),Toe=vt.lazy(()=>Pt(()=>import("./LandingPageWrapper-g1CwXX90.js"),__vite__mapDeps([72,1,2,73]))),Roe=Lt.createRoot(document.getElementById("root")),Poe=new class{#S;#U;#f;#E;#k;#C;#_;#M;constructor(e={}){this.#S=e.queryCache||new Coe,this.#U=e.mutationCache||new Eoe,this.#f=e.defaultOptions||{},this.#E=new Map,this.#k=new Map,this.#C=0}mount(){this.#C++,1===this.#C&&(this.#_=aoe.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#S.onFocus())}),this.#M=doe.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#S.onOnline())}))}unmount(){this.#C--,0===this.#C&&(this.#_?.(),this.#_=void 0,this.#M?.(),this.#M=void 0)}isFetching(e){return this.#S.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#U.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#S.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#S.build(this,t),r=n.state.data;return void 0===r?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Bae(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return this.#S.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=this.#S.get(r.queryHash),s=i?.state.data,a=function(e,t){return"function"==typeof e?e(t):e}(t,s);if(void 0!==a)return this.#S.build(this,r).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return coe.batch(()=>this.#S.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#S.get(t.queryHash)?.state}removeQueries(e){const t=this.#S;coe.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const n=this.#S;return coe.batch(()=>(n.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=coe.batch(()=>this.#S.findAll(e).map(e=>e.cancel(n)));return Promise.all(r).then(Oae).catch(Oae)}invalidateQueries(e,t={}){return coe.batch(()=>(this.#S.findAll(e).forEach(e=>{e.invalidate()}),"none"===e?.refetchType?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=coe.batch(()=>this.#S.findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(Oae)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(r).then(Oae)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const n=this.#S.build(this,t);return n.isStaleByTime(Bae(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Oae).catch(Oae)}fetchInfiniteQuery(e){return e.behavior=xoe(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Oae).catch(Oae)}ensureInfiniteQueryData(e){return e.behavior=xoe(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return doe.isOnline()?this.#U.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#S}getMutationCache(){return this.#U}getDefaultOptions(){return this.#f}setDefaultOptions(e){this.#f=e}setQueryDefaults(e,t){this.#E.set(Vae(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#E.values()],n={};return t.forEach(t=>{Gae(e,t.queryKey)&&Object.assign(n,t.defaultOptions)}),n}setMutationDefaults(e,t){this.#k.set(Vae(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#k.values()],n={};return t.forEach(t=>{Gae(e,t.mutationKey)&&Object.assign(n,t.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#f.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Xae(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===roe&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#f.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#S.clear(),this.#U.clear()}};var Aoe;Roe.render(e.jsx(Ioe,{client:Poe,children:e.jsx(It,{children:e.jsx(Mr,{children:e.jsx(vt.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}),children:e.jsxs(jt,{children:[e.jsx(Tt,{path:"/auth/setup",component:joe}),e.jsx(Tt,{path:"/login",component:joe}),e.jsx(Tt,{path:"/",exact:!0,component:()=>{const{isAuthenticated:t,isLoading:n}=_r();return n?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#FFFDF5"},children:e.jsx("div",{children:"Loading..."})}):t?e.jsx(Jse,{}):e.jsx(Toe,{})}}),e.jsx(Tt,{path:"/",component:Jse})]})})})})})),(Aoe=console.log)&&Aoe instanceof Function&&(xae(Aoe),Tae(Aoe),((e,t={})=>{bae(()=>{const n=gae();let r,i=aae("LCP");const s=lae(t,Rae),a=e=>{t.reportAllChanges||(e=e.slice(-1));for(const t of e)s.h(t),t.startTime<n.firstHiddenTime&&(i.value=Math.max(t.startTime-sae(),0),i.entries=[t],r())},o=dae("largest-contentful-paint",a);if(o){r=nae(e,i,Pae,t.reportAllChanges);const n=uae(()=>{a(o.takeRecords()),o.disconnect(),r(!0)}),s=e=>{e.isTrusted&&(Iae(n),removeEventListener(e.type,s,{capture:!0}))};for(const e of["keydown","click","visibilitychange"])addEventListener(e,s,{capture:!0});tae(n=>{i=aae("LCP"),r=nae(e,i,Pae,t.reportAllChanges),rae(()=>{i.value=performance.now()-n.timeStamp,r(!0)})})}})})(Aoe));const Noe=Object.freeze(Object.defineProperty({__proto__:null,decodePngMetadata:async e=>{let t=await JQ(e);if(t?.keyword===lN.excalidraw)try{let e=JSON.parse(t.text);if(!("encoded"in e)){if("type"in e&&e.type===pN.excalidraw)return t.text;throw new Error("FAILED")}return QQ(e)}catch(n){throw new Error("FAILED")}throw new Error("INVALID")},encodePngMetadata:async({blob:e,metadata:t})=>{let n=YM(new Uint8Array(await XQ(e))),r=tI.encode(lN.excalidraw,JSON.stringify(KQ({text:t,compress:!0})));return n.splice(-1,0,r),new Blob([aI(n)],{type:lN.png})},getTEXtChunk:JQ},Symbol.toStringTag,{value:"Module"})),Doe=Object.freeze(Object.defineProperty({__proto__:null,alerts:sJ,buttons:iJ,canvasError:uJ,clearCanvasDialog:UJ,colorPicker:MJ,colors:CJ,commandPalette:AJ,confirmDialog:vJ,default:NJ,element:lJ,elementLink:tJ,encrypted:SJ,errorDialog:mJ,errorSplash:hJ,errors:aJ,exportDialog:gJ,fontList:RJ,headings:cJ,helpDialog:bJ,hints:dJ,imageExportDialog:wJ,labels:eJ,library:nJ,mermaid:jJ,overwriteConfirm:IJ,publishDialog:yJ,publishSuccessDialog:xJ,quickSearch:TJ,roomDialog:fJ,search:rJ,shareDialog:pJ,stats:EJ,toast:kJ,toolBar:oJ,userList:PJ,welcomeScreen:_J},Symbol.toStringTag,{value:"Module"})),Loe=Object.freeze(Object.defineProperty({__proto__:null,default:DJ,en:100,kaa:36},Symbol.toStringTag,{value:"Module"}));export{PM as $,Mo as A,vr as B,Io as C,Zi as D,pi as E,ss as F,ii as G,ooe as H,Ko as I,Hae as J,Zae as K,Bae as L,Oae as M,Lae as N,Fae as O,Ni as P,zae as Q,_o as R,Aae as S,Dae as T,aoe as U,boe as V,eoe as W,coe as X,soe as Y,Moe as Z,Pt as _,qr as a,oo as a0,mi as a1,_u as a2,kr as a3,Bt as a4,ar as a5,gr as a6,Ur as a7,Kie as a8,Qie as a9,Jie as aa,tse as ab,ise as ac,nse as ad,rse as ae,ese as af,pr as ag,yi as ah,$M as ai,ir as b,di as c,qP as d,ni as e,Wr as f,uo as g,ji as h,Ci as i,fs as j,Bi as k,Xr as l,Mi as m,ki as n,To as o,Wi as p,ll as q,es as r,ql as s,jo as t,$i as u,ui as v,_r as w,Bo as x,Zo as y,Ro as z};
