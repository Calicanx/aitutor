const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-bcdvrLXy.js","assets/vendor-DOMpS_Ay.js","assets/index-Cj-nTbIZ.js","assets/khan-DSYLLlOe.js","assets/index-AbfsMNgC.css"])))=>i.map(i=>d[i]);
import{j as e,b8 as s,e as l}from"./khan-DSYLLlOe.js";import{d as a,b as t}from"./vendor-DOMpS_Ay.js";import{c as r,_ as o,a as n,b as i}from"./index-Cj-nTbIZ.js";import{S as c,a as d,b as h,c as x,d as p,T as g}from"./textarea-CUi90pEB.js";import"./chevron-down-BP5Mct-J.js";const u=r("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),b=r("terminal",[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]]),m=e=>{let s;const l=new Set,a=(e,a)=>{const t="function"==typeof e?e(s):e;if(!Object.is(t,s)){const e=s;s=(null!=a?a:"object"!=typeof t||null===t)?t:Object.assign({},s,t),l.forEach(l=>l(s,e))}},t=()=>s,r={setState:a,getState:t,getInitialState:()=>o,subscribe:e=>(l.add(e),()=>l.delete(e))},o=s=e(a,t,r);return r},j=e=>e;const f=e=>{const s=(e=>e?m(e):m)(e),l=e=>function(e,s=j){const l=a.useSyncExternalStore(e.subscribe,a.useCallback(()=>s(e.getState()),[e,s]),a.useCallback(()=>s(e.getInitialState()),[e,s]));return a.useDebugValue(l),l}(s,e);return Object.assign(l,s),l},k=(C=(e,s)=>({maxLogs:50,logs:[],log:({date:l,type:a,message:t})=>{e(e=>{const r=e.logs.at(-1);return r&&r.type===a&&r.message===t?{logs:[...e.logs.slice(0,-1),{date:l,type:a,message:t,count:r.count?r.count+1:1}]}:{logs:[...e.logs.slice(-(s().maxLogs-1)),{date:l,type:a,message:t}]}})},clearLogs:()=>{e({logs:[]})},setMaxLogs:s=>e({maxLogs:s})}))?f(C):f;var C;const w={hljs:{display:"block",overflowX:"auto",padding:"0.5em",background:"#1E1E1E",color:"#DCDCDC"},"hljs-keyword":{color:"#569CD6"},"hljs-literal":{color:"#569CD6"},"hljs-symbol":{color:"#569CD6"},"hljs-name":{color:"#569CD6"},"hljs-link":{color:"#569CD6",textDecoration:"underline"},"hljs-built_in":{color:"#4EC9B0"},"hljs-type":{color:"#4EC9B0"},"hljs-number":{color:"#B8D7A3"},"hljs-class":{color:"#B8D7A3"},"hljs-string":{color:"#D69D85"},"hljs-meta-string":{color:"#D69D85"},"hljs-regexp":{color:"#9A5334"},"hljs-template-tag":{color:"#9A5334"},"hljs-subst":{color:"#DCDCDC"},"hljs-function":{color:"#DCDCDC"},"hljs-title":{color:"#DCDCDC"},"hljs-params":{color:"#DCDCDC"},"hljs-formula":{color:"#DCDCDC"},"hljs-comment":{color:"#57A64A",fontStyle:"italic"},"hljs-quote":{color:"#57A64A",fontStyle:"italic"},"hljs-doctag":{color:"#608B4E"},"hljs-meta":{color:"#9B9B9B"},"hljs-meta-keyword":{color:"#9B9B9B"},"hljs-tag":{color:"#9B9B9B"},"hljs-variable":{color:"#BD63C5"},"hljs-template-variable":{color:"#BD63C5"},"hljs-attr":{color:"#9CDCFE"},"hljs-attribute":{color:"#9CDCFE"},"hljs-builtin-name":{color:"#9CDCFE"},"hljs-section":{color:"gold"},"hljs-emphasis":{fontStyle:"italic"},"hljs-strong":{fontWeight:"bold"},"hljs-bullet":{color:"#D7BA7D"},"hljs-selector-tag":{color:"#D7BA7D"},"hljs-selector-id":{color:"#D7BA7D"},"hljs-selector-class":{color:"#D7BA7D"},"hljs-selector-attr":{color:"#D7BA7D"},"hljs-selector-pseudo":{color:"#D7BA7D"},"hljs-addition":{backgroundColor:"#144212",display:"inline-block",width:"100%"},"hljs-deletion":{backgroundColor:"#600",display:"inline-block",width:"100%"}},D=t.lazy(()=>o(()=>import("./index-bcdvrLXy.js").then(e=>e.c9),__vite__mapDeps([0,1,2,3,4]))),v=t.memo(({log:s,MessageComponent:a})=>{return e.jsxs("li",{className:l("plain-log",`source-${s.type.slice(0,s.type.indexOf("."))}`,{receive:s.type.includes("receive"),send:s.type.includes("send")}),children:[e.jsx("span",{className:"timestamp",children:(t=s.date,t.toLocaleTimeString().slice(0,-3))}),e.jsx("span",{className:"source",children:s.type}),e.jsx("span",{className:"message",children:e.jsx(a,{message:s.message})}),s.count&&e.jsx("span",{className:"count",children:s.count})]});var t}),_=({message:s})=>e.jsx("span",{children:s}),y=({message:s})=>e.jsx("pre",{children:JSON.stringify(s,null,"  ")});function N(e){try{const s=JSON.parse(e);return JSON.stringify(s,null,"  ")}catch(s){return e}}const F=t.memo(({part:s})=>s.text&&s.text.length?e.jsx("p",{className:"part part-text",children:s.text}):s.executableCode?e.jsxs("div",{className:"part part-executableCode",children:[e.jsxs("h5",{children:["executableCode: ",s.executableCode.language]}),e.jsx(t.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(D,{language:s.executableCode.language.toLowerCase(),style:w,children:s.executableCode.code})})]}):s.codeExecutionResult?e.jsxs("div",{className:"part part-codeExecutionResult",children:[e.jsxs("h5",{children:["codeExecutionResult: ",s.codeExecutionResult.outcome]}),e.jsx(t.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(D,{language:"json",style:w,children:N(s.codeExecutionResult.output)})})]}):s.inlineData?e.jsx("div",{className:"part part-inlinedata",children:e.jsxs("h5",{children:["Inline Data: ",s.inlineData?.mimeType]})}):e.jsx("div",{className:"part part-unknown",children:"Â "})),B=t.memo(({message:s})=>{const{turns:l,turnComplete:a}=s,t=l.filter(e=>!(e.text&&"\n"===e.text));return e.jsxs("div",{className:"rich-log client-content user",children:[e.jsx("h4",{className:"roler-user",children:"User"}),e.jsx("div",{children:t.map((s,l)=>e.jsx(F,{part:s},`message-part-${l}`))},"message-turn"),a?"":e.jsx("span",{children:"turnComplete: false"})]})}),S=t.memo(({message:s})=>{const{toolCall:a}=s;return e.jsx("div",{className:l("rich-log tool-call"),children:a.functionCalls?.map((s,l)=>e.jsxs("div",{className:"part part-functioncall",children:[e.jsxs("h5",{children:["Function call: ",s.name]}),e.jsx(t.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(D,{language:"json",style:w,children:JSON.stringify(s,null,"  ")})})]},s.id))})}),E=({message:s})=>e.jsx("div",{className:l("rich-log tool-call-cancellation"),children:e.jsxs("span",{children:[" ","ids:"," ",s.toolCallCancellation.ids?.map(s=>e.jsxs("span",{className:"inline-code",children:['"',s,'"']},`cancel-${s}`))]})}),A=t.memo(({message:s})=>e.jsx("div",{className:l("rich-log tool-response"),children:s.functionResponses?.map(s=>e.jsxs("div",{className:"part",children:[e.jsxs("h5",{children:["Function Response: ",s.id]}),e.jsx(t.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(D,{language:"json",style:w,children:JSON.stringify(s.response,null,"  ")})})]},`tool-response-${s.id}`))})),L=({message:s})=>{const l=s.serverContent,{modelTurn:a}=l,{parts:t}=a;return e.jsxs("div",{className:"rich-log model-turn model",children:[e.jsx("h4",{className:"role-model",children:"Model"}),t?.filter(e=>!(e.text&&"\n"===e.text)).map((s,l)=>e.jsx(F,{part:s},`model-turn-part-${l}`))]})},R=s=>()=>e.jsx(_,{message:s}),O={tools:e=>"object"==typeof e.message&&("toolCall"in e.message||"functionResponses"in e.message||"toolCallCancellation"in e.message),conversations:e=>"object"==typeof e.message&&("turns"in e.message&&"turnComplete"in e.message||"serverContent"in e.message),none:()=>!0},T=e=>{if("string"==typeof e.message)return _;if("turns"in e.message&&"turnComplete"in e.message)return B;if("toolCall"in e.message)return S;if("toolCallCancellation"in e.message)return E;if("functionResponses"in e.message)return A;if("serverContent"in e.message){const{serverContent:s}=e.message;if(s?.interrupted)return R("interrupted");if(s?.turnComplete)return R("turnComplete");if(s&&"modelTurn"in s)return L}return y};function M({filter:l="none"}){const{logs:a}=k(),r=t.useMemo(()=>{const e=O[l];return a.filter(e)},[a,l]),o=t.memo(({index:s,style:l})=>{const a=r[s];return e.jsx("div",{style:l,children:e.jsx(v,{MessageComponent:T(a),log:a},s)})});return e.jsx("div",{className:"logger",children:r.length>0?e.jsx(s,{height:600,itemCount:r.length,itemSize:e=>"string"==typeof r[e].message?40:120,width:"100%",className:"logger-list",children:o}):e.jsx("div",{className:"logger-empty",children:"No logs to display"})})}const z=[{value:"conversations",label:"Conversations"},{value:"tools",label:"Tool Use"},{value:"none",label:"All"}];function J({open:s}){const{connected:a,client:r}=n(),o=t.useRef(null),m=t.useRef(-1),{log:j,logs:f}=k(),[C,w]=t.useState(""),[D,v]=t.useState("none");t.useEffect(()=>{if(o.current){const e=o.current,s=e.scrollHeight;s!==m.current&&(e.scrollTop=s,m.current=s)}},[f]),t.useEffect(()=>(r.on("log",j),()=>{r.off("log",j)}),[r,j]);const _=()=>{r.send([{text:C}]),w("")};return e.jsxs("div",{className:l("fixed top-[44px] lg:top-[48px] right-0 flex flex-col border-l-[3px] lg:border-l-[4px] border-black dark:border-white bg-[#FFFDF5] dark:bg-[#000000] transition-all duration-500 cubic-bezier(0.16, 1, 0.3, 1) z-50 will-change-transform shadow-[-2px_0_0_0_rgba(0,0,0,1)] lg:shadow-[-2px_0_0_0_rgba(0,0,0,1)] dark:shadow-[-2px_0_0_0_rgba(255,255,255,0.3)]","h-[calc(100vh-44px)] lg:h-[calc(100vh-48px)] w-[240px] lg:w-[260px]",s?"translate-x-0":"translate-x-full","max-md:hidden"),children:[e.jsx("header",{className:"flex items-center justify-between h-[44px] lg:h-[48px] px-3 lg:px-4 border-b-[3px] border-black dark:border-white shrink-0 overflow-hidden transition-all duration-300 bg-[#C4B5FD]",children:e.jsxs("div",{className:"flex items-center gap-2 lg:gap-2.5 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsx("div",{className:"p-1.5 lg:p-2 border-[2px] lg:border-[3px] border-black dark:border-white bg-[#FFFDF5] dark:bg-[#000000]",children:e.jsx(b,{className:"w-4 h-4 lg:w-4 lg:h-4 text-black dark:text-white font-bold"})}),e.jsx("h2",{className:"text-sm lg:text-base font-black text-black uppercase tracking-tight whitespace-nowrap",children:"Console"})]})}),e.jsxs("div",{className:"flex flex-col flex-grow overflow-hidden transition-all duration-300 opacity-100 translate-y-0 bg-[#FFFDF5] dark:bg-[#000000]",children:[e.jsxs("section",{className:"flex items-center justify-between px-6 py-4 gap-3 shrink-0 border-b-[3px] border-black dark:border-white",children:[e.jsxs(c,{value:D,onValueChange:e=>v(e),children:[e.jsx(d,{className:"w-[160px] bg-[#FFFDF5] dark:bg-[#000000] border-[3px] border-black dark:border-white text-black dark:text-white h-9 text-xs font-black uppercase tracking-wide shadow-[3px_3px_0_0_rgba(0,0,0,1)] dark:shadow-[3px_3px_0_0_rgba(255,255,255,0.3)]",children:e.jsx(h,{placeholder:"Filter logs"})}),e.jsx(x,{className:"bg-[#FFFDF5] dark:bg-[#000000] border-[3px] border-black dark:border-white text-black dark:text-white",children:z.map(s=>e.jsx(p,{value:s.value,className:"focus:bg-[#FFD93D] dark:focus:bg-[#FFD93D] focus:text-black cursor-pointer font-bold uppercase",children:s.label},s.value))})]}),e.jsxs("div",{className:l("flex items-center gap-2 px-3 py-1.5 border-[3px] border-black dark:border-white text-xs font-black uppercase tracking-wider transition-colors shadow-[3px_3px_0_0_rgba(0,0,0,1)] dark:shadow-[3px_3px_0_0_rgba(255,255,255,0.3)]",a?"bg-[#4ADE80] text-black":"bg-[#FFFDF5] dark:bg-[#000000] text-black dark:text-white"),children:[e.jsx("div",{className:l("w-3 h-3 border-[2px] border-black dark:border-white transition-all duration-300",a?"bg-black dark:bg-white animate-pulse":"bg-black dark:bg-white")}),e.jsx("span",{children:a?"Streaming":"Paused"})]})]}),e.jsx("div",{className:"flex-grow overflow-y-auto overflow-x-hidden px-6 py-4 scrollbar-thin scrollbar-thumb-black dark:scrollbar-thumb-white scrollbar-track-transparent",ref:o,children:e.jsx(M,{filter:D})}),e.jsx("div",{className:l("p-6 border-t-[4px] border-black dark:border-white bg-[#FFFDF5] dark:bg-[#000000] shrink-0 transition-all duration-300",{"opacity-50 pointer-events-none":!a}),children:e.jsxs("div",{className:"flex items-end gap-3 p-3 bg-[#FFFDF5] dark:bg-[#000000] border-[3px] border-black dark:border-white focus-within:border-[#C4B5FD] focus-within:shadow-[2px_2px_0_0_rgba(0,0,0,1)] dark:focus-within:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)] transition-all shadow-[2px_2px_0_0_rgba(0,0,0,1)] dark:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)]",children:[e.jsx(g,{className:"w-full min-h-[24px] max-h-[120px] p-0 text-sm bg-transparent border-0 shadow-none resize-none focus-visible:ring-0 focus-visible:ring-offset-0 text-black dark:text-white placeholder:text-black/50 dark:placeholder:text-white/50 font-bold",placeholder:"Type a message...",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),e.stopPropagation(),_())},onChange:e=>w(e.target.value),value:C}),e.jsx(i,{type:"button",className:"w-10 h-10 border-[3px] border-black dark:border-white bg-[#C4B5FD] hover:bg-[#C4B5FD] text-black shrink-0 p-0 flex items-center justify-center transition-all duration-100 hover:shadow-[2px_2px_0_0_rgba(0,0,0,1)] dark:hover:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)] shadow-[2px_2px_0_0_rgba(0,0,0,1)] dark:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)] active:translate-x-1 active:translate-y-1 active:shadow-none disabled:opacity-50",onClick:_,disabled:!C.trim()||!a,children:e.jsx(u,{className:"w-5 h-5 font-bold"})})]})})]})]})}export{J as default};
