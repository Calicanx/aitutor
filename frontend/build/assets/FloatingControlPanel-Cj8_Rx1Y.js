import{j as e,a as t}from"./khan-B5RQw5PV.js";import{r as a,a as r,e as n,g as s,b as o}from"./vendor-ITG08NwX.js";import{c as i,a4 as l,a5 as c,a6 as d,a7 as u,B as p,a8 as h,a9 as f,aa as m,ab as x,b,ac as g,ad as w,ae as v,af as y,G as k,ag as _,$ as j,ah as F}from"./index-CLbeeoFv.js";import{L as D}from"./label-C6gqt1if.js";import{S as N,a as C,b as S,d as M,e as E,T as P,C as T}from"./textarea-D4jRRfYG.js";import{M as A}from"./genai-DDPItglK.js";import{C as O}from"./chevron-down-hnA8vWtd.js";import"./index-M2YaF2x6.js";const B=i("circle-play",[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),W=i("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),R=i("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),I=i("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]),V=i("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),X=i("mic-off",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]]),L=i("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]),Y=i("monitor-off",[["path",{d:"M17 17H4a2 2 0 0 1-2-2V5c0-1.5 1-2 1-2",key:"k0q8oc"}],["path",{d:"M22 15V5a2 2 0 0 0-2-2H9",key:"cp1ac0"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),$=i("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),U=i("pen-tool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),z=i("video-off",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),H=i("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),q=i("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var G,K={exports:{}},J={},Q={exports:{}};var Z,ee={},te={};function ae(){if(Z)return te;return Z=1,Object.defineProperty(te,"__esModule",{value:!0}),te.dontSetMe=function(e,t,a){if(e[t])return new Error(`Invalid prop ${t} passed to ${a} - do not set this, set it on the child.`)},te.findInArray=function(e,t){for(let a=0,r=e.length;a<r;a++)if(t.apply(t,[e[a],a,e]))return e[a]},te.int=function(e){return parseInt(e,10)},te.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},te.isNum=function(e){return"number"==typeof e&&!isNaN(e)},te}var re,ne,se={};function oe(){if(ne)return ee;ne=1,Object.defineProperty(ee,"__esModule",{value:!0}),ee.addClassName=o,ee.addEvent=function(e,t,a,r){if(!e)return;const n={capture:!0,...r};e.addEventListener?e.addEventListener(t,a,n):e.attachEvent?e.attachEvent("on"+t,a):e["on"+t]=a},ee.addUserSelectStyles=function(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&o(e.body,"react-draggable-transparent-selection")},ee.createCSSTransform=function(e,a){const r=n(e,a,"px");return{[(0,t.browserPrefixToKey)("transform",t.default)]:r}},ee.createSVGTransform=function(e,t){return n(e,t,"")},ee.getTouch=function(t,a){return t.targetTouches&&(0,e.findInArray)(t.targetTouches,e=>a===e.identifier)||t.changedTouches&&(0,e.findInArray)(t.changedTouches,e=>a===e.identifier)},ee.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},ee.getTranslation=n,ee.innerHeight=function(t){let a=t.clientHeight;const r=t.ownerDocument.defaultView.getComputedStyle(t);return a-=(0,e.int)(r.paddingTop),a-=(0,e.int)(r.paddingBottom),a},ee.innerWidth=function(t){let a=t.clientWidth;const r=t.ownerDocument.defaultView.getComputedStyle(t);return a-=(0,e.int)(r.paddingLeft),a-=(0,e.int)(r.paddingRight),a},ee.matchesSelector=r,ee.matchesSelectorAndParentsTo=function(e,t,a){let n=e;do{if(r(n,t))return!0;if(n===a)return!1;n=n.parentNode}while(n);return!1},ee.offsetXYFromParent=function(e,t,a){const r=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),n=(e.clientX+t.scrollLeft-r.left)/a,s=(e.clientY+t.scrollTop-r.top)/a;return{x:n,y:s}},ee.outerHeight=function(t){let a=t.clientHeight;const r=t.ownerDocument.defaultView.getComputedStyle(t);return a+=(0,e.int)(r.borderTopWidth),a+=(0,e.int)(r.borderBottomWidth),a},ee.outerWidth=function(t){let a=t.clientWidth;const r=t.ownerDocument.defaultView.getComputedStyle(t);return a+=(0,e.int)(r.borderLeftWidth),a+=(0,e.int)(r.borderRightWidth),a},ee.removeClassName=i,ee.removeEvent=function(e,t,a,r){if(!e)return;const n={capture:!0,...r};e.removeEventListener?e.removeEventListener(t,a,n):e.detachEvent?e.detachEvent("on"+t,a):e["on"+t]=null},ee.scheduleRemoveUserSelectStyles=function(e){window.requestAnimationFrame?window.requestAnimationFrame(()=>{s(e)}):s(e)};var e=ae(),t=function(e,t){if("function"==typeof WeakMap)var a=new WeakMap,r=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,s,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,o)}for(const a in e)"default"!==a&&{}.hasOwnProperty.call(e,a)&&((s=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,a))&&(s.get||s.set)?n(o,a,s):o[a]=e[a]);return o}(e,t)}(function(){if(re)return se;re=1,Object.defineProperty(se,"__esModule",{value:!0}),se.browserPrefixToKey=a,se.browserPrefixToStyle=function(e,t){return t?`-${t.toLowerCase()}-${e}`:e},se.default=void 0,se.getPrefix=t;const e=["Moz","Webkit","O","ms"];function t(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";const r=window.document?.documentElement?.style;if(!r)return"";if(t in r)return"";for(let n=0;n<e.length;n++)if(a(t,e[n])in r)return e[n];return""}function a(e,t){return t?`${t}${function(e){let t="",a=!0;for(let r=0;r<e.length;r++)a?(t+=e[r].toUpperCase(),a=!1):"-"===e[r]?a=!0:t+=e[r];return t}(e)}`:e}return se.default=t(),se}());let a="";function r(t,r){return a||(a=(0,e.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(a){return(0,e.isFunction)(t[a])})),!!(0,e.isFunction)(t[a])&&t[a](r)}function n(e,t,a){let{x:r,y:n}=e,s=`translate(${r}${a},${n}${a})`;if(t){s=`translate(${`${"string"==typeof t.x?t.x:t.x+a}`}, ${`${"string"==typeof t.y?t.y:t.y+a}`})`+s}return s}function s(e){if(e)try{if(e.body&&i(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(t){}}function o(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp(`(?:^|\\s)${t}(?!\\S)`))||(e.className+=` ${t}`)}function i(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp(`(?:^|\\s)${t}(?!\\S)`,"g"),"")}return ee}var ie,le={};function ce(){if(ie)return le;ie=1,Object.defineProperty(le,"__esModule",{value:!0}),le.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},le.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},le.createCoreData=function(t,r,n){const s=!(0,e.isNum)(t.lastX),o=a(t);return s?{node:o,deltaX:0,deltaY:0,lastX:r,lastY:n,x:r,y:n}:{node:o,deltaX:r-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:r,y:n}},le.createDraggableData=function(e,t){const a=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/a,y:e.state.y+t.deltaY/a,deltaX:t.deltaX/a,deltaY:t.deltaY/a,lastX:e.state.x,lastY:e.state.y}},le.getBoundPosition=function(r,n,s){if(!r.props.bounds)return[n,s];let{bounds:o}=r.props;o="string"==typeof o?o:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(o);const i=a(r);if("string"==typeof o){const{ownerDocument:a}=i,r=a.defaultView;let n;if("parent"===o)n=i.parentNode;else{n=i.getRootNode().querySelector(o)}if(!(n instanceof r.HTMLElement))throw new Error('Bounds selector "'+o+'" could not find an element.');const s=n,l=r.getComputedStyle(i),c=r.getComputedStyle(s);o={left:-i.offsetLeft+(0,e.int)(c.paddingLeft)+(0,e.int)(l.marginLeft),top:-i.offsetTop+(0,e.int)(c.paddingTop)+(0,e.int)(l.marginTop),right:(0,t.innerWidth)(s)-(0,t.outerWidth)(i)-i.offsetLeft+(0,e.int)(c.paddingRight)-(0,e.int)(l.marginRight),bottom:(0,t.innerHeight)(s)-(0,t.outerHeight)(i)-i.offsetTop+(0,e.int)(c.paddingBottom)-(0,e.int)(l.marginBottom)}}(0,e.isNum)(o.right)&&(n=Math.min(n,o.right));(0,e.isNum)(o.bottom)&&(s=Math.min(s,o.bottom));(0,e.isNum)(o.left)&&(n=Math.max(n,o.left));(0,e.isNum)(o.top)&&(s=Math.max(s,o.top));return[n,s]},le.getControlPosition=function(e,r,n){const s="number"==typeof r?(0,t.getTouch)(e,r):null;if("number"==typeof r&&!s)return null;const o=a(n),i=n.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,t.offsetXYFromParent)(s||e,i,n.props.scale)},le.snapToGrid=function(e,t,a){const r=Math.round(t/e[0])*e[0],n=Math.round(a/e[1])*e[1];return[r,n]};var e=ae(),t=oe();function a(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}return le}var de,ue,pe,he,fe={},me={};function xe(){if(de)return me;return de=1,Object.defineProperty(me,"__esModule",{value:!0}),me.default=function(){},me}function be(){if(ue)return fe;ue=1,Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var e=function(e,t){if("function"==typeof WeakMap)var a=new WeakMap,r=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,s,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,o)}for(const a in e)"default"!==a&&{}.hasOwnProperty.call(e,a)&&((s=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,a))&&(s.get||s.set)?n(o,a,s):o[a]=e[a]);return o}(e,t)}(a()),t=d(n()),s=d(r()),o=oe(),i=ce(),l=ae(),c=d(xe());function d(e){return e&&e.__esModule?e:{default:e}}function u(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const p={start:"touchstart",move:"touchmove",stop:"touchend"},h={start:"mousedown",move:"mousemove",stop:"mouseup"};let f=h,m=class extends e.Component{constructor(){super(...arguments),u(this,"dragging",!1),u(this,"lastX",NaN),u(this,"lastY",NaN),u(this,"touchIdentifier",null),u(this,"mounted",!1),u(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&"number"==typeof e.button&&0!==e.button)return!1;const t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:a}=t;if(this.props.disabled||!(e.target instanceof a.defaultView.Node)||this.props.handle&&!(0,o.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,o.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;"touchstart"!==e.type||this.props.allowMobileScroll||e.preventDefault();const r=(0,o.getTouchIdentifier)(e);this.touchIdentifier=r;const n=(0,i.getControlPosition)(e,r,this);if(null==n)return;const{x:s,y:l}=n,d=(0,i.createCoreData)(this,s,l);(0,c.default)("DraggableCore: handleDragStart: %j",d),(0,c.default)("calling",this.props.onStart);!1!==this.props.onStart(e,d)&&!1!==this.mounted&&(this.props.enableUserSelectHack&&(0,o.addUserSelectStyles)(a),this.dragging=!0,this.lastX=s,this.lastY=l,(0,o.addEvent)(a,f.move,this.handleDrag),(0,o.addEvent)(a,f.stop,this.handleDragStop))}),u(this,"handleDrag",e=>{const t=(0,i.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:a,y:r}=t;if(Array.isArray(this.props.grid)){let e=a-this.lastX,t=r-this.lastY;if([e,t]=(0,i.snapToGrid)(this.props.grid,e,t),!e&&!t)return;a=this.lastX+e,r=this.lastY+t}const n=(0,i.createCoreData)(this,a,r);(0,c.default)("DraggableCore: handleDrag: %j",n);if(!1!==this.props.onDrag(e,n)&&!1!==this.mounted)this.lastX=a,this.lastY=r;else try{this.handleDragStop(new MouseEvent("mouseup"))}catch(s){const e=document.createEvent("MouseEvents");e.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(e)}}),u(this,"handleDragStop",e=>{if(!this.dragging)return;const t=(0,i.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:a,y:r}=t;if(Array.isArray(this.props.grid)){let e=a-this.lastX||0,t=r-this.lastY||0;[e,t]=(0,i.snapToGrid)(this.props.grid,e,t),a=this.lastX+e,r=this.lastY+t}const n=(0,i.createCoreData)(this,a,r);if(!1===this.props.onStop(e,n)||!1===this.mounted)return!1;const s=this.findDOMNode();s&&this.props.enableUserSelectHack&&(0,o.scheduleRemoveUserSelectStyles)(s.ownerDocument),(0,c.default)("DraggableCore: handleDragStop: %j",n),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,s&&((0,c.default)("DraggableCore: Removing handlers"),(0,o.removeEvent)(s.ownerDocument,f.move,this.handleDrag),(0,o.removeEvent)(s.ownerDocument,f.stop,this.handleDragStop))}),u(this,"onMouseDown",e=>(f=h,this.handleDragStart(e))),u(this,"onMouseUp",e=>(f=h,this.handleDragStop(e))),u(this,"onTouchStart",e=>(f=p,this.handleDragStart(e))),u(this,"onTouchEnd",e=>(f=p,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,o.addEvent)(e,p.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;(0,o.removeEvent)(t,h.move,this.handleDrag),(0,o.removeEvent)(t,p.move,this.handleDrag),(0,o.removeEvent)(t,h.stop,this.handleDragStop),(0,o.removeEvent)(t,p.stop,this.handleDragStop),(0,o.removeEvent)(e,p.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,o.scheduleRemoveUserSelectStyles)(t)}}findDOMNode(){return this.props?.nodeRef?this.props?.nodeRef?.current:s.default.findDOMNode(this)}render(){return e.cloneElement(e.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return fe.default=m,u(m,"displayName","DraggableCore"),u(m,"propTypes",{allowAnyClick:t.default.bool,allowMobileScroll:t.default.bool,children:t.default.node.isRequired,disabled:t.default.bool,enableUserSelectHack:t.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:t.default.arrayOf(t.default.number),handle:t.default.string,cancel:t.default.string,nodeRef:t.default.object,onStart:t.default.func,onDrag:t.default.func,onStop:t.default.func,onMouseDown:t.default.func,scale:t.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),u(m,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),fe}function ge(){return pe||(pe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),e.default=void 0;var t=function(e,t){if("function"==typeof WeakMap)var a=new WeakMap,r=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,s,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(n=t?r:a){if(n.has(e))return n.get(e);n.set(e,o)}for(const a in e)"default"!==a&&{}.hasOwnProperty.call(e,a)&&((s=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,a))&&(s.get||s.set)?n(o,a,s):o[a]=e[a]);return o}(e,t)}(a()),s=h(n()),o=h(r()),i=function(){if(G)return Q.exports;function e(t){var a,r,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t)if(Array.isArray(t)){var s=t.length;for(a=0;a<s;a++)t[a]&&(r=e(t[a]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function t(){for(var t,a,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(a=e(t))&&(n&&(n+=" "),n+=a);return n}return G=1,Q.exports=t,Q.exports.clsx=t,Q.exports}(),l=oe(),c=ce(),d=ae(),u=h(be()),p=h(xe());function h(e){return e&&e.__esModule?e:{default:e}}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},f.apply(null,arguments)}function m(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class x extends t.Component{static getDerivedStateFromProps(e,t){let{position:a}=e,{prevPropsPosition:r}=t;return!a||r&&a.x===r.x&&a.y===r.y?null:((0,p.default)("Draggable: getDerivedStateFromProps %j",{position:a,prevPropsPosition:r}),{x:a.x,y:a.y,prevPropsPosition:{...a}})}constructor(e){super(e),m(this,"onDragStart",(e,t)=>{(0,p.default)("Draggable: onDragStart: %j",t);if(!1===this.props.onStart(e,(0,c.createDraggableData)(this,t)))return!1;this.setState({dragging:!0,dragged:!0})}),m(this,"onDrag",(e,t)=>{if(!this.state.dragging)return!1;(0,p.default)("Draggable: onDrag: %j",t);const a=(0,c.createDraggableData)(this,t),r={x:a.x,y:a.y,slackX:0,slackY:0};if(this.props.bounds){const{x:e,y:t}=r;r.x+=this.state.slackX,r.y+=this.state.slackY;const[n,s]=(0,c.getBoundPosition)(this,r.x,r.y);r.x=n,r.y=s,r.slackX=this.state.slackX+(e-r.x),r.slackY=this.state.slackY+(t-r.y),a.x=r.x,a.y=r.y,a.deltaX=r.x-this.state.x,a.deltaY=r.y-this.state.y}if(!1===this.props.onDrag(e,a))return!1;this.setState(r)}),m(this,"onDragStop",(e,t)=>{if(!this.state.dragging)return!1;if(!1===this.props.onStop(e,(0,c.createDraggableData)(this,t)))return!1;(0,p.default)("Draggable: onDragStop: %j",t);const a={dragging:!1,slackX:0,slackY:0};if(Boolean(this.props.position)){const{x:e,y:t}=this.props.position;a.x=e,a.y=t}this.setState(a)}),this.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:{...e.position},slackX:0,slackY:0,isElementSVG:!1},e.position&&!e.onDrag&&e.onStop}componentDidMount(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){return this.props?.nodeRef?.current??o.default.findDOMNode(this)}render(){const{axis:e,bounds:a,children:r,defaultPosition:n,defaultClassName:s,defaultClassNameDragging:o,defaultClassNameDragged:d,position:p,positionOffset:h,scale:m,...x}=this.props;let b={},g=null;const w=!Boolean(p)||this.state.dragging,v=p||n,y={x:(0,c.canDragX)(this)&&w?this.state.x:v.x,y:(0,c.canDragY)(this)&&w?this.state.y:v.y};this.state.isElementSVG?g=(0,l.createSVGTransform)(y,h):b=(0,l.createCSSTransform)(y,h);const k=(0,i.clsx)(r.props.className||"",s,{[o]:this.state.dragging,[d]:this.state.dragged});return t.createElement(u.default,f({},x,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(r),{className:k,style:{...r.props.style,...b},transform:g}))}}e.default=x,m(x,"displayName","Draggable"),m(x,"propTypes",{...u.default.propTypes,axis:s.default.oneOf(["both","x","y","none"]),bounds:s.default.oneOfType([s.default.shape({left:s.default.number,right:s.default.number,top:s.default.number,bottom:s.default.number}),s.default.string,s.default.oneOf([!1])]),defaultClassName:s.default.string,defaultClassNameDragging:s.default.string,defaultClassNameDragged:s.default.string,defaultPosition:s.default.shape({x:s.default.number,y:s.default.number}),positionOffset:s.default.shape({x:s.default.oneOfType([s.default.number,s.default.string]),y:s.default.oneOfType([s.default.number,s.default.string])}),position:s.default.shape({x:s.default.number,y:s.default.number}),className:d.dontSetMe,style:d.dontSetMe,transform:d.dontSetMe}),m(x,"defaultProps",{...u.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})}(J)),J}const we=s(function(){if(he)return K.exports;he=1;const{default:e,DraggableCore:t}=ge();return K.exports=e,K.exports.default=e,K.exports.DraggableCore=t,K.exports}());class ve extends l{constructor(e=16e3){super(),this.sampleRate=e}stream;audioContext;source;recording=!1;recordingWorklet;vuWorklet;starting=null;async start(e){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Could not request user media");this.starting=new Promise(async(t,a)=>{this.stream=await navigator.mediaDevices.getUserMedia({audio:!e||{deviceId:{exact:e}}}),this.audioContext=await c({sampleRate:this.sampleRate}),this.source=this.audioContext.createMediaStreamSource(this.stream);const r="audio-recorder-worklet",n=d(r,'\nclass AudioProcessingWorklet extends AudioWorkletProcessor {\n\n  // send and clear buffer every 2048 samples, \n  // which at 16khz is about 8 times a second\n  buffer = new Int16Array(2048);\n\n  // current write index\n  bufferWriteIndex = 0;\n\n  constructor() {\n    super();\n    this.hasAudio = false;\n  }\n\n  /**\n   * @param inputs Float32Array[][] [input#][channel#][sample#] so to access first inputs 1st channel inputs[0][0]\n   * @param outputs Float32Array[][]\n   */\n  process(inputs) {\n    if (inputs[0].length) {\n      const channel0 = inputs[0][0];\n      this.processChunk(channel0);\n    }\n    return true;\n  }\n\n  sendAndClearBuffer(){\n    this.port.postMessage({\n      event: "chunk",\n      data: {\n        int16arrayBuffer: this.buffer.slice(0, this.bufferWriteIndex).buffer,\n      },\n    });\n    this.bufferWriteIndex = 0;\n  }\n\n  processChunk(float32Array) {\n    const l = float32Array.length;\n    \n    for (let i = 0; i < l; i++) {\n      // convert float32 -1 to 1 to int16 -32768 to 32767\n      const int16Value = float32Array[i] * 32768;\n      this.buffer[this.bufferWriteIndex++] = int16Value;\n      if(this.bufferWriteIndex >= this.buffer.length) {\n        this.sendAndClearBuffer();\n      }\n    }\n\n    if(this.bufferWriteIndex >= this.buffer.length) {\n      this.sendAndClearBuffer();\n    }\n  }\n}\n');await this.audioContext.audioWorklet.addModule(n),this.recordingWorklet=new AudioWorkletNode(this.audioContext,r),this.recordingWorklet.port.onmessage=async e=>{const t=e.data.data.int16arrayBuffer;if(t){const e=function(e){for(var t="",a=new Uint8Array(e),r=a.byteLength,n=0;n<r;n++)t+=String.fromCharCode(a[n]);return window.btoa(t)}(t);this.emit("data",e)}},this.source.connect(this.recordingWorklet);const s="vu-meter";await this.audioContext.audioWorklet.addModule(d(s,u)),this.vuWorklet=new AudioWorkletNode(this.audioContext,s),this.vuWorklet.port.onmessage=e=>{this.emit("volume",e.data.volume)},this.source.connect(this.vuWorklet),this.recording=!0,t(),this.starting=null})}stop(){const e=()=>{this.source?.disconnect(),this.stream?.getTracks().forEach(e=>e.stop()),this.stream=void 0,this.recordingWorklet=void 0,this.vuWorklet=void 0};this.starting?this.starting.then(e):e()}}const ye=[{value:"Puck",label:"Puck"},{value:"Charon",label:"Charon"},{value:"Kore",label:"Kore"},{value:"Fenrir",label:"Fenrir"},{value:"Aoede",label:"Aoede"}];function ke(){const{config:t,setConfig:a}=p(),[r,n]=o.useState("Puck");o.useEffect(()=>{const e=t.speechConfig?.voiceConfig?.prebuiltVoiceConfig?.voiceName||"Atari02";n(e)},[t]);const s=o.useCallback(e=>{a({...t,speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}}})},[t,a]);return e.jsxs("div",{className:"select-group space-y-1",children:[e.jsx(D,{htmlFor:"voice-selector",children:"Voice"}),e.jsxs(N,{value:r,onValueChange:e=>{n(e),s(e)},children:[e.jsx(C,{id:"voice-selector",children:e.jsx(S,{})}),e.jsx(M,{children:ye.map(t=>e.jsx(E,{value:t.value,children:t.label},t.value))})]})]})}const _e=[{value:"audio",label:"audio"},{value:"text",label:"text"}];function je(){const{config:t,setConfig:a}=p(),[r,n]=o.useState("audio"),s=o.useCallback(e=>{a({...t,responseModalities:["audio"===e?A.AUDIO:A.TEXT]})},[t,a]);return e.jsxs("div",{className:"select-group space-y-1",children:[e.jsx(D,{htmlFor:"response-modality-selector",children:"Response modality"}),e.jsxs(N,{value:r,onValueChange:e=>{"audio"!==e&&"text"!==e||(n(e),s(e))},children:[e.jsx(C,{id:"response-modality-selector",children:e.jsx(S,{})}),e.jsx(M,{children:_e.map(t=>e.jsx(E,{value:t.value,children:t.label},t.value))})]})]})}const Fe=h,De=f,Ne=m,Ce=o.forwardRef(({className:t,...a},r)=>e.jsx(y,{ref:r,className:b("fixed inset-0 z-[1001] bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a}));Ce.displayName=y.displayName;const Se=o.forwardRef(({className:t,children:a,...r},n)=>e.jsxs(Ne,{children:[e.jsx(Ce,{}),e.jsxs(x,{ref:n,className:b("fixed left-[50%] top-[50%] z-[1002] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[a,e.jsxs(g,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Se.displayName=x.displayName;const Me=({className:t,...a})=>e.jsx("div",{className:b("flex flex-col space-y-1.5 text-center sm:text-left",t),...a});Me.displayName="DialogHeader";const Ee=o.forwardRef(({className:t,...a},r)=>e.jsx(w,{ref:r,className:b("text-lg font-semibold leading-none tracking-tight",t),...a}));Ee.displayName=w.displayName;const Pe=o.forwardRef(({className:t,...a},r)=>e.jsx(v,{ref:r,className:b("text-sm text-muted-foreground",t),...a}));function Te({trigger:t,className:a}){const{config:r,setConfig:n,connected:s}=p(),[i,l]=o.useState(""),c=o.useMemo(()=>Array.isArray(r.tools)?r.tools.filter(e=>Array.isArray(e.functionDeclarations)).map(e=>e.functionDeclarations).filter(e=>!!e).flat():[],[r]);o.useEffect(()=>{n({...r,responseModalities:[A.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Puck"}}}})},[]);const d=o.useCallback(e=>{const t=e.target.value;l(t);const a={...r,systemInstruction:t.trim()};n(a)},[r,n]),u=o.useCallback((e,t)=>{const a={...r,tools:r.tools?.map(a=>{const r=a;return Array.isArray(r.functionDeclarations)?{...a,functionDeclarations:r.functionDeclarations.map(a=>a.name===e?{...a,description:t}:a)}:a})||[]};n(a)},[r,n]);return e.jsx("div",{className:`settings-dialog z-1002 ${a||""}`,children:e.jsxs(Fe,{children:[e.jsx(De,{asChild:!0,children:t||e.jsx(k,{type:"button",variant:"outline",size:"icon",className:"action-button material-symbols-outlined",children:"settings"})}),e.jsxs(Se,{className:"dialog",children:[e.jsxs(Me,{children:[e.jsx(Ee,{children:"Settings"}),e.jsx(Pe,{children:"Configure response modality, voice, and system instructions before connecting."})]}),e.jsxs("div",{className:"dialog-container "+(s?"disabled":""),children:[s&&e.jsx("div",{className:"connected-indicator",children:e.jsx("p",{children:"These settings can only be applied before connecting and will override other settings."})}),e.jsxs("div",{className:"mode-selectors",children:[e.jsx(je,{}),e.jsx(ke,{})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"system-instructions",children:"System Instructions"}),e.jsx(P,{id:"system-instructions",className:"system",onChange:d,value:i,placeholder:"Add additional instructions for the model..."})]}),e.jsx("h4",{children:"Function declarations"}),e.jsx("div",{className:"function-declarations",children:e.jsx("div",{className:"fd-rows",children:c.map((t,a)=>e.jsxs("div",{className:"fd-row",children:[e.jsx("span",{className:"fd-row-name",children:t.name}),e.jsx("span",{className:"fd-row-args",children:Object.keys(t.parameters?.properties||{}).map((t,a)=>e.jsx("span",{children:t},a))}),e.jsx("input",{className:"fd-row-description",type:"text",defaultValue:t.description,onBlur:e=>u(t.name,e.target.value)},`fd-${t.description}`)]},`function-${a}`))})})]})]})]})})}Pe.displayName=v.displayName;const Ae=({canvasRef:t,onStatusChange:a,isCameraEnabled:r=!0,isScreenShareEnabled:n=!0,isCanvasEnabled:s=!0})=>{const[i,l]=o.useState(!0),[c,d]=o.useState(null),u=o.useRef(null),p=o.useRef(null);return o.useEffect(()=>{a&&a({isConnected:i,error:c})},[i,c,a]),o.useEffect(()=>{const e=t.current,a=u.current;if(!e||!a)return;const r=a.getContext("2d");if(!r)return void d("Failed to get canvas context");a.width=e.width,a.height=e.height;let n=0;const s=t=>{t-n>=100&&(e.width>0&&e.height>0&&(a.width===e.width&&a.height===e.height||(a.width=e.width,a.height=e.height),r.drawImage(e,0,0)),n=t),p.current=requestAnimationFrame(s)};return p.current=requestAnimationFrame(s),l(!0),d(null),()=>{p.current&&cancelAnimationFrame(p.current)}},[t]),e.jsx("div",{className:"flex flex-col w-full bg-white dark:bg-[#000000] text-black dark:text-white overflow-hidden transition-colors duration-300",children:e.jsxs("div",{className:"flex flex-col items-center justify-center p-0 bg-white dark:bg-[#000000] relative overflow-hidden group transition-colors duration-300",children:[c&&e.jsxs("div",{className:"text-sm text-center p-4 border-[3px] border-black dark:border-white bg-[#FF006E] text-white max-w-[90%] shadow-[2px_2px_0_0_rgba(0,0,0,1)] dark:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)] z-20 absolute",children:[e.jsx("span",{className:"material-symbols-outlined text-2xl mb-2 block font-bold",children:"error"}),c]}),!i&&!c&&e.jsxs("div",{className:"flex flex-col items-center gap-3 text-black dark:text-white animate-pulse z-20 py-12",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl opacity-50 font-bold",children:"connecting_airports"}),e.jsx("div",{className:"text-sm font-black uppercase",children:"Initializing..."})]}),i&&e.jsx("div",{className:"w-full h-auto flex items-center justify-center bg-white dark:bg-[#000000]",children:e.jsx("canvas",{ref:u,className:"w-full h-auto object-contain",style:{maxHeight:"600px"}})}),e.jsxs("div",{className:"absolute bottom-2 left-2 flex gap-2 z-10",children:[r&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 border-[2px] border-black dark:border-white bg-[#C4B5FD] text-black dark:text-white text-[10px] font-black uppercase shadow-[1px_1px_0_0_rgba(0,0,0,1)] dark:shadow-[1px_1px_0_0_rgba(255,255,255,0.3)]",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-black dark:bg-white animate-pulse"}),"Camera"]}),n&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 border-[2px] border-black dark:border-white bg-[#FFD93D] text-black text-[10px] font-black uppercase shadow-[1px_1px_0_0_rgba(0,0,0,1)] dark:shadow-[1px_1px_0_0_rgba(255,255,255,0.3)]",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-black dark:bg-white animate-pulse"}),"Screen"]}),s&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 border-[2px] border-black dark:border-white bg-[#FF6B6B] text-white text-[10px] font-black uppercase shadow-[1px_1px_0_0_rgba(0,0,0,1)] dark:shadow-[1px_1px_0_0_rgba(255,255,255,0.3)]",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-white animate-pulse"}),"Canvas"]})]})]})})},Oe="http://localhost:8002";const Be=o.memo(function({videoRef:a,renderCanvasRef:r,supportsVideo:n,enableEditingSettings:s,onPaintClick:i,isPaintActive:l,cameraEnabled:c,screenEnabled:d,onToggleCamera:u,onToggleScreen:h,mediaMixerCanvasRef:f}){const{client:m,connected:x,connect:b,disconnect:g,interruptAudio:w}=p(),[v,y]=o.useState([]),[k,D]=o.useState(""),[N]=o.useState(()=>new ve),[C,S]=o.useState(!1),[M]=o.useState(null),[E,P]=o.useState(!1),[A,G]=o.useState(!1),K=o.useRef(null),[J,Q]=o.useState(!1),[Z,ee]=o.useState(0),[te,ae]=o.useState("right"),[re,ne]=o.useState(!1),[se,oe]=o.useState({isConnected:!0,error:null}),ie=o.useRef(!1);o.useEffect(()=>{if(!x)return void ee(0);const e=setInterval(()=>{ee(e=>e+1)},1e3);return()=>clearInterval(e)},[x]);const le=o.useCallback(e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`,[]);o.useEffect(()=>{navigator.mediaDevices.enumerateDevices().then(e=>{const t=e.filter(e=>"audioinput"===e.kind);y(t),t.length>0&&D(t[0].deviceId)})},[]),o.useEffect(()=>{const e=e=>{m.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:e}])};return x&&!C&&N?N.on("data",e).start(k):N.stop(),()=>{N.off("data",e)}},[x,m,C,N,k]),o.useEffect(()=>{const e=()=>{if(ie.current=!0,x){_.getToken()&&j.post(`${Oe}/conversation/turn`).catch(e=>{})}},t=()=>{if(ie.current=!0,x){_.getToken()&&j.post(`${Oe}/conversation/turn`).catch(e=>{})}};return m.on("turncomplete",e),m.on("interrupted",t),()=>{m.off("turncomplete",e),m.off("interrupted",t)}},[m,x]),o.useEffect(()=>{a.current&&(a.current.srcObject=M);let e=-1;return x&&requestAnimationFrame(function t(){const a=f.current;if(a){if(a.width+a.height>0){const e=a.toDataURL("image/jpeg",1),t=e.slice(e.indexOf(",")+1,1/0);m.sendRealtimeInput([{mimeType:"image/jpeg",data:t}])}x&&(e=window.setTimeout(t,2e3))}}),()=>{clearTimeout(e)}},[x,M,m,a,f]);const ce=o.useCallback(async()=>{if(x){try{w(),await new Promise(e=>setTimeout(e,300));if(_.getToken()){const e=await j.post(`${Oe}/session/end`,{interrupt_audio:!0});if(e.ok){const t=await e.json();if(t.prompt&&"connected"===m.status){const e={current:!1},a={current:!1};let r=0;const n=()=>{a.current=!0,r=Date.now()},s=()=>{a.current&&(e.current=!0)};m.on("audio",n),m.on("turncomplete",s),m.send({text:t.prompt},!0);const o=3e4,i=Date.now(),l=5e3;for(;!e.current&&Date.now()-i<o;)if(await new Promise(e=>setTimeout(e,100)),a.current&&r>0){if(Date.now()-r>l&&e.current)break}a.current&&await new Promise(e=>setTimeout(e,1500)),m.off("audio",n),m.off("turncomplete",s)}}}}catch(e){}g()}else{let t=!1,a=null;const r=()=>{t=!0,a&&(a(),a=null),m.off("setupcomplete",r)};m.on("setupcomplete",r),await b();const n=()=>new Promise(e=>{if("connected"===m.status)return void e();const t=()=>{"connected"===m.status&&(m.off("open",t),e())};m.on("open",t)}),s=()=>new Promise(e=>{t?e():(a=e,setTimeout(()=>{a===e&&(a=null,e())},2e3))});try{await n(),await s(),await new Promise(e=>setTimeout(e,500));if(!_.getToken())return;const e=await j.post(`${Oe}/session/start`);if(e.ok){const t=await e.json();t.prompt&&"connected"===m.status&&m.send({text:t.prompt})}}catch(e){}finally{m.off("setupcomplete",r),a=null}}},[x,b,g,m,w]),[de,ue]=o.useState("top"),[pe,he]=o.useState({x:0,y:0}),[fe,me]=o.useState(!1);o.useEffect(()=>{"undefined"!=typeof window&&(he({x:window.innerWidth-380,y:96}),me(!0))},[]);const xe=o.useCallback(()=>{if(!K.current)return{side:"right",vertical:"top"};const e=K.current.getBoundingClientRect(),t=window.innerWidth,a=window.innerHeight,r=t-e.right,n=e.left;let s="right";r>=376?s="right":n>=376&&(s="left");return{side:s,vertical:e.top+e.height/2>a/2?"bottom":"top"}},[]),be=o.useCallback(()=>{const{side:e,vertical:t}=xe();ae(e),ue(t)},[xe]),ge=o.useCallback(()=>{E?(G(!0),setTimeout(()=>{P(!1),G(!1)},200)):(be(),P(!0),G(!1))},[E,be]),ye=o.useCallback(()=>{Q(!J)},[J]);o.useEffect(()=>{if(!fe||!K.current)return;const e=setTimeout(()=>{if(!K.current)return;const e=K.current.getBoundingClientRect(),t=window.innerHeight,a=window.innerWidth,r=16;let n=pe.y,s=pe.x;e.bottom>t-r&&(n=t-e.height-r),n<r&&(n=r),e.right>a-r&&(s=a-e.width-r),s<r&&(s=r),n===pe.y&&s===pe.x||he({x:s,y:n})},50);return()=>clearTimeout(e)},[J,fe]);const ke=o.useCallback(()=>{S(!C)},[C]),_e=o.useCallback(()=>{ne(!0)},[]),je=o.useCallback((e,t)=>{if(!K.current)return;const a=K.current.getBoundingClientRect(),r=window.innerWidth,n=window.innerHeight;let s=t.x,o=t.y;s<0?s=0:s+a.width>r&&(s=r-a.width),o<0?o=0:o+a.height>n&&(o=n-a.height),he({x:s,y:o})},[]),Fe=o.useCallback(()=>{ne(!1),E&&be()},[E,be]),De=o.useMemo(()=>t("fixed z-[1000] bg-[#FFFDF5] border-[2px] md:border-[3px] border-black rounded-lg md:rounded-xl","will-change-transform transform-gpu",!re&&"transition-all duration-200 ease-out",J?"w-[50px] md:w-[55px] py-2 md:py-2.5 px-1 md:px-1.5 shadow-[1px_1px_0_0_rgba(0,0,0,1),_4px_4px_12px_rgba(0,0,0,0.12),_8px_8px_24px_rgba(0,0,0,0.08)]":"w-[220px] md:w-[250px] p-2.5 md:p-3 shadow-[1px_1px_0_0_rgba(0,0,0,1),_4px_4px_12px_rgba(0,0,0,0.12),_8px_8px_24px_rgba(0,0,0,0.08)] md:shadow-[2px_2px_0_0_rgba(0,0,0,1),_6px_6px_16px_rgba(0,0,0,0.15),_12px_12px_32px_rgba(0,0,0,0.1)]","top-0 left-0",!re&&"hover:shadow-[2px_2px_0_0_rgba(0,0,0,1),_6px_6px_16px_rgba(0,0,0,0.15),_12px_12px_32px_rgba(0,0,0,0.1)] md:hover:shadow-[2px_2px_0_0_rgba(0,0,0,1),_8px_8px_20px_rgba(0,0,0,0.18),_16px_16px_40px_rgba(0,0,0,0.12)]"),[J,re]);return fe?e.jsx(we,{handle:".drag-handle",nodeRef:K,position:pe,onStart:_e,onDrag:je,onStop:Fe,children:e.jsxs("div",{ref:K,className:De,style:{transform:"translate3d(0, 0, 0)"},children:[e.jsx("canvas",{ref:e=>{"function"==typeof r?r(e):r&&"current"in r&&(r.current=e)},width:1280,height:2160,style:{display:"none"}}),e.jsxs("div",{className:t("drag-handle cursor-grab active:cursor-grabbing flex items-center mb-1.5 md:mb-2",!re&&"transition-all duration-200 ease-out",J?"justify-center mb-1 md:mb-1.5":"justify-between"),children:[!J&&e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 md:w-7 md:h-7 border-[2px] border-black bg-[#FFD93D]",children:e.jsx("span",{className:"material-symbols-outlined text-sm md:text-base text-black font-black",children:"smart_toy"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-black text-[10px] md:text-xs text-black leading-none mb-0 md:mb-0.5 uppercase",children:"AI TUTOR"}),e.jsx("div",{className:"text-[7px] md:text-[8px] text-black font-bold uppercase tracking-wide bg-[#C4B5FD] px-1 md:px-1.5 py-0 border-[1.5px] border-black inline-block",children:"CONTROL"})]})]}),e.jsx("button",{onClick:ye,className:"w-5 h-5 md:w-6 md:h-6 flex items-center justify-center border-[2px] border-black bg-[#FFFDF5] hover:bg-[#FFD93D] text-black hover:translate-x-0.5 hover:translate-y-0.5 transition-all duration-100",children:J?e.jsx(O,{className:"w-3 h-3 md:w-3.5 md:h-3.5 font-black"}):e.jsx(T,{className:"w-3 h-3 md:w-3.5 md:h-3.5 font-black"})})]}),J?e.jsxs("div",{className:"flex flex-col items-center gap-1.5 md:gap-2",children:[e.jsx("button",{onClick:ye,className:"w-8 h-8 md:w-9 md:h-9 border-[2px] border-black bg-[#FFFDF5] hover:bg-[#FFD93D] flex items-center justify-center text-black transition-all hover:translate-x-0.5 hover:translate-y-0.5 duration-100 shadow-[1px_1px_0_0_rgba(0,0,0,1)] hover:shadow-none",title:"Expand",children:e.jsx(I,{className:"w-4 h-4 font-bold"})}),e.jsxs("button",{onClick:ce,className:t("w-9 h-9 md:w-10 md:h-10 border-[2px] border-black flex items-center justify-center transition-all transform active:translate-x-1 active:translate-y-1 relative group font-black",x?"bg-[#FF6B6B] hover:bg-[#FF6B6B] text-white shadow-[1px_1px_0_0_rgba(0,0,0,1)] hover:shadow-[1px_1px_0_0_rgba(0,0,0,1)]":"bg-[#4ADE80] hover:bg-[#4ADE80] text-black shadow-[1px_1px_0_0_rgba(0,0,0,1)] hover:shadow-[1px_1px_0_0_rgba(0,0,0,1)]"),title:x?"End Session":"Start Session",children:[x?e.jsx("div",{className:"w-3 h-3 bg-white border-2 border-black"}):e.jsx(B,{className:"w-5 h-5"}),x&&e.jsx("span",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-[#FFD93D] border-2 border-black animate-pulse"})]}),e.jsx("div",{className:"w-7 h-[2px] bg-black my-0.5"}),e.jsx("button",{onClick:ke,className:t("w-8 h-8 md:w-9 md:h-9 border-[2px] border-black flex items-center justify-center transition-all shadow-[1px_1px_0_0_rgba(0,0,0,1)] hover:shadow-none hover:translate-x-0.5 hover:translate-y-0.5 duration-100",C?"bg-[#FF6B6B] text-white":"bg-[#FFFDF5] text-black hover:bg-[#FFD93D]"),title:C?"Unmute":"Mute",children:C?e.jsx(X,{className:"w-3.5 h-3.5 font-bold"}):e.jsx(L,{className:"w-3.5 h-3.5 font-bold"})}),n&&e.jsx("button",{onClick:()=>u(!c),className:t("w-8 h-8 md:w-9 md:h-9 border-[2px] border-black flex items-center justify-center transition-all shadow-[1px_1px_0_0_rgba(0,0,0,1)] hover:shadow-none hover:translate-x-0.5 hover:translate-y-0.5 duration-100",c?"bg-[#C4B5FD] text-black":"bg-[#FFFDF5] text-black hover:bg-[#FFD93D]"),title:"Toggle Camera",children:c?e.jsx(H,{className:"w-3.5 h-3.5 font-bold"}):e.jsx(z,{className:"w-3.5 h-3.5 font-bold"})}),n&&e.jsx("button",{onClick:()=>h(!d),className:t("w-8 h-8 md:w-9 md:h-9 border-[2px] border-black flex items-center justify-center transition-all shadow-[1px_1px_0_0_rgba(0,0,0,1)] hover:shadow-none hover:translate-x-0.5 hover:translate-y-0.5 duration-100",d?"bg-[#FFD93D] text-black":"bg-[#FFFDF5] text-black hover:bg-[#FFD93D]"),title:"Share Screen",children:d?e.jsx($,{className:"w-3.5 h-3.5 font-bold"}):e.jsx(Y,{className:"w-3.5 h-3.5 font-bold"})}),e.jsx("div",{className:"w-7 h-[2px] bg-black my-0.5"}),s&&e.jsx(Te,{className:"!h-auto !block",trigger:e.jsx("button",{className:"w-8 h-8 md:w-9 md:h-9 border-[2px] border-black bg-[#FFFDF5] hover:bg-[#FF6B6B] flex items-center justify-center text-black hover:text-white transition-all shadow-[1px_1px_0_0_rgba(0,0,0,1)] hover:shadow-none hover:translate-x-0.5 hover:translate-y-0.5 duration-100",children:e.jsx(F,{className:"w-3.5 h-3.5 font-bold"})})}),e.jsx("button",{onClick:i,className:t("w-8 h-8 md:w-9 md:h-9 border-[2px] border-black flex items-center justify-center transition-all shadow-[1px_1px_0_0_rgba(0,0,0,1)] hover:shadow-none hover:translate-x-0.5 hover:translate-y-0.5 duration-100",l?"bg-[#FFD93D] text-black":"bg-[#FFFDF5] text-black hover:bg-[#FFD93D]"),title:"Canvas",children:e.jsx(U,{className:"w-3.5 h-3.5 font-bold"})}),e.jsx("button",{onClick:ge,className:t("w-8 h-8 md:w-9 md:h-9 border-[2px] border-black flex items-center justify-center transition-all shadow-[1px_1px_0_0_rgba(0,0,0,1)] hover:shadow-none hover:translate-x-0.5 hover:translate-y-0.5 duration-100",E?"bg-[#C4B5FD] text-black":"bg-[#FFFDF5] text-black hover:bg-[#C4B5FD]"),title:"View",children:e.jsx(R,{className:"w-3.5 h-3.5 font-bold"})}),e.jsx("div",{className:t("w-10 h-8 flex items-center justify-center text-[9px] font-mono font-black mt-1 transition-colors border-[2px] border-black",x?"bg-[#FFD93D] text-black":"bg-[#FFFDF5] text-black"),children:x?le(Z):"--:--"})]}):e.jsxs("div",{className:"flex flex-col gap-1.5 md:gap-2",children:[e.jsxs("div",{onClick:ke,className:t("flex items-center justify-between p-2 md:p-2.5 border-[2px] border-black transition-all duration-100 group cursor-pointer shadow-[1px_1px_0_0_rgba(0,0,0,1)] hover:shadow-[1px_1px_0_0_rgba(0,0,0,1)]",C?"bg-[#FF6B6B]":"bg-[#FFFDF5]"),children:[e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 overflow-hidden",children:[e.jsx("div",{className:t("flex items-center justify-center w-6 h-6 md:w-7 md:h-7 border-[2px] border-black transition-colors",C?"bg-white text-black":"bg-[#C4B5FD] text-black"),children:C?e.jsx(X,{className:"w-3 h-3 md:w-3.5 md:h-3.5 font-bold"}):e.jsx(L,{className:"w-3 h-3 md:w-3.5 md:h-3.5 font-bold"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] md:text-[10px] font-black text-black uppercase tracking-wide",children:"Microphone"}),e.jsx("select",{className:"bg-transparent border-none text-[9px] md:text-[10px] text-black outline-none cursor-pointer w-[100px] md:w-[120px] truncate p-0 font-bold uppercase",value:k,onChange:e=>{e.stopPropagation(),D(e.target.value)},onClick:e=>e.stopPropagation(),disabled:x,children:v.map(t=>e.jsx("option",{value:t.deviceId,className:"bg-[#FFFDF5] text-black",children:t.label||`Mic ${t.deviceId.slice(0,4)}`},t.deviceId))})]})]}),e.jsx("button",{onClick:e=>{e.stopPropagation(),ke()},className:t("text-[9px] md:text-[10px] font-black px-2 md:px-3 py-1 md:py-1.5 transition-all border-[2px] border-black shadow-[1px_1px_0_0_rgba(0,0,0,1)] active:translate-x-1 active:translate-y-1 active:shadow-none uppercase",C?"bg-[#FFFDF5] text-black":"bg-[#C4B5FD] text-black"),children:C?"Unmute":"Mute"})]}),n&&e.jsxs("div",{onClick:()=>u(!c),className:t("flex items-center justify-between p-2 md:p-2.5 border-[2px] border-black transition-all duration-100 cursor-pointer shadow-[1px_1px_0_0_rgba(0,0,0,1)]",c?"bg-[#C4B5FD]":"bg-[#FFFDF5]"),children:[e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsx("div",{className:t("flex items-center justify-center w-6 h-6 md:w-7 md:h-7 border-[2px] border-black transition-colors","bg-[#FFFDF5] text-black"),children:c?e.jsx(H,{className:"w-3 h-3 md:w-3.5 md:h-3.5 font-bold"}):e.jsx(z,{className:"w-3 h-3 md:w-3.5 md:h-3.5 font-bold"})}),e.jsx("span",{className:"text-[9px] md:text-[10px] font-black text-black uppercase tracking-wide",children:"Camera"})]}),e.jsx("button",{onClick:e=>{e.stopPropagation(),u(!c)},className:t("text-[9px] md:text-[10px] font-black px-2 md:px-3 py-1 md:py-1.5 transition-all border-[2px] border-black shadow-[1px_1px_0_0_rgba(0,0,0,1)] active:translate-x-1 active:translate-y-1 active:shadow-none uppercase",c?"bg-[#FFFDF5] text-black":"bg-[#C4B5FD] text-black"),children:c?"Off":"On"})]}),n&&e.jsxs("div",{onClick:()=>h(!d),className:t("flex items-center justify-between p-2 md:p-2.5 border-[2px] border-black transition-all duration-100 cursor-pointer shadow-[1px_1px_0_0_rgba(0,0,0,1)]",d?"bg-[#FFD93D]":"bg-[#FFFDF5]"),children:[e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsx("div",{className:t("flex items-center justify-center w-6 h-6 md:w-7 md:h-7 border-[2px] border-black transition-colors","bg-[#FFFDF5] text-black"),children:d?e.jsx($,{className:"w-3 h-3 md:w-3.5 md:h-3.5 font-bold"}):e.jsx(Y,{className:"w-3 h-3 md:w-3.5 md:h-3.5 font-bold"})}),e.jsx("span",{className:"text-[9px] md:text-[10px] font-black text-black uppercase tracking-wide",children:"Screen Share"})]}),e.jsx("button",{onClick:e=>{e.stopPropagation(),h(!d)},className:t("text-[9px] md:text-[10px] font-black px-2 md:px-3 py-1 md:py-1.5 transition-all border-[2px] border-black shadow-[1px_1px_0_0_rgba(0,0,0,1)] active:translate-x-1 active:translate-y-1 active:shadow-none uppercase",d?"bg-[#FFFDF5] text-black":"bg-[#FFD93D] text-black"),children:d?"Stop":"Share"})]}),e.jsx("button",{onClick:ce,className:t("w-full py-2.5 md:py-3 font-black text-white transition-all transform active:translate-x-1 active:translate-y-1 active:shadow-none flex items-center justify-center gap-2 mt-1 border-[2px] md:border-[3px] border-black shadow-[2px_2px_0_0_rgba(0,0,0,1)] uppercase text-[10px] md:text-xs",x?"bg-[#FF6B6B] hover:bg-[#FF6B6B]":"bg-[#4ADE80] hover:bg-[#4ADE80]"),children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-3 h-3 bg-white border-2 border-black"}),"End Session"]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-4 h-4 md:w-5 md:h-5"}),"Start Session"]})}),e.jsxs("div",{className:"grid grid-cols-4 gap-1.5 md:gap-2 pt-2 md:pt-3 border-t-[2px] border-black",children:[s&&e.jsx(Te,{className:"!h-auto !block",trigger:e.jsxs("button",{className:"flex flex-col items-center gap-1 p-1.5 md:p-2 border-[2px] border-black bg-[#FFFDF5] hover:bg-[#FF6B6B] text-black hover:text-white transition-all shadow-[1px_1px_0_0_rgba(0,0,0,1)] active:translate-x-1 active:translate-y-1 active:shadow-none group",children:[e.jsx("div",{className:"p-1 border-[2px] border-black bg-[#FFFDF5] group-hover:bg-[#FF6B6B] transition-colors",children:e.jsx(F,{className:"w-3 h-3 md:w-4 md:h-4 font-bold"})}),e.jsx("span",{className:"text-[8px] md:text-[9px] font-black uppercase",children:"Settings"})]})}),e.jsxs("button",{onClick:i,className:t("flex flex-col items-center gap-1 p-1.5 md:p-2 border-[2px] border-black transition-all shadow-[1px_1px_0_0_rgba(0,0,0,1)] active:translate-x-1 active:translate-y-1 active:shadow-none group",l?"bg-[#FFD93D] text-black":"bg-[#FFFDF5] text-black hover:bg-[#FFD93D]"),children:[e.jsx("div",{className:t("p-1 border-[2px] border-black transition-colors",l?"bg-[#FFFDF5] text-black":"bg-[#FFFDF5] group-hover:bg-[#FFD93D]"),children:e.jsx(U,{className:"w-3 h-3 md:w-4 md:h-4 font-bold"})}),e.jsx("span",{className:"text-[8px] md:text-[9px] font-black uppercase",children:"Canvas"})]}),e.jsxs("button",{onClick:ge,className:t("flex flex-col items-center gap-1 p-1.5 md:p-2 border-[2px] border-black transition-all shadow-[1px_1px_0_0_rgba(0,0,0,1)] active:translate-x-1 active:translate-y-1 active:shadow-none group",E?"bg-[#C4B5FD] text-black":"bg-[#FFFDF5] text-black hover:bg-[#C4B5FD]"),children:[e.jsx("div",{className:t("p-1 border-[2px] border-black transition-colors",E?"bg-[#FFFDF5] text-black":"bg-[#FFFDF5] group-hover:bg-[#C4B5FD]"),children:e.jsx(R,{className:"w-3 h-3 md:w-4 md:h-4 font-bold"})}),e.jsx("span",{className:"text-[8px] md:text-[9px] font-black uppercase",children:"View"})]}),e.jsxs("button",{className:"flex flex-col items-center gap-1 p-1.5 md:p-2 border-[2px] border-black bg-[#FFFDF5] hover:bg-[#C4B5FD] text-black transition-all shadow-[1px_1px_0_0_rgba(0,0,0,1)] active:translate-x-1 active:translate-y-1 active:shadow-none group",children:[e.jsx("div",{className:"p-1 border-[2px] border-black bg-[#FFFDF5] group-hover:bg-[#C4B5FD] transition-colors",children:e.jsx(W,{className:"w-3 h-3 md:w-4 md:h-4 font-bold"})}),e.jsx("span",{className:"text-[8px] md:text-[9px] font-black uppercase",children:"More"})]})]})]}),E&&e.jsxs("div",{className:t("absolute w-[320px] md:w-[360px] h-auto flex flex-col bg-white dark:bg-[#000000] border-[3px] md:border-[4px] border-black dark:border-white rounded-xl md:rounded-2xl shadow-[2px_2px_0_0_rgba(0,0,0,1)] md:shadow-[3px_3px_0_0_rgba(0,0,0,1)] dark:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)] md:dark:shadow-[3px_3px_0_0_rgba(255,255,255,0.3)] overflow-hidden z-[1001]",A?"animate-popover-out":"animate-popover-in","right"===te?"left-full ml-4 md:ml-6":"right-full mr-4 md:mr-6","bottom"===de?"bottom-0":"top-0"),children:[e.jsxs("div",{className:"flex items-center justify-between p-3 md:p-3.5 border-b-[3px] md:border-b-[4px] border-black dark:border-white bg-[#FFE500]",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("div",{className:"p-1.5 md:p-2 border-[2px] md:border-[3px] border-black dark:border-white bg-white dark:bg-[#000000]",children:e.jsx(V,{className:"w-4 h-4 md:w-5 md:h-5 text-black dark:text-white font-bold"})}),e.jsx("h3",{className:"font-black text-black dark:text-white uppercase text-xs md:text-sm",children:"ADAM'S VIEW"}),e.jsx("span",{className:t("px-2 md:px-3 py-0.5 md:py-1 text-[9px] md:text-[10px] font-black uppercase tracking-wider border-[2px] md:border-[3px] border-black dark:border-white",{"bg-[#ADFF2F] text-black":se.isConnected&&!se.error,"bg-[#FF006E] text-white":!!se.error,"bg-white dark:bg-[#000000] text-black dark:text-white":!se.isConnected&&!se.error}),children:se.error?"OFF":se.isConnected?"LIVE":"..."})]}),e.jsx("button",{onClick:ge,className:"w-8 h-8 md:w-9 md:h-9 flex items-center justify-center border-[2px] md:border-[3px] border-black dark:border-white bg-white dark:bg-[#000000] hover:bg-[#FF006E] text-black dark:text-white hover:text-white transition-all shadow-[1px_1px_0_0_rgba(0,0,0,1)] md:shadow-[2px_2px_0_0_rgba(0,0,0,1)] dark:shadow-[1px_1px_0_0_rgba(255,255,255,0.3)] md:dark:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)] hover:shadow-none hover:translate-x-1 hover:translate-y-1",children:e.jsx(q,{className:"w-4 h-4 md:w-5 md:h-5 font-bold"})})]}),e.jsx("div",{className:"flex-1 h-auto w-full",children:e.jsx(Ae,{canvasRef:f,onStatusChange:oe,isCameraEnabled:c,isScreenShareEnabled:d,isCanvasEnabled:l})})]})]})}):null});export{Be as default};
