const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SidePanel-DTujjSwT.js","assets/khan-DSYLLlOe.js","assets/vendor-DOMpS_Ay.js","assets/textarea-CUi90pEB.js","assets/chevron-down-BP5Mct-J.js","assets/SidePanel-CWT5W09a.css","assets/GradingSidebar-zTJ7Ob68.js","assets/ScratchpadCapture-BqidFs1Z.js","assets/FloatingControlPanel-CkEYrN_h.js","assets/genai-DDPItglK.js","assets/FloatingControlPanel-jlcqRP0c.css","assets/LoginPage-Y0A05nRl.js","assets/LoginPage-DDuuGTZn.css","assets/LandingPageWrapper-B3Y0cDqB.js","assets/LandingPageWrapper-C5kRGHld.css"])))=>i.map(i=>d[i]);
import{j as e,r as t,R as n,_ as r,g as i,a as o,b as s,i as a,c as l,d as c,K as u,P as d,E as h,$ as p,e as f,f as g,h as m,k as v,l as y,m as x,n as b,p as w,C as _,S,o as k,q as C,s as M,t as I,u as P,v as T,w as E,x as j,y as R,z as A,A as N,B as L,D as O,F as D,G as F,H as z,I as B,J as $,L as W,M as U,N as H,O as q,Q as V,T as G,U as Y,V as X,W as K,X as Q,Y as Z,Z as J,a0 as ee,a1 as te,a2 as ne,a3 as re,a4 as ie,a5 as oe,a6 as se,a7 as ae,a8 as le,a9 as ce,aa as ue,ab as de,ac as he,ad as pe,ae as fe,af as ge,ag as me,ah as ve,ai as ye,aj as xe,ak as be,al as we,am as _e,an as Se,ao as ke,ap as Ce,aq as Me,ar as Ie,as as Pe,at as Te,au as Ee,av as je,aw as Re,ax as Ae,ay as Ne,az as Le,aA as Oe,aB as De,aC as Fe,aD as ze,aE as Be,aF as $e,aG as We,aH as Ue,aI as He,aJ as qe,aK as Ve,aL as Ge,aM as Ye,aN as Xe,aO as Ke,aP as Qe,aQ as Ze,aR as Je,aS as et,aT as tt,aU as nt,aV as rt,aW as it,aX as ot,aY as st,aZ as at,a_ as lt,a$ as ct,b0 as ut,b1 as dt,b2 as ht,b3 as pt,b4 as ft,b5 as gt,b6 as mt,b7 as vt}from"./khan-DSYLLlOe.js";import{a as yt,g as xt,c as bt,b as wt,f as _t,d as St,R as kt,r as Ct,P as Mt,i as It,B as Pt,S as Tt,h as Et}from"./vendor-DOMpS_Ay.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const jt={},Rt=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),i=n?.nonce||n?.getAttribute("nonce");r=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in jt)return;jt[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,i&&r.setAttribute("nonce",i),document.head.appendChild(r),t?new Promise((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})};var At,Nt={};var Lt=function(){if(At)return Nt;At=1;var e=yt();return Nt.createRoot=e.createRoot,Nt.hydrateRoot=e.hydrateRoot,Nt}();const Ot=xt(Lt);var Dt,Ft={exports:{}};var zt=(Dt||(Dt=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new i(r,o||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,i,o,s){var a=n?n+e:e;if(!this._events[a])return!1;var l,c,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,o),!0;case 6:return u.fn.call(u.context,t,r,i,o,s),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||r&&a.context!==r||s(this,o);else{for(var l=0,c=[],u=a.length;l<u;l++)(a[l].fn!==t||i&&!a[l].once||r&&a[l].context!==r)&&c.push(a[l]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a}(Ft)),Ft.exports);const Bt=xt(zt),$t=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),Wt="-",Ut=[],Ht=e=>{const t=Gt(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{if(e.startsWith("[")&&e.endsWith("]"))return Vt(e);const n=e.split(Wt),r=""===n[0]&&n.length>1?1:0;return qt(n,r,t)},getConflictingClassGroupIds:(e,t)=>{if(t){const t=r[e],i=n[e];return t?i?((e,t)=>{const n=new Array(e.length+t.length);for(let r=0;r<e.length;r++)n[r]=e[r];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n})(i,t):t:i||Ut}return n[e]||Ut}}},qt=(e,t,n)=>{if(0===e.length-t)return n.classGroupId;const r=e[t],i=n.nextPart.get(r);if(i){const n=qt(e,t+1,i);if(n)return n}const o=n.validators;if(null===o)return;const s=0===t?e.join(Wt):e.slice(t).join(Wt),a=o.length;for(let l=0;l<a;l++){const e=o[l];if(e.validator(s))return e.classGroupId}},Vt=e=>-1===e.slice(1,-1).indexOf(":")?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),r=t.slice(0,n);return r?"arbitrary.."+r:void 0})(),Gt=e=>{const{theme:t,classGroups:n}=e;return Yt(n,t)},Yt=(e,t)=>{const n=$t();for(const r in e){const i=e[r];Xt(i,n,r,t)}return n},Xt=(e,t,n,r)=>{const i=e.length;for(let o=0;o<i;o++){const i=e[o];Kt(i,t,n,r)}},Kt=(e,t,n,r)=>{"string"!=typeof e?"function"!=typeof e?Jt(e,t,n,r):Zt(e,t,n,r):Qt(e,t,n)},Qt=(e,t,n)=>{(""===e?t:en(t,e)).classGroupId=n},Zt=(e,t,n,r)=>{tn(e)?Xt(e(r),t,n,r):(null===t.validators&&(t.validators=[]),t.validators.push(((e,t)=>({classGroupId:e,validator:t}))(n,e)))},Jt=(e,t,n,r)=>{const i=Object.entries(e),o=i.length;for(let s=0;s<o;s++){const[e,o]=i[s];Xt(o,en(t,e),n,r)}},en=(e,t)=>{let n=e;const r=t.split(Wt),i=r.length;for(let o=0;o<i;o++){const e=r[o];let t=n.nextPart.get(e);t||(t=$t(),n.nextPart.set(e,t)),n=t}return n},tn=e=>"isThemeGetter"in e&&!0===e.isThemeGetter,nn=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),r=Object.create(null);const i=(i,o)=>{n[i]=o,t++,t>e&&(t=0,r=n,n=Object.create(null))};return{get(e){let t=n[e];return void 0!==t?t:void 0!==(t=r[e])?(i(e,t),t):void 0},set(e,t){e in n?n[e]=t:i(e,t)}}},rn=[],on=(e,t,n,r,i)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),sn=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=e=>{const t=[];let n,r=0,i=0,o=0;const s=e.length;for(let u=0;u<s;u++){const s=e[u];if(0===r&&0===i){if(":"===s){t.push(e.slice(o,u)),o=u+1;continue}if("/"===s){n=u;continue}}"["===s?r++:"]"===s?r--:"("===s?i++:")"===s&&i--}const a=0===t.length?e:e.slice(o);let l=a,c=!1;a.endsWith("!")?(l=a.slice(0,-1),c=!0):a.startsWith("!")&&(l=a.slice(1),c=!0);return on(t,c,l,n&&n>o?n-o:void 0)};if(t){const e=t+":",n=r;r=t=>t.startsWith(e)?n(t.slice(e.length)):on(rn,!1,t,void 0,!0)}if(n){const e=r;r=t=>n({className:t,parseClassName:e})}return r},an=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((e,n)=>{t.set(e,1e6+n)}),e=>{const n=[];let r=[];for(let i=0;i<e.length;i++){const o=e[i],s="["===o[0],a=t.has(o);s||a?(r.length>0&&(r.sort(),n.push(...r),r=[]),n.push(o)):r.push(o)}return r.length>0&&(r.sort(),n.push(...r)),n}},ln=/\s+/,cn=e=>{if("string"==typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=cn(e[r]))&&(n&&(n+=" "),n+=t);return n},un=[],dn=e=>{const t=t=>t[e]||un;return t.isThemeGetter=!0,t},hn=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,pn=/^\((?:(\w[\w-]*):)?(.+)\)$/i,fn=/^\d+\/\d+$/,gn=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,mn=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,vn=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,yn=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,xn=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,bn=e=>fn.test(e),wn=e=>!!e&&!Number.isNaN(Number(e)),_n=e=>!!e&&Number.isInteger(Number(e)),Sn=e=>e.endsWith("%")&&wn(e.slice(0,-1)),kn=e=>gn.test(e),Cn=()=>!0,Mn=e=>mn.test(e)&&!vn.test(e),In=()=>!1,Pn=e=>yn.test(e),Tn=e=>xn.test(e),En=e=>!Rn(e)&&!Fn(e),jn=e=>qn(e,Xn,In),Rn=e=>hn.test(e),An=e=>qn(e,Kn,Mn),Nn=e=>qn(e,Qn,wn),Ln=e=>qn(e,Gn,In),On=e=>qn(e,Yn,Tn),Dn=e=>qn(e,Jn,Pn),Fn=e=>pn.test(e),zn=e=>Vn(e,Kn),Bn=e=>Vn(e,Zn),$n=e=>Vn(e,Gn),Wn=e=>Vn(e,Xn),Un=e=>Vn(e,Yn),Hn=e=>Vn(e,Jn,!0),qn=(e,t,n)=>{const r=hn.exec(e);return!!r&&(r[1]?t(r[1]):n(r[2]))},Vn=(e,t,n=!1)=>{const r=pn.exec(e);return!!r&&(r[1]?t(r[1]):n)},Gn=e=>"position"===e||"percentage"===e,Yn=e=>"image"===e||"url"===e,Xn=e=>"length"===e||"size"===e||"bg-size"===e,Kn=e=>"length"===e,Qn=e=>"number"===e,Zn=e=>"family-name"===e,Jn=e=>"shadow"===e,er=((e,...t)=>{let n,r,i,o;const s=e=>{const t=r(e);if(t)return t;const o=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=t,s=[],a=e.trim().split(ln);let l="";for(let c=a.length-1;c>=0;c-=1){const e=a[c],{isExternal:t,modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:p}=n(e);if(t){l=e+(l.length>0?" "+l:l);continue}let f=!!p,g=r(f?h.substring(0,p):h);if(!g){if(!f){l=e+(l.length>0?" "+l:l);continue}if(g=r(h),!g){l=e+(l.length>0?" "+l:l);continue}f=!1}const m=0===u.length?"":1===u.length?u[0]:o(u).join(":"),v=d?m+"!":m,y=v+g;if(s.indexOf(y)>-1)continue;s.push(y);const x=i(g,f);for(let n=0;n<x.length;++n){const e=x[n];s.push(v+e)}l=e+(l.length>0?" "+l:l)}return l})(e,n);return i(e,o),o};return o=a=>{const l=t.reduce((e,t)=>t(e),e());return n=(e=>({cache:nn(e.cacheSize),parseClassName:sn(e),sortModifiers:an(e),...Ht(e)}))(l),r=n.cache.get,i=n.cache.set,o=s,s(a)},(...e)=>o(((...e)=>{let t,n,r=0,i="";for(;r<e.length;)(t=e[r++])&&(n=cn(t))&&(i&&(i+=" "),i+=n);return i})(...e))})(()=>{const e=dn("color"),t=dn("font"),n=dn("text"),r=dn("font-weight"),i=dn("tracking"),o=dn("leading"),s=dn("breakpoint"),a=dn("container"),l=dn("spacing"),c=dn("radius"),u=dn("shadow"),d=dn("inset-shadow"),h=dn("text-shadow"),p=dn("drop-shadow"),f=dn("blur"),g=dn("perspective"),m=dn("aspect"),v=dn("ease"),y=dn("animate"),x=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Fn,Rn],b=()=>[Fn,Rn,l],w=()=>[bn,"full","auto",...b()],_=()=>[_n,"none","subgrid",Fn,Rn],S=()=>["auto",{span:["full",_n,Fn,Rn]},_n,Fn,Rn],k=()=>[_n,"auto",Fn,Rn],C=()=>["auto","min","max","fr",Fn,Rn],M=()=>["auto",...b()],I=()=>[bn,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...b()],P=()=>[e,Fn,Rn],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",$n,Ln,{position:[Fn,Rn]}],E=()=>["auto","cover","contain",Wn,jn,{size:[Fn,Rn]}],j=()=>[Sn,zn,An],R=()=>["","none","full",c,Fn,Rn],A=()=>["",wn,zn,An],N=()=>[wn,Sn,$n,Ln],L=()=>["","none",f,Fn,Rn],O=()=>["none",wn,Fn,Rn],D=()=>["none",wn,Fn,Rn],F=()=>[wn,Fn,Rn],z=()=>[bn,"full",...b()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[kn],breakpoint:[kn],color:[Cn],container:[kn],"drop-shadow":[kn],ease:["in","out","in-out"],font:[En],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[kn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[kn],shadow:[kn],spacing:["px",wn],text:[kn],"text-shadow":[kn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",bn,Rn,Fn,m]}],container:["container"],columns:[{columns:[wn,Rn,Fn,a]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:x()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:w()}],"inset-x":[{"inset-x":w()}],"inset-y":[{"inset-y":w()}],start:[{start:w()}],end:[{end:w()}],top:[{top:w()}],right:[{right:w()}],bottom:[{bottom:w()}],left:[{left:w()}],visibility:["visible","invisible","collapse"],z:[{z:[_n,"auto",Fn,Rn]}],basis:[{basis:[bn,"full","auto",a,...b()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[wn,bn,"auto","initial","none",Rn]}],grow:[{grow:["",wn,Fn,Rn]}],shrink:[{shrink:["",wn,Fn,Rn]}],order:[{order:[_n,"first","last","none",Fn,Rn]}],"grid-cols":[{"grid-cols":_()}],"col-start-end":[{col:S()}],"col-start":[{"col-start":k()}],"col-end":[{"col-end":k()}],"grid-rows":[{"grid-rows":_()}],"row-start-end":[{row:S()}],"row-start":[{"row-start":k()}],"row-end":[{"row-end":k()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":C()}],"auto-rows":[{"auto-rows":C()}],gap:[{gap:b()}],"gap-x":[{"gap-x":b()}],"gap-y":[{"gap-y":b()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:b()}],px:[{px:b()}],py:[{py:b()}],ps:[{ps:b()}],pe:[{pe:b()}],pt:[{pt:b()}],pr:[{pr:b()}],pb:[{pb:b()}],pl:[{pl:b()}],m:[{m:M()}],mx:[{mx:M()}],my:[{my:M()}],ms:[{ms:M()}],me:[{me:M()}],mt:[{mt:M()}],mr:[{mr:M()}],mb:[{mb:M()}],ml:[{ml:M()}],"space-x":[{"space-x":b()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":b()}],"space-y-reverse":["space-y-reverse"],size:[{size:I()}],w:[{w:[a,"screen",...I()]}],"min-w":[{"min-w":[a,"screen","none",...I()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[s]},...I()]}],h:[{h:["screen","lh",...I()]}],"min-h":[{"min-h":["screen","lh","none",...I()]}],"max-h":[{"max-h":["screen","lh",...I()]}],"font-size":[{text:["base",n,zn,An]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Fn,Nn]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Sn,Rn]}],"font-family":[{font:[Bn,Rn,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Fn,Rn]}],"line-clamp":[{"line-clamp":[wn,"none",Fn,Nn]}],leading:[{leading:[o,...b()]}],"list-image":[{"list-image":["none",Fn,Rn]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Fn,Rn]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:P()}],"text-color":[{text:P()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[wn,"from-font","auto",Fn,An]}],"text-decoration-color":[{decoration:P()}],"underline-offset":[{"underline-offset":[wn,"auto",Fn,Rn]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:b()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Fn,Rn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Fn,Rn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:T()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:E()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},_n,Fn,Rn],radial:["",Fn,Rn],conic:[_n,Fn,Rn]},Un,On]}],"bg-color":[{bg:P()}],"gradient-from-pos":[{from:j()}],"gradient-via-pos":[{via:j()}],"gradient-to-pos":[{to:j()}],"gradient-from":[{from:P()}],"gradient-via":[{via:P()}],"gradient-to":[{to:P()}],rounded:[{rounded:R()}],"rounded-s":[{"rounded-s":R()}],"rounded-e":[{"rounded-e":R()}],"rounded-t":[{"rounded-t":R()}],"rounded-r":[{"rounded-r":R()}],"rounded-b":[{"rounded-b":R()}],"rounded-l":[{"rounded-l":R()}],"rounded-ss":[{"rounded-ss":R()}],"rounded-se":[{"rounded-se":R()}],"rounded-ee":[{"rounded-ee":R()}],"rounded-es":[{"rounded-es":R()}],"rounded-tl":[{"rounded-tl":R()}],"rounded-tr":[{"rounded-tr":R()}],"rounded-br":[{"rounded-br":R()}],"rounded-bl":[{"rounded-bl":R()}],"border-w":[{border:A()}],"border-w-x":[{"border-x":A()}],"border-w-y":[{"border-y":A()}],"border-w-s":[{"border-s":A()}],"border-w-e":[{"border-e":A()}],"border-w-t":[{"border-t":A()}],"border-w-r":[{"border-r":A()}],"border-w-b":[{"border-b":A()}],"border-w-l":[{"border-l":A()}],"divide-x":[{"divide-x":A()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":A()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:P()}],"border-color-x":[{"border-x":P()}],"border-color-y":[{"border-y":P()}],"border-color-s":[{"border-s":P()}],"border-color-e":[{"border-e":P()}],"border-color-t":[{"border-t":P()}],"border-color-r":[{"border-r":P()}],"border-color-b":[{"border-b":P()}],"border-color-l":[{"border-l":P()}],"divide-color":[{divide:P()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[wn,Fn,Rn]}],"outline-w":[{outline:["",wn,zn,An]}],"outline-color":[{outline:P()}],shadow:[{shadow:["","none",u,Hn,Dn]}],"shadow-color":[{shadow:P()}],"inset-shadow":[{"inset-shadow":["none",d,Hn,Dn]}],"inset-shadow-color":[{"inset-shadow":P()}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:P()}],"ring-offset-w":[{"ring-offset":[wn,An]}],"ring-offset-color":[{"ring-offset":P()}],"inset-ring-w":[{"inset-ring":A()}],"inset-ring-color":[{"inset-ring":P()}],"text-shadow":[{"text-shadow":["none",h,Hn,Dn]}],"text-shadow-color":[{"text-shadow":P()}],opacity:[{opacity:[wn,Fn,Rn]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[wn]}],"mask-image-linear-from-pos":[{"mask-linear-from":N()}],"mask-image-linear-to-pos":[{"mask-linear-to":N()}],"mask-image-linear-from-color":[{"mask-linear-from":P()}],"mask-image-linear-to-color":[{"mask-linear-to":P()}],"mask-image-t-from-pos":[{"mask-t-from":N()}],"mask-image-t-to-pos":[{"mask-t-to":N()}],"mask-image-t-from-color":[{"mask-t-from":P()}],"mask-image-t-to-color":[{"mask-t-to":P()}],"mask-image-r-from-pos":[{"mask-r-from":N()}],"mask-image-r-to-pos":[{"mask-r-to":N()}],"mask-image-r-from-color":[{"mask-r-from":P()}],"mask-image-r-to-color":[{"mask-r-to":P()}],"mask-image-b-from-pos":[{"mask-b-from":N()}],"mask-image-b-to-pos":[{"mask-b-to":N()}],"mask-image-b-from-color":[{"mask-b-from":P()}],"mask-image-b-to-color":[{"mask-b-to":P()}],"mask-image-l-from-pos":[{"mask-l-from":N()}],"mask-image-l-to-pos":[{"mask-l-to":N()}],"mask-image-l-from-color":[{"mask-l-from":P()}],"mask-image-l-to-color":[{"mask-l-to":P()}],"mask-image-x-from-pos":[{"mask-x-from":N()}],"mask-image-x-to-pos":[{"mask-x-to":N()}],"mask-image-x-from-color":[{"mask-x-from":P()}],"mask-image-x-to-color":[{"mask-x-to":P()}],"mask-image-y-from-pos":[{"mask-y-from":N()}],"mask-image-y-to-pos":[{"mask-y-to":N()}],"mask-image-y-from-color":[{"mask-y-from":P()}],"mask-image-y-to-color":[{"mask-y-to":P()}],"mask-image-radial":[{"mask-radial":[Fn,Rn]}],"mask-image-radial-from-pos":[{"mask-radial-from":N()}],"mask-image-radial-to-pos":[{"mask-radial-to":N()}],"mask-image-radial-from-color":[{"mask-radial-from":P()}],"mask-image-radial-to-color":[{"mask-radial-to":P()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[wn]}],"mask-image-conic-from-pos":[{"mask-conic-from":N()}],"mask-image-conic-to-pos":[{"mask-conic-to":N()}],"mask-image-conic-from-color":[{"mask-conic-from":P()}],"mask-image-conic-to-color":[{"mask-conic-to":P()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:T()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:E()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Fn,Rn]}],filter:[{filter:["","none",Fn,Rn]}],blur:[{blur:L()}],brightness:[{brightness:[wn,Fn,Rn]}],contrast:[{contrast:[wn,Fn,Rn]}],"drop-shadow":[{"drop-shadow":["","none",p,Hn,Dn]}],"drop-shadow-color":[{"drop-shadow":P()}],grayscale:[{grayscale:["",wn,Fn,Rn]}],"hue-rotate":[{"hue-rotate":[wn,Fn,Rn]}],invert:[{invert:["",wn,Fn,Rn]}],saturate:[{saturate:[wn,Fn,Rn]}],sepia:[{sepia:["",wn,Fn,Rn]}],"backdrop-filter":[{"backdrop-filter":["","none",Fn,Rn]}],"backdrop-blur":[{"backdrop-blur":L()}],"backdrop-brightness":[{"backdrop-brightness":[wn,Fn,Rn]}],"backdrop-contrast":[{"backdrop-contrast":[wn,Fn,Rn]}],"backdrop-grayscale":[{"backdrop-grayscale":["",wn,Fn,Rn]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[wn,Fn,Rn]}],"backdrop-invert":[{"backdrop-invert":["",wn,Fn,Rn]}],"backdrop-opacity":[{"backdrop-opacity":[wn,Fn,Rn]}],"backdrop-saturate":[{"backdrop-saturate":[wn,Fn,Rn]}],"backdrop-sepia":[{"backdrop-sepia":["",wn,Fn,Rn]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":b()}],"border-spacing-x":[{"border-spacing-x":b()}],"border-spacing-y":[{"border-spacing-y":b()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Fn,Rn]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[wn,"initial",Fn,Rn]}],ease:[{ease:["linear","initial",v,Fn,Rn]}],delay:[{delay:[wn,Fn,Rn]}],animate:[{animate:["none",y,Fn,Rn]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,Fn,Rn]}],"perspective-origin":[{"perspective-origin":x()}],rotate:[{rotate:O()}],"rotate-x":[{"rotate-x":O()}],"rotate-y":[{"rotate-y":O()}],"rotate-z":[{"rotate-z":O()}],scale:[{scale:D()}],"scale-x":[{"scale-x":D()}],"scale-y":[{"scale-y":D()}],"scale-z":[{"scale-z":D()}],"scale-3d":["scale-3d"],skew:[{skew:F()}],"skew-x":[{"skew-x":F()}],"skew-y":[{"skew-y":F()}],transform:[{transform:[Fn,Rn,"","none","gpu","cpu"]}],"transform-origin":[{origin:x()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:z()}],"translate-x":[{"translate-x":z()}],"translate-y":[{"translate-y":z()}],"translate-z":[{"translate-z":z()}],"translate-none":["translate-none"],accent:[{accent:P()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:P()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Fn,Rn]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":b()}],"scroll-mx":[{"scroll-mx":b()}],"scroll-my":[{"scroll-my":b()}],"scroll-ms":[{"scroll-ms":b()}],"scroll-me":[{"scroll-me":b()}],"scroll-mt":[{"scroll-mt":b()}],"scroll-mr":[{"scroll-mr":b()}],"scroll-mb":[{"scroll-mb":b()}],"scroll-ml":[{"scroll-ml":b()}],"scroll-p":[{"scroll-p":b()}],"scroll-px":[{"scroll-px":b()}],"scroll-py":[{"scroll-py":b()}],"scroll-ps":[{"scroll-ps":b()}],"scroll-pe":[{"scroll-pe":b()}],"scroll-pt":[{"scroll-pt":b()}],"scroll-pr":[{"scroll-pr":b()}],"scroll-pb":[{"scroll-pb":b()}],"scroll-pl":[{"scroll-pl":b()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Fn,Rn]}],fill:[{fill:["none",...P()]}],"stroke-w":[{stroke:[wn,zn,An,Nn]}],stroke:[{stroke:["none",...P()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function tr(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=tr(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function nr(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=tr(e))&&(r&&(r+=" "),r+=t);return r}function rr(...e){return er(nr(e))}const ir=new Map,or=(()=>{const e=new Promise(e=>{window.addEventListener("pointerdown",e,{once:!0}),window.addEventListener("keydown",e,{once:!0})});return async t=>{try{const e=new Audio;if(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",await e.play(),t?.id&&ir.has(t.id)){const e=ir.get(t.id);if(e)return e}const n=new AudioContext(t);return t?.id&&ir.set(t.id,n),n}catch(n){if(await e,t?.id&&ir.has(t.id)){const e=ir.get(t.id);if(e)return e}const r=new AudioContext(t);return t?.id&&ir.set(t.id,r),r}}})();var sr,ar={exports:{}};var lr,cr,ur=(sr||(sr=1,lr=ar,cr=ar.exports,function(){var e,t="Expected a function",n="__lodash_hash_undefined__",r="__lodash_placeholder__",i=32,o=128,s=256,a=1/0,l=9007199254740991,c=NaN,u=4294967295,d=[["ary",o],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",i],["partialRight",64],["rearg",s]],h="[object Arguments]",p="[object Array]",f="[object Boolean]",g="[object Date]",m="[object Error]",v="[object Function]",y="[object GeneratorFunction]",x="[object Map]",b="[object Number]",w="[object Object]",_="[object Promise]",S="[object RegExp]",k="[object Set]",C="[object String]",M="[object Symbol]",I="[object WeakMap]",P="[object ArrayBuffer]",T="[object DataView]",E="[object Float32Array]",j="[object Float64Array]",R="[object Int8Array]",A="[object Int16Array]",N="[object Int32Array]",L="[object Uint8Array]",O="[object Uint8ClampedArray]",D="[object Uint16Array]",F="[object Uint32Array]",z=/\b__p \+= '';/g,B=/\b(__p \+=) '' \+/g,$=/(__e\(.*?\)|\b__t\)) \+\n'';/g,W=/&(?:amp|lt|gt|quot|#39);/g,U=/[&<>"']/g,H=RegExp(W.source),q=RegExp(U.source),V=/<%-([\s\S]+?)%>/g,G=/<%([\s\S]+?)%>/g,Y=/<%=([\s\S]+?)%>/g,X=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,K=/^\w*$/,Q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Z=/[\\^$.*+?()[\]{}|]/g,J=RegExp(Z.source),ee=/^\s+/,te=/\s/,ne=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,re=/\{\n\/\* \[wrapped with (.+)\] \*/,ie=/,? & /,oe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,se=/[()=,{}\[\]\/\s]/,ae=/\\(\\)?/g,le=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ce=/\w*$/,ue=/^[-+]0x[0-9a-f]+$/i,de=/^0b[01]+$/i,he=/^\[object .+?Constructor\]$/,pe=/^0o[0-7]+$/i,fe=/^(?:0|[1-9]\d*)$/,ge=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,me=/($^)/,ve=/['\n\r\u2028\u2029\\]/g,ye="\\ud800-\\udfff",xe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",be="\\u2700-\\u27bf",we="a-z\\xdf-\\xf6\\xf8-\\xff",_e="A-Z\\xc0-\\xd6\\xd8-\\xde",Se="\\ufe0e\\ufe0f",ke="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ce="['’]",Me="["+ye+"]",Ie="["+ke+"]",Pe="["+xe+"]",Te="\\d+",Ee="["+be+"]",je="["+we+"]",Re="[^"+ye+ke+Te+be+we+_e+"]",Ae="\\ud83c[\\udffb-\\udfff]",Ne="[^"+ye+"]",Le="(?:\\ud83c[\\udde6-\\uddff]){2}",Oe="[\\ud800-\\udbff][\\udc00-\\udfff]",De="["+_e+"]",Fe="\\u200d",ze="(?:"+je+"|"+Re+")",Be="(?:"+De+"|"+Re+")",$e="(?:['’](?:d|ll|m|re|s|t|ve))?",We="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ue="(?:"+Pe+"|"+Ae+")?",He="["+Se+"]?",qe=He+Ue+"(?:"+Fe+"(?:"+[Ne,Le,Oe].join("|")+")"+He+Ue+")*",Ve="(?:"+[Ee,Le,Oe].join("|")+")"+qe,Ge="(?:"+[Ne+Pe+"?",Pe,Le,Oe,Me].join("|")+")",Ye=RegExp(Ce,"g"),Xe=RegExp(Pe,"g"),Ke=RegExp(Ae+"(?="+Ae+")|"+Ge+qe,"g"),Qe=RegExp([De+"?"+je+"+"+$e+"(?="+[Ie,De,"$"].join("|")+")",Be+"+"+We+"(?="+[Ie,De+ze,"$"].join("|")+")",De+"?"+ze+"+"+$e,De+"+"+We,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Te,Ve].join("|"),"g"),Ze=RegExp("["+Fe+ye+xe+Se+"]"),Je=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,et=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tt=-1,nt={};nt[E]=nt[j]=nt[R]=nt[A]=nt[N]=nt[L]=nt[O]=nt[D]=nt[F]=!0,nt[h]=nt[p]=nt[P]=nt[f]=nt[T]=nt[g]=nt[m]=nt[v]=nt[x]=nt[b]=nt[w]=nt[S]=nt[k]=nt[C]=nt[I]=!1;var rt={};rt[h]=rt[p]=rt[P]=rt[T]=rt[f]=rt[g]=rt[E]=rt[j]=rt[R]=rt[A]=rt[N]=rt[x]=rt[b]=rt[w]=rt[S]=rt[k]=rt[C]=rt[M]=rt[L]=rt[O]=rt[D]=rt[F]=!0,rt[m]=rt[v]=rt[I]=!1;var it={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ot=parseFloat,st=parseInt,at="object"==typeof bt&&bt&&bt.Object===Object&&bt,lt="object"==typeof self&&self&&self.Object===Object&&self,ct=at||lt||Function("return this")(),ut=cr&&!cr.nodeType&&cr,dt=ut&&lr&&!lr.nodeType&&lr,ht=dt&&dt.exports===ut,pt=ht&&at.process,ft=function(){try{var e=dt&&dt.require&&dt.require("util").types;return e||pt&&pt.binding&&pt.binding("util")}catch(t){}}(),gt=ft&&ft.isArrayBuffer,mt=ft&&ft.isDate,vt=ft&&ft.isMap,yt=ft&&ft.isRegExp,xt=ft&&ft.isSet,wt=ft&&ft.isTypedArray;function _t(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function St(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(r,s,n(s),e)}return r}function kt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Ct(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Mt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function It(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}function Pt(e,t){return!(null==e||!e.length)&&Ft(e,t,0)>-1}function Tt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Et(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function jt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Rt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function At(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Nt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Lt=Wt("length");function Ot(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function Dt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Ft(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Dt(e,Bt,n)}function zt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Bt(e){return e!=e}function $t(e,t){var n=null==e?0:e.length;return n?qt(e,t)/n:c}function Wt(t){return function(n){return null==n?e:n[t]}}function Ut(t){return function(n){return null==t?e:t[n]}}function Ht(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function qt(t,n){for(var r,i=-1,o=t.length;++i<o;){var s=n(t[i]);s!==e&&(r=r===e?s:r+s)}return r}function Vt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Gt(e){return e?e.slice(0,un(e)+1).replace(ee,""):e}function Yt(e){return function(t){return e(t)}}function Xt(e,t){return Et(t,function(t){return e[t]})}function Kt(e,t){return e.has(t)}function Qt(e,t){for(var n=-1,r=e.length;++n<r&&Ft(t,e[n],0)>-1;);return n}function Zt(e,t){for(var n=e.length;n--&&Ft(t,e[n],0)>-1;);return n}var Jt=Ut({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),en=Ut({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function tn(e){return"\\"+it[e]}function nn(e){return Ze.test(e)}function rn(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function on(e,t){return function(n){return e(t(n))}}function sn(e,t){for(var n=-1,i=e.length,o=0,s=[];++n<i;){var a=e[n];a!==t&&a!==r||(e[n]=r,s[o++]=n)}return s}function an(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function ln(e){return nn(e)?function(e){for(var t=Ke.lastIndex=0;Ke.test(e);)++t;return t}(e):Lt(e)}function cn(e){return nn(e)?function(e){return e.match(Ke)||[]}(e):function(e){return e.split("")}(e)}function un(e){for(var t=e.length;t--&&te.test(e.charAt(t)););return t}var dn=Ut({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),hn=function te(ye){var xe,be=(ye=null==ye?ct:hn.defaults(ct.Object(),ye,hn.pick(ct,et))).Array,we=ye.Date,_e=ye.Error,Se=ye.Function,ke=ye.Math,Ce=ye.Object,Me=ye.RegExp,Ie=ye.String,Pe=ye.TypeError,Te=be.prototype,Ee=Se.prototype,je=Ce.prototype,Re=ye["__core-js_shared__"],Ae=Ee.toString,Ne=je.hasOwnProperty,Le=0,Oe=(xe=/[^.]+$/.exec(Re&&Re.keys&&Re.keys.IE_PROTO||""))?"Symbol(src)_1."+xe:"",De=je.toString,Fe=Ae.call(Ce),ze=ct._,Be=Me("^"+Ae.call(Ne).replace(Z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$e=ht?ye.Buffer:e,We=ye.Symbol,Ue=ye.Uint8Array,He=$e?$e.allocUnsafe:e,qe=on(Ce.getPrototypeOf,Ce),Ve=Ce.create,Ge=je.propertyIsEnumerable,Ke=Te.splice,Ze=We?We.isConcatSpreadable:e,it=We?We.iterator:e,at=We?We.toStringTag:e,lt=function(){try{var e=co(Ce,"defineProperty");return e({},"",{}),e}catch(t){}}(),ut=ye.clearTimeout!==ct.clearTimeout&&ye.clearTimeout,dt=we&&we.now!==ct.Date.now&&we.now,pt=ye.setTimeout!==ct.setTimeout&&ye.setTimeout,ft=ke.ceil,bt=ke.floor,Lt=Ce.getOwnPropertySymbols,Ut=$e?$e.isBuffer:e,pn=ye.isFinite,fn=Te.join,gn=on(Ce.keys,Ce),mn=ke.max,vn=ke.min,yn=we.now,xn=ye.parseInt,bn=ke.random,wn=Te.reverse,_n=co(ye,"DataView"),Sn=co(ye,"Map"),kn=co(ye,"Promise"),Cn=co(ye,"Set"),Mn=co(ye,"WeakMap"),In=co(Ce,"create"),Pn=Mn&&new Mn,Tn={},En=zo(_n),jn=zo(Sn),Rn=zo(kn),An=zo(Cn),Nn=zo(Mn),Ln=We?We.prototype:e,On=Ln?Ln.valueOf:e,Dn=Ln?Ln.toString:e;function Fn(e){if(na(e)&&!qs(e)&&!(e instanceof Wn)){if(e instanceof $n)return e;if(Ne.call(e,"__wrapped__"))return Bo(e)}return new $n(e)}var zn=function(){function t(){}return function(n){if(!ta(n))return{};if(Ve)return Ve(n);t.prototype=n;var r=new t;return t.prototype=e,r}}();function Bn(){}function $n(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=e}function Wn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=u,this.__views__=[]}function Un(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Vn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qn;++t<n;)this.add(e[t])}function Gn(e){var t=this.__data__=new Hn(e);this.size=t.size}function Yn(e,t){var n=qs(e),r=!n&&Hs(e),i=!n&&!r&&Xs(e),o=!n&&!r&&!i&&ua(e),s=n||r||i||o,a=s?Vt(e.length,Ie):[],l=a.length;for(var c in e)!t&&!Ne.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||vo(c,l))||a.push(c);return a}function Xn(t){var n=t.length;return n?t[Vr(0,n-1)]:e}function Kn(e,t){return Ao(Ii(e),or(t,0,e.length))}function Qn(e){return Ao(Ii(e))}function Zn(t,n,r){(r!==e&&!$s(t[n],r)||r===e&&!(n in t))&&rr(t,n,r)}function Jn(t,n,r){var i=t[n];Ne.call(t,n)&&$s(i,r)&&(r!==e||n in t)||rr(t,n,r)}function er(e,t){for(var n=e.length;n--;)if($s(e[n][0],t))return n;return-1}function tr(e,t,n,r){return ur(e,function(e,i,o){t(r,e,n(e),o)}),r}function nr(e,t){return e&&Pi(t,Ra(t),e)}function rr(e,t,n){"__proto__"==t&&lt?lt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ir(t,n){for(var r=-1,i=n.length,o=be(i),s=null==t;++r<i;)o[r]=s?e:Ia(t,n[r]);return o}function or(t,n,r){return t==t&&(r!==e&&(t=t<=r?t:r),n!==e&&(t=t>=n?t:n)),t}function sr(t,n,r,i,o,s){var a,l=1&n,c=2&n,u=4&n;if(r&&(a=o?r(t,i,o,s):r(t)),a!==e)return a;if(!ta(t))return t;var d=qs(t);if(d){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Ne.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(t),!l)return Ii(t,a)}else{var p=po(t),m=p==v||p==y;if(Xs(t))return wi(t,l);if(p==w||p==h||m&&!o){if(a=c||m?{}:go(t),!l)return c?function(e,t){return Pi(e,ho(e),t)}(t,function(e,t){return e&&Pi(t,Aa(t),e)}(a,t)):function(e,t){return Pi(e,uo(e),t)}(t,nr(a,t))}else{if(!rt[p])return o?t:{};a=function(e,t,n){var r,i=e.constructor;switch(t){case P:return _i(e);case f:case g:return new i(+e);case T:return function(e,t){var n=t?_i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case E:case j:case R:case A:case N:case L:case O:case D:case F:return Si(e,n);case x:return new i;case b:case C:return new i(e);case S:return function(e){var t=new e.constructor(e.source,ce.exec(e));return t.lastIndex=e.lastIndex,t}(e);case k:return new i;case M:return r=e,On?Ce(On.call(r)):{}}}(t,p,l)}}s||(s=new Gn);var _=s.get(t);if(_)return _;s.set(t,a),aa(t)?t.forEach(function(e){a.add(sr(e,n,r,e,t,s))}):ra(t)&&t.forEach(function(e,i){a.set(i,sr(e,n,r,i,t,s))});var I=d?e:(u?c?no:to:c?Aa:Ra)(t);return kt(I||t,function(e,i){I&&(e=t[i=e]),Jn(a,i,sr(e,n,r,i,t,s))}),a}function ar(t,n,r){var i=r.length;if(null==t)return!i;for(t=Ce(t);i--;){var o=r[i],s=n[o],a=t[o];if(a===e&&!(o in t)||!s(a))return!1}return!0}function lr(n,r,i){if("function"!=typeof n)throw new Pe(t);return To(function(){n.apply(e,i)},r)}function cr(e,t,n,r){var i=-1,o=Pt,s=!0,a=e.length,l=[],c=t.length;if(!a)return l;n&&(t=Et(t,Yt(n))),r?(o=Tt,s=!1):t.length>=200&&(o=Kt,s=!1,t=new Vn(t));e:for(;++i<a;){var u=e[i],d=null==n?u:n(u);if(u=r||0!==u?u:0,s&&d==d){for(var h=c;h--;)if(t[h]===d)continue e;l.push(u)}else o(t,d,r)||l.push(u)}return l}Fn.templateSettings={escape:V,evaluate:G,interpolate:Y,variable:"",imports:{_:Fn}},Fn.prototype=Bn.prototype,Fn.prototype.constructor=Fn,$n.prototype=zn(Bn.prototype),$n.prototype.constructor=$n,Wn.prototype=zn(Bn.prototype),Wn.prototype.constructor=Wn,Un.prototype.clear=function(){this.__data__=In?In(null):{},this.size=0},Un.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Un.prototype.get=function(t){var r=this.__data__;if(In){var i=r[t];return i===n?e:i}return Ne.call(r,t)?r[t]:e},Un.prototype.has=function(t){var n=this.__data__;return In?n[t]!==e:Ne.call(n,t)},Un.prototype.set=function(t,r){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=In&&r===e?n:r,this},Hn.prototype.clear=function(){this.__data__=[],this.size=0},Hn.prototype.delete=function(e){var t=this.__data__,n=er(t,e);return!(n<0||(n==t.length-1?t.pop():Ke.call(t,n,1),--this.size,0))},Hn.prototype.get=function(t){var n=this.__data__,r=er(n,t);return r<0?e:n[r][1]},Hn.prototype.has=function(e){return er(this.__data__,e)>-1},Hn.prototype.set=function(e,t){var n=this.__data__,r=er(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Un,map:new(Sn||Hn),string:new Un}},qn.prototype.delete=function(e){var t=ao(this,e).delete(e);return this.size-=t?1:0,t},qn.prototype.get=function(e){return ao(this,e).get(e)},qn.prototype.has=function(e){return ao(this,e).has(e)},qn.prototype.set=function(e,t){var n=ao(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Vn.prototype.add=Vn.prototype.push=function(e){return this.__data__.set(e,n),this},Vn.prototype.has=function(e){return this.__data__.has(e)},Gn.prototype.clear=function(){this.__data__=new Hn,this.size=0},Gn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Gn.prototype.get=function(e){return this.__data__.get(e)},Gn.prototype.has=function(e){return this.__data__.has(e)},Gn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Hn){var r=n.__data__;if(!Sn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(e,t),this.size=n.size,this};var ur=ji(yr),dr=ji(xr,!0);function hr(e,t){var n=!0;return ur(e,function(e,r,i){return n=!!t(e,r,i)}),n}function pr(t,n,r){for(var i=-1,o=t.length;++i<o;){var s=t[i],a=n(s);if(null!=a&&(l===e?a==a&&!ca(a):r(a,l)))var l=a,c=s}return c}function fr(e,t){var n=[];return ur(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function gr(e,t,n,r,i){var o=-1,s=e.length;for(n||(n=mo),i||(i=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?gr(a,t-1,n,r,i):jt(i,a):r||(i[i.length]=a)}return i}var mr=Ri(),vr=Ri(!0);function yr(e,t){return e&&mr(e,t,Ra)}function xr(e,t){return e&&vr(e,t,Ra)}function br(e,t){return It(t,function(t){return Zs(e[t])})}function wr(t,n){for(var r=0,i=(n=vi(n,t)).length;null!=t&&r<i;)t=t[Fo(n[r++])];return r&&r==i?t:e}function _r(e,t,n){var r=t(e);return qs(e)?r:jt(r,n(e))}function Sr(t){return null==t?t===e?"[object Undefined]":"[object Null]":at&&at in Ce(t)?function(t){var n=Ne.call(t,at),r=t[at];try{t[at]=e;var i=!0}catch(s){}var o=De.call(t);return i&&(n?t[at]=r:delete t[at]),o}(t):function(e){return De.call(e)}(t)}function kr(e,t){return e>t}function Cr(e,t){return null!=e&&Ne.call(e,t)}function Mr(e,t){return null!=e&&t in Ce(e)}function Ir(t,n,r){for(var i=r?Tt:Pt,o=t[0].length,s=t.length,a=s,l=be(s),c=1/0,u=[];a--;){var d=t[a];a&&n&&(d=Et(d,Yt(n))),c=vn(d.length,c),l[a]=!r&&(n||o>=120&&d.length>=120)?new Vn(a&&d):e}d=t[0];var h=-1,p=l[0];e:for(;++h<o&&u.length<c;){var f=d[h],g=n?n(f):f;if(f=r||0!==f?f:0,!(p?Kt(p,g):i(u,g,r))){for(a=s;--a;){var m=l[a];if(!(m?Kt(m,g):i(t[a],g,r)))continue e}p&&p.push(g),u.push(f)}}return u}function Pr(t,n,r){var i=null==(t=Mo(t,n=vi(n,t)))?t:t[Fo(Qo(n))];return null==i?e:_t(i,t,r)}function Tr(e){return na(e)&&Sr(e)==h}function Er(t,n,r,i,o){return t===n||(null==t||null==n||!na(t)&&!na(n)?t!=t&&n!=n:function(t,n,r,i,o,s){var a=qs(t),l=qs(n),c=a?p:po(t),u=l?p:po(n),d=(c=c==h?w:c)==w,v=(u=u==h?w:u)==w,y=c==u;if(y&&Xs(t)){if(!Xs(n))return!1;a=!0,d=!1}if(y&&!d)return s||(s=new Gn),a||ua(t)?Ji(t,n,r,i,o,s):function(e,t,n,r,i,o,s){switch(n){case T:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case P:return!(e.byteLength!=t.byteLength||!o(new Ue(e),new Ue(t)));case f:case g:case b:return $s(+e,+t);case m:return e.name==t.name&&e.message==t.message;case S:case C:return e==t+"";case x:var a=rn;case k:var l=1&r;if(a||(a=an),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;r|=2,s.set(e,t);var u=Ji(a(e),a(t),r,i,o,s);return s.delete(e),u;case M:if(On)return On.call(e)==On.call(t)}return!1}(t,n,c,r,i,o,s);if(!(1&r)){var _=d&&Ne.call(t,"__wrapped__"),I=v&&Ne.call(n,"__wrapped__");if(_||I){var E=_?t.value():t,j=I?n.value():n;return s||(s=new Gn),o(E,j,r,i,s)}}return!!y&&(s||(s=new Gn),function(t,n,r,i,o,s){var a=1&r,l=to(t),c=l.length,u=to(n),d=u.length;if(c!=d&&!a)return!1;for(var h=c;h--;){var p=l[h];if(!(a?p in n:Ne.call(n,p)))return!1}var f=s.get(t),g=s.get(n);if(f&&g)return f==n&&g==t;var m=!0;s.set(t,n),s.set(n,t);for(var v=a;++h<c;){var y=t[p=l[h]],x=n[p];if(i)var b=a?i(x,y,p,n,t,s):i(y,x,p,t,n,s);if(!(b===e?y===x||o(y,x,r,i,s):b)){m=!1;break}v||(v="constructor"==p)}if(m&&!v){var w=t.constructor,_=n.constructor;w==_||!("constructor"in t)||!("constructor"in n)||"function"==typeof w&&w instanceof w&&"function"==typeof _&&_ instanceof _||(m=!1)}return s.delete(t),s.delete(n),m}(t,n,r,i,o,s))}(t,n,r,i,Er,o))}function jr(t,n,r,i){var o=r.length,s=o,a=!i;if(null==t)return!s;for(t=Ce(t);o--;){var l=r[o];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<s;){var c=(l=r[o])[0],u=t[c],d=l[1];if(a&&l[2]){if(u===e&&!(c in t))return!1}else{var h=new Gn;if(i)var p=i(u,d,c,t,n,h);if(!(p===e?Er(d,u,3,i,h):p))return!1}}return!0}function Rr(e){return!(!ta(e)||(t=e,Oe&&Oe in t))&&(Zs(e)?Be:he).test(zo(e));var t}function Ar(e){return"function"==typeof e?e:null==e?il:"object"==typeof e?qs(e)?zr(e[0],e[1]):Fr(e):pl(e)}function Nr(e){if(!_o(e))return gn(e);var t=[];for(var n in Ce(e))Ne.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Lr(e){if(!ta(e))return function(e){var t=[];if(null!=e)for(var n in Ce(e))t.push(n);return t}(e);var t=_o(e),n=[];for(var r in e)("constructor"!=r||!t&&Ne.call(e,r))&&n.push(r);return n}function Or(e,t){return e<t}function Dr(e,t){var n=-1,r=Gs(e)?be(e.length):[];return ur(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function Fr(e){var t=lo(e);return 1==t.length&&t[0][2]?ko(t[0][0],t[0][1]):function(n){return n===e||jr(n,e,t)}}function zr(t,n){return xo(t)&&So(n)?ko(Fo(t),n):function(r){var i=Ia(r,t);return i===e&&i===n?Pa(r,t):Er(n,i,3)}}function Br(t,n,r,i,o){t!==n&&mr(n,function(s,a){if(o||(o=new Gn),ta(s))!function(t,n,r,i,o,s,a){var l=Io(t,r),c=Io(n,r),u=a.get(c);if(u)Zn(t,r,u);else{var d=s?s(l,c,r+"",t,n,a):e,h=d===e;if(h){var p=qs(c),f=!p&&Xs(c),g=!p&&!f&&ua(c);d=c,p||f||g?qs(l)?d=l:Ys(l)?d=Ii(l):f?(h=!1,d=wi(c,!0)):g?(h=!1,d=Si(c,!0)):d=[]:oa(c)||Hs(c)?(d=l,Hs(l)?d=ya(l):ta(l)&&!Zs(l)||(d=go(c))):h=!1}h&&(a.set(c,d),o(d,c,i,s,a),a.delete(c)),Zn(t,r,d)}}(t,n,a,r,Br,i,o);else{var l=i?i(Io(t,a),s,a+"",t,n,o):e;l===e&&(l=s),Zn(t,a,l)}},Aa)}function $r(t,n){var r=t.length;if(r)return vo(n+=n<0?r:0,r)?t[n]:e}function Wr(e,t,n){t=t.length?Et(t,function(e){return qs(e)?function(t){return wr(t,1===e.length?e[0]:e)}:e}):[il];var r=-1;return t=Et(t,Yt(so())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Dr(e,function(e,n,i){return{criteria:Et(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,s=i.length,a=n.length;++r<s;){var l=ki(i[r],o[r]);if(l)return r>=a?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)})}function Ur(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],a=wr(e,s);n(a,s)&&Qr(o,vi(s,e),a)}return o}function Hr(e,t,n,r){var i=r?zt:Ft,o=-1,s=t.length,a=e;for(e===t&&(t=Ii(t)),n&&(a=Et(e,Yt(n)));++o<s;)for(var l=0,c=t[o],u=n?n(c):c;(l=i(a,u,l,r))>-1;)a!==e&&Ke.call(a,l,1),Ke.call(e,l,1);return e}function qr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;vo(i)?Ke.call(e,i,1):ci(e,i)}}return e}function Vr(e,t){return e+bt(bn()*(t-e+1))}function Gr(e,t){var n="";if(!e||t<1||t>l)return n;do{t%2&&(n+=e),(t=bt(t/2))&&(e+=e)}while(t);return n}function Yr(e,t){return Eo(Co(e,t,il),e+"")}function Xr(e){return Xn($a(e))}function Kr(e,t){var n=$a(e);return Ao(n,or(t,0,n.length))}function Qr(t,n,r,i){if(!ta(t))return t;for(var o=-1,s=(n=vi(n,t)).length,a=s-1,l=t;null!=l&&++o<s;){var c=Fo(n[o]),u=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=a){var d=l[c];(u=i?i(d,c,l):e)===e&&(u=ta(d)?d:vo(n[o+1])?[]:{})}Jn(l,c,u),l=l[c]}return t}var Zr=Pn?function(e,t){return Pn.set(e,t),e}:il,Jr=lt?function(e,t){return lt(e,"toString",{configurable:!0,enumerable:!1,value:tl(t),writable:!0})}:il;function ei(e){return Ao($a(e))}function ti(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=be(i);++r<i;)o[r]=e[r+t];return o}function ni(e,t){var n;return ur(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function ri(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=e[o];null!==s&&!ca(s)&&(n?s<=t:s<t)?r=o+1:i=o}return i}return ii(e,t,il,n)}function ii(t,n,r,i){var o=0,s=null==t?0:t.length;if(0===s)return 0;for(var a=(n=r(n))!=n,l=null===n,c=ca(n),u=n===e;o<s;){var d=bt((o+s)/2),h=r(t[d]),p=h!==e,f=null===h,g=h==h,m=ca(h);if(a)var v=i||g;else v=u?g&&(i||p):l?g&&p&&(i||!f):c?g&&p&&!f&&(i||!m):!f&&!m&&(i?h<=n:h<n);v?o=d+1:s=d}return vn(s,4294967294)}function oi(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n],a=t?t(s):s;if(!n||!$s(a,l)){var l=a;o[i++]=0===s?0:s}}return o}function si(e){return"number"==typeof e?e:ca(e)?c:+e}function ai(e){if("string"==typeof e)return e;if(qs(e))return Et(e,ai)+"";if(ca(e))return Dn?Dn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function li(e,t,n){var r=-1,i=Pt,o=e.length,s=!0,a=[],l=a;if(n)s=!1,i=Tt;else if(o>=200){var c=t?null:Gi(e);if(c)return an(c);s=!1,i=Kt,l=new Vn}else l=t?[]:a;e:for(;++r<o;){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,s&&d==d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),a.push(u)}else i(l,d,n)||(l!==a&&l.push(d),a.push(u))}return a}function ci(e,t){return null==(e=Mo(e,t=vi(t,e)))||delete e[Fo(Qo(t))]}function ui(e,t,n,r){return Qr(e,t,n(wr(e,t)),r)}function di(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ti(e,r?0:o,r?o+1:i):ti(e,r?o+1:0,r?i:o)}function hi(e,t){var n=e;return n instanceof Wn&&(n=n.value()),Rt(t,function(e,t){return t.func.apply(t.thisArg,jt([e],t.args))},n)}function pi(e,t,n){var r=e.length;if(r<2)return r?li(e[0]):[];for(var i=-1,o=be(r);++i<r;)for(var s=e[i],a=-1;++a<r;)a!=i&&(o[i]=cr(o[i]||s,e[a],t,n));return li(gr(o,1),t,n)}function fi(t,n,r){for(var i=-1,o=t.length,s=n.length,a={};++i<o;){var l=i<s?n[i]:e;r(a,t[i],l)}return a}function gi(e){return Ys(e)?e:[]}function mi(e){return"function"==typeof e?e:il}function vi(e,t){return qs(e)?e:xo(e,t)?[e]:Do(xa(e))}var yi=Yr;function xi(t,n,r){var i=t.length;return r=r===e?i:r,!n&&r>=i?t:ti(t,n,r)}var bi=ut||function(e){return ct.clearTimeout(e)};function wi(e,t){if(t)return e.slice();var n=e.length,r=He?He(n):new e.constructor(n);return e.copy(r),r}function _i(e){var t=new e.constructor(e.byteLength);return new Ue(t).set(new Ue(e)),t}function Si(e,t){var n=t?_i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ki(t,n){if(t!==n){var r=t!==e,i=null===t,o=t==t,s=ca(t),a=n!==e,l=null===n,c=n==n,u=ca(n);if(!l&&!u&&!s&&t>n||s&&a&&c&&!l&&!u||i&&a&&c||!r&&c||!o)return 1;if(!i&&!s&&!u&&t<n||u&&r&&o&&!i&&!s||l&&r&&o||!a&&o||!c)return-1}return 0}function Ci(e,t,n,r){for(var i=-1,o=e.length,s=n.length,a=-1,l=t.length,c=mn(o-s,0),u=be(l+c),d=!r;++a<l;)u[a]=t[a];for(;++i<s;)(d||i<o)&&(u[n[i]]=e[i]);for(;c--;)u[a++]=e[i++];return u}function Mi(e,t,n,r){for(var i=-1,o=e.length,s=-1,a=n.length,l=-1,c=t.length,u=mn(o-a,0),d=be(u+c),h=!r;++i<u;)d[i]=e[i];for(var p=i;++l<c;)d[p+l]=t[l];for(;++s<a;)(h||i<o)&&(d[p+n[s]]=e[i++]);return d}function Ii(e,t){var n=-1,r=e.length;for(t||(t=be(r));++n<r;)t[n]=e[n];return t}function Pi(t,n,r,i){var o=!r;r||(r={});for(var s=-1,a=n.length;++s<a;){var l=n[s],c=i?i(r[l],t[l],l,r,t):e;c===e&&(c=t[l]),o?rr(r,l,c):Jn(r,l,c)}return r}function Ti(e,t){return function(n,r){var i=qs(n)?St:tr,o=t?t():{};return i(n,e,so(r,2),o)}}function Ei(t){return Yr(function(n,r){var i=-1,o=r.length,s=o>1?r[o-1]:e,a=o>2?r[2]:e;for(s=t.length>3&&"function"==typeof s?(o--,s):e,a&&yo(r[0],r[1],a)&&(s=o<3?e:s,o=1),n=Ce(n);++i<o;){var l=r[i];l&&t(n,l,i,s)}return n})}function ji(e,t){return function(n,r){if(null==n)return n;if(!Gs(n))return e(n,r);for(var i=n.length,o=t?i:-1,s=Ce(n);(t?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Ri(e){return function(t,n,r){for(var i=-1,o=Ce(t),s=r(t),a=s.length;a--;){var l=s[e?a:++i];if(!1===n(o[l],l,o))break}return t}}function Ai(t){return function(n){var r=nn(n=xa(n))?cn(n):e,i=r?r[0]:n.charAt(0),o=r?xi(r,1).join(""):n.slice(1);return i[t]()+o}}function Ni(e){return function(t){return Rt(Za(Ha(t).replace(Ye,"")),e,"")}}function Li(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=zn(e.prototype),r=e.apply(n,t);return ta(r)?r:n}}function Oi(t){return function(n,r,i){var o=Ce(n);if(!Gs(n)){var s=so(r,3);n=Ra(n),r=function(e){return s(o[e],e,o)}}var a=t(n,r,i);return a>-1?o[s?n[a]:a]:e}}function Di(n){return eo(function(r){var i=r.length,o=i,s=$n.prototype.thru;for(n&&r.reverse();o--;){var a=r[o];if("function"!=typeof a)throw new Pe(t);if(s&&!l&&"wrapper"==io(a))var l=new $n([],!0)}for(o=l?o:i;++o<i;){var c=io(a=r[o]),u="wrapper"==c?ro(a):e;l=u&&bo(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[io(u[0])].apply(l,u[3]):1==a.length&&bo(a)?l[c]():l.thru(a)}return function(){var e=arguments,t=e[0];if(l&&1==e.length&&qs(t))return l.plant(t).value();for(var n=0,o=i?r[n].apply(this,e):t;++n<i;)o=r[n].call(this,o);return o}})}function Fi(t,n,r,i,s,a,l,c,u,d){var h=n&o,p=1&n,f=2&n,g=24&n,m=512&n,v=f?e:Li(t);return function o(){for(var y=arguments.length,x=be(y),b=y;b--;)x[b]=arguments[b];if(g)var w=oo(o),_=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(x,w);if(i&&(x=Ci(x,i,s,g)),a&&(x=Mi(x,a,l,g)),y-=_,g&&y<d){var S=sn(x,w);return qi(t,n,Fi,o.placeholder,r,x,S,c,u,d-y)}var k=p?r:this,C=f?k[t]:t;return y=x.length,c?x=function(t,n){for(var r=t.length,i=vn(n.length,r),o=Ii(t);i--;){var s=n[i];t[i]=vo(s,r)?o[s]:e}return t}(x,c):m&&y>1&&x.reverse(),h&&u<y&&(x.length=u),this&&this!==ct&&this instanceof o&&(C=v||Li(C)),C.apply(k,x)}}function zi(e,t){return function(n,r){return function(e,t,n,r){return yr(e,function(e,i,o){t(r,n(e),i,o)}),r}(n,e,t(r),{})}}function Bi(t,n){return function(r,i){var o;if(r===e&&i===e)return n;if(r!==e&&(o=r),i!==e){if(o===e)return i;"string"==typeof r||"string"==typeof i?(r=ai(r),i=ai(i)):(r=si(r),i=si(i)),o=t(r,i)}return o}}function $i(e){return eo(function(t){return t=Et(t,Yt(so())),Yr(function(n){var r=this;return e(t,function(e){return _t(e,r,n)})})})}function Wi(t,n){var r=(n=n===e?" ":ai(n)).length;if(r<2)return r?Gr(n,t):n;var i=Gr(n,ft(t/ln(n)));return nn(n)?xi(cn(i),0,t).join(""):i.slice(0,t)}function Ui(t){return function(n,r,i){return i&&"number"!=typeof i&&yo(n,r,i)&&(r=i=e),n=fa(n),r===e?(r=n,n=0):r=fa(r),function(e,t,n,r){for(var i=-1,o=mn(ft((t-e)/(n||1)),0),s=be(o);o--;)s[r?o:++i]=e,e+=n;return s}(n,r,i=i===e?n<r?1:-1:fa(i),t)}}function Hi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=va(t),n=va(n)),e(t,n)}}function qi(t,n,r,o,s,a,l,c,u,d){var h=8&n;n|=h?i:64,4&(n&=~(h?64:i))||(n&=-4);var p=[t,n,s,h?a:e,h?l:e,h?e:a,h?e:l,c,u,d],f=r.apply(e,p);return bo(t)&&Po(f,p),f.placeholder=o,jo(f,t,n)}function Vi(e){var t=ke[e];return function(e,n){if(e=va(e),(n=null==n?0:vn(ga(n),292))&&pn(e)){var r=(xa(e)+"e").split("e");return+((r=(xa(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Gi=Cn&&1/an(new Cn([,-0]))[1]==a?function(e){return new Cn(e)}:cl;function Yi(e){return function(t){var n=po(t);return n==x?rn(t):n==k?function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}(t):function(e,t){return Et(t,function(t){return[t,e[t]]})}(t,e(t))}}function Xi(n,a,l,c,u,d,h,p){var f=2&a;if(!f&&"function"!=typeof n)throw new Pe(t);var g=c?c.length:0;if(g||(a&=-97,c=u=e),h=h===e?h:mn(ga(h),0),p=p===e?p:ga(p),g-=u?u.length:0,64&a){var m=c,v=u;c=u=e}var y=f?e:ro(n),x=[n,a,l,c,u,m,v,d,h,p];if(y&&function(e,t){var n=e[1],i=t[1],a=n|i,l=a<131,c=i==o&&8==n||i==o&&n==s&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==n;if(!l&&!c)return e;1&i&&(e[2]=t[2],a|=1&n?0:4);var u=t[3];if(u){var d=e[3];e[3]=d?Ci(d,u,t[4]):u,e[4]=d?sn(e[3],r):t[4]}(u=t[5])&&(d=e[5],e[5]=d?Mi(d,u,t[6]):u,e[6]=d?sn(e[5],r):t[6]),(u=t[7])&&(e[7]=u),i&o&&(e[8]=null==e[8]?t[8]:vn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=a}(x,y),n=x[0],a=x[1],l=x[2],c=x[3],u=x[4],!(p=x[9]=x[9]===e?f?0:n.length:mn(x[9]-g,0))&&24&a&&(a&=-25),a&&1!=a)b=8==a||16==a?function(t,n,r){var i=Li(t);return function o(){for(var s=arguments.length,a=be(s),l=s,c=oo(o);l--;)a[l]=arguments[l];var u=s<3&&a[0]!==c&&a[s-1]!==c?[]:sn(a,c);return(s-=u.length)<r?qi(t,n,Fi,o.placeholder,e,a,u,e,e,r-s):_t(this&&this!==ct&&this instanceof o?i:t,this,a)}}(n,a,p):a!=i&&33!=a||u.length?Fi.apply(e,x):function(e,t,n,r){var i=1&t,o=Li(e);return function t(){for(var s=-1,a=arguments.length,l=-1,c=r.length,u=be(c+a),d=this&&this!==ct&&this instanceof t?o:e;++l<c;)u[l]=r[l];for(;a--;)u[l++]=arguments[++s];return _t(d,i?n:this,u)}}(n,a,l,c);else var b=function(e,t,n){var r=1&t,i=Li(e);return function t(){return(this&&this!==ct&&this instanceof t?i:e).apply(r?n:this,arguments)}}(n,a,l);return jo((y?Zr:Po)(b,x),n,a)}function Ki(t,n,r,i){return t===e||$s(t,je[r])&&!Ne.call(i,r)?n:t}function Qi(t,n,r,i,o,s){return ta(t)&&ta(n)&&(s.set(n,t),Br(t,n,e,Qi,s),s.delete(n)),t}function Zi(t){return oa(t)?e:t}function Ji(t,n,r,i,o,s){var a=1&r,l=t.length,c=n.length;if(l!=c&&!(a&&c>l))return!1;var u=s.get(t),d=s.get(n);if(u&&d)return u==n&&d==t;var h=-1,p=!0,f=2&r?new Vn:e;for(s.set(t,n),s.set(n,t);++h<l;){var g=t[h],m=n[h];if(i)var v=a?i(m,g,h,n,t,s):i(g,m,h,t,n,s);if(v!==e){if(v)continue;p=!1;break}if(f){if(!Nt(n,function(e,t){if(!Kt(f,t)&&(g===e||o(g,e,r,i,s)))return f.push(t)})){p=!1;break}}else if(g!==m&&!o(g,m,r,i,s)){p=!1;break}}return s.delete(t),s.delete(n),p}function eo(t){return Eo(Co(t,e,Vo),t+"")}function to(e){return _r(e,Ra,uo)}function no(e){return _r(e,Aa,ho)}var ro=Pn?function(e){return Pn.get(e)}:cl;function io(e){for(var t=e.name+"",n=Tn[t],r=Ne.call(Tn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function oo(e){return(Ne.call(Fn,"placeholder")?Fn:e).placeholder}function so(){var e=Fn.iteratee||ol;return e=e===ol?Ar:e,arguments.length?e(arguments[0],arguments[1]):e}function ao(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function lo(e){for(var t=Ra(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,So(i)]}return t}function co(t,n){var r=function(t,n){return null==t?e:t[n]}(t,n);return Rr(r)?r:e}var uo=Lt?function(e){return null==e?[]:(e=Ce(e),It(Lt(e),function(t){return Ge.call(e,t)}))}:ml,ho=Lt?function(e){for(var t=[];e;)jt(t,uo(e)),e=qe(e);return t}:ml,po=Sr;function fo(e,t,n){for(var r=-1,i=(t=vi(t,e)).length,o=!1;++r<i;){var s=Fo(t[r]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&ea(i)&&vo(s,i)&&(qs(e)||Hs(e))}function go(e){return"function"!=typeof e.constructor||_o(e)?{}:zn(qe(e))}function mo(e){return qs(e)||Hs(e)||!!(Ze&&e&&e[Ze])}function vo(e,t){var n=typeof e;return!!(t=null==t?l:t)&&("number"==n||"symbol"!=n&&fe.test(e))&&e>-1&&e%1==0&&e<t}function yo(e,t,n){if(!ta(n))return!1;var r=typeof t;return!!("number"==r?Gs(n)&&vo(t,n.length):"string"==r&&t in n)&&$s(n[t],e)}function xo(e,t){if(qs(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ca(e))||K.test(e)||!X.test(e)||null!=t&&e in Ce(t)}function bo(e){var t=io(e),n=Fn[t];if("function"!=typeof n||!(t in Wn.prototype))return!1;if(e===n)return!0;var r=ro(n);return!!r&&e===r[0]}(_n&&po(new _n(new ArrayBuffer(1)))!=T||Sn&&po(new Sn)!=x||kn&&po(kn.resolve())!=_||Cn&&po(new Cn)!=k||Mn&&po(new Mn)!=I)&&(po=function(t){var n=Sr(t),r=n==w?t.constructor:e,i=r?zo(r):"";if(i)switch(i){case En:return T;case jn:return x;case Rn:return _;case An:return k;case Nn:return I}return n});var wo=Re?Zs:vl;function _o(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||je)}function So(e){return e==e&&!ta(e)}function ko(t,n){return function(r){return null!=r&&r[t]===n&&(n!==e||t in Ce(r))}}function Co(t,n,r){return n=mn(n===e?t.length-1:n,0),function(){for(var e=arguments,i=-1,o=mn(e.length-n,0),s=be(o);++i<o;)s[i]=e[n+i];i=-1;for(var a=be(n+1);++i<n;)a[i]=e[i];return a[n]=r(s),_t(t,this,a)}}function Mo(e,t){return t.length<2?e:wr(e,ti(t,0,-1))}function Io(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Po=Ro(Zr),To=pt||function(e,t){return ct.setTimeout(e,t)},Eo=Ro(Jr);function jo(e,t,n){var r=t+"";return Eo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ne,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return kt(d,function(n){var r="_."+n[0];t&n[1]&&!Pt(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(re);return t?t[1].split(ie):[]}(r),n)))}function Ro(t){var n=0,r=0;return function(){var i=yn(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(e,arguments)}}function Ao(t,n){var r=-1,i=t.length,o=i-1;for(n=n===e?i:n;++r<n;){var s=Vr(r,o),a=t[s];t[s]=t[r],t[r]=a}return t.length=n,t}var No,Lo,Oo,Do=(No=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Q,function(e,n,r,i){t.push(r?i.replace(ae,"$1"):n||e)}),t},Lo=Ls(No,function(e){return 500===Oo.size&&Oo.clear(),e}),Oo=Lo.cache,Lo);function Fo(e){if("string"==typeof e||ca(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function zo(e){if(null!=e){try{return Ae.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Bo(e){if(e instanceof Wn)return e.clone();var t=new $n(e.__wrapped__,e.__chain__);return t.__actions__=Ii(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var $o=Yr(function(e,t){return Ys(e)?cr(e,gr(t,1,Ys,!0)):[]}),Wo=Yr(function(t,n){var r=Qo(n);return Ys(r)&&(r=e),Ys(t)?cr(t,gr(n,1,Ys,!0),so(r,2)):[]}),Uo=Yr(function(t,n){var r=Qo(n);return Ys(r)&&(r=e),Ys(t)?cr(t,gr(n,1,Ys,!0),e,r):[]});function Ho(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ga(n);return i<0&&(i=mn(r+i,0)),Dt(e,so(t,3),i)}function qo(t,n,r){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return r!==e&&(o=ga(r),o=r<0?mn(i+o,0):vn(o,i-1)),Dt(t,so(n,3),o,!0)}function Vo(e){return null!=e&&e.length?gr(e,1):[]}function Go(t){return t&&t.length?t[0]:e}var Yo=Yr(function(e){var t=Et(e,gi);return t.length&&t[0]===e[0]?Ir(t):[]}),Xo=Yr(function(t){var n=Qo(t),r=Et(t,gi);return n===Qo(r)?n=e:r.pop(),r.length&&r[0]===t[0]?Ir(r,so(n,2)):[]}),Ko=Yr(function(t){var n=Qo(t),r=Et(t,gi);return(n="function"==typeof n?n:e)&&r.pop(),r.length&&r[0]===t[0]?Ir(r,e,n):[]});function Qo(t){var n=null==t?0:t.length;return n?t[n-1]:e}var Zo=Yr(Jo);function Jo(e,t){return e&&e.length&&t&&t.length?Hr(e,t):e}var es=eo(function(e,t){var n=null==e?0:e.length,r=ir(e,t);return qr(e,Et(t,function(e){return vo(e,n)?+e:e}).sort(ki)),r});function ts(e){return null==e?e:wn.call(e)}var ns=Yr(function(e){return li(gr(e,1,Ys,!0))}),rs=Yr(function(t){var n=Qo(t);return Ys(n)&&(n=e),li(gr(t,1,Ys,!0),so(n,2))}),is=Yr(function(t){var n=Qo(t);return n="function"==typeof n?n:e,li(gr(t,1,Ys,!0),e,n)});function os(e){if(!e||!e.length)return[];var t=0;return e=It(e,function(e){if(Ys(e))return t=mn(e.length,t),!0}),Vt(t,function(t){return Et(e,Wt(t))})}function ss(t,n){if(!t||!t.length)return[];var r=os(t);return null==n?r:Et(r,function(t){return _t(n,e,t)})}var as=Yr(function(e,t){return Ys(e)?cr(e,t):[]}),ls=Yr(function(e){return pi(It(e,Ys))}),cs=Yr(function(t){var n=Qo(t);return Ys(n)&&(n=e),pi(It(t,Ys),so(n,2))}),us=Yr(function(t){var n=Qo(t);return n="function"==typeof n?n:e,pi(It(t,Ys),e,n)}),ds=Yr(os),hs=Yr(function(t){var n=t.length,r=n>1?t[n-1]:e;return r="function"==typeof r?(t.pop(),r):e,ss(t,r)});function ps(e){var t=Fn(e);return t.__chain__=!0,t}function fs(e,t){return t(e)}var gs=eo(function(t){var n=t.length,r=n?t[0]:0,i=this.__wrapped__,o=function(e){return ir(e,t)};return!(n>1||this.__actions__.length)&&i instanceof Wn&&vo(r)?((i=i.slice(r,+r+(n?1:0))).__actions__.push({func:fs,args:[o],thisArg:e}),new $n(i,this.__chain__).thru(function(t){return n&&!t.length&&t.push(e),t})):this.thru(o)}),ms=Ti(function(e,t,n){Ne.call(e,n)?++e[n]:rr(e,n,1)}),vs=Oi(Ho),ys=Oi(qo);function xs(e,t){return(qs(e)?kt:ur)(e,so(t,3))}function bs(e,t){return(qs(e)?Ct:dr)(e,so(t,3))}var ws=Ti(function(e,t,n){Ne.call(e,n)?e[n].push(t):rr(e,n,[t])}),_s=Yr(function(e,t,n){var r=-1,i="function"==typeof t,o=Gs(e)?be(e.length):[];return ur(e,function(e){o[++r]=i?_t(t,e,n):Pr(e,t,n)}),o}),Ss=Ti(function(e,t,n){rr(e,n,t)});function ks(e,t){return(qs(e)?Et:Dr)(e,so(t,3))}var Cs=Ti(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Ms=Yr(function(e,t){if(null==e)return[];var n=t.length;return n>1&&yo(e,t[0],t[1])?t=[]:n>2&&yo(t[0],t[1],t[2])&&(t=[t[0]]),Wr(e,gr(t,1),[])}),Is=dt||function(){return ct.Date.now()};function Ps(t,n,r){return n=r?e:n,n=t&&null==n?t.length:n,Xi(t,o,e,e,e,e,n)}function Ts(n,r){var i;if("function"!=typeof r)throw new Pe(t);return n=ga(n),function(){return--n>0&&(i=r.apply(this,arguments)),n<=1&&(r=e),i}}var Es=Yr(function(e,t,n){var r=1;if(n.length){var o=sn(n,oo(Es));r|=i}return Xi(e,r,t,n,o)}),js=Yr(function(e,t,n){var r=3;if(n.length){var o=sn(n,oo(js));r|=i}return Xi(t,r,e,n,o)});function Rs(n,r,i){var o,s,a,l,c,u,d=0,h=!1,p=!1,f=!0;if("function"!=typeof n)throw new Pe(t);function g(t){var r=o,i=s;return o=s=e,d=t,l=n.apply(i,r)}function m(t){var n=t-u;return u===e||n>=r||n<0||p&&t-d>=a}function v(){var e=Is();if(m(e))return y(e);c=To(v,function(e){var t=r-(e-u);return p?vn(t,a-(e-d)):t}(e))}function y(t){return c=e,f&&o?g(t):(o=s=e,l)}function x(){var t=Is(),n=m(t);if(o=arguments,s=this,u=t,n){if(c===e)return function(e){return d=e,c=To(v,r),h?g(e):l}(u);if(p)return bi(c),c=To(v,r),g(u)}return c===e&&(c=To(v,r)),l}return r=va(r)||0,ta(i)&&(h=!!i.leading,a=(p="maxWait"in i)?mn(va(i.maxWait)||0,r):a,f="trailing"in i?!!i.trailing:f),x.cancel=function(){c!==e&&bi(c),d=0,o=u=s=c=e},x.flush=function(){return c===e?l:y(Is())},x}var As=Yr(function(e,t){return lr(e,1,t)}),Ns=Yr(function(e,t,n){return lr(e,va(t)||0,n)});function Ls(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new Pe(t);var r=function(){var t=arguments,i=n?n.apply(this,t):t[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,t);return r.cache=o.set(i,s)||o,s};return r.cache=new(Ls.Cache||qn),r}function Os(e){if("function"!=typeof e)throw new Pe(t);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ls.Cache=qn;var Ds=yi(function(e,t){var n=(t=1==t.length&&qs(t[0])?Et(t[0],Yt(so())):Et(gr(t,1),Yt(so()))).length;return Yr(function(r){for(var i=-1,o=vn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return _t(e,this,r)})}),Fs=Yr(function(t,n){var r=sn(n,oo(Fs));return Xi(t,i,e,n,r)}),zs=Yr(function(t,n){var r=sn(n,oo(zs));return Xi(t,64,e,n,r)}),Bs=eo(function(t,n){return Xi(t,s,e,e,e,n)});function $s(e,t){return e===t||e!=e&&t!=t}var Ws=Hi(kr),Us=Hi(function(e,t){return e>=t}),Hs=Tr(function(){return arguments}())?Tr:function(e){return na(e)&&Ne.call(e,"callee")&&!Ge.call(e,"callee")},qs=be.isArray,Vs=gt?Yt(gt):function(e){return na(e)&&Sr(e)==P};function Gs(e){return null!=e&&ea(e.length)&&!Zs(e)}function Ys(e){return na(e)&&Gs(e)}var Xs=Ut||vl,Ks=mt?Yt(mt):function(e){return na(e)&&Sr(e)==g};function Qs(e){if(!na(e))return!1;var t=Sr(e);return t==m||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!oa(e)}function Zs(e){if(!ta(e))return!1;var t=Sr(e);return t==v||t==y||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Js(e){return"number"==typeof e&&e==ga(e)}function ea(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=l}function ta(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function na(e){return null!=e&&"object"==typeof e}var ra=vt?Yt(vt):function(e){return na(e)&&po(e)==x};function ia(e){return"number"==typeof e||na(e)&&Sr(e)==b}function oa(e){if(!na(e)||Sr(e)!=w)return!1;var t=qe(e);if(null===t)return!0;var n=Ne.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ae.call(n)==Fe}var sa=yt?Yt(yt):function(e){return na(e)&&Sr(e)==S},aa=xt?Yt(xt):function(e){return na(e)&&po(e)==k};function la(e){return"string"==typeof e||!qs(e)&&na(e)&&Sr(e)==C}function ca(e){return"symbol"==typeof e||na(e)&&Sr(e)==M}var ua=wt?Yt(wt):function(e){return na(e)&&ea(e.length)&&!!nt[Sr(e)]},da=Hi(Or),ha=Hi(function(e,t){return e<=t});function pa(e){if(!e)return[];if(Gs(e))return la(e)?cn(e):Ii(e);if(it&&e[it])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[it]());var t=po(e);return(t==x?rn:t==k?an:$a)(e)}function fa(e){return e?(e=va(e))===a||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ga(e){var t=fa(e),n=t%1;return t==t?n?t-n:t:0}function ma(e){return e?or(ga(e),0,u):0}function va(e){if("number"==typeof e)return e;if(ca(e))return c;if(ta(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ta(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Gt(e);var n=de.test(e);return n||pe.test(e)?st(e.slice(2),n?2:8):ue.test(e)?c:+e}function ya(e){return Pi(e,Aa(e))}function xa(e){return null==e?"":ai(e)}var ba=Ei(function(e,t){if(_o(t)||Gs(t))Pi(t,Ra(t),e);else for(var n in t)Ne.call(t,n)&&Jn(e,n,t[n])}),wa=Ei(function(e,t){Pi(t,Aa(t),e)}),_a=Ei(function(e,t,n,r){Pi(t,Aa(t),e,r)}),Sa=Ei(function(e,t,n,r){Pi(t,Ra(t),e,r)}),ka=eo(ir),Ca=Yr(function(t,n){t=Ce(t);var r=-1,i=n.length,o=i>2?n[2]:e;for(o&&yo(n[0],n[1],o)&&(i=1);++r<i;)for(var s=n[r],a=Aa(s),l=-1,c=a.length;++l<c;){var u=a[l],d=t[u];(d===e||$s(d,je[u])&&!Ne.call(t,u))&&(t[u]=s[u])}return t}),Ma=Yr(function(t){return t.push(e,Qi),_t(La,e,t)});function Ia(t,n,r){var i=null==t?e:wr(t,n);return i===e?r:i}function Pa(e,t){return null!=e&&fo(e,t,Mr)}var Ta=zi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=De.call(t)),e[t]=n},tl(il)),Ea=zi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=De.call(t)),Ne.call(e,t)?e[t].push(n):e[t]=[n]},so),ja=Yr(Pr);function Ra(e){return Gs(e)?Yn(e):Nr(e)}function Aa(e){return Gs(e)?Yn(e,!0):Lr(e)}var Na=Ei(function(e,t,n){Br(e,t,n)}),La=Ei(function(e,t,n,r){Br(e,t,n,r)}),Oa=eo(function(e,t){var n={};if(null==e)return n;var r=!1;t=Et(t,function(t){return t=vi(t,e),r||(r=t.length>1),t}),Pi(e,no(e),n),r&&(n=sr(n,7,Zi));for(var i=t.length;i--;)ci(n,t[i]);return n}),Da=eo(function(e,t){return null==e?{}:function(e,t){return Ur(e,t,function(t,n){return Pa(e,n)})}(e,t)});function Fa(e,t){if(null==e)return{};var n=Et(no(e),function(e){return[e]});return t=so(t),Ur(e,n,function(e,n){return t(e,n[0])})}var za=Yi(Ra),Ba=Yi(Aa);function $a(e){return null==e?[]:Xt(e,Ra(e))}var Wa=Ni(function(e,t,n){return t=t.toLowerCase(),e+(n?Ua(t):t)});function Ua(e){return Qa(xa(e).toLowerCase())}function Ha(e){return(e=xa(e))&&e.replace(ge,Jt).replace(Xe,"")}var qa=Ni(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Va=Ni(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Ga=Ai("toLowerCase"),Ya=Ni(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Xa=Ni(function(e,t,n){return e+(n?" ":"")+Qa(t)}),Ka=Ni(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Qa=Ai("toUpperCase");function Za(t,n,r){return t=xa(t),(n=r?e:n)===e?function(e){return Je.test(e)}(t)?function(e){return e.match(Qe)||[]}(t):function(e){return e.match(oe)||[]}(t):t.match(n)||[]}var Ja=Yr(function(t,n){try{return _t(t,e,n)}catch(r){return Qs(r)?r:new _e(r)}}),el=eo(function(e,t){return kt(t,function(t){t=Fo(t),rr(e,t,Es(e[t],e))}),e});function tl(e){return function(){return e}}var nl=Di(),rl=Di(!0);function il(e){return e}function ol(e){return Ar("function"==typeof e?e:sr(e,1))}var sl=Yr(function(e,t){return function(n){return Pr(n,e,t)}}),al=Yr(function(e,t){return function(n){return Pr(e,n,t)}});function ll(e,t,n){var r=Ra(t),i=br(t,r);null!=n||ta(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=br(t,Ra(t)));var o=!(ta(n)&&"chain"in n&&!n.chain),s=Zs(e);return kt(i,function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Ii(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,jt([this.value()],arguments))})}),e}function cl(){}var ul=$i(Et),dl=$i(Mt),hl=$i(Nt);function pl(e){return xo(e)?Wt(Fo(e)):function(e){return function(t){return wr(t,e)}}(e)}var fl=Ui(),gl=Ui(!0);function ml(){return[]}function vl(){return!1}var yl,xl=Bi(function(e,t){return e+t},0),bl=Vi("ceil"),wl=Bi(function(e,t){return e/t},1),_l=Vi("floor"),Sl=Bi(function(e,t){return e*t},1),kl=Vi("round"),Cl=Bi(function(e,t){return e-t},0);return Fn.after=function(e,n){if("function"!=typeof n)throw new Pe(t);return e=ga(e),function(){if(--e<1)return n.apply(this,arguments)}},Fn.ary=Ps,Fn.assign=ba,Fn.assignIn=wa,Fn.assignInWith=_a,Fn.assignWith=Sa,Fn.at=ka,Fn.before=Ts,Fn.bind=Es,Fn.bindAll=el,Fn.bindKey=js,Fn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return qs(e)?e:[e]},Fn.chain=ps,Fn.chunk=function(t,n,r){n=(r?yo(t,n,r):n===e)?1:mn(ga(n),0);var i=null==t?0:t.length;if(!i||n<1)return[];for(var o=0,s=0,a=be(ft(i/n));o<i;)a[s++]=ti(t,o,o+=n);return a},Fn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Fn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=be(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return jt(qs(n)?Ii(n):[n],gr(t,1))},Fn.cond=function(e){var n=null==e?0:e.length,r=so();return e=n?Et(e,function(e){if("function"!=typeof e[1])throw new Pe(t);return[r(e[0]),e[1]]}):[],Yr(function(t){for(var r=-1;++r<n;){var i=e[r];if(_t(i[0],this,t))return _t(i[1],this,t)}})},Fn.conforms=function(e){return function(e){var t=Ra(e);return function(n){return ar(n,e,t)}}(sr(e,1))},Fn.constant=tl,Fn.countBy=ms,Fn.create=function(e,t){var n=zn(e);return null==t?n:nr(n,t)},Fn.curry=function t(n,r,i){var o=Xi(n,8,e,e,e,e,e,r=i?e:r);return o.placeholder=t.placeholder,o},Fn.curryRight=function t(n,r,i){var o=Xi(n,16,e,e,e,e,e,r=i?e:r);return o.placeholder=t.placeholder,o},Fn.debounce=Rs,Fn.defaults=Ca,Fn.defaultsDeep=Ma,Fn.defer=As,Fn.delay=Ns,Fn.difference=$o,Fn.differenceBy=Wo,Fn.differenceWith=Uo,Fn.drop=function(t,n,r){var i=null==t?0:t.length;return i?ti(t,(n=r||n===e?1:ga(n))<0?0:n,i):[]},Fn.dropRight=function(t,n,r){var i=null==t?0:t.length;return i?ti(t,0,(n=i-(n=r||n===e?1:ga(n)))<0?0:n):[]},Fn.dropRightWhile=function(e,t){return e&&e.length?di(e,so(t,3),!0,!0):[]},Fn.dropWhile=function(e,t){return e&&e.length?di(e,so(t,3),!0):[]},Fn.fill=function(t,n,r,i){var o=null==t?0:t.length;return o?(r&&"number"!=typeof r&&yo(t,n,r)&&(r=0,i=o),function(t,n,r,i){var o=t.length;for((r=ga(r))<0&&(r=-r>o?0:o+r),(i=i===e||i>o?o:ga(i))<0&&(i+=o),i=r>i?0:ma(i);r<i;)t[r++]=n;return t}(t,n,r,i)):[]},Fn.filter=function(e,t){return(qs(e)?It:fr)(e,so(t,3))},Fn.flatMap=function(e,t){return gr(ks(e,t),1)},Fn.flatMapDeep=function(e,t){return gr(ks(e,t),a)},Fn.flatMapDepth=function(t,n,r){return r=r===e?1:ga(r),gr(ks(t,n),r)},Fn.flatten=Vo,Fn.flattenDeep=function(e){return null!=e&&e.length?gr(e,a):[]},Fn.flattenDepth=function(t,n){return null!=t&&t.length?gr(t,n=n===e?1:ga(n)):[]},Fn.flip=function(e){return Xi(e,512)},Fn.flow=nl,Fn.flowRight=rl,Fn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Fn.functions=function(e){return null==e?[]:br(e,Ra(e))},Fn.functionsIn=function(e){return null==e?[]:br(e,Aa(e))},Fn.groupBy=ws,Fn.initial=function(e){return null!=e&&e.length?ti(e,0,-1):[]},Fn.intersection=Yo,Fn.intersectionBy=Xo,Fn.intersectionWith=Ko,Fn.invert=Ta,Fn.invertBy=Ea,Fn.invokeMap=_s,Fn.iteratee=ol,Fn.keyBy=Ss,Fn.keys=Ra,Fn.keysIn=Aa,Fn.map=ks,Fn.mapKeys=function(e,t){var n={};return t=so(t,3),yr(e,function(e,r,i){rr(n,t(e,r,i),e)}),n},Fn.mapValues=function(e,t){var n={};return t=so(t,3),yr(e,function(e,r,i){rr(n,r,t(e,r,i))}),n},Fn.matches=function(e){return Fr(sr(e,1))},Fn.matchesProperty=function(e,t){return zr(e,sr(t,1))},Fn.memoize=Ls,Fn.merge=Na,Fn.mergeWith=La,Fn.method=sl,Fn.methodOf=al,Fn.mixin=ll,Fn.negate=Os,Fn.nthArg=function(e){return e=ga(e),Yr(function(t){return $r(t,e)})},Fn.omit=Oa,Fn.omitBy=function(e,t){return Fa(e,Os(so(t)))},Fn.once=function(e){return Ts(2,e)},Fn.orderBy=function(t,n,r,i){return null==t?[]:(qs(n)||(n=null==n?[]:[n]),qs(r=i?e:r)||(r=null==r?[]:[r]),Wr(t,n,r))},Fn.over=ul,Fn.overArgs=Ds,Fn.overEvery=dl,Fn.overSome=hl,Fn.partial=Fs,Fn.partialRight=zs,Fn.partition=Cs,Fn.pick=Da,Fn.pickBy=Fa,Fn.property=pl,Fn.propertyOf=function(t){return function(n){return null==t?e:wr(t,n)}},Fn.pull=Zo,Fn.pullAll=Jo,Fn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Hr(e,t,so(n,2)):e},Fn.pullAllWith=function(t,n,r){return t&&t.length&&n&&n.length?Hr(t,n,e,r):t},Fn.pullAt=es,Fn.range=fl,Fn.rangeRight=gl,Fn.rearg=Bs,Fn.reject=function(e,t){return(qs(e)?It:fr)(e,Os(so(t,3)))},Fn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=so(t,3);++r<o;){var s=e[r];t(s,r,e)&&(n.push(s),i.push(r))}return qr(e,i),n},Fn.rest=function(n,r){if("function"!=typeof n)throw new Pe(t);return Yr(n,r=r===e?r:ga(r))},Fn.reverse=ts,Fn.sampleSize=function(t,n,r){return n=(r?yo(t,n,r):n===e)?1:ga(n),(qs(t)?Kn:Kr)(t,n)},Fn.set=function(e,t,n){return null==e?e:Qr(e,t,n)},Fn.setWith=function(t,n,r,i){return i="function"==typeof i?i:e,null==t?t:Qr(t,n,r,i)},Fn.shuffle=function(e){return(qs(e)?Qn:ei)(e)},Fn.slice=function(t,n,r){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&yo(t,n,r)?(n=0,r=i):(n=null==n?0:ga(n),r=r===e?i:ga(r)),ti(t,n,r)):[]},Fn.sortBy=Ms,Fn.sortedUniq=function(e){return e&&e.length?oi(e):[]},Fn.sortedUniqBy=function(e,t){return e&&e.length?oi(e,so(t,2)):[]},Fn.split=function(t,n,r){return r&&"number"!=typeof r&&yo(t,n,r)&&(n=r=e),(r=r===e?u:r>>>0)?(t=xa(t))&&("string"==typeof n||null!=n&&!sa(n))&&!(n=ai(n))&&nn(t)?xi(cn(t),0,r):t.split(n,r):[]},Fn.spread=function(e,n){if("function"!=typeof e)throw new Pe(t);return n=null==n?0:mn(ga(n),0),Yr(function(t){var r=t[n],i=xi(t,0,n);return r&&jt(i,r),_t(e,this,i)})},Fn.tail=function(e){var t=null==e?0:e.length;return t?ti(e,1,t):[]},Fn.take=function(t,n,r){return t&&t.length?ti(t,0,(n=r||n===e?1:ga(n))<0?0:n):[]},Fn.takeRight=function(t,n,r){var i=null==t?0:t.length;return i?ti(t,(n=i-(n=r||n===e?1:ga(n)))<0?0:n,i):[]},Fn.takeRightWhile=function(e,t){return e&&e.length?di(e,so(t,3),!1,!0):[]},Fn.takeWhile=function(e,t){return e&&e.length?di(e,so(t,3)):[]},Fn.tap=function(e,t){return t(e),e},Fn.throttle=function(e,n,r){var i=!0,o=!0;if("function"!=typeof e)throw new Pe(t);return ta(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),Rs(e,n,{leading:i,maxWait:n,trailing:o})},Fn.thru=fs,Fn.toArray=pa,Fn.toPairs=za,Fn.toPairsIn=Ba,Fn.toPath=function(e){return qs(e)?Et(e,Fo):ca(e)?[e]:Ii(Do(xa(e)))},Fn.toPlainObject=ya,Fn.transform=function(e,t,n){var r=qs(e),i=r||Xs(e)||ua(e);if(t=so(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:ta(e)&&Zs(o)?zn(qe(e)):{}}return(i?kt:yr)(e,function(e,r,i){return t(n,e,r,i)}),n},Fn.unary=function(e){return Ps(e,1)},Fn.union=ns,Fn.unionBy=rs,Fn.unionWith=is,Fn.uniq=function(e){return e&&e.length?li(e):[]},Fn.uniqBy=function(e,t){return e&&e.length?li(e,so(t,2)):[]},Fn.uniqWith=function(t,n){return n="function"==typeof n?n:e,t&&t.length?li(t,e,n):[]},Fn.unset=function(e,t){return null==e||ci(e,t)},Fn.unzip=os,Fn.unzipWith=ss,Fn.update=function(e,t,n){return null==e?e:ui(e,t,mi(n))},Fn.updateWith=function(t,n,r,i){return i="function"==typeof i?i:e,null==t?t:ui(t,n,mi(r),i)},Fn.values=$a,Fn.valuesIn=function(e){return null==e?[]:Xt(e,Aa(e))},Fn.without=as,Fn.words=Za,Fn.wrap=function(e,t){return Fs(mi(t),e)},Fn.xor=ls,Fn.xorBy=cs,Fn.xorWith=us,Fn.zip=ds,Fn.zipObject=function(e,t){return fi(e||[],t||[],Jn)},Fn.zipObjectDeep=function(e,t){return fi(e||[],t||[],Qr)},Fn.zipWith=hs,Fn.entries=za,Fn.entriesIn=Ba,Fn.extend=wa,Fn.extendWith=_a,ll(Fn,Fn),Fn.add=xl,Fn.attempt=Ja,Fn.camelCase=Wa,Fn.capitalize=Ua,Fn.ceil=bl,Fn.clamp=function(t,n,r){return r===e&&(r=n,n=e),r!==e&&(r=(r=va(r))==r?r:0),n!==e&&(n=(n=va(n))==n?n:0),or(va(t),n,r)},Fn.clone=function(e){return sr(e,4)},Fn.cloneDeep=function(e){return sr(e,5)},Fn.cloneDeepWith=function(t,n){return sr(t,5,n="function"==typeof n?n:e)},Fn.cloneWith=function(t,n){return sr(t,4,n="function"==typeof n?n:e)},Fn.conformsTo=function(e,t){return null==t||ar(e,t,Ra(t))},Fn.deburr=Ha,Fn.defaultTo=function(e,t){return null==e||e!=e?t:e},Fn.divide=wl,Fn.endsWith=function(t,n,r){t=xa(t),n=ai(n);var i=t.length,o=r=r===e?i:or(ga(r),0,i);return(r-=n.length)>=0&&t.slice(r,o)==n},Fn.eq=$s,Fn.escape=function(e){return(e=xa(e))&&q.test(e)?e.replace(U,en):e},Fn.escapeRegExp=function(e){return(e=xa(e))&&J.test(e)?e.replace(Z,"\\$&"):e},Fn.every=function(t,n,r){var i=qs(t)?Mt:hr;return r&&yo(t,n,r)&&(n=e),i(t,so(n,3))},Fn.find=vs,Fn.findIndex=Ho,Fn.findKey=function(e,t){return Ot(e,so(t,3),yr)},Fn.findLast=ys,Fn.findLastIndex=qo,Fn.findLastKey=function(e,t){return Ot(e,so(t,3),xr)},Fn.floor=_l,Fn.forEach=xs,Fn.forEachRight=bs,Fn.forIn=function(e,t){return null==e?e:mr(e,so(t,3),Aa)},Fn.forInRight=function(e,t){return null==e?e:vr(e,so(t,3),Aa)},Fn.forOwn=function(e,t){return e&&yr(e,so(t,3))},Fn.forOwnRight=function(e,t){return e&&xr(e,so(t,3))},Fn.get=Ia,Fn.gt=Ws,Fn.gte=Us,Fn.has=function(e,t){return null!=e&&fo(e,t,Cr)},Fn.hasIn=Pa,Fn.head=Go,Fn.identity=il,Fn.includes=function(e,t,n,r){e=Gs(e)?e:$a(e),n=n&&!r?ga(n):0;var i=e.length;return n<0&&(n=mn(i+n,0)),la(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Ft(e,t,n)>-1},Fn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ga(n);return i<0&&(i=mn(r+i,0)),Ft(e,t,i)},Fn.inRange=function(t,n,r){return n=fa(n),r===e?(r=n,n=0):r=fa(r),function(e,t,n){return e>=vn(t,n)&&e<mn(t,n)}(t=va(t),n,r)},Fn.invoke=ja,Fn.isArguments=Hs,Fn.isArray=qs,Fn.isArrayBuffer=Vs,Fn.isArrayLike=Gs,Fn.isArrayLikeObject=Ys,Fn.isBoolean=function(e){return!0===e||!1===e||na(e)&&Sr(e)==f},Fn.isBuffer=Xs,Fn.isDate=Ks,Fn.isElement=function(e){return na(e)&&1===e.nodeType&&!oa(e)},Fn.isEmpty=function(e){if(null==e)return!0;if(Gs(e)&&(qs(e)||"string"==typeof e||"function"==typeof e.splice||Xs(e)||ua(e)||Hs(e)))return!e.length;var t=po(e);if(t==x||t==k)return!e.size;if(_o(e))return!Nr(e).length;for(var n in e)if(Ne.call(e,n))return!1;return!0},Fn.isEqual=function(e,t){return Er(e,t)},Fn.isEqualWith=function(t,n,r){var i=(r="function"==typeof r?r:e)?r(t,n):e;return i===e?Er(t,n,e,r):!!i},Fn.isError=Qs,Fn.isFinite=function(e){return"number"==typeof e&&pn(e)},Fn.isFunction=Zs,Fn.isInteger=Js,Fn.isLength=ea,Fn.isMap=ra,Fn.isMatch=function(e,t){return e===t||jr(e,t,lo(t))},Fn.isMatchWith=function(t,n,r){return r="function"==typeof r?r:e,jr(t,n,lo(n),r)},Fn.isNaN=function(e){return ia(e)&&e!=+e},Fn.isNative=function(e){if(wo(e))throw new _e("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Rr(e)},Fn.isNil=function(e){return null==e},Fn.isNull=function(e){return null===e},Fn.isNumber=ia,Fn.isObject=ta,Fn.isObjectLike=na,Fn.isPlainObject=oa,Fn.isRegExp=sa,Fn.isSafeInteger=function(e){return Js(e)&&e>=-9007199254740991&&e<=l},Fn.isSet=aa,Fn.isString=la,Fn.isSymbol=ca,Fn.isTypedArray=ua,Fn.isUndefined=function(t){return t===e},Fn.isWeakMap=function(e){return na(e)&&po(e)==I},Fn.isWeakSet=function(e){return na(e)&&"[object WeakSet]"==Sr(e)},Fn.join=function(e,t){return null==e?"":fn.call(e,t)},Fn.kebabCase=qa,Fn.last=Qo,Fn.lastIndexOf=function(t,n,r){var i=null==t?0:t.length;if(!i)return-1;var o=i;return r!==e&&(o=(o=ga(r))<0?mn(i+o,0):vn(o,i-1)),n==n?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(t,n,o):Dt(t,Bt,o,!0)},Fn.lowerCase=Va,Fn.lowerFirst=Ga,Fn.lt=da,Fn.lte=ha,Fn.max=function(t){return t&&t.length?pr(t,il,kr):e},Fn.maxBy=function(t,n){return t&&t.length?pr(t,so(n,2),kr):e},Fn.mean=function(e){return $t(e,il)},Fn.meanBy=function(e,t){return $t(e,so(t,2))},Fn.min=function(t){return t&&t.length?pr(t,il,Or):e},Fn.minBy=function(t,n){return t&&t.length?pr(t,so(n,2),Or):e},Fn.stubArray=ml,Fn.stubFalse=vl,Fn.stubObject=function(){return{}},Fn.stubString=function(){return""},Fn.stubTrue=function(){return!0},Fn.multiply=Sl,Fn.nth=function(t,n){return t&&t.length?$r(t,ga(n)):e},Fn.noConflict=function(){return ct._===this&&(ct._=ze),this},Fn.noop=cl,Fn.now=Is,Fn.pad=function(e,t,n){e=xa(e);var r=(t=ga(t))?ln(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Wi(bt(i),n)+e+Wi(ft(i),n)},Fn.padEnd=function(e,t,n){e=xa(e);var r=(t=ga(t))?ln(e):0;return t&&r<t?e+Wi(t-r,n):e},Fn.padStart=function(e,t,n){e=xa(e);var r=(t=ga(t))?ln(e):0;return t&&r<t?Wi(t-r,n)+e:e},Fn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),xn(xa(e).replace(ee,""),t||0)},Fn.random=function(t,n,r){if(r&&"boolean"!=typeof r&&yo(t,n,r)&&(n=r=e),r===e&&("boolean"==typeof n?(r=n,n=e):"boolean"==typeof t&&(r=t,t=e)),t===e&&n===e?(t=0,n=1):(t=fa(t),n===e?(n=t,t=0):n=fa(n)),t>n){var i=t;t=n,n=i}if(r||t%1||n%1){var o=bn();return vn(t+o*(n-t+ot("1e-"+((o+"").length-1))),n)}return Vr(t,n)},Fn.reduce=function(e,t,n){var r=qs(e)?Rt:Ht,i=arguments.length<3;return r(e,so(t,4),n,i,ur)},Fn.reduceRight=function(e,t,n){var r=qs(e)?At:Ht,i=arguments.length<3;return r(e,so(t,4),n,i,dr)},Fn.repeat=function(t,n,r){return n=(r?yo(t,n,r):n===e)?1:ga(n),Gr(xa(t),n)},Fn.replace=function(){var e=arguments,t=xa(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Fn.result=function(t,n,r){var i=-1,o=(n=vi(n,t)).length;for(o||(o=1,t=e);++i<o;){var s=null==t?e:t[Fo(n[i])];s===e&&(i=o,s=r),t=Zs(s)?s.call(t):s}return t},Fn.round=kl,Fn.runInContext=te,Fn.sample=function(e){return(qs(e)?Xn:Xr)(e)},Fn.size=function(e){if(null==e)return 0;if(Gs(e))return la(e)?ln(e):e.length;var t=po(e);return t==x||t==k?e.size:Nr(e).length},Fn.snakeCase=Ya,Fn.some=function(t,n,r){var i=qs(t)?Nt:ni;return r&&yo(t,n,r)&&(n=e),i(t,so(n,3))},Fn.sortedIndex=function(e,t){return ri(e,t)},Fn.sortedIndexBy=function(e,t,n){return ii(e,t,so(n,2))},Fn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ri(e,t);if(r<n&&$s(e[r],t))return r}return-1},Fn.sortedLastIndex=function(e,t){return ri(e,t,!0)},Fn.sortedLastIndexBy=function(e,t,n){return ii(e,t,so(n,2),!0)},Fn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=ri(e,t,!0)-1;if($s(e[n],t))return n}return-1},Fn.startCase=Xa,Fn.startsWith=function(e,t,n){return e=xa(e),n=null==n?0:or(ga(n),0,e.length),t=ai(t),e.slice(n,n+t.length)==t},Fn.subtract=Cl,Fn.sum=function(e){return e&&e.length?qt(e,il):0},Fn.sumBy=function(e,t){return e&&e.length?qt(e,so(t,2)):0},Fn.template=function(t,n,r){var i=Fn.templateSettings;r&&yo(t,n,r)&&(n=e),t=xa(t),n=_a({},n,i,Ki);var o,s,a=_a({},n.imports,i.imports,Ki),l=Ra(a),c=Xt(a,l),u=0,d=n.interpolate||me,h="__p += '",p=Me((n.escape||me).source+"|"+d.source+"|"+(d===Y?le:me).source+"|"+(n.evaluate||me).source+"|$","g"),f="//# sourceURL="+(Ne.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tt+"]")+"\n";t.replace(p,function(e,n,r,i,a,l){return r||(r=i),h+=t.slice(u,l).replace(ve,tn),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),a&&(s=!0,h+="';\n"+a+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+e.length,e}),h+="';\n";var g=Ne.call(n,"variable")&&n.variable;if(g){if(se.test(g))throw new _e("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(s?h.replace(z,""):h).replace(B,"$1").replace($,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=Ja(function(){return Se(l,f+"return "+h).apply(e,c)});if(m.source=h,Qs(m))throw m;return m},Fn.times=function(e,t){if((e=ga(e))<1||e>l)return[];var n=u,r=vn(e,u);t=so(t),e-=u;for(var i=Vt(r,t);++n<e;)t(n);return i},Fn.toFinite=fa,Fn.toInteger=ga,Fn.toLength=ma,Fn.toLower=function(e){return xa(e).toLowerCase()},Fn.toNumber=va,Fn.toSafeInteger=function(e){return e?or(ga(e),-9007199254740991,l):0===e?e:0},Fn.toString=xa,Fn.toUpper=function(e){return xa(e).toUpperCase()},Fn.trim=function(t,n,r){if((t=xa(t))&&(r||n===e))return Gt(t);if(!t||!(n=ai(n)))return t;var i=cn(t),o=cn(n);return xi(i,Qt(i,o),Zt(i,o)+1).join("")},Fn.trimEnd=function(t,n,r){if((t=xa(t))&&(r||n===e))return t.slice(0,un(t)+1);if(!t||!(n=ai(n)))return t;var i=cn(t);return xi(i,0,Zt(i,cn(n))+1).join("")},Fn.trimStart=function(t,n,r){if((t=xa(t))&&(r||n===e))return t.replace(ee,"");if(!t||!(n=ai(n)))return t;var i=cn(t);return xi(i,Qt(i,cn(n))).join("")},Fn.truncate=function(t,n){var r=30,i="...";if(ta(n)){var o="separator"in n?n.separator:o;r="length"in n?ga(n.length):r,i="omission"in n?ai(n.omission):i}var s=(t=xa(t)).length;if(nn(t)){var a=cn(t);s=a.length}if(r>=s)return t;var l=r-ln(i);if(l<1)return i;var c=a?xi(a,0,l).join(""):t.slice(0,l);if(o===e)return c+i;if(a&&(l+=c.length-l),sa(o)){if(t.slice(l).search(o)){var u,d=c;for(o.global||(o=Me(o.source,xa(ce.exec(o))+"g")),o.lastIndex=0;u=o.exec(d);)var h=u.index;c=c.slice(0,h===e?l:h)}}else if(t.indexOf(ai(o),l)!=l){var p=c.lastIndexOf(o);p>-1&&(c=c.slice(0,p))}return c+i},Fn.unescape=function(e){return(e=xa(e))&&H.test(e)?e.replace(W,dn):e},Fn.uniqueId=function(e){var t=++Le;return xa(e)+t},Fn.upperCase=Ka,Fn.upperFirst=Qa,Fn.each=xs,Fn.eachRight=bs,Fn.first=Go,ll(Fn,(yl={},yr(Fn,function(e,t){Ne.call(Fn.prototype,t)||(yl[t]=e)}),yl),{chain:!1}),Fn.VERSION="4.17.21",kt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Fn[e].placeholder=Fn}),kt(["drop","take"],function(t,n){Wn.prototype[t]=function(r){r=r===e?1:mn(ga(r),0);var i=this.__filtered__&&!n?new Wn(this):this.clone();return i.__filtered__?i.__takeCount__=vn(r,i.__takeCount__):i.__views__.push({size:vn(r,u),type:t+(i.__dir__<0?"Right":"")}),i},Wn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),kt(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;Wn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:so(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),kt(["head","last"],function(e,t){var n="take"+(t?"Right":"");Wn.prototype[e]=function(){return this[n](1).value()[0]}}),kt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Wn.prototype[e]=function(){return this.__filtered__?new Wn(this):this[n](1)}}),Wn.prototype.compact=function(){return this.filter(il)},Wn.prototype.find=function(e){return this.filter(e).head()},Wn.prototype.findLast=function(e){return this.reverse().find(e)},Wn.prototype.invokeMap=Yr(function(e,t){return"function"==typeof e?new Wn(this):this.map(function(n){return Pr(n,e,t)})}),Wn.prototype.reject=function(e){return this.filter(Os(so(e)))},Wn.prototype.slice=function(t,n){t=ga(t);var r=this;return r.__filtered__&&(t>0||n<0)?new Wn(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),n!==e&&(r=(n=ga(n))<0?r.dropRight(-n):r.take(n-t)),r)},Wn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Wn.prototype.toArray=function(){return this.take(u)},yr(Wn.prototype,function(t,n){var r=/^(?:filter|find|map|reject)|While$/.test(n),i=/^(?:head|last)$/.test(n),o=Fn[i?"take"+("last"==n?"Right":""):n],s=i||/^find/.test(n);o&&(Fn.prototype[n]=function(){var n=this.__wrapped__,a=i?[1]:arguments,l=n instanceof Wn,c=a[0],u=l||qs(n),d=function(e){var t=o.apply(Fn,jt([e],a));return i&&h?t[0]:t};u&&r&&"function"==typeof c&&1!=c.length&&(l=u=!1);var h=this.__chain__,p=!!this.__actions__.length,f=s&&!h,g=l&&!p;if(!s&&u){n=g?n:new Wn(this);var m=t.apply(n,a);return m.__actions__.push({func:fs,args:[d],thisArg:e}),new $n(m,h)}return f&&g?t.apply(this,a):(m=this.thru(d),f?i?m.value()[0]:m.value():m)})}),kt(["pop","push","shift","sort","splice","unshift"],function(e){var t=Te[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Fn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(qs(i)?i:[],e)}return this[n](function(n){return t.apply(qs(n)?n:[],e)})}}),yr(Wn.prototype,function(e,t){var n=Fn[t];if(n){var r=n.name+"";Ne.call(Tn,r)||(Tn[r]=[]),Tn[r].push({name:t,func:n})}}),Tn[Fi(e,2).name]=[{name:"wrapper",func:e}],Wn.prototype.clone=function(){var e=new Wn(this.__wrapped__);return e.__actions__=Ii(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ii(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ii(this.__views__),e},Wn.prototype.reverse=function(){if(this.__filtered__){var e=new Wn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Wn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=qs(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=vn(t,e+s);break;case"takeRight":e=mn(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=o.start,a=o.end,l=a-s,c=r?a:s-1,u=this.__iteratees__,d=u.length,h=0,p=vn(l,this.__takeCount__);if(!n||!r&&i==l&&p==l)return hi(e,this.__actions__);var f=[];e:for(;l--&&h<p;){for(var g=-1,m=e[c+=t];++g<d;){var v=u[g],y=v.iteratee,x=v.type,b=y(m);if(2==x)m=b;else if(!b){if(1==x)continue e;break e}}f[h++]=m}return f},Fn.prototype.at=gs,Fn.prototype.chain=function(){return ps(this)},Fn.prototype.commit=function(){return new $n(this.value(),this.__chain__)},Fn.prototype.next=function(){this.__values__===e&&(this.__values__=pa(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?e:this.__values__[this.__index__++]}},Fn.prototype.plant=function(t){for(var n,r=this;r instanceof Bn;){var i=Bo(r);i.__index__=0,i.__values__=e,n?o.__wrapped__=i:n=i;var o=i;r=r.__wrapped__}return o.__wrapped__=t,n},Fn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Wn){var n=t;return this.__actions__.length&&(n=new Wn(this)),(n=n.reverse()).__actions__.push({func:fs,args:[ts],thisArg:e}),new $n(n,this.__chain__)}return this.thru(ts)},Fn.prototype.toJSON=Fn.prototype.valueOf=Fn.prototype.value=function(){return hi(this.__wrapped__,this.__actions__)},Fn.prototype.first=Fn.prototype.head,it&&(Fn.prototype[it]=function(){return this}),Fn}();dt?((dt.exports=hn)._=hn,ut._=hn):ct._=hn}.call(ar.exports)),ar.exports);const dr="jwt_token",hr={getToken:()=>localStorage.getItem(dr),setToken:e=>{localStorage.setItem(dr,e)},removeToken:()=>{localStorage.removeItem(dr)},hasToken:()=>!!localStorage.getItem(dr)};class pr extends Bt{ws=null;_status="disconnected";config=null;get status(){return this._status}get session(){return this.ws?{}:null}getConfig(){return{...this.config}}constructor(){super(),this.send=this.send.bind(this)}log(e,t){const n={date:new Date,type:e,message:t};this.emit("log",n)}async connect(e){if("connected"===this._status||"connecting"===this._status)return!1;this._status="connecting",this.config=e;const t=hr.getToken();if(!t){this._status="disconnected";const e=new ErrorEvent("error",{message:"Authentication required"});return this.emit("error",e),!1}const n=`ws://localhost:8767?token=${encodeURIComponent(t)}`;return this.ws=new WebSocket(n),this.ws.onopen=()=>{this.ws.send(JSON.stringify({type:"connect",config:e}))},this.ws.onmessage=e=>{try{const t=JSON.parse(e.data);if("open"===t.type)this._status="connected",this.log("client.open","Connected"),this.emit("open");else if("close"===t.type){this._status="disconnected";const e=new CloseEvent("close",{reason:t.reason});this.log("server.close","disconnected "+(t.reason?`with reason: ${t.reason}`:"")),this.emit("close",e)}else if("error"===t.type){const e=new ErrorEvent("error",{message:t.error});this.log("server.error",t.error),this.emit("error",e)}else"message"===t.type&&this.processGeminiMessage(t.data)}catch(t){}},this.ws.onerror=e=>{this._status="disconnected"},this.ws.onclose=()=>{"disconnected"!==this._status&&(this._status="disconnected",this.emit("close",new CloseEvent("close")))},!0}processGeminiMessage(e){if(e.setupComplete)return this.log("server.send","setupComplete"),void this.emit("setupcomplete");if(e.toolCall)return this.log("server.toolCall",e),void this.emit("toolcall",e.toolCall);if(e.toolCallCancellation)return this.log("server.toolCallCancellation",e),void this.emit("toolcallcancellation",e.toolCallCancellation);if(e.serverContent){const{serverContent:t}=e;if("interrupted"in t)return this.log("server.content","interrupted"),void this.emit("interrupted");if("turnComplete"in t&&(this.log("server.content","turnComplete"),this.emit("turncomplete")),"modelTurn"in t){let n=t.modelTurn?.parts||[];const r=n.filter(e=>e.inlineData&&e.inlineData.mimeType?.startsWith("audio/pcm")),i=r.map(e=>e.inlineData?.data),o=ur.difference(n,r);if(i.forEach(e=>{if(e){const t=function(e){var t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer}(e);this.emit("audio",t),this.log("server.audio",`buffer (${t.byteLength})`)}}),!o.length)return;n=o;const s={modelTurn:{parts:n}};this.emit("content",s),this.log("server.content",e)}}}disconnect(){return!!this.ws&&(this.ws.send(JSON.stringify({type:"disconnect"})),this.ws.close(),this.ws=null,this._status="disconnected",this.log("client.close","Disconnected"),!0)}sendRealtimeInput(e){if(!this.ws||"connected"!==this._status)return;let t=!1,n=!1;for(const i of e)if(this.ws.send(JSON.stringify({type:"realtimeInput",data:i})),i.mimeType.includes("audio")&&(t=!0),i.mimeType.includes("image")&&(n=!0),t&&n)break;const r=t&&n?"audio + video":t?"audio":n?"video":"unknown";this.log("client.realtimeInput",r)}sendToolResponse(e){this.ws&&"connected"===this._status&&e.functionResponses&&e.functionResponses.length&&(this.ws.send(JSON.stringify({type:"toolResponse",data:e})),this.log("client.toolResponse",e))}send(e,t=!0){this.ws&&"connected"===this._status&&(this.ws.send(JSON.stringify({type:"send",parts:Array.isArray(e)?e:[e],turnComplete:t})),this.log("client.send",{turns:Array.isArray(e)?e:[e],turnComplete:t}))}}const fr=new Map,gr=(e,t)=>{const n=new Blob([`registerProcessor("${e}", ${t})`],{type:"application/javascript"});return URL.createObjectURL(n)};class mr{constructor(e){this.context=e,this.gainNode=this.context.createGain(),this.source=this.context.createBufferSource(),this.gainNode.connect(this.context.destination),this.addPCM16=this.addPCM16.bind(this)}sampleRate=24e3;bufferSize=7680;audioQueue=[];isPlaying=!1;isStreamComplete=!1;checkInterval=null;scheduledTime=0;initialBufferTime=.1;gainNode;source;endOfQueueAudioSource=null;onComplete=()=>{};async addWorklet(e,t,n){let r=fr.get(this.context);if(r&&r[e])return r[e].handlers.push(n),Promise.resolve(this);r||(fr.set(this.context,{}),r=fr.get(this.context)),r[e]={handlers:[n]};const i=gr(e,t);await this.context.audioWorklet.addModule(i);const o=new AudioWorkletNode(this.context,e);return r[e].node=o,this}_processPCM16Chunk(e){const t=new Float32Array(e.length/2),n=new DataView(e.buffer);for(let i=0;i<e.length/2;i++)try{const e=n.getInt16(2*i,!0);t[i]=e/32768}catch(r){}return t}addPCM16(e){this.isStreamComplete=!1;let t=this._processPCM16Chunk(e);for(;t.length>=this.bufferSize;){const e=t.slice(0,this.bufferSize);this.audioQueue.push(e),t=t.slice(this.bufferSize)}t.length>0&&this.audioQueue.push(t),this.isPlaying||(this.isPlaying=!0,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.scheduleNextBuffer())}createAudioBuffer(e){const t=this.context.createBuffer(1,e.length,this.sampleRate);return t.getChannelData(0).set(e),t}scheduleNextBuffer(){for(;this.audioQueue.length>0&&this.scheduledTime<this.context.currentTime+.2;){const e=this.audioQueue.shift(),t=this.createAudioBuffer(e),n=this.context.createBufferSource();0===this.audioQueue.length&&(this.endOfQueueAudioSource&&(this.endOfQueueAudioSource.onended=null),this.endOfQueueAudioSource=n,n.onended=()=>{this.audioQueue.length||this.endOfQueueAudioSource!==n||(this.endOfQueueAudioSource=null,this.onComplete())}),n.buffer=t,n.connect(this.gainNode);const r=fr.get(this.context);r&&Object.entries(r).forEach(([e,t])=>{const{node:r,handlers:i}=t;r&&(n.connect(r),r.port.onmessage=function(e){i.forEach(t=>{t.call(r.port,e)})},r.connect(this.context.destination))});const i=Math.max(this.scheduledTime,this.context.currentTime);n.start(i),this.scheduledTime=i+t.duration}if(0===this.audioQueue.length)this.isStreamComplete?(this.isPlaying=!1,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)):this.checkInterval||(this.checkInterval=window.setInterval(()=>{this.audioQueue.length>0&&this.scheduleNextBuffer()},100));else{const e=1e3*(this.scheduledTime-this.context.currentTime);setTimeout(()=>this.scheduleNextBuffer(),Math.max(0,e-50))}}stop(){this.isPlaying=!1,this.isStreamComplete=!0,this.audioQueue=[],this.scheduledTime=this.context.currentTime,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.gainNode.gain.linearRampToValueAtTime(0,this.context.currentTime+.1),setTimeout(()=>{this.gainNode.disconnect(),this.gainNode=this.context.createGain(),this.gainNode.connect(this.context.destination)},200)}async resume(){"suspended"===this.context.state&&await this.context.resume(),this.isStreamComplete=!1,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.gainNode.gain.setValueAtTime(1,this.context.currentTime)}complete(){this.isStreamComplete=!0,this.onComplete()}}const vr="\n  class VolMeter extends AudioWorkletProcessor {\n    volume\n    updateIntervalInMS\n    nextUpdateFrame\n\n    constructor() {\n      super()\n      this.volume = 0\n      this.updateIntervalInMS = 25\n      this.nextUpdateFrame = this.updateIntervalInMS\n      this.port.onmessage = event => {\n        if (event.data.updateIntervalInMS) {\n          this.updateIntervalInMS = event.data.updateIntervalInMS\n        }\n      }\n    }\n\n    get intervalInFrames() {\n      return (this.updateIntervalInMS / 1000) * sampleRate\n    }\n\n    process(inputs) {\n      const input = inputs[0]\n\n      if (input.length > 0) {\n        const samples = input[0]\n        let sum = 0\n        let rms = 0\n\n        for (let i = 0; i < samples.length; ++i) {\n          sum += samples[i] * samples[i]\n        }\n\n        rms = Math.sqrt(sum / samples.length)\n        this.volume = Math.max(rms, this.volume * 0.7)\n\n        this.nextUpdateFrame -= samples.length\n        if (this.nextUpdateFrame < 0) {\n          this.nextUpdateFrame += this.intervalInFrames\n          this.port.postMessage({volume: this.volume})\n        }\n      }\n\n      return true\n    }\n  }";const yr=wt.createContext(void 0),xr=({children:t})=>{const n=function(){const e=wt.useMemo(()=>new pr,[]),t=wt.useRef(null),[n,r]=wt.useState({}),[i,o]=wt.useState(!1),[s,a]=wt.useState(0);wt.useEffect(()=>{t.current||or({id:"audio-out"}).then(e=>{t.current=new mr(e);let n=0;t.current.addWorklet("vumeter-out",vr,e=>{const t=Date.now();t-n>=100&&(a(e.data.volume),n=t)}).then(()=>{})})},[t]),wt.useEffect(()=>{const n=()=>{o(!0)},r=()=>{o(!1)},i=e=>{},s=()=>t.current?.stop(),a=e=>t.current?.addPCM16(new Uint8Array(e));return e.on("error",i).on("open",n).on("close",r).on("interrupted",s).on("audio",a),()=>{e.off("error",i).off("open",n).off("close",r).off("interrupted",s).off("audio",a).disconnect()}},[e]);const l=wt.useCallback(async()=>{if(!n)throw new Error("config has not been set");e.disconnect(),await e.connect(n)},[e,n]),c=wt.useCallback(async()=>{e.disconnect(),o(!1)},[o,e]),u=wt.useCallback(()=>{t.current?.stop()},[]);return{client:e,config:n,setConfig:r,connected:i,connect:l,disconnect:c,interruptAudio:u,volume:s}}();return e.jsx(yr.Provider,{value:n,children:t})},br=()=>{const e=wt.useContext(yr);if(!e)throw new Error("useLiveAPIContext must be used wihin a LiveAPIProvider");return e};let wr=null;const _r={async fetch(e,t={}){const n=await fetch(e,t);if(401===n.status){if(wr)try{await wr.logout()}catch(r){}hr.removeToken()}return n},async get(e,t={}){return this.fetch(e,{...t,method:"GET"})},async post(e,t,n={}){const r={"Content-Type":"application/json",...n.headers};return this.fetch(e,{...n,method:"POST",headers:r,body:t?JSON.stringify(t):void 0})},async put(e,t,n={}){const r={"Content-Type":"application/json",...n.headers};return this.fetch(e,{...n,method:"PUT",headers:r,body:t?JSON.stringify(t):void 0})},async delete(e,t={}){return this.fetch(e,{...t,method:"DELETE"})}},Sr="http://localhost:8003";const kr=new class{async getGoogleAuthUrl(){const e=await fetch(`${Sr}/auth/google`);if(!e.ok)throw new Error("Failed to get Google auth URL");return e.json()}async completeSetup(e,t,n){const r=await fetch(`${Sr}/auth/complete-setup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({setup_token:e,user_type:t,age:n})});if(!r.ok){const e=await r.json();throw new Error(e.detail||"Setup failed")}return r.json()}async getCurrentUser(e){const t=await _r.fetch(`${Sr}/auth/me`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to get current user");return t.json()}async logout(){const e=localStorage.getItem("jwt_token");if(e)try{await _r.fetch(`${Sr}/auth/logout`,{method:"POST",headers:{Authorization:`Bearer ${e}`}})}catch(t){}}},Cr=wt.createContext(void 0),Mr=()=>{const e=wt.useContext(Cr);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Ir=({children:t})=>{const[n,r]=wt.useState(null),[i,o]=wt.useState(!0),s=async()=>{await kr.logout(),hr.removeToken(),r(null)},a=async()=>{const e=hr.getToken();if(!e)return r(null),void o(!1);try{const t=await kr.getCurrentUser(e);r(t)}catch(t){hr.removeToken(),r(null)}finally{o(!1)}};wt.useEffect(()=>{hr.getToken()?a():o(!1)},[]),wt.useEffect(()=>{wr={logout:s}},[s]);const l={user:n,isAuthenticated:!!n,isLoading:i,login:(e,t)=>{hr.setToken(e),r(t)},logout:s,refreshUser:a};return e.jsx(Cr.Provider,{value:l,children:t})},Pr=({children:t})=>{const{isAuthenticated:n,isLoading:r}=Mr();return r?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#FFFDF5"},children:e.jsx("div",{style:{padding:"24px 32px",border:"4px solid #000000",background:"#FFFDF5",boxShadow:"8px 8px 0px 0px #000000",fontSize:"18px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.05em",color:"#000000"},children:"Loading..."})}):n?e.jsx(e.Fragment,{children:t}):e.jsx(_t,{to:"/login"})};var Tr={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Er=St.createContext&&St.createContext(Tr),jr=["attr","size","title"];function Rr(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ar(){return Ar=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ar.apply(this,arguments)}function Nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Lr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nr(Object(n),!0).forEach(function(t){Or(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Or(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dr(e){return e&&e.map((e,t)=>St.createElement(e.tag,Lr({key:t},e.attr),Dr(e.child)))}function Fr(e){return t=>St.createElement(zr,Ar({attr:Lr({},e.attr)},t),Dr(e.child))}function zr(e){var t=t=>{var n,{attr:r,size:i,title:o}=e,s=Rr(e,jr),a=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),St.createElement("svg",Ar({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,s,{className:n,style:Lr(Lr({color:e.color||t.color},t.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&St.createElement("title",null,o),e.children)};return void 0!==Er?St.createElement(Er.Consumer,null,e=>t(e)):t(Tr)}function Br(e){return Fr({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 5H13V19H5V5ZM19 19H15V5H19V19ZM4 3C3.44772 3 3 3.44772 3 4V20C3 20.5523 3.44772 21 4 21H20C20.5523 21 21 20.5523 21 20V4C21 3.44772 20.5523 3 20 3H4ZM7 12L11 8.5V15.5L7 12Z"},child:[]}]})(e)}function $r(e){return Fr({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 5H13V19H5V5ZM19 19H15V5H19V19ZM4 3C3.44772 3 3 3.44772 3 4V20C3 20.5523 3.44772 21 4 21H20C20.5523 21 21 20.5523 21 20V4C21 3.44772 20.5523 3 20 3H4ZM11 12L7 8.5V15.5L11 12Z"},child:[]}]})(e)}function Wr(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function Ur(...e){return t=>{let n=!1;const r=e.map(e=>{const r=Wr(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){const n=r[t];"function"==typeof n?n():Wr(e[t],null)}}}}function Hr(...e){return wt.useCallback(Ur(...e),e)}var qr=Symbol.for("react.lazy"),Vr=kt[" use ".trim().toString()];function Gr(e){return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===qr&&"_payload"in e&&("object"==typeof(t=e._payload)&&null!==t&&"then"in t);var t}function Yr(t){const n=Kr(t),r=wt.forwardRef((t,r)=>{let{children:i,...o}=t;Gr(i)&&"function"==typeof Vr&&(i=Vr(i._payload));const s=wt.Children.toArray(i),a=s.find(Zr);if(a){const t=a.props.children,i=s.map(e=>e===a?wt.Children.count(t)>1?wt.Children.only(null):wt.isValidElement(t)?t.props.children:null:e);return e.jsx(n,{...o,ref:r,children:wt.isValidElement(t)?wt.cloneElement(t,void 0,i):null})}return e.jsx(n,{...o,ref:r,children:i})});return r.displayName=`${t}.Slot`,r}var Xr=Yr("Slot");function Kr(e){const t=wt.forwardRef((e,t)=>{let{children:n,...r}=e;if(Gr(n)&&"function"==typeof Vr&&(n=Vr(n._payload)),wt.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),i=function(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...e)=>{const t=o(...e);return i(...e),t}:i&&(n[r]=i):"style"===r?n[r]={...i,...o}:"className"===r&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==wt.Fragment&&(i.ref=t?Ur(t,e):e),wt.cloneElement(n,i)}return wt.Children.count(n)>1?wt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Qr=Symbol("radix.slottable");function Zr(e){return wt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Qr}const Jr=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,ei=nr,ti=(e,t)=>n=>{var r;if(null==(null==t?void 0:t.variants))return ei(e,null==n?void 0:n.class,null==n?void 0:n.className);const{variants:i,defaultVariants:o}=t,s=Object.keys(i).map(e=>{const t=null==n?void 0:n[e],r=null==o?void 0:o[e];if(null===t)return null;const s=Jr(t)||Jr(r);return i[e][s]}),a=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{}),l=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r,...i}=t;return Object.entries(i).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...o,...a}[t]):{...o,...a}[t]===n})?[...e,n,r]:e},[]);return ei(e,s,l,null==n?void 0:n.class,null==n?void 0:n.className)},ni=ti("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),ri=wt.forwardRef(({className:t,variant:n,size:r,asChild:i=!1,...o},s)=>{const a=i?Xr:"button";return e.jsx(a,{className:rr(ni({variant:n,size:r,className:t})),ref:s,...o})});ri.displayName="Button";const ii=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},oi=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),si=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var ai={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const li=wt.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...a},l)=>wt.createElement("svg",{ref:l,...ai,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:oi("lucide",i),...!o&&!si(a)&&{"aria-hidden":"true"},...a},[...s.map(([e,t])=>wt.createElement(e,t)),...Array.isArray(o)?o:[o]])),ci=(e,t)=>{const n=wt.forwardRef(({className:n,...r},i)=>{return wt.createElement(li,{ref:i,iconNode:t,className:oi(`lucide-${o=ii(e),o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...r});var o});return n.displayName=ii(e),n},ui=ci("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),di=ci("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),hi=ci("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),pi=ci("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),fi=ci("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),gi=ci("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),mi=ci("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),vi=ci("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),yi=ci("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),xi=ci("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),bi=ci("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),wi=wt.createContext({theme:"system",setTheme:()=>null});function _i({children:t,defaultTheme:n="system",storageKey:r="ai-tutor-theme",...i}){const[o,s]=wt.useState(()=>localStorage.getItem(r)||n);wt.useEffect(()=>{const e=window.document.documentElement;if(e.classList.remove("light","dark"),"system"===o){const t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";return void e.classList.add(t)}e.classList.add(o)},[o]);const a={theme:o,setTheme:e=>{localStorage.setItem(r,e),s(e)}};return e.jsx(wi.Provider,{...i,value:a,children:t})}function Si(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e?.(r),!1===n||!r.defaultPrevented)return t?.(r)}}function ki(t,n){const r=wt.createContext(n),i=t=>{const{children:n,...i}=t,o=wt.useMemo(()=>i,Object.values(i));return e.jsx(r.Provider,{value:o,children:n})};return i.displayName=t+"Provider",[i,function(e){const i=wt.useContext(r);if(i)return i;if(void 0!==n)return n;throw new Error(`\`${e}\` must be used within \`${t}\``)}]}function Ci(t,n=[]){let r=[];const i=()=>{const e=r.map(e=>wt.createContext(e));return function(n){const r=n?.[t]||e;return wt.useMemo(()=>({[`__scope${t}`]:{...n,[t]:r}}),[n,r])}};return i.scopeName=t,[function(n,i){const o=wt.createContext(i),s=r.length;r=[...r,i];const a=n=>{const{scope:r,children:i,...a}=n,l=r?.[t]?.[s]||o,c=wt.useMemo(()=>a,Object.values(a));return e.jsx(l.Provider,{value:c,children:i})};return a.displayName=n+"Provider",[a,function(e,r){const a=r?.[t]?.[s]||o,l=wt.useContext(a);if(l)return l;if(void 0!==i)return i;throw new Error(`\`${e}\` must be used within \`${n}\``)}]},Mi(i,...n)]}function Mi(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=n.reduce((t,{useScope:n,scopeName:r})=>({...t,...n(e)[`__scope${r}`]}),{});return wt.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}var Ii=globalThis?.document?wt.useLayoutEffect:()=>{},Pi=kt[" useInsertionEffect ".trim().toString()]||Ii;function Ti({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[i,o,s]=function({defaultProp:e,onChange:t}){const[n,r]=wt.useState(e),i=wt.useRef(n),o=wt.useRef(t);return Pi(()=>{o.current=t},[t]),wt.useEffect(()=>{i.current!==n&&(o.current?.(n),i.current=n)},[n,i]),[n,r,o]}({defaultProp:t,onChange:n}),a=void 0!==e,l=a?e:i;{const t=wt.useRef(void 0!==e);wt.useEffect(()=>{const e=t.current;if(e!==a){}t.current=a},[a,r])}const c=wt.useCallback(t=>{if(a){const n=function(e){return"function"==typeof e}(t)?t(e):t;n!==e&&s.current?.(n)}else o(t)},[a,e,o,s]);return[l,c]}function Ei(t){const n=ji(t),r=wt.forwardRef((t,r)=>{const{children:i,...o}=t,s=wt.Children.toArray(i),a=s.find(Ai);if(a){const t=a.props.children,i=s.map(e=>e===a?wt.Children.count(t)>1?wt.Children.only(null):wt.isValidElement(t)?t.props.children:null:e);return e.jsx(n,{...o,ref:r,children:wt.isValidElement(t)?wt.cloneElement(t,void 0,i):null})}return e.jsx(n,{...o,ref:r,children:i})});return r.displayName=`${t}.Slot`,r}function ji(e){const t=wt.forwardRef((e,t)=>{const{children:n,...r}=e;if(wt.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),i=function(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...e)=>{const t=o(...e);return i(...e),t}:i&&(n[r]=i):"style"===r?n[r]={...i,...o}:"className"===r&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==wt.Fragment&&(i.ref=t?Ur(t,e):e),wt.cloneElement(n,i)}return wt.Children.count(n)>1?wt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ri=Symbol("radix.slottable");function Ai(e){return wt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Ri}var Ni=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((t,n)=>{const r=Ei(`Primitive.${n}`),i=wt.forwardRef((t,i)=>{const{asChild:o,...s}=t,a=o?r:n;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),e.jsx(a,{...s,ref:i})});return i.displayName=`Primitive.${n}`,{...t,[n]:i}},{});function Li(e,n){e&&t.flushSync(()=>e.dispatchEvent(n))}function Oi(t){const n=Di(t),r=wt.forwardRef((t,r)=>{const{children:i,...o}=t,s=wt.Children.toArray(i),a=s.find(zi);if(a){const t=a.props.children,i=s.map(e=>e===a?wt.Children.count(t)>1?wt.Children.only(null):wt.isValidElement(t)?t.props.children:null:e);return e.jsx(n,{...o,ref:r,children:wt.isValidElement(t)?wt.cloneElement(t,void 0,i):null})}return e.jsx(n,{...o,ref:r,children:i})});return r.displayName=`${t}.Slot`,r}function Di(e){const t=wt.forwardRef((e,t)=>{const{children:n,...r}=e;if(wt.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),i=function(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...e)=>{const t=o(...e);return i(...e),t}:i&&(n[r]=i):"style"===r?n[r]={...i,...o}:"className"===r&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==wt.Fragment&&(i.ref=t?Ur(t,e):e),wt.cloneElement(n,i)}return wt.Children.count(n)>1?wt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Fi=Symbol("radix.slottable");function zi(e){return wt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Fi}function Bi(t){const n=t+"CollectionProvider",[r,i]=Ci(n),[o,s]=r(n,{collectionRef:{current:null},itemMap:new Map}),a=t=>{const{scope:n,children:r}=t,i=St.useRef(null),s=St.useRef(new Map).current;return e.jsx(o,{scope:n,itemMap:s,collectionRef:i,children:r})};a.displayName=n;const l=t+"CollectionSlot",c=Oi(l),u=St.forwardRef((t,n)=>{const{scope:r,children:i}=t,o=Hr(n,s(l,r).collectionRef);return e.jsx(c,{ref:o,children:i})});u.displayName=l;const d=t+"CollectionItemSlot",h="data-radix-collection-item",p=Oi(d),f=St.forwardRef((t,n)=>{const{scope:r,children:i,...o}=t,a=St.useRef(null),l=Hr(n,a),c=s(d,r);return St.useEffect(()=>(c.itemMap.set(a,{ref:a,...o}),()=>{c.itemMap.delete(a)})),e.jsx(p,{[h]:"",ref:l,children:i})});return f.displayName=d,[{Provider:a,Slot:u,ItemSlot:f},function(e){const n=s(t+"CollectionConsumer",e);return St.useCallback(()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${h}]`));return Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current))},[n.collectionRef,n.itemMap])},i]}var $i=wt.createContext(void 0);function Wi(e){const t=wt.useContext($i);return e||t||"ltr"}function Ui(e){const t=wt.useRef(e);return wt.useEffect(()=>{t.current=e}),wt.useMemo(()=>(...e)=>t.current?.(...e),[])}var Hi,qi="dismissableLayer.update",Vi="dismissableLayer.pointerDownOutside",Gi="dismissableLayer.focusOutside",Yi=wt.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Xi=wt.forwardRef((t,n)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:a,onDismiss:l,...c}=t,u=wt.useContext(Yi),[d,h]=wt.useState(null),p=d?.ownerDocument??globalThis?.document,[,f]=wt.useState({}),g=Hr(n,e=>h(e)),m=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(v),x=d?m.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,w=x>=y,_=function(e,t=globalThis?.document){const n=Ui(e),r=wt.useRef(!1),i=wt.useRef(()=>{});return wt.useEffect(()=>{const e=e=>{if(e.target&&!r.current){let r=function(){Qi(Vi,n,o,{discrete:!0})};const o={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",i.current),i.current=r,t.addEventListener("click",i.current,{once:!0})):r()}else t.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",e),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}(e=>{const t=e.target,n=[...u.branches].some(e=>e.contains(t));w&&!n&&(o?.(e),a?.(e),e.defaultPrevented||l?.())},p),S=function(e,t=globalThis?.document){const n=Ui(e),r=wt.useRef(!1);return wt.useEffect(()=>{const e=e=>{if(e.target&&!r.current){Qi(Gi,n,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}(e=>{const t=e.target;[...u.branches].some(e=>e.contains(t))||(s?.(e),a?.(e),e.defaultPrevented||l?.())},p);return function(e,t=globalThis?.document){const n=Ui(e);wt.useEffect(()=>{const e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[n,t])}(e=>{x===u.layers.size-1&&(i?.(e),!e.defaultPrevented&&l&&(e.preventDefault(),l()))},p),wt.useEffect(()=>{if(d)return r&&(0===u.layersWithOutsidePointerEventsDisabled.size&&(Hi=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Ki(),()=>{r&&1===u.layersWithOutsidePointerEventsDisabled.size&&(p.body.style.pointerEvents=Hi)}},[d,p,r,u]),wt.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Ki())},[d,u]),wt.useEffect(()=>{const e=()=>f({});return document.addEventListener(qi,e),()=>document.removeEventListener(qi,e)},[]),e.jsx(Ni.div,{...c,ref:g,style:{pointerEvents:b?w?"auto":"none":void 0,...t.style},onFocusCapture:Si(t.onFocusCapture,S.onFocusCapture),onBlurCapture:Si(t.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Si(t.onPointerDownCapture,_.onPointerDownCapture)})});Xi.displayName="DismissableLayer";function Ki(){const e=new CustomEvent(qi);document.dispatchEvent(e)}function Qi(e,t,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?Li(i,o):i.dispatchEvent(o)}wt.forwardRef((t,n)=>{const r=wt.useContext(Yi),i=wt.useRef(null),o=Hr(n,i);return wt.useEffect(()=>{const e=i.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),e.jsx(Ni.div,{...t,ref:o})}).displayName="DismissableLayerBranch";var Zi=0;function Ji(){wt.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??eo()),document.body.insertAdjacentElement("beforeend",e[1]??eo()),Zi++,()=>{1===Zi&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Zi--}},[])}function eo(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var to="focusScope.autoFocusOnMount",no="focusScope.autoFocusOnUnmount",ro={bubbles:!1,cancelable:!0},io=wt.forwardRef((t,n)=>{const{loop:r=!1,trapped:i=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...a}=t,[l,c]=wt.useState(null),u=Ui(o),d=Ui(s),h=wt.useRef(null),p=Hr(n,e=>c(e)),f=wt.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;wt.useEffect(()=>{if(i){let e=function(e){if(f.paused||!l)return;const t=e.target;l.contains(t)?h.current=t:lo(h.current,{select:!0})},t=function(e){if(f.paused||!l)return;const t=e.relatedTarget;null!==t&&(l.contains(t)||lo(h.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&lo(l)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(n);return l&&r.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[i,l,f.paused]),wt.useEffect(()=>{if(l){co.add(f);const t=document.activeElement;if(!l.contains(t)){const n=new CustomEvent(to,ro);l.addEventListener(to,u),l.dispatchEvent(n),n.defaultPrevented||(!function(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(lo(r,{select:t}),document.activeElement!==n)return}((e=oo(l),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&lo(l))}return()=>{l.removeEventListener(to,u),setTimeout(()=>{const e=new CustomEvent(no,ro);l.addEventListener(no,d),l.dispatchEvent(e),e.defaultPrevented||lo(t??document.body,{select:!0}),l.removeEventListener(no,d),co.remove(f)},0)}}var e},[l,u,d,f]);const g=wt.useCallback(e=>{if(!r&&!i)return;if(f.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){const t=e.currentTarget,[i,o]=function(e){const t=oo(e),n=so(t,e),r=so(t.reverse(),e);return[n,r]}(t);i&&o?e.shiftKey||n!==o?e.shiftKey&&n===i&&(e.preventDefault(),r&&lo(o,{select:!0})):(e.preventDefault(),r&&lo(i,{select:!0})):n===t&&e.preventDefault()}},[r,i,f.paused]);return e.jsx(Ni.div,{tabIndex:-1,...a,ref:p,onKeyDown:g})});function oo(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function so(e,t){for(const n of e)if(!ao(n,{upTo:t}))return n}function ao(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function lo(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}io.displayName="FocusScope";var co=function(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=uo(e,t),e.unshift(t)},remove(t){e=uo(e,t),e[0]?.resume()}}}();function uo(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}var ho=kt[" useId ".trim().toString()]||(()=>{}),po=0;function fo(e){const[t,n]=wt.useState(ho());return Ii(()=>{n(e=>e??String(po++))},[e]),t?`radix-${t}`:""}const go=["top","right","bottom","left"],mo=Math.min,vo=Math.max,yo=Math.round,xo=Math.floor,bo=e=>({x:e,y:e}),wo={left:"right",right:"left",bottom:"top",top:"bottom"},_o={start:"end",end:"start"};function So(e,t,n){return vo(e,mo(t,n))}function ko(e,t){return"function"==typeof e?e(t):e}function Co(e){return e.split("-")[0]}function Mo(e){return e.split("-")[1]}function Io(e){return"x"===e?"y":"x"}function Po(e){return"y"===e?"height":"width"}const To=new Set(["top","bottom"]);function Eo(e){return To.has(Co(e))?"y":"x"}function jo(e){return Io(Eo(e))}function Ro(e){return e.replace(/start|end/g,e=>_o[e])}const Ao=["left","right"],No=["right","left"],Lo=["top","bottom"],Oo=["bottom","top"];function Do(e,t,n,r){const i=Mo(e);let o=function(e,t,n){switch(e){case"top":case"bottom":return n?t?No:Ao:t?Ao:No;case"left":case"right":return t?Lo:Oo;default:return[]}}(Co(e),"start"===n,r);return i&&(o=o.map(e=>e+"-"+i),t&&(o=o.concat(o.map(Ro)))),o}function Fo(e){return e.replace(/left|right|bottom|top/g,e=>wo[e])}function zo(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function Bo(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function $o(e,t,n){let{reference:r,floating:i}=e;const o=Eo(t),s=jo(t),a=Po(s),l=Co(t),c="y"===o,u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-i.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(Mo(t)){case"start":p[s]-=h*(n&&c?-1:1);break;case"end":p[s]+=h*(n&&c?-1:1)}return p}async function Wo(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=ko(t,e),f=zo(p),g=a[h?"floating"===d?"reference":"floating":d],m=Bo(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(g)))||n?g:g.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),v="floating"===d?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,y=await(null==o.getOffsetParent?void 0:o.getOffsetParent(a.floating)),x=await(null==o.isElement?void 0:o.isElement(y))&&await(null==o.getScale?void 0:o.getScale(y))||{x:1,y:1},b=Bo(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:y,strategy:l}):v);return{top:(m.top-b.top+f.top)/x.y,bottom:(b.bottom-m.bottom+f.bottom)/x.y,left:(m.left-b.left+f.left)/x.x,right:(b.right-m.right+f.right)/x.x}}function Uo(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Ho(e){return go.some(t=>e[t]>=0)}const qo=new Set(["left","top"]);function Vo(){return"undefined"!=typeof window}function Go(e){return Ko(e)?(e.nodeName||"").toLowerCase():"#document"}function Yo(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function Xo(e){var t;return null==(t=(Ko(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Ko(e){return!!Vo()&&(e instanceof Node||e instanceof Yo(e).Node)}function Qo(e){return!!Vo()&&(e instanceof Element||e instanceof Yo(e).Element)}function Zo(e){return!!Vo()&&(e instanceof HTMLElement||e instanceof Yo(e).HTMLElement)}function Jo(e){return!(!Vo()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof Yo(e).ShadowRoot)}const es=new Set(["inline","contents"]);function ts(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=ps(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!es.has(i)}const ns=new Set(["table","td","th"]);function rs(e){return ns.has(Go(e))}const is=[":popover-open",":modal"];function os(e){return is.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const ss=["transform","translate","scale","rotate","perspective"],as=["transform","translate","scale","rotate","perspective","filter"],ls=["paint","layout","strict","content"];function cs(e){const t=us(),n=Qo(e)?ps(e):e;return ss.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||as.some(e=>(n.willChange||"").includes(e))||ls.some(e=>(n.contain||"").includes(e))}function us(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const ds=new Set(["html","body","#document"]);function hs(e){return ds.has(Go(e))}function ps(e){return Yo(e).getComputedStyle(e)}function fs(e){return Qo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function gs(e){if("html"===Go(e))return e;const t=e.assignedSlot||e.parentNode||Jo(e)&&e.host||Xo(e);return Jo(t)?t.host:t}function ms(e){const t=gs(e);return hs(t)?e.ownerDocument?e.ownerDocument.body:e.body:Zo(t)&&ts(t)?t:ms(t)}function vs(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=ms(e),o=i===(null==(r=e.ownerDocument)?void 0:r.body),s=Yo(i);if(o){const e=ys(s);return t.concat(s,s.visualViewport||[],ts(i)?i:[],e&&n?vs(e):[])}return t.concat(i,vs(i,[],n))}function ys(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function xs(e){const t=ps(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Zo(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=yo(n)!==o||yo(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function bs(e){return Qo(e)?e:e.contextElement}function ws(e){const t=bs(e);if(!Zo(t))return bo(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=xs(t);let s=(o?yo(n.width):n.width)/r,a=(o?yo(n.height):n.height)/i;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}const _s=bo(0);function Ss(e){const t=Yo(e);return us()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:_s}function ks(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),o=bs(e);let s=bo(1);t&&(r?Qo(r)&&(s=ws(r)):s=ws(e));const a=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==Yo(e))&&t}(o,n,r)?Ss(o):bo(0);let l=(i.left+a.x)/s.x,c=(i.top+a.y)/s.y,u=i.width/s.x,d=i.height/s.y;if(o){const e=Yo(o),t=r&&Qo(r)?Yo(r):r;let n=e,i=ys(n);for(;i&&r&&t!==n;){const e=ws(i),t=i.getBoundingClientRect(),r=ps(i),o=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,s=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=o,c+=s,n=Yo(i),i=ys(n)}}return Bo({width:u,height:d,x:l,y:c})}function Cs(e,t){const n=fs(e).scrollLeft;return t?t.left+n:ks(Xo(e)).left+n}function Ms(e,t){const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-Cs(e,n),y:n.top+t.scrollTop}}const Is=new Set(["absolute","fixed"]);function Ps(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=Yo(e),r=Xo(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const e=us();(!e||e&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}const c=Cs(r);if(c<=0){const e=r.ownerDocument,t=e.body,n=getComputedStyle(t),i="CSS1Compat"===e.compatMode&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,s=Math.abs(r.clientWidth-t.clientWidth-i);s<=25&&(o-=s)}else c<=25&&(o+=c);return{width:o,height:s,x:a,y:l}}(e,n);else if("document"===t)r=function(e){const t=Xo(e),n=fs(e),r=e.ownerDocument.body,i=vo(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=vo(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+Cs(e);const a=-n.scrollTop;return"rtl"===ps(r).direction&&(s+=vo(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}(Xo(e));else if(Qo(t))r=function(e,t){const n=ks(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=Zo(e)?ws(e):bo(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:i*o.x,y:r*o.y}}(t,n);else{const n=Ss(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return Bo(r)}function Ts(e,t){const n=gs(e);return!(n===t||!Qo(n)||hs(n))&&("fixed"===ps(n).position||Ts(n,t))}function Es(e,t,n){const r=Zo(t),i=Xo(t),o="fixed"===n,s=ks(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=bo(0);function c(){l.x=Cs(i)}if(r||!r&&!o)if(("body"!==Go(t)||ts(i))&&(a=fs(t)),r){const e=ks(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&c();o&&!r&&i&&c();const u=!i||r||o?bo(0):Ms(i,a);return{x:s.left+a.scrollLeft-l.x-u.x,y:s.top+a.scrollTop-l.y-u.y,width:s.width,height:s.height}}function js(e){return"static"===ps(e).position}function Rs(e,t){if(!Zo(e)||"fixed"===ps(e).position)return null;if(t)return t(e);let n=e.offsetParent;return Xo(e)===n&&(n=n.ownerDocument.body),n}function As(e,t){const n=Yo(e);if(os(e))return n;if(!Zo(e)){let t=gs(e);for(;t&&!hs(t);){if(Qo(t)&&!js(t))return t;t=gs(t)}return n}let r=Rs(e,t);for(;r&&rs(r)&&js(r);)r=Rs(r,t);return r&&hs(r)&&js(r)&&!cs(r)?n:r||function(e){let t=gs(e);for(;Zo(t)&&!hs(t);){if(cs(t))return t;if(os(t))return null;t=gs(t)}return null}(e)||n}const Ns={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o="fixed"===i,s=Xo(r),a=!!t&&os(t.floating);if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},c=bo(1);const u=bo(0),d=Zo(r);if((d||!d&&!o)&&(("body"!==Go(r)||ts(s))&&(l=fs(r)),Zo(r))){const e=ks(r);c=ws(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const h=!s||d||o?bo(0):Ms(s,l);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:Xo,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[..."clippingAncestors"===n?os(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=vs(e,[],!1).filter(e=>Qo(e)&&"body"!==Go(e)),i=null;const o="fixed"===ps(e).position;let s=o?gs(e):e;for(;Qo(s)&&!hs(s);){const t=ps(s),n=cs(s);n||"fixed"!==t.position||(i=null),(o?!n&&!i:!n&&"static"===t.position&&i&&Is.has(i.position)||ts(s)&&!n&&Ts(e,s))?r=r.filter(e=>e!==s):i=t,s=gs(s)}return t.set(e,r),r}(t,this._c):[].concat(n),r],s=o[0],a=o.reduce((e,n)=>{const r=Ps(t,n,i);return e.top=vo(r.top,e.top),e.right=mo(r.right,e.right),e.bottom=mo(r.bottom,e.bottom),e.left=vo(r.left,e.left),e},Ps(t,s,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:As,getElementRects:async function(e){const t=this.getOffsetParent||As,n=this.getDimensions,r=await n(e.floating);return{reference:Es(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=xs(e);return{width:t,height:n}},getScale:ws,isElement:Qo,isRTL:function(e){return"rtl"===ps(e).direction}};function Ls(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Os(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s="function"==typeof ResizeObserver,layoutShift:a="function"==typeof IntersectionObserver,animationFrame:l=!1}=r,c=bs(e),u=i||o?[...c?vs(c):[],...vs(t)]:[];u.forEach(e=>{i&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)});const d=c&&a?function(e,t){let n,r=null;const i=Xo(e);function o(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function s(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),o();const c=e.getBoundingClientRect(),{left:u,top:d,width:h,height:p}=c;if(a||t(),!h||!p)return;const f={rootMargin:-xo(d)+"px "+-xo(i.clientWidth-(u+h))+"px "+-xo(i.clientHeight-(d+p))+"px "+-xo(u)+"px",threshold:vo(0,mo(1,l))||1};let g=!0;function m(t){const r=t[0].intersectionRatio;if(r!==l){if(!g)return s();r?s(!1,r):n=setTimeout(()=>{s(!1,1e-7)},1e3)}1!==r||Ls(c,e.getBoundingClientRect())||s(),g=!1}try{r=new IntersectionObserver(m,{...f,root:i.ownerDocument})}catch(v){r=new IntersectionObserver(m,f)}r.observe(e)}(!0),o}(c,n):null;let h,p=-1,f=null;s&&(f=new ResizeObserver(e=>{let[r]=e;r&&r.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;null==(e=f)||e.observe(t)})),n()}),c&&!l&&f.observe(c),f.observe(t));let g=l?ks(e):null;return l&&function t(){const r=ks(e);g&&!Ls(g,r)&&n();g=r,h=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach(e=>{i&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)}),null==d||d(),null==(e=f)||e.disconnect(),f=null,l&&cancelAnimationFrame(h)}}const Ds=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=t,l=await async function(e,t){const{placement:n,platform:r,elements:i}=e,o=await(null==r.isRTL?void 0:r.isRTL(i.floating)),s=Co(n),a=Mo(n),l="y"===Eo(n),c=qo.has(s)?-1:1,u=o&&l?-1:1,d=ko(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:f}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"==typeof f&&(p="end"===a?-1*f:f),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}(t,e);return s===(null==(n=a.offset)?void 0:n.placement)&&null!=(r=a.arrow)&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},Fs=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=ko(e,t),c={x:n,y:r},u=await Wo(t,l),d=Eo(Co(i)),h=Io(d);let p=c[h],f=c[d];if(o){const e="y"===h?"bottom":"right";p=So(p+u["y"===h?"top":"left"],p,p-u[e])}if(s){const e="y"===d?"bottom":"right";f=So(f+u["y"===d?"top":"left"],f,f-u[e])}const g=a.fn({...t,[h]:p,[d]:f});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[h]:o,[d]:s}}}}}},zs=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:g=!0,...m}=ko(e,t);if(null!=(n=o.arrow)&&n.alignmentOffset)return{};const v=Co(i),y=Eo(a),x=Co(a)===a,b=await(null==l.isRTL?void 0:l.isRTL(c.floating)),w=h||(x||!g?[Fo(a)]:function(e){const t=Fo(e);return[Ro(e),t,Ro(t)]}(a)),_="none"!==f;!h&&_&&w.push(...Do(a,g,f,b));const S=[a,...w],k=await Wo(t,m),C=[];let M=(null==(r=o.flip)?void 0:r.overflows)||[];if(u&&C.push(k[v]),d){const e=function(e,t,n){void 0===n&&(n=!1);const r=Mo(e),i=jo(e),o=Po(i);let s="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=Fo(s)),[s,Fo(s)]}(i,s,b);C.push(k[e[0]],k[e[1]])}if(M=[...M,{placement:i,overflows:C}],!C.every(e=>e<=0)){var I,P;const e=((null==(I=o.flip)?void 0:I.index)||0)+1,t=S[e];if(t){if(!("alignment"===d&&y!==Eo(t))||M.every(e=>Eo(e.placement)!==y||e.overflows[0]>0))return{data:{index:e,overflows:M},reset:{placement:t}}}let n=null==(P=M.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:P.placement;if(!n)switch(p){case"bestFit":{var T;const e=null==(T=M.filter(e=>{if(_){const t=Eo(e.placement);return t===y||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:T[0];e&&(n=e);break}case"initialPlacement":n=a}if(i!==n)return{reset:{placement:n}}}return{}}}},Bs=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:o,platform:s,elements:a}=t,{apply:l=()=>{},...c}=ko(e,t),u=await Wo(t,c),d=Co(i),h=Mo(i),p="y"===Eo(i),{width:f,height:g}=o.floating;let m,v;"top"===d||"bottom"===d?(m=d,v=h===(await(null==s.isRTL?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,m="end"===h?"top":"bottom");const y=g-u.top-u.bottom,x=f-u.left-u.right,b=mo(g-u[m],y),w=mo(f-u[v],x),_=!t.middlewareData.shift;let S=b,k=w;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(k=x),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(S=y),_&&!h){const e=vo(u.left,0),t=vo(u.right,0),n=vo(u.top,0),r=vo(u.bottom,0);p?k=f-2*(0!==e||0!==t?e+t:vo(u.left,u.right)):S=g-2*(0!==n||0!==r?n+r:vo(u.top,u.bottom))}await l({...t,availableWidth:k,availableHeight:S});const C=await s.getDimensions(a.floating);return f!==C.width||g!==C.height?{reset:{rects:!0}}:{}}}},$s=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=ko(e,t);switch(r){case"referenceHidden":{const e=Uo(await Wo(t,{...i,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:Ho(e)}}}case"escaped":{const e=Uo(await Wo(t,{...i,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:Ho(e)}}}default:return{}}}}},Ws=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:s,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=ko(e,t)||{};if(null==c)return{};const d=zo(u),h={x:n,y:r},p=jo(i),f=Po(p),g=await s.getDimensions(c),m="y"===p,v=m?"top":"left",y=m?"bottom":"right",x=m?"clientHeight":"clientWidth",b=o.reference[f]+o.reference[p]-h[p]-o.floating[f],w=h[p]-o.reference[p],_=await(null==s.getOffsetParent?void 0:s.getOffsetParent(c));let S=_?_[x]:0;S&&await(null==s.isElement?void 0:s.isElement(_))||(S=a.floating[x]||o.floating[f]);const k=b/2-w/2,C=S/2-g[f]/2-1,M=mo(d[v],C),I=mo(d[y],C),P=M,T=S-g[f]-I,E=S/2-g[f]/2+k,j=So(P,E,T),R=!l.arrow&&null!=Mo(i)&&E!==j&&o.reference[f]/2-(E<P?M:I)-g[f]/2<0,A=R?E<P?E-P:E-T:0;return{[p]:h[p]+A,data:{[p]:j,centerOffset:E-j-A,...R&&{alignmentOffset:A}},reset:R}}}),Us=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:o,middlewareData:s}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ko(e,t),u={x:n,y:r},d=Eo(i),h=Io(d);let p=u[h],f=u[d];const g=ko(a,t),m="number"==typeof g?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const e="y"===h?"height":"width",t=o.reference[h]-o.floating[e]+m.mainAxis,n=o.reference[h]+o.reference[e]-m.mainAxis;p<t?p=t:p>n&&(p=n)}if(c){var v,y;const e="y"===h?"width":"height",t=qo.has(Co(i)),n=o.reference[d]-o.floating[e]+(t&&(null==(v=s.offset)?void 0:v[d])||0)+(t?0:m.crossAxis),r=o.reference[d]+o.reference[e]+(t?0:(null==(y=s.offset)?void 0:y[d])||0)-(t?m.crossAxis:0);f<n?f=n:f>r&&(f=r)}return{[h]:p,[d]:f}}}},Hs=(e,t,n)=>{const r=new Map,i={platform:Ns,...n},o={...i.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(null==s.isRTL?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=$o(c,r,l),h=r,p={},f=0;for(let g=0;g<a.length;g++){const{name:n,fn:o}=a[g],{x:m,y:v,data:y,reset:x}=await o({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:c,platform:s,elements:{reference:e,floating:t}});u=null!=m?m:u,d=null!=v?v:d,p={...p,[n]:{...p[n],...y}},x&&f<=50&&(f++,"object"==typeof x&&(x.placement&&(h=x.placement),x.rects&&(c=!0===x.rects?await s.getElementRects({reference:e,floating:t,strategy:i}):x.rects),({x:u,y:d}=$o(c,h,l))),g=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:p}})(e,t,{...i,platform:o})};var qs="undefined"!=typeof document?wt.useLayoutEffect:function(){};function Vs(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!Vs(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){const n=i[r];if(("_owner"!==n||!e.$$typeof)&&!Vs(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function Gs(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ys(e,t){const n=Gs(e);return Math.round(t*n)/n}function Xs(e){const t=wt.useRef(e);return qs(()=>{t.current=e}),t}const Ks=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"==typeof e?e(t):e;return n&&(i=n,{}.hasOwnProperty.call(i,"current"))?null!=n.current?Ws({element:n.current,padding:r}).fn(t):{}:n?Ws({element:n,padding:r}).fn(t):{};var i}}),Qs=(e,t)=>({...Ds(e),options:[e,t]}),Zs=(e,t)=>({...Fs(e),options:[e,t]}),Js=(e,t)=>({...Us(e),options:[e,t]}),ea=(e,t)=>({...zs(e),options:[e,t]}),ta=(e,t)=>({...Bs(e),options:[e,t]}),na=(e,t)=>({...$s(e),options:[e,t]}),ra=(e,t)=>({...Ks(e),options:[e,t]});var ia=wt.forwardRef((t,n)=>{const{children:r,width:i=10,height:o=5,...s}=t;return e.jsx(Ni.svg,{...s,ref:n,width:i,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});ia.displayName="Arrow";var oa=ia;function sa(e){const[t,n]=wt.useState(void 0);return Ii(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const r=t[0];let i,o;if("borderBoxSize"in r){const e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;i=t.inlineSize,o=t.blockSize}else i=e.offsetWidth,o=e.offsetHeight;n({width:i,height:o})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),t}var aa="Popper",[la,ca]=Ci(aa),[ua,da]=la(aa),ha=t=>{const{__scopePopper:n,children:r}=t,[i,o]=wt.useState(null);return e.jsx(ua,{scope:n,anchor:i,onAnchorChange:o,children:r})};ha.displayName=aa;var pa="PopperAnchor",fa=wt.forwardRef((t,n)=>{const{__scopePopper:r,virtualRef:i,...o}=t,s=da(pa,r),a=wt.useRef(null),l=Hr(n,a),c=wt.useRef(null);return wt.useEffect(()=>{const e=c.current;c.current=i?.current||a.current,e!==c.current&&s.onAnchorChange(c.current)}),i?null:e.jsx(Ni.div,{...o,ref:l})});fa.displayName=pa;var ga="PopperContent",[ma,va]=la(ga),ya=wt.forwardRef((n,r)=>{const{__scopePopper:i,side:o="bottom",sideOffset:s=0,align:a="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:u=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:p="partial",hideWhenDetached:f=!1,updatePositionStrategy:g="optimized",onPlaced:m,...v}=n,y=da(ga,i),[x,b]=wt.useState(null),w=Hr(r,e=>b(e)),[_,S]=wt.useState(null),k=sa(_),C=k?.width??0,M=k?.height??0,I=o+("center"!==a?"-"+a:""),P="number"==typeof h?h:{top:0,right:0,bottom:0,left:0,...h},T=Array.isArray(d)?d:[d],E=T.length>0,j={padding:P,boundary:T.filter(_a),altBoundary:E},{refs:R,floatingStyles:A,placement:N,isPositioned:L,middlewareData:O}=function(e){void 0===e&&(e={});const{placement:n="bottom",strategy:r="absolute",middleware:i=[],platform:o,elements:{reference:s,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=wt.useState({x:0,y:0,strategy:r,placement:n,middlewareData:{},isPositioned:!1}),[p,f]=wt.useState(i);Vs(p,i)||f(i);const[g,m]=wt.useState(null),[v,y]=wt.useState(null),x=wt.useCallback(e=>{e!==S.current&&(S.current=e,m(e))},[]),b=wt.useCallback(e=>{e!==k.current&&(k.current=e,y(e))},[]),w=s||g,_=a||v,S=wt.useRef(null),k=wt.useRef(null),C=wt.useRef(d),M=null!=c,I=Xs(c),P=Xs(o),T=Xs(u),E=wt.useCallback(()=>{if(!S.current||!k.current)return;const e={placement:n,strategy:r,middleware:p};P.current&&(e.platform=P.current),Hs(S.current,k.current,e).then(e=>{const n={...e,isPositioned:!1!==T.current};j.current&&!Vs(C.current,n)&&(C.current=n,t.flushSync(()=>{h(n)}))})},[p,n,r,P,T]);qs(()=>{!1===u&&C.current.isPositioned&&(C.current.isPositioned=!1,h(e=>({...e,isPositioned:!1})))},[u]);const j=wt.useRef(!1);qs(()=>(j.current=!0,()=>{j.current=!1}),[]),qs(()=>{if(w&&(S.current=w),_&&(k.current=_),w&&_){if(I.current)return I.current(w,_,E);E()}},[w,_,E,I,M]);const R=wt.useMemo(()=>({reference:S,floating:k,setReference:x,setFloating:b}),[x,b]),A=wt.useMemo(()=>({reference:w,floating:_}),[w,_]),N=wt.useMemo(()=>{const e={position:r,left:0,top:0};if(!A.floating)return e;const t=Ys(A.floating,d.x),n=Ys(A.floating,d.y);return l?{...e,transform:"translate("+t+"px, "+n+"px)",...Gs(A.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}},[r,l,A.floating,d.x,d.y]);return wt.useMemo(()=>({...d,update:E,refs:R,elements:A,floatingStyles:N}),[d,E,R,A,N])}({strategy:"fixed",placement:I,whileElementsMounted:(...e)=>Os(...e,{animationFrame:"always"===g}),elements:{reference:y.anchor},middleware:[Qs({mainAxis:s+M,alignmentAxis:l}),u&&Zs({mainAxis:!0,crossAxis:!1,limiter:"partial"===p?Js():void 0,...j}),u&&ea({...j}),ta({...j,apply:({elements:e,rects:t,availableWidth:n,availableHeight:r})=>{const{width:i,height:o}=t.reference,s=e.floating.style;s.setProperty("--radix-popper-available-width",`${n}px`),s.setProperty("--radix-popper-available-height",`${r}px`),s.setProperty("--radix-popper-anchor-width",`${i}px`),s.setProperty("--radix-popper-anchor-height",`${o}px`)}}),_&&ra({element:_,padding:c}),Sa({arrowWidth:C,arrowHeight:M}),f&&na({strategy:"referenceHidden",...j})]}),[D,F]=ka(N),z=Ui(m);Ii(()=>{L&&z?.()},[L,z]);const B=O.arrow?.x,$=O.arrow?.y,W=0!==O.arrow?.centerOffset,[U,H]=wt.useState();return Ii(()=>{x&&H(window.getComputedStyle(x).zIndex)},[x]),e.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:{...A,transform:L?A.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:U,"--radix-popper-transform-origin":[O.transformOrigin?.x,O.transformOrigin?.y].join(" "),...O.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:e.jsx(ma,{scope:i,placedSide:D,onArrowChange:S,arrowX:B,arrowY:$,shouldHideArrow:W,children:e.jsx(Ni.div,{"data-side":D,"data-align":F,...v,ref:w,style:{...v.style,animation:L?void 0:"none"}})})})});ya.displayName=ga;var xa="PopperArrow",ba={top:"bottom",right:"left",bottom:"top",left:"right"},wa=wt.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,o=va(xa,r),s=ba[o.placedSide];return e.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:e.jsx(oa,{...i,ref:n,style:{...i.style,display:"block"}})})});function _a(e){return null!==e}wa.displayName=xa;var Sa=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:i}=t,o=0!==i.arrow?.centerOffset,s=o?0:e.arrowWidth,a=o?0:e.arrowHeight,[l,c]=ka(n),u={start:"0%",center:"50%",end:"100%"}[c],d=(i.arrow?.x??0)+s/2,h=(i.arrow?.y??0)+a/2;let p="",f="";return"bottom"===l?(p=o?u:`${d}px`,f=-a+"px"):"top"===l?(p=o?u:`${d}px`,f=`${r.floating.height+a}px`):"right"===l?(p=-a+"px",f=o?u:`${h}px`):"left"===l&&(p=`${r.floating.width+a}px`,f=o?u:`${h}px`),{data:{x:p,y:f}}}});function ka(e){const[t,n="center"]=e.split("-");return[t,n]}var Ca=ha,Ma=fa,Ia=ya,Pa=wa,Ta=wt.forwardRef((t,r)=>{const{container:i,...o}=t,[s,a]=wt.useState(!1);Ii(()=>a(!0),[]);const l=i||s&&globalThis?.document?.body;return l?n.createPortal(e.jsx(Ni.div,{...o,ref:r}),l):null});Ta.displayName="Portal";var Ea=e=>{const{present:t,children:n}=e,r=function(e){const[t,n]=wt.useState(),r=wt.useRef(null),i=wt.useRef(e),o=wt.useRef("none"),s=e?"mounted":"unmounted",[a,l]=function(e,t){return wt.useReducer((e,n)=>t[e][n]??e,e)}(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return wt.useEffect(()=>{const e=ja(r.current);o.current="mounted"===a?e:"none"},[a]),Ii(()=>{const t=r.current,n=i.current;if(n!==e){const r=o.current,s=ja(t);if(e)l("MOUNT");else if("none"===s||"none"===t?.display)l("UNMOUNT");else{l(n&&r!==s?"ANIMATION_OUT":"UNMOUNT")}i.current=e}},[e,l]),Ii(()=>{if(t){let e;const n=t.ownerDocument.defaultView??window,s=o=>{const s=ja(r.current).includes(CSS.escape(o.animationName));if(o.target===t&&s&&(l("ANIMATION_END"),!i.current)){const r=t.style.animationFillMode;t.style.animationFillMode="forwards",e=n.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=r)})}},a=e=>{e.target===t&&(o.current=ja(r.current))};return t.addEventListener("animationstart",a),t.addEventListener("animationcancel",s),t.addEventListener("animationend",s),()=>{n.clearTimeout(e),t.removeEventListener("animationstart",a),t.removeEventListener("animationcancel",s),t.removeEventListener("animationend",s)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:wt.useCallback(e=>{r.current=e?getComputedStyle(e):null,n(e)},[])}}(t),i="function"==typeof n?n({present:r.isPresent}):wt.Children.only(n),o=Hr(r.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(i));return"function"==typeof n||r.isPresent?wt.cloneElement(i,{ref:o}):null};function ja(e){return e?.animationName||"none"}Ea.displayName="Presence";var Ra="rovingFocusGroup.onEntryFocus",Aa={bubbles:!1,cancelable:!0},Na="RovingFocusGroup",[La,Oa,Da]=Bi(Na),[Fa,za]=Ci(Na,[Da]),[Ba,$a]=Fa(Na),Wa=wt.forwardRef((t,n)=>e.jsx(La.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(La.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Ua,{...t,ref:n})})}));Wa.displayName=Na;var Ua=wt.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:r,orientation:i,loop:o=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,p=wt.useRef(null),f=Hr(n,p),g=Wi(s),[m,v]=Ti({prop:a,defaultProp:l??null,onChange:c,caller:Na}),[y,x]=wt.useState(!1),b=Ui(u),w=Oa(r),_=wt.useRef(!1),[S,k]=wt.useState(0);return wt.useEffect(()=>{const e=p.current;if(e)return e.addEventListener(Ra,b),()=>e.removeEventListener(Ra,b)},[b]),e.jsx(Ba,{scope:r,orientation:i,dir:g,loop:o,currentTabStopId:m,onItemFocus:wt.useCallback(e=>v(e),[v]),onItemShiftTab:wt.useCallback(()=>x(!0),[]),onFocusableItemAdd:wt.useCallback(()=>k(e=>e+1),[]),onFocusableItemRemove:wt.useCallback(()=>k(e=>e-1),[]),children:e.jsx(Ni.div,{tabIndex:y||0===S?-1:0,"data-orientation":i,...h,ref:f,style:{outline:"none",...t.style},onMouseDown:Si(t.onMouseDown,()=>{_.current=!0}),onFocus:Si(t.onFocus,e=>{const t=!_.current;if(e.target===e.currentTarget&&t&&!y){const t=new CustomEvent(Ra,Aa);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=w().filter(e=>e.focusable);Ga([e.find(e=>e.active),e.find(e=>e.id===m),...e].filter(Boolean).map(e=>e.ref.current),d)}}_.current=!1}),onBlur:Si(t.onBlur,()=>x(!1))})})}),Ha="RovingFocusGroupItem",qa=wt.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:r,focusable:i=!0,active:o=!1,tabStopId:s,children:a,...l}=t,c=fo(),u=s||c,d=$a(Ha,r),h=d.currentTabStopId===u,p=Oa(r),{onFocusableItemAdd:f,onFocusableItemRemove:g,currentTabStopId:m}=d;return wt.useEffect(()=>{if(i)return f(),()=>g()},[i,f,g]),e.jsx(La.ItemSlot,{scope:r,id:u,focusable:i,active:o,children:e.jsx(Ni.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:n,onMouseDown:Si(t.onMouseDown,e=>{i?d.onItemFocus(u):e.preventDefault()}),onFocus:Si(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:Si(t.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void d.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:Va[r]}(e,d.orientation,d.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let i=p().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)i.reverse();else if("prev"===t||"next"===t){"prev"===t&&i.reverse();const o=i.indexOf(e.currentTarget);i=d.loop?(r=o+1,(n=i).map((e,t)=>n[(r+t)%n.length])):i.slice(o+1)}setTimeout(()=>Ga(i))}var n,r}),children:"function"==typeof a?a({isCurrentTabStop:h,hasTabStop:null!=m}):a})})});qa.displayName=Ha;var Va={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ga(e,t=!1){const n=document.activeElement;for(const r of e){if(r===n)return;if(r.focus({preventScroll:t}),document.activeElement!==n)return}}var Ya=Wa,Xa=qa;function Ka(t){const n=Qa(t),r=wt.forwardRef((t,r)=>{const{children:i,...o}=t,s=wt.Children.toArray(i),a=s.find(Ja);if(a){const t=a.props.children,i=s.map(e=>e===a?wt.Children.count(t)>1?wt.Children.only(null):wt.isValidElement(t)?t.props.children:null:e);return e.jsx(n,{...o,ref:r,children:wt.isValidElement(t)?wt.cloneElement(t,void 0,i):null})}return e.jsx(n,{...o,ref:r,children:i})});return r.displayName=`${t}.Slot`,r}function Qa(e){const t=wt.forwardRef((e,t)=>{const{children:n,...r}=e;if(wt.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),i=function(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...e)=>{const t=o(...e);return i(...e),t}:i&&(n[r]=i):"style"===r?n[r]={...i,...o}:"className"===r&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==wt.Fragment&&(i.ref=t?Ur(t,e):e),wt.cloneElement(n,i)}return wt.Children.count(n)>1?wt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Za=Symbol("radix.slottable");function Ja(e){return wt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Za}var el=new WeakMap,tl=new WeakMap,nl={},rl=0,il=function(e){return e&&(e.host||il(e.parentNode))},ol=function(e,t,n,r){var i=function(e,t){return t.map(function(t){if(e.contains(t))return t;var n=il(t);return n&&e.contains(n)?n:null}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);nl[n]||(nl[n]=new WeakMap);var o=nl[n],s=[],a=new Set,l=new Set(i),c=function(e){e&&!a.has(e)&&(a.add(e),c(e.parentNode))};i.forEach(c);var u=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(a.has(e))u(e);else try{var t=e.getAttribute(r),i=null!==t&&"false"!==t,l=(el.get(e)||0)+1,c=(o.get(e)||0)+1;el.set(e,l),o.set(e,c),s.push(e),1===l&&i&&tl.set(e,!0),1===c&&e.setAttribute(n,"true"),i||e.setAttribute(r,"true")}catch(d){}})};return u(t),a.clear(),rl++,function(){s.forEach(function(e){var t=el.get(e)-1,i=o.get(e)-1;el.set(e,t),o.set(e,i),t||(tl.has(e)||e.removeAttribute(r),tl.delete(e)),i||e.removeAttribute(n)}),--rl||(el=new WeakMap,el=new WeakMap,tl=new WeakMap,nl={})}},sl=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),ol(r,i,n,"aria-hidden")):function(){return null}},al=function(){return al=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},al.apply(this,arguments)};function ll(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}"function"==typeof SuppressedError&&SuppressedError;var cl="right-scroll-bar-position",ul="width-before-scroll-bar";function dl(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var hl="undefined"!=typeof window?wt.useLayoutEffect:wt.useEffect,pl=new WeakMap;function fl(e,t){var n,r,i,o=(n=null,r=function(t){return e.forEach(function(e){return dl(e,t)})},(i=wt.useState(function(){return{value:n,callback:r,facade:{get current(){return i.value},set current(e){var t=i.value;t!==e&&(i.value=e,i.callback(e,t))}}}})[0]).callback=r,i.facade);return hl(function(){var t=pl.get(o);if(t){var n=new Set(t),r=new Set(e),i=o.current;n.forEach(function(e){r.has(e)||dl(e,null)}),r.forEach(function(e){n.has(e)||dl(e,i)})}pl.set(o,e)},[e]),o}function gl(e){return e}var ml=function(e){var t=e.sideCar,n=ll(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return wt.createElement(r,al({},n))};ml.isSideCarExport=!0;var vl=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=gl);var n=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var i=t(e,r);return n.push(i),function(){n=n.filter(function(e){return e!==i})}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var i=n;n=[],i.forEach(e),t=n}var o=function(){var n=t;t=[],n.forEach(e)},s=function(){return Promise.resolve().then(o)};s(),n={push:function(e){t.push(e),s()},filter:function(e){return t=t.filter(e),n}}}}}(null);return t.options=al({async:!0,ssr:!1},e),t}(),yl=function(){},xl=wt.forwardRef(function(e,t){var n=wt.useRef(null),r=wt.useState({onScrollCapture:yl,onWheelCapture:yl,onTouchMoveCapture:yl}),i=r[0],o=r[1],s=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,h=e.sideCar,p=e.noRelative,f=e.noIsolation,g=e.inert,m=e.allowPinchZoom,v=e.as,y=void 0===v?"div":v,x=e.gapMode,b=ll(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=h,_=fl([n,t]),S=al(al({},b),i);return wt.createElement(wt.Fragment,null,u&&wt.createElement(w,{sideCar:vl,removeScrollBar:c,shards:d,noRelative:p,noIsolation:f,inert:g,setCallbacks:o,allowPinchZoom:!!m,lockRef:n,gapMode:x}),s?wt.cloneElement(wt.Children.only(a),al(al({},S),{ref:_})):wt.createElement(y,al({},S,{className:l,ref:_}),a))});xl.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},xl.classNames={fullWidth:ul,zeroRight:cl};function bl(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var wl=function(){var e=0,t=null;return{add:function(n){var r,i;0==e&&(t=bl())&&(i=n,(r=t).styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},_l=function(){var e,t=(e=wl(),function(t,n){wt.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])});return function(e){var n=e.styles,r=e.dynamic;return t(n,r),null}},Sl={left:0,top:0,right:0,gap:0},kl=function(e){return parseInt(e||"",10)||0},Cl=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return Sl;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[kl(n),kl(r),kl(i)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Ml=_l(),Il="data-scroll-locked",Pl=function(e,t,n,r){var i=e.left,o=e.top,s=e.right,a=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(a,"px ").concat(r,";\n  }\n  body[").concat(Il,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(o,"px;\n    padding-right: ").concat(s,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(cl," {\n    right: ").concat(a,"px ").concat(r,";\n  }\n  \n  .").concat(ul," {\n    margin-right: ").concat(a,"px ").concat(r,";\n  }\n  \n  .").concat(cl," .").concat(cl," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(ul," .").concat(ul," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(Il,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},Tl=function(){var e=parseInt(document.body.getAttribute(Il)||"0",10);return isFinite(e)?e:0},El=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=void 0===r?"margin":r;wt.useEffect(function(){return document.body.setAttribute(Il,(Tl()+1).toString()),function(){var e=Tl()-1;e<=0?document.body.removeAttribute(Il):document.body.setAttribute(Il,e.toString())}},[]);var o=wt.useMemo(function(){return Cl(i)},[i]);return wt.createElement(Ml,{styles:Pl(o,!t,i,n?"":"!important")})},jl=!1;if("undefined"!=typeof window)try{var Rl=Object.defineProperty({},"passive",{get:function(){return jl=!0,!0}});window.addEventListener("test",Rl,Rl),window.removeEventListener("test",Rl,Rl)}catch(BE){jl=!1}var Al=!!jl&&{passive:!1},Nl=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},Ll=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),Ol(e,r)){var i=Dl(e,r);if(i[1]>i[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Ol=function(e,t){return"v"===e?function(e){return Nl(e,"overflowY")}(t):function(e){return Nl(e,"overflowX")}(t)},Dl=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},Fl=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},zl=function(e){return[e.deltaX,e.deltaY]},Bl=function(e){return e&&"current"in e?e.current:e},$l=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},Wl=0,Ul=[];function Hl(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const ql=(Vl=function(e){var t=wt.useRef([]),n=wt.useRef([0,0]),r=wt.useRef(),i=wt.useState(Wl++)[0],o=wt.useState(_l)[0],s=wt.useRef(e);wt.useEffect(function(){s.current=e},[e]),wt.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(Bl),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=wt.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!s.current.allowPinchZoom;var i,o=Fl(e),a=n.current,l="deltaX"in e?e.deltaX:a[0]-o[0],c="deltaY"in e?e.deltaY:a[1]-o[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var h=window.getSelection(),p=h&&h.anchorNode;if(p&&(p===u||p.contains(u)))return!1;var f=Ll(d,u);if(!f)return!0;if(f?i=d:(i="v"===d?"h":"v",f=Ll(d,u)),!f)return!1;if(!r.current&&"changedTouches"in e&&(l||c)&&(r.current=i),!i)return!0;var g=r.current||i;return function(e,t,n,r){var i=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),o=i*r,s=n.target,a=t.contains(s),l=!1,c=o>0,u=0,d=0;do{if(!s)break;var h=Dl(e,s),p=h[0],f=h[1]-h[2]-i*p;(p||f)&&Ol(e,s)&&(u+=f,d+=p);var g=s.parentNode;s=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!a&&s!==document.body||a&&(t.contains(s)||t===s));return(c&&Math.abs(u)<1||!c&&Math.abs(d)<1)&&(l=!0),l}(g,t,e,"h"===g?l:c)},[]),l=wt.useCallback(function(e){var n=e;if(Ul.length&&Ul[Ul.length-1]===o){var r="deltaY"in n?zl(n):Fl(n),i=t.current.filter(function(e){return e.name===n.type&&(e.target===n.target||n.target===e.shadowParent)&&(t=e.delta,i=r,t[0]===i[0]&&t[1]===i[1]);var t,i})[0];if(i&&i.should)n.cancelable&&n.preventDefault();else if(!i){var l=(s.current.shards||[]).map(Bl).filter(Boolean).filter(function(e){return e.contains(n.target)});(l.length>0?a(n,l[0]):!s.current.noIsolation)&&n.cancelable&&n.preventDefault()}}},[]),c=wt.useCallback(function(e,n,r,i){var o={name:e,delta:n,target:r,should:i,shadowParent:Hl(r)};t.current.push(o),setTimeout(function(){t.current=t.current.filter(function(e){return e!==o})},1)},[]),u=wt.useCallback(function(e){n.current=Fl(e),r.current=void 0},[]),d=wt.useCallback(function(t){c(t.type,zl(t),t.target,a(t,e.lockRef.current))},[]),h=wt.useCallback(function(t){c(t.type,Fl(t),t.target,a(t,e.lockRef.current))},[]);wt.useEffect(function(){return Ul.push(o),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Al),document.addEventListener("touchmove",l,Al),document.addEventListener("touchstart",u,Al),function(){Ul=Ul.filter(function(e){return e!==o}),document.removeEventListener("wheel",l,Al),document.removeEventListener("touchmove",l,Al),document.removeEventListener("touchstart",u,Al)}},[]);var p=e.removeScrollBar,f=e.inert;return wt.createElement(wt.Fragment,null,f?wt.createElement(o,{styles:$l(i)}):null,p?wt.createElement(El,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},vl.useMedium(Vl),ml);var Vl,Gl=wt.forwardRef(function(e,t){return wt.createElement(xl,al({},e,{ref:t,sideCar:ql}))});Gl.classNames=xl.classNames;var Yl=["Enter"," "],Xl=["ArrowUp","PageDown","End"],Kl=["ArrowDown","PageUp","Home",...Xl],Ql={ltr:[...Yl,"ArrowRight"],rtl:[...Yl,"ArrowLeft"]},Zl={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Jl="Menu",[ec,tc,nc]=Bi(Jl),[rc,ic]=Ci(Jl,[nc,ca,za]),oc=ca(),sc=za(),[ac,lc]=rc(Jl),[cc,uc]=rc(Jl),dc=t=>{const{__scopeMenu:n,open:r=!1,children:i,dir:o,onOpenChange:s,modal:a=!0}=t,l=oc(n),[c,u]=wt.useState(null),d=wt.useRef(!1),h=Ui(s),p=Wi(o);return wt.useEffect(()=>{const e=()=>{d.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>d.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),e.jsx(Ca,{...l,children:e.jsx(ac,{scope:n,open:r,onOpenChange:h,content:c,onContentChange:u,children:e.jsx(cc,{scope:n,onClose:wt.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:p,modal:a,children:i})})})};dc.displayName=Jl;var hc=wt.forwardRef((t,n)=>{const{__scopeMenu:r,...i}=t,o=oc(r);return e.jsx(Ma,{...o,...i,ref:n})});hc.displayName="MenuAnchor";var pc="MenuPortal",[fc,gc]=rc(pc,{forceMount:void 0}),mc=t=>{const{__scopeMenu:n,forceMount:r,children:i,container:o}=t,s=lc(pc,n);return e.jsx(fc,{scope:n,forceMount:r,children:e.jsx(Ea,{present:r||s.open,children:e.jsx(Ta,{asChild:!0,container:o,children:i})})})};mc.displayName=pc;var vc="MenuContent",[yc,xc]=rc(vc),bc=wt.forwardRef((t,n)=>{const r=gc(vc,t.__scopeMenu),{forceMount:i=r.forceMount,...o}=t,s=lc(vc,t.__scopeMenu),a=uc(vc,t.__scopeMenu);return e.jsx(ec.Provider,{scope:t.__scopeMenu,children:e.jsx(Ea,{present:i||s.open,children:e.jsx(ec.Slot,{scope:t.__scopeMenu,children:a.modal?e.jsx(wc,{...o,ref:n}):e.jsx(_c,{...o,ref:n})})})})}),wc=wt.forwardRef((t,n)=>{const r=lc(vc,t.__scopeMenu),i=wt.useRef(null),o=Hr(n,i);return wt.useEffect(()=>{const e=i.current;if(e)return sl(e)},[]),e.jsx(kc,{...t,ref:o,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Si(t.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),_c=wt.forwardRef((t,n)=>{const r=lc(vc,t.__scopeMenu);return e.jsx(kc,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Sc=Ka("MenuContent.ScrollLock"),kc=wt.forwardRef((t,n)=>{const{__scopeMenu:r,loop:i=!1,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:p,onDismiss:f,disableOutsideScroll:g,...m}=t,v=lc(vc,r),y=uc(vc,r),x=oc(r),b=sc(r),w=tc(r),[_,S]=wt.useState(null),k=wt.useRef(null),C=Hr(n,k,v.onContentChange),M=wt.useRef(0),I=wt.useRef(""),P=wt.useRef(0),T=wt.useRef(null),E=wt.useRef("right"),j=wt.useRef(0),R=g?Gl:wt.Fragment,A=g?{as:Sc,allowPinchZoom:!0}:void 0,N=e=>{const t=I.current+e,n=w().filter(e=>!e.disabled),r=document.activeElement,i=n.find(e=>e.ref.current===r)?.textValue,o=function(e,t,n){const r=t.length>1&&Array.from(t).every(e=>e===t[0]),i=r?t[0]:t,o=n?e.indexOf(n):-1;let s=(a=e,l=Math.max(o,0),a.map((e,t)=>a[(l+t)%a.length]));var a,l;1===i.length&&(s=s.filter(e=>e!==n));const c=s.find(e=>e.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}(n.map(e=>e.textValue),t,i),s=n.find(e=>e.textValue===o)?.ref.current;!function e(t){I.current=t,window.clearTimeout(M.current),""!==t&&(M.current=window.setTimeout(()=>e(""),1e3))}(t),s&&setTimeout(()=>s.focus())};wt.useEffect(()=>()=>window.clearTimeout(M.current),[]),Ji();const L=wt.useCallback(e=>E.current===T.current?.side&&function(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return function(e,t){const{x:n,y:r}=e;let i=!1;for(let o=0,s=t.length-1;o<t.length;s=o++){const e=t[o],a=t[s],l=e.x,c=e.y,u=a.x,d=a.y;c>r!=d>r&&n<(u-l)*(r-c)/(d-c)+l&&(i=!i)}return i}(n,t)}(e,T.current?.area),[]);return e.jsx(yc,{scope:r,searchRef:I,onItemEnter:wt.useCallback(e=>{L(e)&&e.preventDefault()},[L]),onItemLeave:wt.useCallback(e=>{L(e)||(k.current?.focus(),S(null))},[L]),onTriggerLeave:wt.useCallback(e=>{L(e)&&e.preventDefault()},[L]),pointerGraceTimerRef:P,onPointerGraceIntentChange:wt.useCallback(e=>{T.current=e},[]),children:e.jsx(R,{...A,children:e.jsx(io,{asChild:!0,trapped:o,onMountAutoFocus:Si(s,e=>{e.preventDefault(),k.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:e.jsx(Xi,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:p,onDismiss:f,children:e.jsx(Ya,{asChild:!0,...b,dir:y.dir,orientation:"vertical",loop:i,currentTabStopId:_,onCurrentTabStopIdChange:S,onEntryFocus:Si(c,e=>{y.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(Ia,{role:"menu","aria-orientation":"vertical","data-state":Kc(v.open),"data-radix-menu-content":"",dir:y.dir,...x,...m,ref:C,style:{outline:"none",...m.style},onKeyDown:Si(m.onKeyDown,e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,r=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!n&&r&&N(e.key));const i=k.current;if(e.target!==i)return;if(!Kl.includes(e.key))return;e.preventDefault();const o=w().filter(e=>!e.disabled).map(e=>e.ref.current);Xl.includes(e.key)&&o.reverse(),function(e){const t=document.activeElement;for(const n of e){if(n===t)return;if(n.focus(),document.activeElement!==t)return}}(o)}),onBlur:Si(t.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(M.current),I.current="")}),onPointerMove:Si(t.onPointerMove,Jc(e=>{const t=e.target,n=j.current!==e.clientX;if(e.currentTarget.contains(t)&&n){const t=e.clientX>j.current?"right":"left";E.current=t,j.current=e.clientX}}))})})})})})})});bc.displayName=vc;var Cc=wt.forwardRef((t,n)=>{const{__scopeMenu:r,...i}=t;return e.jsx(Ni.div,{role:"group",...i,ref:n})});Cc.displayName="MenuGroup";var Mc=wt.forwardRef((t,n)=>{const{__scopeMenu:r,...i}=t;return e.jsx(Ni.div,{...i,ref:n})});Mc.displayName="MenuLabel";var Ic="MenuItem",Pc="menu.itemSelect",Tc=wt.forwardRef((t,n)=>{const{disabled:r=!1,onSelect:i,...o}=t,s=wt.useRef(null),a=uc(Ic,t.__scopeMenu),l=xc(Ic,t.__scopeMenu),c=Hr(n,s),u=wt.useRef(!1);return e.jsx(Ec,{...o,ref:c,disabled:r,onClick:Si(t.onClick,()=>{const e=s.current;if(!r&&e){const t=new CustomEvent(Pc,{bubbles:!0,cancelable:!0});e.addEventListener(Pc,e=>i?.(e),{once:!0}),Li(e,t),t.defaultPrevented?u.current=!1:a.onClose()}}),onPointerDown:e=>{t.onPointerDown?.(e),u.current=!0},onPointerUp:Si(t.onPointerUp,e=>{u.current||e.currentTarget?.click()}),onKeyDown:Si(t.onKeyDown,e=>{const t=""!==l.searchRef.current;r||t&&" "===e.key||Yl.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});Tc.displayName=Ic;var Ec=wt.forwardRef((t,n)=>{const{__scopeMenu:r,disabled:i=!1,textValue:o,...s}=t,a=xc(Ic,r),l=sc(r),c=wt.useRef(null),u=Hr(n,c),[d,h]=wt.useState(!1),[p,f]=wt.useState("");return wt.useEffect(()=>{const e=c.current;e&&f((e.textContent??"").trim())},[s.children]),e.jsx(ec.ItemSlot,{scope:r,disabled:i,textValue:o??p,children:e.jsx(Xa,{asChild:!0,...l,focusable:!i,children:e.jsx(Ni.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...s,ref:u,onPointerMove:Si(t.onPointerMove,Jc(e=>{if(i)a.onItemLeave(e);else if(a.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}})),onPointerLeave:Si(t.onPointerLeave,Jc(e=>a.onItemLeave(e))),onFocus:Si(t.onFocus,()=>h(!0)),onBlur:Si(t.onBlur,()=>h(!1))})})})}),jc=wt.forwardRef((t,n)=>{const{checked:r=!1,onCheckedChange:i,...o}=t;return e.jsx(zc,{scope:t.__scopeMenu,checked:r,children:e.jsx(Tc,{role:"menuitemcheckbox","aria-checked":Qc(r)?"mixed":r,...o,ref:n,"data-state":Zc(r),onSelect:Si(o.onSelect,()=>i?.(!!Qc(r)||!r),{checkForDefaultPrevented:!1})})})});jc.displayName="MenuCheckboxItem";var Rc="MenuRadioGroup",[Ac,Nc]=rc(Rc,{value:void 0,onValueChange:()=>{}}),Lc=wt.forwardRef((t,n)=>{const{value:r,onValueChange:i,...o}=t,s=Ui(i);return e.jsx(Ac,{scope:t.__scopeMenu,value:r,onValueChange:s,children:e.jsx(Cc,{...o,ref:n})})});Lc.displayName=Rc;var Oc="MenuRadioItem",Dc=wt.forwardRef((t,n)=>{const{value:r,...i}=t,o=Nc(Oc,t.__scopeMenu),s=r===o.value;return e.jsx(zc,{scope:t.__scopeMenu,checked:s,children:e.jsx(Tc,{role:"menuitemradio","aria-checked":s,...i,ref:n,"data-state":Zc(s),onSelect:Si(i.onSelect,()=>o.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});Dc.displayName=Oc;var Fc="MenuItemIndicator",[zc,Bc]=rc(Fc,{checked:!1}),$c=wt.forwardRef((t,n)=>{const{__scopeMenu:r,forceMount:i,...o}=t,s=Bc(Fc,r);return e.jsx(Ea,{present:i||Qc(s.checked)||!0===s.checked,children:e.jsx(Ni.span,{...o,ref:n,"data-state":Zc(s.checked)})})});$c.displayName=Fc;var Wc=wt.forwardRef((t,n)=>{const{__scopeMenu:r,...i}=t;return e.jsx(Ni.div,{role:"separator","aria-orientation":"horizontal",...i,ref:n})});Wc.displayName="MenuSeparator";var Uc=wt.forwardRef((t,n)=>{const{__scopeMenu:r,...i}=t,o=oc(r);return e.jsx(Pa,{...o,...i,ref:n})});Uc.displayName="MenuArrow";var[Hc,qc]=rc("MenuSub"),Vc="MenuSubTrigger",Gc=wt.forwardRef((t,n)=>{const r=lc(Vc,t.__scopeMenu),i=uc(Vc,t.__scopeMenu),o=qc(Vc,t.__scopeMenu),s=xc(Vc,t.__scopeMenu),a=wt.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=s,u={__scopeMenu:t.__scopeMenu},d=wt.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return wt.useEffect(()=>d,[d]),wt.useEffect(()=>{const e=l.current;return()=>{window.clearTimeout(e),c(null)}},[l,c]),e.jsx(hc,{asChild:!0,...u,children:e.jsx(Ec,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":o.contentId,"data-state":Kc(r.open),...t,ref:Ur(n,o.onTriggerChange),onClick:e=>{t.onClick?.(e),t.disabled||e.defaultPrevented||(e.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Si(t.onPointerMove,Jc(e=>{s.onItemEnter(e),e.defaultPrevented||t.disabled||r.open||a.current||(s.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:Si(t.onPointerLeave,Jc(e=>{d();const t=r.content?.getBoundingClientRect();if(t){const n=r.content?.dataset.side,i="right"===n,o=i?-5:5,a=t[i?"left":"right"],c=t[i?"right":"left"];s.onPointerGraceIntentChange({area:[{x:e.clientX+o,y:e.clientY},{x:a,y:t.top},{x:c,y:t.top},{x:c,y:t.bottom},{x:a,y:t.bottom}],side:n}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(e),e.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Si(t.onKeyDown,e=>{const n=""!==s.searchRef.current;t.disabled||n&&" "===e.key||Ql[i.dir].includes(e.key)&&(r.onOpenChange(!0),r.content?.focus(),e.preventDefault())})})})});Gc.displayName=Vc;var Yc="MenuSubContent",Xc=wt.forwardRef((t,n)=>{const r=gc(vc,t.__scopeMenu),{forceMount:i=r.forceMount,...o}=t,s=lc(vc,t.__scopeMenu),a=uc(vc,t.__scopeMenu),l=qc(Yc,t.__scopeMenu),c=wt.useRef(null),u=Hr(n,c);return e.jsx(ec.Provider,{scope:t.__scopeMenu,children:e.jsx(Ea,{present:i||s.open,children:e.jsx(ec.Slot,{scope:t.__scopeMenu,children:e.jsx(kc,{id:l.contentId,"aria-labelledby":l.triggerId,...o,ref:u,align:"start",side:"rtl"===a.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{a.isUsingKeyboardRef.current&&c.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:Si(t.onFocusOutside,e=>{e.target!==l.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Si(t.onEscapeKeyDown,e=>{a.onClose(),e.preventDefault()}),onKeyDown:Si(t.onKeyDown,e=>{const t=e.currentTarget.contains(e.target),n=Zl[a.dir].includes(e.key);t&&n&&(s.onOpenChange(!1),l.trigger?.focus(),e.preventDefault())})})})})})});function Kc(e){return e?"open":"closed"}function Qc(e){return"indeterminate"===e}function Zc(e){return Qc(e)?"indeterminate":e?"checked":"unchecked"}function Jc(e){return t=>"mouse"===t.pointerType?e(t):void 0}Xc.displayName=Yc;var eu=dc,tu=hc,nu=mc,ru=bc,iu=Cc,ou=Mc,su=Tc,au=jc,lu=Lc,cu=Dc,uu=$c,du=Wc,hu=Uc,pu=Gc,fu=Xc,gu="DropdownMenu",[mu]=Ci(gu,[ic]),vu=ic(),[yu,xu]=mu(gu),bu=t=>{const{__scopeDropdownMenu:n,children:r,dir:i,open:o,defaultOpen:s,onOpenChange:a,modal:l=!0}=t,c=vu(n),u=wt.useRef(null),[d,h]=Ti({prop:o,defaultProp:s??!1,onChange:a,caller:gu});return e.jsx(yu,{scope:n,triggerId:fo(),triggerRef:u,contentId:fo(),open:d,onOpenChange:h,onOpenToggle:wt.useCallback(()=>h(e=>!e),[h]),modal:l,children:e.jsx(eu,{...c,open:d,onOpenChange:h,dir:i,modal:l,children:r})})};bu.displayName=gu;var wu="DropdownMenuTrigger",_u=wt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,disabled:i=!1,...o}=t,s=xu(wu,r),a=vu(r);return e.jsx(tu,{asChild:!0,...a,children:e.jsx(Ni.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...o,ref:Ur(n,s.triggerRef),onPointerDown:Si(t.onPointerDown,e=>{i||0!==e.button||!1!==e.ctrlKey||(s.onOpenToggle(),s.open||e.preventDefault())}),onKeyDown:Si(t.onKeyDown,e=>{i||(["Enter"," "].includes(e.key)&&s.onOpenToggle(),"ArrowDown"===e.key&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});_u.displayName=wu;var Su=t=>{const{__scopeDropdownMenu:n,...r}=t,i=vu(n);return e.jsx(nu,{...i,...r})};Su.displayName="DropdownMenuPortal";var ku="DropdownMenuContent",Cu=wt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,o=xu(ku,r),s=vu(r),a=wt.useRef(!1);return e.jsx(ru,{id:o.contentId,"aria-labelledby":o.triggerId,...s,...i,ref:n,onCloseAutoFocus:Si(t.onCloseAutoFocus,e=>{a.current||o.triggerRef.current?.focus(),a.current=!1,e.preventDefault()}),onInteractOutside:Si(t.onInteractOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;o.modal&&!r||(a.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Cu.displayName=ku;var Mu=wt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,o=vu(r);return e.jsx(iu,{...o,...i,ref:n})});Mu.displayName="DropdownMenuGroup";var Iu=wt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,o=vu(r);return e.jsx(ou,{...o,...i,ref:n})});Iu.displayName="DropdownMenuLabel";var Pu=wt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,o=vu(r);return e.jsx(su,{...o,...i,ref:n})});Pu.displayName="DropdownMenuItem";var Tu=wt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,o=vu(r);return e.jsx(au,{...o,...i,ref:n})});Tu.displayName="DropdownMenuCheckboxItem";wt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,o=vu(r);return e.jsx(lu,{...o,...i,ref:n})}).displayName="DropdownMenuRadioGroup";var Eu=wt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,o=vu(r);return e.jsx(cu,{...o,...i,ref:n})});Eu.displayName="DropdownMenuRadioItem";var ju=wt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,o=vu(r);return e.jsx(uu,{...o,...i,ref:n})});ju.displayName="DropdownMenuItemIndicator";var Ru=wt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,o=vu(r);return e.jsx(du,{...o,...i,ref:n})});Ru.displayName="DropdownMenuSeparator";wt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,o=vu(r);return e.jsx(hu,{...o,...i,ref:n})}).displayName="DropdownMenuArrow";var Au=wt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,o=vu(r);return e.jsx(pu,{...o,...i,ref:n})});Au.displayName="DropdownMenuSubTrigger";var Nu=wt.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...i}=t,o=vu(r);return e.jsx(fu,{...o,...i,ref:n,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Nu.displayName="DropdownMenuSubContent";var Lu=Su,Ou=Cu,Du=Iu,Fu=Pu,zu=Tu,Bu=Eu,$u=ju,Wu=Ru,Uu=Au,Hu=Nu;const qu=bu,Vu=_u,Gu=Mu;wt.forwardRef(({className:t,inset:n,children:r,...i},o)=>e.jsxs(Uu,{ref:o,className:rr("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",t),...i,children:[r,e.jsx(di,{className:"ml-auto"})]})).displayName=Uu.displayName;wt.forwardRef(({className:t,...n},r)=>e.jsx(Hu,{ref:r,className:rr("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...n})).displayName=Hu.displayName;const Yu=wt.forwardRef(({className:t,sideOffset:n=4,...r},i)=>e.jsx(Lu,{children:e.jsx(Ou,{ref:i,sideOffset:n,className:rr("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...r})}));Yu.displayName=Ou.displayName;const Xu=wt.forwardRef(({className:t,inset:n,...r},i)=>e.jsx(Fu,{ref:i,className:rr("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",n&&"pl-8",t),...r}));Xu.displayName=Fu.displayName;wt.forwardRef(({className:t,children:n,checked:r,...i},o)=>e.jsxs(zu,{ref:o,className:rr("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...i,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx($u,{children:e.jsx(ui,{className:"h-4 w-4"})})}),n]})).displayName=zu.displayName;wt.forwardRef(({className:t,children:n,...r},i)=>e.jsxs(Bu,{ref:i,className:rr("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx($u,{children:e.jsx(fi,{className:"h-2 w-2 fill-current"})})}),n]})).displayName=Bu.displayName;const Ku=wt.forwardRef(({className:t,inset:n,...r},i)=>e.jsx(Du,{ref:i,className:rr("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",t),...r}));Ku.displayName=Du.displayName;const Qu=wt.forwardRef(({className:t,...n},r)=>e.jsx(Wu,{ref:r,className:rr("-mx-1 my-1 h-px bg-muted",t),...n}));function Zu(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=n.reduce((t,{useScope:n,scopeName:r})=>({...t,...n(e)[`__scope${r}`]}),{});return wt.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}Qu.displayName=Wu.displayName;var Ju,ed,td=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((t,n)=>{const r=Yr(`Primitive.${n}`),i=wt.forwardRef((t,i)=>{const{asChild:o,...s}=t,a=o?r:n;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),e.jsx(a,{...s,ref:i})});return i.displayName=`Primitive.${n}`,{...t,[n]:i}},{}),nd={exports:{}},rd={};var id=(ed||(ed=1,nd.exports=function(){if(Ju)return rd;Ju=1;var e=Ct(),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useState,r=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function s(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!t(e,r)}catch(i){return!0}}var a="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),l=n({inst:{value:a,getSnapshot:t}}),c=l[0].inst,u=l[1];return i(function(){c.value=a,c.getSnapshot=t,s(c)&&u({inst:c})},[e,a,t]),r(function(){return s(c)&&u({inst:c}),e(function(){s(c)&&u({inst:c})})},[e]),o(a),a};return rd.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:a,rd}()),nd.exports);function od(){return()=>{}}var sd="Avatar",[ad]=function(t,n=[]){let r=[];const i=()=>{const e=r.map(e=>wt.createContext(e));return function(n){const r=n?.[t]||e;return wt.useMemo(()=>({[`__scope${t}`]:{...n,[t]:r}}),[n,r])}};return i.scopeName=t,[function(n,i){const o=wt.createContext(i);o.displayName=n+"Context";const s=r.length;r=[...r,i];const a=n=>{const{scope:r,children:i,...a}=n,l=r?.[t]?.[s]||o,c=wt.useMemo(()=>a,Object.values(a));return e.jsx(l.Provider,{value:c,children:i})};return a.displayName=n+"Provider",[a,function(e,r){const a=r?.[t]?.[s]||o,l=wt.useContext(a);if(l)return l;if(void 0!==i)return i;throw new Error(`\`${e}\` must be used within \`${n}\``)}]},Zu(i,...n)]}(sd),[ld,cd]=ad(sd),ud=wt.forwardRef((t,n)=>{const{__scopeAvatar:r,...i}=t,[o,s]=wt.useState("idle");return e.jsx(ld,{scope:r,imageLoadingStatus:o,onImageLoadingStatusChange:s,children:e.jsx(td.span,{...i,ref:n})})});ud.displayName=sd;var dd="AvatarImage",hd=wt.forwardRef((t,n)=>{const{__scopeAvatar:r,src:i,onLoadingStatusChange:o=()=>{},...s}=t,a=cd(dd,r),l=function(e,{referrerPolicy:t,crossOrigin:n}){const r=id.useSyncExternalStore(od,()=>!0,()=>!1),i=wt.useRef(null),o=r?(i.current||(i.current=new window.Image),i.current):null,[s,a]=wt.useState(()=>gd(o,e));return Ii(()=>{a(gd(o,e))},[o,e]),Ii(()=>{const e=e=>()=>{a(e)};if(!o)return;const r=e("loaded"),i=e("error");return o.addEventListener("load",r),o.addEventListener("error",i),t&&(o.referrerPolicy=t),"string"==typeof n&&(o.crossOrigin=n),()=>{o.removeEventListener("load",r),o.removeEventListener("error",i)}},[o,n,t]),s}(i,s),c=Ui(e=>{o(e),a.onImageLoadingStatusChange(e)});return Ii(()=>{"idle"!==l&&c(l)},[l,c]),"loaded"===l?e.jsx(td.img,{...s,ref:n,src:i}):null});hd.displayName=dd;var pd="AvatarFallback",fd=wt.forwardRef((t,n)=>{const{__scopeAvatar:r,delayMs:i,...o}=t,s=cd(pd,r),[a,l]=wt.useState(void 0===i);return wt.useEffect(()=>{if(void 0!==i){const e=window.setTimeout(()=>l(!0),i);return()=>window.clearTimeout(e)}},[i]),a&&"loaded"!==s.imageLoadingStatus?e.jsx(td.span,{...o,ref:n}):null});function gd(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}fd.displayName=pd;var md=ud,vd=hd,yd=fd;const xd=wt.forwardRef(({className:t,...n},r)=>e.jsx(md,{ref:r,className:rr("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...n}));xd.displayName=md.displayName;const bd=wt.forwardRef(({className:t,...n},r)=>e.jsx(vd,{ref:r,className:rr("aspect-square h-full w-full",t),...n}));bd.displayName=vd.displayName;const wd=wt.forwardRef(({className:t,...n},r)=>e.jsx(yd,{ref:r,className:rr("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...n}));function _d({sidebarOpen:t,onToggleSidebar:n}){const{theme:r,setTheme:i}=(()=>{const e=wt.useContext(wi);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e})();return e.jsxs("header",{className:"fixed top-0 left-0 right-0 h-[44px] lg:h-[48px] bg-[#FFFDF5] dark:bg-[#000000] border-b-[3px] lg:border-b-[4px] border-black dark:border-white z-40 flex items-center justify-between px-2 md:px-4 lg:px-5 shadow-[0_2px_0_0_rgba(0,0,0,1)] lg:shadow-[0_2px_0_0_rgba(0,0,0,1)] dark:shadow-[0_2px_0_0_rgba(255,255,255,0.3)]",children:[e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 group cursor-pointer",children:[e.jsx("div",{className:"relative flex items-center justify-center w-7 h-7 md:w-8 md:h-8 lg:w-9 lg:h-9 border-[2px] lg:border-[3px] border-black dark:border-white bg-[#FFD93D] group-hover:translate-x-0.5 group-hover:translate-y-0.5 transition-transform duration-100",children:e.jsx("span",{className:"material-symbols-outlined text-base md:text-lg text-black group-hover:rotate-12 transition-transform duration-300 font-black",children:"smart_toy"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-sm md:text-base lg:text-base font-black text-black dark:text-white uppercase tracking-tight leading-none",children:"AI TUTOR"}),e.jsxs("span",{className:"text-[7px] md:text-[8px] lg:text-[8px] font-bold text-black tracking-wider uppercase flex items-center gap-0.5 md:gap-1 bg-[#C4B5FD] px-1 md:px-1.5 py-0.5 border-[1.5px] border-black dark:border-white -ml-0.5 md:-ml-1",children:[e.jsx(yi,{className:"w-1.5 h-1.5 md:w-2 md:h-2"}),e.jsx("span",{className:"hidden sm:inline",children:"INTERACTIVE"}),e.jsx("span",{className:"sm:hidden",children:"AI"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsxs(ri,{type:"button",variant:"ghost",size:"icon",className:"w-7 h-7 md:w-8 md:h-8 lg:w-8 lg:h-8 border-[2px] border-black dark:border-white bg-[#FFFDF5] dark:bg-[#000000] hover:bg-[#FFD93D] dark:hover:bg-[#FFD93D] hover:translate-x-0.5 hover:translate-y-0.5 hover:shadow-none shadow-[1px_1px_0_0_rgba(0,0,0,1)] lg:shadow-[1px_1px_0_0_rgba(0,0,0,1)] dark:shadow-[1px_1px_0_0_rgba(255,255,255,0.3)] transition-all duration-100 text-black dark:text-white dark:hover:text-black",onClick:()=>i("dark"===r?"light":"dark"),children:[e.jsx(xi,{className:"h-[0.9rem] w-[0.9rem] md:h-[1rem] md:w-[1rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),e.jsx(mi,{className:"absolute h-[0.9rem] w-[0.9rem] md:h-[1rem] md:w-[1rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx("span",{className:"sr-only",children:"Toggle theme"})]}),e.jsxs(qu,{children:[e.jsx(Vu,{asChild:!0,children:e.jsx(ri,{variant:"ghost",className:"relative h-7 w-7 md:h-8 md:w-8 lg:h-8 lg:w-8 p-0 border-[2px] border-black dark:border-white bg-[#FF6B6B] hover:bg-[#FF6B6B] hover:translate-x-0.5 hover:translate-y-0.5 hover:shadow-none shadow-[1px_1px_0_0_rgba(0,0,0,1)] lg:shadow-[1px_1px_0_0_rgba(0,0,0,1)] dark:shadow-[1px_1px_0_0_rgba(255,255,255,0.3)] transition-all duration-100",children:e.jsxs(xd,{className:"h-full w-full border-none",children:[e.jsx(bd,{src:"https://github.com/shadcn.png",alt:"@shadcn"}),e.jsx(wd,{className:"bg-transparent text-white font-black text-xs",children:"CN"})]})})}),e.jsxs(Yu,{className:"w-48 md:w-56",align:"end",forceMount:!0,children:[e.jsx(Ku,{className:"font-normal",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"User"}),e.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:"user@example.com"})]})}),e.jsx(Qu,{}),e.jsxs(Gu,{children:[e.jsxs(Xu,{children:[e.jsx(bi,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Account"})]}),e.jsxs(Xu,{children:[e.jsx(vi,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Settings"})]})]}),e.jsx(Qu,{}),e.jsxs(Xu,{className:"text-[#FF6B6B] focus:text-[#FF6B6B]",children:[e.jsx(gi,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Log out"})]})]})]}),e.jsx(ri,{type:"button",variant:"ghost",size:"icon",className:"w-7 h-7 md:w-8 md:h-8 lg:w-8 lg:h-8 border-[2px] border-black dark:border-white bg-[#FFD93D] hover:bg-[#FFD93D] hover:translate-x-0.5 hover:translate-y-0.5 hover:shadow-none shadow-[1px_1px_0_0_rgba(0,0,0,1)] lg:shadow-[1px_1px_0_0_rgba(0,0,0,1)] dark:shadow-[1px_1px_0_0_rgba(255,255,255,0.3)] transition-all duration-100 text-black",onClick:n,children:t?e.jsx(Br,{className:"w-4 h-4 lg:w-[1.1rem] lg:h-[1.1rem] font-black"}):e.jsx($r,{className:"w-4 h-4 lg:w-[1.1rem] lg:h-[1.1rem] font-black"})})]})]})}wd.displayName=yd.displayName;const Sd=["#FF6B6B","#FFD93D","#C4B5FD"];function kd(){const[t,n]=wt.useState([]);wt.useEffect(()=>{n((()=>{const e=[],t=["circle","square","triangle"];for(let n=0;n<12;n++){const n=t[Math.floor(Math.random()*t.length)],r=Sd[Math.floor(Math.random()*Sd.length)],i=Math.floor(29*Math.random())+29,o=Math.floor(120*Math.random())-10,s=Math.floor(120*Math.random())-10;e.push({type:n,color:r,size:i,x:o,y:s})}return e})())},[]);return e.jsx("div",{className:"background-shapes",children:t.map((t,n)=>((t,n)=>{const r="currentColor";switch(t.type){case"circle":return e.jsx("svg",{width:t.size,height:t.size,style:{position:"absolute",left:`${t.x}%`,top:`${t.y}%`},children:e.jsx("circle",{cx:t.size/2,cy:t.size/2,r:t.size/2-5,fill:t.color,stroke:r,strokeWidth:3})},n);case"square":return e.jsx("svg",{width:t.size,height:t.size,style:{position:"absolute",left:`${t.x}%`,top:`${t.y}%`},children:e.jsx("rect",{x:5,y:5,width:t.size-10,height:t.size-10,fill:t.color,stroke:r,strokeWidth:3})},n);case"rectangle":return e.jsx("svg",{width:t.width,height:t.height,style:{position:"absolute",left:`${t.x}%`,top:`${t.y}%`},children:e.jsx("rect",{x:5,y:5,width:(t.width||t.size)-10,height:(t.height||t.size)-10,fill:t.color,stroke:r,strokeWidth:3})},n);case"triangle":const i=t.size,o=5,s=`\n          ${i/2},${o}\n          ${i-o},${i-o}\n          ${o},${i-o}\n        `;return e.jsx("svg",{width:t.size,height:t.size,style:{position:"absolute",left:`${t.x}%`,top:`${t.y}%`},children:e.jsx("polygon",{points:s,fill:t.color,stroke:r,strokeWidth:3})},n);default:return null}})(t,n))})}const Cd=wt.forwardRef(({className:t,...n},r)=>e.jsx("div",{ref:r,className:rr("rounded-xl border bg-card text-card-foreground shadow",t),...n}));Cd.displayName="Card";const Md=wt.forwardRef(({className:t,...n},r)=>e.jsx("div",{ref:r,className:rr("flex flex-col space-y-1.5 p-6",t),...n}));Md.displayName="CardHeader";const Id=wt.forwardRef(({className:t,...n},r)=>e.jsx("div",{ref:r,className:rr("font-semibold leading-none tracking-tight",t),...n}));Id.displayName="CardTitle";const Pd=wt.forwardRef(({className:t,...n},r)=>e.jsx("div",{ref:r,className:rr("text-sm text-muted-foreground",t),...n}));Pd.displayName="CardDescription";const Td=wt.forwardRef(({className:t,...n},r)=>e.jsx("div",{ref:r,className:rr("p-6 pt-0",t),...n}));Td.displayName="CardContent";const Ed=wt.forwardRef(({className:t,...n},r)=>e.jsx("div",{ref:r,className:rr("flex items-center p-6 pt-0",t),...n}));Ed.displayName="CardFooter";const jd=wt.createContext({assetStatuses:{},setAssetStatus:(e,t)=>{}}),Rd={characterCount:({used:e,num:t})=>1===t?`${e} / ${t} Character`:`${e} / ${t} Characters`,closeKeypad:"close math keypad",openKeypad:"open math keypad",mathInputBox:"Math input box",removeHighlight:"Remove highlight",addHighlight:"Add highlight",hintPos:({pos:e})=>`Hint #${e}`,errorRendering:({error:e})=>`Error rendering: ${e}`,APPROXIMATED_PI_ERROR:"Your answer is close, but you may have approximated pi. Enter your answer as a multiple of pi, like <code>12\\ \\text{pi}</code> or <code>2/3\\ \\text{pi}</code>",EXTRA_SYMBOLS_ERROR:"We could not understand your answer. Please check your answer for extra text or symbols.",NEEDS_TO_BE_SIMPLFIED_ERROR:"Your answer is almost correct, but it needs to be simplified.",MISSING_PERCENT_ERROR:"Your answer is almost correct, but it is missing a <code>\\%</code> at the end.",MULTIPLICATION_SIGN_ERROR:"I'm a computer. I only understand multiplication if you use an asterisk (*) as the multiplication sign.",USER_INPUT_EMPTY:"Your answer is empty.",USER_INPUT_TOO_LONG:"Please shorten your response.",WRONG_CASE_ERROR:"Your answer includes use of a variable with the wrong case.",WRONG_LETTER_ERROR:"Your answer includes a wrong variable letter.",invalidSelection:"Make sure you select something for every row.",ERROR_TITLE:"Oops!",ERROR_MESSAGE:"Sorry, I don't understand that!",hints:"Hints",getAnotherHint:"Get another hint",deprecatedStandin:"Sorry, this part of the question is no longer available. 😅 Don't worry, you won't be graded on this part. Keep going!",keepTrying:"Keep trying",tryAgain:"Try again",check:"Check",correctExcited:"Correct!",nextQuestion:"Next question",skipToTitle:({title:e})=>`Skip to ${e}`,current:"Current",correct:"Correct",correctSelected:"Correct (selected)",incorrect:"Incorrect",incorrectSelected:"Incorrect (selected)",hideExplanation:"Hide explanation",explain:"Explain",INVALID_MESSAGE_PREFIX:"We couldn't grade your answer.",DEFAULT_INVALID_MESSAGE_1:"It looks like you left something blank or ",DEFAULT_INVALID_MESSAGE_2:"entered in an invalid answer.",integerExample:"an integer, like $6$",properExample:"a *proper* fraction, like $1/2$ or $6/10$",simplifiedProperExample:"a *simplified proper* fraction, like $3/5$",improperExample:"an *improper* fraction, like $10/7$ or $14/8$",simplifiedImproperExample:"a *simplified improper* fraction, like $7/4$",mixedExample:"a mixed number, like $1\\ 3/4$",decimalExample:"an *exact* decimal, like $0.75$",percentExample:"a percent, like $12.34\\%$",piExample:"a multiple of pi, like $12\\ \\text{pi}$ or $2/3\\ \\text{pi}$",yourAnswer:"**Your answer should be** ",yourAnswerLabel:"Your answer:",addPoints:"Click to add points",addVertices:"Click to add vertices",tapMultiple:"Tap each dot on the image to select all answers that apply.",tapSingle:"Tap each dot on the image to select an answer.",clickMultiple:"Click each dot on the image to select all answers that apply.",clickSingle:"Click each dot on the image to select an answer.",choices:"Choices:",answers:({num:e})=>1===e?`${e} answer`:`${e} answers`,hideAnswersToggleLabel:"Hide answer choices",moves:({num:e})=>`Moves: ${e}`,clickTiles:"Click on the tiles to change the lights.",turnOffLights:"You must turn on all of the lights to continue.",fillAllCells:"Make sure you fill in all cells in the matrix.",molecularDrawing:({content:e})=>`A molecular structure drawing. SMILES notation: ${e}`,switchDirection:"Switch direction",circleOpen:"Make circle open",circleFilled:"Make circle filled",numDivisions:"Number of divisions:",divisions:({divRangeString:e})=>`Please make sure the number of divisions is in the range ${e}.`,lineRange:({lineRange:e})=>`lines ${e}`,lineNumber:({lineNumber:e})=>`line ${e}`,symbolPassage:({questionSymbol:e,questionNumber:t})=>`The symbol ${e} indicates that question ${t} references this portion of the passage.`,symbolQuestion:({sentenceSymbol:e})=>` The symbol ${e} indicates that the following sentence is referenced in a question.`,lineLabel:"Line",beginningPassage:"Beginning of reading passage.",beginningFootnotes:"Beginning of reading passage footnotes.",endPassage:"End of reading passage.",questionMarker:({number:e})=>`[Marker for question ${e}]`,circleMarker:({number:e})=>`[Circle marker ${e}]`,sentenceMarker:({number:e})=>`[Sentence ${e}]`,dragHandles:"Drag handles to make graph",tapAddPoints:"Tap to add points",false:"False",true:"True",no:"No",yes:"Yes",chooseCorrectNum:"Please choose the correct number of answers.",notNoneOfTheAbove:"'None of the above' may not be selected when other answers are selected.",noneOfTheAbove:"None of the above",chooseNumAnswers:({numCorrect:e})=>`Choose ${e} answers:`,chooseAllAnswers:"Choose all answers that apply:",chooseOneAnswer:"Choose 1 answer:",choiceCheckedCorrect:({letter:e})=>`(Choice ${e}, Checked, Correct)`,choiceCorrect:({letter:e})=>`(Choice ${e}, Correct)`,choiceCheckedIncorrect:({letter:e})=>`(Choice ${e}, Checked, Incorrect)`,choiceIncorrect:({letter:e})=>`(Choice ${e}, Incorrect)`,choiceChecked:({letter:e})=>`(Choice ${e}, Checked)`,choice:({letter:e})=>`(Choice ${e})`,bringBack:"Bring back",openMenuForChoice:({letter:e})=>`Open menu for Choice ${e}`,letters:"A B C D E F G H I J K L M N O P Q R S T U V W X Y Z",scrollAnswers:"Scroll Answers",scrollStart:"Scroll to view start of the content",scrollEnd:"Scroll to view the end of the content",rightArrow:"Reaction arrow pointing to the right.",dontUnderstandUnits:"I couldn't understand those units.",checkSigFigs:"Check your significant figures.",answerNumericallyIncorrect:"That answer is numerically incorrect.",checkUnits:"Check your units.",dontUnderstand:"I don't understand that",loading:"Loading...",videoTranscript:"See video transcript",somethingWrong:"Something went wrong.",videoWrapper:"Khan Academy video wrapper",mathInputTitle:"mathematics keyboard",mathInputDescription:"Use keyboard/mouse to interact with math-based input fields",sin:"sin",cos:"cos",tan:"tan",simulationLoadFail:"Sorry, this simulation cannot load.",simulationLocaleWarning:"Sorry, this simulation isn't available in your language.",selectAnAnswer:"Select an answer",srGraphInstructions:"Use the Tab key to move through the interactive elements in the graph. When an interactive element has focus, use Control + Shift + Arrows to move it.",srUnlimitedGraphInstructions:"Press Shift + Enter to interact with the graph. Use the Tab key to move through the interactive elements in the graph and access the graph Action Bar. When an interactive element has focus, use Control + Shift + Arrows to move it or use the Delete key to remove it from the graph. Use the buttons in the Action Bar to add or adjust elements within the graph.",graphKeyboardPrompt:"Press Shift + Enter to interact with the graph",addPoint:"Add Point",removePoint:"Remove Point",closePolygon:"Close shape",openPolygon:"Re-open shape",srPointAtCoordinates:({num:e,x:t,y:n})=>`Point ${e} at ${t} comma ${n}.`,srInteractiveElements:({elements:e})=>`Interactive elements: ${e}`,srNoInteractiveElements:"No interactive elements",srCircleGraph:"A circle on a coordinate plane.",srCircleShape:({centerX:e,centerY:t})=>`Circle. The center point is at ${e} comma ${t}.`,srCircleRadiusPointRight:({radiusPointX:e,radiusPointY:t})=>`Right radius endpoint at ${e} comma ${t}.`,srCircleRadiusPointLeft:({radiusPointX:e,radiusPointY:t})=>`Left radius endpoint at ${e} comma ${t}.`,srCircleRadius:({radius:e})=>`Circle radius is ${e}.`,srCircleOuterPoints:({point1X:e,point1Y:t,point2X:n,point2Y:r,point3X:i,point3Y:o,point4X:s,point4Y:a})=>`Points on the circle at ${e} comma ${t}, ${n} comma ${r}, ${i} comma ${o}, ${s} comma ${a}.`,srLinearGraph:"A line on a coordinate plane.",srLinearGraphPoints:({point1X:e,point1Y:t,point2X:n,point2Y:r})=>`The line has two points, point 1 at ${e} comma ${t} and point 2 at ${n} comma ${r}.`,srLinearGraphSlopeIncreasing:"Its slope increases from left to right.",srLinearGraphSlopeDecreasing:"Its slope decreases from left to right.",srLinearGraphSlopeHorizontal:"Its slope is zero.",srLinearGraphSlopeVertical:"Its slope is undefined.",srLinearGraphXOnlyIntercept:({xIntercept:e})=>`The line crosses the X-axis at ${e} comma 0.`,srLinearGraphYOnlyIntercept:({yIntercept:e})=>`The line crosses the Y-axis at 0 comma ${e}.`,srLinearGraphBothIntercepts:({xIntercept:e,yIntercept:t})=>`The line crosses the X-axis at ${e} comma 0 and the Y-axis at 0 comma ${t}.`,srLinearGraphOriginIntercept:"The line crosses the X and Y axes at the graph's origin.",srLinearGrabHandle:({point1X:e,point1Y:t,point2X:n,point2Y:r})=>`Line going through point ${e} comma ${t} and point ${n} comma ${r}.`,srAngleStartingSide:({x:e,y:t})=>`Point 3, starting side at ${e} comma ${t}.`,srAngleEndingSide:({x:e,y:t})=>`Point 2, ending side at ${e} comma ${t}.`,srAngleVertexWithAngleMeasure:({x:e,y:t,angleMeasure:n})=>`Point 1, vertex at ${e} comma ${t}. Angle ${n} degrees.`,srAngleGraphAriaLabel:"An angle on a coordinate plane.",srAngleGraphAriaDescription:({angleMeasure:e,vertexX:t,vertexY:n,startingSideX:r,startingSideY:i,endingSideX:o,endingSideY:s})=>`The angle measure is ${e} degrees with a vertex at ${t} comma ${n}, a point on the starting side at ${r} comma ${i} and a point on the ending side at ${o} comma ${s}.`,srAngleInteractiveElements:({vertexX:e,vertexY:t,startingSideX:n,startingSideY:r,endingSideX:i,endingSideY:o})=>`An angle formed by 3 points. The vertex is at ${e} comma ${t}. The starting side point is at ${n} comma ${r}. The ending side point is at ${i} comma ${o}.`,srSingleSegmentGraphAriaLabel:"A line segment on a coordinate plane.",srMultipleSegmentGraphAriaLabel:({countOfSegments:e})=>`${e} segments on a coordinate plane.`,srMultipleSegmentIndividualLabel:({point1X:e,point1Y:t,point2X:n,point2Y:r,indexOfSegment:i})=>`Segment ${i}: Endpoint 1 at ${e} comma ${t}. Endpoint 2 at ${n} comma ${r}.`,srSingleSegmentLabel:({point1X:e,point1Y:t,point2X:n,point2Y:r})=>`Endpoint 1 at ${e} comma ${t}. Endpoint 2 at ${n} comma ${r}.`,srSegmentLength:({length:e})=>`Segment length ${e} units.`,srSingleSegmentGraphEndpointAriaLabel:({endpointNumber:e,x:t,y:n})=>`Endpoint ${e} at ${t} comma ${n}.`,srMultipleSegmentGraphEndpointAriaLabel:({endpointNumber:e,x:t,y:n,indexOfSegment:r})=>`Endpoint ${e} on segment ${r} at ${t} comma ${n}.`,srSegmentGrabHandle:({point1X:e,point1Y:t,point2X:n,point2Y:r})=>`Segment from ${e} comma ${t} to ${n} comma ${r}.`,srLinearSystemGraph:"Two lines on a coordinate plane.",srLinearSystemPoints:({lineNumber:e,point1X:t,point1Y:n,point2X:r,point2Y:i})=>`Line ${e} has two points, point 1 at ${t} comma ${n} and point 2 at ${r} comma ${i}.`,srLinearSystemPoint:({lineNumber:e,pointSequence:t,x:n,y:r})=>`Point ${t} on line ${e} at ${n} comma ${r}.`,srLinearSystemGrabHandle:({lineNumber:e,point1X:t,point1Y:n,point2X:r,point2Y:i})=>`Line ${e} going through point ${t} comma ${n} and point ${r} comma ${i}.`,srLinearSystemIntersection:({x:e,y:t})=>`Line 1 and line 2 intersect at point ${e} comma ${t}.`,srLinearSystemParallel:"Line 1 and line 2 are parallel.",srRayGraph:"A ray on a coordinate plane.",srRayPoints:({point1X:e,point1Y:t,point2X:n,point2Y:r})=>`The endpoint is at ${e} comma ${t} and the ray goes through point ${n} comma ${r}.`,srRayGrabHandle:({point1X:e,point1Y:t,point2X:n,point2Y:r})=>`Ray with endpoint ${e} comma ${t} going through point ${n} comma ${r}.`,srRayEndpoint:({x:e,y:t})=>`Endpoint at ${e} comma ${t}.`,srRayTerminalPoint:({x:e,y:t})=>`Through point at ${e} comma ${t}.`,srQuadraticGraph:"A parabola on a 4-quadrant coordinate plane.",srQuadraticFaceUp:"The parabola opens upward.",srQuadraticFaceDown:"The parabola opens downward.",srQuadraticGraphVertexOrigin:"Vertex is at the origin.",srQuadraticGraphVertexXAxis:"Vertex is on the X-axis.",srQuadraticGraphVertexYAxis:"Vertex is on the Y-axis.",srQuadraticGraphVertexQuadrant:({quadrant:e})=>`Vertex is in quadrant ${e}.`,srQuadraticTwoXIntercepts:({intercept1:e,intercept2:t})=>`The X-intercepts are at ${e} comma 0 and ${t} comma 0.`,srQuadraticOneXIntercept:({intercept:e})=>`The X-intercept is at ${e} comma 0.`,srQuadraticYIntercept:({intercept:e})=>`The Y-intercept is at 0 comma ${e}.`,srQuadraticPointOrigin:({pointNumber:e})=>`Point ${e} on parabola at the origin.`,srQuadraticPointAxis:({pointNumber:e,x:t,y:n})=>`Point ${e} on parabola at ${t} comma ${n}.`,srQuadraticPointQuadrant:({pointNumber:e,x:t,y:n,quadrant:r})=>`Point ${e} on parabola in quadrant ${r} at ${t} comma ${n}.`,srQuadraticInteractiveElements:({point1X:e,point1Y:t,point2X:n,point2Y:r,point3X:i,point3Y:o})=>`Parabola with points at ${e} comma ${t}, ${n} comma ${r}, and ${i} comma ${o}.`,srPolygonGraph:"A polygon.",srPolygonGraphCoordinatePlane:"A polygon on a coordinate plane.",srPolygonGraphPointsNum:({num:e})=>`The polygon has ${e} points.`,srPolygonGraphPointsOne:"The polygon has 1 point.",srPolygonElementsNum:({num:e})=>`A polygon with ${e} points.`,srPolygonElementsOne:"A polygon with 1 point.",srPolygonPointAngleApprox:({angle:e})=>`Angle approximately equal to ${e} degrees.`,srPolygonPointAngle:({angle:e})=>`Angle equal to ${e} degrees.`,srPolygonSideLength:({pointNum:e,length:t})=>`A line segment, length equal to ${t} units, connects to point ${e}.`,srPolygonSideLengthApprox:({pointNum:e,length:t})=>`A line segment, length approximately equal to ${t} units, connects to point ${e}.`,srUnlimitedPolygonEmpty:"An empty coordinate plane.",srSinusoidGraph:"A sinusoid function on a coordinate plane.",srSinusoidRootPoint:({x:e,y:t})=>`Midline intersection at ${e} comma ${t}.`,srSinusoidMaxPoint:({x:e,y:t})=>`Maximum point at ${e} comma ${t}.`,srSinusoidMinPoint:({x:e,y:t})=>`Minimum point at ${e} comma ${t}.`,srSinusoidFlatPoint:({x:e,y:t})=>`Line through point at ${e} comma ${t}.`,srSinusoidDescription:({minValue:e,maxValue:t,cycleStart:n,cycleEnd:r})=>`The graph shows a wave with a minimum value of ${e} and a maximum value of ${t}. The wave completes a full cycle from ${n} to ${r}.`,srSinusoidInteractiveElements:({point1X:e,point1Y:t,point2X:n,point2Y:r})=>`Sinusoid graph with midline intersection point at ${e} comma ${t} and extremum point at ${n} comma ${r}.`},Ad={MISSING_PERCENT_ERROR:"MISSING_PERCENT_ERROR",NEEDS_TO_BE_SIMPLIFIED_ERROR:"NEEDS_TO_BE_SIMPLFIED_ERROR",APPROXIMATED_PI_ERROR:"APPROXIMATED_PI_ERROR",EXTRA_SYMBOLS_ERROR:"EXTRA_SYMBOLS_ERROR",WRONG_CASE_ERROR:"WRONG_CASE_ERROR",WRONG_LETTER_ERROR:"WRONG_LETTER_ERROR",MULTIPLICATION_SIGN_ERROR:"MULTIPLICATION_SIGN_ERROR",INVALID_SELECTION_ERROR:"invalidSelection",CHOOSE_CORRECT_NUM_ERROR:"chooseCorrectNum",NOT_NONE_ABOVE_ERROR:"notNoneOfTheAbove",FILL_ALL_CELLS_ERROR:"fillAllCells",USER_INPUT_EMPTY:"USER_INPUT_EMPTY",USER_INPUT_TOO_LONG:"USER_INPUT_TOO_LONG"};const Nd={strings:Rd||{},locale:"en"},Ld=wt.createContext(Nd);function Od({children:t,strings:n,locale:r}){return e.jsx(Ld.Provider,{value:{strings:n,locale:r},children:t})}const Dd=()=>wt.useContext(Ld);let Fd=null;const zd=()=>{if(Fd)return Fd;throw new Error(["Perseus has not been provided required dependencies.","setDependencies(dependencies) must be called first.","Make sure Perseus is being imported from javascript/perseus/perseus.js."].join("\n"))},Bd=wt.createContext({analytics:{onAnalyticsEvent:async()=>{}},useVideo:()=>{throw new Error("useVideo dependency not provided in Perseus dependencies")}}),$d=()=>wt.useContext(Bd);let Wd=!1;const Ud=function(e,t,n){return Array.isArray(e)?r.map(e,function(e){return Ud(e,t)}):t.call(n,e)};const Hd=/^\[\[\u2603 (([a-z-]+) ([0-9]+))\]\]/,qd=new RegExp(Hd.source+"$"),Vd="x".split(/(.)/g).length?function(e,t){return e.split(t)}:function(e,t){const n=[];let r,i=t.lastIndex=0;for(;r=t.exec(e);){const t=r;n.push(e.slice(i,t.index)),n.push(...t.slice(1)),i=t.index+t[0].length}return n.push(e.slice(i)),n};function Gd(e){return Array(e).fill("")}function Yd(e,t){const n=e*t,r=e,i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=Math.floor(r/i);return n<25?e:n<50?5===o?e:e/2:1===o?e/2:2===o?e/4:5===o?e/5:void 0}function Xd(e,t){return t/(e[1]-e[0])}function Kd(e,t){let n=Math.pow(10,Math.floor(Math.log(e/t)/Math.LN10));const r=t/e*n;return r<=.15?n*=10:r<=.35?n*=5:r<=.75&&(n*=2),n}const Qd=(e,t)=>{const n=t[1]-t[0],r=n/e;return r<=10?e:r<=20?2*e:Kd(n,10)};const Zd={pointerDown:!1,currentTouchIdentifier:null};const Jd={inputPathsEqual:function(e,t){return null==e||null==t?null==e==(null==t):e.length===t.length&&e.every((e,n)=>t[n]===e)},nestedMap:Ud,rWidgetRule:Hd,rTypeFromWidgetId:/^([a-z-]+) ([0-9]+)$/,rWidgetParts:qd,snowman:"☃",split:Vd,firstNumericalParse:function(e){let t;return u.predicate.createValidatorFunctional(function(e){return t=e,!0},{simplify:"optional",inexact:!0,forms:"integer, proper, improper, pi, log, mixed, decimal"})(e),t},stringArrayOfSize:Gd,stringArrayOfSize2D:function(e){const{rows:t,columns:n}=e;return Gd(t).map(()=>Gd(n))},gridDimensionConfig:function(e,t,n,r){const i=Xd(t,n);return{scale:i,tickStep:e/r,unityLabel:e*i>30}},getGridStep:function(e,t,n){return r(2).times(function(r){const i=Xd(e[r],n);return Yd(t[r],i)})},snapStepFromGridStep:function(e){return[e[0]/2,e[1]/2]},scaleFromExtent:Xd,tickStepFromExtent:function(e,t){const n=e[1]-e[0];let r;return r=15<n&&n<=20?23:n>100||n<5?10:16,Kd(n,r*(t/500))},gridStepFromTickStep:Yd,tickStepFromNumTicks:Kd,constrainedTickStepsFromTickSteps:function(e,t){return[Qd(e[0],t[0]),Qd(e[1],t[1])]},parseQueryString:function(e){e=e||window.location.search.substring(1);const t={},n=/\+/g,r=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(n," "))};let o;for(;o=r.exec(e);){const e=o;t[i(e[1])]=i(e[2])}return t},updateQueryString:function(e,t,n){n=encodeURIComponent(n);const r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),i=-1!==e.indexOf("?")?"&":"?";return e.match(r)?e.replace(r,"$1"+t+"="+n+"$2"):e+i+t+"="+n},strongEncodeURIComponent:function(e){return encodeURIComponent(e).replace(/['()!]/g,window.escape).replace(/\*/g,"%2A")},touchHandlers:Zd,resetTouchHandlers:function(){Object.assign(Zd,{pointerDown:!1,currentTouchIdentifier:null})},extractPointerLocation:function(e){let t;if(Zd.pointerDown){if(null!=Zd.currentTouchIdentifier){const n=e.changedTouches?e.changedTouches.length:0;for(let r=0;r<n;r++)e.changedTouches[r].identifier===Zd.currentTouchIdentifier&&(t=e.changedTouches[r])}else t=e;const n="touchend"===e.type||"touchcancel"===e.type;t&&n&&(Zd.pointerDown=!1,Zd.currentTouchIdentifier=null)}else Zd.pointerDown=!0,e.changedTouches?(t=e.changedTouches[0],Zd.currentTouchIdentifier=t.identifier):t=e;if(t)return{left:t.pageX,top:t.pageY}},supportsPassiveEvents:()=>{try{const e=Object.defineProperty({},"passive",{get:function(){Wd=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch{}return Wd},captureScratchpadTouchStart:function(e){e.stopPropagation()},getImageSize:function(e,t){const n=new Image;n.onload=function(){0===n.width&&0===n.height?(document.body?.appendChild(n),r.defer(function(){t(n.clientWidth,n.clientHeight),document.body?.removeChild(n)})):t(n.width,n.height)},n.src=l(e)},getImageSizeModern:c,getRealImageUrl:l,isLabeledSVG:a,getBaseUrl:s,getSvgUrl:o,getDataUrl:i,textarea:{getWordBeforeCursor:function(e){const t=e.value,n=e.selectionStart-1,r=Math.max(t.lastIndexOf("\n",n),t.lastIndexOf(" ",n))+1;return{string:t.substring(r,n+1),pos:{start:r,end:n}}},moveCursor:function(e,t){e.selectionStart=t,e.selectionEnd=t}},unescapeMathMode:e=>e.startsWith("$")&&e.endsWith("$")?e.slice(1,-1):e},eh=(e,t)=>{zd().Log.log(e,t)},th=(e,t,n)=>{zd().Log.error(e,t,n)},nh=/^file\+graphie:/,rh=/\/([^/]+)$/;function ih(){const{JIPT:e,kaLocale:t}=zd();return e.useJIPT?"en-pt":t}function oh(){return"en"!==ih()}const sh=/\/(?=[^/]+$)/;const ah={};function lh(e,t){const n=function(e){const t=e.match(rh);if(null==t)throw new d("not a valid URL",h.InvalidInput);return t&&t[1]}(e),r=ah[n];if(null!=r)if(r.loaded){const{data:e,localized:n}=r;t(e,n)}else r.dataCallbacks.push(t);else{const r={loaded:!1,dataCallbacks:[t],localized:oh()};ah[n]=r;const i=async(e,t)=>{const i=await fetch(e);if(!i?.ok)return void t();const o=await i.text(),s=function(e,t,n){const r=t.match(new RegExp(`^(?:svgData|svgOtherData)${e}\\((.+)\\);$`)),i=r?r[1]:t;try{return JSON.parse(i)}catch(o){return n(o),null}}(n,o,t=>{th("Failed to parse JSONP for svg-image",h.Service,{cause:t,loggedMetadata:{dataUrl:Jd.getDataUrl(e),jsonp:o}})});if(!s)return;const a=ah[n]={...ah[n],loaded:!0,data:s};a.dataCallbacks.forEach(e=>{e(a.data,r.localized)})},o=(t,n,r)=>{th("Data load failed for svg-image",h.Service,{cause:r,loggedMetadata:{dataUrl:Jd.getDataUrl(e),status:n}})};oh()?(r.localized=!1,i(function(e){if(nh.test(e))return Jd.getDataUrl(e);const[t,n]=Jd.getBaseUrl(e).split(sh);return`${t}/${ih()}/${n}-data.json`}(e),()=>i(Jd.getDataUrl(e),o))):i(Jd.getDataUrl(e),o)}}function ch(e,t){const n=window.scrollX,r=window.scrollY,i=document.querySelector("meta[name=viewport]");i?i.setAttribute("content",e):p("head").append(`<meta name="viewport" content="${e}">`),document.body.style.opacity=.9999,setTimeout(()=>{document.body.style.opacity=1,window.scrollTo(n,r),null!=t&&setTimeout(t,0)},0)}function uh(){}function dh(e,t){this._fullHeight=this._fullWidth=this._overlay=null,this._targetImage=e,this._enableMobilePinch=t,this._$body=p(document.body)}p.fn.emulateTransitionEnd=function(e){let t=!1;const n=this;p(this).one("bsTransitionEnd",function(){t=!0});return setTimeout(function(){t||p(n).trigger(p.support.transition.end)},e),this},p(function(){p.support.transition=function(){const e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(const n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}(),p.support.transition&&(p.event.special.bsTransitionEnd={bindType:p.support.transition.end,delegateType:p.support.transition.end,handle:function(e){if(p(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})}),uh.prototype._initialize=function(e){this._$document||(this._activeZoom=this._initialScrollPosition=this._initialTouchPosition=this._touchMoveListener=null,this._$document=p(document),this._$window=p(window),this._$body=p(document.body),this._boundClick=p.proxy(this._clickHandler,this),this._enableMobilePinch=e)},uh.prototype.handleZoomClick=function(e,t){this._initialize(t);const n=e.target;if(n&&"IMG"===n.tagName&&!this._$body.hasClass("zoom-overlay-open"))return e.metaKey||e.ctrlKey?window.open(e.target.src,"_blank"):void(!t&&n.width>=window.innerWidth-dh.getOffset()||(this._activeZoomClose(!0),t?ch("width=device-width, initial-scale=1, minimum-scale=1",()=>this._zoom(n)):this._zoom(n),t||(this._$window.on("scroll.zoom",p.proxy(this._scrollHandler,this)),this._$document.on("keyup.zoom",p.proxy(this._keyHandler,this)),this._$document.on("touchstart.zoom",p.proxy(this._touchStart,this))),document.addEventListener("click",this._boundClick,!0),e.stopPropagation()))},uh.prototype._zoom=function(e){this._activeZoom=new dh(e,this._enableMobilePinch),this._activeZoom.zoomImage()},uh.prototype._activeZoomClose=function(e){this._activeZoom&&(e?(this._activeZoom.dispose(),this._disposeActiveZoom()):ch("width=device-width, initial-scale=1, minimum-scale=1,\n            maximum-scale=1",()=>{this._activeZoom&&(this._activeZoom.close(),this._disposeActiveZoom())}))},uh.prototype._disposeActiveZoom=function(){this._$window.off(".zoom"),this._$document.off(".zoom"),document.removeEventListener("click",this._boundClick,!0),this._activeZoom=null},uh.prototype._scrollHandler=function(e){null===this._initialScrollPosition&&(this._initialScrollPosition=window.scrollY);const t=this._initialScrollPosition-window.scrollY;Math.abs(t)>=40&&this._activeZoomClose()},uh.prototype._keyHandler=function(e){[27,13,32].includes(e.keyCode)&&this._activeZoomClose()},uh.prototype._clickHandler=function(e){e.stopPropagation(),e.preventDefault(),this._activeZoomClose()},uh.prototype._touchStart=function(e){this._initialTouchPosition=e.originalEvent.touches[0].pageY,p(e.target).on("touchmove.zoom",p.proxy(this._touchMove,this))},uh.prototype._touchMove=function(e){Math.abs(e.originalEvent.touches[0].pageY-this._initialTouchPosition)>10&&(this._activeZoomClose(),p(e.target).off("touchmove.zoom"))},dh._OFFSET=80,dh._MAX_WIDTH=2560,dh._MAX_HEIGHT=4096,dh.getOffset=function(e){return e?0:dh._OFFSET},dh.prototype.getOffset=function(){return dh.getOffset(this._enableMobilePinch)},dh.prototype.zoomImage=function(){const e=document.createElement("img"),t=p(e);e.onload=function(){this._fullHeight=Number(e.height),this._fullWidth=Number(e.width);const n=this._imageOffset=p(this._targetImage).offset(),r=this._left=n.left-p(window).scrollLeft(),i=this._top=n.top-p(window).scrollTop();t.css({left:r,top:i,width:this._targetImage.width,height:this._targetImage.height}),this._zoomOriginal()}.bind(this),e.src=this._targetImage.src,e.alt=this._targetImage.alt,e.tabIndex=0,e.role="button",this.$zoomedImage=t},dh.prototype._zoomOriginal=function(){this.$zoomedImage.addClass("zoom-img").attr("data-action","zoom-out"),p(this._targetImage).css("visibility","hidden"),this._backdrop=document.createElement("div"),this._backdrop.className="zoom-backdrop",document.body?.appendChild(this._backdrop),this._overlay=document.createElement("div"),this._overlay.className="zoom-overlay",document.body?.appendChild(this._overlay),this._overlay?.appendChild(this.$zoomedImage[0]),this._calculateZoom(),this._triggerAnimation()},dh.prototype._calculateZoom=function(){const e=this._fullWidth,t=this._fullHeight,n=window.innerHeight-this.getOffset(),r=window.innerWidth-this.getOffset(),i=e/this._targetImage.width,o=e/t,s=r/n;this._imgScaleFactor=e<r&&t<n?i:o<s?n/t*i:r/(e??0)*i},dh.prototype._triggerAnimation=function(){const e=p(window).scrollTop()+window.innerHeight/2,t=p(window).scrollLeft()+window.innerWidth/2,n=this._imgScaleFactor,r=this._imageOffset.top+this._targetImage.height/2,i=this._imageOffset.left+this._targetImage.width/2;this._translateY=(e-r)/n,this._translateX=(t-i)/n,this._zoomedInTransformString=`\n        scale(${n})\n        translate3d(${this._translateX}px, ${this._translateY}px, 0)\n    `,this.$zoomedImage.css({transform:this._zoomedInTransformString}).addClass("zoom-transition").one(p.support.transition.end,p.proxy(this._onZoomInFinish,this)).emulateTransitionEnd(300),this._$body.addClass("zoom-overlay-open")},dh.prototype._onZoomInFinish=function(){const e=this._targetImage.height*this._imgScaleFactor,t=this._targetImage.width*this._imgScaleFactor;let n=0,r=0,i=0,o=0,s=0,a=0;t<window.innerWidth?(n="50%",i=-t/2):s=(t-window.innerWidth)/2,e<window.innerHeight?(r="50%",o=-e/2):a=(e-window.innerHeight)/2,this.$zoomedImage.css({height:e,left:n,marginLeft:i,marginTop:o,top:r,transform:"",width:t}).removeClass("zoom-transition"),p(this._overlay).scrollLeft(s).scrollTop(a)},dh.prototype.close=function(){this._$body.removeClass("zoom-overlay-open").addClass("zoom-overlay-transitioning"),this.$zoomedImage.css({height:this._targetImage.height,left:this._left,marginLeft:0,marginTop:0,top:this._top,transform:this._zoomedInTransformString,width:this._targetImage.width}).removeClass("zoom-transition"),p(this._overlay).scrollLeft(0).scrollTop(0),setTimeout(()=>{this.$zoomedImage.css({transform:"scale(1)"}).addClass("zoom-transition").one(p.support.transition.end,p.proxy(this.dispose,this)).emulateTransitionEnd(300)},10)},dh.prototype.dispose=function(){this.$zoomedImage&&this.$zoomedImage[0].parentNode&&(this.$zoomedImage.remove(),this.$zoomedImage=null,this._overlay.parentNode.removeChild(this._overlay),this._backdrop.parentNode.removeChild(this._backdrop),this._$body.removeClass("zoom-overlay-transitioning")),p(this._targetImage).css("visibility","visible"),this._targetImage.focus()};const hh=new uh,ph="'Lato', sans-serif",fh="'Lato-Bold', 'Lato', sans-serif",gh="#71B307",mh="#FFFFFF",vh="#F6F7F7",yh="#D6D8DA",xh="#BABEC2",bh="#888D93",wh="#21242c",_h="#F9F9F9",Sh=16,kh=-16,Ch=16,Mh={defaultBoxSize:400,defaultBoxSizeSmall:288},Ih="#f86700",Ph="#df5c00",Th="#c75300",Eh="#be2612",jh="#BABEC2",Rh=Object.freeze(Object.defineProperty({__proto__:null,articleMaxWidthInPx:688,articleMaxWidthTableInPx:512,baseFontFamily:ph,baseUnitPx:Ch,boldFontFamily:fh,checkedColor:"#71B307",circleSize:24,gray17:wh,gray68:bh,gray76:xh,gray85:yh,gray97:vh,hintBorderWidth:4,interactiveSizes:Mh,kaGreen:gh,negativePhoneMargin:kh,phoneMargin:Sh,publishBlockingErrorColor:Eh,pureLgMax:"1279px",pureLgMin:"1024px",pureMdMax:"1023px",pureMdMin:"768px",pureSmMax:"767px",pureSmMin:"568px",pureXlMin:"1280px",pureXsMax:"567px",radioBorderColor:jh,radioMarginWidth:2,tableBackgroundAccent:_h,warningColor:Ih,warningColorActive:Th,warningColorHover:Ph,white:mh},Symbol.toStringTag,{value:"Module"}));class Ah extends wt.Component{_isMounted=!1;static defaultProps={className:"",constrainHeight:!1,allowFullBleed:!1};state={viewportHeight:null,viewportWidth:null};componentDidMount(){this._isMounted=!0,window.innerHeight<480?setTimeout(this._cacheViewportSize,800):this._cacheViewportSize()}componentWillUnmount(){this._isMounted=!1}_cacheViewportSize=()=>{this._isMounted&&this.setState({viewportHeight:Math.max(480,window.innerHeight),viewportWidth:window.innerWidth})};render(){const t=this.props.width/this.props.height,n=e.jsx("div",{style:{paddingBottom:100*(1/t).toFixed(4)+"%"}});let{width:r,height:i}=this.props;if(this.props.constrainHeight&&this.state.viewportHeight){const e=2/3*this.state.viewportHeight;this.props.height>=e&&(i=e,r=e*t)}const o={maxWidth:r,maxHeight:i},s=f("fixed-to-responsive",this.props.className),a=e.jsxs("div",{className:s,style:o,children:[n,this.props.children]});return this.props.allowFullBleed&&this.state.viewportWidth&&r>=this.state.viewportWidth?e.jsx("div",{style:{marginLeft:kh,marginRight:kh},children:a}):a}}g("@khanacademy/kmath","2.2.18");const Nh=Math.pow(2,-42);function Lh(e){return r.isNumber(e)&&!r.isNaN(e)}function Oh(e,t,n){return null==e||null==t?e===t:e===t||(null==n&&(n=1e-9),Math.abs(e-t)<n)}function Dh(e,t){return Oh(Math.round(e),e,t)}function Fh(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}function zh(e,t){return Math.round(e/t)*t}function Bh(e,t){return Math.floor(e/t)*t}function $h(e,t){return Math.ceil(e/t)*t}function Wh(e,t=Nh,n=1e3){let r=[1,0],i=[0,1],o=Math.floor(e),s=e-o;for(;i[0]<=n;){if(Oh(r[0]/i[0],e,t))return[r[0],i[0]];r=[o*r[0]+r[1],r[0]],i=[o*i[0]+i[1],i[0]],o=Math.floor(1/s),s=1/s-o}return[e,1]}var Uh=Object.freeze({__proto__:null,DEFAULT_TOLERANCE:1e-9,EPSILON:Nh,ceilTo:$h,equal:Oh,floorTo:Bh,is:Lh,isInteger:Dh,round:Fh,roundTo:zh,sign:function(e,t){return Oh(e,0,t)?0:Math.abs(e)/e},toFraction:Wh});function Hh(e){return e.reduce((e,t)=>e+t,0)}function qh(e){return e.reduce((e,t)=>e*t,1)}function Vh(...e){const t=Math.min(...e.map(e=>e.length)),n=[];for(let r=0;r<t;r++)n.push(e.map(e=>e[r]));return n}function Gh(e,t){return!!Array.isArray(e)&&((void 0===t||e.length===t)&&e.every(Lh))}function Yh(e){return ep(e,1/Xh(e))}function Xh(e){return Math.sqrt(Kh(e,e))}function Kh(e,t){return Hh(Vh(e,t).map(qh))}function Qh(...e){return Vh(...e).map(Hh)}function Zh(e,t){return Vh(e,t).map(e=>e[0]-e[1])}function Jh(e){return e.map(e=>-e)}function ep(e,t){return e.map(e=>e*t)}function tp(e,t,n){return e.length===t.length&&Vh(e,t).every(e=>Oh(e[0],e[1],n))}function np(e,t,n){return!(!Oh(Xh(e),0,n)&&!Oh(Xh(t),0,n))||tp(e=Yh(e),t=Yh(t),n)}function rp(e,t,n){return np(e,t,n)||np(e,Jh(t),n)}function ip(e){const t=Xh(e);let n=Math.atan2(e[1],e[0]);return n<0&&(n+=2*Math.PI),[t,n]}function op(e){const t=ip(e);return[t[0],180*t[1]/Math.PI]}function sp(e,t=0){return[e*Math.cos(t),e*Math.sin(t)]}function ap(e,t=0){return sp(e,t*Math.PI/180)}function lp(e,t){const n=ip(e),r=n[1]+t;return sp(n[0],r)}function cp(e,t){const n=op(e),r=n[1]+t;return ap(n[0],r)}function up(e,t){return Math.acos(Kh(e,t)/(Xh(e)*Xh(t)))}function dp(e,t){return ep(t,Kh(e,t)/Kh(t,t))}function hp(e,t){return e.map((e,n)=>Fh(e,t[n]||t))}function pp(e,t){return e.map((e,n)=>zh(e,t[n]||t))}function fp(e,t){return e.map((e,n)=>Bh(e,t[n]||t))}function gp(e,t){return e.map((e,n)=>$h(e,t[n]||t))}var mp=Object.freeze({__proto__:null,add:Qh,angleDeg:function(e,t){return 180*up(e,t)/Math.PI},angleRad:up,cartFromPolarDeg:ap,cartFromPolarRad:sp,ceilTo:gp,codirectional:np,collinear:rp,dot:Kh,equal:tp,floorTo:fp,is:Gh,length:Xh,map:function(e,t){return[t(e[0],0),t(e[1],1)]},negate:Jh,normalize:Yh,polarDegFromCart:op,polarRadFromCart:ip,projection:dp,rotateDeg:cp,rotateRad:lp,round:hp,roundTo:pp,scale:ep,subtract:Zh,zip:Vh});function vp(e,t){const n=Zh(t[1],t[0]),r=Zh(e,t[0]);return Xh(Zh(dp(r,n),r))}function yp(e,t){const n=Zh(t[1],t[0]),r=Zh(e,t[0]),i=Zh(ep(dp(r,n),2),r);return Qh(t[0],i)}const xp=Gh,bp=Qh,wp=Qh,_p=Zh,Sp=tp,kp=ip,Cp=op,Mp=sp,Ip=ap,Pp=hp,Tp=pp,Ep=fp,jp=gp;var Rp=Object.freeze({__proto__:null,addVector:bp,addVectors:wp,cartFromPolarDeg:Ip,cartFromPolarRad:Mp,ceilTo:jp,compare:function(e,t,n){if(e.length!==t.length)return e.length-t.length;for(let r=0;r<e.length;r++)if(!Oh(e[r],t[r],n))return e[r]-t[r];return 0},distanceToLine:vp,distanceToPoint:function(e,t){return Xh(Zh(e,t))},equal:Sp,floorTo:Ep,is:xp,polarDegFromCart:Cp,polarRadFromCart:kp,reflectOverLine:yp,rotateDeg:function(e,t,n){return void 0===n?cp(e,t):Qh(n,cp(Zh(e,n),t))},rotateRad:function(e,t,n){return void 0===n?lp(e,t):Qh(n,lp(Zh(e,n),t))},round:Pp,roundTo:Tp,subtractVector:_p});var Ap=Object.freeze({__proto__:null,distanceToPoint:function(e,t){return vp(t,e)},equal:function(e,t,n){const r=Zh(e[1],e[0]);return!!rp(r,Zh(t[1],t[0]),n)&&(!!Sp(e[0],t[0])||rp(r,Zh(t[0],e[0]),n))},midpoint:function(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]},reflectPoint:function(e,t){return yp(t,e)}});const Np={cleanMath:function(e){return"string"==typeof e?e.replace(/\+\s*-/g,"- ").replace(/-\s*-/g,"+ ").replace(/\^1/g,""):e},bound:function(e){return 0===e?e:e<0?-Np.bound(-e):Math.max(1e-6,Math.min(e,1e20))},factorial:function(e){return e<=1?e:e*Np.factorial(e-1)},getGCD:function(e,t){if(arguments.length>2){const t=[].slice.call(arguments,1);return Np.getGCD(e,Np.getGCD(...t))}let n;for(e=Math.abs(e),t=Math.abs(t);t;)n=e%t,e=t,t=n;return e},getLCM:function(e,t){if(arguments.length>2){const t=[].slice.call(arguments,1);return Np.getLCM(e,Np.getLCM(...t))}return Math.abs(e*t)/Np.getGCD(e,t)},primes:[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97],isPrime:function(e){if(e<=1)return!1;if(e<101)return!!p.grep(Np.primes,function(t,n){return Math.abs(t-e)<=.5}).length;if(e<=1||e>2&&e%2==0)return!1;for(let t=3,n=Math.sqrt(e);t<=n;t+=2)if(e%t===0)return!1;return!0},getPrimeFactorization:function(e){if(1===e)return[];if(Np.isPrime(e))return[e];const t=Math.sqrt(e);for(let n=2;n<=t;n++)if(e%n===0)return p.merge(Np.getPrimeFactorization(n),Np.getPrimeFactorization(e/n))},roundToNearest:function(e,t){return Math.round(t/e)*e},roundTo:function(e,t){const n=Math.pow(10,e).toFixed(5);return Math.round((t*n).toFixed(5))/n},toFixedApprox:function(e,t){const n=e.toFixed(t);return Oh(+n,e)?n:"\\approx "+n},roundToApprox:function(e,t){const n=Np.roundTo(t,e);return Oh(n,e)?String(n):Np.toFixedApprox(e,t)},toFraction:function(e,t){if(null==t&&(t=Math.pow(2,-46)),e<0||e>1){let n=e%1;n+=n<0?1:0;const r=Np.toFraction(n,t);return r[0]+=Math.round(e-n)*r[1],r}if(Math.abs(Math.round(Number(e))-e)<=t)return[Math.round(e),1];let n=0,r=1,i=1,o=1,s=1,a=2;for(;;){if(Math.abs(Number(s/a)-e)<=t)return[s,a];s/a<e?(n=s,r=a):(i=s,o=a),s=n+i,a=r+o}},getNumericFormat:function(e){if((e=(e=p.trim(e)).replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1")).match(/^[+-]?\d+$/))return"integer";if(e.match(/^[+-]?\d+\s+\d+\s*\/\s*\d+$/))return"mixed";const t=e.match(/^[+-]?(\d+)\s*\/\s*(\d+)$/);return t?parseFloat(t[1])>parseFloat(t[2])?"improper":"proper":e.replace(/[,. ]/g,"").match(/^\d+$/)?"decimal":e.match(/(pi?|\u03c0|t(?:au)?|\u03c4|pau)/)?"pi":null},toNumericString:function(e,t){if(null==e)return"";if(0===e)return"0";if("percent"===t)return 100*e+"%";if("pi"===t){const t=Wh(e/Math.PI),n=Math.abs(t[0]),r=t[1];if(Dh(n)){return(e<0?"-":"")+(1===n?"":n)+"π"+(1===r?"":"/"+r)}}if(r(["proper","improper","mixed","fraction"]).contains(t)){const n=Wh(e),r=Math.abs(n[0]),i=n[1],o=e<0?"-":"";if(1===i)return o+r;if("mixed"===t){const e=r%i,t=(r-e)/i;return o+(t?t+" ":"")+e+"/"+i}return o+r+"/"+i}return String(e)}};function Lp(e,t){return e+t}function Op(e){return v(e,0)?0:e>0?1:-1}function Dp(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}function Fp(e,t,n){return n[0]<=Math.max(e[0],t[0])&&n[0]>=Math.min(e[0],t[0])&&n[1]<=Math.max(e[1],t[1])&&n[1]>=Math.min(e[1],t[1])}function zp(e,t){const n=[[e[0],e[1],t[0]],[e[0],e[1],t[1]],[t[0],t[1],e[0]],[t[0],t[1],e[1]]],i=r.map(n,function(e){return Op(Dp(...e))});if(i[0]!==i[1]&&i[2]!==i[3])return!0;for(let r=0;r<4;r++)if(0===i[r]&&Fp(...n[r]))return!0;return!1}function Bp(e,t){return r.map(r.zip(e,t),function(e){return e[0]-e[1]})}function $p(e){const t=r.zip(e,e.slice(1).concat(e.slice(0,1))),n=r.map(t,function(e){const t=e[0],n=e[1];return(n[0]-t[0])*(n[1]+t[1])});return n.reduce(Lp,0)>0}function Wp(e){return Math.sqrt(r.reduce(e,function(e,t){return e+Math.pow(t,2)},0))}function Up(e){return r.zip(e,qp(e)).map(function(e){return Wp(Bp(...e))})}function Hp(e){const t=r.zip(qp(e,-1),e,qp(e,1)),n=r.map(t,function(e){const t=Bp(e[1],e[0]),n=Bp(e[2],e[1]),i=Math.acos((o=t,s=n,r.reduce(r.zip(o,s),function(e,t){return e+t[0]*t[1]},0)/(Wp(t)*Wp(n))));var o,s;return Op(Dp(...e))>0?i:-i}),i=r.reduce(n,function(e,t){return e+t},0);return r.map(n,function(e){return i>0?Math.PI-e:Math.PI+e})}function qp(e,t){return t=void 0===t?1:t%e.length,e.slice(t).concat(e.slice(0,t))}function Vp(e,t){const n=e[0][0],r=e[0][1],i=e[1][0],o=e[1][1],s=t[0][0],a=t[0][1],l=t[1][0],c=t[1][1],u=(n-i)*(a-c)-(r-o)*(s-l);if(Math.abs(u)<1e-9)return null;return[((n*o-r*i)*(s-l)-(n-i)*(s*c-a*l))/u,((n*o-r*i)*(a-c)-(r-o)*(s*c-a*l))/u]}var Gp=Object.freeze({__proto__:null,angleMeasures:Hp,canonicalSineCoefficients:function([e,t,n,r]){e<0&&(e*=-1,t*=-1,n*=-1);const i=2*Math.PI;for(t<0&&(t*=-1,n*=-1,n+=i/2);n>0;)n-=i;for(;n<0;)n+=i;return[e,t,n,r]},ccw:Dp,clockwise:$p,collinear:function(e,t,n){return v(Dp(e,t,n),0)},getLineEquation:function(e,t){if(v(e[0],t[0]))return"x = "+e[0].toFixed(3);const n=(t[1]-e[1])/(t[0]-e[0]),r=e[1]-n*e[0];return"y = "+n.toFixed(3)+"x + "+r.toFixed(3)},getLineIntersection:Vp,getLineIntersectionString:function(e,t){const n=Vp(e,t);if(null===n)return"Lines are parallel";const[r,i]=n;return"Intersection: ("+r.toFixed(3)+", "+i.toFixed(3)+")"},intersects:zp,lawOfCosines:function(e,t,n){return 180*Math.acos((e*e+t*t-n*n)/(2*e*t))/Math.PI},magnitude:Wp,polygonSidesIntersect:function(e){for(let t=0;t<e.length;t++)for(let n=t+1;n<e.length;n++){if(Sp(e[t],e[n]))return!0;const r=(t+1)%e.length,i=(n+1)%e.length;if(r===n||i===t)continue;if(zp([e[t],e[r]],[e[n],e[i]]))return!0}return!1},reverseVector:function(e){return[-e[0],-e[1]]},rotate:qp,sign:Op,similar:function(e,t,n){if(e.length!==t.length)return!1;const i=e.length,o=Hp(e),s=Hp(t),a=Up(e),l=Up(t);for(let c=0;c<2*i;c++){let e=s.slice(),t=l.slice();if(c>=i&&(e.reverse(),t.reverse(),t=qp(t,1)),e=qp(e,c),t=qp(t,c),m(o,e)){const e=r.zip(a,t),i=r.map(e,function(e){return e[0]/e[1]}),o=r.all(i,function(e){return v(i[0],e)}),s=r.all(e,function(e){return Oh(e[0],e[1],n)});if(o&&s)return!0}}return!1},vector:Bp});const Yp=(e,t)=>{const n=e[0]-t[0],r=e[1]-t[1];return n||r?(180+180*Math.atan2(-r,-n)/Math.PI+360)%360:0};var Xp=Object.freeze({__proto__:null,calculateAngleInDegrees:function([e,t]){return 180*Math.atan2(t,e)/Math.PI},convertDegreesToRadians:function(e){return e/180*Math.PI},convertRadiansToDegrees:function(e){const t=e/Math.PI*180;return Number(t.toPrecision(15))},getAngleFromVertex:Yp,getClockwiseAngle:(e,t=!1)=>{const n=[...e],r=!$p([n[0],n[2],n[1]])||t?n.reverse():n;return(Yp(r[0],r[1])+360-Yp(r[2],r[1]))%360},polar:function(e,t){return"number"==typeof e&&(e=[e,e]),t=t*Math.PI/180,[e[0]*Math.cos(t),e[1]*Math.sin(t)]}});var Kp=Object.freeze({__proto__:null,getQuadraticCoefficients:function(e){const t=e[0],n=e[1],r=e[2],i=(t[0]-n[0])*(t[0]-r[0])*(n[0]-r[0]);if(0===i)return;return[(r[0]*(n[1]-t[1])+n[0]*(t[1]-r[1])+t[0]*(r[1]-n[1]))/i,(r[0]*r[0]*(t[1]-n[1])+n[0]*n[0]*(r[1]-t[1])+t[0]*t[0]*(n[1]-r[1]))/i,(n[0]*r[0]*(n[0]-r[0])*t[1]+r[0]*t[0]*(r[0]-t[0])*n[1]+t[0]*n[0]*(t[0]-n[0])*r[1])/i]},getSinusoidCoefficients:function(e){const t=e[0],n=e[1],r=n[1]-t[1],i=Math.PI/(2*(n[0]-t[0]));return[r,i,t[0]*i,t[1]]}});function Qp(e,t){return e+":"+t}const Zp={_fireEvent:function(e,...t){for(const n of e)n.call(this,...t)},_applyConstraints:function(e,t,n){let i=!1;return r.reduce(this.state.constraints,(e,r)=>{if(!1===e)return!1;if(i)return e;const o=r.call(this,e,t,{onSkipRemaining:()=>{i=!0},...n});if(!1===o)return!1;if(Rp.is(o,2))return o;if(!0===o||null==o)return e;throw new d("Constraint returned invalid result: "+o,h.Internal)},e,this)},draw:function(){const e=this.cloneState();Zp._fireEvent.call(this,this.state.draw,e,this.prevState),this.prevState=e},listen:function(e,t,n){this._listenerMap=this._listenerMap||{};const r=Qp(e,t),i=this._listenerMap[r]=this._listenerMap[r]||this.state[e].length;this.state[e][i]=n},unlisten:function(e,t){this._listenerMap=this._listenerMap||{};const n=Qp(e,t),i=this._listenerMap[n];if(void 0!==i){this.state[e].splice(i,1),delete this._listenerMap[n];const t=r.keys(this._listenerMap);r.each(t,function(t){(function(e){return e.split(":")[0]})(t)===e&&this._listenerMap[t]>i&&this._listenerMap[t]--},this)}}};let Jp=null;let ef=null;const tf=["add","modify","draw","remove","constraints","onMoveStart","onMove","onMoveEnd","onClick"],nf={assert:function(e,t){if(!e)throw new d("Assertion Error"+(t?": "+t:""),h.Internal)},createGettersFor:function(e,t){r.each(r.keys(t),function(t){void 0===e.prototype[t]&&(e.prototype[t]=function(){return this.state[t]})})},addMovableHelperMethodsTo:function(e){r.each(Zp,function(t,n){void 0===e.prototype[n]&&(e.prototype[n]=t)})},arrayify:function(e){return null==e?[]:r.isArray(e)?r.filter(r.flatten(e),r.identity):[e]},normalizeOptions:function(e){const t={...e};return tf.forEach(function(n){void 0!==e[n]&&(t[n]=nf.arrayify(e[n]))}),t},getPrefixedTransform:function(){return Jp=Jp||function(){const e=document.createElement("div");let t=null;return r.each(["transform","msTransform","MozTransform","WebkitTransform","OTransform"],function(n){void 0!==e.style[n]&&(t=n)}),t}(),Jp},getCanUse3dTransform:function(){return null==ef&&(ef=function(){const e=document.createElement("div"),t=nf.getPrefixedTransform();return e.style[t]="translateZ(0px)",!!e.style[t]}()),ef}};var rf,of={exports:{}};const sf=xt((rf||(rf=1,window,of.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){var r,i;r=[n(2)],void 0===(i=function(e){function t(r){if(t.is(r,"function"))return n?r():e.on("raphael.DOMload",r);if(t.is(r,E))return t._engine.create[p](t,r.splice(0,3+t.is(r[0],T))).add(r);var i=Array.prototype.slice.call(arguments,0);if(t.is(i[i.length-1],"function")){var o=i.pop();return n?o.call(t._engine.create[p](t,i)):e.on("raphael.DOMload",function(){o.call(t._engine.create[p](t,i))})}return t._engine.create[p](t,arguments)}t.version="2.3.0",t.eve=e;var n,r,i,o,s=/[, ]+/,a={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},l=/\{(\d+)\}/g,c="hasOwnProperty",u={doc:document,win:window},d={was:Object.prototype[c].call(u.win,"Raphael"),is:u.win.Raphael},h=function(){this.ca=this.customAttributes={}},p="apply",f="concat",g="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,m="",v=" ",y=String,x="split",b="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[x](v),w={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},_=y.prototype.toLowerCase,S=Math,k=S.max,C=S.min,M=S.abs,I=S.pow,P=S.PI,T="number",E="array",j=Object.prototype.toString,R=(t._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),A={NaN:1,Infinity:1,"-Infinity":1},N=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,L=S.round,O=parseFloat,D=parseInt,F=y.prototype.toUpperCase,z=t._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},B=t._availableAnimAttrs={blur:T,"clip-rect":"csv",cx:T,cy:T,fill:"colour","fill-opacity":T,"font-size":T,height:T,opacity:T,path:"path",r:T,rx:T,ry:T,stroke:"colour","stroke-opacity":T,"stroke-width":T,transform:"transform",width:T,x:T,y:T},$=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,W={hs:1,rg:1},U=/,?([achlmqrstvxz]),?/gi,H=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,q=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,V=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,G=(t._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),Y=function(e,t){return O(e)-O(t)},X=function(e){return e},K=t._rectPath=function(e,t,n,r,i){return i?[["M",e+i,t],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]]:[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]]},Q=function(e,t,n,r){return null==r&&(r=n),[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]]},Z=t._getPath={path:function(e){return e.attr("path")},circle:function(e){var t=e.attrs;return Q(t.cx,t.cy,t.r)},ellipse:function(e){var t=e.attrs;return Q(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=e.attrs;return K(t.x,t.y,t.width,t.height,t.r)},image:function(e){var t=e.attrs;return K(t.x,t.y,t.width,t.height)},text:function(e){var t=e._getBBox();return K(t.x,t.y,t.width,t.height)},set:function(e){var t=e._getBBox();return K(t.x,t.y,t.width,t.height)}},J=t.mapPath=function(e,t){if(!t)return e;var n,r,i,o,s,a,l;for(i=0,s=(e=Ie(e)).length;i<s;i++)for(o=1,a=(l=e[i]).length;o<a;o+=2)n=t.x(l[o],l[o+1]),r=t.y(l[o],l[o+1]),l[o]=n,l[o+1]=r;return e};if(t._g=u,t.type=u.win.SVGAngle||u.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==t.type){var ee,te=u.doc.createElement("div");if(te.innerHTML='<v:shape adj="1"/>',(ee=te.firstChild).style.behavior="url(#default#VML)",!ee||"object"!=typeof ee.adj)return t.type=m;te=null}function ne(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)e[c](n)&&(t[n]=ne(e[n]));return t}t.svg=!(t.vml="VML"==t.type),t._Paper=h,t.fn=r=h.prototype=t.prototype,t._id=0,t.is=function(e,t){return"finite"==(t=_.call(t))?!A[c](+e):"array"==t?e instanceof Array:"null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||"array"==t&&Array.isArray&&Array.isArray(e)||j.call(e).slice(8,-1).toLowerCase()==t},t.angle=function(e,n,r,i,o,s){if(null==o){var a=e-r,l=n-i;return a||l?(180+180*S.atan2(-l,-a)/P+360)%360:0}return t.angle(e,n,o,s)-t.angle(r,i,o,s)},t.rad=function(e){return e%360*P/180},t.deg=function(e){return Math.round(180*e/P%360*1e3)/1e3},t.snapTo=function(e,n,r){if(r=t.is(r,"finite")?r:10,t.is(e,E)){for(var i=e.length;i--;)if(M(e[i]-n)<=r)return e[i]}else{var o=n%(e=+e);if(o<r)return n-o;if(o>e-r)return n-o+e}return n},t.createUUID=(i=/[xy]/g,o=function(e){var t=16*S.random()|0;return("x"==e?t:3&t|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(i,o).toUpperCase()}),t.setWindow=function(n){e("raphael.setWindow",t,u.win,n),u.win=n,u.doc=u.win.document,t._engine.initWin&&t._engine.initWin(u.win)};var re=function(e){if(t.vml){var n,r=/^\s+|\s+$/g;try{var i=new ActiveXObject("htmlfile");i.write("<body>"),i.close(),n=i.body}catch(a){n=createPopup().document.body}var o=n.createTextRange();re=ce(function(e){try{n.style.color=y(e).replace(r,m);var t=o.queryCommandValue("ForeColor");return"#"+("000000"+(t=(255&t)<<16|65280&t|(16711680&t)>>>16).toString(16)).slice(-6)}catch(i){return"none"}})}else{var s=u.doc.createElement("i");s.title="Raphaël Colour Picker",s.style.display="none",u.doc.body.appendChild(s),re=ce(function(e){return s.style.color=e,u.doc.defaultView.getComputedStyle(s,m).getPropertyValue("color")})}return re(e)},ie=function(){return"hsb("+[this.h,this.s,this.b]+")"},oe=function(){return"hsl("+[this.h,this.s,this.l]+")"},se=function(){return this.hex},ae=function(e,n,r){if(null==n&&t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(r=e.b,n=e.g,e=e.r),null==n&&t.is(e,"string")){var i=t.getRGB(e);e=i.r,n=i.g,r=i.b}return(e>1||n>1||r>1)&&(e/=255,n/=255,r/=255),[e,n,r]},le=function(e,n,r,i){var o={r:e*=255,g:n*=255,b:r*=255,hex:t.rgb(e,n,r),toString:se};return t.is(i,"finite")&&(o.opacity=i),o};function ce(e,t,n){return function r(){var i=Array.prototype.slice.call(arguments,0),o=i.join("␀"),s=r.cache=r.cache||{},a=r.count=r.count||[];return s[c](o)?(function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}(a,o),n?n(s[o]):s[o]):(a.length>=1e3&&delete s[a.shift()],a.push(o),s[o]=e[p](t,i),n?n(s[o]):s[o])}}function ue(){return this.hex}function de(e,t){for(var n=[],r=0,i=e.length;i-2*!t>r;r+=2){var o=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4==r?o[3]={x:+e[0],y:+e[1]}:i-2==r&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[i-2],y:+e[i-1]}:i-4==r?o[3]=o[2]:r||(o[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n}t.color=function(e){var n;return t.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(n=t.hsb2rgb(e),e.r=n.r,e.g=n.g,e.b=n.b,e.hex=n.hex):t.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(n=t.hsl2rgb(e),e.r=n.r,e.g=n.g,e.b=n.b,e.hex=n.hex):(t.is(e,"string")&&(e=t.getRGB(e)),t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(n=t.rgb2hsl(e),e.h=n.h,e.s=n.s,e.l=n.l,n=t.rgb2hsb(e),e.v=n.b):(e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1),e.toString=se,e},t.hsb2rgb=function(e,t,n,r){var i,o,s,a,l;return this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(n=e.b,t=e.s,r=e.o,e=e.h),a=(l=n*t)*(1-M((e=(e*=360)%360/60)%2-1)),i=o=s=n-l,le(i+=[l,a,0,0,a,l][e=~~e],o+=[a,l,l,a,0,0][e],s+=[0,0,a,l,l,a][e],r)},t.hsl2rgb=function(e,t,n,r){var i,o,s,a,l;return this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(n=e.l,t=e.s,e=e.h),(e>1||t>1||n>1)&&(e/=360,t/=100,n/=100),a=(l=2*t*(n<.5?n:1-n))*(1-M((e=(e*=360)%360/60)%2-1)),i=o=s=n-l/2,le(i+=[l,a,0,0,a,l][e=~~e],o+=[a,l,l,a,0,0][e],s+=[0,0,a,l,l,a][e],r)},t.rgb2hsb=function(e,t,n){var r,i;return e=(n=ae(e,t,n))[0],t=n[1],n=n[2],{h:((0==(i=(r=k(e,t,n))-C(e,t,n))?null:r==e?(t-n)/i:r==t?(n-e)/i+2:(e-t)/i+4)+360)%6*60/360,s:0==i?0:i/r,b:r,toString:ie}},t.rgb2hsl=function(e,t,n){var r,i,o,s;return e=(n=ae(e,t,n))[0],t=n[1],n=n[2],r=((i=k(e,t,n))+(o=C(e,t,n)))/2,{h:((0==(s=i-o)?null:i==e?(t-n)/s:i==t?(n-e)/s+2:(e-t)/s+4)+360)%6*60/360,s:0==s?0:r<.5?s/(2*r):s/(2-2*r),l:r,toString:oe}},t._path2string=function(){return this.join(",").replace(U,"$1")},t._preload=function(e,t){var n=u.doc.createElement("img");n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){t.call(this),this.onload=null,u.doc.body.removeChild(this)},n.onerror=function(){u.doc.body.removeChild(this)},u.doc.body.appendChild(n),n.src=e},t.getRGB=ce(function(e){if(!e||(e=y(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ue};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:ue};!W[c](e.toLowerCase().substring(0,2))&&"#"!=e.charAt()&&(e=re(e));var n,r,i,o,s,a,l=e.match(R);return l?(l[2]&&(i=D(l[2].substring(5),16),r=D(l[2].substring(3,5),16),n=D(l[2].substring(1,3),16)),l[3]&&(i=D((s=l[3].charAt(3))+s,16),r=D((s=l[3].charAt(2))+s,16),n=D((s=l[3].charAt(1))+s,16)),l[4]&&(a=l[4][x]($),n=O(a[0]),"%"==a[0].slice(-1)&&(n*=2.55),r=O(a[1]),"%"==a[1].slice(-1)&&(r*=2.55),i=O(a[2]),"%"==a[2].slice(-1)&&(i*=2.55),"rgba"==l[1].toLowerCase().slice(0,4)&&(o=O(a[3])),a[3]&&"%"==a[3].slice(-1)&&(o/=100)),l[5]?(a=l[5][x]($),n=O(a[0]),"%"==a[0].slice(-1)&&(n*=2.55),r=O(a[1]),"%"==a[1].slice(-1)&&(r*=2.55),i=O(a[2]),"%"==a[2].slice(-1)&&(i*=2.55),("deg"==a[0].slice(-3)||"°"==a[0].slice(-1))&&(n/=360),"hsba"==l[1].toLowerCase().slice(0,4)&&(o=O(a[3])),a[3]&&"%"==a[3].slice(-1)&&(o/=100),t.hsb2rgb(n,r,i,o)):l[6]?(a=l[6][x]($),n=O(a[0]),"%"==a[0].slice(-1)&&(n*=2.55),r=O(a[1]),"%"==a[1].slice(-1)&&(r*=2.55),i=O(a[2]),"%"==a[2].slice(-1)&&(i*=2.55),("deg"==a[0].slice(-3)||"°"==a[0].slice(-1))&&(n/=360),"hsla"==l[1].toLowerCase().slice(0,4)&&(o=O(a[3])),a[3]&&"%"==a[3].slice(-1)&&(o/=100),t.hsl2rgb(n,r,i,o)):((l={r:n,g:r,b:i,toString:ue}).hex="#"+(16777216|i|r<<8|n<<16).toString(16).slice(1),t.is(o,"finite")&&(l.opacity=o),l)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ue}},t),t.hsb=ce(function(e,n,r){return t.hsb2rgb(e,n,r).hex}),t.hsl=ce(function(e,n,r){return t.hsl2rgb(e,n,r).hex}),t.rgb=ce(function(e,t,n){function r(e){return e+.5|0}return"#"+(16777216|r(n)|r(t)<<8|r(e)<<16).toString(16).slice(1)}),t.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},n=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),n.hex},t.getColor.reset=function(){delete this.start},t.parsePathString=function(e){if(!e)return null;var n=he(e);if(n.arr)return xe(n.arr);var r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},i=[];return t.is(e,E)&&t.is(e[0],E)&&(i=xe(e)),i.length||y(e).replace(H,function(e,t,n){var o=[],s=t.toLowerCase();if(n.replace(V,function(e,t){t&&o.push(+t)}),"m"==s&&o.length>2&&(i.push([t][f](o.splice(0,2))),s="l",t="m"==t?"l":"L"),"r"==s)i.push([t][f](o));else for(;o.length>=r[s]&&(i.push([t][f](o.splice(0,r[s]))),r[s]););}),i.toString=t._path2string,n.arr=xe(i),i},t.parseTransformString=ce(function(e){if(!e)return null;var n=[];return t.is(e,E)&&t.is(e[0],E)&&(n=xe(e)),n.length||y(e).replace(q,function(e,t,r){var i=[];_.call(t),r.replace(V,function(e,t){t&&i.push(+t)}),n.push([t][f](i))}),n.toString=t._path2string,n},this,function(e){if(!e)return e;for(var t=[],n=0;n<e.length;n++){for(var r=[],i=0;i<e[n].length;i++)r.push(e[n][i]);t.push(r)}return t});var he=function(e){var t=he.ps=he.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)t[c](n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]};function pe(e,t,n,r,i){return e*(e*(-3*t+9*n-9*r+3*i)+6*t-12*n+6*r)-3*t+3*n}function fe(e,t,n,r,i,o,s,a,l){null==l&&(l=1);for(var c=(l=l>1?1:l<0?0:l)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,p=0;p<12;p++){var f=c*u[p]+c,g=pe(f,e,n,i,s),m=pe(f,t,r,o,a),v=g*g+m*m;h+=d[p]*S.sqrt(v)}return c*h}function ge(e,t,n,r,i,o,s,a){if(!(k(e,n)<C(i,s)||C(e,n)>k(i,s)||k(t,r)<C(o,a)||C(t,r)>k(o,a))){var l=(e-n)*(o-a)-(t-r)*(i-s);if(l){var c=((e*r-t*n)*(i-s)-(e-n)*(i*a-o*s))/l,u=((e*r-t*n)*(o-a)-(t-r)*(i*a-o*s))/l,d=+c.toFixed(2),h=+u.toFixed(2);if(!(d<+C(e,n).toFixed(2)||d>+k(e,n).toFixed(2)||d<+C(i,s).toFixed(2)||d>+k(i,s).toFixed(2)||h<+C(t,r).toFixed(2)||h>+k(t,r).toFixed(2)||h<+C(o,a).toFixed(2)||h>+k(o,a).toFixed(2)))return{x:c,y:u}}}}function me(e,n,r){var i=t.bezierBBox(e),o=t.bezierBBox(n);if(!t.isBBoxIntersect(i,o))return r?0:[];for(var s=fe.apply(0,e),a=fe.apply(0,n),l=k(~~(s/5),1),c=k(~~(a/5),1),u=[],d=[],h={},p=r?0:[],f=0;f<l+1;f++){var g=t.findDotsAtSegment.apply(t,e.concat(f/l));u.push({x:g.x,y:g.y,t:f/l})}for(f=0;f<c+1;f++)g=t.findDotsAtSegment.apply(t,n.concat(f/c)),d.push({x:g.x,y:g.y,t:f/c});for(f=0;f<l;f++)for(var m=0;m<c;m++){var v=u[f],y=u[f+1],x=d[m],b=d[m+1],w=M(y.x-v.x)<.001?"y":"x",_=M(b.x-x.x)<.001?"y":"x",S=ge(v.x,v.y,y.x,y.y,x.x,x.y,b.x,b.y);if(S){if(h[S.x.toFixed(4)]==S.y.toFixed(4))continue;h[S.x.toFixed(4)]=S.y.toFixed(4);var I=v.t+M((S[w]-v[w])/(y[w]-v[w]))*(y.t-v.t),P=x.t+M((S[_]-x[_])/(b[_]-x[_]))*(b.t-x.t);I>=0&&I<=1.001&&P>=0&&P<=1.001&&(r?p++:p.push({x:S.x,y:S.y,t1:C(I,1),t2:C(P,1)}))}}return p}function ve(e,n,r){e=t._path2curve(e),n=t._path2curve(n);for(var i,o,s,a,l,c,u,d,h,p,f=r?0:[],g=0,m=e.length;g<m;g++){var v=e[g];if("M"==v[0])i=l=v[1],o=c=v[2];else{"C"==v[0]?(h=[i,o].concat(v.slice(1)),i=h[6],o=h[7]):(h=[i,o,i,o,l,c,l,c],i=l,o=c);for(var y=0,x=n.length;y<x;y++){var b=n[y];if("M"==b[0])s=u=b[1],a=d=b[2];else{"C"==b[0]?(p=[s,a].concat(b.slice(1)),s=p[6],a=p[7]):(p=[s,a,s,a,u,d,u,d],s=u,a=d);var w=me(h,p,r);if(r)f+=w;else{for(var _=0,S=w.length;_<S;_++)w[_].segment1=g,w[_].segment2=y,w[_].bez1=h,w[_].bez2=p;f=f.concat(w)}}}}}return f}t.findDotsAtSegment=function(e,t,n,r,i,o,s,a,l){var c=1-l,u=I(c,3),d=I(c,2),h=l*l,p=h*l,f=u*e+3*d*l*n+3*c*l*l*i+p*s,g=u*t+3*d*l*r+3*c*l*l*o+p*a,m=e+2*l*(n-e)+h*(i-2*n+e),v=t+2*l*(r-t)+h*(o-2*r+t),y=n+2*l*(i-n)+h*(s-2*i+n),x=r+2*l*(o-r)+h*(a-2*o+r),b=c*e+l*n,w=c*t+l*r,_=c*i+l*s,k=c*o+l*a,C=90-180*S.atan2(m-y,v-x)/P;return(m>y||v<x)&&(C+=180),{x:f,y:g,m:{x:m,y:v},n:{x:y,y:x},start:{x:b,y:w},end:{x:_,y:k},alpha:C}},t.bezierBBox=function(e,n,r,i,o,s,a,l){t.is(e,"array")||(e=[e,n,r,i,o,s,a,l]);var c=Me.apply(null,e);return{x:c.min.x,y:c.min.y,x2:c.max.x,y2:c.max.y,width:c.max.x-c.min.x,height:c.max.y-c.min.y}},t.isPointInsideBBox=function(e,t,n){return t>=e.x&&t<=e.x2&&n>=e.y&&n<=e.y2},t.isBBoxIntersect=function(e,n){var r=t.isPointInsideBBox;return r(n,e.x,e.y)||r(n,e.x2,e.y)||r(n,e.x,e.y2)||r(n,e.x2,e.y2)||r(e,n.x,n.y)||r(e,n.x2,n.y)||r(e,n.x,n.y2)||r(e,n.x2,n.y2)||(e.x<n.x2&&e.x>n.x||n.x<e.x2&&n.x>e.x)&&(e.y<n.y2&&e.y>n.y||n.y<e.y2&&n.y>e.y)},t.pathIntersection=function(e,t){return ve(e,t)},t.pathIntersectionNumber=function(e,t){return ve(e,t,1)},t.isPointInsidePath=function(e,n,r){var i=t.pathBBox(e);return t.isPointInsideBBox(i,n,r)&&ve(e,[["M",n,r],["H",i.x2+10]],1)%2==1},t._removedFactory=function(t){return function(){e("raphael.log",null,"Raphaël: you are calling to method “"+t+"” of removed object",t)}};var ye=t.pathBBox=function(e){var t=he(e);if(t.bbox)return ne(t.bbox);if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var n,r=0,i=0,o=[],s=[],a=0,l=(e=Ie(e)).length;a<l;a++)if("M"==(n=e[a])[0])r=n[1],i=n[2],o.push(r),s.push(i);else{var c=Me(r,i,n[1],n[2],n[3],n[4],n[5],n[6]);o=o[f](c.min.x,c.max.x),s=s[f](c.min.y,c.max.y),r=n[5],i=n[6]}var u=C[p](0,o),d=C[p](0,s),h=k[p](0,o),g=k[p](0,s),m=h-u,v=g-d,y={x:u,y:d,x2:h,y2:g,width:m,height:v,cx:u+m/2,cy:d+v/2};return t.bbox=ne(y),y},xe=function(e){var n=ne(e);return n.toString=t._path2string,n},be=t._pathToRelative=function(e){var n=he(e);if(n.rel)return xe(n.rel);t.is(e,E)&&t.is(e&&e[0],E)||(e=t.parsePathString(e));var r=[],i=0,o=0,s=0,a=0,l=0;"M"==e[0][0]&&(s=i=e[0][1],a=o=e[0][2],l++,r.push(["M",i,o]));for(var c=l,u=e.length;c<u;c++){var d=r[c]=[],h=e[c];if(h[0]!=_.call(h[0]))switch(d[0]=_.call(h[0]),d[0]){case"a":d[1]=h[1],d[2]=h[2],d[3]=h[3],d[4]=h[4],d[5]=h[5],d[6]=+(h[6]-i).toFixed(3),d[7]=+(h[7]-o).toFixed(3);break;case"v":d[1]=+(h[1]-o).toFixed(3);break;case"m":s=h[1],a=h[2];default:for(var p=1,f=h.length;p<f;p++)d[p]=+(h[p]-(p%2?i:o)).toFixed(3)}else{d=r[c]=[],"m"==h[0]&&(s=h[1]+i,a=h[2]+o);for(var g=0,m=h.length;g<m;g++)r[c][g]=h[g]}var v=r[c].length;switch(r[c][0]){case"z":i=s,o=a;break;case"h":i+=+r[c][v-1];break;case"v":o+=+r[c][v-1];break;default:i+=+r[c][v-2],o+=+r[c][v-1]}}return r.toString=t._path2string,n.rel=xe(r),r},we=t._pathToAbsolute=function(e){var n=he(e);if(n.abs)return xe(n.abs);if(t.is(e,E)&&t.is(e&&e[0],E)||(e=t.parsePathString(e)),!e||!e.length)return[["M",0,0]];var r=[],i=0,o=0,s=0,a=0,l=0;"M"==e[0][0]&&(s=i=+e[0][1],a=o=+e[0][2],l++,r[0]=["M",i,o]);for(var c,u,d=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),h=l,p=e.length;h<p;h++){if(r.push(c=[]),(u=e[h])[0]!=F.call(u[0]))switch(c[0]=F.call(u[0]),c[0]){case"A":c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=+(u[6]+i),c[7]=+(u[7]+o);break;case"V":c[1]=+u[1]+o;break;case"H":c[1]=+u[1]+i;break;case"R":for(var g=[i,o][f](u.slice(1)),m=2,v=g.length;m<v;m++)g[m]=+g[m]+i,g[++m]=+g[m]+o;r.pop(),r=r[f](de(g,d));break;case"M":s=+u[1]+i,a=+u[2]+o;default:for(m=1,v=u.length;m<v;m++)c[m]=+u[m]+(m%2?i:o)}else if("R"==u[0])g=[i,o][f](u.slice(1)),r.pop(),r=r[f](de(g,d)),c=["R"][f](u.slice(-2));else for(var y=0,x=u.length;y<x;y++)c[y]=u[y];switch(c[0]){case"Z":i=s,o=a;break;case"H":i=c[1];break;case"V":o=c[1];break;case"M":s=c[c.length-2],a=c[c.length-1];default:i=c[c.length-2],o=c[c.length-1]}}return r.toString=t._path2string,n.abs=xe(r),r},_e=function(e,t,n,r){return[e,t,n,r,n,r]},Se=function(e,t,n,r,i,o){return[1/3*e+2/3*n,1/3*t+2/3*r,1/3*i+2/3*n,1/3*o+2/3*r,i,o]},ke=function(e,t,n,r,i,o,s,a,l,c){var u,d=120*P/180,h=P/180*(+i||0),p=[],g=ce(function(e,t,n){return{x:e*S.cos(n)-t*S.sin(n),y:e*S.sin(n)+t*S.cos(n)}});if(c)I=c[0],T=c[1],k=c[2],C=c[3];else{e=(u=g(e,t,-h)).x,t=u.y;var m=(e-(a=(u=g(a,l,-h)).x))/2,v=(t-(l=u.y))/2,y=m*m/(n*n)+v*v/(r*r);y>1&&(n*=y=S.sqrt(y),r*=y);var b=n*n,w=r*r,_=(o==s?-1:1)*S.sqrt(M((b*w-b*v*v-w*m*m)/(b*v*v+w*m*m))),k=_*n*v/r+(e+a)/2,C=_*-r*m/n+(t+l)/2,I=S.asin(((t-C)/r).toFixed(9)),T=S.asin(((l-C)/r).toFixed(9));(I=e<k?P-I:I)<0&&(I=2*P+I),(T=a<k?P-T:T)<0&&(T=2*P+T),s&&I>T&&(I-=2*P),!s&&T>I&&(T-=2*P)}var E=T-I;if(M(E)>d){var j=T,R=a,A=l;T=I+d*(s&&T>I?1:-1),a=k+n*S.cos(T),l=C+r*S.sin(T),p=ke(a,l,n,r,i,0,s,R,A,[T,j,k,C])}E=T-I;var N=S.cos(I),L=S.sin(I),O=S.cos(T),D=S.sin(T),F=S.tan(E/4),z=4/3*n*F,B=4/3*r*F,$=[e,t],W=[e+z*L,t-B*N],U=[a+z*D,l-B*O],H=[a,l];if(W[0]=2*$[0]-W[0],W[1]=2*$[1]-W[1],c)return[W,U,H][f](p);for(var q=[],V=0,G=(p=[W,U,H][f](p).join()[x](",")).length;V<G;V++)q[V]=V%2?g(p[V-1],p[V],h).y:g(p[V],p[V+1],h).x;return q},Ce=function(e,t,n,r,i,o,s,a,l){var c=1-l;return{x:I(c,3)*e+3*I(c,2)*l*n+3*c*l*l*i+I(l,3)*s,y:I(c,3)*t+3*I(c,2)*l*r+3*c*l*l*o+I(l,3)*a}},Me=ce(function(e,t,n,r,i,o,s,a){var l,c=i-2*n+e-(s-2*i+n),u=2*(n-e)-2*(i-n),d=e-n,h=(-u+S.sqrt(u*u-4*c*d))/2/c,f=(-u-S.sqrt(u*u-4*c*d))/2/c,g=[t,a],m=[e,s];return M(h)>"1e12"&&(h=.5),M(f)>"1e12"&&(f=.5),h>0&&h<1&&(l=Ce(e,t,n,r,i,o,s,a,h),m.push(l.x),g.push(l.y)),f>0&&f<1&&(l=Ce(e,t,n,r,i,o,s,a,f),m.push(l.x),g.push(l.y)),c=o-2*r+t-(a-2*o+r),d=t-r,h=(-(u=2*(r-t)-2*(o-r))+S.sqrt(u*u-4*c*d))/2/c,f=(-u-S.sqrt(u*u-4*c*d))/2/c,M(h)>"1e12"&&(h=.5),M(f)>"1e12"&&(f=.5),h>0&&h<1&&(l=Ce(e,t,n,r,i,o,s,a,h),m.push(l.x),g.push(l.y)),f>0&&f<1&&(l=Ce(e,t,n,r,i,o,s,a,f),m.push(l.x),g.push(l.y)),{min:{x:C[p](0,m),y:C[p](0,g)},max:{x:k[p](0,m),y:k[p](0,g)}}}),Ie=t._path2curve=ce(function(e,t){var n=!t&&he(e);if(!t&&n.curve)return xe(n.curve);for(var r=we(e),i=t&&we(t),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a=function(e,t,n){var r,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"][f](ke[p](0,[t.x,t.y][f](e.slice(1))));break;case"S":"C"==n||"S"==n?(r=2*t.x-t.bx,i=2*t.y-t.by):(r=t.x,i=t.y),e=["C",r,i][f](e.slice(1));break;case"T":"Q"==n||"T"==n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"][f](Se(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"][f](Se(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"][f](_e(t.x,t.y,e[1],e[2]));break;case"H":e=["C"][f](_e(t.x,t.y,e[1],t.y));break;case"V":e=["C"][f](_e(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"][f](_e(t.x,t.y,t.X,t.Y))}return e},l=function(e,t){if(e[t].length>7){e[t].shift();for(var n=e[t];n.length;)u[t]="A",i&&(d[t]="A"),e.splice(t++,0,["C"][f](n.splice(0,6)));e.splice(t,1),v=k(r.length,i&&i.length||0)}},c=function(e,t,n,o,s){e&&t&&"M"==e[s][0]&&"M"!=t[s][0]&&(t.splice(s,0,["M",o.x,o.y]),n.bx=0,n.by=0,n.x=e[s][1],n.y=e[s][2],v=k(r.length,i&&i.length||0))},u=[],d=[],h="",g="",m=0,v=k(r.length,i&&i.length||0);m<v;m++){r[m]&&(h=r[m][0]),"C"!=h&&(u[m]=h,m&&(g=u[m-1])),r[m]=a(r[m],o,g),"A"!=u[m]&&"C"==h&&(u[m]="C"),l(r,m),i&&(i[m]&&(h=i[m][0]),"C"!=h&&(d[m]=h,m&&(g=d[m-1])),i[m]=a(i[m],s,g),"A"!=d[m]&&"C"==h&&(d[m]="C"),l(i,m)),c(r,i,o,s,m),c(i,r,s,o,m);var y=r[m],x=i&&i[m],b=y.length,w=i&&x.length;o.x=y[b-2],o.y=y[b-1],o.bx=O(y[b-4])||o.x,o.by=O(y[b-3])||o.y,s.bx=i&&(O(x[w-4])||s.x),s.by=i&&(O(x[w-3])||s.y),s.x=i&&x[w-2],s.y=i&&x[w-1]}return i||(n.curve=xe(r)),i?[r,i]:r},null,xe),Pe=(t._parseDots=ce(function(e){for(var n=[],r=0,i=e.length;r<i;r++){var o={},s=e[r].match(/^([^:]*):?([\d\.]*)/);if(o.color=t.getRGB(s[1]),o.color.error)return null;o.opacity=o.color.opacity,o.color=o.color.hex,s[2]&&(o.offset=s[2]+"%"),n.push(o)}for(r=1,i=n.length-1;r<i;r++)if(!n[r].offset){for(var a=O(n[r-1].offset||0),l=0,c=r+1;c<i;c++)if(n[c].offset){l=n[c].offset;break}l||(l=100,c=i);for(var u=((l=O(l))-a)/(c-r+1);r<c;r++)a+=u,n[r].offset=a+"%"}return n}),t._tear=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)}),Te=(t._tofront=function(e,t){t.top!==e&&(Pe(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e)},t._toback=function(e,t){t.bottom!==e&&(Pe(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e)},t._insertafter=function(e,t,n){Pe(e,n),t==n.top&&(n.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},t._insertbefore=function(e,t,n){Pe(e,n),t==n.bottom&&(n.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},t.toMatrix=function(e,t){var n=ye(e),r={_:{transform:m},getBBox:function(){return n}};return Ee(r,t),r.matrix}),Ee=(t.transformPath=function(e,t){return J(e,Te(e,t))},t._extractTransform=function(e,n){if(null==n)return e._.transform;n=y(n).replace(/\.{3}|\u2026/g,e._.transform||m);var r,i,o=t.parseTransformString(n),s=0,a=1,l=1,c=e._,u=new Ae;if(c.transform=o||[],o)for(var d=0,h=o.length;d<h;d++){var p,f,g,v,x,b=o[d],w=b.length,_=y(b[0]).toLowerCase(),S=b[0]!=_,k=S?u.invert():0;"t"==_&&3==w?S?(p=k.x(0,0),f=k.y(0,0),g=k.x(b[1],b[2]),v=k.y(b[1],b[2]),u.translate(g-p,v-f)):u.translate(b[1],b[2]):"r"==_?2==w?(x=x||e.getBBox(1),u.rotate(b[1],x.x+x.width/2,x.y+x.height/2),s+=b[1]):4==w&&(S?(g=k.x(b[2],b[3]),v=k.y(b[2],b[3]),u.rotate(b[1],g,v)):u.rotate(b[1],b[2],b[3]),s+=b[1]):"s"==_?2==w||3==w?(x=x||e.getBBox(1),u.scale(b[1],b[w-1],x.x+x.width/2,x.y+x.height/2),a*=b[1],l*=b[w-1]):5==w&&(S?(g=k.x(b[3],b[4]),v=k.y(b[3],b[4]),u.scale(b[1],b[2],g,v)):u.scale(b[1],b[2],b[3],b[4]),a*=b[1],l*=b[2]):"m"==_&&7==w&&u.add(b[1],b[2],b[3],b[4],b[5],b[6]),c.dirtyT=1,e.matrix=u}e.matrix=u,c.sx=a,c.sy=l,c.deg=s,c.dx=r=u.e,c.dy=i=u.f,1==a&&1==l&&!s&&c.bbox?(c.bbox.x+=+r,c.bbox.y+=+i):c.dirtyT=1}),je=function(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}},Re=t._equaliseTransform=function(e,n){n=y(n).replace(/\.{3}|\u2026/g,e),e=t.parseTransformString(e)||[],n=t.parseTransformString(n)||[];for(var r,i,o,s,a=k(e.length,n.length),l=[],c=[],u=0;u<a;u++){if(o=e[u]||je(n[u]),s=n[u]||je(o),o[0]!=s[0]||"r"==o[0].toLowerCase()&&(o[2]!=s[2]||o[3]!=s[3])||"s"==o[0].toLowerCase()&&(o[3]!=s[3]||o[4]!=s[4]))return;for(l[u]=[],c[u]=[],r=0,i=k(o.length,s.length);r<i;r++)r in o&&(l[u][r]=o[r]),r in s&&(c[u][r]=s[r])}return{from:l,to:c}};function Ae(e,t,n,r,i,o){null!=e?(this.a=+e,this.b=+t,this.c=+n,this.d=+r,this.e=+i,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}t._getContainer=function(e,n,r,i){var o;if(null!=(o=null!=i||t.is(e,"object")?e:u.doc.getElementById(e)))return o.tagName?null==n?{container:o,width:o.style.pixelWidth||o.offsetWidth,height:o.style.pixelHeight||o.offsetHeight}:{container:o,width:n,height:r}:{container:1,x:e,y:n,width:r,height:i}},t.pathToRelative=be,t._engine={},t.path2curve=Ie,t.matrix=function(e,t,n,r,i,o){return new Ae(e,t,n,r,i,o)},function(e){function n(e){return e[0]*e[0]+e[1]*e[1]}function r(e){var t=S.sqrt(n(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}e.add=function(e,t,n,r,i,o){var s,a,l,c,u=[[],[],[]],d=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],h=[[e,n,i],[t,r,o],[0,0,1]];for(e&&e instanceof Ae&&(h=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),s=0;s<3;s++)for(a=0;a<3;a++){for(c=0,l=0;l<3;l++)c+=d[s][l]*h[l][a];u[s][a]=c}this.a=u[0][0],this.b=u[1][0],this.c=u[0][1],this.d=u[1][1],this.e=u[0][2],this.f=u[1][2]},e.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new Ae(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},e.clone=function(){return new Ae(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(e,t){this.add(1,0,0,1,e,t)},e.scale=function(e,t,n,r){null==t&&(t=e),(n||r)&&this.add(1,0,0,1,n,r),this.add(e,0,0,t,0,0),(n||r)&&this.add(1,0,0,1,-n,-r)},e.rotate=function(e,n,r){e=t.rad(e),n=n||0,r=r||0;var i=+S.cos(e).toFixed(9),o=+S.sin(e).toFixed(9);this.add(i,o,-o,i,n,r),this.add(1,0,0,1,-n,-r)},e.x=function(e,t){return e*this.a+t*this.c+this.e},e.y=function(e,t){return e*this.b+t*this.d+this.f},e.get=function(e){return+this[y.fromCharCode(97+e)].toFixed(4)},e.toString=function(){return t.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var i=[[this.a,this.c],[this.b,this.d]];e.scalex=S.sqrt(n(i[0])),r(i[0]),e.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*e.shear,i[1][1]-i[0][1]*e.shear],e.scaley=S.sqrt(n(i[1])),r(i[1]),e.shear/=e.scaley;var o=-i[0][1],s=i[1][1];return s<0?(e.rotate=t.deg(S.acos(s)),o<0&&(e.rotate=360-e.rotate)):e.rotate=t.deg(S.asin(o)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},e.toTransformString=function(e){var t=e||this[x]();return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[t.dx,t.dy]:m)+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:m)+(t.rotate?"r"+[t.rotate,0,0]:m)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(Ae.prototype);for(var Ne=function(){this.returnValue=!1},Le=function(){return this.originalEvent.preventDefault()},Oe=function(){this.cancelBubble=!0},De=function(){return this.originalEvent.stopPropagation()},Fe=function(e){var t=u.doc.documentElement.scrollTop||u.doc.body.scrollTop,n=u.doc.documentElement.scrollLeft||u.doc.body.scrollLeft;return{x:e.clientX+n,y:e.clientY+t}},ze=u.doc.addEventListener?function(e,t,n,r){var i=function(e){var t=Fe(e);return n.call(r,e,t.x,t.y)};if(e.addEventListener(t,i,!1),g&&w[t]){var o=function(t){for(var i=Fe(t),o=t,s=0,a=t.targetTouches&&t.targetTouches.length;s<a;s++)if(t.targetTouches[s].target==e){(t=t.targetTouches[s]).originalEvent=o,t.preventDefault=Le,t.stopPropagation=De;break}return n.call(r,t,i.x,i.y)};e.addEventListener(w[t],o,!1)}return function(){return e.removeEventListener(t,i,!1),g&&w[t]&&e.removeEventListener(w[t],o,!1),!0}}:u.doc.attachEvent?function(e,t,n,r){var i=function(e){e=e||u.win.event;var t=u.doc.documentElement.scrollTop||u.doc.body.scrollTop,i=u.doc.documentElement.scrollLeft||u.doc.body.scrollLeft,o=e.clientX+i,s=e.clientY+t;return e.preventDefault=e.preventDefault||Ne,e.stopPropagation=e.stopPropagation||Oe,n.call(r,e,o,s)};return e.attachEvent("on"+t,i),function(){return e.detachEvent("on"+t,i),!0}}:void 0,Be=[],$e=function(t){for(var n,r=t.clientX,i=t.clientY,o=u.doc.documentElement.scrollTop||u.doc.body.scrollTop,s=u.doc.documentElement.scrollLeft||u.doc.body.scrollLeft,a=Be.length;a--;){if(n=Be[a],g&&t.touches){for(var l,c=t.touches.length;c--;)if((l=t.touches[c]).identifier==n.el._drag.id){r=l.clientX,i=l.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var d,h=n.el.node,p=h.nextSibling,f=h.parentNode,m=h.style.display;u.win.opera&&f.removeChild(h),h.style.display="none",d=n.el.paper.getElementByPoint(r,i),h.style.display=m,u.win.opera&&(p?f.insertBefore(h,p):f.appendChild(h)),d&&e("raphael.drag.over."+n.el.id,n.el,d),r+=s,i+=o,e("raphael.drag.move."+n.el.id,n.move_scope||n.el,r-n.el._drag.x,i-n.el._drag.y,r,i,t)}},We=function(n){t.unmousemove($e).unmouseup(We);for(var r,i=Be.length;i--;)(r=Be[i]).el._drag={},e("raphael.drag.end."+r.el.id,r.end_scope||r.start_scope||r.move_scope||r.el,n);Be=[]},Ue=t.el={},He=b.length;He--;)!function(e){t[e]=Ue[e]=function(n,r){return t.is(n,"function")&&(this.events=this.events||[],this.events.push({name:e,f:n,unbind:ze(this.shape||this.node||u.doc,e,n,r||this)})),this},t["un"+e]=Ue["un"+e]=function(n){for(var r=this.events||[],i=r.length;i--;)r[i].name!=e||!t.is(n,"undefined")&&r[i].f!=n||(r[i].unbind(),r.splice(i,1),!r.length&&delete this.events);return this}}(b[He]);Ue.data=function(n,r){var i=G[this.id]=G[this.id]||{};if(0==arguments.length)return i;if(1==arguments.length){if(t.is(n,"object")){for(var o in n)n[c](o)&&this.data(o,n[o]);return this}return e("raphael.data.get."+this.id,this,i[n],n),i[n]}return i[n]=r,e("raphael.data.set."+this.id,this,r,n),this},Ue.removeData=function(e){return null==e?delete G[this.id]:G[this.id]&&delete G[this.id][e],this},Ue.getData=function(){return ne(G[this.id]||{})},Ue.hover=function(e,t,n,r){return this.mouseover(e,n).mouseout(t,r||n)},Ue.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var qe=[];function Ve(){return this.x+v+this.y+v+this.width+" × "+this.height}Ue.drag=function(n,r,i,o,s,a){function l(l){(l.originalEvent||l).preventDefault();var c=l.clientX,d=l.clientY,h=u.doc.documentElement.scrollTop||u.doc.body.scrollTop,p=u.doc.documentElement.scrollLeft||u.doc.body.scrollLeft;if(this._drag.id=l.identifier,g&&l.touches)for(var f,m=l.touches.length;m--;)if(f=l.touches[m],this._drag.id=f.identifier,f.identifier==this._drag.id){c=f.clientX,d=f.clientY;break}this._drag.x=c+p,this._drag.y=d+h,!Be.length&&t.mousemove($e).mouseup(We),Be.push({el:this,move_scope:o,start_scope:s,end_scope:a}),r&&e.on("raphael.drag.start."+this.id,r),n&&e.on("raphael.drag.move."+this.id,n),i&&e.on("raphael.drag.end."+this.id,i),e("raphael.drag.start."+this.id,s||o||this,this._drag.x,this._drag.y,l)}return this._drag={},qe.push({el:this,start:l}),this.mousedown(l),this},Ue.onDragOver=function(t){t?e.on("raphael.drag.over."+this.id,t):e.unbind("raphael.drag.over."+this.id)},Ue.undrag=function(){for(var n=qe.length;n--;)qe[n].el==this&&(this.unmousedown(qe[n].start),qe.splice(n,1),e.unbind("raphael.drag.*."+this.id));!qe.length&&t.unmousemove($e).unmouseup(We),Be=[]},r.circle=function(e,n,r){var i=t._engine.circle(this,e||0,n||0,r||0);return this.__set__&&this.__set__.push(i),i},r.rect=function(e,n,r,i,o){var s=t._engine.rect(this,e||0,n||0,r||0,i||0,o||0);return this.__set__&&this.__set__.push(s),s},r.ellipse=function(e,n,r,i){var o=t._engine.ellipse(this,e||0,n||0,r||0,i||0);return this.__set__&&this.__set__.push(o),o},r.path=function(e){e&&!t.is(e,"string")&&!t.is(e[0],E)&&(e+=m);var n=t._engine.path(t.format[p](t,arguments),this);return this.__set__&&this.__set__.push(n),n},r.image=function(e,n,r,i,o){var s=t._engine.image(this,e||"about:blank",n||0,r||0,i||0,o||0);return this.__set__&&this.__set__.push(s),s},r.text=function(e,n,r){var i=t._engine.text(this,e||0,n||0,y(r));return this.__set__&&this.__set__.push(i),i},r.set=function(e){!t.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var n=new dt(e);return this.__set__&&this.__set__.push(n),n.paper=this,n.type="set",n},r.setStart=function(e){this.__set__=e||this.set()},r.setFinish=function(e){var t=this.__set__;return delete this.__set__,t},r.getSize=function(){var e=this.canvas.parentNode;return{width:e.offsetWidth,height:e.offsetHeight}},r.setSize=function(e,n){return t._engine.setSize.call(this,e,n)},r.setViewBox=function(e,n,r,i,o){return t._engine.setViewBox.call(this,e,n,r,i,o)},r.top=r.bottom=null,r.raphael=t,r.getElementByPoint=function(e,t){var n,r,i,o,s,a,l,c=this.canvas,d=u.doc.elementFromPoint(e,t);if(u.win.opera&&"svg"==d.tagName){var h=(r=(n=c).getBoundingClientRect(),o=(i=n.ownerDocument).body,a=(s=i.documentElement).clientTop||o.clientTop||0,l=s.clientLeft||o.clientLeft||0,{y:r.top+(u.win.pageYOffset||s.scrollTop||o.scrollTop)-a,x:r.left+(u.win.pageXOffset||s.scrollLeft||o.scrollLeft)-l}),p=c.createSVGRect();p.x=e-h.x,p.y=t-h.y,p.width=p.height=1;var f=c.getIntersectionList(p,null);f.length&&(d=f[f.length-1])}if(!d)return null;for(;d.parentNode&&d!=c.parentNode&&!d.raphael;)d=d.parentNode;return d==this.canvas.parentNode&&(d=c),d&&d.raphael?this.getById(d.raphaelid):null},r.getElementsByBBox=function(e){var n=this.set();return this.forEach(function(r){t.isBBoxIntersect(r.getBBox(),e)&&n.push(r)}),n},r.getById=function(e){for(var t=this.bottom;t;){if(t.id==e)return t;t=t.next}return null},r.forEach=function(e,t){for(var n=this.bottom;n;){if(!1===e.call(t,n))return this;n=n.next}return this},r.getElementsByPoint=function(e,t){var n=this.set();return this.forEach(function(r){r.isPointInside(e,t)&&n.push(r)}),n},Ue.isPointInside=function(e,n){var r=this.realPath=Z[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(r=t.transformPath(r,this.attr("transform"))),t.isPointInsidePath(r,e,n)},Ue.getBBox=function(e){if(this.removed)return{};var t=this._;return e?(!t.dirty&&t.bboxwt||(this.realPath=Z[this.type](this),t.bboxwt=ye(this.realPath),t.bboxwt.toString=Ve,t.dirty=0),t.bboxwt):((t.dirty||t.dirtyT||!t.bbox)&&(!t.dirty&&this.realPath||(t.bboxwt=0,this.realPath=Z[this.type](this)),t.bbox=ye(J(this.realPath,this.matrix)),t.bbox.toString=Ve,t.dirty=t.dirtyT=0),t.bbox)},Ue.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},Ue.glow=function(e){if("text"==this.type)return null;var t={width:((e=e||{}).width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:null==e.opacity?.5:e.opacity,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},n=t.width/2,r=this.paper,i=r.set(),o=this.realPath||Z[this.type](this);o=this.matrix?J(o,this.matrix):o;for(var s=1;s<n+1;s++)i.push(r.path(o).attr({stroke:t.color,fill:t.fill?t.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(t.width/n*s).toFixed(3),opacity:+(t.opacity/n).toFixed(3)}));return i.insertBefore(this).translate(t.offsetx,t.offsety)};var Ge=function(e,n,r,i,o,s,a,l,c){return null==c?fe(e,n,r,i,o,s,a,l):t.findDotsAtSegment(e,n,r,i,o,s,a,l,function(e,t,n,r,i,o,s,a,l){if(!(l<0||fe(e,t,n,r,i,o,s,a)<l)){var c,u=.5,d=1-u;for(c=fe(e,t,n,r,i,o,s,a,d);M(c-l)>.01;)c=fe(e,t,n,r,i,o,s,a,d+=(c<l?1:-1)*(u/=2));return d}}(e,n,r,i,o,s,a,l,c))},Ye=function(e,n){return function(r,i,o){for(var s,a,l,c,u,d="",h={},p=0,f=0,g=(r=Ie(r)).length;f<g;f++){if("M"==(l=r[f])[0])s=+l[1],a=+l[2];else{if(p+(c=Ge(s,a,l[1],l[2],l[3],l[4],l[5],l[6]))>i){if(n&&!h.start){if(d+=["C"+(u=Ge(s,a,l[1],l[2],l[3],l[4],l[5],l[6],i-p)).start.x,u.start.y,u.m.x,u.m.y,u.x,u.y],o)return d;h.start=d,d=["M"+u.x,u.y+"C"+u.n.x,u.n.y,u.end.x,u.end.y,l[5],l[6]].join(),p+=c,s=+l[5],a=+l[6];continue}if(!e&&!n)return{x:(u=Ge(s,a,l[1],l[2],l[3],l[4],l[5],l[6],i-p)).x,y:u.y,alpha:u.alpha}}p+=c,s=+l[5],a=+l[6]}d+=l.shift()+l}return h.end=d,(u=e?p:n?h:t.findDotsAtSegment(s,a,l[0],l[1],l[2],l[3],l[4],l[5],1)).alpha&&(u={x:u.x,y:u.y,alpha:u.alpha}),u}},Xe=Ye(1),Ke=Ye(),Qe=Ye(0,1);t.getTotalLength=Xe,t.getPointAtLength=Ke,t.getSubpath=function(e,t,n){if(this.getTotalLength(e)-n<1e-6)return Qe(e,t).end;var r=Qe(e,n,1);return t?Qe(r,t).end:r},Ue.getTotalLength=function(){var e=this.getPath();if(e)return this.node.getTotalLength?this.node.getTotalLength():Xe(e)},Ue.getPointAtLength=function(e){var t=this.getPath();if(t)return Ke(t,e)},Ue.getPath=function(){var e,n=t._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return n&&(e=n(this)),e},Ue.getSubpath=function(e,n){var r=this.getPath();if(r)return t.getSubpath(r,e,n)};var Ze=t.easing_formulas={linear:function(e){return e},"<":function(e){return I(e,1.7)},">":function(e){return I(e,.48)},"<>":function(e){var t=.48-e/1.04,n=S.sqrt(.1734+t*t),r=n-t,i=-n-t,o=I(M(r),1/3)*(r<0?-1:1)+I(M(i),1/3)*(i<0?-1:1)+.5;return 3*(1-o)*o*o+o*o*o},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},elastic:function(e){return e==!!e?e:I(2,-10*e)*S.sin(2*P*(e-.075)/.3)+1},bounce:function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375}};Ze.easeIn=Ze["ease-in"]=Ze["<"],Ze.easeOut=Ze["ease-out"]=Ze[">"],Ze.easeInOut=Ze["ease-in-out"]=Ze["<>"],Ze["back-in"]=Ze.backIn,Ze["back-out"]=Ze.backOut;var Je=[],et=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16)},tt=function(){for(var n=+new Date,r=0;r<Je.length;r++){var i=Je[r];if(!i.el.removed&&!i.paused){var o,s,a=n-i.start,l=i.ms,u=i.easing,d=i.from,h=i.diff,p=i.to,g=(i.t,i.el),m={},y={};if(i.initstatus?(a=(i.initstatus*i.anim.top-i.prev)/(i.percent-i.prev)*l,i.status=i.initstatus,delete i.initstatus,i.stop&&Je.splice(r--,1)):i.status=(i.prev+(i.percent-i.prev)*(a/l))/i.anim.top,!(a<0))if(a<l){var x=u(a/l);for(var b in d)if(d[c](b)){switch(B[b]){case T:o=+d[b]+x*l*h[b];break;case"colour":o="rgb("+[nt(L(d[b].r+x*l*h[b].r)),nt(L(d[b].g+x*l*h[b].g)),nt(L(d[b].b+x*l*h[b].b))].join(",")+")";break;case"path":o=[];for(var w=0,_=d[b].length;w<_;w++){o[w]=[d[b][w][0]];for(var S=1,k=d[b][w].length;S<k;S++)o[w][S]=+d[b][w][S]+x*l*h[b][w][S];o[w]=o[w].join(v)}o=o.join(v);break;case"transform":if(h[b].real)for(o=[],w=0,_=d[b].length;w<_;w++)for(o[w]=[d[b][w][0]],S=1,k=d[b][w].length;S<k;S++)o[w][S]=d[b][w][S]+x*l*h[b][w][S];else{var C=function(e){return+d[b][e]+x*l*h[b][e]};o=[["m",C(0),C(1),C(2),C(3),C(4),C(5)]]}break;case"csv":if("clip-rect"==b)for(o=[],w=4;w--;)o[w]=+d[b][w]+x*l*h[b][w];break;default:var M=[][f](d[b]);for(o=[],w=g.paper.customAttributes[b].length;w--;)o[w]=+M[w]+x*l*h[b][w]}m[b]=o}g.attr(m),function(t,n,r){setTimeout(function(){e("raphael.anim.frame."+t,n,r)})}(g.id,g,i.anim)}else{if(function(n,r,i){setTimeout(function(){e("raphael.anim.frame."+r.id,r,i),e("raphael.anim.finish."+r.id,r,i),t.is(n,"function")&&n.call(r)})}(i.callback,g,i.anim),g.attr(p),Je.splice(r--,1),i.repeat>1&&!i.next){for(s in p)p[c](s)&&(y[s]=i.totalOrigin[s]);i.el.attr(y),ot(i.anim,i.el,i.anim.percents[0],null,i.totalOrigin,i.repeat-1)}i.next&&!i.stop&&ot(i.anim,i.el,i.next,null,i.totalOrigin,i.repeat)}}}Je.length&&et(tt)},nt=function(e){return e>255?255:e<0?0:e};function rt(e,t,n,r,i,o){var s,a=3*t,l=3*(r-t)-a,c=1-a-l,u=3*n,d=3*(i-n)-u,h=1-u-d;function p(e){return((c*e+l)*e+a)*e}return s=function(e,t){var n,r,i,o,s,u;for(i=e,u=0;u<8;u++){if(o=p(i)-e,M(o)<t)return i;if(M(s=(3*c*i+2*l)*i+a)<1e-6)break;i-=o/s}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=p(i),M(o-e)<t)return i;e>o?n=i:r=i,i=(r-n)/2+n}return i}(e,1/(200*o)),((h*s+d)*s+u)*s}function it(e,t){var n=[],r={};if(this.ms=t,this.times=1,e){for(var i in e)e[c](i)&&(r[O(i)]=e[i],n.push(O(i)));n.sort(Y)}this.anim=r,this.top=n[n.length-1],this.percents=n}function ot(n,r,i,o,a,l){i=O(i);var u,d,h,p,g,m,v=n.ms,b={},w={},_={};if(o)for(k=0,C=Je.length;k<C;k++){var S=Je[k];if(S.el.id==r.id&&S.anim==n){S.percent!=i?(Je.splice(k,1),h=1):d=S,r.attr(S.totalOrigin);break}}else o=+w;for(var k=0,C=n.percents.length;k<C;k++){if(n.percents[k]==i||n.percents[k]>o*n.top){i=n.percents[k],g=n.percents[k-1]||0,v=v/n.top*(i-g),p=n.percents[k+1],u=n.anim[i];break}o&&r.attr(n.anim[n.percents[k]])}if(u){if(d)d.initstatus=o,d.start=new Date-d.ms*o;else{for(var M in u)if(u[c](M)&&(B[c](M)||r.paper.customAttributes[c](M)))switch(b[M]=r.attr(M),null==b[M]&&(b[M]=z[M]),w[M]=u[M],B[M]){case T:_[M]=(w[M]-b[M])/v;break;case"colour":b[M]=t.getRGB(b[M]);var I=t.getRGB(w[M]);_[M]={r:(I.r-b[M].r)/v,g:(I.g-b[M].g)/v,b:(I.b-b[M].b)/v};break;case"path":var P=Ie(b[M],w[M]),E=P[1];for(b[M]=P[0],_[M]=[],k=0,C=b[M].length;k<C;k++){_[M][k]=[0];for(var j=1,R=b[M][k].length;j<R;j++)_[M][k][j]=(E[k][j]-b[M][k][j])/v}break;case"transform":var A=r._,L=Re(A[M],w[M]);if(L)for(b[M]=L.from,w[M]=L.to,_[M]=[],_[M].real=!0,k=0,C=b[M].length;k<C;k++)for(_[M][k]=[b[M][k][0]],j=1,R=b[M][k].length;j<R;j++)_[M][k][j]=(w[M][k][j]-b[M][k][j])/v;else{var D=r.matrix||new Ae,F={_:{transform:A.transform},getBBox:function(){return r.getBBox(1)}};b[M]=[D.a,D.b,D.c,D.d,D.e,D.f],Ee(F,w[M]),w[M]=F._.transform,_[M]=[(F.matrix.a-D.a)/v,(F.matrix.b-D.b)/v,(F.matrix.c-D.c)/v,(F.matrix.d-D.d)/v,(F.matrix.e-D.e)/v,(F.matrix.f-D.f)/v]}break;case"csv":var $=y(u[M])[x](s),W=y(b[M])[x](s);if("clip-rect"==M)for(b[M]=W,_[M]=[],k=W.length;k--;)_[M][k]=($[k]-b[M][k])/v;w[M]=$;break;default:for($=[][f](u[M]),W=[][f](b[M]),_[M]=[],k=r.paper.customAttributes[M].length;k--;)_[M][k]=(($[k]||0)-(W[k]||0))/v}var U=u.easing,H=t.easing_formulas[U];if(!H)if((H=y(U).match(N))&&5==H.length){var q=H;H=function(e){return rt(e,+q[1],+q[2],+q[3],+q[4],v)}}else H=X;if(S={anim:n,percent:i,timestamp:m=u.start||n.start||+new Date,start:m+(n.del||0),status:0,initstatus:o||0,stop:!1,ms:v,easing:H,from:b,diff:_,to:w,el:r,callback:u.callback,prev:g,next:p,repeat:l||n.times,origin:r.attr(),totalOrigin:a},Je.push(S),o&&!d&&!h&&(S.stop=!0,S.start=new Date-v*o,1==Je.length))return tt();h&&(S.start=new Date-S.ms*o),1==Je.length&&et(tt)}e("raphael.anim.start."+r.id,r,n)}}function st(e){for(var t=0;t<Je.length;t++)Je[t].el.paper==e&&Je.splice(t--,1)}Ue.animateWith=function(e,n,r,i,o,s){if(this.removed)return s&&s.call(this),this;var a=r instanceof it?r:t.animation(r,i,o,s);ot(a,this,a.percents[0],null,this.attr());for(var l=0,c=Je.length;l<c;l++)if(Je[l].anim==n&&Je[l].el==e){Je[c-1].start=Je[l].start;break}return this},Ue.onAnimation=function(t){return t?e.on("raphael.anim.frame."+this.id,t):e.unbind("raphael.anim.frame."+this.id),this},it.prototype.delay=function(e){var t=new it(this.anim,this.ms);return t.times=this.times,t.del=+e||0,t},it.prototype.repeat=function(e){var t=new it(this.anim,this.ms);return t.del=this.del,t.times=S.floor(k(e,0))||1,t},t.animation=function(e,n,r,i){if(e instanceof it)return e;!t.is(r,"function")&&r||(i=i||r||null,r=null),e=Object(e),n=+n||0;var o,s,a={};for(s in e)e[c](s)&&O(s)!=s&&O(s)+"%"!=s&&(o=!0,a[s]=e[s]);if(o)return r&&(a.easing=r),i&&(a.callback=i),new it({100:a},n);if(i){var l=0;for(var u in e){var d=D(u);e[c](u)&&d>l&&(l=d)}!e[l+="%"].callback&&(e[l].callback=i)}return new it(e,n)},Ue.animate=function(e,n,r,i){if(this.removed)return i&&i.call(this),this;var o=e instanceof it?e:t.animation(e,n,r,i);return ot(o,this,o.percents[0],null,this.attr()),this},Ue.setTime=function(e,t){return e&&null!=t&&this.status(e,C(t,e.ms)/e.ms),this},Ue.status=function(e,t){var n,r,i=[],o=0;if(null!=t)return ot(e,this,-1,C(t,1)),this;for(n=Je.length;o<n;o++)if((r=Je[o]).el.id==this.id&&(!e||r.anim==e)){if(e)return r.status;i.push({anim:r.anim,status:r.status})}return e?0:i},Ue.pause=function(t){for(var n=0;n<Je.length;n++)Je[n].el.id!=this.id||t&&Je[n].anim!=t||!1!==e("raphael.anim.pause."+this.id,this,Je[n].anim)&&(Je[n].paused=!0);return this},Ue.resume=function(t){for(var n=0;n<Je.length;n++)if(Je[n].el.id==this.id&&(!t||Je[n].anim==t)){var r=Je[n];!1!==e("raphael.anim.resume."+this.id,this,r.anim)&&(delete r.paused,this.status(r.anim,r.status))}return this},Ue.stop=function(t){for(var n=0;n<Je.length;n++)Je[n].el.id!=this.id||t&&Je[n].anim!=t||!1!==e("raphael.anim.stop."+this.id,this,Je[n].anim)&&Je.splice(n--,1);return this},e.on("raphael.remove",st),e.on("raphael.clear",st),Ue.toString=function(){return"Raphaël’s object"};var at,lt,ct,ut,dt=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var t=0,n=e.length;t<n;t++)!e[t]||e[t].constructor!=Ue.constructor&&e[t].constructor!=dt||(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},ht=dt.prototype;for(var pt in ht.push=function(){for(var e,t,n=0,r=arguments.length;n<r;n++)!(e=arguments[n])||e.constructor!=Ue.constructor&&e.constructor!=dt||(this[t=this.items.length]=this.items[t]=e,this.length++);return this},ht.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},ht.forEach=function(e,t){for(var n=0,r=this.items.length;n<r;n++)if(!1===e.call(t,this.items[n],n))return this;return this},Ue)Ue[c](pt)&&(ht[pt]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e][p](n,t)})}}(pt));return ht.attr=function(e,n){if(e&&t.is(e,E)&&t.is(e[0],"object"))for(var r=0,i=e.length;r<i;r++)this.items[r].attr(e[r]);else for(var o=0,s=this.items.length;o<s;o++)this.items[o].attr(e,n);return this},ht.clear=function(){for(;this.length;)this.pop()},ht.splice=function(e,t,n){e=e<0?k(this.length+e,0):e,t=k(0,C(this.length-e,t));var r,i=[],o=[],s=[];for(r=2;r<arguments.length;r++)s.push(arguments[r]);for(r=0;r<t;r++)o.push(this[e+r]);for(;r<this.length-e;r++)i.push(this[e+r]);var a=s.length;for(r=0;r<a+i.length;r++)this.items[e+r]=this[e+r]=r<a?s[r]:i[r-a];for(r=this.items.length=this.length-=t-a;this[r];)delete this[r++];return new dt(o)},ht.exclude=function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]==e)return this.splice(t,1),!0},ht.animate=function(e,n,r,i){(t.is(r,"function")||!r)&&(i=r||null);var o,s,a=this.items.length,l=a,c=this;if(!a)return this;i&&(s=function(){! --a&&i.call(c)}),r=t.is(r,"string")?r:s;var u=t.animation(e,n,r,s);for(o=this.items[--l].animate(u);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(o,u,u),this.items[l]&&!this.items[l].removed||a--;return this},ht.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},ht.getBBox=function(){for(var e=[],t=[],n=[],r=[],i=this.items.length;i--;)if(!this.items[i].removed){var o=this.items[i].getBBox();e.push(o.x),t.push(o.y),n.push(o.x+o.width),r.push(o.y+o.height)}return{x:e=C[p](0,e),y:t=C[p](0,t),x2:n=k[p](0,n),y2:r=k[p](0,r),width:n-e,height:r-t}},ht.clone=function(e){e=this.paper.set();for(var t=0,n=this.items.length;t<n;t++)e.push(this.items[t].clone());return e},ht.toString=function(){return"Raphaël‘s set"},ht.glow=function(e){var t=this.paper.set();return this.forEach(function(n,r){var i=n.glow(e);null!=i&&i.forEach(function(e,n){t.push(e)})}),t},ht.isPointInside=function(e,t){var n=!1;return this.forEach(function(r){if(r.isPointInside(e,t))return n=!0,!1}),n},t.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},n=e.face["font-family"];for(var r in e.face)e.face[c](r)&&(t.face[r]=e.face[r]);if(this.fonts[n]?this.fonts[n].push(t):this.fonts[n]=[t],!e.svg)for(var i in t.face["units-per-em"]=D(e.face["units-per-em"],10),e.glyphs)if(e.glyphs[c](i)){var o=e.glyphs[i];if(t.glyphs[i]={w:o.w,k:{},d:o.d&&"M"+o.d.replace(/[mlcxtrv]/g,function(e){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[e]||"M"})+"z"},o.k)for(var s in o.k)o[c](s)&&(t.glyphs[i].k[s]=o.k[s])}return e},r.getFont=function(e,n,r,i){if(i=i||"normal",r=r||"normal",n=+n||{normal:400,bold:700,lighter:300,bolder:800}[n]||400,t.fonts){var o,s=t.fonts[e];if(!s){var a=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,m)+"(\\s|$)","i");for(var l in t.fonts)if(t.fonts[c](l)&&a.test(l)){s=t.fonts[l];break}}if(s)for(var u=0,d=s.length;u<d&&((o=s[u]).face["font-weight"]!=n||o.face["font-style"]!=r&&o.face["font-style"]||o.face["font-stretch"]!=i);u++);return o}},r.print=function(e,n,r,i,o,a,l,c){a=a||"middle",l=k(C(l||0,1),-1),c=k(C(c||1,3),1);var u,d=y(r)[x](m),h=0,p=0,f=m;if(t.is(i,"string")&&(i=this.getFont(i)),i){u=(o||16)/i.face["units-per-em"];for(var g=i.face.bbox[x](s),v=+g[0],b=g[3]-g[1],w=0,_=+g[1]+("baseline"==a?b+ +i.face.descent:b/2),S=0,M=d.length;S<M;S++){if("\n"==d[S])h=0,P=0,p=0,w+=b*c;else{var I=p&&i.glyphs[d[S-1]]||{},P=i.glyphs[d[S]];h+=p?(I.w||i.w)+(I.k&&I.k[d[S]]||0)+i.w*l:0,p=1}P&&P.d&&(f+=t.transformPath(P.d,["t",h*u,w*u,"s",u,u,v,_,"t",(e-v)/u,(n-_)/u]))}}return this.path(f).attr({fill:"#000",stroke:"none"})},r.add=function(e){if(t.is(e,"array"))for(var n,r=this.set(),i=0,o=e.length;i<o;i++)n=e[i]||{},a[c](n.type)&&r.push(this[n.type]().attr(n));return r},t.format=function(e,n){var r=t.is(n,E)?[0][f](n):arguments;return e&&t.is(e,"string")&&r.length-1&&(e=e.replace(l,function(e,t){return null==r[++t]?m:r[t]})),e||m},t.fullfill=(at=/\{([^\}]+)\}/g,lt=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(e,t){return String(e).replace(at,function(e,n){return r=e,o=i=t,n.replace(lt,function(e,t,n,r,i){t=t||r,o&&(t in o&&(o=o[t]),"function"==typeof o&&i&&(o=o()))}),o=(null==o||o==i?r:o)+"";var r,i,o})}),t.ninja=function(){if(d.was)u.win.Raphael=d.is;else{window.Raphael=void 0;try{delete window.Raphael}catch(e){}}return t},t.st=ht,e.on("raphael.DOMload",function(){n=!0}),null==(ct=document).readyState&&ct.addEventListener&&(ct.addEventListener("DOMContentLoaded",ut=function(){ct.removeEventListener("DOMContentLoaded",ut,!1),ct.readyState="complete"},!1),ct.readyState="loading"),function e(){/in/.test(ct.readyState)?setTimeout(e,9):t.eve("raphael.DOMload")}(),t}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(3),n(4)],void 0===(i=function(e){return e}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i,o,s,a,l,c,u,d,h,p,f,g,m;s="hasOwnProperty",a=/[\.\/]/,l=/\s*,\s*/,c=function(e,t){return e-t},u={n:{}},d=function(){for(var e=0,t=this.length;e<t;e++)if(void 0!==this[e])return this[e]},h=function(){for(var e=this.length;--e;)if(void 0!==this[e])return this[e]},p=Object.prototype.toString,f=String,g=Array.isArray||function(e){return e instanceof Array||"[object Array]"==p.call(e)},(m=function(e,t){var n,r=o,s=Array.prototype.slice.call(arguments,2),a=m.listeners(e),l=0,u=[],p={},f=[],g=i;f.firstDefined=d,f.lastDefined=h,i=e,o=0;for(var v=0,y=a.length;v<y;v++)"zIndex"in a[v]&&(u.push(a[v].zIndex),a[v].zIndex<0&&(p[a[v].zIndex]=a[v]));for(u.sort(c);u[l]<0;)if(n=p[u[l++]],f.push(n.apply(t,s)),o)return o=r,f;for(v=0;v<y;v++)if("zIndex"in(n=a[v]))if(n.zIndex==u[l]){if(f.push(n.apply(t,s)),o)break;do{if((n=p[u[++l]])&&f.push(n.apply(t,s)),o)break}while(n)}else p[n.zIndex]=n;else if(f.push(n.apply(t,s)),o)break;return o=r,i=g,f})._events=u,m.listeners=function(e){var t,n,r,i,o,s,l,c,d=g(e)?e:e.split(a),h=u,p=[h],f=[];for(i=0,o=d.length;i<o;i++){for(c=[],s=0,l=p.length;s<l;s++)for(n=[(h=p[s].n)[d[i]],h["*"]],r=2;r--;)(t=n[r])&&(c.push(t),f=f.concat(t.f||[]));p=c}return f},m.separator=function(e){e?(e="["+(e=f(e).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",a=new RegExp(e)):a=/[\.\/]/},m.on=function(e,t){if("function"!=typeof t)return function(){};for(var n=g(e)?g(e[0])?e:[e]:f(e).split(l),r=0,i=n.length;r<i;r++)!function(e){for(var n,r=g(e)?e:f(e).split(a),i=u,o=0,s=r.length;o<s;o++)i=(i=i.n).hasOwnProperty(r[o])&&i[r[o]]||(i[r[o]]={n:{}});for(i.f=i.f||[],o=0,s=i.f.length;o<s;o++)if(i.f[o]==t){n=!0;break}!n&&i.f.push(t)}(n[r]);return function(e){+e==+e&&(t.zIndex=+e)}},m.f=function(e){var t=[].slice.call(arguments,1);return function(){m.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},m.stop=function(){o=1},m.nt=function(e){var t=g(i)?i.join("."):i;return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},m.nts=function(){return g(i)?i:i.split(a)},m.off=m.unbind=function(e,t){if(e){var n=g(e)?g(e[0])?e:[e]:f(e).split(l);if(n.length>1)for(var r=0,i=n.length;r<i;r++)m.off(n[r],t);else{n=g(e)?e:f(e).split(a);var o,c,d,h,p,v=[u];for(r=0,i=n.length;r<i;r++)for(h=0;h<v.length;h+=d.length-2){if(d=[h,1],o=v[h].n,"*"!=n[r])o[n[r]]&&d.push(o[n[r]]);else for(c in o)o[s](c)&&d.push(o[c]);v.splice.apply(v,d)}for(r=0,i=v.length;r<i;r++)for(o=v[r];o.n;){if(t){if(o.f){for(h=0,p=o.f.length;h<p;h++)if(o.f[h]==t){o.f.splice(h,1);break}!o.f.length&&delete o.f}for(c in o.n)if(o.n[s](c)&&o.n[c].f){var y=o.n[c].f;for(h=0,p=y.length;h<p;h++)if(y[h]==t){y.splice(h,1);break}!y.length&&delete o.n[c].f}}else for(c in delete o.f,o.n)o.n[s](c)&&o.n[c].f&&delete o.n[c].f;o=o.n}}}else m._events=u={n:{}}},m.once=function(e,t){var n=function(){return m.off(e,n),t.apply(this,arguments)};return m.on(e,n)},m.version="0.5.0",m.toString=function(){return"You are running Eve 0.5.0"},e.exports?e.exports=m:void 0===(r=function(){return m}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(0)],void 0===(i=function(e){if(!e||e.svg){var t="hasOwnProperty",n=String,r=parseFloat,i=parseInt,o=Math,s=o.max,a=o.abs,l=o.pow,c=/[, ]+/,u=e.eve,d="",h=" ",p="http://www.w3.org/1999/xlink",f={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},g={};e.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var m=function(r,i){if(i)for(var o in"string"==typeof r&&(r=m(r)),i)i[t](o)&&("xlink:"==o.substring(0,6)?r.setAttributeNS(p,o.substring(6),n(i[o])):r.setAttribute(o,n(i[o])));else(r=e._g.doc.createElementNS("http://www.w3.org/2000/svg",r)).style&&(r.style.webkitTapHighlightColor="rgba(0,0,0,0)");return r},v=function(t,i){var c="linear",u=t.id+i,h=.5,p=.5,f=t.node,g=t.paper,v=f.style,x=e._g.doc.getElementById(u);if(!x){if(i=(i=n(i).replace(e._radial_gradient,function(e,t,n){if(c="radial",t&&n){h=r(t);var i=2*((p=r(n))>.5)-1;l(h-.5,2)+l(p-.5,2)>.25&&(p=o.sqrt(.25-l(h-.5,2))*i+.5)&&.5!=p&&(p=p.toFixed(5)-1e-5*i)}return d})).split(/\s*\-\s*/),"linear"==c){var b=i.shift();if(b=-r(b),isNaN(b))return null;var w=[0,0,o.cos(e.rad(b)),o.sin(e.rad(b))],_=1/(s(a(w[2]),a(w[3]))||1);w[2]*=_,w[3]*=_,w[2]<0&&(w[0]=-w[2],w[2]=0),w[3]<0&&(w[1]=-w[3],w[3]=0)}var S=e._parseDots(i);if(!S)return null;if(u=u.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&u!=t.gradient.id&&(g.defs.removeChild(t.gradient),delete t.gradient),!t.gradient){x=m(c+"Gradient",{id:u}),t.gradient=x,m(x,"radial"==c?{fx:h,fy:p}:{x1:w[0],y1:w[1],x2:w[2],y2:w[3],gradientTransform:t.matrix.invert()}),g.defs.appendChild(x);for(var k=0,C=S.length;k<C;k++)x.appendChild(m("stop",{offset:S[k].offset?S[k].offset:k?"100%":"0%","stop-color":S[k].color||"#fff","stop-opacity":isFinite(S[k].opacity)?S[k].opacity:1}))}}return m(f,{fill:y(u),opacity:1,"fill-opacity":1}),v.fill=d,v.opacity=1,v.fillOpacity=1,1},y=function(e){if((t=document.documentMode)&&(9===t||10===t))return"url('#"+e+"')";var t,n=document.location;return"url('"+n.protocol+"//"+n.host+n.pathname+n.search+"#"+e+"')"},x=function(e){var t=e.getBBox(1);m(e.pattern,{patternTransform:e.matrix.invert()+" translate("+t.x+","+t.y+")"})},b=function(r,i,o){if("path"==r.type){for(var s,a,l,c,u,h=n(i).toLowerCase().split("-"),p=r.paper,v=o?"end":"start",y=r.node,x=r.attrs,b=x["stroke-width"],w=h.length,_="classic",S=3,k=3,C=5;w--;)switch(h[w]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":_=h[w];break;case"wide":k=5;break;case"narrow":k=2;break;case"long":S=5;break;case"short":S=2}if("open"==_?(S+=2,k+=2,C+=2,l=1,c=o?4:1,u={fill:"none",stroke:x.stroke}):(c=l=S/2,u={fill:x.stroke,stroke:"none"}),r._.arrows?o?(r._.arrows.endPath&&g[r._.arrows.endPath]--,r._.arrows.endMarker&&g[r._.arrows.endMarker]--):(r._.arrows.startPath&&g[r._.arrows.startPath]--,r._.arrows.startMarker&&g[r._.arrows.startMarker]--):r._.arrows={},"none"!=_){var M="raphael-marker-"+_,I="raphael-marker-"+v+_+S+k+"-obj"+r.id;e._g.doc.getElementById(M)?g[M]++:(p.defs.appendChild(m(m("path"),{"stroke-linecap":"round",d:f[_],id:M})),g[M]=1);var P,T=e._g.doc.getElementById(I);T?(g[I]++,P=T.getElementsByTagName("use")[0]):(T=m(m("marker"),{id:I,markerHeight:k,markerWidth:S,orient:"auto",refX:c,refY:k/2}),P=m(m("use"),{"xlink:href":"#"+M,transform:(o?"rotate(180 "+S/2+" "+k/2+") ":d)+"scale("+S/C+","+k/C+")","stroke-width":(1/((S/C+k/C)/2)).toFixed(4)}),T.appendChild(P),p.defs.appendChild(T),g[I]=1),m(P,u);var E=l*("diamond"!=_&&"oval"!=_);o?(s=r._.arrows.startdx*b||0,a=e.getTotalLength(x.path)-E*b):(s=E*b,a=e.getTotalLength(x.path)-(r._.arrows.enddx*b||0)),(u={})["marker-"+v]="url(#"+I+")",(a||s)&&(u.d=e.getSubpath(x.path,s,a)),m(y,u),r._.arrows[v+"Path"]=M,r._.arrows[v+"Marker"]=I,r._.arrows[v+"dx"]=E,r._.arrows[v+"Type"]=_,r._.arrows[v+"String"]=i}else o?(s=r._.arrows.startdx*b||0,a=e.getTotalLength(x.path)-s):(s=0,a=e.getTotalLength(x.path)-(r._.arrows.enddx*b||0)),r._.arrows[v+"Path"]&&m(y,{d:e.getSubpath(x.path,s,a)}),delete r._.arrows[v+"Path"],delete r._.arrows[v+"Marker"],delete r._.arrows[v+"dx"],delete r._.arrows[v+"Type"],delete r._.arrows[v+"String"];for(u in g)if(g[t](u)&&!g[u]){var j=e._g.doc.getElementById(u);j&&j.parentNode.removeChild(j)}}},w={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},_=function(e,t,r){if(t=w[n(t).toLowerCase()]){for(var i=e.attrs["stroke-width"]||"1",o={round:i,square:i,butt:0}[e.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,s=[],a=t.length;a--;)s[a]=t[a]*i+(a%2?1:-1)*o;m(e.node,{"stroke-dasharray":s.join(",")})}else m(e.node,{"stroke-dasharray":"none"})},S=function(r,o){var l=r.node,u=r.attrs,h=l.style.visibility;for(var f in l.style.visibility="hidden",o)if(o[t](f)){if(!e._availableAttrs[t](f))continue;var g=o[f];switch(u[f]=g,f){case"blur":r.blur(g);break;case"title":var y=l.getElementsByTagName("title");if(y.length&&(y=y[0]))y.firstChild.nodeValue=g;else{y=m("title");var w=e._g.doc.createTextNode(g);y.appendChild(w),l.appendChild(y)}break;case"href":case"target":var S=l.parentNode;if("a"!=S.tagName.toLowerCase()){var C=m("a");S.insertBefore(C,l),C.appendChild(l),S=C}"target"==f?S.setAttributeNS(p,"show","blank"==g?"new":g):S.setAttributeNS(p,f,g);break;case"cursor":l.style.cursor=g;break;case"transform":r.transform(g);break;case"arrow-start":b(r,g);break;case"arrow-end":b(r,g,1);break;case"clip-rect":var M=n(g).split(c);if(4==M.length){r.clip&&r.clip.parentNode.parentNode.removeChild(r.clip.parentNode);var I=m("clipPath"),P=m("rect");I.id=e.createUUID(),m(P,{x:M[0],y:M[1],width:M[2],height:M[3]}),I.appendChild(P),r.paper.defs.appendChild(I),m(l,{"clip-path":"url(#"+I.id+")"}),r.clip=P}if(!g){var T=l.getAttribute("clip-path");if(T){var E=e._g.doc.getElementById(T.replace(/(^url\(#|\)$)/g,d));E&&E.parentNode.removeChild(E),m(l,{"clip-path":d}),delete r.clip}}break;case"path":"path"==r.type&&(m(l,{d:g?u.path=e._pathToAbsolute(g):"M0,0"}),r._.dirty=1,r._.arrows&&("startString"in r._.arrows&&b(r,r._.arrows.startString),"endString"in r._.arrows&&b(r,r._.arrows.endString,1)));break;case"width":if(l.setAttribute(f,g),r._.dirty=1,!u.fx)break;f="x",g=u.x;case"x":u.fx&&(g=-u.x-(u.width||0));case"rx":if("rx"==f&&"rect"==r.type)break;case"cx":l.setAttribute(f,g),r.pattern&&x(r),r._.dirty=1;break;case"height":if(l.setAttribute(f,g),r._.dirty=1,!u.fy)break;f="y",g=u.y;case"y":u.fy&&(g=-u.y-(u.height||0));case"ry":if("ry"==f&&"rect"==r.type)break;case"cy":l.setAttribute(f,g),r.pattern&&x(r),r._.dirty=1;break;case"r":"rect"==r.type?m(l,{rx:g,ry:g}):l.setAttribute(f,g),r._.dirty=1;break;case"src":"image"==r.type&&l.setAttributeNS(p,"href",g);break;case"stroke-width":1==r._.sx&&1==r._.sy||(g/=s(a(r._.sx),a(r._.sy))||1),l.setAttribute(f,g),u["stroke-dasharray"]&&_(r,u["stroke-dasharray"],o),r._.arrows&&("startString"in r._.arrows&&b(r,r._.arrows.startString),"endString"in r._.arrows&&b(r,r._.arrows.endString,1));break;case"stroke-dasharray":_(r,g,o);break;case"fill":var j=n(g).match(e._ISURL);if(j){I=m("pattern");var R=m("image");I.id=e.createUUID(),m(I,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),m(R,{x:0,y:0,"xlink:href":j[1]}),I.appendChild(R),function(t){e._preload(j[1],function(){var e=this.offsetWidth,n=this.offsetHeight;m(t,{width:e,height:n}),m(R,{width:e,height:n})})}(I),r.paper.defs.appendChild(I),m(l,{fill:"url(#"+I.id+")"}),r.pattern=I,r.pattern&&x(r);break}var A=e.getRGB(g);if(A.error){if(("circle"==r.type||"ellipse"==r.type||"r"!=n(g).charAt())&&v(r,g)){if("opacity"in u||"fill-opacity"in u){var N=e._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,d));if(N){var L=N.getElementsByTagName("stop");m(L[L.length-1],{"stop-opacity":("opacity"in u?u.opacity:1)*("fill-opacity"in u?u["fill-opacity"]:1)})}}u.gradient=g,u.fill="none";break}}else delete o.gradient,delete u.gradient,!e.is(u.opacity,"undefined")&&e.is(o.opacity,"undefined")&&m(l,{opacity:u.opacity}),!e.is(u["fill-opacity"],"undefined")&&e.is(o["fill-opacity"],"undefined")&&m(l,{"fill-opacity":u["fill-opacity"]});A[t]("opacity")&&m(l,{"fill-opacity":A.opacity>1?A.opacity/100:A.opacity});case"stroke":A=e.getRGB(g),l.setAttribute(f,A.hex),"stroke"==f&&A[t]("opacity")&&m(l,{"stroke-opacity":A.opacity>1?A.opacity/100:A.opacity}),"stroke"==f&&r._.arrows&&("startString"in r._.arrows&&b(r,r._.arrows.startString),"endString"in r._.arrows&&b(r,r._.arrows.endString,1));break;case"gradient":("circle"==r.type||"ellipse"==r.type||"r"!=n(g).charAt())&&v(r,g);break;case"opacity":u.gradient&&!u[t]("stroke-opacity")&&m(l,{"stroke-opacity":g>1?g/100:g});case"fill-opacity":if(u.gradient){(N=e._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,d)))&&(L=N.getElementsByTagName("stop"),m(L[L.length-1],{"stop-opacity":g}));break}default:"font-size"==f&&(g=i(g,10)+"px");var O=f.replace(/(\-.)/g,function(e){return e.substring(1).toUpperCase()});l.style[O]=g,r._.dirty=1,l.setAttribute(f,g)}}k(r,o),l.style.visibility=h},k=function(r,o){if("text"==r.type&&(o[t]("text")||o[t]("font")||o[t]("font-size")||o[t]("x")||o[t]("y"))){var s=r.attrs,a=r.node,l=a.firstChild?i(e._g.doc.defaultView.getComputedStyle(a.firstChild,d).getPropertyValue("font-size"),10):10;if(o[t]("text")){for(s.text=o.text;a.firstChild;)a.removeChild(a.firstChild);for(var c,u=n(o.text).split("\n"),h=[],p=0,f=u.length;p<f;p++)c=m("tspan"),p&&m(c,{dy:1.2*l,x:s.x}),c.appendChild(e._g.doc.createTextNode(u[p])),a.appendChild(c),h[p]=c}else for(p=0,f=(h=a.getElementsByTagName("tspan")).length;p<f;p++)p?m(h[p],{dy:1.2*l,x:s.x}):m(h[0],{dy:0});m(a,{x:s.x,y:s.y}),r._.dirty=1;var g=r._getBBox(),v=s.y-(g.y+g.height/2);v&&e.is(v,"finite")&&m(h[0],{dy:v})}},C=function(e){return e.parentNode&&"a"===e.parentNode.tagName.toLowerCase()?e.parentNode:e},M=function(t,n){this[0]=this.node=t,t.raphael=!0,this.id=("0000"+(Math.random()*Math.pow(36,5)|0).toString(36)).slice(-5),t.raphaelid=this.id,this.matrix=e.matrix(),this.realPath=null,this.paper=n,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},I=e.el;M.prototype=I,I.constructor=M,e._engine.path=function(e,t){var n=m("path");t.canvas&&t.canvas.appendChild(n);var r=new M(n,t);return r.type="path",S(r,{fill:"none",stroke:"#000",path:e}),r},I.rotate=function(e,t,i){if(this.removed)return this;if((e=n(e).split(c)).length-1&&(t=r(e[1]),i=r(e[2])),e=r(e[0]),null==i&&(t=i),null==t||null==i){var o=this.getBBox(1);t=o.x+o.width/2,i=o.y+o.height/2}return this.transform(this._.transform.concat([["r",e,t,i]])),this},I.scale=function(e,t,i,o){if(this.removed)return this;if((e=n(e).split(c)).length-1&&(t=r(e[1]),i=r(e[2]),o=r(e[3])),e=r(e[0]),null==t&&(t=e),null==o&&(i=o),null==i||null==o)var s=this.getBBox(1);return i=null==i?s.x+s.width/2:i,o=null==o?s.y+s.height/2:o,this.transform(this._.transform.concat([["s",e,t,i,o]])),this},I.translate=function(e,t){return this.removed||((e=n(e).split(c)).length-1&&(t=r(e[1])),e=r(e[0])||0,t=+t||0,this.transform(this._.transform.concat([["t",e,t]]))),this},I.transform=function(n){var r=this._;if(null==n)return r.transform;if(e._extractTransform(this,n),this.clip&&m(this.clip,{transform:this.matrix.invert()}),this.pattern&&x(this),this.node&&m(this.node,{transform:this.matrix}),1!=r.sx||1!=r.sy){var i=this.attrs[t]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":i})}return this},I.hide=function(){return this.removed||(this.node.style.display="none"),this},I.show=function(){return this.removed||(this.node.style.display=""),this},I.remove=function(){var t=C(this.node);if(!this.removed&&t.parentNode){var n=this.paper;for(var r in n.__set__&&n.__set__.exclude(this),u.unbind("raphael.*.*."+this.id),this.gradient&&n.defs.removeChild(this.gradient),e._tear(this,n),t.parentNode.removeChild(t),this.removeData(),this)this[r]="function"==typeof this[r]?e._removedFactory(r):null;this.removed=!0}},I._getBBox=function(){if("none"==this.node.style.display){this.show();var e=!0}var t,n=!1;this.paper.canvas.parentElement?t=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(t=this.paper.canvas.parentNode.style),t&&"none"==t.display&&(n=!0,t.display="");var r={};try{r=this.node.getBBox()}catch(i){r={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{r=r||{},n&&(t.display="none")}return e&&this.hide(),r},I.attr=function(n,r){if(this.removed)return this;if(null==n){var i={};for(var o in this.attrs)this.attrs[t](o)&&(i[o]=this.attrs[o]);return i.gradient&&"none"==i.fill&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(null==r&&e.is(n,"string")){if("fill"==n&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==n)return this._.transform;for(var s=n.split(c),a={},l=0,d=s.length;l<d;l++)(n=s[l])in this.attrs?a[n]=this.attrs[n]:e.is(this.paper.customAttributes[n],"function")?a[n]=this.paper.customAttributes[n].def:a[n]=e._availableAttrs[n];return d-1?a:a[s[0]]}if(null==r&&e.is(n,"array")){for(a={},l=0,d=n.length;l<d;l++)a[n[l]]=this.attr(n[l]);return a}if(null!=r){var h={};h[n]=r}else null!=n&&e.is(n,"object")&&(h=n);for(var p in h)u("raphael.attr."+p+"."+this.id,this,h[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&h[t](p)&&e.is(this.paper.customAttributes[p],"function")){var f=this.paper.customAttributes[p].apply(this,[].concat(h[p]));for(var g in this.attrs[p]=h[p],f)f[t](g)&&(h[g]=f[g])}return S(this,h),this},I.toFront=function(){if(this.removed)return this;var t=C(this.node);t.parentNode.appendChild(t);var n=this.paper;return n.top!=this&&e._tofront(this,n),this},I.toBack=function(){if(this.removed)return this;var t=C(this.node),n=t.parentNode;return n.insertBefore(t,n.firstChild),e._toback(this,this.paper),this.paper,this},I.insertAfter=function(t){if(this.removed||!t)return this;var n=C(this.node),r=C(t.node||t[t.length-1].node);return r.nextSibling?r.parentNode.insertBefore(n,r.nextSibling):r.parentNode.appendChild(n),e._insertafter(this,t,this.paper),this},I.insertBefore=function(t){if(this.removed||!t)return this;var n=C(this.node),r=C(t.node||t[0].node);return r.parentNode.insertBefore(n,r),e._insertbefore(this,t,this.paper),this},I.blur=function(t){var n=this;if(0!=+t){var r=m("filter"),i=m("feGaussianBlur");n.attrs.blur=t,r.id=e.createUUID(),m(i,{stdDeviation:+t||1.5}),r.appendChild(i),n.paper.defs.appendChild(r),n._blur=r,m(n.node,{filter:"url(#"+r.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter");return n},e._engine.circle=function(e,t,n,r){var i=m("circle");e.canvas&&e.canvas.appendChild(i);var o=new M(i,e);return o.attrs={cx:t,cy:n,r:r,fill:"none",stroke:"#000"},o.type="circle",m(i,o.attrs),o},e._engine.rect=function(e,t,n,r,i,o){var s=m("rect");e.canvas&&e.canvas.appendChild(s);var a=new M(s,e);return a.attrs={x:t,y:n,width:r,height:i,rx:o||0,ry:o||0,fill:"none",stroke:"#000"},a.type="rect",m(s,a.attrs),a},e._engine.ellipse=function(e,t,n,r,i){var o=m("ellipse");e.canvas&&e.canvas.appendChild(o);var s=new M(o,e);return s.attrs={cx:t,cy:n,rx:r,ry:i,fill:"none",stroke:"#000"},s.type="ellipse",m(o,s.attrs),s},e._engine.image=function(e,t,n,r,i,o){var s=m("image");m(s,{x:n,y:r,width:i,height:o,preserveAspectRatio:"none"}),s.setAttributeNS(p,"href",t),e.canvas&&e.canvas.appendChild(s);var a=new M(s,e);return a.attrs={x:n,y:r,width:i,height:o,src:t},a.type="image",a},e._engine.text=function(t,n,r,i){var o=m("text");t.canvas&&t.canvas.appendChild(o);var s=new M(o,t);return s.attrs={x:n,y:r,"text-anchor":"middle",text:i,"font-family":e._availableAttrs["font-family"],"font-size":e._availableAttrs["font-size"],stroke:"none",fill:"#000"},s.type="text",S(s,s.attrs),s},e._engine.setSize=function(e,t){return this.width=e||this.width,this.height=t||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},e._engine.create=function(){var t=e._getContainer.apply(0,arguments),n=t&&t.container;if(!n)throw new Error("SVG container not found.");var r,i=t.x,o=t.y,s=t.width,a=t.height,l=m("svg"),c="overflow:hidden;";return i=i||0,o=o||0,m(l,{height:a=a||342,version:1.1,width:s=s||512,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),1==n?(l.style.cssText=c+"position:absolute;left:"+i+"px;top:"+o+"px",e._g.doc.body.appendChild(l),r=1):(l.style.cssText=c+"position:relative",n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l)),(n=new e._Paper).width=s,n.height=a,n.canvas=l,n.clear(),n._left=n._top=0,r&&(n.renderfix=function(){}),n.renderfix(),n},e._engine.setViewBox=function(e,t,n,r,i){u("raphael.setViewBox",this,this._viewBox,[e,t,n,r,i]);var o,a,l=this.getSize(),c=s(n/l.width,r/l.height),d=this.top,p=i?"xMidYMid meet":"xMinYMin";for(null==e?(this._vbSize&&(c=1),delete this._vbSize,o="0 0 "+this.width+h+this.height):(this._vbSize=c,o=e+h+t+h+n+h+r),m(this.canvas,{viewBox:o,preserveAspectRatio:p});c&&d;)a="stroke-width"in d.attrs?d.attrs["stroke-width"]:1,d.attr({"stroke-width":a}),d._.dirty=1,d._.dirtyT=1,d=d.prev;return this._viewBox=[e,t,n,r,!!i],this},e.prototype.renderfix=function(){var e,t=this.canvas,n=t.style;try{e=t.getScreenCTM()||t.createSVGMatrix()}catch(o){e=t.createSVGMatrix()}var r=-e.e%1,i=-e.f%1;(r||i)&&(r&&(this._left=(this._left+r)%1,n.left=this._left+"px"),i&&(this._top=(this._top+i)%1,n.top=this._top+"px"))},e.prototype.clear=function(){e.eve("raphael.clear",this);for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=m("desc")).appendChild(e._g.doc.createTextNode("Created with Raphaël "+e.version)),t.appendChild(this.desc),t.appendChild(this.defs=m("defs"))},e.prototype.remove=function(){for(var t in u("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?e._removedFactory(t):null};var P=e.st;for(var T in I)I[t](T)&&!P[t](T)&&(P[T]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e].apply(n,t)})}}(T))}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0)],void 0===(i=function(e){if(!e||e.vml){var t="hasOwnProperty",n=String,r=parseFloat,i=Math,o=i.round,s=i.max,a=i.min,l=i.abs,c=/[, ]+/,u=e.eve,d=" ",h="",p={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},f=/([clmz]),?([^clmz]*)/gi,g=/ progid:\S+Blur\([^\)]+\)/g,m=/-?[^,\s-]+/g,v="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",y=21600,x={path:1,rect:1,image:1},b={circle:1,ellipse:1},w=function(t,n,r){var i=e.matrix();return i.rotate(-t,.5,.5),{dx:i.x(n,r),dy:i.y(n,r)}},_=function(e,t,n,r,i,o){var s=e._,a=e.matrix,c=s.fillpos,u=e.node,h=u.style,p=1,f="",g=y/t,m=y/n;if(h.visibility="hidden",t&&n){if(u.coordsize=l(g)+d+l(m),h.rotation=o*(t*n<0?-1:1),o){var v=w(o,r,i);r=v.dx,i=v.dy}if(t<0&&(f+="x"),n<0&&(f+=" y")&&(p=-1),h.flip=f,u.coordorigin=r*-g+d+i*-m,c||s.fillsize){var x=u.getElementsByTagName("fill");x=x&&x[0],u.removeChild(x),c&&(v=w(o,a.x(c[0],c[1]),a.y(c[0],c[1])),x.position=v.dx*p+d+v.dy*p),s.fillsize&&(x.size=s.fillsize[0]*l(t)+d+s.fillsize[1]*l(n)),u.appendChild(x)}h.visibility="visible"}};e.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var S,k=function(e,t,r){for(var i=n(t).toLowerCase().split("-"),o=r?"end":"start",s=i.length,a="classic",l="medium",c="medium";s--;)switch(i[s]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":a=i[s];break;case"wide":case"narrow":c=i[s];break;case"long":case"short":l=i[s]}var u=e.node.getElementsByTagName("stroke")[0];u[o+"arrow"]=a,u[o+"arrowlength"]=l,u[o+"arrowwidth"]=c},C=function(i,l){i.attrs=i.attrs||{};var u=i.node,g=i.attrs,v=u.style,w=x[i.type]&&(l.x!=g.x||l.y!=g.y||l.width!=g.width||l.height!=g.height||l.cx!=g.cx||l.cy!=g.cy||l.rx!=g.rx||l.ry!=g.ry||l.r!=g.r),C=b[i.type]&&(g.cx!=l.cx||g.cy!=l.cy||g.r!=l.r||g.rx!=l.rx||g.ry!=l.ry),I=i;for(var P in l)l[t](P)&&(g[P]=l[P]);if(w&&(g.path=e._getPath[i.type](i),i._.dirty=1),l.href&&(u.href=l.href),l.title&&(u.title=l.title),l.target&&(u.target=l.target),l.cursor&&(v.cursor=l.cursor),"blur"in l&&i.blur(l.blur),(l.path&&"path"==i.type||w)&&(u.path=function(t){var r=/[ahqstv]/gi,i=e._pathToAbsolute;if(n(t).match(r)&&(i=e._path2curve),r=/[clmz]/g,i==e._pathToAbsolute&&!n(t).match(r)){var s=n(t).replace(f,function(e,t,n){var r=[],i="m"==t.toLowerCase(),s=p[t];return n.replace(m,function(e){i&&2==r.length&&(s+=r+p["m"==t?"l":"L"],r=[]),r.push(o(e*y))}),s+r});return s}var a,l,c=i(t);s=[];for(var u=0,g=c.length;u<g;u++){a=c[u],"z"==(l=c[u][0].toLowerCase())&&(l="x");for(var v=1,x=a.length;v<x;v++)l+=o(a[v]*y)+(v!=x-1?",":h);s.push(l)}return s.join(d)}(~n(g.path).toLowerCase().indexOf("r")?e._pathToAbsolute(g.path):g.path),i._.dirty=1,"image"==i.type&&(i._.fillpos=[g.x,g.y],i._.fillsize=[g.width,g.height],_(i,1,1,0,0,0))),"transform"in l&&i.transform(l.transform),C){var T=+g.cx,E=+g.cy,j=+g.rx||+g.r||0,R=+g.ry||+g.r||0;u.path=e.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",o((T-j)*y),o((E-R)*y),o((T+j)*y),o((E+R)*y),o(T*y)),i._.dirty=1}if("clip-rect"in l){var A=n(l["clip-rect"]).split(c);if(4==A.length){A[2]=+A[2]+ +A[0],A[3]=+A[3]+ +A[1];var N=u.clipRect||e._g.doc.createElement("div"),L=N.style;L.clip=e.format("rect({1}px {2}px {3}px {0}px)",A),u.clipRect||(L.position="absolute",L.top=0,L.left=0,L.width=i.paper.width+"px",L.height=i.paper.height+"px",u.parentNode.insertBefore(N,u),N.appendChild(u),u.clipRect=N)}l["clip-rect"]||u.clipRect&&(u.clipRect.style.clip="auto")}if(i.textpath){var O=i.textpath.style;l.font&&(O.font=l.font),l["font-family"]&&(O.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,h)+'"'),l["font-size"]&&(O.fontSize=l["font-size"]),l["font-weight"]&&(O.fontWeight=l["font-weight"]),l["font-style"]&&(O.fontStyle=l["font-style"])}if("arrow-start"in l&&k(I,l["arrow-start"]),"arrow-end"in l&&k(I,l["arrow-end"],1),null!=l.opacity||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var D=u.getElementsByTagName("fill");if(!(D=D&&D[0])&&(D=S("fill")),"image"==i.type&&l.src&&(D.src=l.src),l.fill&&(D.on=!0),null!=D.on&&"none"!=l.fill&&null!==l.fill||(D.on=!1),D.on&&l.fill){var F=n(l.fill).match(e._ISURL);if(F){D.parentNode==u&&u.removeChild(D),D.rotate=!0,D.src=F[1],D.type="tile";var z=i.getBBox(1);D.position=z.x+d+z.y,i._.fillpos=[z.x,z.y],e._preload(F[1],function(){i._.fillsize=[this.offsetWidth,this.offsetHeight]})}else D.color=e.getRGB(l.fill).hex,D.src=h,D.type="solid",e.getRGB(l.fill).error&&(I.type in{circle:1,ellipse:1}||"r"!=n(l.fill).charAt())&&M(I,l.fill,D)&&(g.fill="none",g.gradient=l.fill,D.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var B=((+g["fill-opacity"]+1||2)-1)*((+g.opacity+1||2)-1)*((+e.getRGB(l.fill).o+1||2)-1);B=a(s(B,0),1),D.opacity=B,D.src&&(D.color="none")}u.appendChild(D);var $=u.getElementsByTagName("stroke")&&u.getElementsByTagName("stroke")[0],W=!1;!$&&(W=$=S("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&($.on=!0),("none"==l.stroke||null===l.stroke||null==$.on||0==l.stroke||0==l["stroke-width"])&&($.on=!1);var U=e.getRGB(l.stroke);$.on&&l.stroke&&($.color=U.hex),B=((+g["stroke-opacity"]+1||2)-1)*((+g.opacity+1||2)-1)*((+U.o+1||2)-1);var H=.75*(r(l["stroke-width"])||1);if(B=a(s(B,0),1),null==l["stroke-width"]&&(H=g["stroke-width"]),l["stroke-width"]&&($.weight=H),H&&H<1&&(B*=H)&&($.weight=1),$.opacity=B,l["stroke-linejoin"]&&($.joinstyle=l["stroke-linejoin"]||"miter"),$.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&($.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),"stroke-dasharray"in l){var q={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};$.dashstyle=q[t](l["stroke-dasharray"])?q[l["stroke-dasharray"]]:h}W&&u.appendChild($)}if("text"==I.type){I.paper.canvas.style.display=h;var V=I.paper.span,G=g.font&&g.font.match(/\d+(?:\.\d*)?(?=px)/);v=V.style,g.font&&(v.font=g.font),g["font-family"]&&(v.fontFamily=g["font-family"]),g["font-weight"]&&(v.fontWeight=g["font-weight"]),g["font-style"]&&(v.fontStyle=g["font-style"]),G=r(g["font-size"]||G&&G[0])||10,v.fontSize=100*G+"px",I.textpath.string&&(V.innerHTML=n(I.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var Y=V.getBoundingClientRect();I.W=g.w=(Y.right-Y.left)/100,I.H=g.h=(Y.bottom-Y.top)/100,I.X=g.x,I.Y=g.y+I.H/2,("x"in l||"y"in l)&&(I.path.v=e.format("m{0},{1}l{2},{1}",o(g.x*y),o(g.y*y),o(g.x*y)+1));for(var X=["x","y","text","font","font-family","font-weight","font-style","font-size"],K=0,Q=X.length;K<Q;K++)if(X[K]in l){I._.dirty=1;break}switch(g["text-anchor"]){case"start":I.textpath.style["v-text-align"]="left",I.bbx=I.W/2;break;case"end":I.textpath.style["v-text-align"]="right",I.bbx=-I.W/2;break;default:I.textpath.style["v-text-align"]="center",I.bbx=0}I.textpath.style["v-text-kern"]=!0}},M=function(t,o,s){t.attrs=t.attrs||{},t.attrs;var a=Math.pow,l="linear",c=".5 .5";if(t.attrs.gradient=o,o=(o=n(o).replace(e._radial_gradient,function(e,t,n){return l="radial",t&&n&&(t=r(t),n=r(n),a(t-.5,2)+a(n-.5,2)>.25&&(n=i.sqrt(.25-a(t-.5,2))*(2*(n>.5)-1)+.5),c=t+d+n),h})).split(/\s*\-\s*/),"linear"==l){var u=o.shift();if(u=-r(u),isNaN(u))return null}var p=e._parseDots(o);if(!p)return null;if(t=t.shape||t.node,p.length){t.removeChild(s),s.on=!0,s.method="none",s.color=p[0].color,s.color2=p[p.length-1].color;for(var f=[],g=0,m=p.length;g<m;g++)p[g].offset&&f.push(p[g].offset+d+p[g].color);s.colors=f.length?f.join():"0% "+s.color,"radial"==l?(s.type="gradientTitle",s.focus="100%",s.focussize="0 0",s.focusposition=c,s.angle=0):(s.type="gradient",s.angle=(270-u)%360),t.appendChild(s)}return 1},I=function(t,n){this[0]=this.node=t,t.raphael=!0,this.id=e._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=n,this.matrix=e.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},P=e.el;I.prototype=P,P.constructor=I,P.transform=function(t){if(null==t)return this._.transform;var r,i=this.paper._viewBoxShift,o=i?"s"+[i.scale,i.scale]+"-1-1t"+[i.dx,i.dy]:h;i&&(r=t=n(t).replace(/\.{3}|\u2026/g,this._.transform||h)),e._extractTransform(this,o+t);var s,a=this.matrix.clone(),l=this.skew,c=this.node,u=~n(this.attrs.fill).indexOf("-"),p=!n(this.attrs.fill).indexOf("url(");if(a.translate(1,1),p||u||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",s=a.split(),u&&s.noRotation||!s.isSimple){c.style.filter=a.toFilter();var f=this.getBBox(),g=this.getBBox(1),m=f.x-g.x,v=f.y-g.y;c.coordorigin=m*-y+d+v*-y,_(this,1,1,m,v,0)}else c.style.filter=h,_(this,s.scalex,s.scaley,s.dx,s.dy,s.rotate);else c.style.filter=h,l.matrix=n(a),l.offset=a.offset();return null!==r&&(this._.transform=r,e._extractTransform(this,r)),this},P.rotate=function(e,t,i){if(this.removed)return this;if(null!=e){if((e=n(e).split(c)).length-1&&(t=r(e[1]),i=r(e[2])),e=r(e[0]),null==i&&(t=i),null==t||null==i){var o=this.getBBox(1);t=o.x+o.width/2,i=o.y+o.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",e,t,i]])),this}},P.translate=function(e,t){return this.removed||((e=n(e).split(c)).length-1&&(t=r(e[1])),e=r(e[0])||0,t=+t||0,this._.bbox&&(this._.bbox.x+=e,this._.bbox.y+=t),this.transform(this._.transform.concat([["t",e,t]]))),this},P.scale=function(e,t,i,o){if(this.removed)return this;if((e=n(e).split(c)).length-1&&(t=r(e[1]),i=r(e[2]),o=r(e[3]),isNaN(i)&&(i=null),isNaN(o)&&(o=null)),e=r(e[0]),null==t&&(t=e),null==o&&(i=o),null==i||null==o)var s=this.getBBox(1);return i=null==i?s.x+s.width/2:i,o=null==o?s.y+s.height/2:o,this.transform(this._.transform.concat([["s",e,t,i,o]])),this._.dirtyT=1,this},P.hide=function(){return!this.removed&&(this.node.style.display="none"),this},P.show=function(){return!this.removed&&(this.node.style.display=h),this},P.auxGetBBox=e.el.getBBox,P.getBBox=function(){var e=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var t={},n=1/this.paper._viewBoxShift.scale;return t.x=e.x-this.paper._viewBoxShift.dx,t.x*=n,t.y=e.y-this.paper._viewBoxShift.dy,t.y*=n,t.width=e.width*n,t.height=e.height*n,t.x2=t.x+t.width,t.y2=t.y+t.height,t}return e},P._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},P.remove=function(){if(!this.removed&&this.node.parentNode){for(var t in this.paper.__set__&&this.paper.__set__.exclude(this),e.eve.unbind("raphael.*.*."+this.id),e._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[t]="function"==typeof this[t]?e._removedFactory(t):null;this.removed=!0}},P.attr=function(n,r){if(this.removed)return this;if(null==n){var i={};for(var o in this.attrs)this.attrs[t](o)&&(i[o]=this.attrs[o]);return i.gradient&&"none"==i.fill&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(null==r&&e.is(n,"string")){if("fill"==n&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var s=n.split(c),a={},l=0,d=s.length;l<d;l++)(n=s[l])in this.attrs?a[n]=this.attrs[n]:e.is(this.paper.customAttributes[n],"function")?a[n]=this.paper.customAttributes[n].def:a[n]=e._availableAttrs[n];return d-1?a:a[s[0]]}if(this.attrs&&null==r&&e.is(n,"array")){for(a={},l=0,d=n.length;l<d;l++)a[n[l]]=this.attr(n[l]);return a}var h;for(var p in null!=r&&((h={})[n]=r),null==r&&e.is(n,"object")&&(h=n),h)u("raphael.attr."+p+"."+this.id,this,h[p]);if(h){for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&h[t](p)&&e.is(this.paper.customAttributes[p],"function")){var f=this.paper.customAttributes[p].apply(this,[].concat(h[p]));for(var g in this.attrs[p]=h[p],f)f[t](g)&&(h[g]=f[g])}h.text&&"text"==this.type&&(this.textpath.string=h.text),C(this,h)}return this},P.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&e._tofront(this,this.paper),this},P.toBack=function(){return this.removed||this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),e._toback(this,this.paper)),this},P.insertAfter=function(t){return this.removed||(t.constructor==e.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),e._insertafter(this,t,this.paper)),this},P.insertBefore=function(t){return this.removed||(t.constructor==e.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),e._insertbefore(this,t,this.paper)),this},P.blur=function(t){var n=this.node.runtimeStyle,r=n.filter;return r=r.replace(g,h),0!=+t?(this.attrs.blur=t,n.filter=r+d+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+t||1.5)+")",n.margin=e.format("-{0}px 0 0 -{0}px",o(+t||1.5))):(n.filter=r,n.margin=0,delete this.attrs.blur),this},e._engine.path=function(e,t){var n=S("shape");n.style.cssText=v,n.coordsize=y+d+y,n.coordorigin=t.coordorigin;var r=new I(n,t),i={fill:"none",stroke:"#000"};e&&(i.path=e),r.type="path",r.path=[],r.Path=h,C(r,i),t.canvas&&t.canvas.appendChild(n);var o=S("skew");return o.on=!0,n.appendChild(o),r.skew=o,r.transform(h),r},e._engine.rect=function(t,n,r,i,o,s){var a=e._rectPath(n,r,i,o,s),l=t.path(a),c=l.attrs;return l.X=c.x=n,l.Y=c.y=r,l.W=c.width=i,l.H=c.height=o,c.r=s,c.path=a,l.type="rect",l},e._engine.ellipse=function(e,t,n,r,i){var o=e.path();return o.attrs,o.X=t-r,o.Y=n-i,o.W=2*r,o.H=2*i,o.type="ellipse",C(o,{cx:t,cy:n,rx:r,ry:i}),o},e._engine.circle=function(e,t,n,r){var i=e.path();return i.attrs,i.X=t-r,i.Y=n-r,i.W=i.H=2*r,i.type="circle",C(i,{cx:t,cy:n,r:r}),i},e._engine.image=function(t,n,r,i,o,s){var a=e._rectPath(r,i,o,s),l=t.path(a).attr({stroke:"none"}),c=l.attrs,u=l.node,d=u.getElementsByTagName("fill")[0];return c.src=n,l.X=c.x=r,l.Y=c.y=i,l.W=c.width=o,l.H=c.height=s,c.path=a,l.type="image",d.parentNode==u&&u.removeChild(d),d.rotate=!0,d.src=n,d.type="tile",l._.fillpos=[r,i],l._.fillsize=[o,s],u.appendChild(d),_(l,1,1,0,0,0),l},e._engine.text=function(t,r,i,s){var a=S("shape"),l=S("path"),c=S("textpath");r=r||0,i=i||0,s=s||"",l.v=e.format("m{0},{1}l{2},{1}",o(r*y),o(i*y),o(r*y)+1),l.textpathok=!0,c.string=n(s),c.on=!0,a.style.cssText=v,a.coordsize=y+d+y,a.coordorigin="0 0";var u=new I(a,t),p={fill:"#000",stroke:"none",font:e._availableAttrs.font,text:s};u.shape=a,u.path=l,u.textpath=c,u.type="text",u.attrs.text=n(s),u.attrs.x=r,u.attrs.y=i,u.attrs.w=1,u.attrs.h=1,C(u,p),a.appendChild(c),a.appendChild(l),t.canvas.appendChild(a);var f=S("skew");return f.on=!0,a.appendChild(f),u.skew=f,u.transform(h),u},e._engine.setSize=function(t,n){var r=this.canvas.style;return this.width=t,this.height=n,t==+t&&(t+="px"),n==+n&&(n+="px"),r.width=t,r.height=n,r.clip="rect(0 "+t+" "+n+" 0)",this._viewBox&&e._engine.setViewBox.apply(this,this._viewBox),this},e._engine.setViewBox=function(t,n,r,i,o){e.eve("raphael.setViewBox",this,this._viewBox,[t,n,r,i,o]);var s,a,l=this.getSize(),c=l.width,u=l.height;return o&&(r*(s=u/i)<c&&(t-=(c-r*s)/2/s),i*(a=c/r)<u&&(n-=(u-i*a)/2/a)),this._viewBox=[t,n,r,i,!!o],this._viewBoxShift={dx:-t,dy:-n,scale:l},this.forEach(function(e){e.transform("...")}),this},e._engine.initWin=function(e){var t=e.document;t.styleSheets.length<31?t.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):t.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!t.namespaces.rvml&&t.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),S=function(e){return t.createElement("<rvml:"+e+' class="rvml">')}}catch(n){S=function(e){return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},e._engine.initWin(e._g.win),e._engine.create=function(){var t=e._getContainer.apply(0,arguments),n=t.container,r=t.height,i=t.width,o=t.x,s=t.y;if(!n)throw new Error("VML container not found.");var a=new e._Paper,l=a.canvas=e._g.doc.createElement("div"),c=l.style;return o=o||0,s=s||0,i=i||512,r=r||342,a.width=i,a.height=r,i==+i&&(i+="px"),r==+r&&(r+="px"),a.coordsize=216e5+d+216e5,a.coordorigin="0 0",a.span=e._g.doc.createElement("span"),a.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(a.span),c.cssText=e.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",i,r),1==n?(e._g.doc.body.appendChild(l),c.left=o+"px",c.top=s+"px",c.position="absolute"):n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l),a.renderfix=function(){},a},e.prototype.clear=function(){e.eve("raphael.clear",this),this.canvas.innerHTML=h,this.span=e._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},e.prototype.remove=function(){for(var t in e.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?e._removedFactory(t):null;return!0};var T=e.st;for(var E in P)P[t](E)&&!T[t](E)&&(T[E]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e].apply(n,t)})}}(E))}}.apply(t,r))||(e.exports=i)}])),of.exports)),af={BLUE:y.blue,GREEN:y.green,GRAY:"gray",BLACK:"black",LIGHT_BLUE:"#9AB8ED",BLUE_C:"#63D9EA",GRAY_C:"#E3E5E6",GRAY_F:"#888D93",GRAY_G:"#626569",KA_GREEN:"#71B307",_BACKGROUND:"#FDFDFD",INTERACTING:y.green,INTERACTIVE:y.green,DYNAMIC:y.blue};class lf{raphael;xScale;yScale;bounds;constructor(e,t,n){this.raphael=e,this.bounds=n,this.xScale=t[0],this.yScale=t[1],this.setScale(t)}scaleVector=e=>{if("number"==typeof e)return this.scaleVector([e,e]);const t=e[0],n=e[1];return[t*this.xScale,n*this.yScale]};scalePoint=e=>{if("number"==typeof e)return this.scalePoint([e,e]);const t=e[0],n=e[1];return[(t-this.bounds.xMin)*this.xScale,(this.bounds.yMax-n)*this.yScale]};unscalePoint=e=>{if("number"==typeof e)return this.unscalePoint([e,e]);const t=e[0],n=e[1];return[t/this.xScale+this.bounds.xMin,this.bounds.yMax-n/this.yScale]};unscaleVector=e=>"number"==typeof e?this.unscaleVector([e,e]):[e[0]/this.xScale,e[1]/this.yScale];setScale=e=>{"number"==typeof e&&(e=[e,e]),this.xScale=e[0],this.yScale=e[1],this.raphael.setSize(...this.canvasDimensions())};canvasDimensions=()=>[this.bounds.width()*this.xScale,this.bounds.height()*this.yScale];pixelsPerUnitX=()=>this.xScale;pixelsPerUnitY=()=>this.yScale}class cf{xMin;xMax;yMin;yMax;constructor(e,t){this.xMin=e[0],this.xMax=e[1],this.yMin=t[0],this.yMax=t[1]}width(){return this.xMax-this.xMin}height(){return this.yMax-this.yMin}}const uf=new WeakMap;function df(t,n){const r=e.jsx(x,{throwIfNested:!1,children:t});let i=uf.get(n);null==i&&(i=Lt.createRoot(n),uf.set(n,i)),i.render(r)}const hf={processMath:async function(e,t,n,r){const i=p(e);if(null==i.attr("data-math-formula")||n){const e=function(e,t){const n=p(e).find("."+t);return 0===n.length?p("<span>").addClass(t).appendTo(p(e)):n}(i,"tex-holder");null==t&&i.attr("data-math-formula")&&(t=i.attr("data-math-formula")),t=null!=t?t+"":"",t=Np.cleanMath(t),i.attr("data-math-formula",t);const{TeX:n}=await zd();df(wt.createElement(n,{children:t,onRender:r}),e[0])}}},{processMath:pf}=hf;function ff(e,t){return"number"==typeof e&&(e=[e,e]),t=t*Math.PI/180,[e[0]*Math.cos(t),e[1]*Math.sin(t)]}let gf=class{el;#e;#t;raphael;mouselayer;_mouselayerWrapper;_visiblelayerWrapper;isMobile=!1;currentStyle={"stroke-width":2,fill:"none"};range;scale;dimensions;xpixels;ypixels;isDragging;constructor(e){this.el=e,p(e).css("position","relative"),this.raphael=sf(e),p(e).attr("aria-hidden","true"),p(e).children("div").css("position","absolute")}init(e){let t=e.scale||[40,40];if(t="number"==typeof t?[t,t]:t,null==e.range)throw new d("range should be specified in graph init",h.Internal);this.#e=new cf(...e.range),this.#t=new lf(this.raphael,t,this.bounds());const[n,r]=this.drawingTransform().canvasDimensions();return p(this.el).css({width:n,height:r}),this.range=e.range,this.scale=t,this.dimensions=[n,r],this.xpixels=n,this.ypixels=r,this.isMobile=e.isMobile??!1,this}graphInit(e){e=e||{};for(const[M,I]of b(e))M.match(/.*Opacity$/)||"range"===M||"number"!=typeof I||(e[M]=[I,I]),"range"!==M&&"gridRange"!==M||(e[M]=vf(e[M]));const t=vf(e.range||[[-10,10],[-10,10]]),n=vf(e.gridRange||t),r=e.scale||[20,20],i=null==e.grid||e.grid,o=e.gridOpacity||.1,s=function(e){if(Array.isArray(e))return e;return[e,e]}(e.gridStep||[1,1]),a=null==e.axes||e.axes,l=e.axisArrows||"",c=e.axisOpacity||1,u=e.axisCenter||[Math.min(Math.max(t[0][0],0),t[0][1]),Math.min(Math.max(t[1][0],0),t[1][1])],d=null!=e.axisLabels&&e.axisLabels,h=null==e.ticks||e.ticks,p=e.tickStep||[2,2],f=e.tickLen||[5,5],g=e.tickOpacity||1,m=e.labels||e.labelStep||!1,v=e.labelStep||[1,1],y=e.labelOpacity||1;let x=e.unityLabels||!1;const w=e.labelFormat||function(e){return e};let _=e.xLabelFormat||w,S=e.yLabelFormat||w;const k=[[t[0][0]-(t[0][0]>0?1:0),t[0][1]+(t[0][1]<0?1:0)],[t[1][0]-(t[1][0]>0?1:0),t[1][1]+(t[1][1]<0?1:0)]];Array.isArray(x)||(x=[x,x]);const C=function(e){return function(t){return(e(t)+"").replace(/-(\d)/g,"\\llap{-}$1")}};if(_=C(_),S=C(S),this.init({range:k,scale:r,isMobile:e.isMobile}),i&&this.grid(n[0],n[1],{stroke:e.isMobile?af.GRAY_C:"#000000",opacity:e.isMobile?1:o,step:s,strokeWidth:e.isMobile?1:2}),a){if("<->"===l||!0===l){const r=this;this.style({stroke:e.isMobile?af.GRAY_G:"#000000",opacity:e.isMobile?1:c,strokeWidth:e.isMobile?1:2,arrows:"->"},function(){t[1][0]<0&&t[1][1]>0&&(r.path([u,[n[0][0],u[1]]]),r.path([u,[n[0][1],u[1]]])),t[0][0]<0&&t[0][1]>0&&(r.path([u,[u[0],n[1][0]]]),r.path([u,[u[0],n[1][1]]]))})}else if("->"===l||""===l){const e=this;this.style({stroke:"#000000",opacity:c,strokeWidth:2,arrows:l},function(){e.path([[n[0][0],u[1]],[n[0][1],u[1]]]),e.path([[u[0],n[1][0]],[u[0],n[1][1]]])})}d&&2===d.length&&(this.label([n[0][1],u[1]],d[0],"right"),this.label([u[0],n[1][1]],d[1],"above"))}if(h){const i=e.isMobile,o=this;this.style({stroke:e.isMobile?af.GRAY_G:"#000000",opacity:e.isMobile?1:g,strokeWidth:1},()=>{let e=s[0]*p[0],a=f[0]/r[1],c=n[0][0],d=n[0][1];if(t[1][0]<0&&t[1][1]>0){for(let t=e+u[0];t<=d;t+=e)(t<d||!l)&&o.line([t,-a+u[1]],[t,i?0:a+u[1]]);for(let t=-e+u[0];t>=c;t-=e)(t>c||!l)&&o.line([t,-a+u[1]],[t,i?0:a+u[1]])}if(e=s[1]*p[1],a=f[1]/r[0],c=n[1][0],d=n[1][1],t[0][0]<0&&t[0][1]>0){for(let t=e+u[1];t<=d;t+=e)(t<d||!l)&&this.line([-a+u[0],t],[i?0:a+u[0],t]);for(let t=-e+u[1];t>=c;t-=e)(t>c||!l)&&this.line([-a+u[0],t],[i?0:a+u[0],t])}})}if(m){const t=this;this.style({stroke:e.isMobile?af.GRAY_G:"#000000",opacity:e.isMobile?1:y},function(){let e=s[0]*p[0]*v[0],r=n[0][0],i=n[0][1];const o=u[0]<0?"above":"below",a=u[0]<0?"right":"left",c=0===u[0]&&0!==u[1],d=0!==u[0]&&0===u[1],h=0!==u[0]||0!==u[1],f=x[0]||h,g=x[1]||h;for(let n=(c?0:e)+u[0];n<=i;n+=e)(n<i||!l)&&t.label([n,u[1]],_(n),o);for(let n=-e*(f?1:2)+u[0];n>=r;n-=e)(n>r||!l)&&t.label([n,u[1]],_(n),o);e=s[1]*p[1]*v[1],r=n[1][0],i=n[1][1];for(let n=(d?0:e)+u[1];n<=i;n+=e)(n<i||!l)&&t.label([u[0],n],S(n),a);for(let n=-e*(g?1:2)+u[1];n>=r;n-=e)(n>r||!l)&&t.label([u[0],n],S(n),a)})}}drawingTransform(){if(null==this.#t)throw new Error("Can't get drawingTransform of an uninitialized Graphie");return this.#t}bounds(){if(null==this.#e)throw new Error("Can't get bounds of an uninitialized Graphie");return this.#e}style(e,t){const n=this.processAttributes(e);if("function"==typeof t){const e=this.currentStyle;this.currentStyle={...this.currentStyle,...n};const r=t.call(this);return this.currentStyle=e,r}Object.assign(this.currentStyle,n)}grid(e,t,n){return this.withStyle(n,()=>{const n=this.currentStyle.step||[1,1],r=this.raphael.set();let i=n[0]*Math.ceil(e[0]/n[0]);for(;i<=e[1];i+=n[0])r.push(this.line([i,t[0]],[i,t[1]]));let o=n[1]*Math.ceil(t[0]/n[1]);for(;o<=t[1];o+=n[1])r.push(this.line([e[0],o],[e[1],o]));return r})}arc(e,t,n,r,i,o){return this.withStyle(o,()=>{n=(n%360+360)%360,r=(r%360+360)%360;const o=this.scalePoint(e),s=this.scaleVector(t),a=ff(t,n),l=ff(t,r),c=e=>Uh.round(e,6),u=this.scalePoint([c(e[0]+a[0]),c(e[1]+a[1])]),d=this.scalePoint([c(e[0]+l[0]),c(e[1]+l[1])]),h=((r-n)%360+360)%360>180;return this.raphael.path("M"+u.join(" ")+"A"+s.join(" ")+" 0 "+(h?1:0)+" 0 "+d.join(" ")+(i?"L"+o.join(" ")+"z":""))})}circle(e,t,n){return this.withStyle(n,()=>this.raphael.ellipse(...this.scalePoint(e),...this.scaleVector([t,t])))}rect(e,t,n,r,i){return this.withStyle(i,()=>{const i=this.scalePoint([e,t+r]),o=this.scaleVector([n,r]),s=this.raphael.rect(...i.concat(o));return this.isMobile&&(s.node.style.shapeRendering="crispEdges"),s})}ellipse(e,t,n){return this.withStyle(n,()=>this.raphael.ellipse(...this.scalePoint(e).concat(this.scaleVector(t))))}fixedEllipse(e,t,n,r,i){return this.withStyle(i,()=>{const i=this.scalePoint(e),o=this.scaleVector(t),s=2*o[0]*n+r,a=2*o[1]*n+r,l=i[0]-s/2,c=i[1]-a/2,u=document.createElement("div");p(u).css({position:"absolute",width:s+"px",height:a+"px",left:l+"px",top:c+"px"});return{wrapper:u,visibleShape:sf(u,s,a).ellipse(s/2,a/2,o[0],o[1])}})}unstyledPath(e){const t=this.raphael.path(this.svgPath(e));return t.graphiePath=e,t}path(e,t){return this.withStyle(t,()=>this.unstyledPath(e))}fixedPath(e,t,n){e=e.map(this.scalePoint),t=t?this.scalePoint(t):null,n=n||this.svgPath;const r=e.map(e=>e[0]),i=e.map(e=>e[1]),o=Math.min(...r),s=Math.max(...r),a=Math.min(...i),l=Math.max(...i),c=[4,4],u=[o,a];e=e.map(function(e){return mp.add(mp.subtract(e,u),mp.scale(c,.5))});const d=s-o+c[0],h=l-a+c[1],f=u[0]-c[0]/2,g=u[1]-c[1]/2,m=document.createElement("div");p(m).css({position:"absolute",width:d+"px",height:h+"px",left:f+"px",top:g+"px",transformOrigin:t?d/2+t[0]+"px "+(h/2+t[1])+"px":null});return{wrapper:m,visibleShape:sf(m,d,h).path(n(e))}}scaledPath(e,t){return this.withStyle(t,()=>{const t=this.raphael.path(this.svgPath(e,!0));return t.graphiePath=e,t})}line(e,t,n){return this.withStyle(n,()=>{const n=this.unstyledPath([e,t]);return this.isMobile&&(n.node.style.shapeRendering="crispEdges"),n})}parabola(e,t,n,r){return this.withStyle(r,()=>this.raphael.path(this.svgParabolaPath(e,t,n)))}fixedLine(e,t,n){const r=[n,n];e=this.scalePoint(e),t=this.scalePoint(t);const i=[Math.min(e[0],t[0]),Math.min(e[1],t[1])];e=mp.add(mp.subtract(e,i),mp.scale(r,.5)),t=mp.add(mp.subtract(t,i),mp.scale(r,.5));const o=i[0]-r[0]/2,s=i[1]-r[1]/2,a=Math.abs(e[0]-t[0])+r[0],l=Math.abs(e[1]-t[1])+r[1],c=document.createElement("div");p(c).css({position:"absolute",width:a+"px",height:l+"px",left:o+"px",top:s+"px",transformOrigin:e[0]+"px "+e[1]+"px"});const u=sf(c,a,l),d="M"+e[0]+" "+e[1]+" L"+t[0]+" "+t[1],h=u.path(d);return h.graphiePath=[e,t],{wrapper:c,visibleShape:h}}sinusoid(e,t,n,r,i){return this.withStyle(i,()=>this.raphael.path(this.svgSinusoidPath(e,t,n,r)))}label=(e,t,n,r,i)=>{const o="object"==typeof r?r:i,s="boolean"!=typeof r||r;return this.withStyle(o,()=>{const r=p("<span>").addClass("graphie-label"),i=this.currentStyle["label-distance"];r.css({position:"absolute",padding:(null!=i?i:7)+"px",color:"black"}).data("labelDirection",n).appendTo(this.el),r.setPosition=e=>{const t=this.scalePoint(e);r.css({left:t[0],top:t[1]})},r.setPosition(e);const o=r[0];return r.processMath=function(e,t){pf(o,e,t,function(){const e=o.scrollWidth,t=o.scrollHeight;xf(o,[e,t])})},r.processText=function(e){r.html(e);const t=o.scrollWidth,n=o.scrollHeight;xf(o,[t,n])},s?r.processMath(t,!1):r.processText(t),r})};plotParametric(e,t,n){return this.withStyle(n,()=>{const n=t=>{return n=e(t),Math.abs(n[1])>5e5?[n[0],Math.min(Math.max(n[1],-5e5),5e5)]:n;var n},r=t[0],i=t[1];let o=(i-r)/(this.currentStyle["plot-points"]||800);0===o&&(o=1);const s=this.raphael.set();let a=[],l=n(r)[1];for(let e=r;e<=i;e+=o){const t=n(e),r=t[1];r>0!=l>0&&Math.abs(r-l)>2*this.drawingTransform().pixelsPerUnitY()||isNaN(r)?(s.push(this.unstyledPath(a)),a=[]):a.push(t),l=r}return s.push(this.unstyledPath(a)),s})}plot(e,t,n){return this.withStyle(n,()=>{const n=t[0],r=t[1];this.currentStyle["plot-points"]||(this.currentStyle["plot-points"]=2*(r-n)*this.drawingTransform().pixelsPerUnitX());return this.plotParametric(t=>[t,e(t)],t)})}svgPath=(e,t)=>e.map((e,n)=>{if(!0===e)return"z";const r=t?e:this.scalePoint(e);return(0===n?"M":"L")+Np.bound(r[0])+" "+Np.bound(r[1])}).join("");svgParabolaPath=(e,t,n)=>{const r=function(r){return(e*r+t)*r+n};if(0===e){const e=[[this.bounds().xMin,r(this.bounds().xMin)],[this.bounds().xMax,r(this.bounds().xMax)]];return this.svgPath(e)}const i=-t/(2*e),o=i+Math.max(Math.abs(i-this.bounds().xMin),Math.abs(i-this.bounds().xMax)),s=[i,r(i)],a=[o,r(o)],l=[s[0],s[1]-(a[1]-s[1])],c=Math.abs(s[0]-a[0]),u=[[s[0]-c,a[1]],l,[s[0]+c,a[1]]].map(this.scalePoint).flat().map(Np.bound);return"M"+u[0]+","+u[1]+" Q"+u[2]+","+u[3]+" "+u[4]+","+u[5]};svgSinusoidPath=(e,t,n,r)=>{const i=Math.abs(Math.PI/(2*t)),o=function(i){return e*Math.sin(t*i-n)+r},s=function(r){return e*t*Math.cos(n-t*r)},a=(e,t)=>{const n=e+i*t,r=n+i,a=[n,2*n/3+1*r/3,1*n/3+2*r/3,r],l=[o(n),o(n)+s(n)*(r-n)/3,o(r)-s(r)*(r-n)/3,o(r)];return mp.zip(a,l).map(this.scalePoint)},l=this.bounds().width(),c=Math.ceil(l/i)+1;let u=n/t;const d=u-this.bounds().xMin;u-=i*Math.ceil(d/i);let h=a(u,0),p="M"+h[0][0]+","+h[0][1]+" C"+h[1][0]+","+h[1][1]+" "+h[2][0]+","+h[2][1]+" "+h[3][0]+","+h[3][1];for(let f=1;f<c;f++)h=a(u,f),p+=" C"+h[1][0]+","+h[1][1]+" "+h[2][0]+","+h[2][1]+" "+h[3][0]+","+h[3][1];return p};withStyle(e,t){const n=this.currentStyle;this.currentStyle={...this.currentStyle,...this.processAttributes(e)};const r=this.postprocessDrawingResult(t());return this.currentStyle=n,r}postprocessDrawingResult(e){const t=e.constructor.prototype;return t===sf.el||t===sf.st?(e.attr(this.currentStyle),this.currentStyle.arrows&&(e=this.addArrowheads(e))):e instanceof p&&e.css({...this.currentStyle,...yf}),e}addArrowheads(e){const t=e.constructor.prototype;if(t===sf.el){if("path"===e.type&&void 0===e.arrowheadsDrawn){const t=.6+.4*e.attr("stroke-width"),n=e.getTotalLength(),r=this.raphael.set(),i=this.raphael.path(this.isMobile?"M-4,4 C-4,4 -0.25,0 -0.25,0 C-0.25,0 -4,-4 -4,-4":"M-3 4 C-2.75 2.5 0 0.25 0.75 0C0 -0.25 -2.75 -2.5 -3 -4"),o=e.getPointAtLength(n-.4),s=e.getPointAtLength(n-.75*t),a=180*Math.atan2(o.y-s.y,o.x-s.x)/Math.PI,l=e.attr();delete l.path;let c=e.getSubpath(0,n-.75*t);return c=this.raphael.path(c).attr(l),c.arrowheadsDrawn=!0,e.remove(),i.rotate(a,this.isMobile?1e-5:.75,0).scale(t,t,.75,0).translate(s.x,s.y).attr(l).attr({"stroke-linejoin":"round","stroke-linecap":"round"}),i.arrowheadsDrawn=!0,r.push(c),r.push(i),r}}else if(t===sf.st)for(let n=0,r=e.items.length;n<r;n++)this.addArrowheads(e.items[n]);return e}scalePoint=e=>this.drawingTransform().scalePoint(e);scaleVector=e=>this.drawingTransform().scaleVector(e);unscalePoint=e=>this.drawingTransform().unscalePoint(e);unscaleVector=e=>this.drawingTransform().unscaleVector(e);processAttributes(e){const t={scale:e=>{this.drawingTransform().setScale(e)},clipRect:e=>{const t=e[0],n=e[1];return t[1]+=n[1],{"clip-rect":this.scalePoint(t).concat(this.scaleVector(n)).join(" ")}},strokeWidth:function(e){return{"stroke-width":parseFloat(e)}},rx:e=>({rx:this.scaleVector([e,0])[0]}),ry:e=>({ry:this.scaleVector([0,e])[1]}),r:e=>{const t=this.scaleVector([e,e]);return{rx:t[0],ry:t[1]}}},n={};return Object.entries(e||{}).forEach(function([e,r]){const i=t[e];if("function"==typeof i)Object.assign(n,i(r));else{const t=String(e).replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase();n[t]=r}}),n}addMouseLayer(e){const t={allowScratchpad:!1,setDrawingAreaAvailable:function(){},...e};if(this.mouselayer=sf(this.el,this.xpixels,this.ypixels),p(this.mouselayer.canvas).css("z-index",2),t.onClick||t.onMouseDown||t.onMouseMove||t.onMouseOver||t.onMouseOut){const e=this.mouselayer.rect(0,0,this.xpixels,this.ypixels).attr({fill:"#000",opacity:0});let n=!1;if(p(this.mouselayer.canvas).on("vmousedown",r=>{if(r.target===e[0]){if(t.onMouseDown&&t.onMouseDown(this.getMouseCoord(r)),n=!0,t.onMouseMove){const e=t.onMouseMove;p(document).bind("vmousemove.mouseLayer",t=>{n&&(t.preventDefault(),e(this.getMouseCoord(t)))})}p(document).bind("vmouseup.mouseLayer",e=>{p(document).unbind(".mouseLayer"),n&&t.onClick&&t.onClick(this.getMouseCoord(e)),n=!1})}}),t.onMouseOver){const e=t.onMouseOver;p(this.mouselayer.canvas).on("vmouseover",t=>{e(this.getMouseCoord(t))})}if(t.onMouseOut){const e=t.onMouseOut;p(this.mouselayer.canvas).on("vmouseout",t=>{e(this.getMouseCoord(t))})}}t.allowScratchpad||t.setDrawingAreaAvailable?.(!1),this._mouselayerWrapper=document.createElement("div"),p(this._mouselayerWrapper).css({position:"absolute",left:0,top:0,zIndex:2}),this._visiblelayerWrapper=document.createElement("div"),p(this._visiblelayerWrapper).css({position:"absolute",left:0,top:0});const n=this.el;n.appendChild(this._visiblelayerWrapper),n.appendChild(this._mouselayerWrapper),this.addToMouseLayerWrapper=e=>{this._mouselayerWrapper?.appendChild(e)},this.addToVisibleLayerWrapper=e=>{this._visiblelayerWrapper?.appendChild(e)}}addToMouseLayerWrapper(e){throw new Error("addToMouseLayerWrapper is not ready. Call addMouseLayer() first.")}addToVisibleLayerWrapper(e){throw new Error("addToVisibleLayerWrapper is not ready. Call addMouseLayer() first.")}getMousePx(e){const t=p(this.el).offset();return[e.pageX-t.left,e.pageY-t.top]}getMouseCoord(e){return this.unscalePoint(this.getMousePx(e))}};const mf={center:[-.5,-.5],above:[-.5,-1],"above right":[0,-1],right:[0,-.5],"below right":[0,0],below:[-.5,0],"below left":[-1,0],left:[-1,-.5],"above left":[-1,-1]};function vf(e){function t(e){return"number"==typeof e?[-e,e]:e}if(null==e)return e;const[n,r]=(i=e,Array.isArray(i)?i:[i,i]);var i;return[t(n),t(r)]}const yf={"stroke-width":null},xf=function(e,t){const n=p(e),r=n.data("labelDirection");let[i,o]=t;if(0===i&&0===o&&([i,o]=[1,1],eh("Label size was 0x0 in graphie.js; using 1x1 instead")),n.css("visibility",""),"number"==typeof r){const e=Math.cos(r),t=Math.sin(r),s=Math.min(i/2/Math.abs(e),o/2/Math.abs(t));n.css({marginLeft:-i/2+e*s,marginTop:-o/2-t*s})}else{const t=e.scrollHeight===o,s=n.closest(".svg-image"),a=n.closest(".graphie"),l=s.length>0?s:a;l.css("line-height","normal"),t&&e.scrollHeight!==o&&(o=e.scrollHeight);const c=l.css(["max-width","width"])??{"max-width":"0px"},u="none"!==c["max-width"]?c["max-width"]:c.width;let d=(l.width()??0)/parseInt(u.replace(/px$/,""))*100;(isNaN(d)||0===d)&&(d=100);const h=n.css("padding")??"0px",p="none"!==h?h:"0px",f=Math.round(parseInt(p.replace(/px$/,""))*d)/100,g=mf[r||"center"],m={marginLeft:Math.round(i*g[0]*d)/100,marginTop:Math.round(o*g[1]*d)/100,padding:`${f}px`};1!==d&&(m.fontSize=Math.round(100*d)/100+"%"),n.css(m)}},bf={Graphie:gf,createGraphie:function(e){return new gf(e)},unscaledSvgPath:function(e){return!0===e[0]?"":e.map(function(e,t){return!0===e?"z":(0===t?"M":"L")+e[0]+" "+e[1]}).join("")},getDistance:function(e,t){return Rp.distanceToPoint(e,t)},findAngleDeprecated:function(e,t,n){if(void 0===n){const n=e[0]-t[0],r=e[1]-t[1];return n||r?(180+180*Math.atan2(-r,-n)/Math.PI+360)%360:0}return bf.findAngleDeprecated(e,n)-bf.findAngleDeprecated(t,n)},graphs:{}};!function(e,t,n){if(void 0!==e){var r="virtualMouseBindings",i="virtualTouchID",o="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),s="clientX clientY pageX pageY screenX screenY".split(" "),a=e.event.mouseHooks?e.event.mouseHooks.props:[],l=(e.event.props||[]).concat(a),c={},u=0,d=0,h=0,p=!1,f=[],g=!1,m=!1,v="addEventListener"in n,y=e(n),x=1,b=0;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var w=0;w<o.length;w++)e.event.special[o[w]]=O(o[w]);v&&n.addEventListener("click",function(t){var n,r,o,s,a,l=f.length,c=t.target;if(l)for(n=t.clientX,r=t.clientY,threshold=e.vmouse.clickDistanceThreshold,o=c;o;){for(s=0;s<l;s++)if(a=f[s],o===c&&Math.abs(a.x-n)<threshold&&Math.abs(a.y-r)<threshold||e.data(o,i)===a.touchID)return t.preventDefault(),void t.stopPropagation();o=o.parentNode}},!0)}function _(e){for(;e&&void 0!==e.originalEvent;)e=e.originalEvent;return e}function S(t){for(var n,i,o={};t;){for(i in n=e.data(t,r))n[i]&&(o[i]=o.hasVirtualBinding=!0);t=t.parentNode}return o}function k(){m=!0}function C(){m=!1}function M(){I(),u=setTimeout(function(){u=0,b=0,f.length=0,g=!1,k()},e.vmouse.resetTimerDuration)}function I(){u&&(clearTimeout(u),u=0)}function P(t,n,i){var o;return(i&&i[t]||!i&&function(t,n){for(var i;t;){if((i=e.data(t,r))&&(!n||i[n]))return t;t=t.parentNode}return null}(n.target,t))&&(o=function(t,n){var r,i,o,a,c,u,d,h,p,f=t.type;if((t=e.Event(t)).type=n,r=t.originalEvent,i=e.event.props,f.search(/mouse/)>-1&&(i=l),r)for(d=i.length;d;)t[a=i[--d]]=r[a];if(f.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1),-1!==f.search(/^touch/)&&(f=(o=_(r)).touches,c=o.changedTouches,u=f&&f.length?f[0]:c&&c.length?c[0]:void 0))for(h=0,p=s.length;h<p;h++)t[a=s[h]]=u[a];return t}(n,t),e(n.target).trigger(o)),o}function T(t){var n=e.data(t.target,i);if(!(g||b&&b===n)){var r=P("v"+t.type,t);r&&(r.isDefaultPrevented()&&t.preventDefault(),r.isPropagationStopped()&&t.stopPropagation(),r.isImmediatePropagationStopped()&&t.stopImmediatePropagation())}}function E(t){var n,r,o=_(t).touches;if(o&&1===o.length&&(r=S(n=t.target)).hasVirtualBinding){b=x++,e.data(n,i,b),I(),C(),p=!1;var s=_(t).touches[0];d=s.pageX,h=s.pageY,P("vmouseover",t,r),P("vmousedown",t,r)}}function j(e){m||(p||P("vmousecancel",e,S(e.target)),p=!0,M())}function R(t){if(!m){var n=_(t).touches[0],r=o,i=e.vmouse.moveDistanceThreshold,o=o||Math.abs(n.pageX-d)>i||Math.abs(n.pageY-h)>i,s=S(t.target);o&&!r&&P("vmousecancel",t,s),P("vmousemove",t,s),M()}}function A(e){if(!m){k();var t,n=S(e.target);if(P("vmouseup",e,n),!p){var r=P("vclick",e,n);r&&r.isDefaultPrevented()&&(t=_(e).changedTouches[0],f.push({touchID:b,x:t.clientX,y:t.clientY}),g=!0)}P("vmouseout",e,n),p=!1,M()}}function N(t){var n,i=e.data(t,r);if(i)for(n in i)if(i[n])return!0;return!1}function L(){}function O(t){var n=t.substr(1);return{setup:function(i,o){N(this)||e.data(this,r,{}),e.data(this,r)[t]=!0,c[t]=(c[t]||0)+1,1===c[t]&&y.bind(n,T),e(this).bind(n,L),v&&(c.touchstart=(c.touchstart||0)+1,1===c.touchstart&&y.bind("touchstart",E).bind("touchend",A).bind("touchmove",R).bind("scroll",j))},teardown:function(i,o){--c[t],c[t]||y.unbind(n,T),v&&(--c.touchstart,c.touchstart||y.unbind("touchstart",E).unbind("touchmove",R).unbind("touchend",A).unbind("scroll",j));var s=e(this),a=e.data(this,r);a&&(a[t]=!1),s.unbind(n,L),N(this)||s.removeData(r)}}}}(p,window,document);const wf=function(e,t,n){const r=e.range[0][1]-e.range[0][0]+(e.range[1][1]-e.range[1][0]),i=e.unscaleVector(mp.cartFromPolarDeg(1,n)),o=mp.scale(mp.normalize(i),r),s=mp.add(t,o),a=mp.polarDegFromCart(i)[1];return e.constrainToBoundsOnAngle(s,4,a*Math.PI/180)};class _f{graphie;initialPoint;constructor(e,t){this.graphie=e,this.initialPoint=t}transform(e){const t=nf.getPrefixedTransform();this.wrapper.style[t]=e}toFront(){const e=this.wrapper.parentNode;e&&e.appendChild(this.wrapper)}toBack(){const e=this.wrapper.parentNode;null!=e&&e.firstChild!==this.wrapper&&e.insertBefore(this.wrapper,e.firstChild)}remove(){this.visibleShape.remove(),p(this.wrapper).remove()}getMouseTarget(){return this.visibleShape[0]}moveTo(e){const t=mp.subtract(this.graphie.scalePoint(e),this.graphie.scalePoint(this.initialPoint)),n=nf.getCanUse3dTransform(),r="translateX("+t[0]+"px) translateY("+t[1]+"px)"+(n?" translateZ(0)":"");this.transform(r)}hide(){this.visibleShape.hide()}show(){this.visibleShape.show()}attr(...e){this.visibleShape.attr(...e)}animate(...e){this.visibleShape.animate(...e)}}const Sf={center:null,createPath:null,mouselayer:!1};class kf extends _f{wrapper;visibleShape;constructor(e,t,n){const i=e.scalePoint(r.head(t));super(e,i),n=r.extend({},Sf,n);const o=e.fixedPath(t,n.center,n.createPath);this.wrapper=o.wrapper,this.visibleShape=o.visibleShape,n.mouselayer?(this.wrapper.style.touchAction="none",this.graphie.addToMouseLayerWrapper(this.wrapper)):this.graphie.addToVisibleLayerWrapper(this.wrapper)}}let Cf=class e extends kf{static scale=1.4;center;constructor(t,n){const i=[.75,0];super(t,[[-3,4],[-2.75,2.5],[0,.25],i,[0,-.25],[-2.75,-2.5],[-3,-4]].map(t=>{const n=mp.subtract(t,i),r=mp.scale(n,e.scale);return mp.add(i,r)}).map(t.unscalePoint),{center:t.unscalePoint(i),createPath:Mf}),this.center=i,this.attr(r.extend({"stroke-linejoin":"round","stroke-linecap":"round","stroke-dasharray":""},n))}toCoordAtAngle(t,n){const r=this.graphie.scalePoint(wf(this.graphie,t,n));this.transform("translateX("+(r[0]+e.scale*this.center[0])+"px) translateY("+(r[1]+e.scale*this.center[1])+"px) translateZ(0) rotate("+(360-Np.bound(n))+"deg)")}};const Mf=function(e){let t="M"+e[0][0]+" "+e[0][1];for(let n=1;n<e.length;n+=3)t+="C"+e[n][0]+" "+e[n][1]+" "+e[n+1][0]+" "+e[n+1][1]+" "+e[n+2][0]+" "+e[n+2][1];return t},If={maxScale:1,mouselayer:!1,shadow:!1,disableMouseEventsOnWrapper:!1};class Pf extends _f{initialPoint;wrapper;visibleShape;constructor(e,t,n,i){super(e,t),i=r.extend({},If,i);const o=e.fixedEllipse(t,n,i.maxScale,i.padding);if(this.visibleShape=o.visibleShape,this.wrapper=o.wrapper,this.graphie=e,this.initialPoint=t,i.interactiveKindForTesting&&this.wrapper.setAttribute("data-interactive-kind-for-testing",i.interactiveKindForTesting),i.mouselayer?(this.wrapper.style.touchAction="none",this.graphie.addToMouseLayerWrapper(this.wrapper)):this.graphie.addToVisibleLayerWrapper(this.wrapper),i.shadow){const e="drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.5))";this.wrapper.style.filter=e,this.moveTo=function(e){const t=mp.subtract(this.graphie.scalePoint(e),this.graphie.scalePoint(this.initialPoint)),n=nf.getCanUse3dTransform(),r="translateX("+Math.round(t[0])+"px) translateY("+Math.round(t[1])+"px)"+(n?" translateZ(0)":"");this.transform(r)}}i.disableMouseEventsOnWrapper&&(this.wrapper.style.pointerEvents="none",this.visibleShape.node.style.pointerEvents="auto")}}const Tf={thickness:2,mouselayer:!1};class Ef extends _f{initialLength;wrapper;visibleShape;constructor(e,t,n,i){const o=[e.range[0][0],0],s=[e.range[0][1],0],a=e.scalePoint(o);super(e,a),i=r.extend({},Tf,i);const l=e.fixedLine(o,s,i.thickness);this.wrapper=l.wrapper,this.visibleShape=l.visibleShape,i.interactiveKindForTesting&&this.wrapper.setAttribute("data-interactive-kind-for-testing",i.interactiveKindForTesting),this.visibleShape.attr(i.normalStyle),this.initialPoint=a,this.initialLength=Rp.distanceToPoint(e.scalePoint(o),e.scalePoint(s)),i.mouselayer?(this.wrapper.style.touchAction="none",this.graphie.addToMouseLayerWrapper(this.wrapper)):this.graphie.addToVisibleLayerWrapper(this.wrapper),this.moveTo(t,n)}getMouseTarget(){return this.wrapper}moveTo(e,t){const n=this.graphie.scalePoint(e),r=this.graphie.scalePoint(t),i=mp.polarDegFromCart(mp.subtract(r,n)),o=i[0],s=Np.bound(i[1]),a=mp.subtract(n,this.initialPoint),l=Np.bound(o/this.initialLength),c=nf.getCanUse3dTransform(),u="translateX("+a[0]+"px) translateY("+a[1]+"px) "+(c?" translateZ(0)":"")+"rotate("+s+"deg) scaleX("+l+") scaleY(1)";this.transform(u)}}const{clockwise:jf,reverseVector:Rf}=Gp;function Af(e){const t=11.374597405497571;return 58.919514629750836*Math.exp(-.037587715462826674*e)+t}function Nf(e,t){return[e*Math.cos(t),e*Math.sin(t)*-1]}function Lf(e,t){return Nf(e,t*Math.PI/180)}let Of=!1;const Df={animate:function(){},attr:function(){},remove:function(){}};function Ff(e,t){this.set=e.raphael.set(),this.cx=t[0],this.cy=t[1];const n=this,r=e.unscaleVector(180.5)[0],i=e.scalePoint([this.cx-r,this.cy+r-e.unscaleVector(10.5)[1]]),o=e.mouselayer.image("https://ka-perseus-graphie.s3.amazonaws.com/e9d032f2ab8b95979f674fbfa67056442ba1ff6a.png",i[0],i[1],360,180);this.set.push(o),o.node.addEventListener("touchstart",function(e){e.preventDefault()},{passive:!1});const s=function(n,i){const o=e.scaleVector(r);o[0]-=16,o[1]-=16;const s=e.scalePoint(t);return Math.sin((n+90)*Math.PI/180)*(o[0]+i)+s[0]+","+(Math.cos((n+90)*Math.PI/180)*(o[1]+i)+s[1])},a=e.raphael.path(" M"+s(180,6)+" L"+s(180,2)+" L"+s(183,10)+" L"+s(180,18)+" L"+s(180,14)+" A"+(e.scaleVector(r)[0]+10)+","+(e.scaleVector(r)[1]+10)+",0,0,1,"+s(170,14)+" L"+s(170,18)+" L"+s(167,10)+" L"+s(170,2)+" L"+s(170,6)+" A"+(e.scaleVector(r)[0]+10)+","+(e.scaleVector(r)[1]+10)+",0,0,0,"+s(180,6)+" Z").attr({stroke:null,fill:af.INTERACTIVE});this.set.push(a),this.centerPoint=e.addMovablePoint({coord:t,visible:!1}),this.rotateHandle=e.addMovablePoint({bounded:!1,coord:[Math.sin(275*Math.PI/180)*r+this.cx,Math.cos(275*Math.PI/180)*r+this.cy],onMove:function(e,t){const r=180*Math.atan2(n.centerPoint.coord[1]-t,n.centerPoint.coord[0]-e)/Math.PI;n.rotate(-r-5,!0)}}),this.rotateHandle.constraints.fixedDistance.dist=r,this.rotateHandle.constraints.fixedDistance.point=this.centerPoint,this.rotateHandle.visibleShape.remove(),this.rotateHandle.mouseTarget.attr({scale:2});let l=!1,c=!1;const u=function(){return c||l},d=p(this.rotateHandle.mouseTarget.getMouseTarget());d.bind("vmousedown",function(e){l=!0,d.css("cursor","-webkit-grabbing"),d.css("cursor","grabbing"),a.animate({scale:1.5,fill:af.INTERACTING},50),p(document).bind("vmouseup.rotateHandle",function(e){l=!1,d.css("cursor","-webkit-grab"),d.css("cursor","grab"),u()||a.animate({scale:1,fill:af.INTERACTIVE},50),p(document).unbind("vmouseup.rotateHandle")})}),d.bind("vmouseover",function(e){c=!0,a.animate({scale:1.5,fill:af.INTERACTING},50)}),d.bind("vmouseout",function(e){c=!1,u()||a.animate({scale:1,fill:af.INTERACTIVE},50)});const h=p.map(this.set,function(e){return e.node});return this.makeTranslatable=function(){p(h).css("cursor","move"),d.css("cursor","-webkit-grab"),d.css("cursor","grab"),p(h).bind("vmousedown",function(t){t.preventDefault();let r=t.pageX-p(e.raphael.canvas.parentNode).offset().left,i=t.pageY-p(e.raphael.canvas.parentNode).offset().top;p(document).bind("vmousemove.protractor",function(t){let o=t.pageX-p(e.raphael.canvas.parentNode).offset().left,s=t.pageY-p(e.raphael.canvas.parentNode).offset().top;o=Math.max(10,Math.min(e.xpixels-10,o)),s=Math.max(10,Math.min(e.ypixels-10,s));const a=o-r,l=s-i;p.each(n.set.items,function(){this.translate(a,l)}),n.centerPoint.setCoord([n.centerPoint.coord[0]+a/e.scale[0],n.centerPoint.coord[1]-l/e.scale[1]]),n.rotateHandle.setCoord([n.rotateHandle.coord[0]+a/e.scale[0],n.rotateHandle.coord[1]-l/e.scale[1]]),r=o,i=s}),p(document).one("vmouseup",function(e){p(document).unbind("vmousemove.protractor")})})},this.rotation=0,this.rotate=function(t,n){const r=e.scalePoint(this.centerPoint.coord);return n&&(this.rotation=0),this.set.rotate(this.rotation+t,r[0],r[1]),this.rotation=this.rotation+t,this},this.moveTo=function(t,r){const i=e.scalePoint(n.centerPoint.coord),o=e.scalePoint([t,r]),s=2*bf.getDistance(i,o);p({x:i[0],y:i[1]}).animate({x:o[0],y:o[1]},{duration:s,step:function(t,r){let i=0,o=0;"x"===r.prop?i=t-e.scalePoint(n.centerPoint.coord)[0]:"y"===r.prop&&(o=t-e.scalePoint(n.centerPoint.coord)[1]),p.each(n.set.items,function(){this.translate(i,o)}),n.centerPoint.setCoord([n.centerPoint.coord[0]+i/e.scale[0],n.centerPoint.coord[1]-o/e.scale[1]]),n.rotateHandle.setCoord([n.rotateHandle.coord[0]+i/e.scale[0],n.rotateHandle.coord[1]-o/e.scale[1]])}})},this.rotateTo=function(e){Math.abs(this.rotation-e)>180&&(this.rotation+=360);const t=5*Math.abs(this.rotation-e);p({0:this.rotation}).animate({0:e},{duration:t,step:function(e,t){n.rotate(e,!0),n.rotateHandle.setCoord([Math.sin((e+275)*Math.PI/180)*r+n.centerPoint.coord[0],Math.cos((e+275)*Math.PI/180)*r+n.centerPoint.coord[1]])}})},this.remove=function(){this.set.remove()},this.makeTranslatable(),this}function zf(e,t){r.defaults(t,{center:[0,0],pixelsPerUnit:40,ticksPerUnit:10,units:10,label:"",style:{fill:null,stroke:af.GRAY}});const n=r.extend({},t.style,{strokeWidth:1}),i=r.extend({},t.style,{strokeWidth:2}),o=t.units*t.pixelsPerUnit,s=e.unscalePoint(mp.subtract(e.scalePoint(t.center),mp.scale([o,-50],.5))),a=t.pixelsPerUnit/e.scale[0],l=50/e.scale[0],c=mp.add(s,[t.units*a,l]);let u;if(10===t.ticksPerUnit)u={10:1,5:.55,1:.35};else{const e=[1,.6,.45,.3];u={};for(let n=t.ticksPerUnit;n>=1;n/=2)u[n]=1*(e.shift()||.2)}const d=r.keys(u).sort(function(e,t){return t-e});const h=s[0],f=s[1],g=c[0],m=c[1],v=t.units*t.ticksPerUnit+1,y=e.raphael.set(),x=1/e.scale[0];y.push(e.line([h-x,f],[g+x,f],i)),y.push(e.line([h-x,m],[g+x,m],i)),r.times(v,function(r){const o=r/t.ticksPerUnit,s=h+o*a,c=function(e){for(let t=0;t<d.length;t++){const n=d[t];if(e%n===0)return u[n]}return 0}(r)*l,p=0===r||r===v-1?i:n;if(y.push(e.line([s,f],[s,f+c],p)),o%1==0){const n=e.scalePoint([s,m]);let r,i;0===o?(r=t.label,i={mm:13,cm:11,m:8,km:11,in:8,ft:8,yd:10,mi:10}[r]||3*r.toString().length):(r=o,i=-3*(o.toString().length+1));const a=e.raphael.text(n[0]+i,n[1]+10,r);a.attr({"font-family":"KaTeX_Main","font-size":"12px",color:"#444"}),y.push(a)}});const b=e.mouselayer.path(e.svgPath([s,[h,m],c,[g,f],!0]));b.attr({fill:"#000",opacity:0,stroke:"#000","stroke-width":2}),y.push(b),b.node.addEventListener("touchstart",function(e){e.preventDefault()},{passive:!1});const w=p.map(y,function(e){return e.node});p(w).css("cursor","move"),p(w).bind("vmousedown",function(t){t.preventDefault();let n=t.pageX-p(e.raphael.canvas.parentNode).offset().left,r=t.pageY-p(e.raphael.canvas.parentNode).offset().top;p(document).bind("vmousemove.ruler",function(t){let i=t.pageX-p(e.raphael.canvas.parentNode).offset().left,o=t.pageY-p(e.raphael.canvas.parentNode).offset().top;i=Math.max(10,Math.min(e.xpixels-10,i)),o=Math.max(10,Math.min(e.ypixels-10,o));const s=i-n,a=o-r;y.translate(s,a),_.setCoord([_.coord[0]+s/e.scale[0],_.coord[1]-a/e.scale[1]]),S.setCoord([S.coord[0]+s/e.scale[0],S.coord[1]-a/e.scale[1]]),n=i,r=o}),p(document).one("vmouseup",function(e){p(document).unbind("vmousemove.ruler")})});const _=e.addMovablePoint({coord:s,normalStyle:{fill:af.INTERACTIVE,"fill-opacity":0,stroke:af.INTERACTIVE},highlightStyle:{fill:af.INTERACTING,"fill-opacity":.1,stroke:af.INTERACTING},pointSize:6,onMove:function(t,n){const r=S.coord[1]-n,i=S.coord[0]-t,o=180*Math.atan2(r,i)/Math.PI,s=mp.scale(mp.add([t,n],S.coord),.5),a=e.scalePoint(s),l=mp.scale(mp.add(_.coord,S.coord),.5),c=e.scalePoint(l),u=mp.subtract(a,c);y.rotate(-o,c[0],c[1]),y.translate(u[0],u[1])}}),S=e.addMovablePoint({coord:[g,f],normalStyle:{fill:af.INTERACTIVE,"fill-opacity":0,stroke:af.INTERACTIVE},highlightStyle:{fill:af.INTERACTING,"fill-opacity":.1,stroke:af.INTERACTING},pointSize:6,onMove:function(t,n){const r=n-_.coord[1],i=t-_.coord[0],o=180*Math.atan2(r,i)/Math.PI,s=mp.scale(mp.add([t,n],_.coord),.5),a=e.scalePoint(s),l=mp.scale(mp.add(_.coord,S.coord),.5),c=e.scalePoint(l),u=mp.subtract(a,c);y.rotate(-o,c[0],c[1]),y.translate(u[0],u[1])}});return _.constraints.fixedDistance.dist=o/e.scale[0],_.constraints.fixedDistance.point=S,S.constraints.fixedDistance.dist=o/e.scale[0],S.constraints.fixedDistance.point=_,this.remove=function(){y.remove(),_.remove(),S.remove()},this}function Bf(e,t){if(this.graphie=e,r.extend(this,t),r.defaults(this,{normalStyle:{stroke:af.INTERACTIVE,"stroke-width":2,fill:af.INTERACTIVE},highlightStyle:{stroke:af.INTERACTING,"stroke-width":2,fill:af.INTERACTING},labelStyle:{stroke:af.DYNAMIC,"stroke-width":1,color:af.DYNAMIC},angleStyle:{stroke:af.DYNAMIC,"stroke-width":1,color:af.DYNAMIC},allowReflex:!0}),!this.points||3!==this.points.length)throw new d("MovableAngle requires 3 points",h.InvalidInput);this.points=r.map(t.points,function(t){return r.isArray(t)?e.addMovablePoint({coord:t,visible:!1,constraints:{fixed:!0},normalStyle:this.normalStyle}):t},this),this.coords=r.pluck(this.points,"coord"),null==this.reflex&&(this.allowReflex?this.reflex=this._getClockwiseAngle(this.coords)>180:this.reflex=!1),this.rays=r.map([0,2],function(t){return e.addMovableLineSegment({pointA:this.points[1],pointZ:this.points[t],fixed:!0,extendRay:!0})},this),this.temp=[],this.labeledAngle=e.label([0,0],"","center",this.labelStyle),this.fixed||(this.addMoveHandlers(),this.addHighlightHandlers()),this.update()}r.extend(bf.Graphie.prototype,{labelAngle:function(e){const t=this;r.defaults(e,{point1:[0,0],vertex:[0,0],point3:[0,0],label:null,numArcs:1,showRightAngleMarker:!0,pushOut:0,clockwise:!1,style:{}});let n=void 0===e.text?"":e.text;const i=e.vertex,o=t.scalePoint(i);let s,a;e.clockwise?(s=e.point1,a=e.point3):(s=e.point3,a=e.point1);const l=bf.findAngleDeprecated(s,i),c=bf.findAngleDeprecated(a,i),u=(c+360-l)%360,d=(l+u/2)%360;let h=5*e.pushOut+Af(u);const p=[];if(Math.abs(u-90)<1e-9&&e.showRightAngleMarker){const n=mp.add(o,Lf(h,l)),i=mp.add(o,Lf(h,c));h*=Math.SQRT2;const s=mp.add(o,Lf(h,d));r.each([n,i],function(n){p.push(t.scaledPath([n,s],e.style))})}else r.times(e.numArcs,function(n){p.push(t.arc(i,t.unscaleVector(h),l,c,e.style)),h+=3});if(n){const r=n.match(/\$deg(\d)?/);if(r){const e=r[1]||1;n=n.replace(r[0],Np.toFixedApprox(u,e)+"^{\\circ}")}const i=Lf(h+15,d),s=mp.add(o,i),a=t.unscalePoint(s);e.label?(e.label.setPosition(a),e.label.processMath(n,!0)):t.label(a,n,"center",e.style)}return p},labelSide:function(e){const t=this;let n,i;r.defaults(e,{point1:[0,0],point2:[0,0],label:null,text:"",numTicks:0,numArrows:0,clockwise:!1,style:{}}),e.clockwise?(n=e.point1,i=e.point2):(n=e.point2,i=e.point1);const o=[(n[0]+i[0])/2,(n[1]+i[1])/2],s=t.scalePoint(o),a=Math.atan2(i[1]-n[1],i[0]-n[0]),l=a+Math.PI/2,c=[];let u=0;if(e.numTicks){const n=e.numTicks,i=5,o=5,d=r.extend({},e.style,{strokeWidth:2});r.times(n,function(e){const r=Nf(i*(e-(n-1)/2),a),u=Nf(o,l),h=[mp.add(s,r,u),mp.add(s,r,Rf(u))];c.push(t.scaledPath(h,d))}),u+=i*(n-1)+15}if(e.numArrows){const o=e.numArrows,l=[n,i].sort(function(e,t){return e[1]===t[1]?e[0]-t[0]:e[1]-t[1]})[0],d=t.scalePoint(l),h=r.extend({},e.style,{arrows:"->",strokeWidth:2}),p=5;r.times(o,function(e){let r=Nf(u+p*e,a);l!==n&&(r=Rf(r));const i=mp.add(s,r);c.push(t.scaledPath([d,i],h))})}let d=e.text;if(d){const r=d.match(/\$len(\d)?/);if(r){const e=bf.getDistance(n,i),t=r[1]||1;d=d.replace(r[0],Np.toFixedApprox(e,t))}const o=Nf(20,l),a=mp.add(s,o),c=t.unscalePoint(a);e.label?(e.label.setPosition(c),e.label.processMath(d,!0)):t.label(c,d,"center",e.style)}return c},labelVertex:function(e){const t=this;if(r.defaults(e,{point1:null,vertex:[0,0],point3:null,label:null,text:"",clockwise:!1,style:{}}),!e.text)return;const n=e.vertex,i=t.scalePoint(n);let o,s;e.clockwise?(o=e.point1,s=e.point3):(o=e.point3,s=e.point1);let a,l=135;if(o&&s){const e=bf.findAngleDeprecated(o,n);l=(bf.findAngleDeprecated(s,n)+360-e)%360,a=(e+l/2+180)%360}else if(o){a=bf.findAngleDeprecated(n,o)+90}else if(s){a=bf.findAngleDeprecated(s,n)+90}else a=135;const c=Lf(10+Af(360-l),a),u=mp.add(i,c),d=t.unscalePoint(u);e.label?(e.label.setPosition(d),e.label.processMath(e.text,!0)):t.label(d,e.text,"center",e.style)},addMovablePoint:function(e){const t=p.extend(!0,{graph:this,coord:[0,0],snapX:0,snapY:0,pointSize:4,highlight:!1,dragging:!1,visible:!0,bounded:!0,constraints:{fixed:!1,constrainX:!1,constrainY:!1,fixedAngle:{},fixedDistance:{}},lineStarts:[],lineEnds:[],polygonVertices:[],normalStyle:{},highlightStyle:{fill:af.INTERACTING,stroke:af.INTERACTING},labelStyle:{color:af.INTERACTIVE},vertexLabel:"",mouseTarget:null},e),n=t.constraints.fixed?af.DYNAMIC:af.INTERACTIVE;t.normalStyle=r.extend({},{fill:n,stroke:n},e.normalStyle),void 0!==e.coordX&&(t.coord[0]=e.coordX),void 0!==e.coordY&&(t.coord[1]=e.coordY);const i=t.graph,o=function(e){t.visible&&t.bounded&&!t.constraints.fixed&&(e=i.constrainToBounds(e,10));let n=e[0],r=e[1];if(0!==t.snapX&&(n=Math.round(n/t.snapX)*t.snapX),0!==t.snapY&&(r=Math.round(r/t.snapY)*t.snapY),t.constraints.fixedDistance.snapPoints){const o=i.scalePoint(e);let s=o[0],a=o[1];const l=2*Math.PI/t.constraints.fixedDistance.snapPoints,c=t.constraints.fixedDistance.dist,u=t.constraints.fixedDistance.point,d=(u[0]-i.range[0][0])*i.scale[0],h=(-u[1]+i.range[1][1])*i.scale[1];let p=s-d,f=-a+h,g=Math.atan(f/p);p<0&&(g+=Math.PI),g=Math.round(g/l)*l,p=c*Math.cos(g),f=c*Math.sin(g),s=p+d,a=-f+h,n=Np.roundTo(5,s/i.scale[0]+i.range[0][0]),r=Np.roundTo(5,i.range[1][1]-a/i.scale[1])}return t.applyConstraint([n,r])};t.applyConstraint=function(e,n,r){let i=e.slice();const o={};if(r?p.extend(o,{fixed:!1,constrainX:!1,constrainY:!1,fixedAngle:{},fixedDistance:{}},n):p.extend(o,this.constraints,n),o.constrainX)i=[this.coord[0],e[1]];else if(o.constrainY)i=[e[0],this.coord[1]];else if("number"==typeof o.fixedAngle.angle&&"number"==typeof o.fixedDistance.dist){const e=o.fixedAngle.vertex.coord||o.fixedAngle.vertex,t=o.fixedAngle.ref.coord||o.fixedAngle.ref,n=o.fixedDistance.point.coord||o.fixedDistance.point,r=(o.fixedAngle.angle+bf.findAngleDeprecated(t,e))*Math.PI/180,s=o.fixedDistance.dist;i[0]=s*Math.cos(r)+n[0],i[1]=s*Math.sin(r)+n[1]}else if("number"==typeof o.fixedAngle.angle){const t=o.fixedAngle.vertex.coord||o.fixedAngle.vertex,n=o.fixedAngle.ref.coord||o.fixedAngle.ref,r=(o.fixedAngle.angle+bf.findAngleDeprecated(n,t))*Math.PI/180,s=bf.findAngleDeprecated(e,t)*Math.PI/180;let a=bf.getDistance(e,t)*Math.cos(r-s);a=a<1?1:a,i[0]=a*Math.cos(r)+t[0],i[1]=a*Math.sin(r)+t[1]}else if("number"==typeof o.fixedDistance.dist){const t=o.fixedDistance.point.coord||o.fixedDistance.point;let n=bf.findAngleDeprecated(e,t);const r=o.fixedDistance.dist;n=n*Math.PI/180,i[0]=r*Math.cos(n)+t[0],i[1]=r*Math.sin(n)+t[1]}else o.fixed&&(i=t.coord);return i},t.coord=o(t.coord);if(t.visible&&i.style(t.normalStyle,function(){const e=[t.pointSize/i.scale[0],t.pointSize/i.scale[1]],n={maxScale:2,padding:2};t.visibleShape=new Pf(i,t.coord,e,n),t.visibleShape.attr(r.omit(t.normalStyle,"scale")),t.visibleShape.toFront()}),t.normalStyle.scale=1,t.highlightStyle.scale=2,t.vertexLabel&&(t.labeledVertex=this.label([0,0],"","center",t.labelStyle)),t.drawLabel=function(){t.vertexLabel&&t.graph.labelVertex({vertex:t.coord,label:t.labeledVertex,text:t.vertexLabel,style:t.labelStyle})},t.drawLabel(),t.grab=function(e){e=e||[0,0],p(document).bind("vmousemove.point vmouseup.point",function(n){n.preventDefault(),t.dragging=!0,Of=!0;let s=mp.add(i.getMouseCoord(n),e);s=o(s);let a,l,c=s[0],u=s[1];if("vmousemove"===n.type){let e=!0;if(r.isFunction(t.onMove)){const n=t.onMove(c,u);!1===n&&(e=!1),r.isArray(n)&&(c=n[0],u=n[1])}if(a=(c-i.range[0][0])*i.scale[0],l=(-u+i.range[1][1])*i.scale[1],e){const e=i.unscalePoint([a,l]);t.visibleShape.moveTo(e),t.mouseTarget.moveTo(e),t.coord=[c,u],t.updateLineEnds(),p(t).trigger("move")}t.drawLabel()}else if("vmouseup"===n.type){if(p(document).unbind(".point"),t.dragging=!1,Of=!1,r.isFunction(t.onMoveEnd)){const e=t.onMoveEnd(c,u);if(r.isArray(e)){c=e[0],u=e[1],a=(c-i.range[0][0])*i.scale[0],l=(-u+i.range[1][1])*i.scale[1];const n=i.unscalePoint([a,l]);t.visibleShape.moveTo(n),t.mouseTarget.moveTo(n),t.coord=[c,u]}}t.highlight||(t.visibleShape.animate(t.normalStyle,50),t.onUnhighlight&&t.onUnhighlight())}})},t.visible&&!t.constraints.fixed){if(!t.mouseTarget){const e=i.unscaleVector(16),n={mouselayer:!0,padding:0,disableMouseEventsOnWrapper:!0,interactiveKindForTesting:"movable-point"};t.mouseTarget=new Pf(i,t.coord,e,n),t.mouseTarget.attr({fill:"#000",opacity:0})}const e=p(t.mouseTarget.getMouseTarget());e.css("cursor","move"),e.bind("vmousedown vmouseover vmouseout",function(e){if("vmouseover"===e.type)t.highlight=!0,Of||(t.visibleShape.animate(t.highlightStyle,50),t.onHighlight&&t.onHighlight());else if("vmouseout"===e.type)t.highlight=!1,t.dragging||Of||(t.visibleShape.animate(t.normalStyle,50),t.onUnhighlight&&t.onUnhighlight());else if("vmousedown"===e.type&&(1===e.which||0===e.which)){e.preventDefault();const n=t.coord,r=i.getMouseCoord(e),o=!("ontouchstart"in window)?[0,0]:mp.subtract(n,r);t.grab(o)}})}return t.moveTo=function(e,n,i){const o=5*bf.getDistance(this.graph.scalePoint([e,n]),this.graph.scalePoint(this.coord)),s=i&&function(e){t.coord=e,t.updateLineEnds()};this.visibleShape.animateTo([e,n],o,s),this.mouseTarget.animateTo([e,n],o,s),this.coord=[e,n],r.isFunction(this.onMove)&&this.onMove(e,n)},t.updateLineEnds=function(){p(this.lineStarts).each(function(){this.coordA=t.coord,this.transform()}),p(this.lineEnds).each(function(){this.coordZ=t.coord,this.transform()}),p(this.polygonVertices).each(function(){this.transform()})},t.setCoord=function(e){this.visible&&(this.visibleShape.moveTo(e),null!=this.mouseTarget&&this.mouseTarget.moveTo(e)),this.coord=e.slice()},t.setCoordConstrained=function(e){this.setCoord(o(e))},t.toBack=function(){this.visible&&(null!=this.mouseTarget&&this.mouseTarget.toBack(),this.visibleShape.toBack())},t.toFront=function(){this.visible&&(null!=this.mouseTarget&&this.mouseTarget.toFront(),this.visibleShape.toFront())},t.remove=function(){this.visibleShape&&this.visibleShape.remove(),this.mouseTarget&&this.mouseTarget.remove(),this.labeledVertex&&this.labeledVertex.remove()},t},addMovableLineSegment:function(e){const t=p.extend({graph:this,coordA:[0,0],coordZ:[1,1],snapX:0,snapY:0,fixed:!1,ticks:0,normalStyle:{},highlightStyle:{stroke:af.INTERACTING,"stroke-width":6},labelStyle:{stroke:af.INTERACTIVE,color:af.INTERACTIVE},highlight:!1,dragging:!1,tick:[],extendLine:!1,extendRay:!1,constraints:{fixed:!1,constrainX:!1,constrainY:!1},sideLabel:"",vertexLabels:[],numArrows:0,numTicks:0,movePointsWithLine:!1},e),n=t.fixed?af.DYNAMIC:af.INTERACTIVE;t.normalStyle=r.extend({},{"stroke-width":2,stroke:n},e.normalStyle),t.arrowStyle=r.extend({},t.normalStyle,{color:t.normalStyle.stroke}),void 0!==e.pointA?(t.coordA=e.pointA.coord,t.pointA.lineStarts.push(t)):void 0!==e.coordA&&(t.coordA=e.coordA.slice()),void 0!==e.pointZ?(t.coordZ=e.pointZ.coord,t.pointZ.lineEnds.push(t)):void 0!==e.coordA&&(t.coordA=t.coordA.slice());const i=t.graph;i.style(t.normalStyle);for(let r=0;r<t.ticks;++r)t.tick[r]=Df;let o=bf.unscaledSvgPath([[0,0],[1,0]]);for(let r=0;r<t.ticks;++r){const e=.5-(t.ticks-1+2*r)/i.scale[0];o+=bf.unscaledSvgPath([[e,-7],[e,7]])}if(e={thickness:Math.max(t.normalStyle["stroke-width"],t.highlightStyle["stroke-width"])},t.visibleLine=new Ef(i,[0,0],[1,0],e),t.visibleLine.attr(t.normalStyle),!t.fixed){const e={thickness:30,mouselayer:!0,interactiveKindForTesting:"movable-line"};t.mouseTarget=new Ef(i,[0,0],[1,0],e),t.mouseTarget.attr({fill:"#000",opacity:0})}if(t.transform=function(e){e&&("object"==typeof this.pointA&&(this.coordA=this.pointA.coord),"object"==typeof this.pointZ&&(this.coordZ=this.pointZ.coord));const n=function(e,n,r){const i=(e=t.graph).range[0][1]-e.range[0][0]+(e.range[1][1]-e.range[1][0]),o=e.unscaleVector(mp.cartFromPolarDeg(1,r)),s=mp.scale(mp.normalize(o),i),a=mp.add(n,s),l=mp.polarDegFromCart(o)[1];return e.constrainToBoundsOnAngle(a,4,l*Math.PI/180)},o=function(e){const t=e.graph.scalePoint(e.coordA),n=e.graph.scalePoint(e.coordZ);return mp.polarDegFromCart(mp.subtract(n,t))[1]}(this);let s=this.coordA,a=this.coordZ;this.extendLine?(s=n(i,s,360-o),a=n(i,a,(540-o)%360)):this.extendRay&&(a=n(i,s,360-o));const l=[this.visibleLine];this.fixed||l.push(this.mouseTarget),r.each(l,function(e){e.moveTo(s,a)}),null==this._arrows&&(this._arrows=[],this.extendLine?(this._arrows.push(new Cf(i,this.normalStyle)),this._arrows.push(new Cf(i,this.normalStyle))):this.extendRay&&this._arrows.push(new Cf(i,this.normalStyle)));const c=[this.coordA,this.coordZ],u=[360-o,(540-o)%360];r.each(this._arrows,function(e,t){e.toCoordAtAngle(c[t],u[t])}),r.invoke(this.temp,"remove"),this.temp=[];const d=this.coordA[0]<this.coordZ[0]||this.coordA[0]===this.coordZ[0]&&this.coordA[1]>this.coordZ[1];this.sideLabel&&this.temp.push(this.graph.labelSide({point1:this.coordA,point2:this.coordZ,label:this.labeledSide,text:this.sideLabel,numArrows:this.numArrows,numTicks:this.numTicks,clockwise:d,style:this.labelStyle})),this.vertexLabels.length&&(this.graph.labelVertex({vertex:this.coordA,point3:this.coordZ,label:this.labeledVertices[0],text:this.vertexLabels[0],clockwise:d,style:this.labelStyle}),this.graph.labelVertex({point1:this.coordA,vertex:this.coordZ,label:this.labeledVertices[1],text:this.vertexLabels[1],clockwise:d,style:this.labelStyle})),this.temp=r.flatten(this.temp)},t.toBack=function(){t.fixed||t.mouseTarget.toBack(),t.visibleLine.toBack()},t.toFront=function(){t.fixed||t.mouseTarget.toFront(),t.visibleLine.toFront()},t.remove=function(){t.fixed||t.mouseTarget.remove(),t.visibleLine.remove(),t.labeledSide&&t.labeledSide.remove(),t.labeledVertices&&r.invoke(t.labeledVertices,"remove"),t._arrows&&r.invoke(t._arrows,"remove"),t.temp.length&&r.invoke(t.temp,"remove")},t.hide=function(){t.visibleLine.hide(),t.temp.length&&r.invoke(t.temp,"hide"),t._arrows&&r.invoke(t._arrows,"hide")},t.show=function(){t.visibleLine.show(),t.temp.length&&r.invoke(t.temp,"show"),t._arrows&&r.invoke(t._arrows,"show")},t.sideLabel&&(t.labeledSide=this.label([0,0],"","center",t.labelStyle)),t.vertexLabels.length&&(t.labeledVertices=r.map(t.vertexLabels,function(e){return this.label([0,0],"","center",t.labelStyle)},this)),!t.fixed&&!t.constraints.fixed){const e=p(t.mouseTarget.getMouseTarget());e.css("cursor","move"),e.bind("vmousedown vmouseover vmouseout",function(e){if("vmouseover"===e.type)Of||(t.highlight=!0,t.visibleLine.animate(t.highlightStyle,50),t.arrowStyle=r.extend({},t.arrowStyle,{color:t.highlightStyle.stroke,stroke:t.highlightStyle.stroke}),t.transform());else if("vmouseout"===e.type)t.highlight=!1,t.dragging||(t.visibleLine.animate(t.normalStyle,50),t.arrowStyle=r.extend({},t.arrowStyle,{color:t.normalStyle.stroke,stroke:t.normalStyle.stroke}),t.transform());else if("vmousedown"===e.type&&(1===e.which||0===e.which)){e.preventDefault();let n=(e.pageX-p(i.raphael.canvas.parentNode).offset().left)/i.scale[0]+i.range[0][0],o=i.range[1][1]-(e.pageY-p(i.raphael.canvas.parentNode).offset().top)/i.scale[1];t.snapX>0&&(n=Math.round(n/t.snapX)*t.snapX),t.snapY>0&&(o=Math.round(o/t.snapY)*t.snapY);const s=[t.coordA[0]-n,t.coordA[1]-o],a=[t.coordZ[0]-n,t.coordZ[1]-o],l=-Math.min(i.scaleVector(s)[0],i.scaleVector(a)[0]),c=Math.max(i.scaleVector(s)[0],i.scaleVector(a)[0]),u=Math.max(i.scaleVector(s)[1],i.scaleVector(a)[1]),d=-Math.min(i.scaleVector(s)[1],i.scaleVector(a)[1]);p(document).bind("vmousemove.lineSegment vmouseup.lineSegment",function(e){e.preventDefault(),t.dragging=!0,Of=!0;let n=e.pageX-p(i.raphael.canvas.parentNode).offset().left,o=e.pageY-p(i.raphael.canvas.parentNode).offset().top;n=Math.max(l+10,Math.min(i.xpixels-10-c,n)),o=Math.max(u+10,Math.min(i.ypixels-10-d,o));let h=n/i.scale[0]+i.range[0][0],f=i.range[1][1]-o/i.scale[1];if(t.snapX>0&&(h=Math.round(h/t.snapX)*t.snapX),t.snapY>0&&(f=Math.round(f/t.snapY)*t.snapY),"vmousemove"===e.type){t.constraints.constrainX&&(h=t.coordA[0]-s[0]),t.constraints.constrainY&&(f=t.coordA[1]-s[1]);const e=h+s[0]-t.coordA[0],n=f+s[1]-t.coordA[1];t.coordA=[h+s[0],f+s[1]],t.coordZ=[h+a[0],f+a[1]],t.transform(),t.movePointsWithLine&&("object"==typeof t.pointA&&t.pointA.setCoord([t.pointA.coord[0]+e,t.pointA.coord[1]+n]),"object"==typeof t.pointZ&&t.pointZ.setCoord([t.pointZ.coord[0]+e,t.pointZ.coord[1]+n])),r.isFunction(t.onMove)&&t.onMove(e,n)}else"vmouseup"===e.type&&(p(document).unbind(".lineSegment"),t.dragging=!1,Of=!1,t.highlight||(t.visibleLine.animate(t.normalStyle,50),t.arrowStyle=r.extend({},t.arrowStyle,{color:t.normalStyle.stroke,stroke:t.normalStyle.stroke}),t.transform()),r.isFunction(t.onMoveEnd)&&t.onMoveEnd());p(t).trigger("move")})}})}return void 0!==t.pointA&&t.pointA.toFront(),void 0!==t.pointZ&&t.pointZ.toFront(),t.transform(),t},addMovablePolygon:function(e){const t=this,n=p.extend({snapX:0,snapY:0,fixed:!1,constrainToGraph:!0,normalStyle:{},highlightStyle:{stroke:af.INTERACTING,"stroke-width":2,fill:af.INTERACTING,"fill-opacity":.05},pointHighlightStyle:{fill:af.INTERACTING,stroke:af.INTERACTING},labelStyle:{stroke:af.DYNAMIC,"stroke-width":1,color:af.DYNAMIC},angleLabels:[],showRightAngleMarkers:[],sideLabels:[],vertexLabels:[],numArcs:[],numArrows:[],numTicks:[],updateOnPointMove:!0,closed:!0},r.omit(e,"points")),i=n.fixed?af.DYNAMIC:af.INTERACTIVE;n.normalStyle=r.extend({"stroke-width":2,"fill-opacity":0,fill:i,stroke:i},e.normalStyle),n.points=e.points;const o=function(e){return!r.isArray(e)};if(n.update=function(){const e=n.points.length;n.coords=r.map(n.points,function(e,t){return o(e)?e.coord:e}),n.left=r.min(r.pluck(n.coords,0)),n.right=r.max(r.pluck(n.coords,0)),n.top=r.max(r.pluck(n.coords,1)),n.bottom=r.min(r.pluck(n.coords,1));let i=r.map(n.coords,function(e){return t.scalePoint(e)});n.closed?i.push(!0):i=i.concat(r.clone(i).reverse()),n.path=bf.unscaledSvgPath(i),r.invoke(n.temp,"remove"),n.temp=[];const s=jf(n.coords);(n.angleLabels.length||n.showRightAngleMarkers.length)&&r.each(n.labeledAngles,function(r,i){n.temp.push(t.labelAngle({point1:n.coords[(i-1+e)%e],vertex:n.coords[i],point3:n.coords[(i+1)%e],label:r,text:n.angleLabels[i],showRightAngleMarker:n.showRightAngleMarkers[i],numArcs:n.numArcs[i],clockwise:s,style:n.labelStyle}))}),n.sideLabels.length&&r.each(n.labeledSides,function(r,i){n.temp.push(t.labelSide({point1:n.coords[i],point2:n.coords[(i+1)%e],label:r,text:n.sideLabels[i],numArrows:n.numArrows[i],numTicks:n.numTicks[i],clockwise:s,style:n.labelStyle}))}),n.vertexLabels.length&&r.each(n.labeledVertices,function(r,i){t.labelVertex({point1:n.coords[(i-1+e)%e],vertex:n.coords[i],point3:n.coords[(i+1)%e],label:r,text:n.vertexLabels[i],clockwise:s,style:n.labelStyle})}),n.temp=r.flatten(n.temp)},n.transform=function(){n.update(),n.visibleShape.attr({path:n.path}),n.fixed||n.mouseTarget.attr({path:n.path})},n.remove=function(){n.visibleShape.remove(),n.fixed||n.mouseTarget.remove(),n.labeledAngles&&r.invoke(n.labeledAngles,"remove"),n.labeledSides&&r.invoke(n.labeledSides,"remove"),n.labeledVertices&&r.invoke(n.labeledVertices,"remove"),n.temp.length&&r.invoke(n.temp,"remove")},n.toBack=function(){n.fixed||n.mouseTarget.toBack(),n.visibleShape.toBack()},n.toFront=function(){n.fixed||n.mouseTarget.toFront(),n.visibleShape.toFront()},n.updateOnPointMove&&r.each(r.filter(n.points,o),function(e){e.polygonVertices.push(n)}),n.coords=new Array(n.points.length),n.angleLabels.length){const e=Math.max(n.angleLabels.length,n.showRightAngleMarkers.length);n.labeledAngles=r.times(e,function(){return this.label([0,0],"","center",n.labelStyle)},this)}return n.sideLabels.length&&(n.labeledSides=r.map(n.sideLabels,function(e){return this.label([0,0],"","center",n.labelStyle)},this)),n.vertexLabels.length&&(n.labeledVertices=r.map(n.vertexLabels,function(e){return this.label([0,0],"","center",n.labelStyle)},this)),n.update(),n.visibleShape=t.raphael.path(n.path),n.visibleShape.attr(n.normalStyle),n.fixed||(n.mouseTarget=t.mouselayer.path(n.path),n.mouseTarget.attr({fill:"#000",opacity:0,cursor:"move"}),p(n.mouseTarget[0]).bind("vmousedown vmouseover vmouseout",function(e){if("vmouseover"===e.type)Of&&!n.dragging||(n.highlight=!0,n.visibleShape.animate(n.highlightStyle,50),r.each(r.filter(n.points,o),function(e){e.visibleShape.animate(n.pointHighlightStyle,50)}));else if("vmouseout"===e.type){if(n.highlight=!1,!n.dragging){n.visibleShape.animate(n.normalStyle,50);const e=r.filter(n.points,o);r.any(r.pluck(e,"dragging"))||r.each(e,function(e){e.visibleShape.animate(e.normalStyle,50)})}}else if("vmousedown"===e.type&&(1===e.which||0===e.which)){e.preventDefault(),r.each(r.filter(n.points,o),function(e){e.dragging=!0});let i=(e.pageX-p(t.raphael.canvas.parentNode).offset().left)/t.scale[0]+t.range[0][0],s=t.range[1][1]-(e.pageY-p(t.raphael.canvas.parentNode).offset().top)/t.scale[1];n.snapX>0&&(i=Math.round(i/n.snapX)*n.snapX),n.snapY>0&&(s=Math.round(s/n.snapY)*n.snapY);let a=i,l=s;const c=n.coords.slice(),u=(i-n.left)*t.scale[0],d=(n.right-i)*t.scale[0],h=(n.top-s)*t.scale[1],f=(s-n.bottom)*t.scale[1];p(document).bind("vmousemove.polygon vmouseup.polygon",function(e){e.preventDefault(),n.dragging=!0,Of=!0;let g=e.pageX-p(t.raphael.canvas.parentNode).offset().left,m=e.pageY-p(t.raphael.canvas.parentNode).offset().top;n.constrainToGraph&&(g=Math.max(u+10,Math.min(t.xpixels-10-d,g)),m=Math.max(h+10,Math.min(t.ypixels-10-f,m)));let v=g/t.scale[0]+t.range[0][0],y=t.range[1][1]-m/t.scale[1];if(n.snapX>0&&(v=Math.round(v/n.snapX)*n.snapX),n.snapY>0&&(y=Math.round(y/n.snapY)*n.snapY),"vmousemove"===e.type){let e=v-i,t=y-s,u=!0;if(r.isFunction(n.onMove)){const o=n.onMove(e,t);!1===o?u=!1:r.isArray(o)&&(e=o[0],t=o[1],v=i+e,y=s+t)}const d=function(n){return[c[n][0]+e,c[n][1]+t]};u&&(r.each(n.points,function(e,t){o(e)?e.setCoord(d(t)):n.points[t]=d(t)}),n.transform(),p(n).trigger("move"),a=v,l=y)}else if("vmouseup"===e.type){p(document).unbind(".polygon");const e=r.filter(n.points,o);r.each(e,function(e){e.dragging=!1}),n.dragging=!1,Of=!1,n.highlight||(n.visibleShape.animate(n.normalStyle,50),r.each(e,function(e){e.visibleShape.animate(e.normalStyle,50)})),r.isFunction(n.onMoveEnd)&&n.onMoveEnd(a-i,l-s)}})}})),r.invoke(r.filter(n.points,o),"toFront"),n},constrainToBounds:function(e,t){const n=this.unscalePoint([t,this.ypixels-t]),r=this.unscalePoint([this.xpixels-t,t]);return[Math.max(n[0],Math.min(r[0],e[0])),Math.max(n[1],Math.min(r[1],e[1]))]},constrainToBoundsOnAngle:function(e,t,n){const r=this.unscalePoint([t,this.ypixels-t]),i=this.unscalePoint([this.xpixels-t,t]);let o=e.slice();return o[0]<r[0]?o=[r[0],o[1]+(r[0]-o[0])*Math.tan(n)]:o[0]>i[0]&&(o=[i[0],o[1]-(o[0]-i[0])*Math.tan(n)]),o[1]<r[1]?o=[o[0]+(r[1]-o[1])/Math.tan(n),r[1]]:o[1]>i[1]&&(o=[o[0]-(o[1]-i[1])/Math.tan(n),i[1]]),o},addMovableAngle:function(e){return new Bf(this,e)},addCircleGraph:function(e){const t=this,n=p.extend({center:[0,0],radius:2,snapX:.5,snapY:.5,snapRadius:.5,minRadius:1,centerConstraints:{},centerNormalStyle:{},centerHighlightStyle:{stroke:af.INTERACTING,fill:af.INTERACTING},circleNormalStyle:{stroke:af.INTERACTIVE,"fill-opacity":0},circleHighlightStyle:{stroke:af.INTERACTING,fill:af.INTERACTING,"fill-opacity":.05}},e),i=n.centerConstraints.fixed?af.DYNAMIC:af.INTERACTIVE,o=e?e.centerNormalStyle:null;n.centerNormalStyle=r.extend({},{fill:i,stroke:i},o),n.centerPoint=t.addMovablePoint({graph:t,coord:n.center,normalStyle:n.centerNormalStyle,snapX:n.snapX,snapY:n.snapY,constraints:n.centerConstraints}),n.circ=t.circle(n.center,n.radius,n.circleNormalStyle),n.perim=t.mouselayer.circle(t.scalePoint(n.center)[0],t.scalePoint(n.center)[1],t.scaleVector(n.radius)[0]).attr({"stroke-width":20,opacity:.002}),n.centerConstraints.fixed||p(n.centerPoint.mouseTarget.getMouseTarget()).on("vmouseover vmouseout",function(e){n.centerPoint.highlight||n.centerPoint.dragging?n.circ.animate(n.circleHighlightStyle,50):n.circ.animate(n.circleNormalStyle,50)}),n.toFront=function(){n.circ.toFront(),n.perim.toFront(),n.centerPoint.visibleShape.toFront(),n.centerConstraints.fixed||n.centerPoint.mouseTarget.toFront()},n.centerPoint.onMove=function(e,r){n.toFront(),n.circ.attr({cx:t.scalePoint(e)[0],cy:t.scalePoint(r)[1]}),n.perim.attr({cx:t.scalePoint(e)[0],cy:t.scalePoint(r)[1]}),n.onMove&&n.onMove(e,r)},p(n.centerPoint).on("move",function(){n.center=this.coord,p(n).trigger("move")}),n.setCenter=function(e,t){n.centerPoint.setCoord([e,t]),n.centerPoint.onMove(e,t),n.center=[e,t]},n.setRadius=function(e){n.radius=e,n.perim.attr({r:t.scaleVector(e)[0]}),n.circ.attr({rx:t.scaleVector(e)[0],ry:t.scaleVector(e)[1]})},n.remove=function(){n.centerPoint.remove(),n.circ.remove(),n.perim.remove()};const s=[[-1*Math.PI,-.875*Math.PI,"ew-resize"],[-.875*Math.PI,-.625*Math.PI,"nesw-resize"],[-.625*Math.PI,-.375*Math.PI,"ns-resize"],[-.375*Math.PI,-.125*Math.PI,"nwse-resize"],[-.125*Math.PI,.125*Math.PI,"ew-resize"],[.125*Math.PI,.375*Math.PI,"nesw-resize"],[.375*Math.PI,.625*Math.PI,"ns-resize"],[.625*Math.PI,.875*Math.PI,"nwse-resize"],[.875*Math.PI,1*Math.PI,"ew-resize"]];return p(n.perim.node).on("vmousemove",e=>{let[t,r]=this.getMouseCoord(e);t-=n.center[0],r-=n.center[1];const i=Math.atan2(r,t);s.forEach(function(e){const[t,r,o]=e;i>=t&&i<r&&p(n.perim.node).css("cursor",o)})}),p(n.perim.node).css("cursor","nesw-resize"),n.perim.node.addEventListener("touchstart",function(e){e.preventDefault()},{passive:!1}),p(n.perim.node).on("vmouseover vmouseout vmousedown",function(e){if("vmouseover"===e.type)n.highlight=!0,Of||(n.circ.animate(n.circleHighlightStyle,50),n.centerPoint.visibleShape.animate(n.centerHighlightStyle,50));else if("vmouseout"===e.type)n.highlight=!1,n.dragging||n.centerPoint.dragging||(n.circ.animate(n.circleNormalStyle,50),n.centerPoint.visibleShape.animate(n.centerNormalStyle,50));else if("vmousedown"===e.type&&(1===e.which||0===e.which)){e.preventDefault(),n.toFront();const i=n.radius;p(document).on("vmousemove vmouseup",function(e){if(e.preventDefault(),n.dragging=!0,Of=!0,"vmousemove"===e.type){const i=t.constrainToBounds(t.getMouseCoord(e),10);let o=bf.getDistance(n.centerPoint.coord,i);o=Math.max(n.minRadius,Math.round(o/n.snapRadius)*n.snapRadius);const s=n.radius;let a=!0;if(n.onResize){const e=n.onResize(o,s);r.isNumber(e)?o=e:!1===e&&(a=!1)}a&&(n.setRadius(o),p(n).trigger("move"))}else"vmouseup"===e.type&&(p(document).off("vmousemove vmouseup"),n.dragging=!1,Of=!1,n.onResizeEnd&&n.onResizeEnd(n.radius,i))})}}),n},addRotateHandle:function(){return function(e){const t=this;let n=e.center;const i=e.radius,o=e.lengthAngle||30,s=e.hideArrow||!1,a=e.mouseTarget,l=r.uniqueId("rotateHandle");r.isArray(n)&&(n={coord:n});const c=t.addMovablePoint({coord:Rp.addVector(n.coord,mp.cartFromPolarDeg(i,e.angleDeg||0)),constraints:{fixedDistance:{dist:i,point:n}},mouseTarget:a});n.toFront();let u,d=n.coord,h=c.coord,f=h,g=!1,m=!1;const v=function(r){if(s)return;const i=mp.subtract(r,n.coord),a=mp.polarDegFromCart(i)[1];u&&u.remove(),u=function(e,t,n,r,i,o,s){const a=function(r,i){const s=n+i,a=mp.cartFromPolarDeg(s,o+r),l=mp.add(t,a),c=e.scalePoint(l);return c[0]+","+c[1]},l=e.scaleVector(n-r),c=e.scaleVector(n+r);return e.raphael.path(" M"+a(i,-r)+" L"+a(i,-3*r)+" L"+a(2*i,0)+" L"+a(i,3*r)+" L"+a(i,r)+" A"+c[0]+","+c[1]+",0,0,1,"+a(-i,r)+" L"+a(-i,3*r)+" L"+a(-2*i,0)+" L"+a(-i,-3*r)+" L"+a(-i,-r)+" A"+l[0]+","+l[1]+",0,0,0,"+a(i,-r)+" Z").attr({stroke:null,fill:s?af.INTERACTING:af.INTERACTIVE})}(t,n.coord,e.radius,g||m?e.hoverWidth/2:e.width/2,o,a,g||m)};p(n).on("move."+l,function(){const e=mp.subtract(n.coord,d);c.setCoord(mp.add(c.coord,e)),v(c.coord),d=n.coord,c.constraints.fixedDistance.point=n,h=c.coord}),c.onMove=function(t,r){g||(f=h,g=!0);let i=[t,r];if(e.onMove){const t=mp.polarDegFromCart(mp.subtract(h,n.coord)),r=mp.polarDegFromCart(mp.subtract(i,n.coord)),o=t[1],s=r[1];let a=e.onMove(s,o);null!=a&&!0!==a&&(!1===a&&(a=o),i=mp.add(n.coord,mp.cartFromPolarDeg(t[0],a)))}return v(i),h=i,i},c.onMoveEnd=function(){if(g=!1,v(c.coord),e.onMoveEnd){const t=mp.polarDegFromCart(mp.subtract(f,n.coord)),r=mp.polarDegFromCart(mp.subtract(c.coord,n.coord));e.onMoveEnd(r[1],t[1])}},c.visibleShape.remove(),a||c.mouseTarget.attr({scale:2});const y=p(c.mouseTarget.getMouseTarget());y.bind("vmouseover",function(e){m=!0,v(c.coord)}),y.bind("vmouseout",function(e){m=!1,v(c.coord)}),v(c.coord);const x=c.remove;return c.remove=function(){x.call(c),u&&u.remove(),p(n).off("move."+l)},c.update=function(){v(c.coord)},c}}(),addReflectButton:function(){return function(e){const t=this,n=e.line,i=t.addMovablePoint({constraints:e.constraints,coord:Ap.midpoint([n.pointA.coord,n.pointZ.coord]),snapX:t.snap[0],snapY:t.snap[1],onMove:function(e,t){return!1},onMoveEnd:function(t,n){e.onMoveEnd&&e.onMoveEnd.call(this,t,n)}});let o,s=!1,a=!1;const l=function(){return s},c=r.map([0,1],function(t){const n=t?e.highlightStyle:e.normalStyle;return r.map([0,1],function(e){return r.defaults({"fill-opacity":e},n)})}),u=function(e){return a&&(e=!e),c[+l()][+e]},d=function(n,r){o&&o.remove(),o=function(e,t,n,r,i,o,s){Rp.equal(n[0],n[1])&&(n=[n[0],Rp.addVector(n[0],[1,1])]);const a=mp.normalize(mp.subtract(n[1],n[0])),l=mp.scale(a,r/2),c=mp.scale(a,i),u=mp.rotateDeg(c,90),d=mp.rotateDeg(c,-90),h=mp.negate(l),p=mp.rotateDeg(l,90),f=mp.rotateDeg(l,-90),g=Rp.addVectors(t,u),m=Rp.addVectors(t,d),v=Rp.addVectors(t,u,l,p),y=Rp.addVectors(t,u,h,p),x=Rp.addVectors(t,d,l,f),b=Rp.addVectors(t,d,h,f),w=e.path([g,v,y,!0],o),_=e.path([m,x,b,!0],s);return{remove:function(){w.remove(),_.remove()}}}(t,n,r,l()?1.5*e.size:e.size,l()?.125*e.size:.25,u(0),u(1))},h=function(e,t){e=e||n.pointA.coord,t=t||n.pointZ.coord;const r=Ap.midpoint([e,t]);i.setCoord(r),d(r,[e,t])};p(n).on("move",r.bind(h,i,null,null));const f=p(i.mouseTarget.getMouseTarget());f.on("vclick",function(){!1!==e.onClick()&&(a=!a,d(i.coord,[n.pointA.coord,n.pointZ.coord]))}),n.pointA.toFront(),n.pointZ.toFront(),i.visibleShape.remove();const g=t.scaleVector(e.size)[0]/20;i.mouseTarget.attr({scale:1.5*g}),f.css("cursor","pointer"),f.bind("vmouseover",function(e){s=!0,d(i.coord,[n.pointA.coord,n.pointZ.coord])}),f.bind("vmouseout",function(e){s=!1,d(i.coord,[n.pointA.coord,n.pointZ.coord])});const m=i.remove;return i.remove=function(){o.remove(),m.call(i)},i.update=h,i.isFlipped=function(){return a},h(),i}}(),protractor:function(e){return new Ff(this,e)},ruler:function(e){return new zf(this,e||{})},addPoints:mp.add}),r.extend(Bf.prototype,{points:[],snapDegrees:0,snapOffsetDeg:0,angleLabel:"",numArcs:1,pushOut:0,fixed:!1,addMoveHandlers:function(){const e=this.graphie;function t(t,n){return bf.getDistance(e.scalePoint(t),e.scalePoint(n))<30}const n=this.points;n[1].onMove=function(i,o){const s=n[1].coord,a=[i,o],l=mp.add(a,Rf(s));let c=!0;const u={};return r.each([0,2],function(r){const i=n[r].coord;let o=mp.add(i,l),s=bf.findAngleDeprecated(a,o);s*=Math.PI/180,o=e.constrainToBoundsOnAngle(o,10,s),u[r]=o,t(a,o)&&(c=!1)}),c&&r.each(u,function(e,t){n[t].setCoord(e)}),c};const i=this.snapDegrees,o=this.snapOffsetDeg;r.each([0,2],function(e){n[e].onMove=function(e,r){const s=[e,r],a=n[1].coord;if(t(a,s))return!1;if(i){let e=bf.findAngleDeprecated(s,a);e=Math.round((e-o)/i)*i+o;const t=bf.getDistance(s,a);return mp.add(a,ff(t,e))}return!0}}),p(n).on("move",function(){this.update(),p(this).trigger("move")}.bind(this))},addHighlightHandlers:function(){const e=this.points[1];e.onHighlight=function(){r.each(this.points,function(e){e.visibleShape.animate(this.highlightStyle,50)},this),r.each(this.rays,function(e){e.visibleLine.animate(this.highlightStyle,50),e.arrowStyle=r.extend({},e.arrowStyle,{color:this.highlightStyle.stroke,stroke:this.highlightStyle.stroke})},this),this.angleStyle=r.extend({},this.angleStyle,{color:this.highlightStyle.stroke,stroke:this.highlightStyle.stroke}),this.update()}.bind(this),e.onUnhighlight=function(){r.each(this.points,function(e){e.visibleShape.animate(this.normalStyle,50)},this),r.each(this.rays,function(e){e.visibleLine.animate(e.normalStyle,50),e.arrowStyle=r.extend({},e.arrowStyle,{color:e.normalStyle.stroke,stroke:e.normalStyle.stroke})},this),this.angleStyle=r.extend({},this.angleStyle,{color:af.DYNAMIC,stroke:af.DYNAMIC}),this.update()}.bind(this)},_getClockwiseAngle:function(e){return bf.findAngleDeprecated(e[2],e[0],e[1])+0},isReflex:function(){return this.reflex},isClockwise:function(){return this._getClockwiseAngle(this.coords)>180===this.reflex},getClockwiseCoords:function(){return this.isClockwise()?r.clone(this.coords):r.clone(this.coords).reverse()},update:function(e){const t=this.coords;this.coords=r.pluck(this.points,"coord"),r.invoke(this.points,"updateLineEnds");const n=this._getClockwiseAngle(t),i=this._getClockwiseAngle(this.coords),o=n>180,s=i>180;this.allowReflex&&(null==e&&(e=o!==s&&Math.abs(i-n)<180),e&&(this.reflex=!this.reflex)),r.invoke(this.temp,"remove"),this.temp=this.graphie.labelAngle({point1:this.coords[0],vertex:this.coords[1],point3:this.coords[2],label:this.labeledAngle,text:this.angleLabel,numArcs:this.numArcs,pushOut:this.pushOut,clockwise:this.reflex===s,style:this.angleStyle})},remove:function(){r.invoke(this.rays,"remove"),r.invoke(this.temp,"remove"),this.labeledAngle.remove()}});const $f=Jd.nestedMap;function Wf(e){r.extend(this,e)}const Uf=function(){throw new d("Abstract method! Must be implemented by Graphie Movable"+this.constructor.displayName,h.NotAllowed)};r.extend(Wf.prototype,{movableProps:[],add:Uf,modify:Uf,remove:Uf,toFront:function(){},componentDidMount:function(){}});const Hf=function(e){const t=function(e){if(!(this instanceof t))throw new d("Use createElement or JSX with graphie movables",h.NotAllowed);return this.props=function(e,t){return r.extend({},e,{children:r.filter(r.flatten(t),r.identity)})}(e,e.children||[]),this};return e.displayName=e.displayName||r.uniqueId("GraphieClass"),t.displayName=e.displayName,t.prototype=new Wf(e),t.prototype.constructor=t,t},qf={GraphieMovable:Wf,createClass:Hf,createSimpleClass:function(e){return Hf({displayName:e.name||r.uniqueId("GraphieSimpleClass"),movableProps:["children"],add:function(t){this._elements=e(t,this.props),this._prevProps=this.props},modify:function(e){if(!m(this.props,this._prevProps))return this.remove(),this.add(e),this._prevProps=this.props,"reordered"},remove:function(){$f(this._elements,e=>{e&&e.remove()}),this._elements=null,this._prevProps=null},toFront:function(){$f(this._elements,e=>{r.isFunction(e.toFront)&&e.toFront()})}})}},Vf=nf.normalizeOptions,Gf=nf.assert,Yf={cursor:null},Xf={added:!1,isHovering:!1,isMouseOver:!1,isDragging:!1,mouseTarget:null};class Kf{graphie;state;prevState;_listenerMap={};constructor(e,t){this.graphie=e,this.state={id:r.uniqueId("movable")},this.modify({...Xf,...t})}modify(e){this.update({...this._createDefaultState(),...e})}_createDefaultState(){return{id:this.state.id,add:[],modify:[],draw:[],remove:[],onMoveStart:[],onMove:[],onMoveEnd:[],onClick:[],...Yf}}update(e){const t=this.graphie,n=this.cloneState(),r=Object.assign(this.state,Vf(e));if(r.mouseTarget&&!n.mouseTarget){let e;e=r.mouseTarget.getMouseTarget?p(r.mouseTarget.getMouseTarget()):p(r.mouseTarget[0]);!("ontouchstart"in window)&&(e.on("vmouseover",()=>{r.isMouseOver=!0,t.isDragging||(r.isHovering=!0),this.state.added&&this.draw()}),e.on("vmouseout",()=>{r.isMouseOver=!1,r.isDragging||(r.isHovering=!1),this.state.added&&this.draw()})),e[0].addEventListener("touchstart",function(e){e.preventDefault()},{passive:!1}),e.on("vmousedown",e=>{if(0!==e.which&&1!==e.which)return;e.preventDefault();const n=t.getMouseCoord(e);this.grab(n)})}if(r.mouseTarget&&void 0!==r.cursor){let e;e=r.mouseTarget.getMouseTarget?p(r.mouseTarget.getMouseTarget()):p(r.mouseTarget[0]),e.css("cursor",r.cursor||"")}r.added||(this._fireEvent(r.modify,this.cloneState(),{}),r.added=!0,this.prevState=this.cloneState()),this._fireEvent(r.modify,this.cloneState(),this.prevState)}cloneState(){return{...this.state}}_fireEvent(e,...t){if(null!=e)for(const n of e)n.call(this,...t)}draw(){const e=this.cloneState();this._fireEvent(this.state.draw,e,this.prevState),this.prevState=e}grab(e){Gf(Rp.is(e));const t=this.graphie,n=this.state;n.isHovering=!0,n.isDragging=!0,t.isDragging=!0;const r=e;let i=r;this._fireEvent(n.onMoveStart,r,r);const o=e=>{e.preventDefault();const r=t.getMouseCoord(e);this._fireEvent(n.onMove,r,i),this.draw(),i=r},s=()=>{p(document).unbind("vmousemove",o),p(document).unbind("vmouseup",s),n.isHovering&&this._fireEvent(n.onClick,i,r),n.isHovering=this.state.isMouseOver,n.isDragging=!1,t.isDragging=!1,this._fireEvent(n.onMoveEnd,i,r),this.draw()};p(document).bind("vmousemove",o),p(document).bind("vmouseup",s)}_applyConstraints(e,t,n){let r=!1;return(this.state.constraints??[]).reduce((e,i)=>{if(!1===e)return!1;if(r)return e;const o=i.call(this,e,t,{onSkipRemaining:()=>{r=!0},...n});if(!1===o)return!1;if(Rp.is(o,2))return o;if(!0===o||null==o)return e;throw new d("Constraint returned invalid result: "+o,h.Internal)},e)}toBack(){this.state.mouseTarget&&this.state.mouseTarget.toBack()}toFront(){this.state.mouseTarget&&this.state.mouseTarget.toFront()}listen(e,t,n){this._listenerMap=this._listenerMap||{};const r=Qf(e,t),i=this._listenerMap[r]=this._listenerMap[r]||this.state[e].length;this.state[e][i]=n}unlisten(e,t){this._listenerMap=this._listenerMap||{};const n=Qf(e,t),i=this._listenerMap[n];if(void 0!==i){this.state[e].splice(i,1),delete this._listenerMap[n];r.keys(this._listenerMap).forEach(t=>{(function(e){return e.split(":")[0]})(t)===e&&this._listenerMap[t]>i&&this._listenerMap[t]--})}}remove(){this.state.added=!1,this._fireEvent(this.state.remove),this.state.mouseTarget&&(p(this.state.mouseTarget).off(),this.state.mouseTarget.remove(),this.state.mouseTarget=null)}cursor(){return this.state.cursor}added(){return this.state.added}isHovering(){return this.state.isHovering}isMouseOver(){return this.state.isMouseOver}isDragging(){return this.state.isDragging}mouseTarget(){return this.state.mouseTarget}}function Qf(e,t){return e+":"+t}const Zf=function(e){const t=e.graphie.scalePoint(e.coord(0)),n=e.graphie.scalePoint(e.coord(1));return mp.polarDegFromCart(mp.subtract(n,t))[1]},Jf={draw:function(){this.draw()},pointsToFront:function(e){r.invoke(e.points,"toFront")}};Jf.standard=[Jf.draw,Jf.pointsToFront];const eg={draw:function(){this.draw()}};eg.standard=[eg.draw];const tg={basic:function(e){const t=this.graphie;let n=this.coord(0),i=this.coord(1);if(!this.state.visibleShape){const e={thickness:10};this.state.visibleShape=new Ef(t,n,i,e),this.state.visibleShape.attr(this.normalStyle()),this.state.visibleShape.toFront(),this.mouseTarget()&&this.mouseTarget().toFront()}const o=Zf(this);e.extendLine?(n=wf(t,n,360-o),i=wf(t,i,(540-o)%360)):e.extendRay&&(i=wf(t,i,360-o));const s=[this.state.visibleShape];this.mouseTarget()&&s.push(this.mouseTarget()),r.each(s,function(e){e.moveTo(n,i)})},arrows:function(e){null==this._arrows&&(this._arrows=[],e.extendLine?(this._arrows.push(new Cf(this.graphie,this.normalStyle())),this._arrows.push(new Cf(this.graphie,this.normalStyle()))):e.extendRay&&this._arrows.push(new Cf(this.graphie,this.normalStyle())));const t=Zf(this),n=[360-t,(540-t)%360];r.each(this._arrows,function(e,t){e.toCoordAtAngle(this.coord(t),n[t])},this)},highlight:function(e,t){e.isHovering&&!t.isHovering?e.visibleShape.animate(e.highlightStyle,50):!e.isHovering&&t.isHovering&&e.visibleShape.animate(e.normalStyle,50)}};tg.standard=[tg.basic,tg.arrows,tg.highlight];const ng={basic:function(){this.state.visibleShape&&this.state.visibleShape.remove()},arrows:function(){null!=this._arrows&&r.invoke(this._arrows,"remove"),this._arrows=null}};ng.standard=[ng.basic,ng.arrows];const rg={fixed:function(){return function(){return!1}},snap:function(e){return function(t,n){if(null===e)return!0;let r=mp.subtract(t,n);return e=e||this.graphie.snap,r=Rp.roundTo(r,e),mp.add(n,r)}},bound:function(e,t,n){return void 0===n&&(n=void 0===e?10:0),function(i,o){const s=this.graphie,a=mp.subtract(i,o);e=e||s.range,void 0===t&&(t=s.snap);let l=s.unscalePoint([n,s.ypixels-n]),c=s.unscalePoint([s.xpixels-n,n]);t&&(l=Rp.ceilTo(l,t),c=Rp.floorTo(c,t));const u=r.map(this.coords(),function(e,t){const n=mp.subtract(c,e);return[mp.subtract(l,e),n]}),d=r.reduce(u,function(e,t){const n=t[0],r=t[1];return[Math.max(n[0],Math.min(r[0],e[0])),Math.max(n[1],Math.min(r[1],e[1]))]},a);return mp.add(o,d)}},standard:null},ig={updatePoints:function(e,t){const n=mp.subtract(e,t);r.each(this.state.points,function(e){e.setCoord(mp.add(e.coord(),n))})},standard:null},og={add:Jf,modify:eg,draw:tg,remove:ng,onMoveStart:{standard:null},constraints:rg,onMove:ig,onMoveEnd:{standard:null}},sg=nf.assert,ag=nf.normalizeOptions,lg={points:null,static:!1,cursor:"move",normalStyle:null,highlightStyle:null,extendLine:!1,extendRay:!1},cg={visibleShape:null,mouseTarget:null},ug=function(e,t,n){sg(null!=e),sg(null!=n),r.extend(this,{graphie:e,movable:t,state:{id:r.uniqueId("movableLine")}}),this.modify(r.extend({},cg,n))};r.extend(ug,og),nf.createGettersFor(ug,r.extend({},lg,cg)),nf.addMovableHelperMethodsTo(ug),r.extend(ug.prototype,{cloneState:function(){return r.extend(this.movable.cloneState(),{coords:this.coords()},this.state)},_createDefaultState:function(){return r.extend({id:this.state.id},ag(w(og,"standard")),lg)},modify:function(e){this.update(r.extend(this._createDefaultState(),e))},update:function(e){const t=this,n=this.graphie,i=t.state=r.extend(t.state,ag(e)),o=i.static?af.DYNAMIC:af.INTERACTIVE;if(i.normalStyle=r.extend({stroke:o,"stroke-width":2},i.normalStyle),i.highlightStyle=r.extend({stroke:af.INTERACTING,"stroke-width":3},i.highlightStyle),!i.static&&!i.mouseTarget){const e={thickness:30,mouselayer:!0,interactiveKindForTesting:"movable-line"};i.mouseTarget=new Ef(n,this.coord(0),this.coord(1),e),i.mouseTarget.attr({fill:"#000",opacity:0})}i.static&&i.mouseTarget&&(i.mouseTarget.remove(),i.mouseTarget=null),t.movable.modify(r.extend({},i,{mouseTarget:i.mouseTarget,add:null,modify:null,draw:t.draw.bind(t),remove:null,onMoveStart:function(){t._initialRefCoord=t.coord(0),t._prevRefCoord=t._initialRefCoord,t._totalDelta=[0,0],t._fireEvent(t.state.onMoveStart,t.coord(0),t.coord(0))},onMove:function(e,n){const r=mp.subtract(e,n);t._totalDelta=mp.add(t._totalDelta,r);let i=mp.add(t._initialRefCoord,t._totalDelta);i=t._applyConstraints(i,t._prevRefCoord),!1!==i&&(t._fireEvent(t.state.onMove,i,t._prevRefCoord),t._prevRefCoord=i)},onMoveEnd:function(){t._fireEvent(t.state.onMoveEnd,t._prevRefCoord,t._initialRefCoord)}})),i.added||(t.prevState={},t._fireEvent(i.add,t.cloneState(),t.prevState),i.added=!0,r.invoke(i.points,"listen","onMove",i.id,t.draw.bind(t)),t.prevState=t.cloneState()),t._fireEvent(i.modify,t.cloneState(),t.prevState)},coords:function(){return r.invoke(this.state.points,"coord")},point:function(e){return this.state.points[e]},coord:function(e){return this.point(e).coord()},remove:function(){this.state.added=!1,this._fireEvent(this.state.remove),this.points&&r.invoke(this.points,"unlisten","onMove",this.state.id),this.movable&&this.movable.remove()},toBack:function(){this.movable.toBack(),this.state.visibleShape&&this.state.visibleShape.toBack()},toFront:function(){this.state.visibleShape&&this.state.visibleShape.toFront(),this.movable.toFront()},isHovering:function(){return this.movable.isHovering()},isDragging:function(){return this.movable.isDragging()},mouseTarget:function(){return this.movable.mouseTarget()}});const dg=({path:t,width:n,height:r,style:i={},title:o})=>e.jsxs("svg",{role:"img","aria-hidden":!o,style:{verticalAlign:"middle",...i},width:n/r+"em",height:"1em",viewBox:`0 0 ${n} ${r}`,children:[!!o&&e.jsx("title",{children:o}),e.jsx("path",{d:t,fill:"currentColor"})]}),hg={path:"M8.70710678,12.2928932 C8.31658249,11.9023689 7.68341751,11.9023689 7.29289322,12.2928932 C6.90236893,12.6834175 6.90236893,13.3165825 7.29289322,13.7071068 L9.82842712,16.2426407 C10.2207367,16.6349502 10.8574274,16.6328935 11.2471942,16.2380576 L16.7116603,10.7025237 C17.0996535,10.3094846 17.0955629,9.67633279 16.7025237,9.28833966 C16.3094846,8.90034653 15.6763328,8.90443714 15.2883397,9.29747629 L10.5309507,14.1167372 L8.70710678,12.2928932 Z",width:24,height:24},pg={path:"M99.669 13.048q0 3.36-2.352 5.712l-41.664 41.664q-2.408 2.408-5.88 2.408t-5.712-2.408l-41.664-41.664q-2.408-2.24-2.408-5.712t2.408-5.88l4.76-4.816q2.52-2.352 5.88-2.352t5.656 2.352l31.136 31.136 31.08-31.136q2.352-2.352 5.712-2.352t5.88 2.352l4.816 4.816q2.352 2.52 2.352 5.88z",width:100,height:63.034},fg={path:"M100.035 50.046q.057 13.623-6.669 25.137t-18.24 18.183-25.08 6.669-25.137-6.726q-11.514-6.726-18.183-18.183-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.669 25.137z",width:100,height:100},gg={path:"M50.046 8.322q-8.493 0-16.188 3.306-15.561 6.669-22.173 22.23-3.363 7.695-3.363 16.188t3.306 16.188 8.949 13.281q5.586 5.586 13.281 8.892t16.188 3.306 16.188-3.306 13.281-8.892 8.892-13.281 3.306-16.188-3.306-16.188-8.892-13.281-13.281-8.949q-7.695-3.306-16.188-3.306zm0 91.713q-13.623 0-25.137-6.726t-18.183-18.183q-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.726 25.137-6.726 25.137-18.24 18.126q-11.514 6.726-25.08 6.726z",width:100,height:99.944},mg={path:"M37.964 76.048q-2.576 0-4.368-1.792l-31.864-31.864q-1.792-1.792-1.792-4.368t1.792-4.368l8.736-8.68q1.792-1.792 4.368-1.792t4.312 1.792l18.816 18.872 42-42.056q1.792-1.792 4.368-1.792t4.312 1.792l8.736 8.736q1.792 1.792 1.792 4.368t-1.792 4.312l-55.048 55.048q-1.792 1.792-4.368 1.792z",width:100,height:76.637},vg={path:"M100.464 80.808q0 3.404-2.368 5.772l-11.47 11.544q-2.368 2.368-5.772 2.368t-5.698-2.368l-24.864-24.864-24.864 24.864q-2.368 2.368-5.772 2.368t-5.772-2.368l-11.47-11.544q-2.368-2.368-2.368-5.772t2.368-5.698l24.864-24.864-24.864-24.864q-2.368-2.368-2.368-5.772t2.368-5.772l11.47-11.47q2.368-2.368 5.772-2.368t5.772 2.368l24.864 24.864 24.864-24.864q2.294-2.368 5.698-2.368t5.772 2.368l11.47 11.47q2.368 2.368 2.368 5.772t-2.368 5.772l-24.864 24.864 24.864 24.864q2.368 2.294 2.368 5.698z",width:100,height:100},yg={path:"M15.1052249,9.55978547 L22.0028147,9.55978545 C23.6568673,9.55978545 23.9349557,10.3753626 22.6181351,11.3858845 L16.9943688,15.7015366 L19.2518801,22.8294455 C19.7526645,24.4106317 19.0984455,24.8825885 17.769353,23.8673293 L12.0490577,19.4977438 L6.5116497,23.8422153 C5.20921411,24.8640642 4.53299569,24.4067544 5.00266927,22.8160582 L7.10332364,15.7015366 L1.42794544,11.3634306 C0.110226041,10.3562014 0.383967283,9.54239221 2.0409646,9.54574013 L8.9924676,9.55978547 L11.1485117,2.72669438 C11.6458693,1.15043244 12.4548928,1.15900049 12.9494787,2.72669438 L15.1052249,9.55978547 Z",width:24,height:24},xg={path:"M3.74890556,17.9799506 C2.19251241,16.1970909 1.10103636,13.4971457 1.13090903,11.1491783 C1.17160478,7.95052637 4.01704076,0.865059407 11.7028044,0.865059407 C19.388568,0.865059407 22.3026521,7.35203035 22.3026521,11.5879453 C22.3026521,15.8238603 19.386629,20.5574509 13.6832464,21.7131548 L13.6757539,17.3722171 C17.0812986,16.2190517 18.331158,14.1944123 18.3311578,11.5879451 C18.3311574,8.16554692 15.6664205,5.03476549 11.7028048,5.20494205 C7.73918903,5.37511861 5.59244567,8.66930079 5.59244567,11.1491783 C5.59244567,12.9090077 6.11128139,14.1753512 6.93640437,15.3053215 L8.14052356,14.2949456 C8.98559348,13.5858477 9.6994861,13.9070448 9.73489556,15.0076413 L9.91284941,20.5388014 C9.94832683,21.6415103 9.09967118,22.3514475 8.02194403,22.1254594 L2.60571602,20.9897332 C1.5259204,20.7633114 1.34338662,19.9984207 2.18070755,19.295825 L3.74890556,17.9799506 Z",width:23,height:23},bg={path:"M31.293 37.506q2.052 0 2.052 2.109l0 37.506q0 1.995-2.052 2.109l-4.218 0q-.912-.057-1.482-.627t-.57-1.482l0-37.506q0-2.109 2.052-2.109l4.218 0zm18.753 2.109l0 37.506q0 .912-.57 1.482t-1.539.627l-4.161 0q-1.995 0-2.109-2.109l0-37.506q.057-.912.627-1.482t1.482-.627l4.161 0q.969.057 1.539.627t.57 1.482zm14.592-2.109q2.052 0 2.052 2.109l0 37.506q0 1.995-2.052 2.109l-4.161 0q-.969-.057-1.539-.627t-.57-1.482l0-37.506q0-2.109 2.109-2.109l4.161 0zm10.431 49.248l0-61.731l-58.368 0l0 61.731q.057 2.679.969 3.819t1.083 1.14l54.207 0q.171 0 1.14-1.083t.969-3.876zm-43.776-70.11l29.184 0l-3.135-7.581q-.456-.57-1.14-.741l-20.634 0q-.627.114-1.083.741zm-31.293 2.109q0-1.995 2.109-2.109l20.121 0l4.56-10.83q.969-2.394 3.477-4.104 2.565-1.71 5.187-1.71l20.805 0q2.622 0 5.187 1.71t3.477 4.104l4.56 10.83l20.178 0q.912.057 1.482.627t.57 1.482l0 4.161q0 1.995-2.052 2.109l-6.27 0l0 61.731q0 5.415-3.078 9.348t-7.353 3.933l-54.207 0q-4.275 0-7.353-3.819t-3.078-9.177l0-62.016l-6.213 0q-.969 0-1.539-.57t-.57-1.539l0-4.161z",width:91.681,height:100},wg={path:"M8,13 L16,13 C16.5522847,13 17,12.5522847 17,12 C17,11.4477153 16.5522847,11 16,11 L8,11 C7.44771525,11 7,11.4477153 7,12 C7,12.5522847 7.44771525,13 8,13 Z",width:24,height:24},_g={constrain:function(){this.constrain()}};_g.standard=[_g.constrain];const Sg={draw:function(){this.draw()}};Sg.standard=[Sg.draw];const kg={basic:function(e,t){const n=this.graphie;if(!this.state.visibleShape){const t=[this.pointSize()/n.scale[0],this.pointSize()/n.scale[1]],i={maxScale:Math.max(this.highlightStyle().scale,this.normalStyle().scale),padding:10,shadow:e.shadow};this.state.visibleShape=new Pf(n,this.coord(),t,i),this.state.visibleShape.attr(r.omit(this.normalStyle(),"scale")),this.state.visibleShape.toFront(),this.mouseTarget()&&this.mouseTarget().toFront()}e.normalStyle===t.normalStyle||r.isEqual(e.normalStyle,t.normalStyle)||this.state.visibleShape.attr(this.normalStyle()),this.state.visibleShape.moveTo(this.coord()),this.mouseTarget()&&this.mouseTarget().moveTo(this.coord())},highlight:function(e,t){e.isHovering&&!t.isHovering?e.visibleShape.animate(this.highlightStyle(),50):!e.isHovering&&t.isHovering&&e.visibleShape.animate(this.normalStyle(),50)}};kg.standard=[kg.basic,kg.highlight];const Cg={basic:function(){this.state.visibleShape&&(this.state.visibleShape.remove(),this.state.visibleShape=null)}};Cg.standard=Cg.basic;const Mg={fixed:function(){return function(){return!1}},snap:function(e){return function(t){return null===e||Rp.roundTo(t,e||this.graphie.snap)}},bound:function(e,t,n){const r=void 0===n?void 0===e?10:0:n;return function(n,i,o){const s=this.graphie;e=e||s.range,void 0===t&&(t=s.snap);let a=s.unscalePoint([r,s.ypixels-r]),l=s.unscalePoint([s.xpixels-r,r]);if(t&&(a=Rp.ceilTo(a,t),l=Rp.floorTo(l,t)),o&&o.onOutOfBounds)return(n[0]>l[0]||n[0]<a[0]||n[1]>l[1]||n[1]<a[1])&&(o.onSkipRemaining(),o.onOutOfBounds()),n;return[Math.max(a[0],Math.min(l[0],n[0])),Math.max(a[1],Math.min(l[1],n[1]))]}},standard:null},Ig={add:_g,modify:Sg,draw:kg,remove:Cg,onMoveStart:{standard:null},constraints:Mg,onMove:{standard:null},onMoveEnd:{standard:null},onClick:{standard:null}},Pg=nf.assert,Tg=nf.normalizeOptions,{processMath:Eg}=hf,jg={coord:[0,0],pointSize:4,static:!1,cursor:"move",normalStyle:null,highlightStyle:null,shadow:!1,tooltip:!1},Rg={added:!1,hasMoved:!1,visibleShape:null,outOfBounds:!1,mouseTarget:null,touchOffset:null},Ag=[];let Ng=class{graphie;movable;state;prevState;_tooltip;_listenerMap={};constructor(e,t,n){this.graphie=e,this.movable=t,this.state={id:r.uniqueId("movablePoint")},this.modify({...Rg,...n})}modify(e){this.update(r.extend(this._createDefaultState(),e))}_createDefaultState(){return{id:this.state.id,...Tg(w(Ig,"standard")),...jg}}cloneState(){return{...this.movable.cloneState(),...this.state}}update(t){const n=this,i=n.graphie,o=r.extend(n.state,Tg(t));Pg(Rp.is(o.coord));const s=o.static?af.DYNAMIC:af.INTERACTIVE;if(o.normalStyle=r.extend({fill:s,stroke:s,scale:1},o.normalStyle),o.highlightStyle=r.extend({fill:af.INTERACTING,stroke:af.INTERACTING,scale:2},o.highlightStyle),!o.static&&!o.mouseTarget){const e=n.state.coord,t=i.unscaleVector(24),r={mouselayer:!0,padding:0,interactiveKindForTesting:"movable-point"};o.mouseTarget=new Pf(i,e,t,r),o.mouseTarget.attr({fill:"#000",opacity:0})}const a=()=>{this._showTooltip(t=>{df(e.jsx("span",{style:{fontSize:"2em"},children:e.jsx(dg,{...bg,style:{position:"static",color:af.INTERACTIVE,marginLeft:9,marginRight:9}})}),t)})};let l=o.coord;n.movable.modify(r.extend({},o,{add:null,modify:null,draw:n.draw.bind(n),remove:null,onMoveStart:e=>{if(o.hasMoved=!1,l=o.coord,null==o.touchOffset){const t=!("ontouchstart"in window);o.touchOffset=t?[0,0]:mp.subtract(l,e)}const t=o.visibleShape.wrapper;if(o.shadow){const e="none";t.style.filter=e}if(o.showHairlines&&o.showHairlines(o.coord),Ag.forEach(e=>e()),o.tooltip&&(o.xOnlyTooltip?this._showTooltip(`${o.coord[0]}`):this._showTooltip(`(${o.coord[0]}, ${o.coord[1]})`),o.shadow)){const e="drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.5))";t.getElementsByClassName("tooltip-content")[0].style.filter=e}n._fireEvent(o.onMoveStart,l,l),n.draw()},onMove:(e,t)=>{const r=mp.add(e,o.touchOffset);n.moveTo(r),o.showHairlines&&(this.state.outOfBounds?o.hideHairlines():o.showHairlines(o.coord)),o.tooltip&&(this.state.outOfBounds||(o.xOnlyTooltip?this._showTooltip(`${o.coord[0]}`):this._showTooltip(`(${o.coord[0]}, ${o.coord[1]})`))),o.onRemove&&this.state.outOfBounds&&a()},onMoveEnd:()=>{n.isHovering()&&!o.hasMoved&&n._fireEvent(o.onClick,o.coord,l);const e=o.visibleShape.wrapper;if(o.shadow){const t="drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.5))";e.style.filter=t}if(o.hideHairlines&&o.hideHairlines(),o.hasMoved)this._hideTooltip();else if(o.onRemove){a();e.getElementsByClassName("tooltip-content")[0].style.filter="none",this._tooltip.firstChild.addEventListener("touchstart",e=>{e.stopPropagation()},!0),this._tooltip.firstChild.addEventListener("touchend",e=>{o.onRemove(),e.stopPropagation()},!0)}else o.tooltip&&this._hideTooltip();o.outOfBounds&&o.onRemove(),n._fireEvent(o.onMoveEnd,o.coord,l),o.hasMoved=!1,o.touchOffset=null,n.draw()}})),o.added||(n.prevState={},n._fireEvent(o.add,n.cloneState(),n.prevState),o.added=!0,n.prevState=n.cloneState()),n._fireEvent(o.modify,n.cloneState(),n.prevState)}draw(){const e=this.cloneState();this._fireEvent(this.state.draw,e,this.prevState),this.prevState=e}constrain(){const e=this._applyConstraints(this.coord(),this.coord());return Rp.is(e)&&this.setCoord(e),!1!==e}_fireEvent(e,...t){for(const n of e)n.call(this,...t)}_applyConstraints(e,t,n){let r=!1;return this.state.constraints.reduce((e,i)=>{if(!1===e)return!1;if(r)return e;const o=i.call(this,e,t,{onSkipRemaining:()=>{r=!0},...n});if(!1===o)return!1;if(Rp.is(o,2))return o;if(!0===o||null==o)return e;throw new d("Constraint returned invalid result: "+o,h.Internal)},e)}_showTooltip(e){this._tooltip||(this._tooltip=document.createElement("div"),this._tooltip.className="tooltip-content",this.state.visibleShape.wrapper.className="tooltip",this.state.visibleShape.wrapper.appendChild(this._tooltip),Ag.push(()=>{this.state.added&&this._hideTooltip()})),this._tooltip.firstChild&&this._tooltip.removeChild(this._tooltip.firstChild),this.state.visibleShape.wrapper.className="tooltip visible",this._tooltip.appendChild(document.createElement("span")),"string"==typeof e?Eg(this._tooltip.firstChild,e,!1):"function"==typeof e?e(this._tooltip.firstChild):this._tooltip.firstChild.appendChild(e)}_hideTooltip(){this._tooltip&&(this.state.visibleShape.wrapper.className="tooltip")}coord(){return this.state.coord}setCoord(e){Pg(Rp.is(e,2)),this.state.coord=r.clone(e),this.draw()}setCoordConstrained(e){Pg(Rp.is(e,2));const t=this._applyConstraints(e,this.coord());!1!==t&&(this.state.coord=r.clone(t),this.draw())}listen(e,t,n){this._listenerMap=this._listenerMap||{};const r=Lg(e,t),i=this._listenerMap[r]=this._listenerMap[r]||this.state[e].length;this.state[e][i]=n}unlisten(e,t){this._listenerMap=this._listenerMap||{};const n=Lg(e,t),i=this._listenerMap[n];if(void 0!==i){this.state[e].splice(i,1),delete this._listenerMap[n];const t=r.keys(this._listenerMap);r.each(t,t=>{(function(e){return e.split(":")[0]})(t)===e&&this._listenerMap[t]>i&&this._listenerMap[t]--},this)}}grab(e){this.state.touchOffset=[0,0],this.movable.grab(e),this.moveTo(e)}moveTo(e){const t=this.state;this.state.outOfBounds=!1;const n=this._applyConstraints(e,t.coord,t.onRemove?{onOutOfBounds:()=>{this.state.outOfBounds=!0},onSkipRemaining:()=>{}}:{onSkipRemaining:()=>{}});if(!1!==n&&(Rp.is(n)&&(e=n),!Rp.equal(e,t.coord))){const n=t.coord;t.coord=e,t.hasMoved=!0,this._fireEvent(t.onMove,t.coord,n),this.draw()}}remove(){this.state.added=!1,this._fireEvent(this.state.remove),this.movable&&this.movable.remove(),this.state.mouseTarget=null}pointSize(){return this.state.pointSize}static(){return this.state.static}cursor(){return this.state.cursor}normalStyle(){return this.state.normalStyle}highlightStyle(){return this.state.highlightStyle}shadow(){return this.state.shadow}tooltip(){return this.state.tooltip}added(){return this.state.added}hasMoved(){return this.state.hasMoved}visibleShape(){return this.state.visibleShape}outOfBounds(){return this.state.outOfBounds}mouseTarget(){return this.state.mouseTarget}touchOffset(){return this.state.touchOffset}isHovering(){return this.movable.isHovering()}isDragging(){return this.movable.isDragging()}toBack(){this.movable.toBack(),this.state.visibleShape&&this.state.visibleShape.toBack()}toFront(){this.state.visibleShape&&this.state.visibleShape.toFront(),this.movable.toFront()}static add=Ig.add;static modify=Ig.modify;static draw=Ig.draw;static remove=Ig.remove;static onMoveStart=Ig.onMoveStart;static constraints=Ig.constraints;static onMove=Ig.onMove;static onMoveEnd=Ig.onMoveEnd;static onClick=Ig.onClick};function Lg(e,t){return e+":"+t}function Og(e){const t=r.zip(e,e.slice(1).concat(e.slice(0,1))),n=r.map(t,function(e){const t=e[0],n=e[1];return(n[0]-t[0])*(n[1]+t[1])});return i=n,r.reduce(i,function(e,t){return e+t},0)>0;var i}const Dg={constrain:function(){this.constrain()},pointsToFront:function(e){r.invoke(e.points,"toFront")}};Dg.standard=[Dg.constrain,Dg.pointsToFront];const Fg={draw:function(){this.draw()}};Fg.standard=[Fg.draw];const zg={basic:function(e,t){const n=this.graphie,i=this.path(e);this.state.visibleShape||(this.state.visibleShape=n.raphael.path(i),this.state.visibleShape.attr(this.normalStyle())),e.normalStyle===t.normalStyle||r.isEqual(e.normalStyle,t.normalStyle)||this.state.visibleShape.attr(this.normalStyle()),this.state.visibleShape.attr({path:i}),this.mouseTarget()&&this.mouseTarget().attr({path:i})},labels:function(e,t){const n=this.graphie,i=this,o=r.invoke(e.points,"coord"),s=Og(o),a=o.length;null!=i.state._labelCache&&r.invoke(i.state._labelCache,"remove"),i.state._labelCache=[],(e.angleLabels.length||e.showRightAngleMarkers.length)&&(null==i.state._labeledAngles&&(i.state._labeledAngles=r.times(Math.max(e.angleLabels.length,e.showRightAngleMarkers.length),function(){return n.label([0,0],"","center",e.labelStyle)})),r.each(i.state._labeledAngles,function(t,r){i.state._labelCache.push(n.labelAngle({point1:o[(r-1+a)%a],vertex:o[r],point3:o[(r+1)%a],label:t,text:e.angleLabels[r],showRightAngleMarker:e.showRightAngleMarkers[r],numArcs:e.numArcs[r],clockwise:s,style:e.labelStyle}))})),e.sideLabels.length&&(null==i.state._labeledSides&&(i.state._labeledSides=r.map(e.sideLabels,function(t){return n.label([0,0],"","center",e.labelStyle)})),r.each(i.state._labeledSides,function(t,r){i.state._labelCache.push(n.labelSide({point1:o[r],point2:o[(r+1)%a],label:t,text:e.sideLabels[r],numArrows:e.numArrows[r],numTicks:e.numTicks[r],clockwise:s,style:e.labelStyle}))})),e.vertexLabels.length&&(null==i.state._labeledVertices&&(i.state._labeledVertices=r.map(e.vertexLabels,function(t){return n.label([0,0],"","center",e.labelStyle)})),r.each(i.state._labeledVertices,function(t,r){i.state._labelCache.push(n.labelVertex({point1:o[(r-1+a)%a],vertex:o[r],point3:o[(r+1)%a],label:t,text:e.vertexLabels[r],clockwise:s,style:e.labelStyle}))})),i.state._labelCache=r.flatten(i.state._labelCache)},highlight:function(e,t){e.isHovering&&!t.isHovering?e.visibleShape.animate(this.highlightStyle(),50):!e.isHovering&&t.isHovering&&e.visibleShape.animate(this.normalStyle(),50)}};zg.standard=[zg.basic,zg.labels,zg.highlight];const Bg={basic:function(){this.state.visibleShape&&this.state.visibleShape.remove()},labels:function(){const e=[this.state._labeledSides,this.state._labeledVertices,this.state._labeledAngles,this.state._labelCache];r.each(e,function(e){null!=e&&e.length&&r.invoke(e,"remove")})}};Bg.standard=[Bg.basic,Bg.labels];const $g={fixed:function(){return function(){return!1}},snap:function(e){return function(t){return null===e||(e=e||this.graphie.snap,Rp.roundTo(t,e))}},bound:function(e,t,n){return void 0===n&&(n=void 0===e?10:0),function(i,o){const s=this.graphie,a=mp.subtract(i,o);e=e||s.range,void 0===t&&(t=s.snap);let l=s.unscalePoint([n,s.ypixels-n]),c=s.unscalePoint([s.xpixels-n,n]);t&&(l=Rp.ceilTo(l,t),c=Rp.floorTo(c,t));const u=r.map(this.coords(),function(e,t){const n=mp.subtract(c,e);return[mp.subtract(l,e),n]}),d=r.reduce(u,function(e,t){const n=t[0],r=t[1];return[Math.max(n[0],Math.min(r[0],e[0])),Math.max(n[1],Math.min(r[1],e[1]))]},a);return mp.add(o,d)}},standard:null},Wg={updatePoints:function(e,t){const n=mp.subtract(e,t);r.each(this.state.points,function(e){e.setCoord(mp.add(e.coord(),n))})},standard:null},Ug={add:Dg,modify:Fg,draw:zg,remove:Bg,onMoveStart:{standard:null},constraints:$g,onMove:Wg,onMoveEnd:{standard:null},onClick:{standard:null}},Hg=nf.assert,qg=nf.normalizeOptions,Vg={points:null,angleLabels:[],showRightAngleMarkers:[],sideLabels:[],vertexLabels:[],numArcs:[],numArrows:[],numTicks:[],closed:!0,static:!1,cursor:"move",normalStyle:null,highlightStyle:null,labelStyle:null},Gg={added:!1,hasMoved:!1,visibleShape:null,mouseTarget:null},Yg=function(e,t,n){Hg(null!=e),Hg(null!=n),r.extend(this,{graphie:e,movable:t,state:{id:r.uniqueId("movablePolygon")}}),this.modify(r.extend({},Gg,n))};r.extend(Yg,Ug),nf.createGettersFor(Yg,r.extend({},Vg,Gg)),nf.addMovableHelperMethodsTo(Yg),r.extend(Yg.prototype,{cloneState:function(){return r.extend(this.movable.cloneState(),this.state)},_createDefaultState:function(){return r.extend({id:this.state.id},qg(w(Ug,"standard")),Vg)},modify:function(e){this.update(r.extend(this._createDefaultState(),e))},update:function(e){const t=this,n=t.graphie,i=r.extend(t.state,qg(e)),o=i.static?af.DYNAMIC:af.INTERACTIVE;i.normalStyle=r.extend({},i.normalStyle,{"stroke-width":2,"fill-opacity":0,fill:o,stroke:o},e.normalStyle),i.highlightStyle=r.extend({},{stroke:af.INTERACTING,"stroke-width":2,fill:af.INTERACTING,"fill-opacity":.05},i.highlightStyle),i.labelStyle=r.extend({},{stroke:af.DYNAMIC,"stroke-width":1,color:af.DYNAMIC},i.labelStyle),i.static||i.mouseTarget||(i.mouseTarget=n.mouselayer.path(this.path()),i.mouseTarget.attr({fill:"#000",opacity:0,cursor:"move"})),t.movable.modify(r.extend({},i,{modify:null,draw:t.draw.bind(t),remove:null,onMoveStart:function(){t._initialRefCoord=t.coord(0),t._prevRefCoord=t._initialRefCoord,t._totalDelta=[0,0],t._fireEvent(t.state.onMoveStart,t.coord(0),t.coord(0))},onMove:function(e,n){const r=mp.subtract(e,n);t._totalDelta=mp.add(t._totalDelta,r);let i=mp.add(t._initialRefCoord,t._totalDelta);i=t._applyConstraints(i,t._prevRefCoord),!1!==i&&(t._fireEvent(t.state.onMove,i,t._prevRefCoord),t._prevRefCoord=i)},onMoveEnd:function(){t._fireEvent(t.state.onMoveEnd,t._prevRefCoord,t._initialRefCoord)}})),r.invoke(i.points,"listen","onMove",i.id,t.draw.bind(t)),i.added||(t.prevState={},t._fireEvent(i.add,t.cloneState(),t.prevState),i.added=!0,t.prevState=t.cloneState()),t._fireEvent(i.modify,t.cloneState(),t.prevState)},path:function(e){const t=this.graphie;e=e||this.state;let n=r.map(e.points,function(e){return t.scalePoint(e.coord())});return e.closed?n.push(!0):n=n.concat(r.clone(n).reverse()),bf.unscaledSvgPath(n)},coords:function(){return r.invoke(this.state.points,"coord")},point:function(e){return this.state.points[e]},coord:function(e){return this.point(e).coord()},remove:function(){this.state.added=!1,this._fireEvent(this.state.remove),this.state.points&&r.invoke(this.state.points,"unlisten","onMove",this.state.id),this.movable&&this.movable.remove(),this.state.mouseTarget=null},constrain:function(){if(null==this.points||0===this.points.length)return;const e=this.coord(0),t=this._applyConstraints(e,e);!1!==t&&this._fireEvent(this.state.onMove,t,e)},normalStyle:function(){return r.clone(this.state.normalStyle)},highlightStyle:function(){return r.clone(this.state.highlightStyle)},toBack:function(){this.movable.toBack(),this.state.visibleShape&&this.state.visibleShape.toBack()},toFront:function(){this.state.visibleShape&&this.state.visibleShape.toFront(),this.movable.toFront()},isHovering:function(){return this.movable.isHovering()},isDragging:function(){return this.movable.isDragging()},mouseTarget:function(){return this.movable.mouseTarget()}});const Xg={MovablePoint:Ng,addMovablePoint:function(e,t){const n=new Kf(e,{});return new Ng(e,n,t)},MovableLine:ug,addMovableLine:function(e,t){const n=new Kf(e,{});return new ug(e,n,t)},MovablePolygon:Yg,addMovablePolygon:function(e,t){const n=new Kf(e,{});return new Yg(e,n,t)},addMaybeMobileMovablePoint:function(e,t){const n=e.props.apiOptions.isMobile,r=n?{stroke:"#ffffff","stroke-width":3,fill:af.INTERACTIVE}:{stroke:af.INTERACTIVE,fill:af.INTERACTIVE},i=Object.assign(r,t.normalStyle),o=Object.assign(n?{...r,"stroke-width":0,scale:.75}:{},t.highlightStyle),s=Object.assign({normalStyle:i,highlightStyle:o,shadow:n,tooltip:n&&e.props.showTooltips,showHairlines:e.showHairlines,hideHairlines:e.hideHairlines},n?{pointSize:7}:{});return Xg.addMovablePoint(e.graphie,Object.assign(t,s))}},Kg=qf.createClass({displayName:"MovablePoint",movableProps:["children"],_getProps:function(){if(this.props.isMobile){const e=this.props.isMobile,t=e?{stroke:"#ffffff","stroke-width":3,fill:af.INTERACTIVE}:{stroke:af.INTERACTIVE,fill:af.INTERACTIVE},n=e?Object.assign(t,this.props.mobileStyleOverride||{}):Object.assign(t,this.props.normalStyle),r=e?{...t,"stroke-width":0,scale:.75}:this.props.highlightStyle,i=Object.assign({normalStyle:n,highlightStyle:r,shadow:e,tooltip:e&&this.props.showTooltips},e?{pointSize:7}:{});return Object.assign(this.props,i)}return this.props},add:function(e){this.point=Xg.addMovablePoint(e,this._getProps())},modify:function(){this.point.modify(this._getProps())},remove:function(){this.point.remove()},toFront:function(){this.point.toFront()},grab:function(e){this.point.grab(e)}});r.extend(Kg,Xg.MovablePoint);const Qg=qf.createClass({displayName:"MovableLine",movableProps:["children"],add:function(e){const t=r.pluck(this.props.children,"point"),n=r.extend({},this.props,{points:t});this.line=Xg.addMovableLine(e,n)},modify:function(){const e=r.pluck(this.props.children,"point"),t=r.extend({},this.props,{points:e});this.line.modify(t)},remove:function(){this.line.remove()},toFront:function(){this.line.toFront()}});r.extend(Qg,Xg.MovableLine);const Zg=qf.createSimpleClass((e,t)=>{let n=t.coord;t.unscaled&&(n=e.unscalePoint(n));let r=null;return zd().JIPT.useJIPT?(r=e.label(n,t.text,t.direction,!1,t.style),zd().graphieMovablesJiptLabels.addLabel(r,t.tex)):r=e.label(n,t.text,t.direction,t.tex,t.style),r}),Jg=qf.createClass({displayName:"Line",movableProps:["children"],add:function(e){const t=this.props;this.graphie=e,this.line=this.graphie.line(t.start,t.end,t.style)},modify:function(){const e=this.props,t=this.graphie.svgPath([e.start,e.end]);this.line.attr(r.extend({},e.style,{path:t}))},remove:function(){this.line.remove()},toFront:function(){this.line.toFront()}}),em=qf.createClass({displayName:"Parabola",movableProps:["children"],add:function(e){const t=this.props;this.graphie=e,this.parabola=this.graphie.parabola(t.a,t.b,t.c,t.style)},modify:function(){const e=this.props,t=this.graphie.svgParabolaPath(e.a,e.b,e.c);this.parabola.attr(r.extend({},e.style,{path:t}))},remove:function(){this.parabola.remove()},toFront:function(){this.parabola.toFront()}}),tm=qf.createClass({displayName:"Sinusoid",movableProps:["children"],add:function(e){const t=this.props;this.graphie=e,this.sinusoid=this.graphie.sinusoid(t.a,t.b,t.c,t.d,t.style)},modify:function(){const e=this.props,t=this.graphie.svgSinusoidPath(e.a,e.b,e.c,e.d);this.sinusoid.attr(r.extend({},e.style,{path:t}))},remove:function(){this.sinusoid.remove()},toFront:function(){this.sinusoid.toFront()}}),nm=qf.createSimpleClass((e,t)=>e.plot(t.fn,t.range,t.style)),rm=qf.createSimpleClass((e,t)=>e.plotParametric(t.fn,t.range,t.style)),im=qf.createSimpleClass((e,t)=>e.ellipse(t.coord,e.unscaleVector([4,4]),{fill:t.color||af.BLACK,stroke:t.color||af.BLACK})),om=qf.createClass({displayName:"Path",movableProps:["children"],add:function(e){const t=this.props;this.graphie=e,this.path=this.graphie.path(t.coords,t.style)},modify:function(){const e=this.props,t=this.graphie.svgPath(e.coords);this.path.attr({path:t})},remove:function(){this.path.remove()},toFront:function(){this.path.toFront()}}),sm={Arc:qf.createSimpleClass((e,t)=>{let n=t.center,r=t.radius;return t.unscaled&&(n=e.unscalePoint(n),r=e.unscaleVector(r)),e.arc(n,r,t.startAngle,t.endAngle,t.sector,t.style)}),Circle:qf.createSimpleClass((e,t)=>e.circle(t.center,t.radius,t.style)),Label:Zg,Line:Jg,MovableLine:Qg,MovablePoint:Kg,Parabola:em,Path:om,Plot:nm,PlotParametric:rm,Point:im,Sinusoid:tm,Rect:qf.createSimpleClass((e,t)=>e.rect(t.x,t.y,t.width,t.height,t.style))},am=qf.GraphieMovable,lm=bf.createGraphie,{nestedMap:cm}=Jd,{assert:um}=nf;class dm extends wt.Component{graphieDivRef=wt.createRef();_graphie=new gf(document.createElement("div"));_movables={};movables={};static defaultProps={range:[[-10,10],[-10,10]],options:{},responsive:!1,addMouseLayer:!0};componentDidMount(){this._setupGraphie(),this._updateMovables()}shouldComponentUpdate(e){return!r.isEqual(this.props,e)}componentDidUpdate(e){this.props.setup!==e.setup&&th("<Graphie> was given a new setup function. This is a bad idea; please refactor your code to give the same setup function reference to <Graphie> on every render.",h.Internal),m(this.props.options,e.options)&&m(this.props.box,e.box)&&m(this.props.range,e.range)||this._setupGraphie(),this._updateMovables()}getGraphie=()=>this._graphie;_range=()=>{const e=e=>e[0]>=e[1]?[-10,10]:e;return[e(this.props.range[0]),e(this.props.range[1])]};_box=()=>{const e=e=>e>0?e:340;return[e(this.props.box[0]),e(this.props.box[1])]};_scale=()=>{const e=this._box(),t=this._range();return e.map((e,n)=>e/(t[n][1]-t[n][0]))};_setupGraphie=()=>{this._removeMovables();const e=this.graphieDivRef.current;if(null==e||e instanceof Text)throw new Error("No graphie container div found");e.innerHTML="";const t=this._graphie=lm(e);t.init({range:this._range(),scale:this._scale(),isMobile:this.props.isMobile}),this.props.addMouseLayer&&t.addMouseLayer({onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,onMouseMove:this.props.onMouseMove,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable}),t.snap=this.props.options.snapStep||[1,1],this.props.responsive&&(p(e).css({width:"100%",height:"100%"}),t.raphael.setSize("100%","100%")),this.props.setup(t,r.extend({range:this._range(),scale:this._scale()},this.props.options))};_removeMovables=()=>{r.invoke(this._movables,"remove"),this._movables={}};_renderMovables=(e,t)=>{const n=t.graphie,i=t.oldMovables,o=t.newMovables,s=e=>{r.each(e.movableProps,n=>{e.props[n]=this._renderMovables(e.props[n],t)})};let a=!1;return cm(e,e=>{if(!e)return t.nextKey++,e;const r=new e.type(e.props);um(r instanceof am,"All children of a Graphie component must be Graphie movables");const l=e.key,c=null==l?"_no_id_"+t.nextKey:l;t.nextKey++;const u=e.ref;s(r);const d=i[c];if(d)if(r.constructor===d.constructor){d.props=r.props;"reordered"===d.modify(n)&&(a=!0),o[c]=d}else null==l&&th("Replacing a <Graphie> child with a child of a different type. Please add keys to your <Graphie> children",h.Internal),d.remove(),r.add(n),a=!0,o[c]=r;else r.add(n),a=!0,o[c]=r;return a&&o[c].toFront(),u&&(this.movables[u]=o[c]),o[c]})};_updateMovables=()=>{const e=this._graphie,t=this._movables,n={};this._movables=n,this.movables={},this._renderMovables(this.props.children,{nextKey:1,graphie:e,oldMovables:t,newMovables:n}),r.each(t,(e,t)=>{n[t]||e.remove()})};render(){return e.jsx("div",{className:"graphie-container",children:e.jsx("div",{className:"graphie",ref:this.graphieDivRef})})}}r.extend(dm,qf),r.extend(dm,sm);const hm="pending",pm="loading",fm="loaded",gm="failed";class mm extends wt.Component{img;constructor(e){super(e),this.state={status:e.src?pm:hm}}componentDidMount(){this.state.status===pm&&this.createLoader()}UNSAFE_componentWillReceiveProps(e){this.props.src!==e.src&&this.setState({status:e.src?pm:hm})}componentDidUpdate(e,t){this.state.status!==pm||this.img||this.createLoader(),t.status!==this.state.status&&this.props.onUpdate(this.state.status)}componentWillUnmount(){this.destroyLoader()}createLoader=()=>{this.destroyLoader(),this.img=new Image,this.img.onload=this.handleLoad,this.img.onerror=this.handleError,this.img.src=this.props.src};destroyLoader=()=>{this.img&&(this.img.onload=null,this.img.onerror=null,this.img=null)};handleLoad=e=>{this.destroyLoader(),this.setState({status:fm}),this.props.onLoad&&this.props.onLoad(e)};handleError=e=>{this.destroyLoader(),this.setState({status:gm}),this.props.onError&&this.props.onError(e)};renderImg=()=>{const{src:t,imgProps:n}=this.props;let r,i;null!=n.onClick&&(r=e=>{13!==e.keyCode&&32!==e.keyCode||n.onClick?.(e)},i=e=>{32===e.keyCode&&e.preventDefault()});const o=zd().staticUrl,s=null!==n.onClick?"button":"img";return e.jsx("img",{tabIndex:0,role:s,src:o(t),onKeyUp:r,onKeyDown:i,...n})};render(){switch(this.state.status){case fm:return this.renderImg();case gm:if(this.props.children)return this.props.children;break;default:if(this.props.preloader)return this.props.preloader()}return null}}function vm(e){return/\.(jpg|jpeg)$/i.test(e)}function ym(t){return e.jsx("span",{style:{top:0,left:0,width:"100%",height:"100%",position:"absolute",minWidth:"20px",display:"flex",justifyContent:"center",alignContent:"center"},children:e.jsx(_,{size:"medium"})})}class xm extends wt.Component{_isMounted;static defaultProps={constrainHeight:!1,onUpdate:()=>{},responsive:!0,src:"",scale:1,zoomToFullSizeOnMobile:!1,setAssetStatus:(e,t)=>{}};constructor(e){super(e),e.setAssetStatus(e.src,!1),this._isMounted=!1,this.state={imageLoaded:!1,imageDimensions:null,dataLoaded:!1,labelDataIsLocalized:!1,labels:[],labelsRendered:{},range:[[0,0],[0,0]]}}componentDidMount(){this._isMounted=!0,Jd.isLabeledSVG(this.props.src)&&this.loadResources()}UNSAFE_componentWillReceiveProps(e){this.props.src!==e.src&&this.setState({imageLoaded:!1,dataLoaded:!1})}shouldComponentUpdate(e,t){if(!r.isEqual(this.props,e))return!0;return this.isLoadedInState(this.state)!==this.isLoadedInState(t)}componentDidUpdate(e,t){const n=this.isLoadedInState(t),r=this.isLoadedInState(this.state);Jd.isLabeledSVG(this.props.src)&&!r&&this.loadResources(),!n&&r&&this.props.setAssetStatus(this.props.src,!0)}componentWillUnmount(){this._isMounted=!1}isLoadedInState(e){return Jd.isLabeledSVG(this.props.src)?e.imageLoaded&&e.dataLoaded:e.imageLoaded}loadResources(){lh(this.props.src,(e,t)=>{if(this._isMounted&&e.labels&&e.range){const n={};e.labels.forEach(e=>{n[e.content]=!1}),this.setState({dataLoaded:!0,labelDataIsLocalized:t,labelsRendered:n,labels:e.labels,range:e.range})}})}sizeProvided(){return null!=this.props.width&&null!=this.props.height}onImageLoad=()=>{this.sizeProvided()?this.setState({imageLoaded:!0}):Jd.getImageSize(this.props.src,(e,t)=>{this._isMounted&&this.setState({imageLoaded:!0,imageDimensions:[e,t]})})};setupGraphie=(e,t)=>{r.map(t.labels,t=>{const{JIPT:n}=zd();if(n.useJIPT&&this.state.labelDataIsLocalized){const n=e.label(t.coordinates,t.content,t.alignment,!1);zd().svgImageJiptLabels.addLabel(n,t.typesetAsMath)}else if(t.coordinates){const n=1!==this.props.scale?{"font-size":100*this.props.scale+"%"}:null,i=e.label(t.coordinates,t.content,t.alignment,t.typesetAsMath,n),o=i[0].style;let s=this._tryGetPixels(o.top),a=this._tryGetPixels(o.left);if(null===s||null===a){const e=i.position();s=e.top,a=e.left}const l=(this.props.height||0)*this.props.scale,c=(this.props.width||0)*this.props.scale;i.css({top:s/l*100+"%",left:a/c*100+"%"}),r.each(t.style,(e,t)=>{i.css(t,e)})}this.setState({labelsRendered:{...this.state.labelsRendered,[t.content]:!0}})})};_tryGetPixels(e){return(e=e||"").endsWith("px")&&parseFloat(e)||null}_handleZoomClick=e=>{(p(e.target).width()<this.props.width||this.props.zoomToFullSizeOnMobile)&&hh.handleZoomClick(e,this.props.zoomToFullSizeOnMobile),this.props.trackInteraction?.()};handleUpdate=e=>{this.props.onUpdate(),Jd.isLabeledSVG(this.props.src)||"loaded"!==e||this.setState({imageLoaded:!0})};render(){const t=this.props.src,n={alt:this.props.alt,title:this.props.title},i=this.props.width&&this.props.width*this.props.scale,o=this.props.height&&this.props.height*this.props.scale,s={width:i,height:o},a=this.props.responsive&&!(!i||!o);let l;this.props.extraGraphie&&this.props.extraGraphie.labels.length&&(l=e.jsx(dm,{box:this.props.extraGraphie.box,range:this.props.extraGraphie.range,options:{labels:this.props.extraGraphie.labels},responsive:!0,addMouseLayer:!1,setup:this.setupGraphie}));const c=void 0===this.props.preloader?ym:this.props.preloader,u=c?()=>c(s):null;if(!Jd.isLabeledSVG(t)){if(a){const r=f({zoomable:(i||0)>700,"svg-image":!0});return n.onClick=this._handleZoomClick,e.jsxs(Ah,{className:r,width:i,height:o,constrainHeight:this.props.constrainHeight,allowFullBleed:this.props.allowFullBleed&&vm(t),children:[e.jsx(mm,{src:t,imgProps:n,preloader:u,onUpdate:this.handleUpdate}),l]})}return n.style=s,e.jsx(mm,{src:t,preloader:u,imgProps:n,onUpdate:this.handleUpdate})}const p=Jd.getSvgUrl(t);let g;if(this.isLoadedInState(this.state)){let t;if(this.sizeProvided())t=[i,o];else{if(!this.state.imageDimensions)throw new d("svg-image has no dimensions",h.InvalidInput,{metadata:{src:this.props.src}});t=[this.state.imageDimensions[0]*this.props.scale,this.state.imageDimensions[1]*this.props.scale]}g=e.jsx(dm,{ref:"graphie",box:t,scale:[40*this.props.scale,40*this.props.scale],range:this.state.range,options:r.pick(this.state,"labels"),responsive:a,addMouseLayer:!1,setup:this.setupGraphie})}return a?e.jsxs(Ah,{className:"svg-image",width:i,height:o,constrainHeight:this.props.constrainHeight,children:[e.jsx(mm,{src:p,onLoad:this.onImageLoad,onUpdate:this.handleUpdate,preloader:u,imgProps:n}),g,l]}):(n.style=s,e.jsxs("div",{className:"unresponsive-svg-image",style:s,children:[e.jsx(mm,{src:p,onLoad:this.onImageLoad,onUpdate:this.handleUpdate,preloader:u,imgProps:n}),g]}))}}class bm extends wt.Component{_hasRendered;static defaultProps={onRender:()=>{},setAssetStatus:(e,t)=>{}};constructor(e){super(e),this.props.setAssetStatus(this.props.children,!1),this.state={rendered:!1},this._hasRendered=!1}handleRender=()=>{this.setState({rendered:!0}),this.props.onRender(),this._hasRendered||(this._hasRendered=!0,this.props.setAssetStatus(this.props.children,!0))};render(){const{TeX:t}=zd();return e.jsx(t,{onRender:this.handleRender,children:this.props.children})}}class wm extends wt.Component{_isMounted;_observer;_measuringInitialized;_originalWidth;_node;static defaultProps={animateHeight:!1,readyToMeasure:!0,disableEntranceAnimation:!1,computeChildBounds:e=>{const t=e.firstElementChild;return{width:t.offsetWidth,height:t.offsetHeight}}};state={visible:!1,marginBottomPx:0,zoomed:!0};componentDidMount(){this._isMounted=!0,this.maybeInitializeMeasuring()}componentDidUpdate(){this.maybeInitializeMeasuring()}componentWillUnmount(){window.removeEventListener("resize",this.reset),this._observer&&this._observer.disconnect(),this._isMounted=!1}reset=()=>{this._isMounted&&this.state.visible&&(this._originalWidth=null,this.setState({visible:!1,compactHeight:null,expandedHeight:null,zoomed:!0},()=>{this.measureAndScaleChildToFit(!1)}))};maybeInitializeMeasuring(){const e=this.props.readyToMeasure&&!this._measuringInitialized;this._isMounted&&e&&(this._measuringInitialized=!0,this._node=n.findDOMNode(this),setTimeout(()=>this.measureAndScaleChildToFit(!1),0),window.MutationObserver&&(this._observer=new MutationObserver(e=>{if(this._isMounted)for(const t of e)if(t.target!==this._node){this.measureAndScaleChildToFit(this.state.zoomed);break}}),this._observer.observe(this._node,{childList:!0,subtree:!0,attributes:!0})),window.addEventListener("resize",this.reset))}stopPropagationIfZoomed=e=>{this.state.zoomed||e.stopPropagation()};measureAndScaleChildToFit(e){if(!this._isMounted)return;let t=this._node,n=t;for(;n&&0===n.offsetWidth;)n=n.parentElement?.closest(".perseus-renderer")??null;n&&(t=n);const r={width:t.offsetWidth,height:t.offsetHeight},i=this.props.computeChildBounds(this._node,r),o=i.width+1,s=i.height+1;if(o>r.width){const t=r.width/o;this.setState({scale:t,zoomed:e,compactHeight:Math.ceil(t*s),expandedHeight:s}),setTimeout(()=>{this._isMounted&&this.setState({visible:!0})})}else this.setState({visible:!0})}handleClickIfZoomed=e=>{this.state.zoomed||(e.stopPropagation(),this.handleClick())};handleClick=()=>{this.setState({zoomed:!this.state.zoomed})};render(){const{visible:t,scale:n,compactHeight:r,expandedHeight:i,zoomed:o}=this.state,{animateHeight:s,disableEntranceAnimation:a}=this.props,l=t?{transitionProperty:s?"opacity transform height":"opacity transform",transitionDuration:"0.3s",transitionTimingFunction:"ease-out"}:{},c=!a&&!t,u=c?" translate(0, 8px)":"",d=c?0:1,h=(n??1).toString(),p={display:"block",width:"100%",height:o?i:r,transform:o?`scale(1, 1) ${u}`:`scale(${h}, ${h}) ${u}`,transformOrigin:"0 0",opacity:d,WebkitTapHighlightColor:"transparent",...l};return e.jsx("span",{onClick:this.handleClick,onClickCapture:this.handleClickIfZoomed,onTouchCancelCapture:this.stopPropagationIfZoomed,onTouchEndCapture:this.stopPropagationIfZoomed,onTouchStartCapture:this.stopPropagationIfZoomed,style:p,children:this.props.children})}}const _m=(e,t)=>{const n=e.querySelector(".MathJax"),r={width:n.offsetWidth,height:n.offsetHeight};return{width:Math.max(t.width,r.width),height:Math.max(t.height,r.height)}};class Sm extends wt.Component{constructor(){super(),this.state={isRendered:!1}}handleRender=()=>{this.setState({isRendered:!0})};render(){return e.jsx(wm,{readyToMeasure:this.state.isRendered,computeChildBounds:_m,animateHeight:!1,disableEntranceAnimation:!0,children:e.jsx(jd.Consumer,{children:({setAssetStatus:t})=>e.jsx(bm,{onRender:this.handleRender,setAssetStatus:t,children:this.props.children})})})}}const km=wt.createContext({activeDefinitionId:null,setActiveDefinitionId:()=>{}});class Cm extends wt.Component{state={activeDefinitionId:null};setActiveDefinitionId=e=>{this.setState(t=>({activeDefinitionId:e}))};render(){const{children:t}=this.props,{activeDefinitionId:n}=this.state,{setActiveDefinitionId:r}=this;return e.jsx(km.Provider,{value:{activeDefinitionId:n,setActiveDefinitionId:r},children:t})}}const Mm=km.Consumer;class Im extends wt.Component{constructor(e){super(e),this.state={error:""}}componentDidCatch(e,t){this.setState({error:e.toString()}),this.props.onError?.(e,t),th("Unhandled Perseus error: "+e.message,h.Internal,{cause:e,loggedMetadata:{componentStack:t&&"componentStack"in t?t.componentStack:"componentStack not provided",...this.props.metadata}})}render(){return this.state.error?e.jsxs("svg",{height:"16",width:"16",viewBox:"0 0 16 16",role:"img",children:[e.jsx("title",{children:"Rendering Error!"}),e.jsx("path",{d:"m8 16c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm0-3c0.55 0 1-0.45 1-1s-0.45-1-1-1-1 0.45-1 1 0.45 1 1 1zm0-9c-0.55 0-1 0.45-1 1v4c0 0.55.45 1 1 1s1-0.45 1-1v-4c0-0.55-0.45-1-1-1z",fill:"#d92916",fillRule:"evenodd"})]}):this.props.children}}function Pm(){}class Tm{_tracked;setting;track;trackApi;widgetID;widgetType;constructor(e,t,n,r){e?(this._tracked=!1,this.trackApi=e,this.widgetType=t,this.widgetID=n,this.setting=r,this.track=this._track):this.track=Pm}_track=e=>{this._tracked&&!this.setting||(this._tracked=!0,this.trackApi({type:this.widgetType,id:this.widgetID,...e}))}}const Em={fence:{match:S.defaultRules.fence.match,order:1,parse:(e,t,n)=>({type:"codeBlock",lang:e[2]||void 0,content:e[3]})},paragraph:{match:S.defaultRules.paragraph.match,order:2,parse:(e,t,n)=>({content:e[1]})}},jm=S.parserFor(Em),Rm=e=>{const t=e.replace(/^\n\s*\n/,"")+"\n\n";return jm(t,{inline:!1}).map(e=>e.content)},Am=e=>e.join("\n\n"),Nm=["key","ref","containerSizeClass","widgetId","onChange","problemNum","apiOptions","widgetIsOpen","questionCompleted","findWidgets","onRemove","id","onBlur","onFocus","trackInteraction","keypadElement","linterContext","isLastUsedWidget","handleUserInput","analytics","showSolutions","reviewMode","reviewModeRubric","widgetIndex"];const Lm={};function Om(e){if(!Lm[e]){const t=p("<span>").text(e).appendTo("body");Lm[e]=t.width()+5,t.remove()}return Lm[e]}class Dm extends wt.Component{static propTypes={options:Mt.array,layout:Mt.oneOf(["horizontal","vertical"]),onChange:Mt.func.isRequired};static defaultProps={options:[],layout:"horizontal"};state={items:this.props.options.concat("")};UNSAFE_componentWillReceiveProps(e){this.setState({items:e.options.concat("")})}onChange=(e,t)=>{let n=r.clone(this.state.items);n[e]=t.target.value,e===n.length-1&&(n=n.concat("")),this.setState({items:n}),this.props.onChange(r.compact(n))};onKeyDown=(e,t)=>{const i=t.nativeEvent.keyCode;if(8===i&&""===this.state.items[e]){t.preventDefault();const i=r.clone(this.state.items),o=0===e?0:e-1;e!==i.length-1||0!==e&&""===i[o]?(i.splice(e,1),this.setState({items:i},function(){n.findDOMNode(this.refs["input_"+o]).focus()})):n.findDOMNode(this.refs["input_"+o]).focus()}else if(8===i&&1===this.state.items[e].length&&e===this.state.items.length-2){t.preventDefault();const n=r.clone(this.state.items);n.splice(e,1),this.setState({items:n}),this.props.onChange(r.compact(n))}else if(13===i){t.preventDefault();const i=r.clone(this.state.items),o=e+1;e===i.length-2?n.findDOMNode(this.refs["input_"+o]).focus():(i.splice(o,0,""),this.setState({items:i},function(){n.findDOMNode(this.refs["input_"+o]).focus()}))}};render(){const t=["perseus-text-list-editor","perseus-clearfix","layout-"+this.props.layout].join(" "),n=r.map(this.state.items,function(t,n){return e.jsx("li",{children:e.jsx("input",{ref:"input_"+n,type:"text",value:t,onChange:this.onChange.bind(this,n),onKeyDown:this.onKeyDown.bind(this,n),style:{width:Om(t)}})},n)},this);return e.jsx("ul",{className:t,children:n})}}const Fm=[];class zm extends wt.Component{static propTypes={value:Mt.arrayOf(Mt.string),onChange:Mt.func.isRequired,showTitle:Mt.bool.isRequired};static defaultProps={value:Fm,showTitle:!0};render(){return e.jsxs("div",{children:[this.props.showTitle&&e.jsx("div",{style:{fontSize:14},children:"Tags:"}),e.jsx(Dm,{options:this.props.value||Fm,layout:"vertical",onChange:this.props.onChange})]})}}const Bm={propTypes:Mt.shape({isArticle:Mt.bool.isRequired,onFocusChange:Mt.func.isRequired,GroupMetadataEditor:Mt.func.isRequired,showAlignmentOptions:Mt.bool.isRequired,readOnly:Mt.bool.isRequired,answerableCallback:Mt.func,getAnotherHint:Mt.func,interactionCallback:Mt.func,groupAnnotator:Mt.func.isRequired,imagePlaceholder:Mt.node,widgetPlaceholder:Mt.node,baseElements:Mt.shape({Link:Mt.func}),imagePreloader:Mt.func,trackInteraction:Mt.func,customKeypad:Mt.bool,nativeKeypadProxy:Mt.func,isMobile:Mt.bool,isMobileApp:Mt.bool,setDrawingAreaAvailable:Mt.func,hintProgressColor:Mt.string,canScrollPage:Mt.bool,editorChangeDelay:Mt.number}).isRequired,defaults:{isArticle:!1,isMobile:!1,isMobileApp:!1,onFocusChange:function(){},GroupMetadataEditor:zm,showAlignmentOptions:!1,readOnly:!1,groupAnnotator:function(){return null},baseElements:{Link:t=>e.jsx("a",{...t})},setDrawingAreaAvailable:function(){},canScrollPage:!1,editorChangeDelay:0}},$m="perseus-renderer",Wm="perseus-renderer-two-columns",Um="perseus-renderer-responsive",Hm="perseus-input",qm="perseus-focused",Vm={OPTION:"perseus-radio-option",SELECTED:"perseus-radio-selected",OPTION_CONTENT:"perseus-radio-option-content"},Gm="perseus-correct",Ym="perseus-incorrect",Xm={path:"M6 11a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0-9a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1z",height:12,width:12};class Km extends wt.Component{_positionTimeout;state={tooltipAbove:!0};componentDidMount(){this._positionTimeout=window.setTimeout(this.getPosition)}componentWillUnmount(){window.clearTimeout(this._positionTimeout)}getPosition=()=>{const e=n.findDOMNode(this).getBoundingClientRect();this.setState({tooltipAbove:e.top>100})};renderLink=t=>{const n=this.state.tooltipAbove;let r,i,o;return 1===this.props.severity?(r=Qm.indicatorError,i="Error",o=Qm.publishBlockingError):2===this.props.severity?(r=Qm.indicatorWarning,i="Warning",o=Qm.warning):(r=Qm.indicatorGuideline,i="Recommendation",o=Qm.warning),e.jsxs("a",{href:`https://khanacademy.org/r/linter-rules#${this.props.ruleName}`,target:"lint-help-window",className:C(t),children:[e.jsx("span",{className:C(Qm.indicator,r),children:1===this.props.severity&&e.jsx(dg,{...Xm})}),e.jsxs("div",{className:C(Qm.tooltip,n&&Qm.tooltipAbove),children:[this.props.message.split("\n\n").map((t,n)=>e.jsxs("p",{className:C(Qm.tooltipParagraph),children:[e.jsxs("span",{className:C(o),children:[i,":"," "]}),t]},n)),e.jsx("div",{className:C(Qm.tail,n&&Qm.tailAbove)})]})]})};render(){const{children:t,inline:n,blockHighlight:r,insideTable:i}=this.props;return i?n?e.jsx("span",{"data-lint-inside-table":"true",children:t}):e.jsx("div",{"data-lint-inside-table":"true",children:t}):r?e.jsxs("span",{className:C(Qm.lintContainer,Qm.lintContainerBlock),children:[this.renderLink(Qm.radioWidgetHoverTarget),e.jsx("span",{children:t})]}):n?e.jsxs("span",{className:C(Qm.lintContainer),children:[this.renderLink(Qm.inlineHoverTarget),e.jsx("span",{children:t})]}):e.jsxs("div",{className:C(Qm.lintContainer),children:[this.renderLink(Qm.hoverTarget),e.jsx("div",{children:t})]})}}const Qm=k.create({lintContainer:{position:"relative"},lintContainerBlock:{display:"block"},hoverTarget:{position:"absolute",top:0,right:-40,display:"block",width:24,height:24,":hover > span":{backgroundColor:Ph},":hover div":{display:"block"},":hover ~ div":{outline:"1px solid "+Ih},":hover ~ div div[data-lint-inside-table]":{outline:"1px solid "+Ih},":hover ~ div span[data-lint-inside-table]":{backgroundColor:Ih,color:mh}},inlineHoverTarget:{float:"right",position:"relative",marginRight:-40,display:"block",width:24,height:24,":hover > span":{backgroundColor:Ph},":hover div":{display:"block"},":hover ~ span":{backgroundColor:Ih,color:mh}},radioWidgetHoverTarget:{position:"absolute",left:-40,display:"block",width:24,height:24,minWidth:264,":hover > span":{backgroundColor:Ph},":hover > div":{display:"block",padding:8,width:280},":hover > div > div":{left:8},":hover ~ span":{backgroundColor:Ih,color:mh}},indicator:{alignItems:"center",borderRadius:4,color:"white",display:"flex",fontSize:12,height:8,justifyContent:"center",margin:8,width:8},indicatorError:{backgroundColor:"#be2612",borderRadius:8,height:16,width:16},indicatorWarning:{backgroundColor:"#f86700"},indicatorGuideline:{backgroundColor:"#ffbe26"},tooltip:{position:"absolute",right:-12,display:"none",zIndex:1e3,color:mh,backgroundColor:wh,opacity:.9,fontFamily:ph,fontSize:"12px",lineHeight:"15px",width:"320px",borderRadius:"4px"},tooltipAbove:{bottom:32},tail:{position:"absolute",top:-12,right:16,width:0,height:0,borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderBottom:"12px solid "+wh},tailAbove:{bottom:-12,borderBottom:"none",borderTop:"12px solid "+wh,top:"auto"},tooltipParagraph:{margin:12},warning:{color:Ih,fontFamily:fh},publishBlockingError:{color:Eh}}),Zm={...M,columns:{...M.columns,react:(t,n,r)=>e.jsxs("div",{className:"perseus-two-columns",children:[e.jsx("div",{className:"perseus-column",children:e.jsx("div",{className:"perseus-column-content",children:n(t.col1,r)})}),e.jsx("div",{className:"perseus-column",children:e.jsx("div",{className:"perseus-column-content",children:n(t.col2,r)})})]},r.key)},crowdinId:{...M.crowdinId,react:(e,t,n)=>e.id},table:{...M.table,react:function(e,t,n){const r=S.defaultRules.table.react(e,t,n);return n.isMobile?wt.cloneElement(r,{tabIndex:0}):r}},titledTable:{...M.titledTable,react:(t,n,r)=>{let i;if(t.table)if("lint"===t.table.type)i="table"===t.table.content?.type?Zm.lint.react({...t.table,content:{...t,table:t.table.content}},n,{...r,unwrapTitledTableContents:!0}):Zm.lint.react(t.table,n,r);else{const o=S.defaultRules.table.react(t.table,n,r),s=e.jsx("caption",{className:"perseus-table-title",children:n(t.title,r)},"caption");i=wt.cloneElement(o,null,[s,...o.props.children])}else i="//invalid table//";return r.unwrapTitledTableContents?i:e.jsx("div",{className:"perseus-titled-table",children:i},r.key)}},widget:{...M.widget,react:(t,n,r)=>e.jsx("em",{children:`[Widget: ${t.id}]`},r.key)},blockMath:{...M.blockMath,react:(t,n,r)=>{const{TeX:i}=zd();return e.jsx(i,{children:t.content},r.key)}},math:{...M.math,react:(t,n,r)=>{const{TeX:i}=zd();return e.jsx(i,{children:t.content},r.key)}},unescapedDollar:{...M.unescapedDollar,react:(e,t,n)=>"$"},link:{...M.link,react:function(e,t,n){const r=S.defaultRules.link.react(e,t,n),i=r.props.href;let o=null;!!i&&i.match(/https?:\/\/[^/]*khanacademy.org|^\//)||(o="noopener noreferrer");const s={...r.props,target:"_blank",href:i,rel:o};return n.baseElements&&n.baseElements.Link?n.baseElements.Link(s):wt.cloneElement(r,s)}},codeBlock:{...M.codeBlock,react:(t,n,r)=>"alt"===t.lang?e.jsx("div",{className:"perseus-markdown-alt perseus-sr-only",children:n(t.content,r)},r.key):S.defaultRules.codeBlock.react(t,n,r)},lint:{...M.lint,react:(t,n,r)=>e.jsx(Km,{message:t.message,ruleName:t.ruleName,inline:Jm(t.content),blockHighlight:t.blockHighlight,insideTable:t.insideTable,severity:t.severity,children:n(t.content,r)})}};function Jm(e){return!!(e&&e.type&&ev.hasOwnProperty(e.type))}const ev={text:!0,math:!0,unescapedDollar:!0,link:!0,img:!0,strong:!0,u:!0,em:!0,del:!0,code:!0},tv=S.parserFor(Zm),nv=(e,t)=>tv(e+"\n\n",{...t,inline:!1}),rv=e=>{if(r.isArray(e))return r.flatten(r.map(e,rv));if(e.content&&r.isString(e.content))return-1!==e.type.toLowerCase().indexOf("code")?["",e.content,""]:[e.content.replace(/\s+/g," ")];const t=r.chain(e).values().flatten().filter(e=>null!=e&&r.has(e,"type")).value();if(!t.length)return[];const n=rv(t);if("paragraph"===e.type&&n.length){n[0]=n[0].replace(/^\s+/,"");const e=n.length-1;n[e]=n[e].replace(/\s+$/,"")}return n},iv={characterCount:e=>{const t=nv(e);return rv(t).join("").length},traverseContent:I,parse:nv,parseInline:(e,t)=>tv(e,{...t,inline:!0}),reactFor:S.reactFor,ruleOutput:S.ruleOutput(Zm,"react"),basicOutput:S.reactFor(S.ruleOutput(Zm,"react")),sanitizeUrl:S.sanitizeUrl};class ov extends wt.Component{render(){const t=this.props.className?"paragraph "+this.props.className:"paragraph";return e.jsx("div",{className:this.props.inline?this.props.className??void 0:t,"data-perseus-component-index":this.props.translationIndex,"data-perseus-paragraph-index":this.props.paragraphIndex,children:this.props.children})}}class sv{previousContent=null;runLinter=P((e,t)=>{"undefined"!=typeof KA&&e!==this.previousContent&&(this.previousContent=e,""!==e?fetch("/api/internal/translations/lint_poentry?preview=1&lang=en",{headers:{"Content-Type":"application/json"},body:JSON.stringify({msgid:e,msgstr:e,format:"perseus_text",filename:""}),method:"POST"}).then(e=>e.status>=400?{status:"error",message:"Could not run i18n linter."}:e.json(),e=>({status:"error",message:"Could not run i18n linter."})).then(e=>{"error"===e.status?t(["Some part of this text makes it untranslatable. The specific message from the i18n linter was: "+e.message.replace(/\n/g," ")]):t([])}):t([]))},1e3);applyLintErrors(e,t){if(t.length){const n=t.join("\n\n");e.unshift({content:{type:"text",content:""},insideTable:!1,message:n,ruleName:"legacy-error",severity:T.Severity.ERROR,type:"lint"})}}}const{interactiveSizes:av}=Rh,lv="small",cv="medium",uv="large",dv=e=>e===lv?[av.defaultBoxSizeSmall,av.defaultBoxSizeSmall]:[av.defaultBoxSize,av.defaultBoxSize],hv=new E("Perseus widget registry"),pv=(e,t)=>{hv.set(e,t)},fv=(e,t)=>{const n=hv.get(t);if(!n){throw new d(`Failed to replace ${e} with ${t}`,h.Internal)}pv(e,n)},gv=e=>hv.get(e)??null;class mv extends wt.Component{widgetRef=wt.createRef();static defaultProps={linterContext:j};state={sizeClass:cv};componentDidMount(){if(this.props.widgetProps.apiOptions.isMobile){const t=n.findDOMNode(this).offsetWidth;this.setState({sizeClass:(e=t,e?e<=512?lv:e<=688?cv:uv:cv)})}var e}UNSAFE_componentWillReceiveProps(e){if(this.props.type!==e.type)throw new Error("WidgetContainer can't change widget type; set a different key instead to recreate the container.")}getWidget=()=>this.widgetRef.current;render(){let t=f({"perseus-widget-container":!0,"widget-highlight":this.props.shouldHighlight,"widget-nohighlight":!this.props.shouldHighlight,"perseus-widget__definition":"definition"===this.props.type});const n=this.props.type,r=navigator.userAgent,i=(e=>{const t=hv.get(e);return null==t?null:t.getWidget?t.getWidget():t.widget})(n);if(null==i)return e.jsx("div",{className:t});let o="null";if("interactive-graph"===n){const e=this.props.widgetProps;o=e.graph?.type??"null"}let s=this.props.widgetProps.alignment;"default"===s&&(s=R.getDefaultAlignment(n)),t+=" widget-"+s;const a=this.props.widgetProps.apiOptions,l=this.props.widgetProps.static||a.readOnly,c={width:"100%",height:"100%",position:"absolute",top:0,left:0,zIndex:3},u=(e=>{const t=hv.get(e);return t&&t.isLintable||!1})(n)?this.props.linterContext:{...this.props.linterContext,highlightLint:!1};return e.jsx("div",{className:t,style:l?{position:"relative",overflow:"visible"}:{},children:e.jsx(Bd.Consumer,{children:({analytics:t})=>e.jsxs(Im,{metadata:{widget_type:n,widget_id:this.props.id},onError:e=>{t.onAnalyticsEvent({type:"perseus:widget-rendering-error:ti",payload:{widgetSubType:o,widgetType:n,widgetId:this.props.id,message:e.message,userAgent:r}})},children:[e.jsx(i,{...this.props.widgetProps,linterContext:u,containerSizeClass:this.state.sizeClass,ref:this.widgetRef}),l&&e.jsx("div",{style:c})]})})})}}const vv=/\S/,yv=/(web\+graphie|https):\/\/[^\s]*/,xv=()=>{},bv=e=>"container:"+e;class wv extends wt.Component{static contextType=Ld;_currentFocus;_foundTextNodes;_interactionTrackers;_isMounted;_isTwoColumn;_translationLinter;_widgetContainers=new Map;translationIndex;widgetIds;static defaultProps={content:"",widgets:{},images:{},highlightedWidgets:[],questionCompleted:!1,showSolutions:"none",onRender:xv,onInteractWithWidget:function(){},findExternalWidgets:()=>[],alwaysUpdate:!1,reviewMode:!1,linterContext:j};constructor(e){super(e),this._translationLinter=new sv,this.state={jiptContent:null,translationLintErrors:[],lastUsedWidgetId:null,...this._getInitialWidgetState(e)}}componentDidMount(){this._isMounted=!0,this.handleRender({}),this._currentFocus=null,this.props.initializeUserInput?.(this.props.widgets,this.props.problemNum??0),this.props.linterContext.highlightLint&&this._translationLinter.runLinter(this.props.content,this.handletranslationLintErrors)}UNSAFE_componentWillReceiveProps(e){(function(e,t){function n(e){return B({question:{content:e.content,widgets:e.widgets,images:{}},hints:[],answerArea:$()})}return e.problemNum!==t.problemNum||!r.isEqual(n(e),n(t))})(this.props,e)&&(this.props.initializeUserInput?.(e.widgets,e.problemNum??0),this.setState(this._getInitialWidgetState(e)))}shouldComponentUpdate(e,t){if(this.props.alwaysUpdate)return!0;const n=!r.isEqual(this.state,t);return!r.isEqual(this.props,e)||n}componentDidUpdate(e,t){this.handleRender(e),this.props.linterContext.highlightLint&&this._translationLinter.runLinter(this.props.content,this.handletranslationLintErrors)}componentWillUnmount(){this.widgetIds=[],null!=this.translationIndex&&zd().rendererTranslationComponents.removeComponentAtIndex(this.translationIndex),this._isMounted=!1}getApiOptions=()=>({...Bm.defaults,...this.props.apiOptions});_getInitialWidgetState=e=>({widgetInfo:A(e.widgets)});_getDefaultWidgetInfo=e=>{const t=Jd.rTypeFromWidgetId.exec(e);return null==t?{}:{type:t[1],graded:!0,options:{}}};_getWidgetInfo=e=>this.state.widgetInfo[e]||this._getDefaultWidgetInfo(e);renderWidget=(t,n,i)=>{const o=this.state.widgetInfo[n];if(o&&"full-width"===o.alignment&&(i.foundFullWidth=!0),o){const i=o&&o.type||t,s=r.contains(this.props.highlightedWidgets,n);return e.jsx(mv,{id:n,ref:e=>{const t=bv(n);null!=e?this._widgetContainers.set(t,e):this._widgetContainers.delete(t)},type:i,widgetProps:this.getWidgetProps(n),shouldHighlight:s,linterContext:N(this.props.linterContext,"widget")},bv(n))}return null};_getWidgetIndexById(e){const t=this.widgetIds.indexOf(e);return t<0?(th("Unable to get widget index in _getWidgetIndexById",h.Internal,{loggedMetadata:{widgets:JSON.stringify(this.props.widgets),widgetId:JSON.stringify(e)}}),0):t}getWidgetProps(e){const t=this.getApiOptions(),n=this.props.widgets[e].options,i=this.state.widgetInfo[e],o=this.props.reviewMode&&i?i.options:null;this._interactionTrackers||(this._interactionTrackers={});let s=this._interactionTrackers[e];return s||(s=this._interactionTrackers[e]=new Tm(t.trackInteraction,i&&i.type,e,(e=>{const t=hv.get(e);return t&&t.tracking||""})(i&&i.type))),{...n,userInput:this.props.userInput?.[e],widgetId:e,widgetIndex:this._getWidgetIndexById(e),alignment:i&&i.alignment,static:i?.static,problemNum:this.props.problemNum,apiOptions:this.getApiOptions(),keypadElement:this.props.keypadElement,questionCompleted:this.props.questionCompleted,showSolutions:this.props.showSolutions,onFocus:r.partial(this._onWidgetFocus,e),onBlur:r.partial(this._onWidgetBlur,e),findWidgets:this.findWidgets,reviewModeRubric:o,reviewMode:this.props.reviewMode,handleUserInput:t=>{const n={...this.props.userInput,[e]:t},r=L(this.state.widgetInfo,this.widgetIds,n,this.context.locale).length>0;this.props.handleUserInput?.(e,t,r),this.props.onInteractWithWidget(e)},trackInteraction:s.track,isLastUsedWidget:e===this.state.lastUsedWidgetId}}getSerializedState(){return O(this.props.widgets,(e,t)=>{const n=this.getWidgetInstance(t);return n&&n.getSerializedState?function(e){if(null==e)return e;const t={};for(const n of Object.keys(e))Nm.includes(n)||(t[n]=e[n]);return t}(n.getSerializedState()):e.options})}findInternalWidgets=e=>{let t;if("string"==typeof e)if(-1!==e.indexOf(" ")){const n=e;t=(e,t,r)=>e===n}else{const n=e;t=(e,t,r)=>t.type===n}else t=e;return this.widgetIds.filter(e=>{const n=this._getWidgetInfo(e),r=this.getWidgetInstance(e);return t(e,n,r)}).map(this.getWidgetInstance)};findWidgets=e=>[...this.findInternalWidgets(e),...this.props.findExternalWidgets(e)];getWidgetInstance=e=>{const t=this._widgetContainers.get(bv(e));return t?t.getWidget():null};_onWidgetFocus=(e,t=[])=>{if(!r.isArray(t))throw new d("widget props.onFocus focusPath must be an Array, but was"+JSON.stringify(t),h.Internal);this._setCurrentFocus([e].concat(t))};_onWidgetBlur=(e,t)=>{const n=this._currentFocus,i=[e].concat(t);r.isEqual(i,n)&&r.defer(()=>{r.isEqual(this._currentFocus,n)&&this._setCurrentFocus(null)})};getContent=(e,t)=>t.jiptContent||e.content;shouldRenderJiptPlaceholder=(e,t)=>zd().JIPT.useJIPT&&null==t.jiptContent&&-1!==e.content.indexOf("crwdns");replaceJiptContent=(e,t)=>{if(null==t)this.setState({jiptContent:e});else{/^\s*(`{3,}|~{3,})\s*(\S+)?\s*\n([\s\S]+?)\s*\1\s*$/.test(e)||(/\S\n\s*\n\S/.test(e)?e="$\\large{\\red{\\text{Please translate each paragraph to a single paragraph.}}}$":/^\s*$/.test(e)&&(e="$\\large{\\red{\\text{Translated paragraph is currently empty}}}$"));const n=this.getContent(this.props,this.state),r=Rm(n);r[t]=e,this.setState({jiptContent:Am(r)})}};outputMarkdown=(t,n)=>{if(r.isArray(t)){const e=n.key,r=[];let i=!1;for(let o=0;o<t.length;o++){n.key=o,n.paragraphIndex=o;const e=this.outputMarkdown(t[o],n),s="string"==typeof e;"string"==typeof e&&i?r[r.length-1]+=e:r.push(e),i=s}return n.key=e,r}this._foundTextNodes=!1,n.foundFullWidth=!1;const i=this.outputNested(t,n);let o;return o=null!=this.translationIndex?null:f({"perseus-paragraph-centered":!this._foundTextNodes,"perseus-paragraph-full-width":n.foundFullWidth&&1===t.content.length}),e.jsx(ov,{className:o,translationIndex:this.translationIndex,paragraphIndex:n.paragraphIndex,inline:this.props.inline,children:e.jsx(Im,{children:i})},n.key)};outputNested=(e,t)=>{if(r.isArray(e)){const n=t.key,r=[];let i=!1;for(let o=0;o<e.length;o++){t.key=o;const n=this.outputNested(e[o],t),s="string"==typeof n;"string"==typeof n&&i?r[r.length-1]+=n:r.push(n),i=s}return t.key=n,r}return this.outputNode(e,this.outputNested,t)};outputNode=(t,n,i)=>{const o=this.getApiOptions(),s=o.imagePlaceholder;if("widget"===t.type){const n=o.widgetPlaceholder;return n||(this._foundTextNodes=!0,this.widgetIds.includes(t.id)?e.jsx("span",{className:"renderer-widget-error",children:["Widget [[","☃"," ",t.id,"]] already exists."].join("")},i.key):(this.widgetIds.push(t.id),this.renderWidget(t.widgetType,t.id,i)))}if("blockMath"===t.type){const n=t.content.replace(/\{align[*]?\}/g,"{aligned}").replace(/[\u00a0]/g," "),r={overflowX:"auto",overflowY:"hidden",paddingTop:10,paddingBottom:10,marginTop:-10,marginBottom:-10};if(o.isMobile){const t=16,o={marginLeft:-t,marginRight:-t},s={paddingLeft:t,paddingRight:t},a={...r,..._v.mobileZoomableParentFix};return e.jsx("div",{className:"perseus-block-math",style:o,children:e.jsx(Im,{children:e.jsx("div",{className:"perseus-block-math-inner",style:{...a,...s},children:e.jsx(Sm,{children:n})})})},i.key)}return e.jsx("div",{className:"perseus-block-math",children:e.jsx(Im,{children:e.jsx("div",{className:"perseus-block-math-inner",style:r,children:e.jsx(jd.Consumer,{children:({setAssetStatus:t})=>e.jsx(bm,{setAssetStatus:t,children:n})})})})},i.key)}if("math"===t.type){const n=t.content;return e.jsx("span",{style:{whiteSpace:"nowrap"},children:e.jsxs(Im,{children:[e.jsx("span",{}),e.jsx(jd.Consumer,{children:({setAssetStatus:t})=>e.jsx(bm,{onRender:this.props.onRender,setAssetStatus:t,children:n})}),e.jsx("span",{})]})},i.key)}if("image"===t.type){if(s)return s;const n=r.has(this.props.images,t.target)?this.props.images[t.target]:null,a=!i.inTable;return e.jsx(Im,{children:e.jsx(jd.Consumer,{children:({setAssetStatus:r})=>e.jsx(xm,{setAssetStatus:r,src:iv.sanitizeUrl(t.target),alt:t.alt,title:t.title,responsive:a,onUpdate:this.props.onRender,zoomToFullSizeOnMobile:o.isMobile&&o.isArticle,...n})})},i.key)}if("columns"===t.type)return this._isTwoColumn=!0,e.jsx(Im,{children:iv.ruleOutput(t,n,i)},i.key);if("text"===t.type)return vv.test(t.content)&&(this._foundTextNodes=!0),s&&yv.test(t.content)?s:t.content;if("table"===t.type||"titledTable"===t.type){const r=iv.ruleOutput(t,n,{...i,isMobile:o.isMobile,inTable:!0});if(!o.isMobile)return r;const s={marginLeft:-16,marginRight:-16},a={...{paddingLeft:0,paddingRight:0},..._v.mobileZoomableParentFix},l=e.jsx("div",{style:{...a,overflowX:"auto"},children:e.jsx(Im,{children:e.jsx(wm,{animateHeight:!0,children:r})})});return e.jsx("div",{style:s,children:l})}return e.jsx(Im,{children:iv.ruleOutput(t,n,i)},i.key)};handleRender=e=>{const t=this.props.onRender,r=e.onRender;if(t!==xv||r!==xv){const e=p(n.findDOMNode(this)).find("img");r!==xv&&e.off("load",r),t!==xv&&e.on("load",t)}t()};_setCurrentFocus=e=>{const t=this.getApiOptions();if(n=e,i=this._currentFocus,!(null===n||null===i?n===i:r.every(n,(e,t)=>{if(null!=i)return r.isEqual(e,i[t])}))){const n=this._currentFocus;n&&this.blurPath(n),this._currentFocus=e,t.onFocusChange(this._currentFocus,n)}var n,i};focus=()=>{let e,t;for(let n=0;n<this.widgetIds.length;n++){const r=this.widgetIds[n],i=this.getWidgetInstance(r),o=i?.focus?.();if(o){e=r,t=o;break}}if(e){let n;return"object"==typeof t?(n=[e].concat(t.path||[]),th("Renderer received a focus result of type 'object' instead of the expected type 'boolean'",h.Internal,{loggedMetadata:{focusResult:JSON.stringify(t)}})):n=[e],this._setCurrentFocus(n),!0}};getDOMNodeForPath=e=>{const t=r.first(e),i=r.rest(e),o=this.getWidgetInstance(t);return o?.getDOMNodeForPath?o.getDOMNodeForPath(i):0===i.length?n.findDOMNode(o):void 0};getInputPaths=()=>{const e=[];return this.widgetIds.forEach(t=>{const n=this.getWidgetInstance(t);if(n&&n.getInputPaths){n.getInputPaths().forEach(n=>{const r=[t].concat(n);e.push(r)})}}),e};focusPath=e=>{if(r.isEqual(this._currentFocus,e))return;this._currentFocus&&this.blurPath(this._currentFocus);const t=r.first(e),n=r.rest(e),i=this.getWidgetInstance(t);i?.focusInputPath?.(n)};blurPath=e=>{if(!r.isEqual(this._currentFocus,e))return;const t=r.first(e),n=r.rest(e);if(this.getWidgetInstance(t)){const e=this.getWidgetInstance(t);e?.blurInputPath?.(n)}};blur=()=>{this._currentFocus&&this.blurPath(this._currentFocus)};serialize=()=>{const e={};return r.each(this.state.widgetInfo,function(t,n){const i=this.getWidgetInstance(n).serialize();r.isEmpty(i)||(e[n]=i)},this),e};emptyWidgets(){if(!this.props.userInput)throw new Error("emptyWidgets called without providing userInput to Renderer");return L(this.state.widgetInfo,this.widgetIds,this.props.userInput,this.context.locale)}handleStateUpdate(e,t,n){this.setState(t=>({lastUsedWidgetId:n?t.lastUsedWidgetId:e}),()=>{setTimeout(()=>{const r=t&&t();n||this.props.onInteractWithWidget(e),!1!==r&&this._setCurrentFocus([e])},0)})}getUserInput(){const e=this.props.userInput;if(!e)throw new Error("getUserInput called without providing userInput to Renderer");return this.widgetIds.map(t=>e[t])}getUserInputMap(){const e=this.props.userInput;if(!e)throw new Error("getUserInputMap called without providing userInput to Renderer");return e}getWidgetIds=()=>this.widgetIds;getPromptJSON(){const{content:e}=this.props,t={};return this.widgetIds.forEach(e=>{const n=this.getWidgetInstance(e);t[e]=n?.getPromptJSON?.()||{}}),{content:e,widgets:t}}score(){if(!this.props.userInput)throw new Error("score called without providing userInput to Renderer");const e=D(this.state.widgetInfo,this.widgetIds,this.props.userInput,this.context.locale);return F(e)}handletranslationLintErrors=e=>{this._isMounted&&this.setState({translationLintErrors:e})};render(){const t=this.getApiOptions(),n=this.getContent(this.props,this.state);if(this.widgetIds=[],this.shouldRenderJiptPlaceholder(this.props,this.state)&&(this.translationIndex||(this.translationIndex=zd().rendererTranslationComponents.addComponent(this)),!t.isArticle))return e.jsx(Cm,{children:e.jsx("div",{"data-perseus-component-index":this.translationIndex,children:n})});this._isTwoColumn=!1;const r=this.props.inline?iv.parseInline(n,{isJipt:null!=this.translationIndex}):iv.parse(n,{isJipt:null!=this.translationIndex});if(this.props.linterContext.highlightLint){const e={content:this.props.content,widgets:this.props.widgets,...this.props.linterContext};z(r,e),this._translationLinter.applyLintErrors(r,[...this.state.translationLintErrors,...this.props.legacyPerseusLint||[]])}const i=this.outputMarkdown(r,{baseElements:t.baseElements}),o=f({[$m]:!0,[Um]:!0,[Wm]:this._isTwoColumn});return e.jsx(Cm,{children:e.jsx("div",{className:o,children:i})})}}const _v={mobileZoomableParentFix:{transform:"translate3d(0,0,0)"}},{pureXsMax:Sv,pureSmMax:kv,pureMdMin:Cv,pureMdMax:Mv,pureLgMin:Iv,pureLgMax:Pv,pureXlMin:Tv}=Rh,Ev={md:`@media screen and (min-width: ${Cv}) and (max-width: ${Mv})`,xl:`@media screen and (min-width: ${Tv})`,xsOrSmaller:`@media screen and (max-width: ${Sv})`,smOrSmaller:`@media screen and (max-width: ${kv})`,mdOrSmaller:`@media screen and (max-width: ${Mv})`,lgOrSmaller:`@media screen and (max-width: ${Pv})`,lgOrLarger:`@media screen and (min-width: ${Iv})`};function jv(e,t){const n={};return e?(Object.entries(e).forEach(([e,r])=>{const i=gv(r.type);r.static&&i?.getCorrectUserInput?n[e]=i.getCorrectUserInput(r.options):i?.getStartUserInput&&(n[e]=i.getStartUserInput(r.options,t??0))}),n):n}function Rv(e){const[t,n]=wt.useState(e.initialUserInput||jv(e.widgets,e.problemNum??0));return e.children({userInput:t,handleUserInput:function(r,i,o){const s={...t,[r]:i};n(s),e.handleUserInput?.(s,o)},initializeUserInput:function(t,r){n(e.initialUserInput||jv(t,r))}})}class Av extends wt.Component{static contextType=Ld;rendererRef=wt.createRef();static defaultProps={linterContext:j};getSerializedState=()=>this.rendererRef.current?.getSerializedState();render(){const{apiOptions:t,className:n,hint:r,lastHint:i,lastRendered:o,pos:s,totalHints:a}=this.props,{isMobile:l}=t,c=f("hint",!l&&"perseus-hint-renderer",l&&C(Nv.newHint),l&&o&&C(Nv.lastRenderedNewHint),i&&"last-hint",o&&"last-rendered",n),u={...t,customKeypad:!1};return e.jsxs("div",{className:c,tabIndex:"-1",children:[!t.isMobile&&e.jsx("span",{className:"perseus-sr-only",children:this.context.strings.hintPos({pos:s+1})}),!t.isMobile&&null!=a&&null!=s&&e.jsx("span",{className:"perseus-hint-label",style:{display:"block",color:t.hintProgressColor},children:`${s+1} / ${a}`}),e.jsx(Rv,{widgets:r.widgets,problemNum:0,children:({userInput:t,handleUserInput:n,initializeUserInput:i})=>e.jsx(wv,{ref:this.rendererRef,userInput:t,handleUserInput:n,initializeUserInput:i,widgets:r.widgets,content:r.content||"",images:r.images,apiOptions:u,findExternalWidgets:this.props.findExternalWidgets,linterContext:N(this.props.linterContext,"hint"),strings:this.context.strings})})]})}}const Nv=k.create({newHint:{marginBottom:24,borderLeftColor:vh,borderLeftStyle:"solid",borderLeftWidth:4,[Ev.lgOrSmaller]:{paddingLeft:Ch},[Ev.smOrSmaller]:{paddingLeft:0},":focus":{outline:"none"}},lastRenderedNewHint:{marginBottom:0,borderLeftColor:gh}}),{radioBorderColor:Lv,checkedColor:Ov,circleSize:Dv,radioMarginWidth:Fv}=Rh,zv=k.create({blankBackground:{backgroundColor:"#FDFDFD"},perseusSrOnly:{border:0,clip:"rect(0,0,0,0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1},responsiveLabel:{[Ev.smOrSmaller]:{fontSize:14,lineHeight:1.3},[Ev.md]:{fontSize:17,lineHeight:1.4},[Ev.lgOrLarger]:{fontSize:20,lineHeight:1.4}},responsiveInput:{display:"inline-block",WebkitAppearance:"none",appearance:"none","::-ms-check":{display:"none"},backgroundColor:"#fff",border:"2px solid #fff",boxShadow:`0 0px 0px 1px ${Lv}`,outline:"none",boxSizing:"border-box",flexShrink:0,marginBottom:1,marginLeft:1,marginRight:1,marginTop:1,height:Dv-2,width:Dv-2},responsiveRadioInput:{borderRadius:"50%",":checked":{backgroundColor:Ov,border:"none",borderRadius:"50%",boxShadow:`inset 0px 0px 0px 2px white, 0 0px 0px 2px ${Ov}`,marginTop:Fv,marginBottom:Fv,marginLeft:Fv,marginRight:Fv,height:Dv-2*Fv,width:Dv-2*Fv}},responsiveRadioInputActive:{backgroundColor:"#fff",border:"2px solid #fff",borderRadius:"50%",boxShadow:`0 0px 0px 2px ${Ov}`,marginTop:Fv,marginBottom:Fv,marginLeft:Fv,marginRight:Fv,height:Dv-2*Fv,width:Dv-2*Fv,":checked":{backgroundColor:"#fff"}},disableTextSelection:{userSelect:"none"}});class Bv extends wt.Component{static contextType=Ld;static defaultProps={linterContext:j};state={isFinalHelpPage:!1};componentDidMount(){this._cacheHintImages()}UNSAFE_componentWillReceiveProps(e){e.hintsVisible-this.props.hintsVisible>1&&this.setState({isFinalHelpPage:!0})}componentDidUpdate(e,t){r.isEqual(e.hints,this.props.hints)&&e.hintsVisible===this.props.hintsVisible||this._cacheHintImages();const i=e.hintsVisible||0,o=this.props.hintsVisible||0;if(i<o&&o<=this.props.hints.length&&o>=0){const e=o-1;n.findDOMNode(this.refs["hintRenderer"+e]).focus()}}_hintsVisible=()=>null==this.props.hintsVisible||-1===this.props.hintsVisible?this.props.hints.length:this.props.hintsVisible;_cacheImagesInHint=e=>{r.each(e.images,(e,t)=>{(new Image).src=Jd.getRealImageUrl(t)})};_cacheHintImages=()=>{this._hintsVisible()>0?r.each(this.props.hints,this._cacheImagesInHint):this.props.hints.length>0&&this._cacheImagesInHint(this.props.hints[0])};getApiOptions=()=>({...Bm.defaults,...this.props.apiOptions,readOnly:!1});getSerializedState=()=>r.times(this._hintsVisible(),e=>this.refs["hintRenderer"+e].getSerializedState());render(){const t=this.getApiOptions(),n=this._hintsVisible(),r=[],i=this.state.isFinalHelpPage;this.props.hints.slice(0,n).forEach((o,s)=>{const a=s===this.props.hints.length-1&&!/\*\*/.test(o.content),l=s===n-1,c=e.jsx(Av,{lastHint:a,lastRendered:l,hint:o,pos:s,totalHints:this.props.hints.length,ref:"hintRenderer"+s,apiOptions:t,findExternalWidgets:this.props.findExternalWidgets,linterContext:N(this.props.linterContext,"hints["+s+"]")},"hintRenderer"+s);i?r.push(c):o.replace&&r.length>0?r[r.length-1]=c:r.push(c)});const{getAnotherHint:o}=t,s=o&&n>0&&n<this.props.hints.length,a=`(${n}/${this.props.hints.length})`,l=f(this.props.className,t.isMobile&&n>0&&C($v.mobileHintStylesHintsRenderer));return e.jsxs("div",{className:l,children:[t.isMobile&&n>0&&e.jsx("div",{className:C($v.mobileHintStylesHintTitle,zv.responsiveLabel),children:this.context.strings.hints}),r,s&&e.jsxs("button",{rel:"button",className:C($v.linkButton,$v.getAnotherHintButton,t.isMobile&&$v.mobileHintStylesGetAnotherHintButton),onClick:e=>{e.preventDefault(),e.stopPropagation(),o&&o()},children:[e.jsx("span",{className:C($v.plusText,t.isMobile&&$v.mobileHintStylesPlusText),children:"+"}),e.jsxs("span",{className:C($v.getAnotherHintText),children:[this.context.strings.getAnotherHint," ",a]})]})]})}}const $v=k.create({rendererMargins:{marginTop:Ch},linkButton:{cursor:"pointer",border:"none",backgroundColor:"transparent",fontSize:"100%",fontFamily:"inherit",fontWeight:"bold",color:gh,padding:0,position:"relative"},plusText:{fontSize:20,position:"absolute",top:-3,left:0},getAnotherHintText:{marginLeft:16},mobileHintStylesHintsRenderer:{marginTop:64,border:`solid ${yh}`,borderWidth:"1px 0 0 0",position:"relative",":before":{content:'""',display:"table",clear:"both"},":after":{content:'""',display:"table",clear:"both"}},mobileHintStylesHintTitle:{fontFamily:"inherit",fontStyle:"normal",fontWeight:"bold",color:wh,paddingTop:Ch,paddingBottom:24,[Ev.lgOrSmaller]:{paddingLeft:0},[Ev.smOrSmaller]:{paddingLeft:20}},getAnotherHintButton:{marginTop:24},mobileHintStylesGetAnotherHintButton:{[Ev.lgOrSmaller]:{paddingLeft:0},[Ev.smOrSmaller]:{paddingLeft:20}},mobileHintStylesPlusText:{[Ev.lgOrSmaller]:{left:0},[Ev.smOrSmaller]:{left:20}}}),Wv=wt.createContext({onRendered:e=>{}});class Uv extends wt.Component{static contextType=Ld;questionRenderer;hintsRenderer;_currentFocus;_fullyRendered;blurTimeoutID;userInput;static defaultProps={apiOptions:{},linterContext:j,onRendered:e=>{}};constructor(e){super(e),this.state={questionCompleted:!1,questionHighlightedWidgets:[],assetStatuses:{}},this._fullyRendered=!1,this.userInput={}}componentDidMount(){this._currentFocus=null,this._fullyRendered=!1,this.maybeCallOnRendered()}UNSAFE_componentWillReceiveProps(e){this.setState({questionHighlightedWidgets:[]})}componentDidUpdate(e,t){const n=this.props.apiOptions.answerableCallback;if(null!=n){n(0===this.questionRenderer.emptyWidgets().length)}if(this.maybeCallOnRendered(),this.props.score&&this.props.score!==e.score){const e=this.questionRenderer.emptyWidgets();this.setState({questionCompleted:this.props.score.correct,questionHighlightedWidgets:e})}}componentWillUnmount(){null!=this.blurTimeoutID&&(clearTimeout(this.blurTimeoutID),this.blurTimeoutID=null)}maybeCallOnRendered(){if(!this._fullyRendered){Object.values(this.state.assetStatuses).every(Boolean)&&(this._fullyRendered=!0,this.props.onRendered(!0))}}_handleFocusChange=(e,t)=>{null!=e?this._setCurrentFocus(e):this._onRendererBlur(t)};_setCurrentFocus(e){const{apiOptions:{isMobile:t,onFocusChange:n},keypadElement:r}=this.props,i=this._currentFocus;this._currentFocus=e;const o=this.getInputPaths(),s=this._currentFocus&&o.some(e=>Jd.inputPathsEqual(e,this._currentFocus));null!=n&&setTimeout(()=>{const t=r?.getDOMNode(),o=t&&s?t.getBoundingClientRect().height:0;n(this._currentFocus,i,o,s&&this.questionRenderer.getDOMNodeForPath(e))},0),r&&t&&(s?r.activate():r.dismiss())}_onRendererBlur(e){const t=this._currentFocus;r.isEqual(e,t)&&(this.blurTimeoutID=setTimeout(()=>{r.isEqual(this._currentFocus,t)&&this._setCurrentFocus(null)},0))}focusPath(e){return this.questionRenderer.focusPath(e)}blurPath(e){return this.questionRenderer.blurPath(e)}getDOMNodeForPath(e){return this.questionRenderer.getDOMNodeForPath(e)}getInputPaths(){return this.questionRenderer.getInputPaths()}handleInteractWithWidget=e=>{const t=r.difference(this.state.questionHighlightedWidgets,[e]);this.setState({questionCompleted:!1,questionHighlightedWidgets:t},()=>{this.props.apiOptions?.interactionCallback?.(this.questionRenderer.getUserInputMap())})};focus(){return this.questionRenderer.focus()}blur(){this._currentFocus&&this.blurPath(this._currentFocus)}getNumHints(){return this.props.item.hints.length}getPromptJSON(){return this.questionRenderer.getPromptJSON()}getUserInputLegacy(){return this.questionRenderer.getUserInput()}getUserInput(){return this.userInput}getWidgetIds(){return this.questionRenderer.getWidgetIds()}getSerializedState(){return{question:this.questionRenderer.getSerializedState(),hints:this.hintsRenderer.getSerializedState()}}setAssetStatus=(e,t)=>{const n={...this.state.assetStatuses,[e]:t};this.setState({assetStatuses:n})};render(){const t={...Bm.defaults,...this.props.apiOptions,onFocusChange:this._handleFocusChange},n={assetStatuses:this.state.assetStatuses,setAssetStatus:this.setAssetStatus},r=e.jsx(jd.Provider,{value:n,children:e.jsx(Rv,{widgets:this.props.item.question.widgets,problemNum:this.props.problemNum??0,children:({userInput:n,handleUserInput:r,initializeUserInput:i})=>(this.userInput=n,e.jsx(wv,{keypadElement:this.props.keypadElement,problemNum:this.props.problemNum,onInteractWithWidget:this.handleInteractWithWidget,highlightedWidgets:this.state.questionHighlightedWidgets,apiOptions:t,questionCompleted:this.state.questionCompleted,reviewMode:this.props.reviewMode,showSolutions:this.props.showSolutions,ref:e=>{null!=e&&(this.questionRenderer=e)},content:this.props.item.question.content,widgets:this.props.item.question.widgets,images:this.props.item.question.images,linterContext:N(this.props.linterContext,"question"),strings:this.context.strings,...this.props.dependencies,userInput:n,handleUserInput:(e,t,n)=>{r(e,t,n),this.handleInteractWithWidget(e)},initializeUserInput:i}))})}),i=e.jsx(Bv,{hints:this.props.item.hints,hintsVisible:this.props.hintsVisible,apiOptions:t,ref:e=>this.hintsRenderer=e,linterContext:N(this.props.linterContext,"hints"),strings:this.context.strings});return e.jsx(Bd.Provider,{value:this.props.dependencies,children:e.jsxs("div",{children:[e.jsx("div",{children:r}),e.jsx("div",{className:t.isMobile?void 0:C(Hv.hintsContainer),children:i})]})})}}const Hv=k.create({hintsContainer:{marginLeft:50}});wt.forwardRef(function(t,n){return e.jsx(Wv.Consumer,{children:({onRendered:r})=>e.jsx(Uv,{...t,item:t.item,dependencies:t.dependencies,onRendered:r,ref:n})})});const qv=k.create({srOnly:{border:0,clip:"rect(0,0,0,0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1}}),Vv=(e,t)=>{let n=null;return(...r)=>{n&&clearTimeout(n),n=window.setTimeout(()=>{e(...r)},t)}};class Gv extends wt.Component{static contextType=Ld;context;mouseDown;__mathFieldWrapperRef=null;__mathField=null;static defaultProps={value:"",convertDotToTimes:!1};state={focused:!1,keypadOpen:"always"===this.props.buttonsVisible,cursorContext:H.NONE};componentDidMount(){this.mathField()?.latex(this.props.value)}openKeypad(){"never"!==this.props.buttonsVisible&&this.setState({keypadOpen:!0})}closeKeypad(){this.setState({keypadOpen:!1})}insert=e=>{const t=this.mathField(),{locale:n}=this.context,i={...q(n,this.context.strings),FRAC:e=>{const t=e.latex();e.typedText("/"),e.latex()===t&&e.cmd("\\frac")}}[e];if(i)return i(t,e),void t?.focus();r(e).isFunction()?e(t):"\\"===e[0]?t?.cmd(e).focus():t?.write(e).focus(),t?.focus()};mathField=()=>{if(!this.__mathField&&this.__mathFieldWrapperRef){const{locale:e}=this.context;this.__mathField=V(this.__mathFieldWrapperRef,e,this.props.mathInputStrings,t=>({...t,handlers:{edit:Vv(t=>{let n=t.latex();if(n=n.replace(/<>/g,"\\ne"),te(e,this.props.convertDotToTimes)){n=n.replace(/\\cdot/g,"\\times");const e=t.cursor()[ne.L];e&&"\\cdot "===e.ctrlSeq&&(t.controller().backspace(),t.cmd("\\times"))}else n=n.replace(/\\times/g,"\\cdot");this.props.value!==n&&this.props.onChange(n),this.setState({cursorContext:G(t)})},100),enter:()=>{this.__mathFieldWrapperRef&&p(this.__mathFieldWrapperRef).submit()},upOutOf:e=>{e.typedText("^")}}}))}return this.__mathField?.setAriaLabel(this.props.ariaLabel),this.__mathField};focus=()=>{this.mathField()?.focus(),this.setState({focused:!0})};blur=()=>this.setState({focused:!1});handleKeypadPress=(e,t)=>{const{locale:n}=this.context,r=q(n,this.context.strings)[e],i=this.mathField();i&&(r&&r(i,e),this.setState({cursorContext:G(i)})),"click"===t?.type&&this.focus(),"DISMISS"===e&&this.closeKeypad()};render(){let t=f({"perseus-math-input":!0,"mq-editable-field":!0,"mq-math-mode":!0});const n=Y().slice(0,8);return this.props.className&&(t=t+" "+this.props.className),e.jsx(X,{style:[Zv.outerWrapper,this.state.focused&&Zv.wrapperFocused],children:e.jsxs("div",{style:{display:"flex",padding:1},onClick:e=>{e.stopPropagation();const t=this.mathField();t&&this.setState({cursorContext:G(t)})},children:[e.jsx("span",{className:t,ref:e=>this.__mathFieldWrapperRef=e,onFocus:()=>this.focus(),onBlur:()=>this.blur()}),e.jsx(K,{opened:this.state.keypadOpen,dismissEnabled:!0,rootBoundary:"document","aria-label":this.context.strings.mathInputTitle,"aria-describedby":`popover-content-${n}`,content:()=>e.jsxs(e.Fragment,{children:[e.jsx(Z,{id:`popover-content-${n}`,style:qv.srOnly,children:this.context.strings.mathInputDescription}),e.jsx(J,{style:Zv.popoverContent,children:e.jsx(ee,{onAnalyticsEvent:this.props.onAnalyticsEvent,extraKeys:this.props.extraKeys,onClickKey:this.handleKeypadPress,cursorContext:this.state.cursorContext,convertDotToTimes:this.props.convertDotToTimes,...this.props.keypadButtonSets??Kv(this.props?.buttonSets),showDismiss:!0})})]}),children:"never"===this.props.buttonsVisible?e.jsx(Xv,{hovered:!1,focused:!1,active:!1}):e.jsx(Q,{"aria-label":this.state.keypadOpen?this.context.strings.closeKeypad:this.context.strings.openKeypad,role:"button",onClick:()=>this.state.keypadOpen?this.closeKeypad():this.openKeypad(),children:t=>e.jsx(Xv,{active:this.state.keypadOpen,...t})})})]})})}}class Yv extends wt.Component{static contextType=U;context;inputRef=wt.createRef();static defaultProps={ariaLabel:"Math input"};blur(){this.inputRef.current?.blur()}focus(){this.inputRef.current?.focus()}insert(e){this.inputRef.current?.insert(e)}render(){return e.jsx(Gv,{...this.props,ref:this.inputRef,mathInputStrings:this.context.strings})}}const Xv=({hovered:t,focused:n,active:r})=>{let i;switch(!0){case n||r:i=y.white;break;case t:i=y.blue;break;default:i=y.offBlack}const o=r||n?Zv.iconActive:Zv.iconInactive;return e.jsx(X,{style:[Zv.iconContainer,o],children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:i,viewBox:"0 0 256 256",children:e.jsx("path",{d:"M112,72a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16h64A8,8,0,0,1,112,72Zm-8,104H80V152a8,8,0,0,0-16,0v24H40a8,8,0,0,0,0,16H64v24a8,8,0,0,0,16,0V192h24a8,8,0,0,0,0-16Zm48,0h64a8,8,0,0,0,0-16H152a8,8,0,0,0,0,16Zm64,16H152a8,8,0,0,0,0,16h64a8,8,0,0,0,0-16Zm-61.66-90.34a8,8,0,0,0,11.32,0L184,83.31l18.34,18.35a8,8,0,0,0,11.32-11.32L195.31,72l18.35-18.34a8,8,0,0,0-11.32-11.32L184,60.69,165.66,42.34a8,8,0,0,0-11.32,11.32L172.69,72,154.34,90.34A8,8,0,0,0,154.34,101.66Z"})})})},Kv=e=>{const t={};return e?(e.forEach(e=>{switch(e){case"advanced relations":t.advancedRelations=!0;break;case"basic relations":t.basicRelations=!0;break;case"basic+div":t.divisionKey=!0;break;case"logarithms":t.logarithms=!0;break;case"prealgebra":t.preAlgebra=!0;break;case"trig":t.trigonometry=!0;break;case"scientific":t.scientific=!0}}),t):t},Qv={borderWidth:2,borderColor:y.blue,margin:-1},Zv=k.create({iconContainer:{display:"flex",justifyContent:"center",height:"100%",padding:W.xxxSmall_4,borderRadius:1},iconInactive:{border:"2px solid transparent",backgroundColor:y.offBlack8},iconActive:{border:`2px solid ${y.white}`,backgroundColor:y.offBlack64},outerWrapper:{display:"inline-block",borderStyle:"solid",borderWidth:1,borderColor:y.offBlack50,borderRadius:3,background:y.white,":hover":Qv},wrapperFocused:Qv,popoverContent:{padding:0,paddingBottom:W.xxSmall_6,maxWidth:"initial"}}),Jv={arctg:"arctan",cosec:"csc",cossec:"csc",cotg:"cot",ctg:"cot",sen:"sin",tg:"tan"},ey=e=>(e=>e.replace(/\\operatorname{([a-z]+)}/g,(e,t)=>`\\${Jv[t]??t} `))(e);class ty extends wt.Component{static contextType=Ld;_textareaId=`expression_textarea_${Date.now()}`;_isMounted=!1;static defaultProps={times:!1,functions:[],buttonSets:["basic","trig","prealgebra","logarithms"],onFocus:()=>{},onBlur:()=>{},apiOptions:Bm.defaults,linterContext:j,userInput:""};displayName="Expression";componentDidMount=()=>{if(this._isMounted=!0,this.refs.input){const e=this.props.apiOptions.customKeypad?".mq-textarea > span":"textarea",t=n.findDOMNode(this.refs.input).querySelector(e);t?.setAttribute("id",this._textareaId)}};componentWillUnmount=()=>{this._isMounted=!1};getUserInput(){return ey(this.props.userInput)}getPromptJSON(){return e=this.props,t=ey(this.props.userInput),{type:"expression",label:e.visibleLabel,userInput:{value:t}};var e,t}changeAndTrack=(e,t)=>{this.props.handleUserInput(ey(e),t),this.props.trackInteraction()};_handleFocus=()=>{this.props.analytics?.onAnalyticsEvent({type:"perseus:expression-focused",payload:null}),this.props.onFocus([])};_handleBlur=()=>{this.props.onBlur([])};focus=()=>(this.props.apiOptions.customKeypad&&this.refs.input.focus(),!0);focusInputPath(e){this.refs.input.focus()}blurInputPath(e){"function"==typeof this.refs.input?.blur&&this.refs.input?.blur()}insert(e){this.refs.input.insert(e)}getInputPaths=()=>[[]];getKeypadConfiguration(){return{keypadType:"EXPRESSION",extraKeys:this.props.extraKeys,times:this.props.times}}getSerializedState(){const{userInput:e,answerForms:t,...n}=this.props;return{...n,value:this.props.userInput,keypadConfiguration:this.getKeypadConfiguration()}}render(){const t=this.getKeypadConfiguration();return this.props.apiOptions.customKeypad?e.jsxs(X,{className:C(ny.mobileLabelInputWrapper),children:[!!this.props.visibleLabel&&e.jsx(ie,{htmlFor:this._textareaId,tag:"label",children:this.props.visibleLabel}),e.jsx(oe,{ref:"input",ariaLabel:this.props.ariaLabel||this.context.strings.mathInputBox,value:this.props.userInput,keypadElement:this.props.keypadElement,onChange:this.changeAndTrack,onFocus:()=>{this.props.keypadElement?.configure(t,()=>{this._isMounted&&this._handleFocus()})},onBlur:this._handleBlur})]}):e.jsxs(X,{className:C(ny.desktopLabelInputWrapper),children:[!!this.props.visibleLabel&&e.jsx(ie,{htmlFor:this._textareaId,tag:"label",children:this.props.visibleLabel}),e.jsx("div",{className:"perseus-widget-expression",children:e.jsx(Yv,{ref:"input",value:this.props.userInput,onChange:this.changeAndTrack,convertDotToTimes:this.props.times,buttonSets:this.props.buttonSets,onFocus:this._handleFocus,onBlur:this._handleBlur,ariaLabel:this.props.ariaLabel||this.context.strings.mathInputBox,extraKeys:t.extraKeys,onAnalyticsEvent:this.props.analytics?.onAnalyticsEvent??(async()=>{})})})]})}}const ny=k.create({mobileLabelInputWrapper:{padding:"15px 4px 0"},desktopLabelInputWrapper:{margin:"5px 5px 0"}});const ry={name:"expression",displayName:"Expression / Equation",widget:wt.forwardRef((t,n)=>{const r=$d();return e.jsx(ty,{ref:n,analytics:r.analytics,...t})}),version:re.version,isLintable:!0,getOneCorrectAnswerFromRubric:function(e){const t=(e.answerForms||[]).filter(e=>"correct"===e.considered);if(0!==t.length)return t[0].value},getStartUserInput:function(){return""},getUserInputFromSerializedState:function(e){return ey(e.value)}};class iy extends wt.Component{static contextType=ae;_isMounted=!1;inputRef=wt.createRef();componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}focus(){this.inputRef.current?.focus(this.context.setKeypadActive)}blur(){this.inputRef.current?.blur()}getValue(){return this.props.value}render(){const t=this,{keypadElement:n,onFocus:r,value:i,...o}=t.props;return e.jsx(oe,{ref:this.inputRef,keypadElement:n,onFocus:()=>{n?n.configure({keypadType:"FRACTION"},()=>{t._isMounted&&r?.()}):r?.()},value:null==i?"":""+i,...o})}}iy.propTypes={keypadElement:se,onFocus:Mt.func,value:Mt.oneOfType([Mt.string,Mt.number])};let oy=0;class sy extends wt.Component{inputRef=wt.createRef();static defaultProps={value:"",disabled:!1};id;constructor(e){super(e),e.id?this.id=e.id:this.id=function(e="input-"){return oy++,`${e}${oy}`}()}_getInput=()=>{if(!this.inputRef.current)throw new d("Input ref accessed before set",h.Internal);return this.inputRef.current};focus=()=>{this._getInput().focus()};blur=()=>{this._getInput().blur()};getValue=()=>this.inputRef.current?.value;getStringValue=()=>this.inputRef.current?.value.toString();setSelectionRange=(e,t)=>{this._getInput().setSelectionRange(e,t)};getSelectionStart=()=>this._getInput().selectionStart;getSelectionEnd=()=>this._getInput().selectionEnd;render(){const{labelText:t,value:n,onFocus:r,onBlur:i,disabled:o,placeholder:s,onKeyDown:a,style:l}=this.props,c=null===n?"":n.toString(),u=t||void 0;return e.jsx(le,{ref:this.inputRef,style:l,disabled:o,id:this.id,value:c,type:"text","aria-label":u,"aria-describedby":this.props["aria-describedby"],onChange:e=>this.props.onChange(e),placeholder:s,testId:"input-with-examples",onFocus:r,onBlur:i,onKeyDown:a,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off"})}}const{captureScratchpadTouchStart:ay}=Jd,ly=wt.forwardRef(function({shouldShowExamples:t=!0,onFocus:n=()=>{},onBlur:r=()=>{},disabled:i=!1,linterContext:o=j,className:s="",...a},l){const c=wt.useContext(Ld),u=wt.useRef(null),[d,h]=wt.useState(!1),p=wt.useId(),f=`aria-for-${p}`;wt.useImperativeHandle(l,()=>({current:u.current,focus:()=>{u.current&&u.current.focus()},blur:()=>{u.current&&u.current.blur()}}));const g=()=>{let e=Hm;return d&&(e+=" "+qm),s&&(e+=" "+s),e},m=()=>{n(),h(!0)},v=()=>{r(),h(!1)},y=a.examples.length<=2?a.examples.join(" "):a.examples.map((e,t)=>0===t&&e.startsWith("**")?`${e}\n`:`- ${e}`).join("\n"),x=t&&d;return e.jsx(ce,{content:e.jsx(ue,{children:e.jsx("div",{id:p,className:"input-with-examples-tooltip",children:e.jsx(wv,{content:y,linterContext:N(o,"input-with-examples"),strings:c.strings})})}),opened:x,placement:"bottom",children:(()=>{const n=t?`${a.examples[0]}\n                   ${a.examples.slice(1).join(", or\n")}`.replaceAll("*","").replaceAll("$","").replaceAll("\\ \\text{pi}"," pi").replaceAll("\\ "," and "):"",r={id:p,"aria-describedby":t?f:void 0,ref:u,className:g(),labelText:a.labelText,value:a.value,onFocus:m,onBlur:v,disabled:i,style:a.style,onChange:a.onChange,onTouchStart:ay,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:"false"};return e.jsxs(e.Fragment,{children:[e.jsx(sy,{...r}),e.jsx("span",{id:f,style:{display:"none"},children:n})]})})()})}),cy={integer:function(e,t){return t.integerExample},proper:function(e,t){return"optional"===e.simplify?t.properExample:t.simplifiedProperExample},improper:function(e,t){return"optional"===e.simplify?t.improperExample:t.simplifiedImproperExample},mixed:function(e,t){return t.mixedExample},decimal:function(e,t){return t.decimalExample},percent:function(e,t){return t.percentExample},pi:function(e,t){return t.piExample}};class uy extends wt.Component{static contextType=Ld;static defaultProps={size:"normal",answerType:"number",rightAlign:!1,apiOptions:Bm.defaults,linterContext:j,userInput:{currentValue:""}};shouldShowExamples=()=>"number"!==this.props.answerType;handleChange=(e,t)=>{this.props.handleUserInput({currentValue:e},t)};_handleFocus=()=>{this.props.onFocus([])};_handleBlur=()=>{this.props.onBlur([])};focus=()=>(this.refs.input.focus(),!0);focusInputPath=e=>{this.refs.input.focus()};blurInputPath=e=>{"function"==typeof this.refs.input?.blur&&this.refs.input?.blur()};getInputPaths=()=>[[]];getPromptJSON(){return{type:"input-number",options:{simplify:(e=this.props).simplify,answerType:e.answerType},userInput:{value:e.userInput.currentValue}};var e}examples(){const{strings:e}=this.context,t=this.props.answerType,n=de[t].forms.split(/\s*,\s*/).map(t=>cy[t](this.props,e));return[e.yourAnswer].concat(n)}getSerializedState(){return{alignment:this.props.alignment,static:this.props.static,simplify:this.props.simplify,size:this.props.size,answerType:this.props.answerType,rightAlign:this.props.rightAlign,currentValue:this.props.userInput.currentValue}}render(){if(this.props.apiOptions.customKeypad){const t=e.jsx(iy,{ref:"input",value:this.props.userInput.currentValue,keypadElement:this.props.keypadElement,onChange:this.handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur});return this.props.rightAlign?e.jsx("div",{className:"perseus-input-right-align",children:t}):t}const t=[dy.default,"small"===this.props.size?dy.small:null,this.props.rightAlign?dy.rightAlign:dy.leftAlign];return this.props.reviewMode&&!this.props.userInput.currentValue&&t.push(dy.answerStateUnanswered),e.jsx(ly,{ref:"input",value:this.props.userInput.currentValue,onChange:this.handleChange,style:t,examples:this.examples(),shouldShowExamples:this.shouldShowExamples(),onFocus:this._handleFocus,onBlur:this._handleBlur,id:this.props.widgetId,disabled:this.props.apiOptions.readOnly,linterContext:this.props.linterContext})}}const dy=k.create({default:{width:80,height:"auto",direction:"ltr"},small:{width:40},leftAlign:{paddingLeft:W.xxxSmall_4,paddingRight:0},rightAlign:{textAlign:"right",paddingLeft:0,paddingRight:W.xxxSmall_4},answerStateUnanswered:{backgroundColor:"#eee",border:"solid 1px #999"}});const hy={name:"input-number",displayName:"Input number (deprecated - use numeric input instead)",hidden:!0,widget:uy,isLintable:!0,getOneCorrectAnswerFromRubric:function(e){if(null==e.value)return;let t=String(e.value);return e.inexact&&e.maxError&&(t+=" ± "+e.maxError),t},getStartUserInput:function(){return{currentValue:""}},getUserInputFromSerializedState:function(e){return{currentValue:e.currentValue}}},py={integer:(e,t)=>t.integerExample,proper:(e,t)=>"optional"===e.simplify?t.properExample:t.simplifiedProperExample,improper:(e,t)=>"optional"===e.simplify?t.improperExample:t.simplifiedImproperExample,mixed:(e,t)=>t.mixedExample,decimal:(e,t)=>t.decimalExample,pi:(e,t)=>t.piExample},fy=(e,t)=>{if(0===e.length)return[];const n=my(e).map(e=>py[e.name](e,t));return[t.yourAnswer].concat(n)},gy=e=>{if(0===e.length)return!1;return!(my(e).map(e=>e.name).length>=Object.keys(py).length)},my=function(e){const t=new Set;return e.filter(e=>!t.has(e.name)&&(t.add(e.name),!0))};function vy(e){return null==e?[]:function(e){const t=e.flat(),n=my(t),r=Object.keys(py);return n.sort((e,t)=>r.indexOf(e.name)-r.indexOf(t.name))}(e.filter(e=>"correct"===e.status).map(e=>(e.answerForms||[]).map(t=>({simplify:e.simplify,name:t}))))}const yy=wt.forwardRef(function(t,n){const r=wt.useContext(Ld),i=wt.useRef(null),[o,s]=wt.useState(!1);wt.useImperativeHandle(n,()=>({current:i.current,focus:()=>{i.current&&(i.current?.focus(),s(!0))},blur:()=>{i.current&&(i.current?.blur(),s(!1))}}));const a=e=>{t.handleUserInput({currentValue:e}),t.trackInteraction()},l=()=>{t.onFocus([]),s(!0)},c=()=>{t.onBlur([]),s(!1)},u=k.create({inputWithExamples:{borderRadius:"3px",borderWidth:o?"2px":"1px",display:"inline-block",fontFamily:'Symbola, "Times New Roman", serif',fontSize:"18px",height:"32px",lineHeight:"18px",padding:o?"4px":"4px 5px",textAlign:t.rightAlign?"right":"left",width:"small"===t.size?40:80,direction:"ltr"}});if(t.apiOptions.customKeypad){const n=t.rightAlign?"perseus-input-right-align":void 0;return e.jsx("div",{className:n,children:e.jsx(iy,{ref:i,value:t.userInput.currentValue,keypadElement:t.keypadElement,onChange:a,onFocus:l,onBlur:c})})}return e.jsx(ly,{ref:i,value:t.userInput.currentValue,onChange:a,labelText:t.labelText,examples:fy(t.answerForms,r.strings),shouldShowExamples:gy(t.answerForms),onFocus:l,onBlur:c,id:t.widgetId,disabled:t.apiOptions.readOnly,style:u.inputWithExamples})});class xy extends wt.Component{inputRef=wt.createRef();static defaultProps={size:"normal",rightAlign:!1,apiOptions:Bm.defaults,coefficient:!1,answerForms:[],labelText:"",linterContext:j,userInput:{currentValue:""}};focus=()=>(this.inputRef.current?.focus(),!0);focusInputPath=()=>{this.inputRef.current?.focus()};blurInputPath=()=>{this.inputRef.current?.blur()};getInputPaths=()=>[[]];getPromptJSON(){return{type:"numeric-input",label:(e=this.props).labelText,userInput:{value:e.userInput.currentValue}};var e}getSerializedState(){const{userInput:e,answers:t,...n}=this.props;return{...n,currentValue:e.currentValue}}render(){return e.jsx(yy,{...this.props,answerForms:vy(this.props.answers),ref:this.inputRef})}}const by={name:"numeric-input",displayName:"Numeric input",widget:xy,isLintable:!0,getOneCorrectAnswerFromRubric(e){const t=e.answers.filter(e=>"correct"===e.status).map(e=>{const t=e.answerForms&&e.answerForms[0]?e.answerForms[0]:"decimal";let n=Np.toNumericString(e.value,t);return e.maxError&&(n+=" ± "+Np.toNumericString(e.maxError,t)),n});if(0!==t.length)return t[0]},getStartUserInput:function(){return{currentValue:""}},getUserInputFromSerializedState:function(e){return{currentValue:e.currentValue}}},wy=(e,t)=>{const n=(e.choices||[]).map(e=>{const t={value:e.content,id:e.id};return e.rationale&&(t.rationale=e.rationale),t});return{type:"radio",hasNoneOfTheAbove:!!e.hasNoneOfTheAbove,options:n,userInput:{selectedOptions:t?.selectedChoiceIds??[]}}},_y={},Sy=new Map;const ky=function({overflowX:t,overflowY:n,children:r,className:i,scrollDescription:o,style:s,role:a="group",id:l,...c}){const{strings:u}=Dd(),d=wt.useRef(null),[h,p]=wt.useState(!1),[f,g]=wt.useState(!1),[m,v]=wt.useState(!1),y=wt.useId(),x=l||y,b=wt.useMemo(()=>window.innerWidth<=767?8:5,[]),w=wt.useCallback(e=>{if(!d.current||m)return;v(!0);const t=f&&"start"!==e||!f&&"start"===e?-100:100;d.current.scrollBy({left:t,behavior:"smooth"}),setTimeout(()=>{v(!1)},150)},[f,m]),_=wt.useCallback(()=>{if(!d.current)return;const{scrollLeft:e,scrollWidth:t,clientWidth:n}=d.current,r="rtl"===getComputedStyle(d.current).direction;g(r);const i=t>n+b;let s,a;p(i),r?(s=Math.abs(e)<t-n-b,a=e<-b):(s=e>b,a=e+n<t-b);const l={isScrollable:i,canScrollStart:s,canScrollEnd:a,isRTL:r,scroll:w,scrollDescription:o||u.scrollAnswers};Sy.set(x,l)},[x,b,o,u.scrollAnswers,w]);wt.useEffect(()=>{const e=d.current;if(e)return _(),e.addEventListener("scroll",_),window.addEventListener("resize",_),()=>{e.removeEventListener("scroll",_),window.removeEventListener("resize",_),Sy.delete(x)}},[r,_,x]);const S={overflowX:h&&"auto"===t?"scroll":t,overflowY:h&&"auto"===n?"scroll":n,scrollbarWidth:"thin",...s};return e.jsx("div",{...c,id:x,role:a,className:i,style:S,ref:d,children:r})};ky.Controls=function({target:t,scrollDescription:n}){const{strings:r}=Dd(),[i,o]=wt.useState(null);if(wt.useEffect(()=>{if(!t)return;const e=()=>{const e=Sy.get(t);e&&o(e)};e();const n=setInterval(e,100);return()=>{clearInterval(n)}},[t]),!i||!i.isScrollable)return null;const s=n||i.scrollDescription;return e.jsxs("div",{className:_y.scrollButtonsContainer,"aria-live":"polite",role:"group","aria-label":s,children:[e.jsx(he,{icon:i.isRTL?pe:fe,actionType:"neutral",kind:"secondary",size:"small",onClick:()=>i.isRTL?i.scroll("end"):i.scroll("start"),"aria-label":r.scrollStart,disabled:i.isRTL?!i.canScrollEnd:!i.canScrollStart}),e.jsx(he,{icon:i.isRTL?fe:pe,actionType:"neutral",kind:"secondary",size:"small",onClick:()=>i.isRTL?i.scroll("start"):i.scroll("end"),"aria-label":r.scrollEnd,disabled:i.isRTL?!i.canScrollStart:!i.canScrollEnd}),e.jsx(ie,{children:s})]})};const Cy={base:"_base_dnwlh_1","is-correct":"_is-correct_dnwlh_37","is-wrong":"_is-wrong_dnwlh_37",icon:"_icon_dnwlh_62","circle-shape":"_circle-shape_dnwlh_103","square-shape":"_square-shape_dnwlh_118"},My=t=>{const{checked:n,content:r,showCorrectness:i}=t,o=wt.useId(),s=r.labelledBy?`${o} ${r.labelledBy}`:void 0,a=i?"true":"false",l=n&&"correct"===i?me:n&&"wrong"===i?ve:void 0,c=l?e.jsx(ge,{"aria-hidden":!0,className:Cy.icon,icon:l}):void 0,u=[Cy.base,Cy[t.shape+"-shape"]];i&&u.push(Cy["is-"+i]);const d=i?void 0:e=>{e.stopPropagation(),t.updateChecked(!n)};return e.jsxs("button",{"aria-describedby":r.describedBy,"aria-disabled":a,"aria-pressed":n,"aria-label":r.screenReader,"aria-labelledby":s,className:u.join(" "),id:o,type:"button",ref:t.buttonRef,onClick:d,children:[c,r.visible]})},Iy={choice:"_choice_1i100_6","is-correct":"_is-correct_1i100_42","is-wrong":"_is-wrong_1i100_125"},Py=t=>{const n=t.showCorrectness,r=wt.useRef(null),i=t.isMultiSelect?"square":"circle",o=n?void 0:()=>{r.current?.click()},s=[Iy.choice].concat(n?[Iy["is-"+n]]:[]).join(" ");return e.jsxs("li",{className:s,onClick:o,children:[e.jsx(My,{buttonRef:r,checked:t.checked,content:t.indicatorContent,shape:i,showCorrectness:n,updateChecked:t.updateChecked}),t.children]})},Ty={container:"_container_1kr7k_1",content:"_content_1kr7k_83",instructions:"_instructions_1kr7k_92",rationale:"_rationale_1kr7k_103"};function Ey(e,t){const n=t.letters.split(" ");return e<n.length?n[e]:" "}function jy(e){const t=[];if(e.choiceStates){const n=e.choiceStates;for(let r=0;r<n.length;r++)n[r].selected&&t.push(e.choices[r].id);return{selectedChoiceIds:t}}return{selectedChoiceIds:t}}function Ry(e,t,n,i){const o=e.map((e,t)=>({...e,originalIndex:t,correct:Boolean(e.correct)}));return function(e){let t=null;const n=e.filter((e,n)=>!e.isNoneOfTheAbove||(t=e,!1));return t&&n.push(t),n}(function(e,t){const n=[[t.false,t.true],[t.no,t.yes]],i=e.map(e=>e.content);return n.some(e=>r.isEqual(i,e))?[e[1],e[0]]:e}(t?ye(o,i):o,n))}const Ay=({choices:t,countChoices:n,multipleSelect:r=!1,numCorrect:i,onChoiceChange:o,reviewMode:s})=>{const{strings:a}=Dd(),l=wt.useId(),c=(({multipleSelect:e,countChoices:t,numCorrect:n,strings:r})=>e?xe(e,!!t,n)?r.chooseNumAnswers({numCorrect:String(n)}):r.chooseAllAnswers:r.chooseOneAnswer)({multipleSelect:r,countChoices:n,numCorrect:i,strings:a}),u=s?`${Ty.choiceList} ${Ty.reviewAnswers}`:Ty.choiceList,d=wt.useId()+"-scroll";return e.jsxs(e.Fragment,{children:[e.jsxs("fieldset",{className:Ty.container,"data-feature-flag":"feature flag is ON",children:[e.jsx("legend",{id:l,"aria-hidden":"true",className:Ty.instructions,children:c}),e.jsx(ky,{id:d,overflowX:"auto",children:e.jsx("ul",{"aria-labelledby":l,className:u,children:e.jsx(Ny,{choices:t,i18nStrings:a,onChoiceChange:o,reviewMode:s,multipleSelect:r})})})]}),e.jsx(ky.Controls,{target:d})]})},Ny=t=>{const{choices:n,i18nStrings:r,multipleSelect:i,onChoiceChange:o,reviewMode:s}=t,a=wt.useId(),l=n.map((t,n)=>{const l=`${a}-choice-${n+1}`,c=Ey(n,r),u={visible:c,screenReader:(s&&t.correct?r.choiceCorrect:r.choice)({letter:c}),labelledBy:l},d=s?t.correct?"correct":"wrong":void 0,h=t.isNoneOfTheAbove?r.noneOfTheAbove:t.content;let p;if(s&&t.hasRationale){const n=`${l}-rationale`;u.describedBy=n;const r="correct"===d?`${Ty.rationale} ${Ty.isCorrect}`:Ty.rationale;p=e.jsx("div",{id:n,className:r,children:t.rationale})}return e.jsx(Py,{checked:t.checked,indicatorContent:u,isMultiSelect:i,showCorrectness:d,updateChecked:e=>{o(t.id,e)},children:e.jsxs("div",{className:Ty.content,children:[e.jsx("div",{id:l,children:h}),p]})},t.id)});return e.jsx(e.Fragment,{children:l})};function Ly(e,t,n,r){let i;return i="start"===t&&"start"===r?Range.START_TO_START:"start"===t&&"end"===r?Range.END_TO_START:"end"===t&&"start"===r?Range.START_TO_END:Range.END_TO_END,e.compareBoundaryPoints(i,n)}function Oy(e,t){const n=e.cloneRange();return n.setEnd(t.endContainer,t.endOffset),n}function Dy(e,t){return!(Ly(e,"end",t,"start")<0||Ly(t,"end",e,"start")<0)}function Fy(e,t){return Ly(e,"start",t,"start")<=0&&Ly(e,"end",t,"end")>=0}function zy(e,t){if(!Dy(e,t))return null;return Oy(Ly(e,"start",t,"start")<0?e:t,Ly(e,"end",t,"end")>0?e:t)}function By(e,t,n,r,i){let o=-1,s=r,a=i,l=0;for(;s<=a;){if(l++,l>2*t.length)throw new Error(`Assertion error: Binary search isn't terminating? lower=${s}, upper=${a}`);const r=Math.floor((s+a)/2);if("first"===n){Ly(t[r],"end",e,"start")<=0?s=r+1:(o=r,a=r-1)}else{Ly(t[r],"start",e,"end")>=0?a=r-1:(o=r,s=r+1)}}return o}function $y(e,t){const n={};let r=t.domRange,i=t.firstWordIndex,o=t.lastWordIndex;for(const l of Object.keys(e)){const t=e[l],s=zy(t.domRange,r);s?(r=s,i=Math.min(t.firstWordIndex,i),o=Math.max(t.lastWordIndex,o)):n[l]=t}const s={firstWordIndex:i,lastWordIndex:o,domRange:r},a=function(e){const t=`${(new Date).getTime()}`;if(!e.includes(t))return t;let n,r=0;do{n=`${t}-${r}`,r++}while(e.includes(n));return n}(Object.keys(n));return n[a]=s,n}function Wy(e,t,n){for(const s of Object.keys(e)){if(Fy(e[s].domRange,n))return null}const r=function(e,t){const n=By(e,t,"first",0,t.length-1);if(n<0)return null;const r=By(e,t,"last",n,t.length-1);return r<0?null:[n,r]}(n,t);if(!r)return null;const[i,o]=r;return{firstWordIndex:i,lastWordIndex:o,domRange:Oy(t[i],t[o])}}function Uy(e,t){const{firstWordIndex:n,lastWordIndex:r}=e.range,i=t[n];if(!i)throw new d(`first word index ${i} is out of bounds: must be 0–${t.length-1} inclusive`,h.InvalidInput,{metadata:{firstWord:i,wordRanges:JSON.stringify(t)}});const o=t[r];if(!o)throw new d(`last word index ${o} is out of bounds: must be 0–${t.length-1} inclusive`,h.InvalidInput,{metadata:{lastWord:o,wordRanges:JSON.stringify(t)}});return{firstWordIndex:n,lastWordIndex:r,domRange:Oy(i,o)}}function Hy(e){const{firstWordIndex:t,lastWordIndex:n}=e;return{range:{type:"word-indexes",firstWordIndex:t,lastWordIndex:n}}}function qy(e,t){return{left:e.left-t.left,top:e.top-t.top}}function Vy({left:e,top:t,width:n,height:r},i){return{...qy({left:e,top:t},i),width:n,height:r}}function Gy(e){const t=[];return Yy(e.commonAncestorContainer,e,t),t}function Yy(e,t,n){const r=new Range;if(r.selectNodeContents(e),e.nodeType===Node.TEXT_NODE){const s=Dy(i=t,o=r)?Oy(Ly(i,"start",o,"start")>0?i:o,Ly(i,"end",o,"end")<0?i:o):null;s&&function(e,t,n){const r=e.parentElement,i=window.getComputedStyle(r);let o=null;if("string"==typeof i.lineHeight&&i.lineHeight.endsWith("px")){const e=parseFloat(i.lineHeight);isNaN(e)||(o=e)}const s=Array.from(t.getClientRects());for(const a of s){const e={left:a.left,top:a.top,height:a.height,width:a.width};if(null!==o){const t=o-e.height;e.top-=t,e.height=o}n.push(e)}}(e,s,n)}else if(e.nodeType===Node.ELEMENT_NODE){if(!Dy(t,r))return;for(const r of Array.from(e.childNodes))Yy(r,t,n)}var i,o}class Xy extends wt.PureComponent{state={cachedHighlightRects:this._computeRects(this.props),tooltipIsHovered:!1};UNSAFE_componentWillReceiveProps(e){this.props.highlight===e.highlight&&this.props.offsetParent===e.offsetParent||this.setState({cachedHighlightRects:this._computeRects(e)})}_computeRects(e){const{highlight:t,offsetParent:n}=e,r=Gy(t.domRange),{left:i,top:o}=n.getBoundingClientRect();return r.map(e=>Vy(e,{left:i,top:o}))}_rectIsHovered(e,t){const n=qy(t,{left:e.left,top:e.top});return 0<=n.left&&n.left<e.width&&0<=n.top&&n.top<e.height}isHovered(e){if(!e)return!1;const{offsetParent:t}=this.props,{cachedHighlightRects:n}=this.state,{left:r,top:i}=t.getBoundingClientRect(),o=qy(e,{left:r,top:i});return n.some(e=>this._rectIsHovered(e,o))}render(){const t=this.state.cachedHighlightRects;return e.jsx("div",{children:t.map((t,n)=>e.jsx("div",{className:C(Ky.highlightRect),style:{position:"absolute",width:t.width,height:t.height,top:t.top,left:t.left,zIndex:this.props.zIndexes.belowContent}},n))})}}const Ky=k.create({highlightRect:{background:"#fffabe"}});class Qy extends wt.PureComponent{_getFocusRect(){const{focusNode:e,focusOffset:t,offsetParent:n}=this.props,r=document.createRange();r.setStart(e,t),r.setEnd(e,t);const i=r.getClientRects()[0];if(!i)return eh('[Highlighting] Known bug: Could not determine the focus position, so did not show an "Add Highlight" tooltip. https://app.asana.com/0/329800276300868/413878480039713 (see also /r/asana-links)'),null;const{left:o,top:s}=n.getBoundingClientRect();return Vy({left:i.left,top:i.top,width:i.width,height:i.height},{left:o,top:s})}render(){const t=this._getFocusRect();if(!t)return null;const n=e.jsx("div",{className:C(Zy.tooltipLabel),onClick:this.props.onClick,children:this.props.label}),r={position:"absolute",left:t.left,top:`calc(${Math.round(t.top)}px + 0.95em)`,height:0};return e.jsx("div",{style:r,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,children:e.jsx(ce,{content:n,opened:!0,children:e.jsx("div",{})})})}}const Zy=k.create({tooltipLabel:{userSelect:"none",fontFamily:'"Lato", sans-serif',padding:`10px ${W.medium_16}px`,cursor:"pointer"}});class Jy extends wt.PureComponent{static contextType=Ld;state={hoveredHighlightKey:null,hoveringTooltipFor:null};_highlightRenderers={};componentDidMount(){this._updateEditListeners(!1,this.props.editable)}UNSAFE_componentWillReceiveProps(e){this._updateEditListeners(this.props.editable,e.editable),null==this.state.hoveredHighlightKey||this.state.hoveredHighlightKey in e.highlights||this.setState({hoveredHighlightKey:null}),null==this.state.hoveringTooltipFor||this.state.hoveringTooltipFor in e.highlights||this.setState({hoveringTooltipFor:null})}componentWillUnmount(){this._updateEditListeners(this.props.editable,!1)}_updateEditListeners(e,t){!e&&t?window.addEventListener("mousemove",this._handleMouseMove):e&&!t&&(window.removeEventListener("mousemove",this._handleMouseMove),this.setState({hoveredHighlightKey:null,hoveringTooltipFor:null}))}_handleMouseMove=e=>{const t={left:e.clientX,top:e.clientY},n=this._getHoveredHighlightKey(t);this.setState({hoveredHighlightKey:n})};_getHoveredHighlightKey(e){const{hoveringTooltipFor:t}=this.state;if("string"==typeof t)return t;return Object.keys(this.props.highlights).find(t=>{const n=this._highlightRenderers[t];return n&&n.isHovered(e)})}_renderTooltip(){const{hoveredHighlightKey:t}=this.state;if(null==t)return null;const n=this.props.highlights[t];return e.jsx(Qy,{label:this.context.strings.removeHighlight,focusNode:n.domRange.endContainer,focusOffset:n.domRange.endOffset,offsetParent:this.props.offsetParent,onClick:()=>this.props.onRemoveHighlight(t),onMouseEnter:()=>this.setState({hoveringTooltipFor:t}),onMouseLeave:()=>this.setState({hoveringTooltipFor:null})})}render(){return e.jsxs("div",{children:[Object.keys(this.props.highlights).map(t=>e.jsx(Xy,{ref:e=>{e?this._highlightRenderers[t]=e:delete this._highlightRenderers[t]},highlight:this.props.highlights[t],highlightKey:t,offsetParent:this.props.offsetParent,zIndexes:this.props.zIndexes},t)),this.props.editable&&this._renderTooltip()]})}}class ex extends wt.PureComponent{state={mouseState:"up",trackedSelection:null};componentDidMount(){this._updateListeners(!1,this.props.enabled)}componentDidUpdate(e){this.props.buildHighlight!==e.buildHighlight&&this._updateTrackedSelection(),this._updateListeners(e.enabled,this.props.enabled)}componentWillUnmount(){this._updateListeners(this.props.enabled,!1)}_updateListeners(e,t){!e&&t?(window.addEventListener("mousedown",this._handleMouseDown),window.addEventListener("mouseup",this._handleMouseUp),document.addEventListener("selectionchange",this._handleSelectionChange)):e&&!t&&(window.removeEventListener("mousedown",this._handleMouseDown),window.removeEventListener("mouseup",this._handleMouseUp),document.removeEventListener("selectionchange",this._handleSelectionChange),this.setState({mouseState:"up",trackedSelection:null}))}_computeFocusAndRange(){const e=document.getSelection();if(!e||0===e.rangeCount)return null;const t=e.getRangeAt(0);if(t.collapsed)return null;return{focusNode:e.focusNode,focusOffset:e.focusOffset,range:t}}_updateTrackedSelection(){const e=this._computeFocusAndRange();if(!e)return void this.setState({trackedSelection:null});const{focusNode:t,focusOffset:n,range:r}=e,i=this.props.buildHighlight(r);if(!i)return void this.setState({trackedSelection:null});const o={focusNode:t,focusOffset:n,proposedHighlight:i};this.setState({trackedSelection:o})}_handleSelectionChange=()=>{this._updateTrackedSelection(),"down"===this.state.mouseState&&this.setState({mouseState:"down-and-selecting"})};_handleMouseDown=()=>{this.setState({mouseState:"down"})};_handleMouseUp=()=>{this.setState({mouseState:"up"})};render(){const{mouseState:t,trackedSelection:n}=this.state,r="down-and-selecting"===t;return this.props.children?e.jsx("div",{children:this.props.children(n,r)}):null}}class tx extends wt.PureComponent{static contextType=Ld;_handleAddHighlight(e){this.props.onAddHighlight(e);const t=document.getSelection();t&&t.collapseToEnd()}_selectionIsValid(e){if(!e)return!1;const{contentNode:t}=this.props,n=new Range;n.selectNodeContents(t);const r=new Range;r.setStart(e.focusNode,e.focusOffset),r.collapse(!0);return Dy(n,r)}render(){return e.jsx(ex,{buildHighlight:this.props.buildHighlight,enabled:this.props.editable,children:(t,n)=>e.jsxs("div",{children:[e.jsx(Jy,{editable:this.props.editable&&!this._selectionIsValid(t),highlights:this.props.highlights,offsetParent:this.props.offsetParent,onRemoveHighlight:this.props.onRemoveHighlight,zIndexes:this.props.zIndexes}),this._selectionIsValid(t)&&!n&&e.jsx(Qy,{label:this.context.strings.addHighlight,onClick:()=>this._handleAddHighlight(t.proposedHighlight),focusNode:t.focusNode,focusOffset:t.focusOffset,offsetParent:this.props.offsetParent})]})})}}class nx extends wt.PureComponent{_container;componentDidMount(){this._sendWordsUpdate()}componentDidUpdate(){this._sendWordsUpdate()}_sendWordsUpdate(){this.props.onWordsUpdate(this._getWordRanges())}_getWordRanges(){const e=this._container;if(!e)throw new d("invariant violation: `this._container` is not defined, but this method is only called after mount/update",h.NotAllowed);const t=e.ownerDocument.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,()=>NodeFilter.FILTER_ACCEPT,!1),n=[];let r=null;for(;t.nextNode();){const e=t.currentNode;if(e.nodeType===Node.ELEMENT_NODE){"inline"!==getComputedStyle(e).display&&(r=null)}else if(e.nodeType===Node.TEXT_NODE){const t=e.nodeValue,i=/\S+/g;let o,s=null;for(;null!==(o=i.exec(t));){const i=o.index,a=o.index+o[0].length;let l;0===i&&r?(l=r,l.setEnd(e,a)):(l=e.ownerDocument.createRange(),l.setStart(e,i),l.setEnd(e,a),n.push(l)),a===t.length&&(s=l)}r=s}}return n}render(){return e.jsx("div",{ref:e=>this._container=e,children:this.props.children})}}class rx extends wt.PureComponent{_container;_content;state={wordRanges:[]};_buildHighlight(e){return Wy(this._getDOMHighlights(),this.state.wordRanges,e)}_getDOMHighlights(){const{serializedHighlights:e}=this.props,{wordRanges:t}=this.state,n={};for(const r of Object.keys(e))n[r]=Uy(e[r],t);return n}_handleAddHighlight=e=>{const t=$y(this._getDOMHighlights(),e),n={};for(const r of Object.keys(t))n[r]=Hy(t[r]);this.props.onSerializedHighlightsUpdate(n)};_handleRemoveHighlight=e=>{const{serializedHighlights:t}=this.props,n={...t};delete n[e],this.props.onSerializedHighlightsUpdate(n)};_handleWordsUpdate=e=>{this.setState({wordRanges:e})};render(){const t=this._getDOMHighlights();return e.jsxs("div",{className:C(ix.container),ref:e=>this._container=e,children:[e.jsx("div",{children:this.props.enabled&&this._container&&this._content&&e.jsx(tx,{buildHighlight:e=>this._buildHighlight(e),contentNode:this._content,editable:this.props.editable,highlights:t,offsetParent:this._container,zIndexes:{belowContent:0},onAddHighlight:this._handleAddHighlight,onRemoveHighlight:this._handleRemoveHighlight})}),e.jsx("div",{className:C(ix.content),ref:e=>this._content=e,children:e.jsx(nx,{onWordsUpdate:this._handleWordsUpdate,children:this.props.children})})]})}}const ix=k.create({container:{position:"relative",zIndex:0},content:{position:"relative",zIndex:1}});function ox(){return{currentRef:[],useRefs:!0,lastRef:0,firstSentenceRef:null,firstQuestionRef:null,lastFootnote:{id:0,text:""}}}class sx extends wt.Component{getRefContent=()=>this.props.refContent;render(){return e.jsx("span",{style:hx,children:"_"})}}class ax extends wt.Component{render(){return e.jsx("span",{style:hx,children:"_"})}}const lx=({id:t,number:n})=>{const{strings:r}=Dd();return e.jsx("span",{className:"perseus-sr-only",children:r[t]({number:n})},"alt-text")},cx={newline:S.defaultRules.newline,paragraph:S.defaultRules.paragraph,escape:S.defaultRules.escape,passageFootnote:{order:S.defaultRules.escape.order+.1,match:S.inlineRegex(/^\^/),parse:(e,t,n)=>{const r=n.lastFootnote.id+1,i={id:r,text:1===r?"*":""+r};return"*"===n.lastFootnote.text&&(n.lastFootnote.text=""+n.lastFootnote.id),n.lastFootnote=i,i},react:(t,n,r)=>e.jsx("sup",{children:t.text},r.key)},refStart:{order:S.defaultRules.escape.order+.2,match:function(e){const t=/^\{\{/.exec(e);if(t){let n=2,r=0;for(;n<e.length;){const t=e.slice(n,n+2);if("{{"===t)r++,n++;else if("}}"===t){if(!(r>0))break;r--,n++}n++}return t[1]=e.slice(2,n),t}return null},parse:(e,t,n)=>{if(!n.useRefs)return{ref:null,refContent:null};const i=n.lastRef+1;n.lastRef=i,n.currentRef.push(i);return{ref:i,refContent:t("(“"+e[1]+"”)\n\n",r.defaults({useRefs:!1},{currentRef:[],useRefs:!0,lastRef:0,firstSentenceRef:null,firstQuestionRef:null,lastFootnote:{id:0,text:""}}))}},react:(t,n,r)=>{const i=t.ref;if(null==i)return null;const o=n(t.refContent,{});return e.jsx(sx,{ref:ux+i,refContent:o},ux+i)}},refEnd:{order:S.defaultRules.escape.order+.3,match:S.inlineRegex(/^\}\}/),parse:(e,t,n)=>{if(!n.useRefs)return{ref:null};return{ref:n.currentRef.pop()||null}},react:(t,n,r)=>null!=t.ref?e.jsx(ax,{ref:dx+t.ref},dx+t.ref):null},squareLabel:{order:S.defaultRules.escape.order+.4,match:S.inlineRegex(/^\[\[(\w+)\]\]( *)/),parse:(e,t,n)=>(n.firstQuestionRef||(n.firstQuestionRef=e[1]),{content:e[1],space:e[2].length>0}),react:(t,n,r)=>[e.jsx("span",{className:"perseus-passage-square-label",style:px,"aria-hidden":"true",children:e.jsx("span",{style:fx,children:t.content})},"visual-square"),e.jsx(lx,{id:"questionMarker",number:t.content},"alt-text"),t.space?" ":null]},circleLabel:{order:S.defaultRules.escape.order+.5,match:S.inlineRegex(/^\(\((\w+)\)\)( *)/),parse:(e,t,n)=>({content:e[1],space:e[2].length>0}),react:(t,n,r)=>[e.jsx("span",{className:"perseus-passage-circle-label",style:px,"aria-hidden":!0,children:e.jsx("span",{style:gx,children:t.content})},"visual-circle"),e.jsx(lx,{id:"circleMarker",number:t.content},"alt-text"),t.space?" ":null]},squareBracketRef:{order:S.defaultRules.escape.order+.6,match:S.inlineRegex(/^\[(\d+)\]( *)/),parse:(e,t,n)=>(n.firstSentenceRef||(n.firstSentenceRef=e[1]),{content:e[1],space:e[2].length>0}),react:(t,n,r)=>[e.jsxs("span",{className:"perseus-passage-bracket-label","aria-hidden":"true",children:["[",t.content,"]"]},"visual-brackets"),e.jsx(lx,{id:"sentenceMarker",number:t.content},"alt-text"),t.space?" ":null]},highlight:{order:S.defaultRules.escape.order+.7,match:S.inlineRegex(/^{highlighting.start}(.+?){highlighting.end}/),parse:(e,t,n)=>({content:e[1]}),react:(t,n,r)=>[e.jsx("span",{className:"perseus-highlight",children:t.content},0)]},reviewHighlight:{order:S.defaultRules.escape.order+.7,match:S.inlineRegex(/^{review-highlighting.start}(.+?){review-highlighting.end}/),parse:(e,t,n)=>({content:e[1]}),react:(t,n,r)=>[e.jsx("span",{className:"perseus-review-highlight",children:t.content},0)]},strong:S.defaultRules.strong,u:S.defaultRules.u,em:S.defaultRules.em,del:S.defaultRules.del,text:{...S.defaultRules.text,react:(t,n,r)=>e.jsx("span",{children:t.content},r.key)}},ux="start-ref-",dx="end-ref-",hx={display:"inline-block",width:0,visibility:"hidden"},px={display:"inline",whiteSpace:"nowrap"},fx={display:"inline-block",color:"rgb(255, 255, 255)",backgroundColor:"rgb(90, 90, 90)",paddingLeft:10,paddingRight:10,userSelect:"none",WebkitUserSelect:"none"},gx={display:"inline-block",color:"rgb(255, 255, 255)",backgroundColor:"rgb(90, 90, 90)",userSelect:"none",WebkitUserSelect:"none",width:22,height:22,borderRadius:"50%",textAlign:"center"},mx=S.parserFor(cx),vx={parse:(e,t)=>{t=t||{};return mx(e+"\n\n",r.extend(t,{currentRef:[],useRefs:!0,lastRef:0,firstSentenceRef:null,firstQuestionRef:null,lastFootnote:{id:0,text:""}}))},output:S.reactFor(S.ruleOutput(cx,"react")),START_REF_PREFIX:ux,END_REF_PREFIX:dx,getInitialParseState:ox};class yx extends wt.Component{_line;measureLineHeight(){return this._line?this._line.clientHeight:0}render(){return e.jsx("div",{className:C(xx.measurer),"aria-hidden":"true",children:e.jsx("div",{ref:e=>this._line=e,className:"paragraph",children:"Line Height Measurement"})})}}const xx=k.create({measurer:{position:"absolute",top:0,left:0,visibility:"hidden",zIndex:-1}});class bx extends wt.Component{static contextType=Ld;_contentRef;_lineHeightMeasurerRef;_onResize;_stylesAppiedTimer;static defaultProps={passageTitle:"",passageText:"",footnotes:"",showLineNumbers:!0,linterContext:j};isWidget=!0;state={nLines:null,startLineNumbersAfter:0,stylesAreApplied:!1,highlights:{}};componentDidMount(){this._updateState(),this._onResize=r.throttle(()=>{this.shouldRenderJipt()||(this._lineHeightMeasurerRef?.measureLineHeight(),this._updateState())},500),window.addEventListener("resize",this._onResize),this._stylesAppiedTimer=window.setTimeout(()=>{this.setState({stylesAreApplied:!0})},0)}shouldComponentUpdate(e,t){return!r.isEqual(this.props,e)||!r.isEqual(this.state,t)}componentDidUpdate(){this._updateState()}componentWillUnmount(){window.removeEventListener("resize",this._onResize),clearTimeout(this._stylesAppiedTimer)}_handleSerializedHighlightsUpdate=e=>{this.setState({highlights:e})};_updateState(){this.shouldRenderJipt()||this.setState({nLines:this._measureLines(),startLineNumbersAfter:this._getInitialLineNumber()})}_measureLines(){const e=t.findDOMNode(this._contentRef),n=p(e).height(),r=this._getLineHeight();return Math.round(n/r)}_getInitialLineNumber(){let e=!0;return this.props.findWidgets((t,n)=>"passage"===n.type&&(t===this.props.widgetId&&(e=!1),e)).filter(_x).map(e=>e.getLineCount()).reduce((e,t)=>e+t,0)}_getLineHeight(){return this._lineHeightMeasurerRef?.measureLineHeight()||0}getLineCount(){return null!=this.state.nLines?this.state.nLines:this._measureLines()}_getStartRefLineNumber(e){const n=vx.START_REF_PREFIX+e,r=this.refs[n];if(!r)return null;const i=p(t.findDOMNode(r));let o=i.next();0===o.length&&(o=i);const s=o.offset().top;return this.state.startLineNumbersAfter+1+this._convertPosToLineNumber(s)}_getEndRefLineNumber(e){const n=vx.END_REF_PREFIX+e,r=this.refs[n];if(!r)return null;const i=p(t.findDOMNode(r));let o=i.prev();0===o.length&&(o=i);const s=o.height(),a=o.offset().top;let l=this._convertPosToLineNumber(a+s);return 0===s&&(l+=1),this.state.startLineNumbersAfter+l}_convertPosToLineNumber(e){const n=t.findDOMNode(this._contentRef),r=e-p(n).offset().top,i=this._getLineHeight();return Math.round(r/i)}_getRefContent(e){const t=vx.START_REF_PREFIX+e,n=this.refs[t];return n?n.getRefContent():null}getReference(e){const t=this._getStartRefLineNumber(e),n=this._getEndRefLineNumber(e);if(null==t||null==n)return null;return{startLine:t,endLine:n,content:this._getRefContent(e)}}getPromptJSON(){return{type:"passage",options:{passageTitle:(e=this.props).passageTitle,passageText:e.passageText,footnotes:e.footnotes}};var e}_renderInstructions(t){const n=t.firstQuestionRef,r=t.firstSentenceRef,{strings:i}=this.context;let o="";n&&(o+=i.symbolPassage({questionSymbol:"[["+n+"]]",questionNumber:n})),r&&(o+=i.symbolQuestion({sentenceSymbol:"["+r+"]"}));const s=vx.parse(o);return e.jsx("div",{className:"perseus-widget-passage-instructions",children:vx.output(s)})}shouldRenderJipt(){const{JIPT:e}=zd();return e.useJIPT&&-1!==this.props.passageText.indexOf("crwdns")}_renderContent(t){const n=this.state.stylesAreApplied,r=!this.props.reviewMode;return e.jsx(rx,{editable:r,enabled:n,onSerializedHighlightsUpdate:this._handleSerializedHighlightsUpdate,serializedHighlights:this.state.highlights,children:e.jsxs("div",{ref:e=>this._contentRef=e,children:[e.jsx(yx,{ref:e=>this._lineHeightMeasurerRef=e}),vx.output(t)]})})}_hasFootnotes(){const e=this.props.footnotes;return!/^\s*$/.test(e)}_renderFootnotes(){const e=this.props.footnotes,t=vx.parse(e);return vx.output(t)}render(){const{strings:t}=this.context;let n;const i=this.state.nLines;this.props.showLineNumbers&&i&&(n=r.range(1,i+1).map(n=>{const r=n+this.state.startLineNumbersAfter;if(4===r){const n=t.lineLabel;return e.jsx("span",{className:"line-marker",children:n},"line-marker")}return e.jsx("span",{children:r},n)}));const o=vx.getInitialParseState(),s=this.props.passageText.replace(/("{1})([^"]*)("{1})/g,"“$2”"),a=vx.parse(s,o),l=/\S/.test(this.props.passageTitle);return e.jsx("div",{children:e.jsxs("div",{className:"perseus-widget-passage-container",children:[this._renderInstructions(o),e.jsxs("div",{className:"perseus-widget-passage",children:[l&&e.jsx("h3",{className:"passage-title",children:e.jsx(wv,{content:this.props.passageTitle,linterContext:this.props.linterContext,strings:t})}),n&&e.jsx("div",{className:"line-numbers","aria-hidden":!0,children:n}),!l&&e.jsx("h3",{className:"perseus-sr-only",children:t.beginningPassage}),e.jsx("div",{className:"passage-text",children:this.shouldRenderJipt()?e.jsx(wv,{content:this.props.passageText,strings:t}):this._renderContent(a)}),this._hasFootnotes()&&[e.jsx("h4",{className:"perseus-sr-only",children:t.beginningFootnotes},"footnote-start"),e.jsx("div",{className:"footnotes",children:this._renderFootnotes()},"footnotes")],e.jsx("div",{className:"perseus-sr-only",children:t.endPassage})]})]})})}}const wx={name:"passage",displayName:"Passage (SAT only)",hidden:!0,widget:bx,isLintable:!0};function _x(e){return e instanceof bx}class Sx extends wt.Component{static contextType=Ld;displayName="PassageRef";_isMounted;_throttledUpdateRange;static defaultProps={passageNumber:1,referenceNumber:1,summaryText:""};isWidget=!0;state={lineRange:null,content:null};componentDidMount(){this._isMounted=!0,this._deferredUpdateRange(),this._throttledUpdateRange=r.throttle(this._deferredUpdateRange,500),window.addEventListener("resize",this._throttledUpdateRange)}shouldComponentUpdate(e,t){return!r.isEqual(this.props,e)||!r.isEqual(this.state,t)}componentDidUpdate(){this._deferredUpdateRange()}componentWillUnmount(){window.removeEventListener("resize",this._throttledUpdateRange),this._isMounted=!1}getPromptJSON(){return{type:"passage-ref",options:{passageNumber:(e=this.props).passageNumber,referenceNumber:e.referenceNumber,summaryText:e.summaryText??""}};var e}_deferredUpdateRange=()=>{r.defer(this._updateRange)};_updateRange=()=>{const e=this.props.findWidgets("passage "+this.props.passageNumber).filter(_x)[0],t=e?.getReference(this.props.referenceNumber);this._isMounted&&(t?this.setState({lineRange:[t.startLine,t.endLine],content:t.content}):this.setState({lineRange:null,content:null}))};render(){const{strings:t}=this.context,n=this.state.lineRange;let r,i;if(r=n?n[0]===n[1]?t.lineNumber({lineNumber:String(n[0])}):t.lineRange({lineRange:n[0]+"–"+n[1]}):t.lineRange({lineRange:"?–?"}),this.props.summaryText){const t=iv.parseInline(this.props.summaryText);i=e.jsxs("span",{"aria-hidden":!0,children:[" ","(“",iv.basicOutput(t),"”)"]})}else i=null;return e.jsxs("span",{children:[r,i,n&&e.jsx("div",{className:"perseus-sr-only",children:this.state.content})]})}}const kx={name:"passage-ref",displayName:"PassageRef (SAT only)",hidden:!0,widget:Sx,version:be.version},Cx=wt.forwardRef(function(t,n){const{choices:r=[],multipleSelect:i=!1,countChoices:o=!1,showSolutions:s="none",choiceStates:a,reviewModeRubric:l,questionCompleted:c,static:u,apiOptions:d,onChange:h,trackInteraction:p,findWidgets:f,reviewMode:g}=t,{strings:m}=Dd();wt.useImperativeHandle(n,()=>({getPromptJSON:()=>wy(t,t.userInput)}),[t]);const v=(t="")=>{const{parsedContent:n,extractedWidgets:r}=(e=>{let t=1;const n={};return{parsedContent:e.replace(/\{\{passage-ref (\d+) (\d+)(?: "([^"]*)")?\}\}/g,(e,r,i,o)=>{const s="passage-ref "+t;return t++,n[s]={type:"passage-ref",graded:!1,options:{passageNumber:parseInt(r),referenceNumber:parseInt(i),summaryText:o},version:kx.version},"[["+Jd.snowman+" "+s+"]]"}),extractedWidgets:n}})(t);return e.jsx(wv,{content:n,widgets:r,findExternalWidgets:f,alwaysUpdate:!0,linterContext:{contentType:"radio",highlightLint:!1,paths:[],stack:[]},strings:m},"choiceContentRenderer")},y=(()=>{const e=(({choices:e,isStatic:t,showSolutions:n,choiceStates:r})=>{const i={selected:!1,readOnly:!1,highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1};return t||"all"===n?e.map(e=>({...i,selected:!!e.correct,readOnly:!0,rationaleShown:!0,correctnessShown:!0})):r||e.map(()=>({...i}))})({choices:r,isStatic:u,showSolutions:s,choiceStates:a});return t=e,r.map((e,n)=>{const r=e.isNoneOfTheAbove&&!e.content?m.noneOfTheAbove:e.content,{selected:i,rationaleShown:o,correctnessShown:s,readOnly:a,previouslyAnswered:u}=t[n],d=l?.choices[n];return{id:e.id,content:v(r),checked:i,correct:void 0===e.correct?!!d&&!!d.correct:e.correct,disabled:a,hasRationale:!!e.rationale,rationale:v(e.rationale),showRationale:o,showCorrectness:s,isNoneOfTheAbove:!!e.isNoneOfTheAbove,revealNoneOfTheAbove:!(!c||!i),previouslyAnswered:u}});var t})(),x=t.numCorrect,b=g||u||"all"===s,w=d.readOnly||b?()=>{}:(e,t)=>{const n=[];if(t&&!i)n.push(e);else if(t&&i){const t=a?a.map((e,t)=>({selected:e.selected,id:r[t].id})).filter(e=>e.selected).map(e=>e.id):[];n.push(...t,e)}else{const t=a?a.map((e,t)=>({selected:e.selected,id:r[t].id})).filter(t=>t.selected&&t.id!==e).map(e=>e.id):[];n.push(...t)}const o=a?a.map(e=>({...e})):r.map(()=>({selected:!1,highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1,readOnly:!1}));o.forEach((e,t)=>{const i=r[t].id;e.selected=n.includes(i)}),h({choiceStates:o}),p()};return e.jsx(Ay,{reviewMode:b,multipleSelect:i,countChoices:o,numCorrect:x,choices:y,onChoiceChange:w})});"undefined"==typeof HTMLElement||HTMLElement.prototype.scrollTo||(HTMLElement.prototype.scrollTo=function(e,t){this.scrollLeft=e,this.scrollTop=t});const Mx=(e,t)=>{"function"==typeof e.scrollTo?e.scrollTo(0,t):"scrollTop"in e&&(e.scrollTop=t)},Ix=e=>e===document.body||null==e?window:e.scrollHeight>e.clientHeight?e:Ix(e.parentElement),Px=(e,t)=>{setTimeout(()=>{const t=Ix(e),n=e.getBoundingClientRect(),r=t===window?{top:0,bottom:window.innerHeight}:t.getBoundingClientRect();let i=0;const o=t===window?window.scrollY:t.scrollTop;if(n.bottom>r.bottom){let e=n.bottom-r.bottom;n.top+e<r.top&&(e=n.top-r.top),i=o+e}else if(n.top<r.top){i=o+(n.top-r.top)}((e,t,n=0)=>{const r=e===window?window.pageYOffset:e.scrollTop,i=t,o=i-r,s=n/17;let a=0;const l=setInterval(function(){if(a<s){const t=a/s,n=(1-Math.cos(Math.PI*t))/2;Mx(e,r+o*n),a+=1}else Mx(e,i),clearInterval(l)},17)})(t,i,750)},0)};const Tx=function({visible:t=!0,color:n=gh,multipleSelect:r=!1,children:i}){const o={borderColor:t?n:"transparent",borderRadius:r?5:"50%"};return e.jsx("span",{"data-testid":"focus-ring",className:C(Ex.ring),style:o,children:i})},Ex=k.create({ring:{margin:"auto",display:"inline-block",borderWidth:2,padding:2,borderStyle:"solid"}}),jx=24,Rx=k.create({iconWrapper:{display:"inline-block",position:"relative"}});function Ax(t){const{pos:n,showCorrectness:r,correct:i}=t,{strings:o}=Dd(),s=Ey(n,o);return r?i?e.jsx(dg,{...hg,style:{position:"relative",top:-1}}):e.jsx(dg,{...wg}):e.jsx("span",{children:s})}const Nx=function(t){const{checked:n,showCorrectness:r,correct:i,focused:o,hovered:s,multipleSelect:a,pos:l,previouslyAnswered:c,pressed:u}=t,d=n||r&&!i&&c,h=[Lx.choiceBase,a?Lx.multiSelectShape:Lx.singleSelectShape,r?Lx.choiceHasIcon:Lx.choiceHasLetter,d?Lx.choiceIsChecked:Lx.choiceIsUnchecked];return r&&i&&n?h.push(Lx.choiceCorrect):r&&!i&&(n||c)?h.push(Lx.choiceIncorrect):n?h.push(Lx.choiceNeutral):u?h.push(Lx.activeNeutral):h.push(Lx.uncheckedColors),e.jsx("div",{className:C(Rx.iconWrapper),children:e.jsx(Tx,{color:y.blue,visible:o||s,multipleSelect:a,children:e.jsx("div",{"data-testid":"choice-icon__library-choice-icon",className:C(...h),"data-is-radio-icon":!0,children:e.jsx("div",{className:C(Lx.innerWrapper),children:e.jsx(Ax,{pos:l,showCorrectness:r,correct:i})})})})})},Lx=k.create({innerWrapper:{width:jx,height:jx,display:"flex",alignItems:"center",justifyContent:"center"},choiceBase:{width:jx,height:jx,boxSizing:"border-box",borderStyle:"solid",borderWidth:2,fontFamily:ph,fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center"},choiceHasLetter:{fontSize:12},choiceHasIcon:{fontSize:jx},choiceIsChecked:{color:y.white},choiceIsUnchecked:{color:y.offBlack64},choiceCorrect:{backgroundColor:y.green,borderColor:y.green},choiceIncorrect:{backgroundColor:y.red,borderColor:y.red},choiceNeutral:{backgroundColor:y.blue,borderColor:y.blue},activeNeutral:{color:y.blue,borderColor:y.blue,backgroundColor:"transparent"},multiSelectShape:{borderRadius:3},singleSelectShape:{borderRadius:jx},uncheckedColors:{borderColor:y.offBlack64}});function Ox(e,t,n){return t?e?n.correctSelected:n.correct:e?n.incorrectSelected:n.incorrect}const Dx=function(t){const{checked:n,correct:r,previouslyAnswered:i,reviewMode:o}=t,{strings:s}=Dd();if(!o&&!i)return null;let a;return a=r?Fx.correct:n||i?Fx.incorrectAnswered:Fx.incorrect,e.jsx("div",{className:C(Fx.text,a),children:Ox(n,r,s)})},Fx=k.create({text:{alignItems:"center",display:"flex",fontSize:12,height:32,textTransform:"uppercase"},correct:{color:y.green},incorrectAnswered:{color:y.red},incorrect:{color:y.offBlack64}}),zx=function(t){const{disabled:n=!1,checked:r=!1,content:i,showCorrectness:o,multipleSelect:s,onChange:a=e=>{},reviewMode:l,correct:c=!1,apiOptions:u=Bm.defaults,previouslyAnswered:d=!1,pos:h=0,showRationale:p=!1,rationale:g,forwardedRef:m}=t,[v,x]=wt.useState(!1),{strings:b}=Dd();function w(e){const t=e.checked??r;a({checked:t})}wt.useEffect(()=>{v&&n&&x(!1)},[n,v,x]);const _=f("description",C(Bx.description)),S=f("perseus-radio-rationale-content",C(Bx.rationale)),k=!l&&u.readOnly,M=function(e,t,n,r,i){return r&&n?t?i.choiceCheckedCorrect({letter:e}):i.choiceCorrect({letter:e}):r&&!n?t?i.choiceCheckedIncorrect({letter:e}):i.choiceIncorrect({letter:e}):t?i.choiceChecked({letter:e}):i.choice({letter:e})}(Ey(h,b),r,c,o,b);return e.jsxs("div",{style:{dispay:"flex",flexDirection:"column",color:y.offBlack},className:_,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"row",opacity:k?.5:1,overflowX:"auto",overflowY:"hidden"},children:[e.jsx("div",{className:"perseus-sr-only",children:e.jsxs("label",{children:[M,"   ",i,e.jsx("input",{type:s?"checkbox":"radio",checked:r,onClick:()=>{w({checked:!r})},onChange:()=>{},disabled:n||u.readOnly,tabIndex:-1,className:Vm.OPTION_CONTENT})]})}),e.jsx(Q,{onClick:()=>{w({checked:!r})},disabled:n||u.readOnly,style:{flex:1,color:y.offBlack,userSelect:"text"},ref:m,"aria-hidden":"true",children:({hovered:t,focused:n,pressed:a})=>e.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"center",paddingTop:W.xSmall_8,paddingBottom:W.xSmall_8,paddingLeft:W.xSmall_8},children:[e.jsx(Nx,{pos:h,correct:c,pressed:a,focused:n,checked:r,hovered:t,showCorrectness:o,multipleSelect:s,reviewMode:l,previouslyAnswered:d}),e.jsxs("span",{style:{paddingLeft:W.small_12,textAlign:"left",flex:1,paddingTop:4},children:[e.jsx("div",{children:e.jsx(Dx,{checked:r,correct:c,previouslyAnswered:d,reviewMode:l})}),e.jsx("div",{children:i})]})]})})]}),p&&e.jsx("div",{className:S,"data-testid":`perseus-radio-rationale-content-${h}`,children:g})]})},Bx=k.create({description:{display:"inline-block",width:"100%"},rationale:{display:"block",padding:"16px 16px",paddingTop:0,marginLeft:54,color:y.offBlack64,[Ev.smOrSmaller]:{padding:"12px 16px",paddingTop:0}}}),$x=wt.forwardRef(function(t,n){return e.jsx(zx,{...t,forwardedRef:n})}),Wx=function({content:t,forwardedRef:n,showContent:r=!0,...i}){const{strings:o}=Dd(),s={...i,content:r?t:e.jsx(wv,{content:o.noneOfTheAbove,strings:o},"noneOfTheAboveRenderer")};return e.jsx($x,{...s,ref:n})},Ux=wt.forwardRef(function(t,n){return e.jsx(Wx,{...t,forwardedRef:n})}),{captureScratchpadTouchStart:Hx}=Jd;const qx=function({apiOptions:t,reviewModeRubric:i,reviewMode:o,choices:s,editMode:a=!1,multipleSelect:l=!1,labelWrap:c,countChoices:u,numCorrect:d,isLastUsedWidget:h,onChange:p,registerFocusFunction:g}){const{strings:m}=Dd(),v=wt.useRef(),y=wt.useRef([]);function x(e,t){const n=[];if(t&&!l)n.push(e);else if(t&&l){const t=s.filter(e=>e.checked).map(e=>e.id);n.push(...t,e)}else{const t=s.filter(t=>t.checked&&t.id!==e).map(e=>e.id);n.push(...t)}p(n)}wt.useEffect(()=>{if(t.canScrollPage&&h&&i&&!v.current){const e=s.findIndex(e=>e.checked);if(e>=0){const t=y.current[e],r=n.findDOMNode(t.current);r&&Px(r)}}v.current=i},[t,s,h,i]),g?.(e=>{const t=y.current[e||0],r=n.findDOMNode(t.current);return!!r&&(r.focus(),!0)});const b=t.isMobile,w=s[0].highlighted,_=s[s.length-1].highlighted,S=f("perseus-widget-radio",!a&&"perseus-rendered-radio",C(Vx.radio,Vx.responsiveRadioContainer,w&&b&&Vx.radioContainerFirstHighlighted,_&&b&&Vx.radioContainerLastHighlighted)),k=f("instructions",C(Vx.instructions,b&&Vx.instructionsMobile)),M=function(e,t,n,r){return e?xe(e,!!t,n)?r.chooseNumAnswers({numCorrect:String(n)}):r.chooseAllAnswers:r.chooseOneAnswer}(l,u,d,m),I=C(Vx.responsiveFieldset),P=e.jsxs("fieldset",{className:`perseus-widget-radio-fieldset ${I}`,children:[e.jsx("legend",{className:"perseus-sr-only",children:M}),e.jsx("div",{className:k,"aria-hidden":"true",children:M}),e.jsx("ul",{className:S,style:{listStyle:"none"},children:s.map((n,u)=>{let d=$x;const h=wt.createRef();y.current[u]=h;const p={id:n.id,apiOptions:t,multipleSelect:l,checked:n.checked,previouslyAnswered:n.previouslyAnswered,reviewMode:o,correct:n.correct,rationale:n.rationale,content:n.content,disabled:t.readOnly||n.disabled,showCorrectness:o||!!n.showCorrectness,showRationale:n.hasRationale&&(o||n.showRationale),pos:u,onChange:e=>{a||x(n.id,e.checked)}};n.isNoneOfTheAbove&&(d=Ux,r.extend(p,{showContent:n.revealNoneOfTheAbove}));const g=s[u+1],m=!!g&&g.highlighted,v=e=>C(Vx.item,Vx.responsiveItem,e&&Vx.selectedItem,e&&n.highlighted&&Vx.aboveBackdrop,e&&n.highlighted&&t.isMobile&&Vx.aboveBackdropMobile,m&&t.isMobile&&Vx.nextHighlighted);let b;v(!0),o&&i&&(b=i.choices[u].correct?Gm:Ym);const w=f(v(n.checked),Vm.OPTION,n.checked&&Vm.SELECTED,b);let _,S=null;return a&&(_=e=>{let t=e.target;for(;t&&t!==S;){if(t.getAttribute("data-is-radio-icon"))return void x(n.id,!n.checked);t=t.parentNode}}),e.jsx("li",{ref:e=>S=e,className:w,onClick:_,onTouchStart:c?void 0:Hx,children:e.jsx(d,{...p,ref:h})},n.id)})})]});return e.jsx("div",{className:C(Vx.responsiveContainer),children:P})},Vx=k.create({instructions:{display:"block",color:wh,fontSize:14,lineHeight:1.25,fontFamily:"inherit",fontStyle:"normal",fontWeight:"bold",marginBottom:16},instructionsMobile:{fontSize:18,[Ev.smOrSmaller]:{fontSize:16},[Ev.xl]:{fontSize:20}},radio:{padding:0},responsiveRadioContainer:{borderBottom:`1px solid ${jh}`,borderTop:`1px solid ${jh}`,width:"auto",[Ev.smOrSmaller]:{marginLeft:kh,marginRight:kh}},radioContainerFirstHighlighted:{borderTop:"1px solid rgba(0, 0, 0, 0)"},radioContainerLastHighlighted:{borderBottom:"1px solid rgba(0, 0, 0, 0)"},item:{marginLeft:20},responsiveItem:{marginLeft:0,padding:0,":not(:last-child)":{borderBottom:`1px solid ${jh}`}},selectedItem:{background:"white"},aboveBackdrop:{position:"relative",zIndex:1062},aboveBackdropMobile:{boxShadow:"0 0 4px 0 rgba(0, 0, 0, 0.2),0 0 2px 0 rgba(0, 0, 0, 0.1)",":not(:last-child)":{borderBottom:"1px solid rgba(0, 0, 0, 0)"}},nextHighlighted:{":not(:last-child)":{borderBottom:"1px solid rgba(0, 0, 0, 0)"}},responsiveContainer:{overflow:"auto",marginLeft:kh,paddingLeft:Sh},responsiveFieldset:{paddingRight:Sh,minWidth:"auto"}});let Gx=class extends wt.Component{static contextType=Ld;focusFunction;static defaultProps={choices:[],multipleSelect:!1,countChoices:!1,deselectEnabled:!1,linterContext:j,showSolutions:"none"};_renderRenderer=(t="")=>{let n=1;const r={},i=t.replace(/\{\{passage-ref (\d+) (\d+)(?: "([^"]*)")?\}\}/g,(e,t,i,o)=>{const s="passage-ref "+n;return n++,r[s]={type:"passage-ref",graded:!1,options:{passageNumber:parseInt(t),referenceNumber:parseInt(i),summaryText:o},version:kx.version},"[["+Jd.snowman+" "+s+"]]"});return e.jsx(wv,{content:i,widgets:r,findExternalWidgets:this.props.findWidgets,alwaysUpdate:!0,linterContext:{...this.props.linterContext,blockHighlight:!0},strings:this.context.strings},"choiceContentRenderer")};focus(e){return!!this.focusFunction&&this.focusFunction(e)}registerFocusFunction(e){this.focusFunction=e}updateChoices=e=>{const{choiceStates:t,choices:n}=this.props,r=t?t.map(e=>({...e})):n.map(()=>({selected:!1,highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1,readOnly:!1}));r.forEach((t,r)=>{const i=n[r].id;t.selected=e.includes(i)}),this.props.onChange({choiceStates:r}),this.props.trackInteraction()};getPromptJSON(){return wy(this.props,this.props.userInput)}render(){const{choices:t}=this.props,{strings:n}=this.context;let r;r=this.props.static?t.map(e=>({selected:!!e.correct,crossedOut:!1,readOnly:!0,highlighted:!1,rationaleShown:!0,correctnessShown:!0,previouslyAnswered:!1})):"all"===this.props.showSolutions?t.map(({correct:e})=>({selected:!!e,crossedOut:!1,readOnly:!0,highlighted:!1,rationaleShown:!0,correctnessShown:!0,previouslyAnswered:!1})):this.props.choiceStates?this.props.choiceStates:t.map(()=>({selected:!1,crossedOut:!1,readOnly:!1,highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1}));const i=t.map((e,t)=>{const i=e.isNoneOfTheAbove&&!e.content?n.noneOfTheAbove:e.content,{selected:o,rationaleShown:s,correctnessShown:a,readOnly:l,highlighted:c,previouslyAnswered:u}=r[t],d=this.props.reviewModeRubric?.choices[t];return{id:e.id,content:this._renderRenderer(i),checked:o,correct:void 0===e.correct?!!d&&!!d.correct:e.correct,disabled:l,hasRationale:!!e.rationale,rationale:this._renderRenderer(e.rationale),showRationale:s,showCorrectness:a,isNoneOfTheAbove:!!e.isNoneOfTheAbove,revealNoneOfTheAbove:!(!this.props.questionCompleted||!o),highlighted:c,previouslyAnswered:u}});return e.jsx(qx,{labelWrap:!0,multipleSelect:this.props.multipleSelect,countChoices:this.props.countChoices,numCorrect:this.props.numCorrect,choices:i,onChange:this.updateChoices,reviewModeRubric:this.props.reviewModeRubric,reviewMode:this.props.reviewMode,deselectEnabled:this.props.deselectEnabled,apiOptions:this.props.apiOptions,isLastUsedWidget:this.props.isLastUsedWidget,registerFocusFunction:e=>this.registerFocusFunction(e)})}};function Yx(e){return e.map(()=>({highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1,readOnly:!1}))}const Xx={name:"radio",displayName:"Radio / Multiple choice",widget:class extends Gx{ffIsOn=!1;radioRef=wt.createRef();state={choiceStates:[]};constructor(e){super(e),this.ffIsOn=e.apiOptions.flags?.["new-radio-widget"]??!1,this.state={choiceStates:Yx(e.choices)}}UNSAFE_componentWillUpdate(e){r.isEqual(e.choices,this.props.choices)||this.setState({choiceStates:Yx(e.choices)})}getSerializedState(){const{userInput:e,randomize:t,...n}=this._mergePropsAndState();return{...n,hasNoneOfTheAbove:n.hasNoneOfTheAbove??!1}}getPromptJSON(){return this.radioRef.current.getPromptJSON()}_handleChange(e){const t=e.choiceStates;if(!t)throw new Error("unhandled onChange call in Radio!");this.setState({choiceStates:t.map(e=>{const{selected:t,...n}=e;return{...n}})},()=>{const e=this._mergePropsAndState(),n=jy({...e,choiceStates:we(e.choiceStates||[]).map((e,n)=>({...e,selected:t[n].selected}))});this.props.handleUserInput(n)})}_mergePropsAndState(){const e=(this.props.problemNum??0)+(this.props.widgetIndex??0),t=[...Ry(this.props.choices,this.props.randomize,this.context.strings,e)];return{...this.props,choices:t,choiceStates:this.state.choiceStates&&this.state.choiceStates.length===t.length?this.state.choiceStates.map((e,n)=>{const r=t[n];return{...e,selected:this.props.userInput?.selectedChoiceIds.includes(r.id)??!1}}):t.map((e,t)=>({selected:this.props.userInput?.selectedChoiceIds.includes(e.id)??!1,highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1,readOnly:!1})),onChange:e=>this._handleChange(e)}}focus(e){return!!this.radioRef.current?.focus&&this.radioRef.current.focus(e)}render(){const t=this._mergePropsAndState();return this.ffIsOn?e.jsx(Cx,{ref:this.radioRef,...t}):e.jsx(Gx,{ref:this.radioRef,...t})}},getStartUserInput:function(){return{selectedChoiceIds:[]}},getCorrectUserInput:function(e){return{selectedChoiceIds:e.choices.filter(e=>e.correct).map(e=>e.id)}},version:_e.version,isLintable:!0,getUserInputFromSerializedState:e=>jy(e)},Kx=[Xx,hy,by,ry];class Qx extends wt.Component{static contextType=Ld;static defaultProps={items:[],categories:[],linterContext:j,userInput:{values:[]}};state={uniqueId:r.uniqueId("perseus_radio_")};getSerializedState(){const{userInput:e,...t}=this.props;return{...t,values:e.values}}getPromptJSON(){return{type:"categorizer",options:{items:(e=this.props).items,categories:e.categories},userInput:{itemToCategoryMapping:e.userInput.values}};var e}_handleUserInput(e,t){const n=[...this.props.userInput.values];n[e]=t,this.props.handleUserInput({values:n}),this.props.trackInteraction()}render(){const t=this,n=this.props.apiOptions.isMobile;let r=this.props.items.map((e,t)=>[e,t]);this.props.randomizeItems&&(r=ye(r,this.props.problemNum));const i=e.jsxs("table",{className:"categorizer-table "+C(Zx.mobileTable),children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("td",{className:C(Zx.emptyHeaderCell)}),this.props.categories.map((t,n)=>e.jsx("th",{className:C(Zx.header),children:e.jsx(wv,{content:t,linterContext:this.props.linterContext,strings:this.context.strings})},n))]})}),e.jsx("tbody",{children:r.map(r=>{const i=r[0],o=r[1],s=t.state.uniqueId+"_"+o;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(wv,{content:i,linterContext:this.props.linterContext,strings:this.context.strings})}),t.props.categories.map((r,i)=>{const a=t.props.userInput.values[o]===i;return e.jsx("td",{className:"category "+C(Zx.cell),children:e.jsxs("div",{role:"button","aria-label":r,onClick:()=>this._handleUserInput(o,i),children:[n&&e.jsx("input",{type:"radio",name:s,className:C(zv.responsiveInput,zv.responsiveRadioInput),checked:a,onChange:()=>this._handleUserInput(o,i),onClick:e=>e.stopPropagation()}),!n&&e.jsx("span",{className:C(Zx.radioSpan,a&&Zx.checkedRadioSpan,this.props.static&&a&&Zx.staticCheckedRadioSpan),children:a?e.jsx(dg,{...fg}):e.jsx(dg,{...gg})})]})},i)})]},o)})})]}),o=f({"categorizer-container":!0,"static-mode":this.props.static}),s=this.props.apiOptions.isMobile?[Zx.fullBleedContainer]:[];return e.jsx("div",{className:o+" "+C(...s),children:i})}}const Zx=k.create({mobileTable:{[Ev.smOrSmaller]:{minWidth:"auto"}},fullBleedContainer:{[Ev.mdOrSmaller]:{marginLeft:-16,marginRight:-16,overflowX:"auto"}},header:{textAlign:"center",verticalAlign:"bottom"},cell:{textAlign:"center",padding:0,color:"#ccc",verticalAlign:"middle"},emptyHeaderCell:{backgroundColor:"inherit",borderBottom:"2px solid #ccc"},radioSpan:{fontSize:30,paddingRight:3,":hover":{color:"#999"}},checkedRadioSpan:{color:"#333"},staticCheckedRadioSpan:{color:"#888"}});const Jx={name:"categorizer",displayName:"Categorizer",hidden:!0,widget:Qx,getUserInputFromSerializedState:function(e){return{values:e.values}},getCorrectUserInput:function(e){return{values:e.values}},getStartUserInput:function(){return{values:[]}},isLintable:!0};let eb;const tb=e=>new URL(e,(eb||(eb=window.location),eb).origin),nb=e=>tb(e).href,rb=(e,t="")=>({type:e,isSupported:!1,message:t}),{updateQueryString:ib}=Jd;class ob extends wt.Component{static defaultProps={showEditor:!1,showButtons:!1,userInput:{status:"incomplete",message:null}};componentDidMount(){p(window).on("message",this.handleMessageEvent)}componentWillUnmount(){p(window).off("message",this.handleMessageEvent)}handleMessageEvent=e=>{let t={};try{t=JSON.parse(e.originalEvent.data)}catch{return}if(r.isUndefined(t.testsPassed))return;const n=t.testsPassed?"correct":"incorrect";this.props.handleUserInput({status:n,message:t.message})};getPromptJSON(){return rb("cs-program")}getSerializedState(){const{userInput:e,alignment:t,...n}=this.props;return{...n,programType:n.programType||null}}render(){if(!this.props.programID)return e.jsx("div",{});let t,n=!1,i=function(e){const{InitialRequestUrl:t}=zd(),n=`/computer-programming/program/${e}/embedded?embed=yes&author=no`;return(r=t.protocol)&&"file:"===r.toLowerCase()?`https://khanacademy.org${n}`:nb(n);var r}(this.props.programID);const o={height:this.props.height,width:"100%"};if(this.props.showEditor?(i+="&editor=yes",t="perseus-scratchpad-editor"):(i+="&editor=no&width=688",t="perseus-scratchpad","webpage"!==this.props.programType&&(n=!0)),this.props.showButtons?(i+="&buttons=yes",o.height+=67):i+="&buttons=no",this.props.settings){const e={};r.each(this.props.settings,function(t){t.name&&t.value&&(e[t.name]=t.value)}),i=ib(i,"settings",JSON.stringify(e))}const s=["allow-popups","allow-same-origin","allow-scripts","allow-top-navigation"].join(" ");return e.jsx("div",{className:C(n&&sb.container),children:e.jsx("iframe",{sandbox:s,src:i,style:o,className:t,allowFullScreen:!0})})}}const sb=k.create({container:{margin:"auto"}});const ab={name:"cs-program",displayName:"CS Program",widget:ob,hidden:!0,getStartUserInput:function(){return{status:"incomplete",message:null}},getUserInputFromSerializedState:function(e){return{status:e.status,message:e.message}}};class lb extends wt.Component{static contextType=Ld;static defaultProps={togglePrompt:"define me",definition:"definition goes here"};isWidget=!0;getPromptJSON(){return{type:"definition",definition:(e=this.props).definition,togglePrompt:e.togglePrompt};var e}render(){return e.jsx(Mm,{children:({activeDefinitionId:t,setActiveDefinitionId:n})=>e.jsx(K,{content:e.jsx(J,{style:cb.tooltipBody,closeButtonVisible:!0,children:e.jsx(wv,{apiOptions:this.props.apiOptions,content:this.props.definition,widgets:this.props.widgets,strings:this.context.strings})}),opened:t===this.props.widgetId,onClose:()=>n(null),placement:"top",children:e.jsx(Q,{onClick:()=>{this.props.trackInteraction(),n(this.props.widgetId)},children:({hovered:t,focused:n,pressed:r})=>e.jsx("span",{style:{color:y.blue,borderBottom:t||n||r?`2px solid ${y.blue}`:"none"},children:this.props.togglePrompt})})})})}}const cb={tooltipBody:{color:y.offBlack,fontSize:20,fontWeight:500,lineHeight:"30px"}},ub={name:"definition",displayName:"Definition",widget:lb};class db extends St.Component{static contextType=Ld;isWidget=!0;render(){return e.jsx("div",{style:{paddingTop:8,paddingBottom:8},children:e.jsx(Se,{text:this.context.strings.deprecatedStandin,kind:"info",layout:"full-width"})})}}const hb={name:"deprecated-standin",displayName:"Deprecated Standin",widget:db,hidden:!0};class pb extends wt.Component{static contextType=Ld;static defaultProps={choices:[],placeholder:"",apiOptions:Bm.defaults,userInput:{value:0}};focus=()=>(n.findDOMNode(this).focus(),!0);_handleChangeEvent=e=>{this._handleChange(parseInt(e.target.value))};_handleChange=e=>{this.props.trackInteraction(),this.props.handleUserInput({value:e})};getPromptJSON(){return{type:"dropdown",options:{items:(e=this.props).choices.map(e=>e.content)},userInput:{selectedIndex:e.userInput.value-1}};var e}getSerializedState(){const{userInput:e,choices:t,...n}=this.props;return{...n,choices:t.map(e=>e.content),selected:e.value}}render(){const t=[e.jsx(ke,{value:"0",disabled:!0,label:e.jsx(wv,{content:this.props.placeholder,strings:this.context.strings}),labelAsText:this.props.placeholder},"placeholder"),...this.props.choices.map((t,n)=>e.jsx(ke,{value:String(n+1),label:e.jsx(wv,{content:t.content,strings:this.context.strings}),labelAsText:t.content},String(n+1)))];return e.jsx(Ce,{children:n=>e.jsxs(X,{onClick:e=>{e.stopPropagation()},onTouchStart:e=>{e.stopPropagation()},children:[this.props.visibleLabel&&e.jsx(Me,{tag:"label",htmlFor:n,children:this.props.visibleLabel}),e.jsx(Ie,{id:n,placeholder:"",className:"perseus-dropdown",onChange:e=>this._handleChange(parseInt(e)),selectedValue:String(this.props.userInput.value),disabled:this.props.apiOptions.readOnly,"aria-label":this.props.ariaLabel||this.props.visibleLabel||this.context.strings.selectAnAnswer,showOpenerLabelAsText:!1,children:t})]})})}}const fb={name:"dropdown",displayName:"Drop down",widget:pb,getStartUserInput:function(){return{value:0}},getUserInputFromSerializedState:function(e){return{value:e.selected}}};class gb extends wt.Component{static contextType=Ld;static defaultProps={showPrompt:"Explain",hidePrompt:"Hide explanation",explanation:"explanation goes here\n\nmore explanation",widgets:{},linterContext:j};isWidget=!0;state={expanded:!1};_mounted=!1;componentDidMount(){this._mounted=!0}componentWillUnmount(){this._mounted=!1}_onClick=()=>{this.setState({expanded:!this.state.expanded}),this.props.trackInteraction()};getPromptJSON(){return{type:"explanation",showPrompt:(e=this.props).showPrompt,explanation:e.explanation};var e}render(){const t=this.state.expanded?this.props.hidePrompt:this.props.showPrompt,n=this.state.expanded?Pe:Te,r=this._mounted&&(i="(prefers-reduced-motion: no-preference)","function"==typeof window.matchMedia&&window.matchMedia(i).matches);var i;const o={height:"auto",lineHeight:"inherit",marginLeft:"-2px",marginRight:"2px",paddingLeft:"2px"},s={fontSize:"18px",lineHeight:"inherit","text-align":"left",marginRight:"-6px","white-space":"normal"},a=[mb.content,this.state.expanded?mb.contentExpanded:mb.contentCollapsed,r&&(this.state.expanded?mb.transitionExpanded:mb.transitionCollapsed)];return e.jsx(Ce,{children:r=>e.jsxs(e.Fragment,{children:[e.jsx(Ee,{"aria-expanded":this.state.expanded,"aria-controls":r,endIcon:n,kind:"tertiary",labelStyle:s,onClick:this._onClick,size:"small",style:o,children:t}),e.jsx(X,{id:r,style:a,"aria-hidden":!this.state.expanded,testId:"content-container",children:e.jsx(X,{style:mb.contentWrapper,children:e.jsx(wv,{apiOptions:this.props.apiOptions,content:this.props.explanation,widgets:this.props.widgets,linterContext:this.props.linterContext,strings:this.context.strings})})})]})})}}const mb=k.create({content:{borderLeft:"0px solid #ccc",display:"inline-grid",position:"relative"},contentCollapsed:{gridTemplateColumns:"0fr",gridTemplateRows:"0fr",marginBottom:0,marginTop:0,minWidth:"0",paddingBottom:0,visibility:"hidden"},contentExpanded:{borderLeftWidth:"5px",gridTemplateColumns:"1fr",gridTemplateRows:"1fr",marginLeft:-23,minWidth:"100%",paddingLeft:23,paddingBottom:10,visibility:"visible",marginBottom:14,marginTop:14},contentWrapper:{overflow:"hidden"},transitionCollapsed:{transition:"all 0.25s step-end, grid-template-rows 0.25s, margin-top 0.25s, margin-bottom 0.25s, padding-bottom 0.25s"},transitionExpanded:{transition:"grid-template-rows 0.5s, margin-top 0.5s, margin-bottom 0.5s, padding-bottom 0.5s"}}),vb={name:"explanation",displayName:"Explanation",widget:gb,isLintable:!0};class yb extends wt.Component{static contextType=Ld;isWidget=!0;static defaultProps={userInput:{currentValue:""}};characterCount=()=>this.props.userInput.currentValue.replace(/\n/g,"").length;_handleUserInput=e=>{this.props.handleUserInput({currentValue:e})};isOverLimit(){return!this.props.allowUnlimitedCharacters&&this.characterCount()>this.props.characterLimit}renderCharacterCount(){if(this.props.allowUnlimitedCharacters)return null;const t=this.context.strings.characterCount({used:this.characterCount(),num:this.props.characterLimit});return e.jsx(X,{children:e.jsxs(Ae,{role:"status",style:[wb.characterCountText,this.isOverLimit()?wb.overCharacterLimit:void 0],children:[this.isOverLimit()&&e.jsx(ge,{icon:Ne,size:"small",style:wb.warningCircleIcon}),t]})})}render(){return e.jsxs(X,{style:wb.container,className:"free-response",children:[e.jsx(Le,{label:e.jsx(X,{className:"free-response-question",children:e.jsx(wv,{content:this.props.question,strings:this.context.strings})}),field:e.jsx(Oe,{error:this.isOverLimit(),onChange:this._handleUserInput,placeholder:this.props.placeholder,style:wb.textarea,value:this.props.userInput.currentValue})}),this.renderCharacterCount()]})}}function xb(){return{currentValue:""}}const bb={name:"free-response",accessible:!0,displayName:"Free Response (Assessments only)",widget:yb,hidden:!1,getUserInputFromSerializedState:xb,getStartUserInput:xb},wb=k.create({container:{gap:W.xSmall_8},characterCountText:{color:Re.core.foreground.neutral.default,fontSize:je.size.small},overCharacterLimit:{color:y.red},textarea:{padding:W.medium_16},warningCircleIcon:{marginInlineEnd:W.xSmall_8}});class _b extends wt.Component{static contextType=Ld;render(){const{apiOptions:t,answerBarState:n,onCheckAnswer:r,onNextQuestion:i}=this.props,{keepTrying:o,tryAgain:s,check:a,correctExcited:l,nextQuestion:c}=this.context.strings,u={...Sb.answerBar,backgroundColor:"CORRECT"===n?y.offWhite:"white",justifyContent:"CORRECT"!==n||i?"space-between":"center"},d="INCORRECT"===n?e.jsxs("span",{style:Sb.text,children:[e.jsx("span",{style:Sb.tryAgainIcon,children:e.jsx(dg,{...xg})}),e.jsx("span",{style:{marginLeft:8},children:o})]}):e.jsx("span",{});if("CORRECT"!==n){const i="INCORRECT"===n?s:a;return e.jsxs("div",{style:u,children:[d,e.jsx(Ee,{disabled:t.readOnly||"ACTIVE"!==n,onClick:r,children:i})]})}return e.jsxs("div",{style:u,children:[e.jsxs("span",{style:Sb.text,children:[e.jsx("span",{style:{fontSize:28,color:y.green},children:e.jsx(dg,{...yg,style:{marginBottom:5}})}),e.jsx("span",{role:"alert","aria-label":l,style:{marginLeft:8},children:l})]}),i&&e.jsx(Ee,{onClick:i,children:c})]})}}const Sb={answerBar:{display:"flex",alignItems:"center",height:68,marginLeft:kh,marginRight:kh,marginBottom:kh,marginTop:Sh,paddingLeft:Sh,paddingRight:10,borderTop:`1px solid ${y.offBlack50}`},tryAgainIcon:{fontSize:28,color:"#63D9EA",transform:"scale(-1,1) rotate(-268deg)"},text:{display:"flex",flexDirection:"row",alignItems:"center",fontWeight:"bold",fontSize:17}},kb="ungraded",Cb="correct",Mb="incorrect",Ib="invalid";class Pb extends wt.Component{static contextType=Ld;static defaultProps={title:"",content:"",widgets:{},images:{},hint:null,hasHint:!1,linterContext:j};state={status:kb,showHint:!1,message:"",answerBarState:"INACTIVE"};rendererRef=wt.createRef();hintRendererRef=wt.createRef();shouldComponentUpdate(e,t){return e!==this.props||t!==this.state}_handleUserInput(e,t){this.setState({status:kb,message:""});const n=!t,r=((e,t)=>{switch(e){case"ACTIVE":return t?e:"INACTIVE";case"INACTIVE":return t?"ACTIVE":e;case"INCORRECT":return t?"ACTIVE":"INACTIVE";default:return e}})(this.state.answerBarState,n);this.setState({answerBarState:r})}_checkAnswer=()=>{const e=this.rendererRef.current?.score()||{type:"invalid"},{INVALID_MESSAGE_PREFIX:t,DEFAULT_INVALID_MESSAGE_1:n,DEFAULT_INVALID_MESSAGE_2:r}=this.context.strings,i="points"===e.type?e.total===e.earned?Cb:Mb:Ib,o="points"===e.type?e.message||"":e.message?`${t} ${s=e.message,a=this.context.strings,s&&a[Ad[s]]||s}`:`${t} ${n}${r}`;var s,a;this.setState({status:i,message:o,answerBarState:"correct"===i?"CORRECT":"INCORRECT"}),this.props.trackInteraction({status:i})};getInputPaths=()=>this.rendererRef.current?.getInputPaths()||[];getPromptJSON(){const e=this.hintRendererRef.current?.getPromptJSON()||{content:this.props.hint?.content||"",widgets:{}};return t=this.props.title,n=this.rendererRef.current?.getPromptJSON(),r=e,n?{...n,title:t,type:"graded-group",hint:r}:{type:"graded-group",title:t,content:"",widgets:{},hint:r};var t,n,r}focus=()=>!!this.rendererRef.current?.focus();focusInputPath=e=>{this.rendererRef.current?.focusPath(e)};blurInputPath=e=>{this.rendererRef.current?.blurPath(e)};render(){const t=r.extend({},Bm.defaults,this.props.apiOptions,{onFocusChange:(e,t)=>{t&&this.props.onBlur(t),e&&this.props.onFocus(e)}});let n=null,i=null;this.state.status===Cb?(i=e.jsx(dg,{...mg,style:{color:"#526f03"}}),n=this.context.strings.correct):this.state.status===Mb&&(i=e.jsx(dg,{...vg,style:{color:"#ff5454"}}),n=this.context.strings.incorrect);const o=this.props.inGradedGroupSet?C(Tb.gradedGroupInSet):C(Tb.gradedGroup),s=f({[o]:t.isMobile,"perseus-graded-group":!0,"answer-correct":!t.isMobile&&this.state.status===Cb,"answer-incorrect":!t.isMobile&&this.state.status===Mb}),{answerBarState:a}=this.state,l="CORRECT"===a,c=t.readOnly||t.isMobile&&l,u=l?"all":"none";return e.jsxs("div",{className:s,children:[!!this.props.title&&e.jsx("div",{className:C(Tb.title),children:this.props.title}),e.jsx(Rv,{widgets:this.props.widgets,handleUserInput:(e,t)=>this._handleUserInput(e,t),problemNum:0,children:({userInput:n,handleUserInput:r})=>e.jsx(wv,{content:this.props.content,widgets:this.props.widgets,images:this.props.images,userInput:n,handleUserInput:r,problemNum:0,ref:this.rendererRef,keypadElement:this.props.keypadElement,apiOptions:{...t,readOnly:c},showSolutions:u,linterContext:this.props.linterContext,strings:this.context.strings})}),!t.isMobile&&e.jsxs(e.Fragment,{children:[null!=i&&e.jsx("div",{className:"group-icon",children:i}),n&&e.jsx("div",{className:C(qv.srOnly),role:"alert","aria-label":n,children:n}),e.jsx("p",{role:"status","aria-live":"polite",children:this.state.message}),e.jsx(Ee,{kind:"secondary",disabled:this.props.apiOptions.readOnly,onClick:this._checkAnswer,children:this.context.strings.check}),l&&this.props.onNextQuestion&&e.jsx(Ee,{kind:"secondary",disabled:this.props.apiOptions.readOnly,onClick:this.props.onNextQuestion,style:{marginLeft:5},children:this.context.strings.nextQuestion})]}),this.props.hint?.content&&(this.state.showHint?e.jsxs("div",{children:[e.jsx("button",{tabIndex:"0",className:C(Tb.explanationTitle),onClick:()=>this.setState({showHint:!1}),onKeyPress:e=>{e.preventDefault(),this.setState({showHint:!1})},children:this.context.strings.hideExplanation}),e.jsx(Rv,{widgets:this.props.hint.widgets,problemNum:0,children:({userInput:n,handleUserInput:r,initializeUserInput:i})=>{const{content:o,widgets:s,images:a}=this.props.hint;return e.jsx(wv,{content:o,widgets:s,images:a,userInput:n,handleUserInput:r,initializeUserInput:i,ref:this.hintRendererRef,apiOptions:t,linterContext:this.props.linterContext,strings:this.context.strings,showSolutions:u})}})]}):e.jsx("button",{tabIndex:"0",onClick:()=>this.setState({showHint:!0}),onKeyPress:e=>{e.preventDefault(),this.setState({showHint:!0})},className:C(Tb.showHintLink),children:this.context.strings.explain})),t.isMobile&&e.jsx(_b,{apiOptions:t,answerBarState:a,onCheckAnswer:this._checkAnswer,onNextQuestion:this.props.onNextQuestion})]})}}const Tb=k.create({gradedGroupInSet:{marginLeft:0,paddingLeft:0},gradedGroup:{borderTop:`1px solid ${xh}`,borderBottom:`1px solid ${xh}`,backgroundColor:_h,marginLeft:kh,marginRight:kh,paddingBottom:Sh,paddingLeft:Sh,paddingRight:Sh,paddingTop:10,width:"auto"},showHintLink:{backgroundColor:"unset",fontSize:14,padding:0,border:"none",marginTop:20,color:y.blue,cursor:"pointer",display:"block",clear:"both"},explanationTitle:{backgroundColor:"unset",marginTop:20,color:y.blue,marginBottom:10,cursor:"pointer",fontSize:14,padding:0,border:"none",display:"block",clear:"both"},title:{fontSize:12,color:bh,textTransform:"uppercase",marginBottom:11,letterSpacing:.8}}),Eb={name:"graded-group",displayName:"Graded group (articles only)",widget:Pb,hidden:!1,tracking:"all",isLintable:!0};class jb extends wt.Component{static contextType=Ld;handleKeyDown=(e,t)=>{"Enter"!==e.key&&" "!==e.key||this.props.onChangeCurrentGroup(t)};render(){return e.jsx("ul",{className:f(C(Nb.indicatorContainer),"indicatorContainer"),children:this.props.gradedGroups.map(({title:t},n)=>e.jsx("li",{className:C(Nb.indicator),children:e.jsx(Q,{role:"button","aria-label":this.context.strings.skipToTitle({title:t}),style:Nb.indicatorButton,onClick:()=>this.props.onChangeCurrentGroup(n),onKeyDown:e=>this.handleKeyDown(e,n),children:({hovered:t,focused:r,pressed:i})=>e.jsx(X,{style:[Nb.indicatorDot,(t||r||i)&&Nb.indicatorDotFocused],children:n===this.props.currentGroup&&e.jsx(X,{style:Nb.indicatorDotActive,children:e.jsx("span",{className:C(qv.srOnly),children:this.context.strings.current})})})})},t))})}}class Rb extends wt.Component{_childGroup;static defaultProps={gradedGroups:[],linterContext:j};state={currentGroup:0};shouldComponentUpdate(e,t){return e!==this.props||t!==this.state}getInputPaths=()=>this._childGroup.getInputPaths();getPromptJSON(){const e=this._childGroup.getPromptJSON();return t=this.props,n=e,{type:"graded-group-set",options:{groupCount:t.gradedGroups.length,currentGroup:n}};var t,n}focus=()=>this._childGroup.focus();focusInputPath=e=>{this._childGroup.focusInputPath(e)};blurInputPath=e=>{this._childGroup.blurInputPath(e)};handleNextQuestion=()=>{const{currentGroup:e}=this.state;e<this.props.gradedGroups.length-1&&this.setState({currentGroup:e+1})};render(){const{JIPT:t}=zd();if(t.useJIPT&&this.props.gradedGroups.length>1)return e.jsx("div",{className:C(Nb.container),children:this.props.gradedGroups.map((t,n)=>e.jsx(Pb,{...this.props,...t,inGradedGroupSet:!1,linterContext:this.props.linterContext},n))});const n=this.props.gradedGroups[this.state.currentGroup];if(!n)return e.jsx("span",{children:"No current group..."});const r=this.props.gradedGroups.length,i=this.state.currentGroup<r-1?this.handleNextQuestion:null;return e.jsxs("div",{className:C(Nb.container),children:[e.jsxs("div",{className:C(Nb.top),children:[e.jsx("div",{className:C(Nb.title),children:n.title}),e.jsx("div",{className:C(Nb.spacer)}),e.jsx(jb,{currentGroup:this.state.currentGroup,gradedGroups:this.props.gradedGroups,onChangeCurrentGroup:e=>this.setState({currentGroup:e})})]}),e.jsx(Pb,{ref:e=>this._childGroup=e,...this.props,...n,inGradedGroupSet:!0,title:null,onNextQuestion:i,linterContext:this.props.linterContext},this.state.currentGroup)]})}}const Ab={name:"graded-group-set",displayName:"Graded group set (articles only)",widget:Rb,hidden:!1,tracking:"all",isLintable:!0},Nb=k.create({top:{display:"flex",flexDirection:"row"},spacer:{flex:1},title:{fontSize:12,color:y.offBlack64,textTransform:"uppercase",marginBottom:11,letterSpacing:.8},indicatorContainer:{display:"flex",flexDirection:"row",listStyle:"none",margin:"unset",paddingInlineStart:"unset",flexWrap:"wrap"},indicator:{width:24,height:24},indicatorButton:{width:"100%",height:"100%",display:"flex",flexWrap:"wrap",placeContent:"center",cursor:"pointer",":focus":{outline:"none"}},indicatorDot:{boxSizing:"content-box",width:10,height:10,borderRadius:"100%",borderWidth:2,borderColor:y.blue,borderStyle:"solid"},indicatorDotFocused:{borderWidth:5,borderStyle:"double"},indicatorDotActive:{backgroundColor:y.blue,width:"100%",height:"100%"},container:{borderTop:`1px solid ${xh}`,borderBottom:`1px solid ${xh}`,backgroundColor:_h,"--perseus-widget-background-color":_h,marginLeft:kh,marginRight:kh,paddingBottom:Sh,paddingLeft:Sh,paddingRight:Sh,paddingTop:10,width:"auto"}});class Lb extends wt.Component{container;static defaultProps={value:null,allowEmpty:!0};componentWillUnmount(){this.container=null}focus(){if(this.container)return this.container.focus(),!0}toggleSelect(e){const t=this.props.value;this.props.allowEmpty?this.props.onChange(t!==e?e:null):this.props.onChange(e)}render(){const t=this.props.value,n=this.props.buttons.map((n,r)=>e.jsx("button",{title:n.title,type:"button",ref:"button"+r,className:C(Ob.buttonStyle,n.value===t&&Ob.selectedStyle,n.value===t&&this.props.selectedButtonStyle),onClick:()=>this.toggleSelect(n.value),children:n.content||""+n.value},""+r));return e.jsx("div",{style:{display:"inline-block"},ref:e=>this.container=e,children:n})}}const Ob=k.create({buttonStyle:{backgroundColor:"white",border:"1px solid #ccc",borderLeft:"0",cursor:"pointer",margin:"0",padding:"5px 10px",position:"relative",":first-child":{borderLeft:"1px solid #ccc",borderTopLeftRadius:"3px",borderBottomLeftRadius:"3px"},":last-child":{borderRight:"1px solid #ccc",borderTopRightRadius:"3px",borderBottomRightRadius:"3px"},":hover":{backgroundColor:"#ccc"},":focus":{zIndex:2}},selectedStyle:{backgroundColor:"#ddd"}}),Db={PLOT:dm.Plot,PARABOLA:dm.Parabola,SINUSOID:dm.Sinusoid},Fb=(e,t,n,r)=>e.map(e=>{const i=e.map((e,r)=>{const i=t[r],o=n[r],s=(a=i,l=o,Math.floor((a[1]-a[0])/l));var a,l;const c=Math.round(e*s);return i[0]+o*c});return Rp.roundTo(i,r)}),zb=(e,t,n,r)=>e?Fb(e,t,n,r):e,Bb=(e,t)=>{const n=De.functionForType(e),r="defaultAsymptote"in n?n.defaultAsymptote:null,i=Jd.snapStepFromGridStep([1,1]);return{type:e,asymptote:zb(r,t.range,t.step,i),coords:null}},$b=r.first,Wb=(e,t)=>{const n=e.gridStep||Jd.getGridStep(e.range,e.step,t);return{gridStep:n,snapStep:e.snapStep||Jd.snapStepFromGridStep(n)}},Ub=Bb("linear",{range:[[-10,10],[-10,10]],step:[1,1]}),Hb={plot:Ub,availableTypes:[Ub.type]},qb=t=>{const n=t.charAt(0).toUpperCase()+t.substring(1),r=zd().staticUrl;return{value:t,title:n,content:e.jsx("img",{src:r(De.functionForType(t).url),alt:n})}},Vb=dm.MovablePoint,Gb=dm.MovableLine;const Yb={padding:"5px 5px"};class Xb extends wt.Component{static defaultProps={graph:{range:[[-10,10],[-10,10]],step:[1,1]},coords:null,asymptote:null,isMobile:!1};_coords=()=>{const e=this.props,t=e.graph,n=e.model&&zb(e.model.defaultCoords,t.range,t.step,t.snapStep);return e.coords||n||null};_asymptote=()=>this.props.asymptote;renderPlot=()=>{const e=this.props.model,t=this.props.graph.range[0],n={stroke:this.props.isMobile?af.BLUE_C:af.DYNAMIC,...this.props.isMobile?{"stroke-width":3}:{}},r=e.getCoefficients(this._coords(),this._asymptote());if(!r)return;const i=e.getPropsForCoeffs(r,t),o=Db[e.movable];return wt.createElement(o,{...i,key:this.props.model.url,range:t,style:n})};renderAsymptote=()=>{const t=this.props.model,n=this.props.graph,r=this._asymptote(),i={strokeDasharray:"- "};return r?.length>0&&e.jsx(Gb,{onMove:(e,t)=>{const n=mp.subtract(e,t),r=this._asymptote().map(e=>mp.add(e,n));this.props.onChange({asymptote:r})},constraints:[Xg.MovableLine.constraints.bound(),Xg.MovableLine.constraints.snap(),(e,r)=>{const i=mp.subtract(e,r),o=this._asymptote().map(e=>mp.add(e,i));return!t.extraAsymptoteConstraint||t.extraAsymptoteConstraint(e,r,this._coords(),o,n)}],normalStyle:i,highlightStyle:i,children:r.map((t,n)=>e.jsx(Vb,{coord:t,static:!0,draw:null,extendLine:!0,showHairlines:this.props.showHairlines,hideHairlines:this.props.hideHairlines,showTooltips:this.props.showTooltips,isMobile:this.props.isMobile},`asymptoteCoord-${n}`))})};render(){const t=this._coords().map((t,n)=>e.jsx(Vb,{coord:t,static:this.props.static,constraints:[Xg.MovablePoint.constraints.bound(),Xg.MovablePoint.constraints.snap(),e=>{const t=this._coords().every((t,r)=>n===r||!t||!Uh.equal(e[0],t[0]));if(!t)return!1;if(this.props.model&&this.props.model.extraCoordConstraint){const t=this.props.model.extraCoordConstraint,r=we(this._coords()),i=we(r[n]);return r[n]=e,t(e,i,r,this._asymptote(),this.props.graph)}return t}],onMove:(e,t)=>{let r;const i=this._asymptote();r=i&&this.props.model.allowReflectOverAsymptote&&function(e,t,n){const r=(e,t,n)=>(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1]);return r(n[0],n[1],t)>0!=r(n[0],n[1],e)>0}(e,t,i)?this._coords().map(e=>Rp.reflectOverLine(e,i)):we(this._coords()),r[n]=e,this.props.onChange({coords:r})},showHairlines:this.props.showHairlines,hideHairlines:this.props.hideHairlines,showTooltips:this.props.showTooltips,isMobile:this.props.isMobile},n)),n=this.props.graph.box,r=this.props.graph.backgroundImage;let i=null;if(r.url){const t=n[0]/Mh.defaultBoxSize;i=e.jsx(xm,{src:r.url,width:r.width,height:r.height,scale:t})}return e.jsx("div",{className:"perseus-widget perseus-widget-grapher",style:{width:n[0],height:n[1],boxSizing:"initial"},children:e.jsxs("div",{className:"graphie-container blank-background",style:{width:n[0],height:n[1]},children:[i,e.jsxs(dm,{...this.props.graph,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable,children:[this.props.model&&this.renderPlot(),this.props.model&&this.renderAsymptote(),this.props.model&&t]})]})})}}class Kb extends wt.Component{horizHairline;vertHairline;handlePlotChanges=e=>{const t={...this.props.userInput,...e};this.props.handleUserInput(t),this.props.trackInteraction()};handleActiveTypeChange=e=>{const t=this.props.graph,n={...this.props.userInput,...Bb(e,t)};this.props.handleUserInput(n)};_getGridConfig(e){return e.step.map((t,n)=>Jd.gridDimensionConfig(t,e.range[n],e.box[n],e.gridStep[n]))}_calculateMobileTickStep(e,t,n){const r=Jd.constrainedTickStepsFromTickSteps(t,n);return r[0]=r[0]/e[0],r[1]=r[1]/e[1],r}_setupGraphie=(e,t)=>{const n=this.props.apiOptions.isMobile;if("graph"===t.markings?(e.graphInit({range:t.range,scale:t.gridConfig.map(e=>e.scale),axisArrows:"<->",labelFormat:function(e){return"\\small{"+e+"}"},gridStep:t.gridStep,snapStep:t.snapStep,tickStep:n?this._calculateMobileTickStep(t.gridStep,t.step,t.range):t.gridConfig.map(e=>e.tickStep),labelStep:1,unityLabels:t.gridConfig.map(e=>e.unityLabel),isMobile:n}),e.label([0,t.range[1][1]],t.labels[1],n?"below right":"above"),e.label([t.range[0][1],0],t.labels[0],n?"above left":"right")):"grid"===t.markings?e.graphInit({range:t.range,scale:t.gridConfig.map(e=>e.scale),gridStep:t.gridStep,axes:!1,ticks:!1,labels:!1,isMobile:n}):"none"===t.markings&&e.init({range:t.range,scale:t.gridConfig.map(e=>e.scale)}),this.props.apiOptions.isMobile){const t={normalStyle:{strokeWidth:1}};this.horizHairline=new Ef(e,[0,0],[0,0],t),this.horizHairline.attr({stroke:af.INTERACTIVE}),this.horizHairline.hide(),this.vertHairline=new Ef(e,[0,0],[0,0],t),this.vertHairline.attr({stroke:af.INTERACTIVE}),this.vertHairline.hide()}};showHairlines=e=>{this.props.apiOptions.isMobile&&(this.horizHairline.moveTo([this.props.graph.range[0][0],e[1]],[this.props.graph.range[0][1],e[1]]),this.horizHairline.show(),this.vertHairline.moveTo([e[0],this.props.graph.range[1][0]],[e[0],this.props.graph.range[1][1]]),this.vertHairline.show())};hideHairlines=()=>{this.props.apiOptions.isMobile&&(this.horizHairline.hide(),this.vertHairline.hide())};getPromptJSON(){return(e=>{const{userInput:t}=e,{type:n,coords:r}=t,i={type:n,coords:r};return"logarithm"!==t.type&&"exponential"!==t.type||(i.asymptote=t.asymptote),{type:"grapher",options:{availableTypes:e.availableTypes,range:e.graph.range,labels:e.graph.labels,tickStep:e.graph.step,gridStep:e.graph.gridStep,snapStep:e.graph.snapStep,backgroundImageUrl:e.graph.backgroundImage.url},userInput:i}})(this.props)}getSerializedState(){const{userInput:e,correct:t,...n}=this.props;return{...n,plot:this.props.userInput}}render(){const t=this.props.static?[this.props.correct.type]:this.props.availableTypes,n=this.props.userInput.type,r=this.props.userInput.coords,i="asymptote"in this.props.userInput?this.props.userInput.asymptote:void 0,o=e.jsx("div",{style:Yb,children:e.jsx(Lb,{value:n,allowEmpty:!0,buttons:t.map(qb),onChange:this.handleActiveTypeChange})}),s=dv(this.props.containerSizeClass),a={...this.props.graph,...Wb(this.props.graph,s[0]),gridConfig:this._getGridConfig({...this.props.graph,box:s,...Wb(this.props.graph,s[0])})},l={graph:{box:s,range:a.range,step:a.step,snapStep:a.snapStep,backgroundImage:a.backgroundImage,options:a,setup:this._setupGraphie},onChange:this.handlePlotChanges,model:n&&De.functionForType(n),coords:r,asymptote:i,static:this.props.static,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:this.props.apiOptions.isMobile,showTooltips:this.props.graph.showTooltips,showHairlines:this.showHairlines,hideHairlines:this.hideHairlines};return e.jsxs("div",{children:[e.jsx(Xb,{...l}),t.length>1&&o]})}}const Qb={name:"grapher",displayName:"Grapher",hidden:!0,widget:Kb,getUserInputFromSerializedState:function(e){return e.plot},getStartUserInput:function(e){if(1===e.availableTypes.length){const t=e.graph,n=$b(e.availableTypes);if(n)return Bb(n,t)}return Hb.plot},getCorrectUserInput:function(e){return e.correct}};class Zb extends wt.Component{static contextType=Ld;rendererRef;static defaultProps={content:"",widgets:{},images:{},linterContext:j};componentDidMount(){this.forceUpdate()}getPromptJSON(){return e=this.rendererRef?.getPromptJSON(),e?{...e,type:"group"}:{type:"group",content:"",widgets:{}};var e}getSerializedState=()=>this.rendererRef?.getSerializedState();getInputPaths(){return this.rendererRef?.getInputPaths()??[]}focus(){return this.rendererRef?.focus()??!1}focusInputPath=e=>{this.rendererRef?.focusPath(e)};blurInputPath=e=>{this.rendererRef?.blurPath(e)};render(){const t={...Bm.defaults,...this.props.apiOptions,onFocusChange:(e,t)=>{t&&this.props.onBlur(t),e&&this.props.onFocus(e)}},n=this.props.findWidgets("group").indexOf(this),r=this.props.apiOptions.groupAnnotator(n,this.props.widgetId);return e.jsxs("div",{className:f({"perseus-group":!0}),children:[r,e.jsx(wv,{userInput:this.props.userInput,handleUserInput:(e,t)=>{this.props.handleUserInput({...this.props.userInput,[e]:t})},content:this.props.content,widgets:this.props.widgets,images:this.props.images,ref:e=>this.rendererRef=e,apiOptions:t,findExternalWidgets:this.props.findWidgets,reviewMode:this.props.reviewMode,showSolutions:this.props.showSolutions,linterContext:this.props.linterContext,strings:this.context.strings})]})}}const Jb={name:"group",displayName:"Group (SAT only)",widget:Zb,hidden:!0,isLintable:!0,getStartUserInput:function(e,t){return jv(e.widgets,t)},getUserInputFromSerializedState:function(e,t){return function(e,t){const n={};return Object.entries(e).forEach(([e,r])=>{const i=function(e,t){const n=t[e];return n?.type??null}(e,t),o=gv(i);if(o?.getUserInputFromSerializedState){const i=o.getUserInputFromSerializedState(r,t[e].options);n[e]=i}}),n}(e,t.widgets)}},{updateQueryString:ew}=Jd;class tw extends wt.Component{static defaultProps={allowFullScreen:!1,allowTopNavigation:!1,userInput:{status:"incomplete",message:null}};componentDidMount(){p(window).on("message",this.handleMessageEvent)}componentWillUnmount(){p(window).off("message",this.handleMessageEvent)}getPromptJSON(){return rb("iframe")}getSerializedState(){const{userInput:e,alignment:t,...n}=this.props;return n}handleMessageEvent=e=>{let t={};try{t=JSON.parse(e.originalEvent.data)}catch{return}if(void 0===t.testsPassed)return;const n=t.testsPassed?"correct":"incorrect";this.props.handleUserInput({status:n,message:t.message})};render(){const t={width:String(this.props.width),height:String(this.props.height)},{InitialRequestUrl:n}=zd();Object.entries(t).forEach(([e,n])=>{n.endsWith("%")||n.endsWith("px")||(t[e]=n+"px")});let r=this.props.url;if(r&&r.length&&0!==r.indexOf("http")&&(r="https://www.khanacademy.org/computer-programming/program/"+r+"/embedded?buttons=no&embed=yes&editor=no&author=no",r=ew(r,"width",`${this.props.width}`),r=ew(r,"height",`${this.props.height}`),r=ew(r,"origin",n.origin)),this.props.settings){const e={};this.props.settings.forEach(t=>{t.name&&t.value&&(e[t.name]=t.value)}),r=ew(r,"settings",JSON.stringify(e))}let i="allow-same-origin allow-scripts";return i+=" allow-top-navigation",e.jsx("iframe",{sandbox:"allow-same-origin allow-scripts allow-top-navigation",style:t,src:r,allowFullScreen:this.props.allowFullScreen})}}const nw={name:"iframe",displayName:"Iframe (deprecated)",widget:tw,hidden:!0,getStartUserInput:function(){return{status:"incomplete",message:null}},getUserInputFromSerializedState:function(e){return{status:e.status,message:e.message}}},rw={},iw=({caption:t,backgroundImage:n,apiOptions:r,linterContext:i})=>{const o=wt.useContext(Ld);return e.jsx("div",{className:rw.descriptionAndCaptionContainer,children:t&&e.jsx("figcaption",{className:"perseus-image-caption",style:{maxWidth:n.width},children:e.jsx(wv,{content:t,apiOptions:r,linterContext:i,strings:o.strings})})})},ow=({apiOptions:t,alt:n,backgroundImage:r,box:i,caption:o,linterContext:s,labels:a,range:l,title:c,trackInteraction:u})=>{const d=wt.useContext(Ld);return e.jsxs("figure",{className:"perseus-image-widget",style:{maxWidth:r.width},children:[c&&e.jsx("div",{className:`perseus-image-title ${rw.titleContainer}`,children:e.jsx(wv,{content:c,apiOptions:t,linterContext:s,strings:d.strings})}),r.url&&e.jsx(jd.Consumer,{children:({setAssetStatus:s})=>e.jsx(xm,{src:r.url,alt:o===n?"":n,width:r.width,height:r.height,preloader:t.imagePreloader,extraGraphie:{box:i,range:l,labels:a},trackInteraction:u,zoomToFullSizeOnMobile:t.isMobile,constrainHeight:t.isMobile,allowFullBleed:t.isMobile,setAssetStatus:s})}),o&&e.jsx(iw,{caption:o,backgroundImage:r,apiOptions:t,linterContext:s})]})},sw=[0,10],aw={url:null,width:0,height:0};class lw extends wt.Component{static contextType=Ld;static defaultProps={alignment:"block",title:"",range:[sw,sw],box:[400,400],backgroundImage:aw,labels:[],alt:"",caption:"",linterContext:j};isWidget=!0;getPromptJSON(){return{type:"image",options:{altText:(e=this.props).alt,title:e.title,caption:e.caption,imageUrl:e.backgroundImage.url}};var e}render(){return e.jsx(ow,{...this.props})}}const cw={name:"image",displayName:"Image",widget:lw,isLintable:!0},uw=dm.Label,dw=dm.Line,hw=dm.MovablePoint,pw=dm.MovableLine,fw=dm.Plot,gw=dm.PlotParametric,mw=dm.Point,vw=dm.Rect,{unescapeMathMode:yw}=Jd,xw=(e,t)=>{let n=e+"||"+(t=t||{}).decimal_separator+"||";const r=t.functions,i=r?r.length:0;for(let o=0;o<i;o++)n+=r[o]+"|";return n},bw=Object.create(null),ww=(e,t)=>{const n=xw(e,t);let r=bw[n];return r||(r=Fe(e,t),bw[n]=r,r)},_w=Object.create(null),Sw=(e,t)=>{const n=xw(e,t);let r=_w[n];if(r)return r;const i=Fe(e,t).expr;return r=i?i.compile():function(){return 0},_w[n]=r,r};class kw extends wt.Component{static defaultProps={graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],tickStep:[1,1],gridStep:[1,1],markings:"graph"},elements:[]};isWidget=!0;state={variables:Cw(this.props.elements),functions:Mw(this.props.elements)};UNSAFE_componentWillReceiveProps(e){r.isEqual(this.props.elements,e.elements)||this.setState({variables:Cw(e.elements),functions:Mw(e.elements)})}_setupGraphie=(e,t)=>{e.graphInit(r.extend({},t,{grid:r.contains(["graph","grid"],this.props.graph.markings),axes:r.contains(["graph"],this.props.graph.markings),ticks:r.contains(["graph"],this.props.graph.markings),labels:r.contains(["graph"],this.props.graph.markings),labelFormat:function(e){return"\\small{"+e+"}"},axisArrows:"<->",unityLabels:!1}))};_updatePointLocation=(e,t)=>{const n=r.clone(this.state.variables);n["x_"+e]=t[0],n["y_"+e]=t[1],this.setState({variables:n}),this.props.trackInteraction()};_updateLineLocation=(e,t)=>{const n=this._eval("("+e.endX+")-("+e.startX+")"),i=this._eval("("+e.endY+")-("+e.startY+")"),o=mp.add(t,[n,i]),s=r.clone(this.state.variables);s["x_"+e.startSubscript]=t[0],s["y_"+e.startSubscript]=t[1],s["x_"+e.endSubscript]=o[0],s["y_"+e.endSubscript]=o[1],this.setState({variables:s}),this.props.trackInteraction()};_eval=(e,t)=>{const n=Sw(e,{functions:this.state.functions}),i=r.extend({},this.state.variables,t);return r.each(r.keys(i),e=>{if(r.isString(i[e])){const t=Sw(i[e],{functions:this.state.functions});i[e]=function(e){return t(r.extend({},i,{x:e}))}}}),n(i)||0};_extractVars=e=>{if(null==e)return[];let t=[];return r.each(e.args(),function(e){e&&"Expr"===e.constructor.name&&(t=t.concat(this._extractVars(e)))},this),"Var"===e.name()&&t.push(e.prettyPrint()),t};getPromptJSON(){return rb("interaction")}render(){const t=this.props.graph.range;let n=this.props.graph.labels;return"graph"===this.props.graph.markings&&(n=this.props.graph.labels.map(e=>e.startsWith("$")&&e.endsWith("$")?e.slice(1,-1):e)),e.jsxs(dm,{box:this.props.graph.box,range:this.props.graph.range,options:this.props.graph,setup:this._setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,children:["graph"===this.props.graph.markings&&e.jsx(uw,{coord:[0,t[1][1]],text:n[1],direction:"above"}),"graph"===this.props.graph.markings&&e.jsx(uw,{coord:[t[0][1],0],text:n[0],direction:"right"}),r.map(this.props.elements,function(t,n){if("point"===t.type)return e.jsx(mw,{coord:[this._eval(t.options.coordX),this._eval(t.options.coordY)],color:t.options.color},t.key);if("line"===t.type){const n=[this._eval(t.options.startX),this._eval(t.options.startY)],r=[this._eval(t.options.endX),this._eval(t.options.endY)];return e.jsx(dw,{start:n,end:r,style:{stroke:t.options.color,strokeWidth:t.options.strokeWidth,strokeDasharray:t.options.strokeDasharray,arrows:t.options.arrows}},t.key)}if("movable-point"===t.type){const n=[e=>[Math.max(this._eval(t.options.constraintXMin),Math.min(this._eval(t.options.constraintXMax),e[0])),Math.max(this._eval(t.options.constraintYMin),Math.min(this._eval(t.options.constraintYMax),e[1]))]];return"snap"===t.options.constraint?n.push(hw.constraints.snap(t.options.snap)):"x"===t.options.constraint?n.push(e=>[this._eval(t.options.constraintFn,{y:e[1]}),e[1]]):"y"===t.options.constraint&&n.push(e=>[e[0],this._eval(t.options.constraintFn,{x:e[0]})]),e.jsx(hw,{coord:[this.state.variables["x_"+t.options.varSubscript],this.state.variables["y_"+t.options.varSubscript]],constraints:n,foo_x:t.options.constraint,foo_y:t.options.constraintFn,foo_z:t.options.snap,onMove:r.partial(this._updatePointLocation,t.options.varSubscript)},t.key)}if("movable-line"===t.type){const n=[e=>[Math.max(this._eval(t.options.constraintXMin),Math.min(this._eval(t.options.constraintXMax),e[0])),Math.max(this._eval(t.options.constraintYMin),Math.min(this._eval(t.options.constraintYMax),e[1]))]];"snap"===t.options.constraint?n.push(hw.constraints.snap(t.options.snap)):"x"===t.options.constraint?n.push(e=>[this._eval(t.options.constraintFn,{y:e[1]}),e[1]]):"y"===t.options.constraint&&n.push(e=>[e[0],this._eval(t.options.constraintFn,{x:e[0]})]);const i=[this.state.variables["x_"+t.options.startSubscript],this.state.variables["y_"+t.options.startSubscript]],o=[this.state.variables["x_"+t.options.endSubscript],this.state.variables["y_"+t.options.endSubscript]];return e.jsxs(pw,{constraints:n,onMove:r.bind(this._updateLineLocation,this,t.options),foo_x:t.options.constraint,foo_y:t.options.constraintFn,foo_z:t.options.snap,children:[e.jsx(hw,{coord:i,static:!0,normalStyle:{stroke:"none",fill:"none"}}),e.jsx(hw,{coord:o,static:!0,normalStyle:{stroke:"none",fill:"none"}})]},t.key)}if("function"===t.type){const n=e=>this._eval(t.options.value,{x:e}),i=r.without(this._extractVars(ww(t.options.value).expr),"x"),o=r.object(i,r.map(i,e=>this.state.variables[e])),s=[this._eval(t.options.rangeMin,this.state.variables),this._eval(t.options.rangeMax,this.state.variables)];return e.jsx(fw,{fn:n,foo_fn:t.options.value,foo_varvalues:o,range:s,style:{stroke:t.options.color,strokeWidth:t.options.strokeWidth,strokeDasharray:t.options.strokeDasharray,plotPoints:100}},t.key)}if("parametric"===t.type){const n=e=>[this._eval(t.options.x,{t:e}),this._eval(t.options.y,{t:e})],i=r.without(this._extractVars(ww(t.options.x).expr).concat(this._extractVars(ww(t.options.y).expr)),"t"),o=r.object(i,r.map(i,e=>this.state.variables[e])),s=[this._eval(t.options.rangeMin,this.state.variables),this._eval(t.options.rangeMax,this.state.variables)];return e.jsx(gw,{fn:n,foo_fnx:t.options.x,foo_fny:t.options.y,foo_varvalues:o,range:s,style:{stroke:t.options.color,strokeWidth:t.options.strokeWidth,strokeDasharray:t.options.strokeDasharray,plotPoints:100}},t.key)}if("label"===t.type){const r=[this._eval(t.options.coordX),this._eval(t.options.coordY)];return e.jsx(uw,{coord:r,text:yw(t.options.label),style:{color:t.options.color}},n+1)}return"rectangle"===t.type?e.jsx(vw,{x:this._eval(t.options.coordX),y:this._eval(t.options.coordY),width:r.max([this._eval(t.options.width),0]),height:r.max([this._eval(t.options.height),0]),style:{stroke:"none",fill:t.options.color}},n+1):void 0},this)]})}}const Cw=e=>{const t={};return r.each(r.where(e,{type:"movable-point"}),e=>{const n=e.options.varSubscript,r=ww(e.options.startX||"0").expr,i=ww(e.options.startY||"0").expr;let o=0,s=0;r&&(o=r.eval({})||0),i&&(s=i.eval({})||0),t["x_"+n]=o,t["y_"+n]=s}),r.each(r.where(e,{type:"movable-line"}),e=>{const n=e.options.startSubscript,r=e.options.endSubscript,i=ww(e.options.startX||"0").expr,o=ww(e.options.startY||"0").expr,s=ww(e.options.endX||"0").expr,a=ww(e.options.endY||"0").expr;let l=0,c=0,u=0,d=0;i&&(l=i.eval({})||0),o&&(c=o.eval({})||0),s&&(u=s.eval({})||0),a&&(d=a.eval({})||0),t["x_"+n]=l,t["y_"+n]=c,t["x_"+r]=u,t["y_"+r]=d}),r.each(r.where(e,{type:"function"}),e=>{t[e.options.funcName]=e.options.value}),t},Mw=e=>r.map(r.where(e,{type:"function"}),e=>e.options.funcName),Iw={name:"interaction",displayName:"Interaction",widget:kw,hidden:!0},Pw=e=>{const t=e.userInput.type;switch(t){case"angle":return{type:e.userInput.type,angleOffsetDegrees:e.userInput.angleOffsetDeg,startCoords:e.userInput.startCoords};case"circle":return{type:e.userInput.type,startParams:{center:e.userInput.startCoords?.center,radius:e.userInput.startCoords?.radius}};case"linear":case"linear-system":case"quadratic":case"ray":case"sinusoid":return{type:e.userInput.type,startCoords:e.userInput.startCoords};case"point":return{type:e.userInput.type,numPoints:e.userInput.numPoints,startCoords:e.userInput.startCoords};case"polygon":return{type:e.userInput.type,match:e.userInput.match,numSides:e.userInput.numSides,startCoords:e.userInput.startCoords};case"segment":return{type:e.userInput.type,numSegments:e.userInput.numSegments,startCoords:e.userInput.startCoords};case"none":return{};default:throw new ze(t)}},Tw=e=>{const t=e.type;switch(t){case"angle":return{coords:e.coords,angleOffsetDegrees:e.angleOffsetDeg};case"circle":return{center:e.center,radius:e.radius};case"linear":case"linear-system":case"point":case"polygon":case"quadratic":case"ray":case"segment":case"sinusoid":return{coords:e.coords};case"none":return{};default:throw new ze(t)}};function Ew(){return new jw}class jw{path=[];scaleFactor=1;build(){return this.path.map((e=this.scaleFactor,t=>"A"===t.action?{...t,args:[t.args[0]*e,t.args[1]*e,t.args[2],t.args[3],t.args[4],t.args[5]*e,t.args[6]*e]}:{...t,args:t.args.map(t=>t*e)})).map(Rw).join("");var e}move(e,t){return this.path.push({action:"M",args:[e,t]}),this}line(e,t){return this.path.push({action:"L",args:[e,t]}),this}circularArc(e,t,n,{sweep:r=!1,largeArc:i=!1}={}){return this.path.push({action:"A",args:[e,e,0,i?1:0,r?1:0,t,n]}),this}curve(e,t,n,r,i,o){return this.path.push({action:"C",args:[e,t,n,r,i,o]}),this}scale(e){return this.scaleFactor*=e,this}}function Rw(e){return`${e.action}${e.args.join(" ")}`}function Aw(e,t,n){return e<t?t:e>n?n:e}function Nw(e,t){const[n,r]=t,[i,o]=e;return[Math.round(n/i)*i,Math.round(r/o)*o]}function Lw([e,t]){return t-e}function Ow(e,t){if(2*e>Lw(t)){const e=function(e,t){return(e+t)/2}(...t);return[e,e]}return[t[0]+e,t[1]-e]}function Dw(e,t){return[Aw(t[0],...e[0]),Aw(t[1],...e[1])]}function Fw(e,t){return[Ow(e[0],t[0]),Ow(e[1],t[1])]}function zw({range:e,point:t}){return t[0]>=e[0][0]&&t[0]<=e[0][1]&&t[1]>=e[1][0]&&t[1]<=e[1][1]}function Bw(e,t,n){return(t-e)*Aw(n,0,1)+e}function $w([[e,t],[n,r]],[[i,o],[s,a]]){const l=(n-e)*(a-o)-(s-i)*(r-t);if(0!==l){const c=((a-o)*(s-e)+(i-s)*(a-t))/l;if(c<=0||((t-r)*(s-e)+(n-e)*(a-t))/l>=1)return;const u=[e,t],d=Be.sub([n,r],u);return Be.add(u,Be.scale(d,c))}}const Ww=wt.createContext({range:[[0,1],[0,1]],tickStep:[1,1],gridStep:[1,1],snapStep:[1,1],markings:"none",showTooltips:!1,graphDimensionsInPixels:[1,1],width:0,height:0,labels:[],labelLocation:"onAxis",disableKeyboardInteraction:!1,interactiveColor:"var(--mafs-blue)",showAxisArrows:{xMin:!0,xMax:!0,yMin:!0,yMax:!0}});function Uw(){return St.useContext(Ww)}const Hw=Be.matrixBuilder;function qw(e,t,n=[0,0]){const{range:r,width:i,height:o}=t,[[s,a],[l,c]]=r,u=Hw().translate(...n).scale(i/(a-s),-o/(c-l)).get();return e.map(e=>Be.transform(e,u))}function Vw(e,t){const[[n],[,r]]=t.range,[i,o]=[-n,-r];return qw([e],t,[i,o])[0]}const Gw=(...e)=>qw(e,Uw()),Yw=(...e)=>function(e,t){const{range:n,width:r,height:i}=t,[[o,s],[a,l]]=n,c=Hw().scale(r/(s-o),i/(l-a)).get();return e.map(e=>Be.transform(e,c))}(e,Uw());function Xw(e,t){const[[n,r],[i,o]]=t.range,{width:s,height:a}=t,l=r-n,c=o-i;return e.map(e=>[e[0]/s*l+n,o-e[1]/a*c])}const Kw=Ew().move(-3,4).curve(-2.75,2.5,0,.25,.75,0).curve(0,-.25,-2.75,-2.5,-3,-4).scale(1.4).build();function Qw(t){const[n]=Gw(t.tip);return e.jsx("g",{"aria-hidden":!0,className:"interactive-graph-arrowhead",transform:`translate(${n[0]} ${n[1]}) rotate(${t.angle})`,children:e.jsx("g",{transform:"translate(-1.5)",children:e.jsx("path",{d:Kw,fill:"none",style:{stroke:t.color??"inherit"},strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:`${t.strokeWidth??2}px`})})})}function Zw(){const{range:[[t,n],[r,i]],showAxisArrows:o}=Uw(),s="var(--mafs-fg)";return e.jsxs(e.Fragment,{children:[!(r>0||i<0)&&e.jsxs(e.Fragment,{children:[o.xMin&&e.jsx(Qw,{color:s,tip:[t,0],angle:180}),o.xMax&&e.jsx(Qw,{color:s,tip:[n,0],angle:0})]}),!(t>0||n<0)&&e.jsxs(e.Fragment,{children:[o.yMin&&e.jsx(Qw,{color:s,tip:[0,r],angle:90}),o.yMax&&e.jsx(Qw,{color:s,tip:[0,i],angle:270})]})]})}const Jw="perseus_mafs_remove_button",e_=(e,t,n,r)=>n.map(n=>n.map((n,i)=>{const o=e[i];if(r)return o[0]+Lw(o)*n;const s=t[i],a=Math.floor(Lw(o)/s),l=Math.round(n*a);return o[0]+s*l})),t_=(e,t)=>e.map(e=>e.map((e,n)=>(e+t[n][1])/Lw(t[n])));function n_({snapStep:e,range:t,point:n}){return Dw(Fw(e,t),n)}function r_(e){return"point"===e.type&&"unlimited"===e.numPoints||"polygon"===e.type&&"unlimited"===e.numSides}const i_=S.parserFor({math:{...M.math,order:0},text:{order:1,match:S.anyScopeRegex(/^([^$\\{}]+)/),parse:e=>({content:e[0]})},specialCharacter:{order:2,match:S.anyScopeRegex(/^(\\[\S\s]|\$|\\$|{|})/),parse:e=>({content:e[0]})}},{inline:!0});function o_(e){const t=i_(e);let n="";for(const r of t)"math"===r.type?n+="$"+r.content+"$":"specialCharacter"===r.type?n+=s_(r.content):n+=r.content;return`\\text{${n}}`}function s_(e){return 1===e.length?"\\"+e:e}const a_=e=>{const[t,n]=e;return Math.abs(n-t)},l_=(e,t)=>[Math.max(Math.min(e[0],t.width+17.5),-21),Math.max(Math.min(e[1],t.height+17.5),-28)],c_=(e,t,n)=>{if("alongEdge"===t){const t=e.range[1][0]>=0?[0,42]:[0,21],r=e.range[0][0]<0&&Math.abs(e.range[0][0])<.07*(e.range[0][1]-e.range[0][0]);let i=0;if(e.range[0][0]>=0||r){const t=((e,t)=>{const n=Math.max(String(Math.abs(Math.floor(e[0]))).length,String(Math.abs(Math.ceil(e[1]))).length),r=d_(t)+2;return Math.max(n,r)})(e.range[1],n[1]);i=10.5*t+(e.range[1][0]<0&&e.range[0][0]<=0?7:0)}const o=[-17.5-i,-14],s=[(e.range[0][0]+e.range[0][1])/2,e.range[1][0]],a=[e.range[0][0],(e.range[1][0]+e.range[1][1])/2];r&&(a[0]=a[0]-e.range[0][0]);return[Be.add(Vw(s,e),t),Be.add(Vw(a,e),o)]}const r=[e.range[0][1],0],i=[0,e.range[1][1]],o=[0,-28];let s=Vw(r,e),a=Be.add(Vw(i,e),o);return s=l_(s,e),a=l_(a,e),[s,a]};function u_(e,t,n,r){const i=[],o=d_(e);for(let a=Math.max(t,0)+(r>=0?0:e);a<n;a+=e)i.push(parseFloat(a.toFixed(o)));let s=Math.min(n,0)-e;for(;s>t;s-=e)i.push(s);return i}const d_=e=>{const t=e.toString();return t.includes(".")?t.split(".")[1].length:0};function h_(e){const t=e/Math.PI;switch(t){case 1:return"π";case-1:return"-π";case 0:return"0";default:return t+"π"}}function p_({i18n:t,xAxisLabelLocation:n,yAxisLabelLocation:r}){const{labels:i,labelLocation:o}=Uw(),[s,a]=i,{xLabelTransform:l,yLabelTransform:c}=(e=>{const t=void 0===e||"onAxis"===e;return{xLabelTransform:t?"translate(7px, -50%)":"translate(-50%, -50%)",yLabelTransform:t?"translate(-50%, 0px)":"translate(-50%, 0px) rotate(-90deg)"}})(o),{TeX:u}=zd();return e.jsxs(e.Fragment,{children:[e.jsx("span",{"aria-hidden":!0,style:{position:"absolute",left:n[0],top:n[1],fontSize:"14px",transform:l},children:e.jsx(u,{children:o_(s)})}),e.jsx("span",{"aria-hidden":!0,style:{position:"absolute",left:r[0],top:r[1],fontSize:"14px",transform:c},children:e.jsx(u,{children:o_(a)})})]})}const f_=14,g_=({y:t,range:n,tickStep:r,showPi:i})=>{let o=0;n[0][0]>0&&(o=n[0][0]),n[0][1]<0&&(o=n[0][1]);const s=[o,t],[[a,l]]=Gw(s),c=a-5,u=l,d=a+5,h=l,p=a+(n[0][1]<=0?21:1.1*-14),f=l+3.5,g=((e,t,n)=>{let r=!0;return t[0][0]<-n&&t[0][1]>0&&e===-n&&(r=!1),r})(t,n,r),m=d_(r),v=i?h_(t):t.toFixed(m);return e.jsxs("g",{className:"tick","aria-hidden":!0,children:[e.jsx("line",{x1:c,y1:u,x2:d,y2:h,className:"axis-tick"}),g&&e.jsx("text",{className:"axis-tick-label",style:{fontSize:f_},textAnchor:"end",x:p,y:f,children:v})]})},m_=({x:t,range:n,tickStep:r,showPi:i})=>{let o=0;n[1][0]>0&&(o=n[1][0]),n[1][1]<0&&(o=n[1][1]);const s=[t,o],[[a,l]]=Gw(s),c=a,u=l+5,d=a,h=l-5,p=a+(t<0?-2:0),f=l+(n[1][1]<0?-14:24.5),g=d_(r),m=i?h_(t):t.toFixed(g);return e.jsxs("g",{className:"tick","aria-hidden":!0,children:[e.jsx("line",{x1:c,y1:u,x2:d,y2:h,className:"axis-tick"}),e.jsx("text",{className:"axis-tick-label",style:{fontSize:f_},textAnchor:"middle",x:p,y:f,children:m})]})},v_=()=>{const{tickStep:t,range:n}=Uw(),[[r,i],[o,s]]=n,[a,l]=t,c=u_(l,o,s,r),u=u_(a,r,i,o);return e.jsxs("g",{className:"axis-ticks",role:"presentation",children:[e.jsx("g",{className:"y-axis-ticks",children:c.map(r=>e.jsx(g_,{y:r,range:n,tickStep:t[1],showPi:t[1]%Math.PI===0},`y-grid-tick-${r}`))}),e.jsx("g",{className:"x-axis-ticks",children:u.map(r=>e.jsx(m_,{x:r,range:n,tickStep:t[0],showPi:t[0]%Math.PI===0},`x-grid-tick-${r}`))})]})},y_=(e,t)=>{const n="axes"!==e.markings&&e.gridStep[t];return{axis:"graph"===e.markings||"axes"===e.markings,lines:n,labels:!1}},x_=t=>"none"===t.markings?null:e.jsx($e.Cartesian,{xAxis:y_(t,0),yAxis:y_(t,1)});k.create({hud:{boxSizing:"border-box",height:36,padding:"9px 16px",borderRadius:18,fontFamily:fh,fontSize:"15px",lineHeight:"18px",color:mh,userSelect:"none",borderWidth:0},hudFixedPosition:{bottom:20,position:"fixed",right:20,zIndex:1},icon:{width:24,height:24,marginRight:8,marginTop:-3,verticalAlign:"middle"},enabled:{backgroundColor:Ih,":hover":{backgroundColor:Ph},":active":{backgroundColor:Th}},disabled:{backgroundColor:xh,":hover":{backgroundColor:"#a1a5a9"},":active":{backgroundColor:bh}}});class b_ extends wt.Component{static defaultProps={color:"currentColor"};render(){const{color:t,pathClassName:n,className:r,title:i,style:o,alt:s}=this.props;let{icon:a,size:l}=this.props,c="";"string"==typeof a&&(a={path:a,width:10,height:10}),"number"!=typeof l&&(l=1,c="em");const u=l,d=u/a.height*a.width,h=!!this.props.focusable;return e.jsxs("svg",{role:"img",alt:s,"aria-label":i,"aria-hidden":!i||null,className:r,style:o,focusable:h.toString(),width:d+c,height:u+c,viewBox:`0 0 ${a.width} ${a.height}`,children:[!!i&&e.jsx("title",{children:i}),e.jsx("path",{className:n,fill:t,d:a.path})]})}}k.create({spacingLeft:{marginInlineStart:W.xxxSmall_4},body:{padding:W.medium_16}}),k.create({buttonStyle:{backgroundColor:"white",border:"1px solid #ccc",borderLeft:"0",cursor:"pointer",margin:"0",padding:"5px 10px",position:"relative",":first-child":{borderLeft:"1px solid #ccc",borderTopLeftRadius:"3px",borderBottomLeftRadius:"3px"},":last-child":{borderRight:"1px solid #ccc",borderTopRightRadius:"3px",borderBottomRightRadius:"3px"},":hover":{backgroundColor:"#ccc"},":focus":{zIndex:2}},selectedStyle:{backgroundColor:"#ddd"}});const{firstNumericalParse:w_,captureScratchpadTouchStart:__}=Jd,S_=Np.toNumericString,k_=Np.getNumericFormat;class C_ extends wt.Component{inputRef=wt.createRef();static propTypes={value:Mt.number,format:Mt.string,placeholder:Mt.oneOfType([Mt.string,Mt.number]),onChange:Mt.func.isRequired,onFormatChange:Mt.func,checkValidity:Mt.func,size:Mt.oneOf(["mini","small","normal"]),label:Mt.oneOf(["put your labels outside your inputs!"]),allowPiTruncation:Mt.bool};static defaultProps={value:null,placeholder:null,format:null,onFormatChange:()=>null,checkValidity:()=>!0,useArrowKeys:!1};state={format:this.props.format};componentDidMount(){const e=this.getValue();this.props.allowPiTruncation&&null!==e&&0!==e&&"pi"!==this.state.format&&function(e){return!Number.isInteger(e)&&(e%Math.PI===0||e%(Math.PI/2)==0||e%(Math.PI/3)==0||e%(Math.PI/4)==0||e%(Math.PI/6)==0)}(e)&&(this._setValue(e/Math.PI,"pi"),this.setState({format:"pi"}))}componentDidUpdate(e){Uh.equal(this.getValue(),this.props.value)||this._setValue(this.props.value,this.state.format)}_getInput=()=>{if(!this.inputRef.current)throw new d("Input ref accessed before set",h.Internal);return this.inputRef.current};getValue=()=>this.parseInputValue(this._getInput().value);getStringValue=()=>this._getInput().toString();parseInputValue=e=>{if(""===e){const e=this.props.placeholder;return r.isFinite(e)?+e:null}const t=w_(e);return r.isFinite(t)?t:this.props.value};focus=()=>{this._getInput().focus(),this._handleFocus()};blur=()=>{this._getInput().blur(),this._handleBlur()};setSelectionRange=(e,t)=>{this._getInput().setSelectionRange(e,t)};getSelectionStart=()=>this._getInput().selectionStart;getSelectionEnd=()=>this._getInput().selectionEnd;_checkValidity=e=>{if(null==e)return!0;const t=w_(e),n=this.props.checkValidity;return r.isFinite(t)&&n(t)};_handleChange=e=>{const t=e.target.value,n=this.parseInputValue(t),r=k_(t);this.props.onChange(n),r&&(this.props.onFormatChange(n,r),this.setState({format:r}))};_handleFocus=()=>{this.props.onFocus&&this.props.onFocus()};_handleBlur=e=>{e&&"keypress"===e.type&&13!==e.keyCode||(this._setValue(this.props.value,this.state.format),this.props.onBlur&&this.props.onBlur())};_onKeyDown=e=>{if(this.props.onKeyDown&&this.props.onKeyDown(e),!this.props.useArrowKeys||!r.contains(["ArrowUp","ArrowDown"],e.key))return;let t=this.getValue();t===Math.floor(t)&&("ArrowUp"===e.key?t+=1:"ArrowDown"===e.key&&(t-=1),this._checkValidity(t)&&this.props.onChange(t))};_setValue=(e,t)=>{this._getInput().value=S_(e,t)};render(){let t=f({"number-input":!0,"invalid-input":!this._checkValidity(this.props.value),mini:"mini"===this.props.size,small:"small"===this.props.size,normal:"normal"===this.props.size});null!=this.props.className&&(t=t+" "+this.props.className);const{onFormatChange:n,checkValidity:r,useArrowKeys:i,allowPiTruncation:o,...s}=this.props;return e.jsx("input",{...s,className:t,type:"text",ref:this.inputRef,onChange:this._handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur,onKeyPress:this._handleBlur,onKeyDown:this._onKeyDown,onTouchStart:__,defaultValue:S_(this.props.value,this.state.format),value:void 0})}}wt.Component,Mt.array.isRequired,Mt.func.isRequired,Mt.array,Mt.func,Mt.bool;const M_=({box:t,backgroundImage:n})=>{const{url:r,width:i,height:o}=n??{};if(r&&"string"==typeof r){const n=t[0]/Mh.defaultBoxSize;return e.jsx(X,{style:{position:"absolute",bottom:0,left:0},children:e.jsx(jd.Consumer,{children:({setAssetStatus:t})=>e.jsx(xm,{src:r,width:i,height:o,scale:n,responsive:!1,setAssetStatus:t,alt:""})})})}return null};function I_(t){const{coord:n,text:r,color:i,size:o}=t,[s,a]=Vw(n,Uw()),{TeX:l}=zd();return e.jsx("span",{className:"locked-label",style:{position:"absolute",left:s,top:a,color:We[i],fontSize:je.size[o],backgroundColor:"rgba(255, 255, 255, 0.8)"},"aria-hidden":!0,children:e.jsx(l,{children:o_(r)})})}function P_(t){const{lockedFigures:n}=t;return n.map((t,n)=>"label"===t.type?e.jsx(I_,{...t},`label-${n}`):e.jsxs(wt.Fragment,{children:[t.labels.map((t,r)=>e.jsx(I_,{...t},`${n}-label-${r}`)),"line"===t.type&&e.jsxs(e.Fragment,{children:[t.points[0].labels.map((t,r)=>e.jsx(I_,{...t},`locked-figure-${n}-point-1-label-${r}`)),t.points[1].labels.map((t,r)=>e.jsx(I_,{...t},`locked-figure-${n}-point-2-label-${r}`))]})]},n))}const T_={thin:1,medium:2,thick:4};function E_(e,t){if(e[0]>e[1])return t;if(e[0]<t[0]&&e[1]<t[0]||e[0]>t[1]&&e[1]>t[1])return null;return[Math.max(e[0],t[0]),Math.min(e[1],t[1])]}const j_=t=>{const{center:n,radius:r,angle:i,color:o,fillStyle:s,strokeStyle:a,weight:l,ariaLabel:c}=t,u=!!c;return e.jsx("g",{className:"locked-ellipse","aria-label":u?c:void 0,"aria-hidden":!u,role:"img",children:e.jsx(Ue,{center:n,radius:r,angle:i,fillOpacity:He[s],strokeStyle:a,color:We[o],weight:T_[l],svgEllipseProps:{style:{fill:"white"===s?y.white:We[o]}}})})},R_=t=>{const{range:n}=Uw(),[r,i]=wt.useState(),{color:o,strokeStyle:s,weight:a,directionalAxis:l,domain:c}=t,u={color:We[o],style:s,weight:T_[a]},d=!!t.ariaLabel;if(wt.useEffect(()=>{i(Fe(t.equation).expr)},[t.equation]),void 0===r)return null;const h=E_(c,"x"===l?n[0]:n[1]);return null===h?null:e.jsxs("g",{className:"locked-function","aria-label":d?t.ariaLabel:void 0,"aria-hidden":!d,role:"img",children:["x"===l&&e.jsx(qe.OfX,{y:e=>r.eval({x:e}),domain:h,...u}),"y"===l&&e.jsx(qe.OfY,{x:e=>r.eval({y:e}),domain:h,...u})]})};function A_(t){const{start:n,end:r,style:i,className:o,testId:s}=t;return e.jsx("line",{"aria-hidden":!0,x1:n[0],y1:n[1],x2:r[0],y2:r[1],style:i,className:o,"data-testid":s})}const{calculateAngleInDegrees:N_}=Xp;function L_(t){const{interactiveColor:n}=Uw(),{tail:r,tip:i,color:o=n,strokeWidth:s=2,style:a,testId:l}=t,[c,u]=Gw(r,i),d=Be.sub(u,c),h=N_(d);return e.jsxs("g",{style:{stroke:o,strokeWidth:s},"data-testid":l,children:[e.jsx(A_,{start:c,end:u,style:a}),e.jsx(Qw,{angle:h,tip:i,color:o,strokeWidth:s})]})}function O_(e,t,n){const r=function(e){if(Number.isInteger(e)||0===e||e>1e12)return null;const t=e/Math.PI,n=parseFloat(t.toFixed(12));if(Number.isInteger(n))return n+"π";const r=[2,3,4,6];for(const i of r){const e=parseFloat((t*i).toFixed(12));if(Number.isInteger(e))return e+"π/"+i}return null}(e);return r||(0+e).toLocaleString(t,{maximumFractionDigits:n??3,useGrouping:!1})}const D_=(e,t,n)=>{const[[r,i],[o,s]]=n,[a,l]=e,[c,u]=t,d=u-l,h=c-a,p=d/h,f=h<0?r:i,g=d<0?o:s,m=l+(f-a)*p,v=a+(g-l)*(1/p);switch(!0){case F_(m,o,s):return[f,m];case F_(v,r,i):return[v,g];default:return[f,g]}};function F_(e,t,n){return e>=t&&e<=n}function z_(e){const t=[];for(const n of e)t.some(([e,t])=>e===n[0]&&t===n[1])||t.push(n);return t}function B_(e,t){const n=(e[1][1]-e[0][1])/(e[1][0]-e[0][0]);return Number.isFinite(n)?0===n?t.srLinearGraphSlopeHorizontal:n>0?t.srLinearGraphSlopeIncreasing:t.srLinearGraphSlopeDecreasing:t.srLinearGraphSlopeVertical}function $_(e,t,n){const r=(e[1][1]-e[0][1])/(e[1][0]-e[0][0]),i=(0-e[0][1])/r+e[0][0],o=e[0][1]-r*e[0][0],s=0===e[0][1]&&0===e[1][1],a=0===e[0][0]&&0===e[1][0],l=Number.isFinite(i)&&!s,c=Number.isFinite(o)&&!a;return l&&c?0===i&&0===o?t.srLinearGraphOriginIntercept:t.srLinearGraphBothIntercepts({xIntercept:O_(i,n),yIntercept:O_(o,n)}):l?t.srLinearGraphXOnlyIntercept({xIntercept:O_(i,n)}):t.srLinearGraphYOnlyIntercept({yIntercept:O_(o,n)})}function W_(e){const[t,n]=e,r=Number(t.toFixed(3)),i=Number(n.toFixed(3));return 0===r&&0===i?"origin":0===i?"x-axis":0===r?"y-axis":r>0&&i>0?1:r<0&&i>0?2:r<0&&i<0?3:4}function U_(e,t){if(t<0||t>=e.length||!Number.isInteger(t))return null;if(e.length<3)return null;const n=e.at(t),r=e.at(t-1),i=e[(t+1)%e.length];if(!n||!r||!i)return null;const o=Be.dist(n,r),s=Be.dist(n,i);let a=(o**2+s**2-Be.dist(r,i)**2)/(2*o*s);(a<-1||a>1)&&(a=Math.round(a));return Math.acos(a)}function H_(e,t,n){if(t<0||t>=e.length||!Number.isInteger(t))return[];if(e.length<2)return[];const r=[],i=e[t],o=0===t?e.length-1:t-1,s=e[o],a=t!==o?Be.dist(i,s):null;!a||n&&0===t||r.push({pointIndex:o,sideLength:a});const l=(t+1)%e.length,c=e[l],u=t!==l&&l!==o?Be.dist(i,c):null;return!u||n&&t===e.length-1||r.push({pointIndex:l,sideLength:u}),r}function q_(e,t,n,r){return Number.isInteger(e)?n.srPolygonSideLength({pointNum:t+1,length:`${e}`}):n.srPolygonSideLengthApprox({pointNum:t+1,length:O_(e,r,1)})}const{calculateAngleInDegrees:V_}=Xp,G_=t=>{const{color:n,lineStyle:r,kind:i,points:o,showPoint1:s,showPoint2:a,weight:l,ariaLabel:c,range:u}=t,[d,h]=o,p=!!c;let f;if("ray"===i){const t=D_(d.coord,h.coord,u);f=e.jsx(L_,{tail:d.coord,tip:t,color:We[n],strokeWidth:T_[l],style:{strokeDasharray:"dashed"===r?"var(--mafs-line-stroke-dash-style)":void 0}})}else{const t="segment"===i?Ve.Segment:Ve.ThroughPoints;let o="segment"===i?h.coord:D_(d.coord,h.coord,u);const[s,a]=Gw(h.coord,d.coord),c=Be.sub(s,a);let p=V_(c);const g="segment"!==i&&e.jsx(Qw,{angle:p,tip:o,color:We[n],strokeWidth:T_[l]});o="segment"===i?d.coord:D_(h.coord,d.coord,u),p=p>180?p-180:p+180;const m="segment"!==i&&e.jsx(Qw,{angle:p,tip:o,color:We[n],strokeWidth:T_[l]});f=e.jsxs(e.Fragment,{children:[g,e.jsx(t,{point1:d.coord,point2:h.coord,color:We[n],weight:T_[l],style:r}),m]})}return e.jsxs("g",{className:"ray"===i?"locked-ray":"locked-line","aria-label":p?c:void 0,"aria-hidden":!p,role:"img",children:[f,s&&e.jsx(Ge,{x:d.coord[0],y:d.coord[1],svgCircleProps:{style:{fill:d.filled?We[d.color]:y.white,stroke:We[d.color],strokeWidth:W.xxxxSmall_2}}}),a&&e.jsx(Ge,{x:h.coord[0],y:h.coord[1],svgCircleProps:{style:{fill:h.filled?We[h.color]:y.white,stroke:We[h.color],strokeWidth:W.xxxxSmall_2}}})]})},Y_=t=>{const{color:n,coord:r,filled:i,ariaLabel:o}=t,[s,a]=r,l=!!o;return e.jsx("g",{className:"locked-point","aria-label":l?o:void 0,"aria-hidden":!l,role:"img",children:e.jsx(Ge,{x:s,y:a,svgCircleProps:{style:{fill:i?We[n]:y.white,stroke:We[n],strokeWidth:W.xxxxSmall_2}}})})},X_=t=>{const{points:n,color:r,showVertices:i,fillStyle:o,strokeStyle:s,weight:a}=t,l=!!t.ariaLabel;return e.jsxs("g",{className:"locked-polygon","aria-label":l?t.ariaLabel:void 0,"aria-hidden":!l,role:"img",children:[e.jsx(Ye,{points:[...n],fillOpacity:He[o],strokeStyle:s,color:We[r],weight:T_[a],svgPolygonProps:{style:{fill:"white"===o?y.white:We[r]}}}),i&&n.map((t,n)=>e.jsx(Ge,{x:t[0],y:t[1],color:We[r]},`locked-polygon-point-${n}`))]})},K_=t=>{const{color:n,points:r,weight:i,ariaLabel:o}=t,[s,a]=r,l=!!o;return e.jsx("g",{className:"locked-vector","aria-label":l?o:void 0,"aria-hidden":!l,role:"img",children:e.jsx(L_,{tail:s,tip:a,color:We[n],strokeWidth:T_[i]})})},Q_=t=>{const{lockedFigures:n}=t;return e.jsx(e.Fragment,{children:n.map((n,r)=>{switch(n.type){case"point":return e.jsx(Y_,{...n},`point-${r}`);case"line":return e.jsx(G_,{range:t.range,...n},`line-${r}`);case"vector":return e.jsx(K_,{...n},`vector-${r}`);case"ellipse":return e.jsx(j_,{...n},`ellipse-${r}`);case"polygon":return e.jsx(X_,{...n},`polygon-${r}`);case"function":return e.jsx(R_,{...n},`function-${r}`);case"label":return null;default:throw new ze(n)}})})},Z_={global:{deleteIntent:function(){return{type:J_}},changeInteractionMode:function(e){return{type:hS,mode:e}},changeKeyboardInvitationVisibility:function(e){return{type:pS,shouldShow:e}}},angle:{movePoint:yS},circle:{moveCenter:function(e){return{type:wS,destination:e}},moveRadiusPoint:function(e){return{type:_S,destination:e}}},linear:{moveLine:e=>tS(0,e),movePoint:(e,t)=>bS(0,e,t)},linearSystem:{moveLine:tS,movePointInFigure:bS},pointGraph:{movePoint:yS,addPoint:rS,removePoint:oS,focusPoint:aS,blurPoint:cS,clickPoint:dS},polygon:{movePoint:yS,moveAll:function(e){return{type:mS,delta:e}},addPoint:rS,removePoint:oS,focusPoint:aS,blurPoint:cS,clickPoint:dS,closePolygon:function(){return{type:fS}},openPolygon:function(){return{type:gS}}},quadratic:{movePoint:yS},ray:{moveRay:e=>tS(0,e),movePoint:(e,t)=>bS(0,e,t)},segment:{movePointInFigure:bS,moveLine:tS},sinusoid:{movePoint:yS}},J_="delete-intent";const eS="move-line";function tS(e,t){return{type:eS,itemIndex:e,delta:t}}const nS="add-point";function rS(e){return{type:nS,location:e}}const iS="remove-point";function oS(e){return{type:iS,index:e}}const sS="focus-point";function aS(e){return{type:sS,index:e}}const lS="blur-point";function cS(){return{type:lS}}const uS="click-point";function dS(e){return{type:uS,index:e}}const hS="point-change-interaction-mode";const pS="change-keyboard-interaction-invitation-visibility";const fS="close-polygon";const gS="open-polygon";const mS="move-all";const vS="move-point";function yS(e,t){return{type:vS,index:e,destination:t}}const xS="move-point-in-figure";function bS(e,t,n){return{type:xS,figureIndex:e,pointIndex:t,destination:n}}const wS="move-center";const _S="MOVE_RADIUS_POINT";const SS="change-snap-step";const kS="change-range";const CS="reinitialize";const MS=({children:t})=>e.jsx("g",{style:{transform:"var(--mafs-view-transform) var(--mafs-user-transform)"},children:t}),IS=({children:t,...n})=>e.jsx(Xe,{size:16,svgTextProps:{filter:"url(#background)",fontWeight:"bold"},...n,children:t}),PS=()=>e.jsx("defs",{children:e.jsxs("filter",{id:"background",x:"-5%",width:"110%",y:"0%",height:"100%",children:[e.jsx("feFlood",{floodColor:"#FFF",floodOpacity:"0.64"}),e.jsx("feComposite",{operator:"over",in:"SourceGraphic"})]})}),{clockwise:TS}=Gp,{getAngleFromVertex:ES}=Xp,jS=({centerPoint:t,endPoints:n,showAngles:r,snapTo:i,areEndPointsClockwise:o})=>{const[s,a]=t,[[l,c],[u,d]]=o?n:n.reverse(),h=.3,p=Be.dist(t,n[0]),f=Be.dist(t,n[1]);let g=(p**2+f**2-Be.dist(n[0],n[1])**2)/(2*p*f);(g<-1||g>1)&&(g=Math.round(g));const m=Math.acos(g),v=a+(c-a)/p*h,y=s+(u-s)/f*h,x=s+(l-s)/p*h,b=a+(d-a)/f*h,[w,_]=Be.add(t,Be.add(Be.sub([x,v],t),Be.sub([y,b],t)));if(!r)return LS(m)?e.jsx(AS,{start:[x,v],vertex:[y,b],end:[w,_]}):null;const S=function(e,t){const n=Be.sub(t[1],e),r=Be.sub(t[0],e);return n[0]*r[1]-n[1]*r[0]>0}(t,n),k=`M ${x} ${v} A 0.3 0.3 0 ${S?1:0} ${S?1:0} ${y} ${b}`;let C=m*(180/Math.PI);S&&(C=360-C);const M=parseFloat(C.toFixed("angles"===i?0:1)),I=Number.isInteger(M)?M:"≈ "+M;return e.jsxs(e.Fragment,{children:[e.jsx("defs",{children:e.jsxs("filter",{id:"background",x:"-5%",width:"110%",y:"0%",height:"100%",children:[e.jsx("feFlood",{floodColor:"#FFF",floodOpacity:"0.5"}),e.jsx("feComposite",{operator:"over",in:"SourceGraphic"})]})}),!S&&LS(m)?e.jsx(AS,{start:[x,v],vertex:[y,b],end:[w,_]}):e.jsx(NS,{arc:k}),e.jsxs(IS,{x:w,y:_,attach:_-a>0?"s":"n",attachDistance:Math.abs(_-a)<.2||Be.dist([w,_],t)<.3?20:10,children:[I,"°"]})]})},RS=({vertex:t,coords:n,showAngles:r,allowReflexAngles:i,range:o})=>{const s=TS([...n,t])&&!i?n:n.reverse(),a=(ES(s[0],t)+360-ES(s[1],t))%360,l=a>180,[c,u]=t,[d,h]=s,[p,f]=d,[g,m]=h,v=Be.dist(t,d),x=Be.dist(t,h),b=u+(f-u)/v*2,w=c+(g-c)/x*2,_=c+(p-c)/v*2,S=u+(m-u)/x*2,[k,C]=Be.add(t,Be.add(Be.sub([_,b],t),Be.sub([w,S],t))),M=DS([k,C],t,o,[[t,d],[t,h]]),I=`M ${_} ${b} A 2 2 0 ${M||l?1:0} ${M&&l?1:0} ${w} ${S}`,P=parseFloat(a.toFixed(0)),[T,E]=function(e,t,n,r,i,o){const[s,a]=n,[l,c]=e,[u,d]=t,h=[l-s,c-a],p=[u-s,d-a],f=Math.atan2(h[1],h[0]),g=Math.atan2(p[1],p[0]);let m=(f+g)/2;const v=Math.abs(f-g);i?(v<=Math.PI&&r||g>f)&&(m+=Math.PI):v>Math.PI&&(m-=Math.PI);const y=[Math.cos(m),Math.sin(m)],x=Math.sqrt(y[0]**2+y[1]**2),b=[y[0]/x,y[1]/x],w=Math.sqrt(b[0]**2+b[1]**2),_=1.75*o;let S=_/w;w>=_&&(S=1);const k=[b[0]*S,b[1]*S],C=Be.add(k,n);return C}(d,h,t,l,i,2),{disableKeyboardInteraction:j}=Uw(),R=j?"angle-arc-static":"angle-arc-interactive";return e.jsxs(e.Fragment,{children:[e.jsx("defs",{children:e.jsxs("filter",{id:"background",x:"-5%",width:"110%",y:"0%",height:"100%",children:[e.jsx("feFlood",{floodColor:"#FFF",floodOpacity:"0.5"}),e.jsx("feComposite",{operator:"over",in:"SourceGraphic"})]})}),OS(a)?e.jsx(AS,{start:[_,b],vertex:[w,S],end:[k,C],className:R}):e.jsx(NS,{arc:I,className:R}),r&&e.jsxs(IS,{x:T,y:E,color:y.blue,children:[P,"°"]})]})},AS=({start:[t,n],vertex:[r,i],end:[o,s],className:a})=>e.jsx(MS,{children:e.jsx("path",{"aria-hidden":!0,d:`M ${t} ${n} L ${o} ${s} M ${o} ${s} L ${r} ${i}`,strokeWidth:.02,fill:"none",className:a,"data-testid":"angle-indicators__right-angle"})}),NS=({arc:t,className:n})=>e.jsx(MS,{children:e.jsx("path",{"aria-hidden":!0,d:t,strokeWidth:.02,fill:"none",className:n,"data-testid":"angle-indicators__arc"})}),LS=e=>Math.abs(e-Math.PI/2)<.01,OS=e=>90===Math.round(e),DS=(e,t,n,r)=>{const i=D_(e,t,n);let o=0;return r.forEach(e=>(([[e,t],[n,r]],[[i,o],[s,a]])=>{const l=(n-e)*(a-o)-(s-i)*(r-t);if(0===l)return!1;{const c=((a-o)*(s-e)+(i-s)*(a-t))/l,u=((t-r)*(s-e)+(n-e)*(a-t))/l;return 0<c&&c<1&&0<u&&u<1}})([t,i],e)&&o++),!FS(o)},FS=e=>e%2==0;function zS(e){const{gestureTarget:t,onMove:n,point:r,constrainKeyboardMovement:i}=e,[o,s]=wt.useState(!1),{xSpan:a,ySpan:l}=function(){const{range:[[e,t],[n,r]]}=Uw(),i=t-e,o=r-n;return{xSpan:i,ySpan:o}}(),{viewTransform:c,userTransform:u}=Ke(),d=Be.matrixInvert(c);It(d);const h=wt.useMemo(()=>function(e){const t=Be.matrixInvert(e);return It(null!==t),t}(u),[u]),p=wt.useRef([0,0]);return Qe(e=>{const{type:t,event:o}=e;o?.stopPropagation();if(t.includes("key")){if(It(o instanceof KeyboardEvent),o?.preventDefault(),"keyup"===t)return;if("object"==typeof i){const e=i[BS[o.key]];return void n(e??r)}const{direction:s,altKey:c,ctrlKey:d,metaKey:p,shiftKey:f}=e,g=[s[0],-s[1]],m=Math.abs(g[0])?a:l;let v=50;(c||p)&&(v=200),f&&!d&&(v=10);const y=m/(2*v),x=function(e,t,n=1){const r=[];for(let o=e;o<t-n/2;o+=n)r.push(o);const i=r[r.length-1]+n;Math.abs(t-i)<n/1e-6?r.push(t):r.push(i);return r}(m/v,m/2,m/v);for(const e of x){const t=Be.scale(g,e),o=i(Be.transform(Be.add(Be.transform(r,u),t),h));if(Be.dist(o,r)>y){n(o);break}}}else{const{last:t,movement:i,first:o}=e;if(s(!t),o&&(p.current=Be.transform(r,u)),0===Be.mag(i))return;const a=Be.transform(i,d);n(Be.transform(Be.add(p.current,a),h))}},{target:t,eventOptions:{passive:!1}}),{dragging:o}}const BS={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down"};function $S(t){const{point:n}=t,{range:r}=Uw(),[[i,o],[s,a]]=r,[[l,c]]=Gw(n),[[u]]=Gw([i,0]),[[d]]=Gw([o,0]),[[h,p]]=Gw([0,s]),[[f,g]]=Gw([0,a]);return e.jsxs("g",{"aria-hidden":!0,children:[e.jsx("line",{x1:u,y1:c,x2:d,y2:c,stroke:y.blue}),e.jsx("line",{x1:l,y1:p,x2:l,y2:g,stroke:y.blue})]})}const WS=wt.forwardRef(function(t,n){const{markings:r,showTooltips:i,interactiveColor:o,disableKeyboardInteraction:s,snapStep:a}=Uw(),{point:l,dragging:c,focused:u,cursor:d,showFocusRing:h,onClick:p=()=>{}}=t,f=s?"fadedOffBlack64":"blue",g=function(...e){return e.filter(Boolean).join(" ")}("movable-point",c&&"movable-point--dragging",h&&"movable-point--focus"),[[m,v]]=Gw(l),y=(c||u)&&"none"!==r,x=d_(a[0]),b=d_(a[1]),w=`(${l[0].toFixed(x)}, ${l[1].toFixed(b)})`,_=e.jsxs("g",{"aria-hidden":!0,ref:n,className:g,style:{"--movable-point-color":o,cursor:d},"data-testid":"movable-point",onClick:p,children:[e.jsx("circle",{className:"movable-point-hitbox",r:24,cx:m,cy:v}),e.jsx("circle",{className:"movable-point-halo",cx:m,cy:v}),e.jsx("circle",{className:"movable-point-ring",cx:m,cy:v}),e.jsx("circle",{className:"movable-point-focus-outline",cx:m,cy:v}),e.jsx("circle",{className:"movable-point-center",cx:m,cy:v,style:{fill:o},"data-testid":"movable-point__center"})]});return e.jsxs(e.Fragment,{children:[y&&e.jsx($S,{point:l}),i?e.jsx(ce,{autoUpdate:!0,opened:!0,backgroundColor:f,content:w,contentStyle:{color:"white"},children:_}):_]})});function US(t){const{snapStep:n,disableKeyboardInteraction:r}=Uw(),{point:i,ariaDescribedBy:o,ariaLabel:s,ariaLive:a="polite",constrain:l=e=>Nw(n,e),cursor:c,forwardedRef:u=HS,sequenceNumber:d=1,onMove:h=HS,onClick:p=HS,onFocus:f=HS,onBlur:g=HS}=t,{strings:m,locale:v}=Dd(),[y,x]=wt.useState(!1),b=wt.useRef(null);zS({gestureTarget:b,point:i,onMove:h,constrainKeyboardMovement:l});const w=wt.useRef(null),{dragging:_}=zS({gestureTarget:w,point:i,onMove:h,constrainKeyboardMovement:l}),S=s||m.srPointAtCoordinates({num:d,x:O_(i[0],v),y:O_(i[1],v)});wt.useLayoutEffect(()=>{var e,t;e=u,t=b.current,"function"==typeof e?e(t):null!==e&&(e.current=t)},[u]),wt.useLayoutEffect(()=>{_&&!y&&b.current?.focus()},[_,y]);return{focusableHandle:e.jsx("g",{"data-testid":"movable-point__focusable-handle",className:"movable-point__focusable-handle",tabIndex:r?-1:0,ref:b,role:"button","aria-describedby":o,"aria-label":S,"aria-live":a,"aria-disabled":r,onFocus:e=>{f(e),x(!0)},onBlur:e=>{g(e),x(!1)}}),visiblePoint:e.jsx(WS,{cursor:c,onClick:()=>{p(),b.current?.focus()},point:i,dragging:_,focused:y,ref:w,showFocusRing:y}),focusableHandleRef:b,visiblePointRef:w}}const HS=()=>{},qS=t=>{const{points:[n,r],ariaLabels:i,ariaDescribedBy:o,extend:s,onMoveLine:a=()=>{},onMovePoint:l=()=>{}}=t,{snapStep:c}=Uw(),[u,d]=wt.useState(["off","off","off"]),{visiblePoint:h,focusableHandle:p}=US({ariaLabel:i?.point1AriaLabel,ariaDescribedBy:o,ariaLive:u[0],point:n,sequenceNumber:1,onMove:e=>{d(["polite","off","off"]),l(0,e)},constrain:GS([n,r],c,0)}),{visiblePoint:f,focusableHandle:g}=US({ariaLabel:i?.point2AriaLabel,ariaDescribedBy:o,ariaLive:u[1],point:r,sequenceNumber:2,onMove:e=>{d(["off","polite","off"]),l(1,e)},constrain:GS([n,r],c,1)}),m=e.jsx(VS,{ariaLabel:i?.grabHandleAriaLabel,ariaDescribedBy:o,ariaLive:u[2],start:n,end:r,extend:s,onMove:e=>{d(["off","off","polite"]),a(e)}});return e.jsxs(e.Fragment,{children:[p,m,g,h,f]})},VS=t=>{const{start:n,end:r,ariaLabel:i,ariaDescribedBy:o,ariaLive:s,extend:a,onMove:l}=t,[c,u]=Gw(n,r),{range:d,graphDimensionsInPixels:h,snapStep:p,disableKeyboardInteraction:f,interactiveColor:g}=Uw();let m,v;if(a){const e=YS(d,h);m=a.start?D_(r,n,e):void 0,v=a.end?D_(n,r,e):void 0}const y=wt.useRef(null),{dragging:x}=zS({gestureTarget:y,point:n,onMove:e=>{l(Be.sub(e,n))},constrainKeyboardMovement:e=>Nw(p,e)});return e.jsxs(e.Fragment,{children:[e.jsxs("g",{ref:y,tabIndex:f?-1:0,"aria-label":i,"aria-describedby":o,"aria-live":s,"aria-disabled":f,className:"movable-line","data-testid":"movable-line",style:{cursor:x?"grabbing":"grab"},role:"button",children:[e.jsx(A_,{start:c,end:u,style:{stroke:"transparent",strokeWidth:44}}),e.jsx(A_,{start:c,end:u,className:"movable-line-focus-outline",style:{}}),e.jsx(A_,{start:c,end:u,className:"movable-line-focus-outline-gap",style:{}}),e.jsx(A_,{start:c,end:u,style:{stroke:g,strokeWidth:"var(--movable-line-stroke-weight)"},className:x?"movable-dragging":"",testId:"movable-line__line"})]}),m&&e.jsx(L_,{tail:n,tip:m,testId:"movable-line__vector"}),v&&e.jsx(L_,{tail:r,tip:v,testId:"movable-line__vector"})]})},GS=(e,t,n)=>{const r=e[n],i=e[1-n],o=e=>{let t=e(r);return 0===Be.dist(t,i)&&(t=e(t)),t};return{up:o(e=>Be.add(e,[0,t[1]])),down:o(e=>Be.sub(e,[0,t[1]])),left:o(e=>Be.sub(e,[t[0],0])),right:o(e=>Be.add(e,[t[0],0]))}};function YS(e,t){const[n,r]=e,[i,o]=t;return Fw([4*(Lw(n)/i),4*(Lw(r)/o)],e)}const XS=wt.forwardRef(function(t,n){const{visiblePoint:r,focusableHandle:i}=US({...t,forwardedRef:n});return e.jsxs(e.Fragment,{children:[i,r]})});function KS(t){const{id:n,children:r}=t;return e.jsx("foreignObject",{children:e.jsx("span",{id:n,style:qv.srOnly,"aria-hidden":!0,children:r})})}const{calculateAngleInDegrees:QS,getClockwiseAngle:ZS,polar:JS}=Xp;function ek(t){const{dispatch:n,graphState:r}=t,{graphDimensionsInPixels:i,interactiveColor:o}=Uw(),s=Dd(),a=wt.useId()+"-description",{coords:l,showAngles:c,range:u,allowReflexAngles:d,snapDegrees:h}=r,p=[l[0],l[2]],f=l[1],g=[[f,p[0]],[f,p[1]]],m=[Gw(f,p[0]),Gw(f,p[1])].map(([t,n],r)=>{const s=YS(u,i),a=D_(g[r][0],g[r][1],s);return e.jsxs("g",{children:[e.jsx(A_,{start:t,end:n,style:{stroke:o,strokeWidth:"var(--movable-line-stroke-weight)"},testId:"angle-graph__line"}),e.jsx(L_,{tail:g[r][1],tip:a,testId:"angle-graph__vector"})]},`line-${r}`)}),v={vertex:f,coords:p,allowReflexAngles:d||!1,snapDegrees:h||1,range:u,showAngles:c||!1},{srAngleGraphAriaLabel:y,srAngleGraphAriaDescription:x,srAngleStartingSide:b,srAngleEndingSide:w,srAngleVertex:_}=function(e,t){const{strings:n,locale:r}=t,{coords:i,allowReflexAngles:o}=e,[s,a,l]=i,c=O_(ZS(i,o),r),u=n.srAngleGraphAriaLabel,d=n.srAngleGraphAriaDescription({angleMeasure:c,vertexX:O_(a[0],r),vertexY:O_(a[1],r),startingSideX:O_(l[0],r),startingSideY:O_(l[1],r),endingSideX:O_(s[0],r),endingSideY:O_(s[1],r)}),h=n.srAngleStartingSide({x:O_(l[0],r),y:O_(l[1],r)}),p=n.srAngleEndingSide({x:O_(s[0],r),y:O_(s[1],r)}),f=n.srAngleVertexWithAngleMeasure({x:O_(a[0],r),y:O_(a[1],r),angleMeasure:c});return{srAngleGraphAriaLabel:u,srAngleGraphAriaDescription:d,srAngleStartingSide:h,srAngleEndingSide:p,srAngleVertex:f}}(r,s);return e.jsxs("g",{"aria-label":y,"aria-describedby":a,children:[m,e.jsx(RS,{...v}),e.jsx(XS,{point:l[1],sequenceNumber:1,constrain:e=>e,onMove:e=>n(Z_.angle.movePoint(1,e)),ariaLabel:_}),e.jsx(XS,{point:l[0],sequenceNumber:2,constrain:sk(l[0],l[1],h||1),onMove:e=>n(Z_.angle.movePoint(0,e)),ariaLabel:w}),e.jsx(XS,{point:l[2],sequenceNumber:3,constrain:sk(l[2],l[1],h||1),onMove:e=>n(Z_.angle.movePoint(2,e)),ariaLabel:b}),e.jsx(KS,{id:a,children:x})]})}function tk(e,t){const{strings:n,locale:r}=t,{coords:i}=e;return n.srInteractiveElements({elements:n.srAngleInteractiveElements({vertexX:O_(i[1][0],r),vertexY:O_(i[1][1],r),startingSideX:O_(i[2][0],r),startingSideY:O_(i[2][1],r),endingSideX:O_(i[0][0],r),endingSideY:O_(i[0][1],r)})})}const nk=[1,0],rk=[-1,0],ik=[0,1],ok=[0,-1];function sk(e,t,n){const r=QS(Be.sub(e,t)),i=[e,Be.add(e,rk)],o=[e,Be.add(e,nk)],s=[e,Be.add(e,ik)],a=[e,Be.add(e,ok)],l=r+n,c=r-n,u=[t,Be.add(t,JS(1,l))],d=[t,Be.add(t,JS(1,c))],h=$w(i,u)??$w(i,d),p=$w(o,u)??$w(o,d);return{up:$w(s,u)??$w(s,d)??e,down:$w(a,u)??$w(a,d)??e,left:h??e,right:p??e}}function ak(e){const[t,n]=e.center,[r,i]=e.radiusPoint;return Math.sqrt(Math.pow(r-t,2)+Math.pow(i-n,2))}function lk(t){const{dispatch:n,graphState:r}=t,{center:i,radiusPoint:o,snapStep:s}=r,{strings:a,locale:l}=Dd(),[c,u]=wt.useState("off"),d=ak(r),h=wt.useId(),p=h+"-circle",f=h+"-radius",g=h+"-outer-points",{srCircleGraph:m,srCircleShape:v,srCircleRadiusPoint:y,srCircleRadius:x,srCircleOuterPoints:b}=gk(r,{strings:a,locale:l});return e.jsxs("g",{"aria-label":m,"aria-describedby":`${p} ${f} ${g}`,children:[e.jsx(ck,{id:p,ariaLabel:v,ariaDescribedBy:`${f} ${g}`,center:i,radius:d,onMove:e=>{u("off"),n(Z_.circle.moveCenter(e))}}),e.jsx(XS,{ariaLabel:`${y} ${x}`,ariaDescribedBy:`${g}`,ariaLive:c,point:o,sequenceNumber:1,cursor:"ew-resize",onMove:e=>{u("polite"),n(Z_.circle.moveRadiusPoint(e))},constrain:fk(i,o,s)}),e.jsx(KS,{id:f,children:x}),e.jsx(KS,{id:g,children:b})]})}function ck(t){const{id:n,ariaLabel:r,ariaDescribedBy:i,center:o,radius:s,onMove:a}=t,{snapStep:l,disableKeyboardInteraction:c,interactiveColor:u}=Uw(),[d,h]=wt.useState(!1),p=wt.useRef(null),{dragging:f}=zS({gestureTarget:p,point:o,onMove:a,constrainKeyboardMovement:e=>Nw(l,e)}),[g]=Gw(o),[m]=Yw([s,s]);return e.jsxs("g",{"aria-label":r,"aria-describedby":i,"aria-live":"polite","aria-disabled":c,ref:p,role:"button",tabIndex:c?-1:0,className:"movable-circle "+(f?"movable-circle--dragging":""),onFocus:()=>h(!0),onBlur:()=>h(!1),children:[e.jsx("ellipse",{className:"focus-ring",cx:g[0],cy:g[1],rx:m[0]+3,ry:m[1]+3}),e.jsx("ellipse",{id:n,className:"circle",cx:g[0],cy:g[1],rx:m[0],ry:m[1],stroke:u,"data-testid":"movable-circle__circle"}),e.jsx(hk,{center:o,dragging:f,focused:d})]})}const uk=[24,14],dk=function(e,t){const n=[];for(const r of e)for(const e of t)n.push([r,e]);return n}([-4.4,0,4.4],[-2.1,2.1]);function hk(t){const{center:n,dragging:r,focused:i}=t,[o]=Gw(n),{markings:s,interactiveColor:a}=Uw(),l=Math.min(...uk)/2,c=Be.sub(o,Be.scale(uk,.5)),u=(r||i)&&"none"!==s;return e.jsxs(e.Fragment,{children:[u&&e.jsx($S,{point:n}),e.jsx("rect",{className:"movable-circle-handle",x:c[0],y:c[1],width:uk[0],height:uk[1],rx:l,ry:l,fill:a,"data-testid":"movable-circle__handle"}),dk.map(t=>{const[n,r]=Be.add(t,o);return e.jsx("circle",{className:"movable-circle-handle-dot",cx:n,cy:r},`circle-${n}-${r}`)})]})}function pk(e,t){return gk(e,t).srCircleInteractiveElement}const fk=(e,t,n)=>{const r=n=>{let r=n(t);return 0===Be.dist(r,e)&&(r=n(r)),r};return{up:r(e=>Be.add(e,[0,n[1]])),down:r(e=>Be.sub(e,[0,n[1]])),left:r(e=>Be.sub(e,[n[0],0])),right:r(e=>Be.add(e,[n[0],0]))}};function gk(e,t){const{strings:n,locale:r}=t,{center:i,radiusPoint:o}=e,s=ak(e),a=o[0]>=i[0],l=n.srCircleGraph,c=n.srCircleShape({centerX:O_(i[0],r),centerY:O_(i[1],r)}),u=a?n.srCircleRadiusPointRight({radiusPointX:O_(o[0],r),radiusPointY:O_(o[1],r)}):n.srCircleRadiusPointLeft({radiusPointX:O_(o[0],r),radiusPointY:O_(o[1],r)}),d=n.srCircleRadius({radius:s}),h=n.srCircleOuterPoints({point1X:O_(i[0]+s,r),point1Y:O_(i[1],r),point2X:O_(i[0],r),point2Y:O_(i[1]+s,r),point3X:O_(i[0]-s,r),point3Y:O_(i[1],r),point4X:O_(i[0],r),point4Y:O_(i[1]-s,r)}),p=n.srInteractiveElements({elements:[c,d].join(" ")});return{srCircleGraph:l,srCircleShape:c,srCircleRadiusPoint:u,srCircleRadius:d,srCircleOuterPoints:h,srCircleInteractiveElement:p}}const mk=(t,n)=>{const{dispatch:r}=t,{coords:i}=t.graphState,{strings:o,locale:s}=Dd(),a=wt.useId(),l=a+"-points",c=a+"-intercept",u=a+"-slope",{srLinearGraph:d,srLinearGraphPoints:h,srLinearGrabHandle:p,slopeString:f,interceptString:g}=yk(t.graphState,{strings:o,locale:s});return e.jsxs("g",{"aria-label":d,"aria-describedby":`${l} ${c} ${u}`,children:[e.jsx(qS,{ariaLabels:{grabHandleAriaLabel:p},ariaDescribedBy:`${c} ${u}`,points:i,onMoveLine:e=>{r(Z_.linear.moveLine(e))},extend:{start:!0,end:!0},onMovePoint:(e,t)=>r(Z_.linear.movePoint(e,t))},0),e.jsx(KS,{id:l,children:h}),e.jsx(KS,{id:c,children:g}),e.jsx(KS,{id:u,children:f})]})};function vk(e,t){return yk(e,t).srLinearInteractiveElement}function yk(e,t){const{coords:n}=e,{strings:r,locale:i}=t,o=r.srLinearGraph,s=r.srLinearGraphPoints({point1X:O_(n[0][0],i),point1Y:O_(n[0][1],i),point2X:O_(n[1][0],i),point2Y:O_(n[1][1],i)}),a=r.srLinearGrabHandle({point1X:O_(n[0][0],i),point1Y:O_(n[0][1],i),point2X:O_(n[1][0],i),point2Y:O_(n[1][1],i)}),l=B_(n,r),c=$_(n,r,i),u=r.srInteractiveElements({elements:[o,s].join(" ")});return{srLinearGraph:o,srLinearGraphPoints:s,srLinearGrabHandle:a,slopeString:l,interceptString:c,srLinearInteractiveElement:u}}const xk=t=>{const{dispatch:n}=t,{coords:r}=t.graphState,{strings:i,locale:o}=Dd(),s=wt.useId(),a=`${s}-intersection`,l=Gp.getLineIntersection(r[0],r[1]),c=l?i.srLinearSystemIntersection({x:O_(l[0],o),y:O_(l[1],o)}):i.srLinearSystemParallel,u=r.map((e,t)=>({pointsDescriptionId:`${s}-line${t+1}-points`,interceptDescriptionId:`${s}-line${t+1}-intercept`,slopeDescriptionId:`${s}-line${t+1}-slope`,pointsDescription:i.srLinearSystemPoints({lineNumber:t+1,point1X:O_(e[0][0],o),point1Y:O_(e[0][1],o),point2X:O_(e[1][0],o),point2Y:O_(e[1][1],o)}),interceptDescription:$_(e,i,o),slopeDescription:B_(e,i)})),d=u.map(({pointsDescriptionId:e,interceptDescriptionId:t,slopeDescriptionId:n})=>`${e} ${t} ${n}`).join(" ");return e.jsxs("g",{"aria-label":i.srLinearSystemGraph,"aria-describedby":`${d} ${a}`,children:[r?.map((t,r)=>e.jsx(qS,{points:t,ariaLabels:{point1AriaLabel:i.srLinearSystemPoint({lineNumber:r+1,pointSequence:1,x:O_(t[0][0],o),y:O_(t[0][1],o)}),point2AriaLabel:i.srLinearSystemPoint({lineNumber:r+1,pointSequence:2,x:O_(t[1][0],o),y:O_(t[1][1],o)}),grabHandleAriaLabel:i.srLinearSystemGrabHandle({lineNumber:r+1,point1X:O_(t[0][0],o),point1Y:O_(t[0][1],o),point2X:O_(t[1][0],o),point2Y:O_(t[1][1],o)})},ariaDescribedBy:`${u[r].interceptDescriptionId} ${u[r].slopeDescriptionId} ${a}`,onMoveLine:e=>{n(Z_.linearSystem.moveLine(r,e))},extend:{start:!0,end:!0},onMovePoint:(e,t)=>n(Z_.linearSystem.movePointInFigure(r,e,t))},r)),u.map(({pointsDescriptionId:t,interceptDescriptionId:n,slopeDescriptionId:r,pointsDescription:i,interceptDescription:o,slopeDescription:s},a)=>e.jsxs("span",{children:[e.jsx(KS,{id:t,children:i}),e.jsx(KS,{id:n,children:o}),e.jsx(KS,{id:r,children:s})]},`line-descriptions-${a}`)),e.jsx(KS,{id:a,children:c})]})};function bk(e,t){const{strings:n,locale:r}=t,{coords:i}=e,o=[n.srLinearSystemGraph,...i.map((e,t)=>{const i=e[0],o=e[1];return n.srLinearSystemPoints({lineNumber:t+1,point1X:O_(i[0],r),point1Y:O_(i[1],r),point2X:O_(o[0],r),point2Y:O_(o[1],r)})})];return n.srInteractiveElements({elements:o.join(" ")})}function wk(t){const{numPoints:n}=t.graphState,r=Uw(),i=wt.useRef([]),{range:[o,s]}=r,[[a,l]]=Gw([o[0],s[1]]);wt.useEffect(()=>{const e=t.graphState.focusedPointIndex;null!=e&&i.current[e]?.focus()},[t.graphState.focusedPointIndex,t.graphState.coords.length,i]);const c={...t,graphConfig:r,pointsRef:i,top:l,left:a};return"unlimited"===n?function(t){const{dispatch:n,graphConfig:r,pointsRef:i,top:o,left:s}=t,{coords:a}=t.graphState,{graphDimensionsInPixels:l}=r,c=l[0],u=l[1];return e.jsxs(e.Fragment,{children:[e.jsx("rect",{style:{fill:"rgba(0,0,0,0)",cursor:"crosshair"},width:c,height:u,x:s,y:o,onClick:e=>{const t=e.currentTarget.getBoundingClientRect(),i=Xw([[e.clientX-t.x,e.clientY-t.y]],r);n(Z_.pointGraph.addPoint(i[0]))}}),a.map((t,r)=>e.jsx(XS,{point:t,sequenceNumber:r+1,onMove:e=>n(Z_.pointGraph.movePoint(r,e)),ref:e=>{i.current[r]=e},onFocus:()=>{n(Z_.pointGraph.focusPoint(r))},onClick:()=>{n(Z_.pointGraph.clickPoint(r))}},r))]})}(c):function(t){const{dispatch:n}=t;return e.jsx(e.Fragment,{children:t.graphState.coords.map((t,r)=>e.jsx(XS,{point:t,sequenceNumber:r+1,onMove:e=>n(Z_.pointGraph.movePoint(r,e))},r))})}(c)}function _k(e,t){const{strings:n,locale:r}=t;if(0===e.coords.length)return n.srNoInteractiveElements;const i=e.coords.map(([e,t],i)=>n.srPointAtCoordinates({num:i+1,x:O_(e,r),y:O_(t,r)}));return n.srInteractiveElements({elements:i.join(" ")})}const{magnitude:Sk,vector:kk}=Gp;function Ck(e){const{graph:t,step:n,snapStep:r,range:i}=e,o={hasBeenInteractedWith:!1,range:i,snapStep:r};switch(t.type){case"segment":return{...o,type:"segment",coords:Ik(t,i,n)};case"linear":case"ray":return{...o,type:t.type,coords:Tk(t,i,n)};case"linear-system":return{...o,type:t.type,coords:Ek(t,i,n)};case"polygon":return{...o,type:"polygon",numSides:t.numSides||0,showAngles:Boolean(t.showAngles),showSides:Boolean(t.showSides),coords:jk(t,i,n),snapTo:t.snapTo??"grid",focusedPointIndex:null,showRemovePointButton:!1,interactionMode:"mouse",showKeyboardInteractionInvitation:!1,closedPolygon:!1};case"point":return{...o,type:t.type,coords:Mk(t,i,n),numPoints:t.numPoints||0,focusedPointIndex:null,showRemovePointButton:!1,interactionMode:"mouse",showKeyboardInteractionInvitation:!1};case"circle":return{...o,type:t.type,...Nk(t)};case"quadratic":return{...o,type:t.type,coords:Ak(t,i,n)};case"sinusoid":return{...o,type:t.type,coords:Rk(t,i,n)};case"angle":return{...o,type:t.type,showAngles:Boolean(t.showAngles),coords:Lk({graph:t,range:i,step:n}),angleOffsetDeg:Number(t.angleOffsetDeg),allowReflexAngles:Boolean(t.allowReflexAngles),snapDegrees:Number(t.snapDegrees)};case"none":return{...o,type:"none"};default:throw new ze(t)}}function Mk(e,t,n){const r=e.numPoints||1;let i=e.coords?.slice();if(i)return i;const o=e.startCoords?.slice();if(o)return o;switch(r){case 1:i=[e.coord||[0,0]];break;case 2:i=[[-5,0],[5,0]];break;case 3:i=[[-5,0],[0,0],[5,0]];break;case 4:i=[[-6,0],[-2,0],[2,0],[6,0]];break;case 5:i=[[-6,0],[-3,0],[0,0],[3,0],[6,0]];break;case 6:i=[[-5,0],[-3,0],[-1,0],[1,0],[3,0],[5,0]];break;default:i=[]}const s=t_(i,[[-10,10],[-10,10]]);return e_(t,n,s)}function Ik(e,t,n){if(e.coords)return e.coords;if(e.startCoords)return e.startCoords;const r=[[-10,10],[-10,10]];return(e=>{switch(e){case 2:return[5,-5];case 3:return[5,0,-5];case 4:return[6,2,-2,-6];case 5:return[6,3,0,-3,-6];case 6:return[5,3,1,-1,-3,-5];default:return[5]}})(e.numSegments).map(e=>{let i=[[-5,e],[5,e]];return i=t_(i,r),i=e_(t,n,i),i})}const Pk=[[[.25,.75],[.75,.75]],[[.25,.25],[.75,.25]]];function Tk(e,t,n){return e.coords?e.coords:e.startCoords?e.startCoords:e_(t,n,Pk[0])}function Ek(e,t,n){return e.coords?e.coords:e.startCoords?e.startCoords:Pk.map(e=>e_(t,n,e))}function jk(e,t,n){let r=e.coords?.slice();if(r)return r;const i=e.startCoords?.slice();if(i)return i;const o=e.numSides||3;if("unlimited"===o)r=[];else{const t=2*Math.PI/o,n=(1/o-.5)*Math.PI,i="sides"===e.snapTo?Math.sqrt(3)/3*7:4;r=[...Array(o).keys()].map(e=>[i*Math.cos(e*t+n),i*Math.sin(e*t+n)])}r=t_(r,[[-10,10],[-10,10]]);const s=!["angles","sides"].includes(e.snapTo||"");return r=e_(t,n,r,!s),r}function Rk(e,t,n){if(e.coords)return[e.coords[0],e.coords[1]];if(e.startCoords)return[e.startCoords[0],e.startCoords[1]];let r=[[.5,.5],[.65,.6]];return r=e_(t,n,r,!0),r}function Ak(e,t,n){if(e.coords)return e.coords;if(e.startCoords)return e.startCoords;return e_(t,n,[[.25,.75],[.5,.25],[.75,.75]],!0)}function Nk(e){return null!=e.center&&null!=e.radius?{center:e.center,radiusPoint:Be.add(e.center,[e.radius,0])}:e.startCoords?.center&&e.startCoords.radius?{center:e.startCoords.center,radiusPoint:Be.add(e.startCoords.center,[e.startCoords.radius,0])}:{center:[0,0],radiusPoint:[2,0]}}const Lk=e=>{const{graph:t,range:n,step:r}=e;if(t.coords)return t.coords;if(t.startCoords)return t.startCoords;const{snapDegrees:i,angleOffsetDeg:o}=t,s=i||1;let a=s;for(;a<20;)a+=s;a=a*Math.PI/180;const l=(o||0)*Math.PI/180;let c=[[.85,.5],[.5,.5]];c=e_(n,r,c,!0);const u=Sk(kk(...c)),d=[...c,[0,0]];return d[0]=[d[1][0]+u*Math.cos(l),d[1][1]+u*Math.sin(l)],d[2]=[d[1][0]+u*Math.cos(a+l),d[1][1]+u*Math.sin(a+l)],d},{getAngleFromVertex:Ok,getClockwiseAngle:Dk,polar:Fk}=Xp,{angleMeasures:zk,ccw:Bk,lawOfCosines:$k,magnitude:Wk,polygonSidesIntersect:Uk,reverseVector:Hk,sign:qk,vector:Vk}=Gp,{getQuadraticCoefficients:Gk}=Kp;function Yk(e,t){switch(t.type){case CS:return Ck(t.params);case xS:return function(e,t){switch(e.type){case"segment":case"linear-system":{const n=function(e){const{array:t,index:n,update:r}=e,i=r(t[n]);return sC({array:t,index:n,newValue:i})}({array:e.coords,index:t.figureIndex,update:n=>sC({array:n,index:t.pointIndex,newValue:Zk(t.destination,e)})}),r=n[t.figureIndex];return oC(r)?e:{...e,hasBeenInteractedWith:!0,coords:n}}case"linear":case"ray":{const n=sC({array:e.coords,index:t.pointIndex,newValue:Zk(t.destination,e)});return{...e,hasBeenInteractedWith:!0,coords:n}}case"angle":case"circle":throw new Error("FIXME implement circle reducer");case"none":case"point":case"polygon":case"quadratic":case"sinusoid":throw new Error(`Don't use movePointInFigure for ${e.type} graphs. Use movePoint instead!`);default:throw new ze(e)}}(e,t);case eS:return function(e,t){const{snapStep:n,range:r}=e;switch(e.type){case"segment":case"linear-system":{if(void 0===t.itemIndex)throw new Error("Please provide index of line to move");const i=e.coords[t.itemIndex];if(!i)throw new Error("No line to move");const o=Kk(i,t.delta,{snapStep:n,range:r}),s=[Nw(n,Be.add(i[0],o)),Nw(n,Be.add(i[1],o))],a=sC({array:e.coords,index:t.itemIndex,newValue:s});return{...e,type:e.type,hasBeenInteractedWith:!0,coords:a}}case"linear":case"ray":{const i=e.coords,o=Kk(i,t.delta,{snapStep:n,range:r}),s=[Nw(n,Be.add(i[0],o)),Nw(n,Be.add(i[1],o))];return{...e,type:e.type,hasBeenInteractedWith:!0,coords:s}}default:return e}}(e,t);case mS:return function(e,t){const{snapStep:n,range:r}=e;if("polygon"===e.type){let i;if("sides"===e.snapTo||"angles"===e.snapTo){const n=Kk(e.coords,t.delta,{snapStep:[0,0],range:r});i=e.coords.map(e=>Be.add(e,n))}else{const o=Kk(e.coords,t.delta,{snapStep:n,range:r});i=e.coords.map(e=>Nw(n,Be.add(e,o)))}return{...e,hasBeenInteractedWith:!0,coords:i}}return e}(e,t);case vS:return function(e,t){switch(e.type){case"angle":const n=(()=>{if(1===t.index){const n=function({range:e,coords:t,snapStep:n},{destination:r}){const i=[...t],o=i[1],s=Dw(Fw(Be.add(n,[2,2]),e),Nw(n,r)),a=Be.add(s,Hk(o)),l={};for(const c of[0,2]){const t=i[c];let r=Be.add(t,a),o=Ok(s,r);o*=Math.PI/180,r=tC(r,o,e,n),l[c]=r}return l[1]=s,Object.entries(l).forEach(([e,t])=>{i[e]=t}),i}(e,t);return{...e,hasBeenInteractedWith:!0,coords:n}}return{...e,hasBeenInteractedWith:!0,coords:sC({array:e.coords,index:t.index,newValue:nC(t.destination,e,t.index)})}})();return function(e){return eC(e.coords[0],e.coords[1],e.range)||eC(e.coords[2],e.coords[1],e.range)}(n)?e:n;case"polygon":let r;r="sides"===e.snapTo?function(e,{range:t,coords:n},r){const i=n[r];return iC(e,t,n,r,i)}(t.destination,e,t.index):"angles"===e.snapTo?function(e,{range:t,coords:n},r){const i=n[r];return rC(e,t,n,r,i)}(t.destination,e,t.index):Zk(t.destination,e);const i=sC({array:e.coords,index:t.index,newValue:r});return!("unlimited"===e.numSides&&!e.closedPolygon)&&Uk(i)?e:{...e,hasBeenInteractedWith:!0,coords:i};case"point":return{...e,hasBeenInteractedWith:!0,focusedPointIndex:t.index,coords:sC({array:e.coords,index:t.index,newValue:Jk(t.destination,e)})};case"sinusoid":{const n=Zk(t.destination,e),r=[...e.coords];return r[t.index]=n,r[0][0]===r[1][0]?e:{...e,hasBeenInteractedWith:!0,coords:sC({array:e.coords,index:t.index,newValue:n})}}case"quadratic":{const n=[...e.coords],r=Zk(t.destination,e);n[t.index]=r;return void 0===Gk(n)?e:{...e,hasBeenInteractedWith:!0,coords:sC({array:e.coords,index:t.index,newValue:r})}}default:throw new Error("The movePoint action is only for point, quadratic, and polygon graphs")}}(e,t);case wS:return function(e,t){if("circle"===e.type){const n=Zk(t.destination,e),r=[...Be.add(e.radiusPoint,Be.sub(n,e.center))],[i,o]=e.range[0],[s]=r;if(s<i||s>o){const e=s-2*(s-n[0]);e>=i&&e<=o&&(r[0]=e)}return{...e,hasBeenInteractedWith:!0,center:n,radiusPoint:r}}throw new Error("The doMoveCenter action is only for circle graphs")}(e,t);case _S:return function(e,t){if("circle"===e.type){const[n,i]=e.range[0],o=Nw(e.snapStep,[Aw(t.destination[0]+0,n,i),e.center[1]]);return r.isEqual(o,e.center)?e:{...e,hasBeenInteractedWith:!0,radiusPoint:o}}throw new Error("The doMoveRadiusPoint action is only for circle graphs")}(e,t);case SS:return function(e,t){if(r.isEqual(e.snapStep,t.snapStep))return e;return{...e,snapStep:t.snapStep}}(e,t);case kS:return function(e,t){if(r.isEqual(e.range,t.range))return e;return{...e,range:t.range}}(e,t);case nS:return function(e,t){if(!r_(e))return e;const{snapStep:n}=e,r=Nw(n,t.location);for(const o of e.coords)if(o[0]===r[0]&&o[1]===r[1])return e;const i=[...e.coords,r];return{...e,hasBeenInteractedWith:!0,coords:i,showRemovePointButton:!0,focusedPointIndex:i.length-1}}(e,t);case iS:return Xk(e,t);case sS:return function(e,t){switch(e.type){case"polygon":case"point":return{...e,focusedPointIndex:t.index};default:return e}}(e,t);case lS:return function(e){switch(e.type){case"polygon":case"point":const t={...e,showRemovePointButton:!1};return"mouse"===e.interactionMode&&(t.focusedPointIndex=null),t;default:return e}}(e);case J_:return function(e){if(r_(e)&&null!==e.focusedPointIndex)return Xk(e,Z_.pointGraph.removePoint(e.focusedPointIndex));return e}(e);case uS:return function(e,t){if(r_(e))return{...e,focusedPointIndex:t.index,showRemovePointButton:!0};return e}(e,t);case fS:return function(e){if(r_(e)&&"polygon"===e.type){const t=z_(e.coords);return{...e,coords:t,closedPolygon:!0}}return e}(e);case gS:return function(e){if(r_(e)&&"polygon"===e.type)return{...e,closedPolygon:!1};return e}(e);case hS:return function(e,t){if(r_(e)){const n="keyboard"!==t.mode&&e.showKeyboardInteractionInvitation;return{...e,interactionMode:t.mode,showKeyboardInteractionInvitation:n}}return e}(e,t);case pS:return function(e,t){if(r_(e))return{...e,showKeyboardInteractionInvitation:t.shouldShow,hasBeenInteractedWith:!0};return e}(e,t);default:throw new ze(t)}}function Xk(e,t){if(!r_(e))return e;const n=e.coords.length>1?e.coords.length-2:null;return{...e,coords:e.coords.filter((e,n)=>n!==t.index),focusedPointIndex:n,showRemovePointButton:null!==n}}const Kk=(e,t,n)=>{const r=e.map(e=>function({snapStep:e,range:t,point:n}){const r=n_({snapStep:e,range:t,point:[1/0,1/0]});return Be.sub(r,n)}({...n,point:e})),i=e.map(e=>function({snapStep:e,range:t,point:n}){const r=n_({snapStep:e,range:t,point:[-1/0,-1/0]});return Be.sub(r,n)}({...n,point:e})),[o,s]=((e,t,n)=>{const[r,i]=n,o=Math.min(...e.map(e=>e[0])),s=Math.min(...e.map(e=>e[1])),a=Math.max(...t.map(e=>e[0])),l=Math.max(...t.map(e=>e[1]));return[Aw(r,a,o),Aw(i,l,s)]})(r,i,t);return[o,s]};function Qk(e,t){return e<t||v(e,t)}function Zk(e,{snapStep:t,range:n}){return Nw(t,n_({snapStep:t,range:n,point:e}))}function Jk(e,{snapStep:t,range:n}){return Nw(t,function({range:e,point:t}){return Dw(e,t)}({range:n,point:e}))}function eC(e,t,n){return Be.dist(e,t)<2}function tC(e,t,n,r){const i=[n[0][0]+r[0],n[1][0]+r[0]],o=[n[0][1]-r[1],n[1][1]-r[1]];let s=e;return s[0]<i[0]?s=[i[0],s[1]+(i[0]-s[0])*Math.tan(t)]:s[0]>o[0]&&(s=[o[0],s[1]-(s[0]-o[0])*Math.tan(t)]),s[1]<i[1]?s=[s[0]+(i[1]-s[1])/Math.tan(t),i[1]]:s[1]>o[1]&&(s=[s[0]-(s[1]-o[1])/Math.tan(t),o[1]]),s}function nC(e,{range:t,coords:n,snapDegrees:r,angleOffsetDeg:i,snapStep:o},s){const a=r||1,l=i||0,c=[...n],u=n_({snapStep:[0,0],range:[[t[0][0]+o[0],t[0][1]-o[0]],[t[1][0]+o[1],t[1][1]-o[1]]],point:e});c[s]=u;const d=n[1];let h=Ok(c[s],d);h=Math.round((h-l)/a)*a+l;const p=Math.max(Be.dist(c[s],d),2.01);return Be.add(d,Fk(p,h))}function rC(e,t,n,i,o){const s=[...n];s[i]=n_({snapStep:[0,0],range:t,point:e});const a=zk(s).map(e=>180*e/Math.PI),l=e=>(i+e+s.length)%s.length;r.each([-1,1],function(e){a[l(e)]=Math.round(a[l(e)])});const c=function(e,t,n){return Dk([s[l(e)],s[l(t)],s[l(n)]])},u=[a[l(-1)]-c(-2,-1,1),a[l(1)]-c(-1,1,2)];if(u[2]=180-(u[0]+u[1]),u.some(function(e){return Qk(e,1)}))return o;const d=Wk(Vk(s[l(-1)],s[l(1)])),h=1===qk(Bk(s[l(-1)],s[l(1)],s[i])),p=Math.sin(u[1]*Math.PI/180)/Math.sin(u[2]*Math.PI/180)*d,f=Ok(s[l(1)],s[l(-1)]),g=Fk(p,f+(h?1:-1)*u[0]);return mp.add(s[l(-1)],g)}function iC(e,t,n,i,o){const s=n_({snapStep:[0,0],range:t,point:e}),a=e=>(i+e+n.length)%n.length,l=r.map([[n[a(-1)],s],[s,n[a(1)]],[n[a(-1)],n[a(1)]]],function(e){return Wk(Vk(...e))});if(r.each([0,1],function(e){l[e]=Math.round(l[e])}),Qk(l[1]+l[2],l[0])||Qk(l[0]+l[2],l[1])||Qk(l[0]+l[1],l[2]))return o;const c=$k(l[0],l[2],l[1]),u=Ok(n[a(1)],n[a(-1)]),d=1===qk(Bk(n[a(-1)],n[a(1)],s)),h=Fk(l[0],u+(d?1:-1)*c);return mp.add(n[a(-1)],h)}const oC=e=>e.some((t,n)=>e.some((e,r)=>n!==r&&mp.equal(t,e)));function sC(e){const{array:t,index:n,newValue:r}=e,i=[...t];return i[n]=r,i}const{clockwise:aC}=Gp,{convertRadiansToDegrees:lC}=Xp;const cC=t=>{const{dispatch:n}=t,{numSides:r,coords:i,snapStep:o,snapTo:s="grid"}=t.graphState,a=Uw(),l=wt.useRef(null),c=wt.useRef([]),u=wt.useRef(0),{range:[d,h]}=a,[[p,f]]=Gw([d[0],h[1]]),g=i??[[0,0]],m=g[0],v=function(e,t){switch(t){case"grid":return t=>Nw(e,t);case"sides":case"angles":return e=>e;default:throw new ze(t)}}(o,s),{dragging:y}=zS({gestureTarget:l,point:m,onMove:e=>{const t=Be.sub(e,m);n(Z_.polygon.moveAll(t))},constrainKeyboardMovement:v}),[x,b]=wt.useState(!1),[w,_]=wt.useState(!1);wt.useEffect(()=>{const e=t.graphState.focusedPointIndex;null!=e&&c.current[e]?.focus()},[t.graphState.focusedPointIndex,t.graphState.coords.length,c]),wt.useEffect(()=>{"unlimited"===r&&t.graphState.coords.length>2&&n(Z_.polygon.closePolygon())},[]);const S={...t,graphConfig:a,polygonRef:l,pointsRef:c,lastMoveTimeRef:u,left:p,top:f,dragging:y,points:g,hovered:x,setHovered:b,focusVisible:w,setFocusVisible:_};return"unlimited"===r?e.jsx(dC,{...S}):e.jsx(uC,{...S})},uC=t=>{const{dispatch:n,hovered:r,setHovered:i,focusVisible:o,setFocusVisible:s,graphConfig:a,polygonRef:l,lastMoveTimeRef:c,dragging:u,points:d}=t,{showAngles:h,showSides:p,range:f,snapTo:g="grid",snapStep:m}=t.graphState,{disableKeyboardInteraction:v,interactiveColor:y}=a,{strings:x,locale:b}=Dd(),w=wt.useId(),_=Array(d.length).fill("off"),[S,k]=wt.useState(["off",..._]),C=function(e){return e.map((t,n)=>[t,e[(n+1)%e.length]])}(d),M=w+"-points-num",I=w+"-points",{srPolygonGraph:P,srPolygonGraphPointsNum:T,srPolygonGraphPoints:E,srPolygonElementsNum:j}=fC(t.graphState,{strings:x,locale:b},t.graphConfig.markings);return e.jsxs("g",{"aria-label":P,"aria-describedby":`${M} ${I}`,children:[e.jsx(Ye,{points:[...d],color:y,svgPolygonProps:{strokeWidth:o?"var(--movable-line-stroke-weight-active)":"var(--movable-line-stroke-weight)",style:{fill:"transparent"},"aria-hidden":!0}}),d.map((t,n)=>{const r=d.at(n-1),i=d[(n+1)%d.length];return r&&i?e.jsx(jS,{centerPoint:t,endPoints:[r,i],areEndPointsClockwise:aC(d),showAngles:!!h,snapTo:g},"angle-"+n):null}),p&&C.map(([t,n],r)=>{const[i,o]=Be.midpoint(t,n),s=Be.dist(t,n),a=!Number.isInteger(s);return e.jsx(IS,{x:i,y:o,children:a?`≈ ${s.toFixed("sides"===g?0:1)}`:s},"side-"+r)}),e.jsx(Ye,{points:[...d],color:"transparent",svgPolygonProps:{ref:l,tabIndex:v?-1:0,strokeWidth:44,style:{cursor:u?"grabbing":"grab",fill:r?"var(--mafs-blue)":"transparent"},onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onKeyDownCapture:()=>{s(hC(l.current))},onFocus:()=>{s(hC(l.current)),k(()=>["polite",..._])},onBlur:()=>s(hC(l.current)),className:"movable-polygon",role:"button","aria-label":E?`${j} ${E}`:j,"aria-live":S[0],"aria-disabled":v}}),d.map((t,r)=>{const i=`${w}-angle-${r}`,o=`${w}-point-${r}-side-1`,s=`${w}-point-${r}-side-2`,a=U_(d,r),l=a?lC(a):null,u=H_(d,r),{pointIndex:h,sideLength:p}=u[0],{pointIndex:v,sideLength:y}=u[1];return e.jsxs("g",{children:[e.jsx(XS,{ariaDescribedBy:`${i} ${o} ${s}`,ariaLive:S[r+1],constrain:gC(d,r,f,m,g),point:t,sequenceNumber:r+1,onMove:e=>{const t=Date.now();t-c.current>25&&(n(Z_.polygon.movePoint(r,e)),c.current=t)},onFocus:()=>{const e=[..._];e[r]="polite",k(["off",...e])}}),l&&e.jsx(KS,{id:i,children:Number.isInteger(l)?x.srPolygonPointAngle({angle:l}):x.srPolygonPointAngleApprox({angle:O_(l,b,1)})}),e.jsx(KS,{id:o,children:q_(p,h,x,b)}),e.jsx(KS,{id:s,children:q_(y,v,x,b)})]},"point-"+r)}),e.jsx(KS,{id:M,children:T}),E&&e.jsx(KS,{id:I,children:E})]})},dC=t=>{const{dispatch:n,graphConfig:r,left:i,top:o,pointsRef:s,points:a}=t,{coords:l,closedPolygon:c}=t.graphState,{strings:u,locale:d}=Dd(),{interactiveColor:h}=Uw(),p=wt.useId(),f=p+"-points-num",g=p+"-points",m=Array(a.length).fill("off"),[v,y]=wt.useState(m);if(c){const n={...t,numSides:l.length};return e.jsx(uC,{...n})}const{graphDimensionsInPixels:x}=r,b=x[0],w=x[1],_=0===l.length,{srPolygonGraph:S,srPolygonGraphPointsNum:k,srPolygonGraphPoints:C}=fC(t.graphState,{strings:u,locale:d},t.graphConfig.markings);return e.jsxs("g",{"aria-label":_?u.srUnlimitedPolygonEmpty:S,"aria-describedby":`${f} ${g}`,children:[e.jsx(Ze,{points:[...a],color:h,svgPolylineProps:{strokeWidth:"var(--movable-line-stroke-weight)",style:{fill:"transparent"},"aria-hidden":!0}}),e.jsx("rect",{"aria-hidden":!0,style:{fill:"rgba(0,0,0,0)",cursor:"crosshair"},width:b,height:w,x:i,y:o,onClick:e=>{const t=e.currentTarget.getBoundingClientRect(),i=Xw([[e.clientX-t.x,e.clientY-t.y]],r);n(Z_.polygon.addPoint(i[0]))}}),l.map((t,r)=>{const i=`${p}-angle-${r}`;let o="";const c=r>0&&r<l.length-1?U_(a,r):null,h=c?lC(c):null,f=H_(a,r,!0);for(let e=0;e<f.length;e++)o+=`${p}-point-${r}-side-${e} `;return e.jsxs("g",{children:[e.jsx(XS,{ariaDescribedBy:`${i} ${o}`,ariaLive:v[r],point:t,sequenceNumber:r+1,onMove:e=>n(Z_.polygon.movePoint(r,e)),ref:e=>{s.current[r]=e},onFocus:()=>{n(Z_.polygon.focusPoint(r));const e=[...m];e[r]="polite",y([...e])},onClick:()=>{0===r&&z_(l).length>=3&&n(Z_.polygon.closePolygon()),n(Z_.polygon.clickPoint(r))}}),h&&e.jsx(KS,{id:i,children:Number.isInteger(h)?u.srPolygonPointAngle({angle:h}):u.srPolygonPointAngleApprox({angle:O_(h,d,1)})}),f.map(({pointIndex:t,sideLength:n},i)=>e.jsx(KS,{id:`${p}-point-${r}-side-${i}`,children:q_(n,t,u,d)},`${p}-point-${r}-side-${i}`))]},"point-"+r)}),l.length>0&&e.jsx(KS,{id:f,children:k}),C&&e.jsx(KS,{id:g,children:C})]})};const hC=e=>{const t=t=>e?.matches(t)??!1;try{return t(":focus-visible")}catch{return t(":focus")}};function pC(e,t,n){return fC(e,t,n).srPolygonInteractiveElements}function fC(e,t,n){const{strings:r,locale:i}=t,{coords:o}=e,s="axes"===n||"graph"===n,a=1===o.length,l=s?r.srPolygonGraphCoordinatePlane:r.srPolygonGraph,c=a?r.srPolygonGraphPointsOne:r.srPolygonGraphPointsNum({num:o.length});let u;if(s){u=o.map((e,t)=>r.srPointAtCoordinates({num:t+1,x:O_(e[0],i),y:O_(e[1],i)})).join(" ")}const d=a?r.srPolygonElementsOne:r.srPolygonElementsNum({num:o.length}),h=o.length>0?r.srInteractiveElements({elements:[d,u].join(" ")}):null;return{srPolygonGraph:l,srPolygonGraphPointsNum:c,srPolygonGraphPoints:u,srPolygonElementsNum:d,srPolygonInteractiveElements:h}}function gC(e,t,n,r,i){switch(i){case"grid":return e=>Nw(r,e);case"sides":return function(e,t,n){const r=[...e],i=r[t],o=e=>{let o=e(i),s=i;for(;s[0]===i[0]&&s[1]===i[1]&&zw({range:n,point:o});)s=iC(o,n,r,t,i),o=e(o);return s};return{up:o(e=>Be.add(e,[0,1])),down:o(e=>Be.sub(e,[0,1])),left:o(e=>Be.sub(e,[1,0])),right:o(e=>Be.add(e,[1,0]))}}(e,t,n);case"angles":return function(e,t,n){const r=[...e],i=r[t],o=e=>{let o=n_({snapStep:[0,0],range:n,point:e(i)}),s=i;for(;s[0]===i[0]&&s[1]===i[1]&&zw({range:n,point:o});)s=rC(o,n,r,t,i),o=e(o);return s};return{up:o(e=>Be.add(e,[0,.1])),down:o(e=>Be.sub(e,[0,.1])),left:o(e=>Be.sub(e,[.1,0])),right:o(e=>Be.add(e,[.1,0]))}}(e,t,n);default:throw new ze(i)}}function mC(t){const{dispatch:n,graphState:r}=t,{coords:i,snapStep:o}=r,{interactiveColor:s}=Uw(),{strings:a,locale:l}=Dd(),c=wt.useId(),u=c+"-direction",d=c+"-vertex",h=c+"-intercepts",p=wt.useRef([0,0,0]),f=vC(i);void 0!==f&&(p.current=f);const[g,m,v]=p.current,{srQuadraticGraph:y,srQuadraticDirection:x,srQuadraticVertex:b,srQuadraticXIntercepts:w,srQuadraticYIntercept:_}=xC(r,{strings:a,locale:l});return e.jsxs("g",{"aria-label":y,"aria-describedby":`${u} ${d} ${h}`,children:[e.jsx(qe.OfX,{y:e=>(g*e+m)*e+v,color:s,svgPathProps:{"aria-hidden":!0}}),i.map((t,r)=>{const s=function(e,t,n,r){const i=W_(t),[o,s]=t;switch(i){case"origin":return n.srQuadraticPointOrigin({pointNumber:e});case"x-axis":case"y-axis":return n.srQuadraticPointAxis({pointNumber:e,x:O_(o,r),y:O_(s,r)});default:return n.srQuadraticPointQuadrant({pointNumber:e,quadrant:i,x:O_(o,r),y:O_(s,r)})}}(r+1,t,a,l),c=b?` ${b}`:"";return e.jsx(XS,{ariaLabel:`${s}${c}`,point:t,sequenceNumber:r+1,constrain:bC(i,o,r),onMove:e=>n(Z_.quadratic.movePoint(r,e))},"point-"+r)}),x&&e.jsx(KS,{id:u,children:x}),b&&e.jsx(KS,{id:d,children:b}),e.jsx(KS,{id:h,children:w?`${w} ${_}`:`${_}`})]})}const vC=e=>{const t=e[0],n=e[1],r=e[2],i=(t[0]-n[0])*(t[0]-r[0])*(n[0]-r[0]);if(0===i)return;return[(r[0]*(n[1]-t[1])+n[0]*(t[1]-r[1])+t[0]*(r[1]-n[1]))/i,(r[0]*r[0]*(t[1]-n[1])+n[0]*n[0]*(r[1]-t[1])+t[0]*t[0]*(n[1]-r[1]))/i,(n[0]*r[0]*(n[0]-r[0])*t[1]+r[0]*t[0]*(r[0]-t[0])*n[1]+t[0]*n[0]*(t[0]-n[0])*r[1])/i]};function yC(e,t){return xC(e,t).srQuadraticInteractiveElements}function xC(e,t){const{strings:n,locale:r}=t,i=vC(e.coords),[o,s,a]=i??[0,0,0],l=[-s/(2*o),a-s*s/(4*o)],c=function(e,t,n){if(0===e)return 0===t?[]:[-n/t];const r=t*t-4*e*n;if(r<0)return[];const i=(-t+Math.sqrt(r))/(2*e),o=(-t-Math.sqrt(r))/(2*e);return i===o?[i]:[i,o]}(o,s,a),u=n.srQuadraticGraph,d=n.srQuadraticFaceUp,h=n.srQuadraticFaceDown,p=0===o?void 0:o>0?d:h,f=0!==o?function(e,t){const n=W_(e);switch(n){case"origin":return t.srQuadraticGraphVertexOrigin;case"x-axis":return t.srQuadraticGraphVertexXAxis;case"y-axis":return t.srQuadraticGraphVertexYAxis;default:return t.srQuadraticGraphVertexQuadrant({quadrant:n})}}(l,n):void 0;return{srQuadraticGraph:u,srQuadraticDirection:p,srQuadraticVertex:f,srQuadraticXIntercepts:2===c.length?n.srQuadraticTwoXIntercepts({intercept1:O_(c[0],r),intercept2:O_(c[1],r)}):1===c.length?n.srQuadraticOneXIntercept({intercept:O_(c[0],r)}):void 0,srQuadraticYIntercept:n.srQuadraticYIntercept({intercept:O_(a,r)}),srQuadraticInteractiveElements:n.srInteractiveElements({elements:n.srQuadraticInteractiveElements({point1X:O_(e.coords[0][0],r),point1Y:O_(e.coords[0][1],r),point2X:O_(e.coords[1][0],r),point2Y:O_(e.coords[1][1],r),point3X:O_(e.coords[2][0],r),point3Y:O_(e.coords[2][1],r)})})}}const bC=(e,t,n)=>{const r=[e[0],e[1],e[2]],i=r[n],o=e=>{let t=e(i);return r[n]=t,wC(r)?t:(t=e(t),r[n]=t,wC(r)?t:e(t))};return{up:Be.add(i,[0,t[1]]),down:Be.sub(i,[0,t[1]]),left:o(e=>Be.sub(e,[t[0],0])),right:o(e=>Be.add(e,[t[0],0]))}},wC=e=>{const t=e[0],n=e[1],r=e[2];return t[0]!==n[0]&&n[0]!==r[0]&&t[0]!==r[0]};const _C=t=>{const{dispatch:n}=t,{coords:r}=t.graphState,{strings:i,locale:o}=Dd(),s=wt.useId()+"-points",{srRayGraph:a,srRayPoints:l,srRayEndpoint:c,srRayTerminalPoint:u,srRayGrabHandle:d}=kC(t.graphState,{strings:i,locale:o});return e.jsxs("g",{"aria-label":a,"aria-describedby":s,children:[e.jsx(qS,{points:r,ariaLabels:{point1AriaLabel:c,point2AriaLabel:u,grabHandleAriaLabel:d},onMoveLine:e=>n(Z_.ray.moveRay(e)),onMovePoint:(e,t)=>n(Z_.ray.movePoint(e,t)),extend:{start:!1,end:!0}}),e.jsx(KS,{id:s,children:l})]})};function SC(e,t){return kC(e,t).srRayInteractiveElement}function kC(e,t){const{coords:n}=e,{strings:r,locale:i}=t,o=r.srRayGraph,s=r.srRayPoints({point1X:O_(n[0][0],i),point1Y:O_(n[0][1],i),point2X:O_(n[1][0],i),point2Y:O_(n[1][1],i)}),a=r.srRayEndpoint({x:O_(n[0][0],i),y:O_(n[0][1],i)}),l=r.srRayTerminalPoint({x:O_(n[1][0],i),y:O_(n[1][1],i)}),c=r.srRayGrabHandle({point1X:O_(n[0][0],i),point1Y:O_(n[0][1],i),point2X:O_(n[1][0],i),point2Y:O_(n[1][1],i)}),u=r.srInteractiveElements({elements:[o,s].join(" ")});return{srRayGraph:o,srRayPoints:s,srRayEndpoint:a,srRayTerminalPoint:l,srRayGrabHandle:c,srRayInteractiveElement:u}}const CC=({dispatch:t,graphState:n})=>{const{coords:r}=n,{strings:i,locale:o}=Dd(),s=wt.useId(),a=s+"-length",l=s+"-whole-graph";const c=r?.length>1?i.srMultipleSegmentGraphAriaLabel({countOfSegments:r.length}):i.srSingleSegmentGraphAriaLabel;function u(e,t){return 1===r.length?i.srSingleSegmentLabel({point1X:O_(r[0][0][0],o),point1Y:O_(r[0][0][1],o),point2X:O_(r[0][1][0],o),point2Y:O_(r[0][1][1],o)}):i.srMultipleSegmentIndividualLabel({point1X:O_(e[0][0],o),point1Y:O_(e[0][1],o),point2X:O_(e[1][0],o),point2Y:O_(e[1][1],o),indexOfSegment:t+1})}function d(e,t,n,s){const a={endpointNumber:e,x:O_(t,o),y:O_(n,o)};return r.length>1?i.srMultipleSegmentGraphEndpointAriaLabel({...a,indexOfSegment:s}):i.srSingleSegmentGraphEndpointAriaLabel(a)}return e.jsxs("g",{"aria-label":c,"aria-describedby":`${l} ${1===r.length&&a}`,children:[r?.map((n,l)=>e.jsxs("g",{"aria-label":1===r.length?void 0:u(n,l),"aria-describedby":1===r.length?void 0:a,children:[e.jsx(qS,{points:n,onMoveLine:e=>{t(Z_.segment.moveLine(l,e))},onMovePoint:(e,n)=>{t(Z_.segment.movePointInFigure(l,e,n))},ariaLabels:{point1AriaLabel:d(1,n[0][0],n[0][1],l+1),point2AriaLabel:d(2,n[1][0],n[1][1],l+1),grabHandleAriaLabel:i.srSegmentGrabHandle({point1X:O_(n[0][0],o),point1Y:O_(n[0][1],o),point2X:O_(n[1][0],o),point2Y:O_(n[1][1],o)})}},l),e.jsx(KS,{id:a,children:i.srSegmentLength({length:O_(MC(n),o)})})]},`${s}-${l}`)),e.jsx(KS,{id:l,children:r.map((e,t)=>u(e,t)).join(" ")})]})};function MC(e){return Rp.distanceToPoint(...e)}function IC(e,t){const{strings:n,locale:r}=t,i=e.coords.map(([e,t],i)=>n.srMultipleSegmentIndividualLabel({point1X:O_(e[0],r),point1Y:O_(e[1],r),point2X:O_(t[0],r),point2Y:O_(t[1],r),indexOfSegment:i+1}));return n.srInteractiveElements({elements:i.join(" ")})}function PC(t){const{dispatch:n,graphState:r}=t,{interactiveColor:i}=Uw(),o=Dd(),s=wt.useId()+"-description",{coords:a,snapStep:l}=r,c=wt.useRef({amplitude:1,angularFrequency:1,phase:1,verticalOffset:0}),u=jC(a);void 0!==u&&(c.current=u);const{srSinusoidGraph:d,srSinusoidDescription:h,srSinusoidRootPoint:p,srSinusoidPeakPoint:f}=AC(r,o);return e.jsxs("g",{"aria-label":d,"aria-describedby":s,children:[e.jsx(qe.OfX,{y:e=>EC(e,c.current),color:i,svgPathProps:{"aria-hidden":!0}}),a.map((t,r)=>e.jsx(XS,{ariaLabel:0===r?p:f,point:t,sequenceNumber:r+1,constrain:TC(a,l,r),onMove:e=>n(Z_.sinusoid.movePoint(r,e))},"point-"+r)),e.jsx(KS,{id:s,children:h})]})}const TC=(e,t,n)=>{const r=e[n],i=e[1-n],o=e=>{let t=e(r);return t[0]===i[0]&&(t=e(t)),t};return{up:o(e=>Be.add(e,[0,t[1]])),down:o(e=>Be.sub(e,[0,t[1]])),left:o(e=>Be.sub(e,[t[0],0])),right:o(e=>Be.add(e,[t[0],0]))}},EC=function(e,t){const{amplitude:n,angularFrequency:r,phase:i,verticalOffset:o}=t;return n*Math.sin(r*e-i)+o},jC=e=>{const t=e[0],n=e[1];if(n[0]===t[0])return;const r=n[1]-t[1],i=Math.PI/(2*(n[0]-t[0]));return{amplitude:r,angularFrequency:i,phase:t[0]*i,verticalOffset:t[1]}};function RC(e,t){return AC(e,t).srSinusoidInteractiveElements}function AC(e,t){const{strings:n,locale:r}=t,{coords:i}=e,[o,s]=i,a=Math.abs(s[0]-o[0]),l=Math.abs(s[1]-o[1]),c={x:O_(o[0],r),y:O_(o[1],r)},u={x:O_(s[0],r),y:O_(s[1],r)};return{srSinusoidGraph:n.srSinusoidGraph,srSinusoidDescription:n.srSinusoidDescription({minValue:O_(o[1]-l,r),maxValue:O_(o[1]+l,r),cycleStart:O_(o[0]-2*a,r),cycleEnd:O_(o[0]+2*a,r)}),srSinusoidRootPoint:n.srSinusoidRootPoint(c),srSinusoidPeakPoint:s[1]===o[1]?n.srSinusoidFlatPoint(u):s[1]>o[1]?n.srSinusoidMaxPoint(u):n.srSinusoidMinPoint(u),srSinusoidInteractiveElements:n.srInteractiveElements({elements:n.srSinusoidInteractiveElements({point1X:O_(o[0],r),point1Y:O_(o[1],r),point2X:O_(s[0],r),point2Y:O_(s[1],r)})})}}const{calculateAngleInDegrees:NC,convertDegreesToRadians:LC}=Xp,OC=[-195,-190],DC=[-201,-15];function FC(){const t=zd().staticUrl,{range:n,snapStep:r}=Uw(),[[i,o],[s,a]]=n,l=[Bw(i,o,.5),Bw(s,a,.25)],[c,u]=wt.useState(l),[d,h]=wt.useState(DC),p=wt.useRef(null),{dragging:f}=zS({gestureTarget:p,onMove:u,point:c,constrainKeyboardMovement:e=>n_({snapStep:r,range:n,point:e})}),g=wt.useRef(null);!function(e){const{gestureTarget:t,onMove:n,point:r,constrain:i=e=>e}=e,o=wt.useRef([0,0]);Qe(e=>{const{event:t,first:s,movement:a}=e;t?.stopPropagation(),s&&(o.current=r),0!==Be.mag(a)&&n?.(i(Be.add(o.current,a)))},{target:t,eventOptions:{passive:!1}})}({gestureTarget:g,onMove:h,point:d,constrain:$C});const[m]=Gw(c),v=Be.add(m,OC),y=NC(d)-NC(DC);return e.jsxs("g",{ref:p,transform:`translate(${v[0]}, ${v[1]}), rotate(${y})`,style:{transformOrigin:`${-OC[0]}px ${-OC[1]}px`,cursor:f?"grabbing":"grab"},children:[e.jsx("image",{href:t("https://cdn.kastatic.org/images/perseus/protractor.svg")}),e.jsx("g",{transform:`translate(5, ${-OC[1]})`,ref:g,children:e.jsx(zC,{})})]})}function zC(){const t=LC(10),n=175*(1-Math.cos(t)),r=175*-Math.sin(t),i=Ew().move(0,0).circularArc(175,n,r,{sweep:!0}).build(),o=Ew().move(-8,0).line(0,10).line(8,0).build();return e.jsxs("g",{className:"protractor-rotation-handle",children:[e.jsx("path",{className:"protractor-rotation-handle-arrow-arc",d:i}),e.jsx("path",{className:"protractor-rotation-handle-arrowhead",d:o}),e.jsx("path",{className:"protractor-rotation-handle-arrowhead",d:o,transform:`translate(${n}, ${r}), rotate(190)`}),e.jsx("ellipse",{cx:"0px",cy:"-15px",rx:22,ry:22,fill:"none"})]})}const BC=Be.mag(DC);function $C(e){return Be.withMag(e,BC)}const WC=t=>{const{state:n,dispatch:r,labels:i,labelLocation:o,readOnly:s,fullGraphAriaLabel:a,fullGraphAriaDescription:l}=t,{type:c}=n,[u,d]=t.box,h=t.step,p=wt.useId(),f=`interactive-graph-description-${p}`,g=`interactive-graph-interactive-elements-description-${p}`,m=`unlimited-graph-keyboard-prompt-${p}`,v=`instructions-${p}`,y=wt.useRef(null),{analytics:x}=$d(),{viewboxX:b,viewboxY:w}=((e,t,n)=>{let r=0;const i=t/a_(e[0]),o=e[0][0];o>0&&(r=i*Math.abs(o)),o<0&&(r=-i*Math.abs(o));let s=-n;const a=n/a_(e[1]),l=e[1][0];return l>0&&(s=-n-a*Math.abs(l)),l<0&&(s=a*Math.abs(l)-n),{viewboxX:r,viewboxY:s}})(n.range,u,d),_={width:u,height:d,viewBox:`${b} ${w} ${u} ${d}`,preserveAspectRatio:"xMidYMin",x:b,y:w},S=Dd(),{strings:k}=S,C=r_(n)&&n.showKeyboardInteractionInvitation;Je(()=>{x.onAnalyticsEvent({type:"perseus:widget:rendered:ti",payload:{widgetSubType:c,widgetType:"INTERACTIVE_GRAPH",widgetId:"interactive-graph"}})});const{graph:M,interactiveElementsDescription:I}=HC({state:n,dispatch:r,i18n:S,markings:t.markings}),P=s||!!t.static,T={range:n.range,width:u,height:d},[E,j]=c_(T,o,h),R="alongEdge"===o&&j[0]<-17.5,A=-1*(j[0]-2.5);return e.jsx(Ww.Provider,{value:{range:n.range,snapStep:n.snapStep,markings:t.markings,tickStep:h,gridStep:t.gridStep,showTooltips:!!t.showTooltips,showAxisArrows:t.showAxisArrows,graphDimensionsInPixels:t.box,width:u,height:d,labels:i,labelLocation:o,disableKeyboardInteraction:P,interactiveColor:P?"var(--static-gray)":"var(--mafs-blue)"},children:e.jsxs(X,{className:"mafs-graph-container",children:[e.jsxs(X,{className:"mafs-graph",style:{position:"relative",padding:"25px 25px 0 0",boxSizing:"content-box",marginLeft:R?`${A}px`:"20px",marginBottom:"30px",pointerEvents:t.static?"none":"auto",userSelect:"none",width:u,height:d},onKeyUp:e=>{!function(e,t,n){r_(t)&&("Backspace"===e.key||"Delete"===e.key?(document.activeElement?.classList.contains("movable-point__focusable-handle")&&("point"===t.type||"polygon"===t.type&&!t.closedPolygon)&&n(Z_.global.deleteIntent()),document.activeElement.blur()):e.shiftKey&&"Enter"===e.key?n(Z_.global.changeInteractionMode("keyboard")):"keyboard"===t.interactionMode&&"a"===e.key&&n(Z_.pointGraph.addPoint([0,0])))}(e,n,r)},"aria-label":a,"aria-describedby":qC(l&&f,I&&g,r_(n)&&m,"none"!==n.type&&!P&&v),ref:y,tabIndex:0,onFocus:e=>{!function(e,t,n){r_(t)&&e.target.classList.contains("mafs-graph")&&"mouse"===t.interactionMode&&n(Z_.global.changeKeyboardInvitationVisibility(!0))}(e,n,r)},onBlur:e=>{!function(e,t,n){r_(t)&&n(Z_.global.changeKeyboardInvitationVisibility(!1))}(0,n,r)},children:[l&&e.jsx(X,{id:f,tabIndex:-1,className:"mafs-sr-only",children:l}),I&&e.jsx(X,{id:g,tabIndex:-1,className:"mafs-sr-only",children:I}),"none"!==n.type&&e.jsx(X,{id:v,tabIndex:-1,className:"mafs-sr-only",children:r_(n)?k.srUnlimitedGraphInstructions:k.srGraphInstructions}),e.jsx(M_,{box:t.box,backgroundImage:t.backgroundImage}),e.jsxs(X,{style:{position:"absolute",bottom:0,left:0},children:[("graph"===t.markings||"axes"===t.markings)&&e.jsx(e.Fragment,{children:e.jsx(p_,{i18n:S,xAxisLabelLocation:E,yAxisLabelLocation:j})}),e.jsx(X,{"aria-hidden":0===t.lockedFigures.length,children:e.jsxs(et,{preserveAspectRatio:!1,viewBox:{x:n.range[0],y:n.range[1],padding:0},pan:!1,zoom:!1,width:u,height:d,children:[e.jsx(PS,{}),e.jsx("svg",{..._,children:e.jsx(x_,{gridStep:t.gridStep,range:n.range,containerSizeClass:t.containerSizeClass,markings:t.markings,width:u,height:d})}),("graph"===t.markings||"axes"===t.markings)&&e.jsxs(e.Fragment,{children:[e.jsx(v_,{}),e.jsx(Zw,{})]}),t.lockedFigures.length>0&&e.jsx("svg",{..._,children:e.jsx(Q_,{lockedFigures:t.lockedFigures,range:n.range})})]})}),e.jsx(P_,{lockedFigures:t.lockedFigures}),e.jsx(X,{style:{position:"absolute"},children:e.jsx(et,{preserveAspectRatio:!1,viewBox:{x:n.range[0],y:n.range[1],padding:0},pan:!1,zoom:!1,width:u,height:d,children:e.jsxs("svg",{..._,style:{overflow:"point"===c?"visible":"hidden"},children:[t.showProtractor&&e.jsx(FC,{}),M]})})})]}),C&&e.jsx(X,{style:{display:C?void 0:"hidden",textAlign:"center",backgroundColor:"white",border:"1px solid #21242C52",padding:"16px 0",boxShadow:"0px 8px 8px 0px #21242C14",top:"50%",transform:"translateY(-50%)"},children:e.jsx(tt,{id:m,children:k.graphKeyboardPrompt})})]}),UC({state:n,dispatch:r,width:u,perseusStrings:k})]})})},UC=t=>{const{state:n,dispatch:r,width:i,perseusStrings:o}=t,{type:s}=n;switch(s){case"point":return"unlimited"===n.numPoints?(t=>{const{interactionMode:n,showRemovePointButton:r,focusedPointIndex:i}=t.state,{perseusStrings:o}=t,s=r&&null!==i;return e.jsxs(X,{style:{flexDirection:"row",width:t.width},children:["keyboard"===n&&e.jsx(Ee,{kind:"secondary",style:{width:"100%",marginLeft:"20px"},tabIndex:0,onClick:()=>{t.dispatch(Z_.pointGraph.addPoint([0,0]))},children:o.addPoint}),"mouse"===n&&e.jsx(Ee,{id:Jw,kind:"secondary",actionType:"destructive",tabIndex:-1,style:{width:"100%",marginLeft:"20px",visibility:s?"visible":"hidden"},onClick:e=>{t.dispatch(Z_.pointGraph.removePoint(t.state.focusedPointIndex))},children:o.removePoint})]})})({state:n,dispatch:r,width:i,perseusStrings:o}):null;case"polygon":return"unlimited"===n.numSides?(t=>{const{interactionMode:n,showRemovePointButton:r,focusedPointIndex:i,closedPolygon:o,coords:s}=t.state,{perseusStrings:a}=t,l=r&&null!==i,c=z_(s).length<3,u=o?e.jsx(Ee,{kind:"secondary",style:{width:"100%",marginLeft:"20px"},tabIndex:0,onClick:()=>{t.dispatch(Z_.polygon.openPolygon())},children:a.openPolygon}):e.jsx(Ee,{kind:"secondary",disabled:c,style:{width:"100%",marginLeft:"20px"},tabIndex:c?-1:0,onClick:()=>{t.dispatch(Z_.polygon.closePolygon())},children:a.closePolygon});return e.jsx(e.Fragment,{children:e.jsxs(X,{style:{flexDirection:"row",width:t.width},children:["keyboard"===n&&e.jsx(Ee,{kind:"secondary",style:{width:"100%",marginLeft:"20px"},disabled:o,tabIndex:o?-1:0,onClick:()=>{t.dispatch(Z_.polygon.addPoint([0,0]))},children:a.addPoint}),"mouse"===n&&e.jsx(Ee,{id:Jw,kind:"secondary",actionType:"destructive",disabled:o||!l,tabIndex:-1,style:{width:"100%",marginLeft:"20px"},onClick:e=>{t.dispatch(Z_.polygon.removePoint(t.state.focusedPointIndex))},children:a.removePoint}),u]})})})({state:n,dispatch:r,width:i,perseusStrings:o}):null;default:return null}};const HC=t=>{const{state:n,dispatch:r,i18n:i,markings:o}=t,{type:s}=n;switch(s){case"angle":return function(t,n,r){return{graph:e.jsx(ek,{graphState:t,dispatch:n}),interactiveElementsDescription:tk(t,r)}}(n,r,i);case"segment":return function(t,n,r){return{graph:e.jsx(CC,{graphState:t,dispatch:n}),interactiveElementsDescription:IC(t,r)}}(n,r,i);case"linear-system":return function(t,n,r){return{graph:e.jsx(xk,{graphState:t,dispatch:n}),interactiveElementsDescription:bk(t,r)}}(n,r,i);case"linear":return function(t,n,r){return{graph:e.jsx(mk,{graphState:t,dispatch:n}),interactiveElementsDescription:vk(t,r)}}(n,r,i);case"ray":return function(t,n,r){return{graph:e.jsx(_C,{graphState:t,dispatch:n}),interactiveElementsDescription:SC(t,r)}}(n,r,i);case"polygon":return function(t,n,r,i){return{graph:e.jsx(cC,{graphState:t,dispatch:n}),interactiveElementsDescription:pC(t,r,i)}}(n,r,i,o);case"point":return function(t,n,r){return{graph:e.jsx(wk,{graphState:t,dispatch:n}),interactiveElementsDescription:_k(t,r)}}(n,r,i);case"circle":return function(t,n,r){return{graph:e.jsx(lk,{graphState:t,dispatch:n}),interactiveElementsDescription:pk(t,r)}}(n,r,i);case"quadratic":return function(t,n,r){return{graph:e.jsx(mC,{graphState:t,dispatch:n}),interactiveElementsDescription:yC(t,r)}}(n,r,i);case"sinusoid":return function(t,n,r){return{graph:e.jsx(PC,{graphState:t,dispatch:n}),interactiveElementsDescription:RC(t,r)}}(n,r,i);case"none":return{graph:null,interactiveElementsDescription:null};default:throw new ze(s)}};function qC(...e){return e.filter(Boolean).join(" ")||void 0}const VC=wt.forwardRef(function(t,n){const{onChange:r,graph:i}=t,[o,s]=wt.useReducer(Yk,t,Ck);wt.useImperativeHandle(n,()=>({getUserInput:()=>function(e,t){if(!e.hasBeenInteractedWith)return{...t};if("linear-system"===t.type&&"linear-system"===e.type)return{...t,coords:e.coords};if("segment"===e.type&&"segment"===t.type)return{...t,coords:e.coords};if("linear"===e.type&&"linear"===t.type)return{...t,coords:e.coords};if("ray"===e.type&&"ray"===t.type)return{...t,coords:e.coords};if("polygon"===e.type&&"polygon"===t.type)return"unlimited"!==e.numSides||e.closedPolygon?{...t,coords:e.coords}:{...t,coords:null};if("point"===e.type&&"point"===t.type)return"unlimited"===e.numPoints&&0===e.coords.length?{...t,coords:null}:{...t,coords:e.coords};if("circle"===e.type&&"circle"===t.type)return{...t,center:e.center,radius:ak(e)};if("quadratic"===e.type&&"quadratic"===t.type)return{...t,coords:e.coords};if("sinusoid"===e.type&&"sinusoid"===t.type)return{...t,coords:e.coords};if("angle"===e.type&&"angle"===t.type)return{...t,coords:e.coords,allowReflexAngles:e.allowReflexAngles};if("none"===e.type&&"none"===t.type)return{type:"none"};throw new Error("Mafs is not yet implemented for graph type: "+t.type)}(o,i)}));const a=wt.useRef(o);wt.useEffect(()=>{a.current!==o&&r(function(e,t){switch(e.type){case"angle":return It("angle"===t.type),{...t,coords:e.coords};case"quadratic":return It("quadratic"===t.type),{...t,coords:e.coords};case"circle":return It("circle"===t.type),{...t,center:e.center,radius:ak(e)};case"linear":return It("linear"===t.type),{...t,coords:e.coords};case"ray":return It("ray"===t.type),{...t,coords:e.coords};case"sinusoid":return It("sinusoid"===t.type),{...t,coords:e.coords};case"segment":return It("segment"===t.type),{...t,coords:e.coords};case"linear-system":return It("linear-system"===t.type),{...t,coords:e.coords};case"polygon":return It("polygon"===t.type),{...t,coords:e.coords};case"point":return It("point"===t.type),{...t,coords:e.coords};case"none":return It("none"===t.type),{...t};default:throw new ze(e)}}(o,i)),a.current=o},[r,o,i]);const[l,c]=t.snapStep;wt.useEffect(()=>{s({type:SS,snapStep:[l,c]})},[s,l,c]);const[[u,d],[h,p]]=t.range;wt.useEffect(()=>{s({type:kS,range:[[u,d],[h,p]]})},[s,u,d,h,p]);const f="segment"===i.type?i.numSegments:null,g="point"===i.type?i.numPoints:null,m="polygon"===i.type?i.numSides:null,v="polygon"===i.type?i.snapTo:null,y="polygon"===i.type||"angle"===i.type?i.showAngles:null,x="angle"===i.type?i.allowReflexAngles:null,b="polygon"===i.type?i.showSides:null,w="startCoords"in i?i.startCoords:void 0,_=wt.useRef(t),S=nt(t);return wt.useEffect(()=>{var e;S.current!==_.current&&s((e=S.current,{type:CS,params:e}))},[i.type,g,f,m,v,y,b,S,w,x]),t.static&&t.correct?e.jsx(WC,{...t,state:Ck({...t,graph:t.correct}),dispatch:s}):e.jsx(WC,{...t,state:o,dispatch:s})}),{getClockwiseAngle:GC}=Xp,{getLineEquation:YC,getLineIntersectionString:XC,magnitude:KC,vector:QC}=Gp,ZC={url:null},JC="unlimited";const eM=(e,t)=>new d(`${e} called but current graph type is not a '${t}'`,h.NotAllowed,{metadata:{graphType:t}});class tM extends wt.Component{mafsRef=wt.createRef();static defaultProps={labels:["x","y"],labelLocation:"onAxis",range:[[-10,10],[-10,10]],showAxisArrows:{xMin:!0,xMax:!0,yMin:!0,yMax:!0},step:[1,1],backgroundImage:ZC,markings:"graph",showTooltips:!1,showProtractor:!1,userInput:{type:"linear"}};getUserInput(){if(this.mafsRef.current?.getUserInput)return this.mafsRef.current.getUserInput();throw new d("Cannot getUserInput from a graph that has never rendered",h.NotAllowed)}getPromptJSON(){return e=this.props,t=this.getUserInput(),{type:"interactive-graph",options:{graph:Pw(e),backgroundImageUrl:e.backgroundImage?.url,range:e.range,labels:e.labels},userInput:Tw(t)};var e,t}getSerializedState(){const{userInput:e,...t}=this.props;return{...t,graph:this.props.userInput}}render(){const t=dv(this.props.containerSizeClass),n=this.props.gridStep||Jd.getGridStep(this.props.range,this.props.step,t[0]),r=this.props.snapStep||Jd.snapStepFromGridStep(n),i={...this.props,graph:this.props.userInput,onChange:()=>this.props.handleUserInput(this.mafsRef.current?.getUserInput())};return e.jsx(VC,{...i,ref:this.mafsRef,gridStep:n,snapStep:r,box:t,showTooltips:!!this.props.showTooltips,readOnly:this.props.apiOptions?.readOnly})}static getLineCoords(e,t){return e.coords||tM.pointsFromNormalized(t,[[.25,.75],[.75,.75]])}static getPointCoords(e,t){const n=e.numPoints||1;let r=e.coords;if(r)return r;switch(n){case 1:r=[e.coord||[0,0]];break;case 2:r=[[-5,0],[5,0]];break;case 3:r=[[-5,0],[0,0],[5,0]];break;case 4:r=[[-6,0],[-2,0],[2,0],[6,0]];break;case 5:r=[[-6,0],[-3,0],[0,0],[3,0],[6,0]];break;case 6:r=[[-5,0],[-3,0],[-1,0],[1,0],[3,0],[5,0]];break;case JC:r=[]}const i=tM.normalizeCoords(r,[[-10,10],[-10,10]]);return tM.pointsFromNormalized(t,i)}static getLinearSystemCoords(e,t){return e.coords||r.map([[[.25,.75],[.75,.75]],[[.25,.25],[.75,.25]]],e=>tM.pointsFromNormalized(t,e))}static getPolygonCoords(e,t){if("polygon"!==e.type)throw eM("toggleShowSides","polygon");let n=e.coords;if(n)return n;const i=e.numSides||3;if(i===JC)n=[];else{const t=2*Math.PI/i,o=(1/i-.5)*Math.PI,s="sides"===e.snapTo?Math.sqrt(3)/3*7:4;n=r.times(i,function(e){return[s*Math.cos(e*t+o),s*Math.sin(e*t+o)]})}n=tM.normalizeCoords(n,[[-10,10],[-10,10]]);const o=!r.contains(["angles","sides"],e.snapTo);return n=tM.pointsFromNormalized(t,n,!o),n}static getSegmentCoords(e,t){const n=e.coords;if(n)return n;const r=e.numSegments||1,i=[[-10,10],[-10,10]];return{1:[5],2:[5,-5],3:[5,0,-5],4:[6,2,-2,-6],5:[6,3,0,-3,-6],6:[5,3,1,-1,-3,-5]}[r].map(function(e){let n=[[-5,e],[5,e]];return n=tM.normalizeCoords(n,i),n=tM.pointsFromNormalized(t,n),n})}static getAngleCoords(e,t){let n=e.coords;if(n)return n;const r=e.snapDegrees||1;let i=r;for(;i<20;)i+=r;i=i*Math.PI/180;const o=(e.angleOffsetDeg||0)*Math.PI/180;n=tM.pointsFromNormalized(t,[[.85,.5],[.5,.5]]);const s=KC(QC(...n));return n[0]=[n[1][0]+s*Math.cos(o),n[1][1]+s*Math.sin(o)],n[2]=[n[1][0]+s*Math.cos(i+o),n[1][1]+s*Math.sin(i+o)],n}static normalizeCoords(e,t){return r.map(e,function(e){return r.map(e,function(e,n){const r=t[n][1]-t[n][0];return(e+t[n][1])/r})})}static getEquationString(e){const t=e.userInput.type;switch(t){case"none":return tM.getNoneEquationString();case"linear":return tM.getLinearEquationString(e);case"quadratic":return tM.getQuadraticEquationString(e);case"sinusoid":return tM.getSinusoidEquationString(e);case"circle":return tM.getCircleEquationString(e);case"linear-system":return tM.getLinearSystemEquationString(e);case"point":return tM.getPointEquationString(e);case"segment":return tM.getSegmentEquationString(e);case"ray":return tM.getRayEquationString(e);case"polygon":return tM.getPolygonEquationString(e);case"angle":return tM.getAngleEquationString(e);default:throw new ze(t)}}static pointsFromNormalized(e,t,n){return r.map(t,function(t){return r.map(t,function(t,r){const i=e.range[r];if(n)return i[0]+(i[1]-i[0])*t;const o=e.step[r],s=function(e,t){return Math.floor((e[1]-e[0])/t)}(i,o),a=Math.round(t*s);return i[0]+o*a})})}static getNoneEquationString(){return""}static getLinearEquationString(e){const t=tM.getLineCoords(e.userInput,e);if(v(t[0][0],t[1][0]))return"x = "+t[0][0].toFixed(3);const n=(t[1][1]-t[0][1])/(t[1][0]-t[0][0]),r=t[0][1]-n*t[0][0];return v(n,0)?"y = "+r.toFixed(3):"y = "+n.toFixed(3)+"x + "+r.toFixed(3)}static getCurrentQuadraticCoefficients(e){return function(e){const t=e[0],n=e[1],r=e[2],i=(t[0]-n[0])*(t[0]-r[0])*(n[0]-r[0]);if(0===i)return;return[(r[0]*(n[1]-t[1])+n[0]*(t[1]-r[1])+t[0]*(r[1]-n[1]))/i,(r[0]*r[0]*(t[1]-n[1])+n[0]*n[0]*(r[1]-t[1])+t[0]*t[0]*(n[1]-r[1]))/i,(n[0]*r[0]*(n[0]-r[0])*t[1]+r[0]*t[0]*(r[0]-t[0])*n[1]+t[0]*n[0]*(t[0]-n[0])*r[1])/i]}(e.userInput.coords||tM.defaultQuadraticCoords(e))}static defaultQuadraticCoords(e){return tM.pointsFromNormalized(e,[[.25,.75],[.5,.25],[.75,.75]])}static getQuadraticEquationString(e){const t=tM.getCurrentQuadraticCoefficients(e);return"y = "+t[0].toFixed(3)+"x^2 + "+t[1].toFixed(3)+"x + "+t[2].toFixed(3)}static getCurrentSinusoidCoefficients(e){return function(e){const t=e[0],n=e[1],r=n[1]-t[1],i=Math.PI/(2*(n[0]-t[0]));return[r,i,t[0]*i,t[1]]}(e.userInput.coords||tM.defaultSinusoidCoords(e))}static defaultSinusoidCoords(e){return tM.pointsFromNormalized(e,[[.5,.5],[.65,.6]])}static getSinusoidEquationString(e){const t=tM.getCurrentSinusoidCoefficients(e);return"y = "+t[0].toFixed(3)+"sin("+t[1].toFixed(3)+"x - "+t[2].toFixed(3)+") + "+t[3].toFixed(3)}static getCircleEquationString(e){const t=e.userInput,n=t.center||[0,0],r=t.radius||2;return"center ("+n[0]+", "+n[1]+"), radius "+r}static getLinearSystemEquationString(e){const t=tM.getLinearSystemCoords(e.userInput,e);return"\n"+YC(t[0][0],t[0][1])+"\n"+YC(t[1][0],t[1][1])+"\n"+XC(t[0],t[1])}static getPointEquationString(e){if("point"!==e.userInput.type)throw eM("getPointEquationString","point");return tM.getPointCoords(e.userInput,e).map(function(e){return"("+e[0]+", "+e[1]+")"}).join(", ")}static getSegmentEquationString(e){if("segment"!==e.userInput.type)throw eM("getSegmentEquationString","segment");const t=tM.getSegmentCoords(e.userInput,e);return r.map(t,function(e){return"["+r.map(e,function(e){return"("+e.join(", ")+")"}).join(" ")+"]"}).join(" ")}static getRayEquationString(e){if("ray"!==e.userInput.type)throw eM("createPointForPolygonType","ray");const t=tM.getLineCoords(e.userInput,e),n=t[0],r=t[1];let i=tM.getLinearEquationString(e);return n[0]>r[0]?i+=" (for x <= "+n[0].toFixed(3)+")":n[0]<r[0]?i+=" (for x >= "+n[0].toFixed(3)+")":n[1]>r[1]?i+=" (for y <= "+n[1].toFixed(3)+")":i+=" (for y >= "+n[1].toFixed(3)+")",i}static getPolygonEquationString(e){if("polygon"!==e.userInput.type)throw eM("getPolygonEquationString","polygon");const t=tM.getPolygonCoords(e.userInput,e);return r.map(t,function(e){return"("+e.join(", ")+")"}).join(" ")}static getAngleEquationString(e){if("angle"!==e.userInput.type)throw eM("getAngleEquationString","angle");const t=tM.getAngleCoords(e.userInput,e),n=e.userInput.allowReflexAngles;return GC(t,n).toFixed(0)+"° angle at ("+t[1].join(", ")+")"}}const nM={name:"interactive-graph",displayName:"Interactive graph",widget:tM,getStartUserInput:function(e){return e.graph},getCorrectUserInput:function(e){return e.correct},getUserInputFromSerializedState:function(e){return e.graph}},rM=t=>{const{strings:n}=Dd(),r=e=>{const{choices:n,onChange:r}=t;r(n.map(t=>e.includes(t.content)))},i=t.choices.filter(e=>e.checked).map(e=>e.content),{opener:o,onToggle:s,disabled:a}=t,l={style:{zIndex:"unset"},children:(c=t.choices,c.map(({content:t})=>e.jsx(ke,{value:t,label:e.jsx(wv,{content:t,strings:n,inline:!0})},t))),opener:o,onToggle:s,disabled:a};var c;return t.multipleSelect?e.jsx(rt,{...l,selectedValues:i,onChange:e=>r(e)}):e.jsx(Ie,{...l,selectedValue:i[0],onChange:e=>r([e]),placeholder:t.choices[0].content})},iM=t=>{const n=wt.useId(),r=wt.useId(),{strings:i}=Dd();return e.jsxs(X,{style:oM.switchWrapper,children:[e.jsx(it,{id:n,checked:t.areAnswersHidden,onChange:t.onChange,"aria-labelledby":r}),e.jsx(tt,{id:r,htmlFor:n,tag:"label",children:i.hideAnswersToggleLabel})]})},oM=k.create({switchWrapper:{display:"flex",flexDirection:"row",flexWrap:"wrap-reverse",alignItems:"center",gap:"0.5em",marginTop:"1em"}}),sM={boxShadow:`0 8px 8px ${y.offBlack64}`,zIndex:1e3},aM=t=>{const{selectedAnswers:n,showCorrectness:r,markerRef:i,side:o,onClick:s,style:a,focused:l,hovered:c}=t,u=wt.useId(),{strings:d}=Dd(),h=n.length>1?d.answers({num:n.length}):n[0],p="correct"===r,f="incorrect"===r;return e.jsx(ot,{placement:o,referenceElement:i,modifiers:[{name:"preventOverflow",options:{rootBoundary:"viewport"}}],children:({ref:t,style:n})=>e.jsx(st,{size:"large",kind:"accent",id:u,onClick:p?void 0:s,ref:t,style:[a,n,lM.pill,p&&lM.correct,f&&lM.incorrect,(l||c)&&sM],children:e.jsx(wv,{content:h,strings:d,inline:!0})})})},lM=k.create({correct:{backgroundColor:"#00880b"},incorrect:{backgroundColor:y.offBlack64},pill:{height:"auto"}});function cM(){if("function"!=typeof window.matchMedia)return!0;const e=window.matchMedia("(prefers-reduced-motion: reduce)");return!e||e.matches}const uM=24;class dM extends wt.Component{static contextType=Ld;_icon;_mounted=!1;static defaultProps={selected:[]};componentDidMount(){this._mounted=!0}componentWillUnmount(){this._mounted=!1}renderIcon(){const{selected:t,showCorrectness:n,showSelected:r,showPulsate:i}=this.props,o=r,s=t;let a;let l={size:uM,color:y.white,icon:{path:"",height:1,width:1}};return n?(a=[hM.markerGraded,"correct"===n?hM.markerCorrect:hM.markerIncorrect,o&&hM.markerSelected],l={...l,icon:"correct"===n?hg:wg}):s&&s.length>0?a=[hM.markerFilled,o&&hM.markerSelected]:o?(a=[hM.markerSelected],l={...l,icon:pg,size:8}):i&&(a=[hM.markerPulsateBase,this._mounted&&cM()?i&&hM.markerUnfilledPulsateOnce:i&&hM.markerUnfilledPulsateInfinite]),e.jsx(X,{style:[hM.markerIcon,a],ref:e=>this._icon=e,children:e.jsx(b_,{...l})})}render(){const{showCorrectness:t,selected:n,showAnswer:r,answerSide:i,answerStyles:o,hovered:s,focused:a,label:l}=this.props,c="correct"===t,u=s||a;return e.jsxs(e.Fragment,{children:[e.jsx(X,{style:[hM.marker,u&&!c&&hM.markerActive],"aria-label":c?this.context.strings.correctExcited:l,children:this.renderIcon()}),!!n&&r&&e.jsx(aM,{selectedAnswers:n,showCorrectness:t,side:i,style:o,markerRef:this._icon??void 0,hovered:s,focused:a})]})}}const hM=k.create({marker:{position:"absolute",backgroundColor:y.white,borderRadius:uM,width:uM,height:uM,marginLeft:-12,marginTop:-12,boxShadow:`0 8px 8px ${y.offBlack8}`},markerIcon:{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",width:uM,height:uM,border:`2px solid ${y.offBlack64}`,borderRadius:uM},markerPulsateBase:{animationName:{"0%":{transform:"scale(1)",backgroundColor:y.blue},"100%":{transform:"scale(1.3)",backgroundColor:y.blue}},animationDirection:"alternate",animationDuration:"0.8s",animationTimingFunction:"ease-in",transformOrigin:"50% 50%",animationIterationCount:"0"},markerUnfilledPulsateInfinite:{animationIterationCount:"infinite"},markerUnfilledPulsateOnce:{animationIterationCount:"2"},markerActive:{outline:`2px solid ${y.blue}`,outlineOffset:2},markerSelected:{boxShadow:`0 8px 8px ${y.offBlack8}`,border:`solid 4px ${y.white}`,backgroundColor:y.blue,borderRadius:uM,transform:"rotate(180deg)"},markerFilled:{backgroundColor:"#ECF3FE",border:`4px solid ${y.blue}`},markerGraded:{width:uM,height:uM,justifyContent:"center",alignItems:"center",border:`2px solid ${y.white}`},markerCorrect:{background:"#00880b"},markerIncorrect:{background:y.offBlack64}});function pM(e){return null!=e.answers}class fM extends wt.Component{static contextType=Ld;_markers;_mounted=!1;static pointInTriangle(e,t,n,r){const i=(e,t,n)=>(e.x-n.x)*(t.y-n.y)-(t.x-n.x)*(e.y-n.y),o=i(e,t,n)<0,s=i(e,n,r)<0,a=i(e,r,t)<0;return o===s&&s===a}static imageSideForMarkerPosition(e,t,n){if(n&&"NONE"!==n){if("LEFT"===n&&e>20)return"right";if("RIGHT"===n&&e<80)return"left";if("UP"===n&&t>20)return"bottom";if("DOWN"===n&&t<80)return"top"}if(e<20)return"left";if(e>80)return"right";const r={x:20,y:0},i={x:80,y:0},o={x:80,y:100},s={x:20,y:100},a={x:50,y:50},l=["top","right","bottom","left"],c={top:[r,i,a],right:[a,i,o],bottom:[s,a,o],left:[r,a,s]},u={x:e,y:t};for(const d of l){const e=c[d];if(fM.pointInTriangle(u,...e))return d}return"center"}static navigateToMarkerIndex(e,t,n){const r=t[n],i=t.map((e,t)=>{const n=e.x-r.x,i=e.y-r.y,o=Math.sqrt(n**2+i**2);return{index:t,dist:o,dir:{x:0!==o?n/o:0,y:0!==o?i/o:0}}}).filter(e=>e.index!==n&&"correct"!==t[e.index].showCorrectness).sort((t,n)=>{const r=Math.round(t.dist*(e.x*t.dir.x+e.y*t.dir.y)),i=Math.round(n.dist*(e.x*n.dir.x+e.y*n.dir.y));let o,s;return e.x>0?(o=t.dir.x>0&&0!==r,s=n.dir.x>0&&0!==i):e.x<0?(o=t.dir.x<0&&0!==r,s=n.dir.x<0&&0!==i):e.y>0?(o=t.dir.y>0&&0!==r,s=n.dir.y>0&&0!==i):e.y<0&&(o=t.dir.y<0&&0!==r,s=n.dir.y<0&&0!==i),o!==s?o?-1:1:r-i});return i.length>0?i[0].index:n}constructor(e){super(e),this._markers=[],this.state={activeMarkerIndex:-1,markersInteracted:!1,hideAnswers:!1}}componentDidMount(){this._mounted=!0}componentWillUnmount(){this._mounted=!1}getPromptJSON(){return(e=>{const t=e.markers.map(e=>{const t={label:e.label};return e.answers?.length&&(t.answers=e.answers),t}),n=e.userInput.markers.map(e=>({label:e.label,selected:e.selected}));return{type:"label-image",options:{choices:e.choices,imageUrl:e.imageUrl,imageAlt:e.imageAlt,markers:t},userInput:{markers:n}}})(this.props)}handleMarkerChange(e,t){const{userInput:n,handleUserInput:r}=this.props;r({markers:[...n.markers.slice(0,e),{label:t.label,selected:t.selected},...n.markers.slice(e+1)]})}activateMarker(e,t){this.props.analytics?.onAnalyticsEvent({type:"perseus:label-image:marker-interacted-with",payload:null}),this.props.analytics?.onAnalyticsEvent({type:"perseus:label-image:marker-interacted-with:ti",payload:null});const{activeMarkerIndex:n}=this.state;n!==e&&t?this.setState({activeMarkerIndex:e,markersInteracted:!0}):this.setState({activeMarkerIndex:-1})}handleMarkerKeyDown(e,n){const{markers:r}=this.props;if(r.length<2)return;const i={ArrowUp:{x:0,y:-1},ArrowRight:{x:1,y:0},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0}};if(!(n.key in i))return;const o=i[n.key];n.preventDefault();const s=this._markers[fM.navigateToMarkerIndex(o,r,e)];s&&t.findDOMNode(s).focus()}handleAnswerChoicesChangeForMarker(e,t){const{choices:n,markers:r}=this.props,i=n.filter((e,n)=>t[n]);this.handleMarkerChange(e,{...r[e],selected:i.length>0?i:void 0})}renderMarkers(){const{markers:t,preferredPopoverDirection:n,userInput:r}=this.props,{markersInteracted:i,activeMarkerIndex:o}=this.state,s=this._mounted&&window.matchMedia(Ev.xsOrSmaller.replace("@media ","")).matches,a=this.props.imageWidth/2>this.props.imageHeight;return t.map((t,l)=>{const c=r.markers[l];let u,d;s||a?(u=t.y>50?"top":"bottom",d=t.y>50?"bottom":"top"):(d=fM.imageSideForMarkerPosition(t.x,t.y,n),"center"===d&&(d="bottom"),u={left:"right",top:"bottom",right:"left",bottom:"top"}[d]);const h=function(e,t,n,r){return"all"===r||n?pM(e)?{...t,selected:e.answers}:{...t,selected:void 0}:t}(t,c,this.props.reviewMode,this.props.showSolutions);let p;p=pM(t)?at(h.selected,t.answers):{hasAnswers:!1,isCorrect:!1};const f="all"===this.props.showSolutions||this.props.reviewMode,g=f&&p.isCorrect?"correct":t.showCorrectness,m=f,v=o===l,y=h.selected&&!this.state.hideAnswers&&!v,x={[`margin${d.charAt(0).toUpperCase()+d.slice(1)}`]:10};return e.jsx(X,{style:{position:"absolute",left:`${t.x}%`,top:`${t.y}%`,zIndex:"unset"},children:e.jsx(rM,{choices:this.props.choices.map(e=>({content:e,checked:!!h.selected&&h.selected.includes(e)})),multipleSelect:this.props.multipleAnswers,onChange:e=>{this.props.analytics?.onAnalyticsEvent({type:"perseus:label-image:choiced-interacted-with",payload:null}),this.props.analytics?.onAnalyticsEvent({type:"perseus:label-image:choiced-interacted-with:ti",payload:null}),this.handleAnswerChoicesChangeForMarker(l,e)},onToggle:e=>this.activateMarker(l,e),disabled:m,opener:({opened:n})=>e.jsx(Q,{role:"button","aria-expanded":n,children:({hovered:r,focused:o,pressed:s})=>e.jsx(dM,{label:t.label,showCorrectness:g,showSelected:n,showPulsate:!i,ref:e=>this._markers[l]=e,showAnswer:y,answerSide:u,answerStyles:x,focused:o||s,hovered:r,selected:h.selected})},`marker-${t.x}.${t.y}`)},`answers-${t.x}.${t.y}`)},l)})}renderInstructions(){const{apiOptions:{isMobile:t},choices:n,multipleAnswers:r,hideChoicesFromInstructions:i}=this.props,{strings:o}=this.context,s=t?r?o.tapMultiple:o.tapSingle:r?o.clickMultiple:o.clickSingle,a=o.choices;return e.jsxs("div",{className:f("perseus-label-image-widget-instructions",C(mM.instructions)),children:[e.jsxs("div",{className:C(mM.instructionsCaption),children:[s," ",!i&&a]}),!i&&e.jsx("div",{className:C(mM.instructionsChoices),children:n.map((t,n)=>e.jsx("div",{className:C(mM.instructionsChoice),children:e.jsx(wv,{content:t,strings:o})},n))})]})}getSerializedState(){const{userInput:e,markers:t,...n}=this.props;return{...n,markers:t.map((t,n)=>({...t,selected:e.markers[n].selected}))}}render(){const{imageAlt:t,imageUrl:n,imageWidth:r,imageHeight:i}=this.props,{activeMarkerIndex:o}=this.state;return e.jsxs("div",{children:[this.renderInstructions(),e.jsxs("div",{className:C(mM.markersCanvas),style:{maxWidth:r,maxHeight:i},children:[e.jsx("div",{className:C(mM.imageContainer,-1!==o&&mM.imageInteractionDisabled),children:e.jsx(jd.Consumer,{children:({setAssetStatus:o})=>e.jsx(xm,{alt:t,src:n,width:r,height:i,setAssetStatus:o})})}),this.renderMarkers()]}),e.jsx(iM,{areAnswersHidden:this.state.hideAnswers,onChange:e=>{this.props.analytics?.onAnalyticsEvent({type:"perseus:label-image:toggle-answers-hidden",payload:null}),this.props.analytics?.onAnalyticsEvent({type:"perseus:label-image:toggle-answers-hidden:ti",payload:null}),this.setState({hideAnswers:e})}})]})}}const gM={name:"label-image",displayName:"Label Image",widget:wt.forwardRef((t,n)=>{const r=$d();return e.jsx(fM,{ref:n,analytics:r.analytics,...t})}),isLintable:!0,getStartUserInput:function(e){return{markers:e.markers.map(e=>({label:e.label}))}},getUserInputFromSerializedState:function(e){return{markers:e.markers.map(e=>({label:e.label,selected:e.selected}))}}},mM=k.create({instructions:{paddingBottom:16},instructionsCaption:{fontFamily:"inherit",fontSize:15,fontWeight:"bold",lineHeight:"22px",paddingBottom:16},instructionsChoices:{display:"flex",flexWrap:"wrap",margin:"-8px 0"},instructionsChoice:{display:"flex",alignItems:"center",margin:"8px 0",":not(:last-child)":{"::after":{content:"''",display:"inline-block",position:"relative",width:2,height:2,marginLeft:5,marginRight:5,background:"rgba(33, 36, 44, 0.32)",borderRadius:2}}},markersCanvas:{position:"relative"},imageContainer:{display:"flex"},imageInteractionDisabled:{pointerEvents:"none"}}),vM=(e,t)=>{const n=e.offsetParent();return{top:t.top+n.scrollTop(),left:t.left+n.scrollLeft()}};class yM extends wt.Component{render(){const{layout:t}=this.props,n=C(wM.card,wM.placeholder,"horizontal"===t&&wM.horizontalCard),r={width:this.props.width,height:this.props.height};return null!=this.props.margin&&(r.margin=this.props.margin),e.jsx("li",{className:n,style:r})}}class xM extends wt.Component{static contextType=Ld;animationFrameRequest=null;isMouseMoveUpBound;_mounted;static defaultProps={includePadding:!0,type:"static",linterContext:j};state={startPosition:{left:0,top:0},startMouse:{left:0,top:0},mouse:{left:0,top:0},dragging:!1};componentDidMount(){this._mounted=!0,this.isMouseMoveUpBound=!1,document.addEventListener("touchmove",this.onMouseMove,!!Jd.supportsPassiveEvents()&&{passive:!1})}componentDidUpdate(e){if(this.props.state!==e.state)if("animating"===this.props.state&&this.props.endPosition){const e=this.getCurrentPosition(),t=15*Math.sqrt(Math.sqrt(Math.pow(this.props.endPosition.left-e.left,2)+Math.pow(this.props.endPosition.top-e.top,2)));p(n.findDOMNode(this)).animate(this.props.endPosition,{duration:Math.max(t,1),complete:this.props.onAnimationEnd})}else"static"===this.props.state&&p(n.findDOMNode(this)).finish()}componentWillUnmount(){this._mounted=!1,this.isMouseMoveUpBound&&this.unbindMouseMoveUp(),this.animationFrameRequest&&cancelAnimationFrame(this.animationFrameRequest),document.removeEventListener("touchmove",this.onMouseMove)}getCurrentPosition=()=>({left:this.state.startPosition.left+this.state.mouse.left-this.state.startMouse.left,top:this.state.startPosition.top+this.state.mouse.top-this.state.startMouse.top});bindMouseMoveUp=()=>{this.isMouseMoveUpBound=!0,p(document).on("mousemove",this.onMouseMove),p(document).on("mouseup",this.onMouseUp)};unbindMouseMoveUp=()=>{this.isMouseMoveUpBound=!1,p(document).off("mousemove",this.onMouseMove),p(document).off("mouseup",this.onMouseUp)};onMouseDown=e=>{if("static"!==this.props.state)return;if(0!==e.button&&(null==e.touches||1!==e.touches.length))return;e.preventDefault();const t=Jd.extractPointerLocation(e);this.animationFrameRequest=requestAnimationFrame(()=>{const e=p(n.findDOMNode(this)),r=e.position(),i=vM(e,r);t&&this._mounted&&this.setState({startPosition:i,startMouse:t,mouse:t,dragging:!0},function(){this.bindMouseMoveUp(),this.props.onMouseDown()})})};onMouseMove=e=>{if("dragging"!==this.props.state||!this.state.dragging)return;e.preventDefault();const t=Jd.extractPointerLocation(e);t&&(this.animationFrameRequest=requestAnimationFrame(()=>{this.setState({mouse:t},this.props.onMouseMove)}))};onMouseUp=e=>{if("dragging"!==this.props.state||!this.state.dragging)return;e.preventDefault();Jd.extractPointerLocation(e)&&(this.setState({dragging:!1}),this.unbindMouseMoveUp(),this.props.onMouseUp())};render(){const{includePadding:t,layout:n,state:i}=this.props;let o=C(wM.card,wM.draggable,"horizontal"===n&&wM.horizontalCard,"vertical"===n&&wM.verticalCard,"dragging"===i&&wM.dragging,"disabled"===i&&wM.disabled,!t&&wM.unpaddedCard)+" perseus-sortable-draggable";t||(o+=" perseus-sortable-draggable-unpadded");const s={position:"static"};return"dragging"!==this.props.state&&"animating"!==this.props.state||r.extend(s,{position:"absolute"},this.getCurrentPosition()),this.props.width&&(s.width=this.props.width+1),this.props.height&&(s.height=this.props.height),null!=this.props.margin&&(s.margin=this.props.margin),e.jsx("li",{className:o,style:s,onMouseDown:this.onMouseDown,onTouchStart:this.onMouseDown,onTouchMove:this.onMouseMove,onTouchEnd:this.onMouseUp,onTouchCancel:this.onMouseUp,children:e.jsx(wv,{content:this.props.content,linterContext:N(this.props.linterContext,"draggable"),onRender:this.props.onRender,strings:this.context.strings})})}}class bM extends wt.Component{static defaultProps={layout:"horizontal",padding:!0,disabled:!1,constraints:{},onMeasure:function(){},margin:5,onChange:function(){},linterContext:j,waitForTexRendererToLoad:!0};remeasureItems=r.debounce(()=>{this.setState({items:bM.clearItemMeasurements(this.state.items)})},20);static itemsFromProps(e){const t=e.disabled?"disabled":"static";return e.options.map((e,n)=>({option:e,key:n,state:t,width:0,height:0}))}static clearItemMeasurements(e){return e.map(e=>({...e,width:0,height:0}))}constructor(e){super(e),this.state={items:bM.itemsFromProps(this.props),texRendererLoaded:!1}}UNSAFE_componentWillReceiveProps(e){const t=this.props;r.isEqual(e.options,t.options)?e.layout===t.layout&&e.padding===t.padding&&e.disabled===t.disabled&&r.isEqual(e.constraints,t.constraints)||this.setState({items:bM.clearItemMeasurements(this.state.items)}):this.setState({items:bM.itemsFromProps(e)})}componentDidUpdate(){!this.state.items.length||this.state.items[0].width||this.state.items[0].height||setTimeout(()=>{this.measureItems()},0)}measureItems(){let e=[...this.state.items];const t=r.map(e,function(e){return p(n.findDOMNode(this.refs[e.key]))},this),i=r.invoke(t,"outerWidth"),o=r.invoke(t,"outerHeight"),{constraints:s,layout:a}=this.props;let l=null;s?.width?l=r.max(i.concat(s.width)):"vertical"===a&&(l=r.max(i));let c=null;s?.height?c=r.max(o.concat(s.height)):"horizontal"===a&&(c=r.max(o)),e=r.map(e,function(e,t){return e.width=l||i[t],e.height=c||o[t],e}),this.setState({items:e},()=>{this.props.onMeasure?.({widths:i,heights:o})})}onMouseDown(e){const t=r.map(this.state.items,function(t){return t.key===e&&(t.state="dragging"),t});this.setState({items:t})}moveOptionToIndex(e,t){const{items:n}=this.state;if(t<0||t>n.length)throw new Error(`index ${t} out of bounds`);const i=r.clone(n),o=n.filter(t=>t.option===e)[0];if(null==o)throw new Error(`option ${e} not found`);const s=n.findIndex(e=>e.key===o.key);i.splice(s,1),i.splice(t,0,o),this.setState({items:i},()=>{this.props.onChange?.({})})}onMouseMove(e){const t=p(n.findDOMNode(this.refs[e])),i=p(n.findDOMNode(this)),o=r.clone(this.state.items),s=r.findWhere(this.state.items,{key:e}),a=this.props.margin||0,l=r.indexOf(o,s);let c=0;if(o.splice(l,1),"horizontal"===this.props.layout){const e=t.offset().left-i.offset().left;let n,s=0;r.each(o,function(t){n=t.width,e>s+n/2&&(c+=1),s+=n+a})}else{const e=t.offset().top-i.offset().top;let n,s=0;r.each(o,function(t){n=t.height,e>s+n/2&&(c+=1),s+=n+a})}c!==l&&(o.splice(c,0,s),this.setState({items:o}))}onMouseUp(e){const t=requestAnimationFrame(()=>{const t=r.map(this.state.items,function(t){if(t.key===e){t.state="animating";const r=p(n.findDOMNode(this.refs["placeholder_"+e])),i=r.position(),o=vM(r,i);t.endPosition=o}return t},this);this.setState({items:t},()=>{this.props.onChange?.({})})});this.animationFrameRequest=t}onAnimationEnd(e){const t=r.map(this.state.items,function(t){return t.key===e&&(t.state="static"),t});this.setState({items:t})}getOptions(){return r.pluck(this.state.items,"option")}render(){if(this.props.waitForTexRendererToLoad&&!this.state.texRendererLoaded){const{TeX:t}=zd();return e.jsxs(e.Fragment,{children:[e.jsx(_,{}),e.jsx("div",{style:{display:"none"},children:e.jsx(t,{onRender:()=>this.setState({texRendererLoaded:!0}),children:"1"})})]})}const t=[],{layout:n}=this.props,i=C(wM.sortable)+" perseus-sortable",o=this.props.constraints?.width||"vertical"===n,s=this.props.constraints?.height||"horizontal"===n;return r.each(this.state.items,function(r,i,a){const l=i===a.length-1,c="static"===r.state||"disabled"===r.state;let u;"horizontal"===this.props.layout?u="0 "+this.props.margin+"px 0 0":"vertical"===this.props.layout&&(u="0 0 "+this.props.margin+"px 0"),t.push(e.jsx(xM,{content:r.option,state:r.state,ref:r.key,width:o?r.width:void 0,height:s?r.height:void 0,layout:n,includePadding:this.props.padding,margin:l&&c?0:u,endPosition:r.endPosition,linterContext:N(this.props.linterContext,"sortable"),onRender:this.remeasureItems,onMouseDown:this.onMouseDown.bind(this,r.key),onMouseMove:this.onMouseMove.bind(this,r.key),onMouseUp:this.onMouseUp.bind(this,r.key),onTouchMove:this.onMouseMove.bind(this,r.key),onTouchEnd:this.onMouseUp.bind(this,r.key),onTouchCancel:this.onMouseUp.bind(this,r.key),onAnimationEnd:this.onAnimationEnd.bind(this,r.key)},r.key)),"dragging"!==r.state&&"animating"!==r.state||t.push(e.jsx(yM,{ref:"placeholder_"+r.key,width:r.width,height:r.height,layout:n,margin:l?0:u},"placeholder_"+r.key))},this),e.jsx("ul",{className:i,children:t})}}const wM=k.create({sortable:{boxSizing:"border-box",float:"left",padding:0,margin:0},card:{boxSizing:"border-box",background:"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",minWidth:25,minHeight:44,padding:10,listStyleType:"none",userSelect:"none",touchAction:"none"},placeholder:{background:"#ddd",border:"1px solid #ccc"},draggable:{textAlign:"center"},horizontalCard:{float:"left",cursor:"ew-resize"},verticalCard:{maxWidth:"100%",cursor:"ns-resize"},unpaddedCard:{padding:0},dragging:{background:"#ffedcd",opacity:.8},disabled:{backgroundColor:"inherit",border:"1px solid transparent",cursor:"default"}});class _M extends wt.Component{static contextType=Ld;static defaultProps={labels:["",""],orderMatters:!1,padding:!0,problemNum:0,onChange:function(){},linterContext:j,userInput:{left:[],right:[]}};state={leftHeight:0,rightHeight:0,texRendererLoaded:!1};changeAndTrack=()=>{const e=this._getUserInputFromSortable();this.props.handleUserInput(e),this.props.trackInteraction()};onMeasureLeft=e=>{const t=r.max(e.heights);this.setState({leftHeight:t})};onMeasureRight=e=>{const t=r.max(e.heights);this.setState({rightHeight:t})};_getUserInputFromSortable=()=>this.state.texRendererLoaded?{left:this.refs.left.getOptions(),right:this.refs.right.getOptions()}:{left:[],right:[]};getPromptJSON(){return(e=>{const{userInput:t}=e;return{type:"matcher",options:{labels:e.labels,left:e.left,right:e.right,orderMatters:e.orderMatters},userInput:{left:t.left,right:t.right}}})(this.props)}moveLeftOptionToIndex=(e,t)=>{this.refs.left.moveOptionToIndex(e,t)};moveRightOptionToIndex=(e,t)=>{this.refs.right.moveOptionToIndex(e,t)};render(){if(!this.state.texRendererLoaded){const{TeX:t}=zd();return e.jsxs(e.Fragment,{children:[e.jsx(_,{}),e.jsx("div",{style:{display:"none"},children:e.jsx(t,{onRender:()=>{this.setState({texRendererLoaded:!0})},children:"1"})})]})}const t=r.any(this.props.labels),n={height:r.max([this.state.leftHeight,this.state.rightHeight])},i=this.props.apiOptions.isMobile?8:5;return e.jsx("table",{className:C(CM.widget)+" perseus-widget-matcher",children:e.jsxs("tbody",{children:[t&&e.jsxs("tr",{className:C(CM.row),children:[e.jsx("th",{className:C(CM.column,CM.columnLabel),children:e.jsx(wv,{content:this.props.labels[0]||"...",linterContext:this.props.linterContext,strings:this.context.strings})}),e.jsx("th",{className:C(CM.column,CM.columnRight,CM.columnLabel),children:e.jsx(wv,{content:this.props.labels[1]||"...",linterContext:this.props.linterContext,strings:this.context.strings})})]}),e.jsxs("tr",{className:C(CM.row),children:[e.jsx("td",{className:C(CM.column),children:e.jsx(bM,{options:this.props.userInput.left,layout:"vertical",padding:this.props.padding,disabled:!this.props.orderMatters,constraints:n,onMeasure:this.onMeasureLeft,onChange:this.changeAndTrack,margin:i,linterContext:this.props.linterContext,ref:"left"})}),e.jsx("td",{className:C(CM.column,CM.columnRight),children:e.jsx(bM,{options:this.props.userInput.right,layout:"vertical",padding:this.props.padding,constraints:n,onMeasure:this.onMeasureRight,onChange:this.changeAndTrack,margin:i,linterContext:this.props.linterContext,ref:"right"})})]})]})})}}const SM={name:"matcher",displayName:"Matcher (two column)",widget:_M,isLintable:!0,getStartUserInput:function(e,t){return lt(e,t)},getUserInputFromSerializedState:function(e){return{left:e.left,right:e.right}}},kM="1px solid #444",CM=k.create({widget:{paddingTop:5,maxWidth:"100%",minWidth:"auto"},row:{border:0},column:{padding:0,border:0},columnRight:{borderLeft:kM},columnLabel:{fontWeight:"inherit",borderBottom:kM,padding:"0 5px 5px 5px",textAlign:"center"}}),{assert:MM}=nf,IM={INPUT_MARGIN:3,INPUT_HEIGHT:30,INPUT_WIDTH:40},PM={INPUT_MARGIN:4,INPUT_HEIGHT:36,INPUT_WIDTH:64};function TM(e,t){return[""+e,""+t]}const EM=function(){return TM(0,0)},jM=function(e){const t=function(e){return MM(Array.isArray(e)&&2===e.length),+e[0]}(e),n=function(e){return MM(Array.isArray(e)&&2===e.length),+e[1]}(e);return"answer"+t+","+n};class RM extends wt.Component{static contextType=Ld;cursorPosition;static defaultProps={matrixBoardSize:[3,3],prefix:"",suffix:"",apiOptions:Bm.defaults,linterContext:j,userInput:{answers:[[]]}};state={cursorPosition:[0,0],enterTheMatrix:0};componentDidMount(){this.cursorPosition=[0,0]}getInputPaths=()=>{const e=[],t=this.props.matrixBoardSize[0],n=this.props.matrixBoardSize[1];for(let r=0;r<t;r++)for(let t=0;t<n;t++){const n=TM(r,t);e.push(n)}return e};_handleFocus=(e,t)=>{this.props.onFocus(TM(e,t))};_handleBlur=(e,t)=>{this.props.onBlur(TM(e,t))};focus=()=>(this.focusInputPath(EM()),!0);focusInputPath=e=>{const t=jM(e);this.refs[t].focus()};blurInputPath=e=>{0===e.length&&(e=EM());const t=jM(e);this.refs[t].blur()};getDOMNodeForPath(e){const t=jM(e);return n.findDOMNode(this.refs[t])}handleKeyDown=(e,t,n)=>{const r=this.props.matrixBoardSize[0],i=this.props.matrixBoardSize[1];let o=null;const s=this.refs[jM(TM(e,t))],a=s.getStringValue(),l=s.getSelectionStart(),c=s.getSelectionEnd();let u=null;if("ArrowUp"===n.key&&e>0?u=TM(e-1,t):"ArrowDown"===n.key&&e+1<r?u=TM(e+1,t):"ArrowLeft"===n.key&&t>0?0===l&&0===c&&(u=TM(e,t-1)):"ArrowRight"===n.key&&t+1<i?l===a.length&&(u=TM(e,t+1)):"Enter"===n.key?o=this.state.enterTheMatrix+1:"Escape"===n.key&&(o=0),u){n.preventDefault();const e=this.refs[jM(u)],t=2*e.getStringValue().length;e.focus(),"ArrowRight"===n.key?e.setSelectionRange(0,0):e.setSelectionRange(t,t)}null!=o&&this.setState({enterTheMatrix:o})};onValueChange=(e,t,n,r)=>{const i=this.props.userInput.answers.map(e=>[...e]);i[e]||(i[e]=[]),i[e][t]=n,this.props.handleUserInput({answers:i},r),this.props.trackInteraction()};getPromptJSON(){return{type:"matrix",options:{height:(e=this.props).matrixBoardSize[0],width:e.matrixBoardSize[1]},userInput:{answerRows:e.userInput.answers}};var e}getSerializedState(){const{userInput:e,...t}=this.props;return{...t,answers:e.answers,cursorPosition:this.state.cursorPosition}}render(){let t;t=this.props.apiOptions.customKeypad?PM:IM;const{INPUT_MARGIN:n,INPUT_HEIGHT:i,INPUT_WIDTH:o}=t,s=ct(this.props.userInput.answers),a=this.props.matrixBoardSize[0],l=this.props.matrixBoardSize[1],c=this.state.cursorPosition[0],u=this.state.cursorPosition[1],d=Math.max(c,s[0]-1),h=Math.max(u,s[1]-1),p=(d+1)*(i+2*n),g=(h+1)*(o+2*n),m=f({"perseus-matrix":!0,"static-mode":this.props.static,"the-matrix":this.state.enterTheMatrix>=5});return e.jsxs("div",{className:m,children:[this.props.prefix&&e.jsx("div",{className:"matrix-prefix",children:e.jsx(wv,{content:this.props.prefix,linterContext:this.props.linterContext,strings:this.context.strings})}),e.jsxs("div",{className:"matrix-input",children:[e.jsx("div",{className:"matrix-bracket bracket-left",style:{height:p}}),e.jsx("div",{className:"matrix-bracket bracket-right",style:{height:p,left:g}}),r(a).times(t=>{const s=this.props.userInput.answers[t];return e.jsx("div",{className:"matrix-row",children:r(l).times(r=>{const a=t>d||r>h,l={className:a?"outside":"inside",ref:jM(TM(t,r)),value:s?s[r]:null,style:{height:i,width:o,margin:n},disabled:this.props.apiOptions.readOnly,onFocus:()=>{this.cursorPosition=[t,r],this.setState({cursorPosition:[t,r]}),this._handleFocus(t,r)},onBlur:()=>{t===this.cursorPosition[0]&&r===this.cursorPosition[1]&&this.setState({cursorPosition:[0,0]}),this._handleBlur(t,r)},onKeyDown:e=>{this.handleKeyDown(t,r,e)},onChange:(e,n)=>{this.onValueChange(t,r,e,n)}};let c;if(this.props.apiOptions.customKeypad){const t={margin:n,minWidth:o,minHeight:i,boxSizing:"border-box",backgroundColor:a?"#f3f3f3":"#fff"};c=e.jsx(iy,{...l,style:t,scrollable:!0,keypadElement:this.props.keypadElement})}else{const t={...l,style:k.create({input:{...l.style,display:"inline-block",padding:0,backgroundColor:a?"#f3f3f3":"#fff"}}).input};c=e.jsx(sy,{...t})}return e.jsx("span",{className:"matrix-input-field",children:c},r)})},t)})]}),this.props.suffix&&e.jsx("div",{className:"matrix-suffix",children:e.jsx(wv,{content:this.props.suffix,linterContext:this.props.linterContext,strings:this.context.strings})})]})}}const AM={name:"matrix",displayName:"Matrix",hidden:!0,widget:RM,isLintable:!0,getStartUserInput:function(){return{answers:[[]]}},getCorrectUserInput:function(e){return{answers:e.answers.map(e=>e.map(e=>String(e)))}},getUserInputFromSerializedState:function(e){return{answers:e.answers}}},NM={url:null,top:0,left:0};class LM extends wt.Component{static defaultProps={box:[480,480],image:NM,showProtractor:!0,protractorX:7.5,protractorY:.5,showRuler:!1,rulerLabel:"",rulerTicks:10,rulerPixels:40,rulerLength:10};isWidget=!0;state={};ruler;protractor;componentDidMount(){this.setupGraphie()}componentDidUpdate(e){r.any(["box","showProtractor","showRuler","rulerLabel","rulerTicks","rulerPixels","rulerLength"],t=>e[t]!==this.props[t],this)&&this.setupGraphie()}setupGraphie(){const e=n.findDOMNode(this.refs.graphieDiv);p(e).empty();const t=this.graphie=bf.createGraphie(e),r=[40,40],i=[[0,this.props.box[0]/r[0]],[0,this.props.box[1]/r[1]]];t.init({range:i,scale:r}),t.addMouseLayer({allowScratchpad:!0,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),this.protractor&&this.protractor.remove(),this.props.showProtractor&&(this.protractor=t.protractor([this.props.protractorX,this.props.protractorY])),this.ruler&&this.ruler.remove(),this.props.showRuler&&(this.ruler=t.ruler({center:[(i[0][0]+i[0][1])/2,(i[1][0]+i[1][1])/2],label:this.props.rulerLabel,pixelsPerUnit:this.props.rulerPixels,ticksPerUnit:this.props.rulerTicks,units:this.props.rulerLength}))}getPromptJSON(){return rb("measurer")}render(){const t=r.extend({},NM,this.props.image);return e.jsxs("div",{className:"perseus-widget perseus-widget-measurer graphie-container blank-background",style:{width:this.props.box[0],height:this.props.box[1]},children:[t.url&&e.jsx("div",{style:{position:"relative",top:t.top,left:t.left},children:e.jsx(xm,{src:t.url})}),e.jsx("div",{className:"graphie",ref:"graphieDiv"})]})}}const OM={name:"measurer",displayName:"Measurer",hidden:!0,widget:LM,version:ut.version};function DM(e,t){const n=new Path2D;e.lineWidth=WM.lineWidth,e.strokeStyle=WM.fgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n)}const FM={text:function(e,t){null!==t.value&&(e.fillStyle=WM.fgColor,e.font=WM.font,e.fillText(t.value,t.pos[0]-WM.fontSizePx/2+1,t.pos[1]+WM.fontSizePx/2))},"line:single":DM,"line:double":function(e,t){let n=new Path2D;e.lineWidth=5*WM.lineWidth,e.strokeStyle=WM.fgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n),n=new Path2D,e.lineWidth=3*WM.lineWidth,e.strokeStyle=WM.bgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n)},"line:triple":function(e,t){let n=new Path2D;e.lineWidth=7*WM.lineWidth,e.strokeStyle=WM.fgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n),n=new Path2D,e.lineWidth=5*WM.lineWidth,e.strokeStyle=WM.bgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n),DM(e,t)}};const zM={"line:single":0,"line:double":0,"line:triple":0,text:1};function BM(e,t){return zM[e.type]-zM[t.type]}function $M(e,t){t.sort(BM).forEach(function(e){return function(t){FM[t.type](e,t)}}(e))}const WM={bgColor:"rgb(255, 255, 255)",fgColor:"rgb(0, 0, 0)",fontSizePx:12,lineWidth:1,font:"12px sans"};function UM(e,t,n,r){let i=e.symbol;if("C"===i&&1!==Object.keys(t).length&&(i=null),"1,0"===e.idx){const t=[0,0];return e.pos=t,e.baseAngle=-30+r,{type:"text",value:i,pos:t,idx:e.idx}}const o=t[e.connections.find(function(e){return t[e].pos})],s=o.connections.indexOf(e.idx);let a=60,l=120;4===o.connections.length?(l=90,a=90):(n.find(t=>"triple"===t.bondType&&t.to===e.idx)||n.find(e=>"triple"===e.bondType&&e.to===o.idx))&&(l=0,a=0);let c=0;const u=o.idx.split(":"),d=u[u.length-1].split(",")[0];c=parseInt(d)%2!=0?o.baseAngle-(a-l*s):o.baseAngle+(a-l*s);const h=function(e,t,n){const r=e[0],i=e[1];return[r+Math.cos(2*t*Math.PI/360)*n,i+-1*Math.sin(2*t*Math.PI/360)*n]}(o.pos,c,30);return e.pos=h,e.baseAngle=c,{type:"text",value:i,pos:h,idx:e.idx}}function HM(e){return e.join(":")}function qM(e,t,n){if(null===n)return[e,t];if("atom"===n.type){const r=HM(n.idx);e[r]={idx:r,symbol:n.symbol,connections:[]},n.bonds&&n.bonds.forEach(function(n){const i=HM(n.to.idx);e[r].connections.push(i),t.push({from:r,to:i,bondType:n.bondType}),qM(e,t,n.to),e[i].connections.push(r)})}return[e,t]}function VM(e,t,n,r,i){if(0===t.length)return e;const o=t.shift(),s=n[o];return s.connections.forEach(function(e){n[e].pos||t.push(e)}),VM(e.concat(UM(s,n,r,i)),t,n,r,i)}function GM(e,t,n){return 0===n.length?e:GM(e.concat(function(e,t){const n=function(e,t){let n=[e.pos[0],e.pos[1]],r=[t.pos[0],t.pos[1]];return"C"!==e.symbol&&(n=[t.pos[0]-.75*(t.pos[0]-e.pos[0]),t.pos[1]-.75*(t.pos[1]-e.pos[1])]),"C"!==t.symbol&&(r=[e.pos[0]-.75*(e.pos[0]-t.pos[0]),e.pos[1]-.75*(e.pos[1]-t.pos[1])]),[n,r]}(t[e.from],t[e.to]);return{type:"line:"+e.bondType,startPos:n[0],endPos:n[1]}}(n[0],t)),t,n.slice(1))}const YM={layout:function(e,t){const n=qM({},[],e),r=n[0],i=n[1];return GM(VM([],["1,0"],r,i,t),r,i)}},XM=new RegExp("^[A-Za-z\\[\\]()=#+-]*$"),KM=new RegExp("^(Cl|Br|[CONPSFBI]|\\[)");function QM(e){this.message=e}function ZM(e,t,n){const r=t[0],i=t.slice(1);let o;o=Array.isArray(e)?[...e]:{...e||{}};let s=n;return i.length>0&&(s=ZM(o[r],i,n)),o[r]=s,o}function JM(e,t){if(0===t.length)return e;if(""===e)throw new QM("Mismatched parentheses");const n=e[0],r=e.slice(1);return JM(r,"("===n?t.concat(n):")"===n?t.slice(1):t)}function eI(e,t){const n=e[0],r=e.slice(1);if("("===n){let e={...t,parens:t.parens+"("};e=function(e,t){const n=t.reduce(function(e,t){return e[t]},e);return ZM(e,t,n+1)}(t,["idx",t.idx.length-1,1]);let n=-1;t.idx[t.idx.length-1][0]%2==0&&(n=0);const i=nI(r,{...e,idx:e.idx.concat([[n,0]]),parens:e.parens.concat("(")}),o=nI(JM(r,["("]),e);return[i].concat(o)}if(")"===n){if("("!==t.parens[t.parens.length-1])throw new QM("Mismatched parentheses");return null}throw new QM("Invalid bare character: "+n)}function tI(e,t){const n=function(e){let t=null,n=null;if("["===e[0]){const r=e.indexOf("]");if(-1===r)return["",e];t=e.slice(1,r),n=e.slice(r+1)}else t=KM.exec(e)[1],n=e.slice(t.length);return[t,n]}(e),r=n[0];if(""===r)return["error","Unable to parse bracketed atom."];const i=n[1],o=ZM(t,["idx",t.idx.length-1],[1+t.idx[t.idx.length-1][0],0]);let s=nI(i,ZM(o,["bond","bondType"],"single"));!Array.isArray(s)&&s&&(s=[s]);const a={type:"atom",symbol:r,bonds:s,idx:o.idx};return t.bond?{type:"bond",bondType:t.bond.bondType,to:a}:a}function nI(e,t){if(!function(e){return XM.test(e)}(e))throw new QM("Invalid input.");return e&&0!==e.length?(n=e,KM.test(n)?tI(e,t||{idx:[[0,0]],parens:[],stack:[],bondModifiers:[]}):function(e){return"="===e||"#"===e}(e[0])?function(e,t){const n=e[0],r=e.slice(1);if("="===n)return nI(r,ZM(t,["bond","bondType"],"double"));if("#"===n)return nI(r,ZM(t,["bond","bondType"],"triple"));throw new QM("Invalid character: "+n)}(e,t):eI(e,t)):null;var n}const rI=nI,iI=QM,{layout:oI}=YM,sI=rI,aI=iI;class lI extends wt.Component{static contextType=Ld;state={parsedSmiles:null,error:null};UNSAFE_componentWillMount(){this.stateFromSmiles(this.props.smiles)}componentDidMount(){this.canvasRender()}UNSAFE_componentWillReceiveProps(e){this.stateFromSmiles(e.smiles)}componentDidUpdate(){this.canvasRender()}stateFromSmiles=e=>{try{this.setState({parsedSmiles:sI(e),error:null})}catch(t){if(!(t instanceof aI))throw t;this.setState({error:t.message})}};setCanvasBounds=(e,t)=>{const n=Math.max(...t.map(e=>e.pos?e.pos[0]:-1/0)),r=Math.max(...t.map(e=>e.pos?e.pos[1]:-1/0)),i=Math.min(...t.map(e=>e.pos?e.pos[0]:1/0)),o=Math.min(...t.map(e=>e.pos?e.pos[1]:1/0)),s=n-i+60,a=r-o+60;return e.width=s,e.height=a,[30-i,30-o]};canvasRender=()=>{if(this.state.error||!this.state.parsedSmiles)return;const e=oI(this.state.parsedSmiles,this.props.rotationAngle),t=this.refs.canvas,n=this.setCanvasBounds(t,e),r=t.getContext("2d");r.clearRect(0,0,t.width,t.height),r.save(),r.translate(n[0],n[1]),$M(r,e),r.restore()};render(){let t=e.jsx("canvas",{className:"molecule-canvas",id:this.props.widgetId+"-molecule",ref:"canvas",children:this.context.strings.molecularDrawing({content:this.props.smiles||""})});return this.state.error&&(t=e.jsx("div",{className:"error",children:this.state.error})),e.jsx("div",{className:"molecule-canvas",children:t})}}class cI extends wt.Component{static defaultProps={rotationAngle:0};isWidget=!0;render(){return e.jsx(lI,{widgetId:this.props.widgetId,smiles:this.props.smiles,rotationAngle:this.props.rotationAngle})}}const uI={name:"molecule-renderer",displayName:"Molecule renderer",hidden:!0,widget:cI},dI=dm.MovablePoint,hI=dm.Line,{assert:pI}=nf,fI={eq:"eq",ge:"le",gt:"lt",le:"ge",lt:"gt"},gI={eq:"eq",ge:"gt",gt:"ge",le:"lt",lt:"le"};function mI(e,t){return 1===t?""+e:`\\dfrac{${e}}{${t}}`}function vI(e,t){if(e<0)return"-"+vI(-e,t);const n=Math.floor(e/t);return 0===n?mI(e,t):e-n*t===0?""+n:n+mI(e-n*t,t)}const yI=(e,t,n,r,i)=>{if(r=r||n,"decimal"===t||"decimal ticks"===t)return e.label([n,-.53],Math.round(100*r)/100,"center");if("improper"===t){const t=Np.toFraction(r);return e.label([n,-.17],mI(t[0],t[1]),"below")}if("mixed"===t){const t=Np.toFraction(r);return e.label([n,-.17],vI(t[0],t[1]),"below")}if("non-reduced"===t){const t=Np.toFraction(r);return e.label([n,-.17],function(e,t,n){return mI(e*Math.floor(n/t),n)}(t[0],t[1],i),"below")}},xI=dm.createSimpleClass((e,t)=>{if(!r.isFinite(t.tickStep)||t.tickStep<=0)return[];const n=[],{range:i,labelRange:o,labelStyle:s,labelTicks:a,tickStep:l,numDivisions:c}=t,u=null==o[0]?i[0]:o[0],d=null==o[1]?i[1]:o[1];let h;if("non-reduced"===s){const e=[u,d];for(let r=0;r<=c;r++){const t=i[0]+r*l;e.push(t)}const t=e=>Uh.toFraction(e)[1],n=r.map(e,t);h=r.reduce(n,(e,t)=>Np.getLCM(e,t))}else h=void 0;const p={stroke:af.BLUE,strokeWidth:3.5},f={color:af.BLUE},g=[...Array(Math.round(c)).keys()].map(e=>i[0]+e*l);return[...new Set([...g,u,d,...i])].sort((e,t)=>e-t).forEach(t=>{const r=t===u||t===d,i=r?p:null,o=r?f:null;e.style(i,()=>{n.push(e.line([t,-.2],[t,.2]))}),(a||r||"decimal ticks"===s)&&e.style(o,()=>{n.push(yI(e,s,t,t,h))})}),n});class bI extends wt.Component{static contextType=Ld;static defaultProps={range:[0,10],labelStyle:"decimal",labelRange:[null,null],divisionRange:[1,12],labelTicks:!0,isTickCtrl:!1,isInequality:!1,snapDivisions:2,showTooltips:!1,apiOptions:Bm.defaults};state={numDivisionsEmpty:!1};getIsTickCtrl(){return this.props.isTickCtrl??bI.defaultProps.isTickCtrl}getSnapDivisions(){return this.props.snapDivisions??bI.defaultProps.snapDivisions}isValid=()=>{const e=this.props.range;let t=this.props.userInput.numLinePosition;const n=this.props.divisionRange;return t=null==t?e[0]:t,e[0]<e[1]&&Uh.sign(t-e[0])>=0&&Uh.sign(t-e[1])<=0&&n[0]<n[1]&&0<this.props.userInput.numDivisions&&0<this.getSnapDivisions()};onNumDivisionsChange=(e,t)=>{const n=this.props.divisionRange.slice(),r=this.props.range[1]-this.props.range[0];if(e=(e=Math.round(e))<0?-1*e:e){const i={...this.props,tickStep:r/e},o=this.snapNumLinePosition(i,this.props.userInput.numLinePosition);this.setState({numDivisionsEmpty:!1},()=>{this.props.onChange({divisionRange:n},t),this.props.handleUserInput({...this.props.userInput,numDivisions:e,numLinePosition:o},t)})}else this.setState({numDivisionsEmpty:!0},t)};_handleTickCtrlFocus=()=>{this.props.onFocus(["tick-ctrl"])};_handleTickCtrlBlur=()=>{this.props.onBlur(["tick-ctrl"])};focus(){return!!this.getIsTickCtrl()&&(this.refs["tick-ctrl"].focus(),!0)}focusInputPath=e=>{1===e.length&&this.refs[e[0]].focus()};blurInputPath=e=>{1===e.length&&this.refs[e[0]].blur()};getInputPaths=()=>this.getIsTickCtrl()?[["tick-ctrl"]]:[];getDOMNodeForPath(e){return 1===e?.length?n.findDOMNode(this.refs[e[0]]):null}_renderGraphie=()=>{const t=this.props.range,n=t[1]-t[0],r={range:this.props.range,isTickCtrl:this.getIsTickCtrl()},i={...this.props,tickStep:n/this.props.userInput.numDivisions};return e.jsxs(dm,{ref:"graphie",box:[this.props.apiOptions.isMobile?288:460,80],options:r,onMouseDown:e=>{this.refs.graphie.movables.numberLinePoint.grab(e)},setup:this._setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:this.props.apiOptions.isMobile,children:[e.jsx(xI,{range:i.range,labelTicks:i.labelTicks,labelStyle:i.labelStyle,labelRange:i.labelRange,tickStep:i.tickStep,numDivisions:i.userInput.numDivisions,isMobile:i.apiOptions.isMobile}),this._renderInequality(i),this._renderNumberLinePoint(i)]},this.props.labelStyle)};snapNumLinePosition=(e,t)=>{const n=e.range[0],i=e.range[1],o=e.tickStep/this.getSnapDivisions();let s=((e,t,n)=>Math.min(Math.max(e,t),n))(t,n,i);return s=n+Uh.roundTo(s-n,o),pI(r.isFinite(s)),s};movePosition=e=>{this.props.handleUserInput({...this.props.userInput,numLinePosition:e}),this.props.trackInteraction()};_renderNumberLinePoint=t=>{const n=r(["lt","gt"]).contains(t.userInput.rel);let i;i=n?af._BACKGROUND:t.static?af.BLUE:af.GREEN;const o={fill:i,stroke:t.static?af.BLUE:af.GREEN,"stroke-width":n?3:1},s={fill:n?af._BACKGROUND:af.GREEN,"stroke-width":n?3:1},a=t.isInequality?{stroke:af.GREEN,"fill-opacity":n?0:1}:{};return e.jsx(dI,{ref:"numberLinePoint",pointSize:6,coord:[t.userInput.numLinePosition,0],constraints:[(e,t)=>[e[0],t[1]],(e,n)=>[this.snapNumLinePosition(t,e[0]),e[1]]],normalStyle:o,highlightStyle:s,onMove:e=>{this.movePosition(e[0])},isMobile:this.props.apiOptions.isMobile,mobileStyleOverride:a,showTooltips:this.props.showTooltips,xOnlyTooltip:!0})};handleReverse=()=>{const e=fI[this.props.userInput.rel];this.props.handleUserInput({...this.props.userInput,rel:e})};handleToggleStrict=()=>{const e=gI[this.props.userInput.rel];this.props.handleUserInput({...this.props.userInput,rel:e})};_getInequalityEndpoint(e){const t=r(["ge","gt"]).contains(this.props.userInput.rel),n=e.range,i=30*((n[1]-n[0])/400),o=n[0]-i,s=n[1]+i;return t?[s,0]:[o,0]}_renderInequality(t){if(t.isInequality){const n=this._getInequalityEndpoint(t),r={arrows:"->",stroke:this.props.apiOptions.isMobile?af.GREEN:af.BLUE,strokeWidth:3.5};return e.jsx(hI,{start:[t.userInput.numLinePosition,0],end:n,style:r})}return null}_setupGraphie=(e,t)=>{if(!this.isValid())return;const n=this.props.apiOptions.isMobile?228:400,r=t.range,i=(r[1]-r[0])/n,o=30*i,s=r[0]-o,a=r[1]+o,l="improper"===this.props.labelStyle||"mixed"===this.props.labelStyle||"non-reduced"===this.props.labelStyle?-1.5:-1;e.init({range:[[s,a],[l,1]],scale:[1/i,40],isMobile:this.props.apiOptions.isMobile});const c=(r[0]+r[1])/2;e.line([c,0],[a,0],{arrows:"->"}),e.line([c,0],[s,0],{arrows:"->"})};getPromptJSON(){return(e=>{const{userInput:t}=e;return{type:"number-line",options:{range:e.range,snapDivisions:e.snapDivisions},userInput:{numLinePosition:t.numLinePosition,numDivisions:t.numDivisions,rel:t.rel}}})(this.props)}getSerializedState(){const e=this.props;return{alignment:e.alignment,static:e.static,range:e.range,labelRange:e.labelRange,labelStyle:e.labelStyle,labelTicks:e.labelTicks,divisionRange:e.divisionRange,snapDivisions:e.snapDivisions,isInequality:e.isInequality,showTooltips:e.showTooltips,isTickCtrl:e.isTickCtrl,numDivisions:e.userInput.numDivisions,numLinePosition:e.userInput.numLinePosition,rel:"ge"}}render(){const{strings:t}=this.context,n=this.props.divisionRange,r=n[0]+"–"+n[1],i=this.props.userInput.numDivisions<n[0]||this.props.userInput.numDivisions>n[1],o=e.jsxs("div",{children:[e.jsx("input",{type:"button",className:"simple-button",value:t.switchDirection,onClick:this.handleReverse}),e.jsx("input",{type:"button",className:"simple-button",value:["le","ge"].includes(this.props.userInput.rel)?t.circleOpen:t.circleFilled,onClick:this.handleToggleStrict})]});let s;if(this.getIsTickCtrl()){let r;r=this.props.apiOptions.customKeypad?iy:C_,s=e.jsxs("label",{children:[t.numDivisions," ",e.jsx(r,{ref:"tick-ctrl",value:this.state.numDivisionsEmpty?null:this.props.userInput.numDivisions||n[0],checkValidity:e=>e>=n[0]&&e<=n[1],onChange:this.onNumDivisionsChange,onFocus:this._handleTickCtrlFocus,onBlur:this._handleTickCtrlBlur,useArrowKeys:!0,keypadElement:this.props.keypadElement})]})}return e.jsxs("div",{className:"perseus-widget perseus-widget-interactive-number-line",children:[s,this.isValid()?this.getIsTickCtrl()&&i?e.jsx("div",{className:"perseus-error",children:t.divisions({divRangeString:r})}):this._renderGraphie():e.jsx("div",{className:"perseus-error",children:"Invalid number line configuration."}),!this.props.static&&this.props.isInequality&&o]})}}function wI(e){const t=e.range[1]-e.range[0];let n;return n=null!=e.numDivisions?e.numDivisions:null!=e.tickStep?t/e.tickStep:void 0,n}const _I={name:"number-line",displayName:"Number line",widget:bI,getCorrectUserInput:function(e){const t=null!=e.correctX?e.correctX:e.range[0];return{numDivisions:wI(e),numLinePosition:t,rel:e.isInequality&&e.correctRel||"eq"}},getStartUserInput:function(e){const t=null!=e.initialX?e.initialX:e.range[0];return{numDivisions:wI(e),numLinePosition:t,rel:e.isInequality?"ge":"eq"}},getUserInputFromSerializedState:function(e){return{numDivisions:e.numDivisions,numLinePosition:e.numLinePosition,rel:"eq"}}};class SI extends wt.Component{render(){return e.jsx("div",{className:"card-wrap",style:{width:this.props.width},children:e.jsx("div",{className:"card placeholder",style:{height:this.props.width}})})}}class kI extends wt.Component{render(){return e.jsx("div",{className:"card-wrap",children:e.jsx("div",{className:"card drag-hint"})})}}class CI extends wt.Component{static contextType=Ld;mouseMoveUpBound;static defaultProps={stack:!1,animating:!1,linterContext:j};state={dragging:!1};componentDidMount(){this.mouseMoveUpBound=!1,document.addEventListener("touchmove",this.onMouseMove,!!Jd.supportsPassiveEvents()&&{passive:!1})}shouldComponentUpdate(e,t){return this.props.floating||e.floating||this.props.content!==e.content||this.props.fakeRef!==e.fakeRef}componentDidUpdate(e,t){if(this.props.animating&&!e.animating&&this.props.animateTo&&this.props.startOffset){const e=15*Math.sqrt(Math.sqrt(Math.pow(this.props.animateTo.left-this.props.startOffset.left,2)+Math.pow(this.props.animateTo.top-this.props.startOffset.top,2)));p(n.findDOMNode(this)).animate(this.props.animateTo,Math.max(e,1),this.props.onAnimationEnd)}}componentWillUnmount(){this.mouseMoveUpBound&&(th("Removing an element with bound event handlers.",h.Internal),this.unbindMouseMoveUp(),Jd.resetTouchHandlers()),document.removeEventListener("touchmove",this.onMouseMove)}bindMouseMoveUp=()=>{this.mouseMoveUpBound=!0,p(document).on("mousemove",this.onMouseMove),p(document).on("mouseup",this.onMouseUp)};unbindMouseMoveUp=()=>{this.mouseMoveUpBound=!1,p(document).off("mousemove",this.onMouseMove),p(document).off("mouseup",this.onMouseUp)};onMouseDown=e=>{e.preventDefault();const t=Jd.extractPointerLocation(e);t&&(this.setState({dragging:!0}),this.bindMouseMoveUp(),this.props.onMouseDown?.(t,this))};onMouseMove=e=>{if(!this.state.dragging)return;e.preventDefault();const t=Jd.extractPointerLocation(e);t&&this.props.onMouseMove?.(t)};onMouseUp=e=>{e.preventDefault();const t=Jd.extractPointerLocation(e);t&&(this.setState({dragging:!1}),this.unbindMouseMoveUp(),this.props.onMouseUp?.(t))};render(){let t={};this.props.floating&&(t={position:"absolute",left:this.props.startOffset?.left,top:this.props.startOffset?.top}),this.props.width&&(t.width=this.props.width);const n=["card"];this.props.stack&&n.push("stack"),this.props.floating&&!this.props.animating&&this.props.mouse&&this.props.startMouse&&(n.push("dragging"),t.left+=this.props.mouse.left-this.props.startMouse.left,t.top+=this.props.mouse.top-this.props.startMouse.top);const r={content:this.props.content},i=this.props.animating?p.noop:this.onMouseDown;return e.jsx("div",{className:"card-wrap",style:t,onMouseDown:i,onTouchStart:i,onTouchEnd:this.onMouseUp,onTouchCancel:this.onMouseUp,children:e.jsx("div",{className:n.join(" "),children:e.jsx(wv,{...r,linterContext:this.props.linterContext,strings:this.context.strings})})})}}class MI extends wt.Component{static defaultProps={options:[],height:"normal",layout:"horizontal",linterContext:j,userInput:{current:[]}};state={dragging:!1,placeholderIndex:null,dragKey:null,animating:!1,dragContent:null,dragWidth:null,dragHeight:null,offsetPos:null,animateTo:null,grabPos:null};onClick=(e,t,r,i)=>{const o=p(n.findDOMNode(i)),s=this.props.userInput.current.slice();let a,l=null;"current"===e?(s.splice(t,1),a=this.props.userInput.current[t],l=t):"bank"===e&&(a=this.props.options[t]),this.props.handleUserInput({current:s}),this.setState({dragging:!0,placeholderIndex:l,dragKey:a.key,dragContent:a.content,dragWidth:o.width(),dragHeight:o.height(),grabPos:r,mousePos:r,offsetPos:o.position()})};onRelease=e=>{const t=this.refs.dragging;if(null==t)return;const i=this.isCardInBank(t),o=this.state.placeholderIndex||0,s=()=>{const e=this.props.userInput.current.slice();if(!i){const t=this.state.dragContent;if("string"==typeof t){const n={content:t,key:r.uniqueId("perseus_draggable_card_"),width:this.state.dragWidth};e.splice(o,0,n.content)}}this.props.handleUserInput({current:e}),this.setState({dragging:!1,placeholderIndex:null,animating:!1}),this.props.trackInteraction()},a=p(n.findDOMNode(t)).position();let l=null;i?this.props.options.forEach((e,t)=>{if(e.content===this.state.dragContent){const e=n.findDOMNode(this.refs["bank"+t]);l=p(e).position()}}):null!=this.refs.placeholder&&(l=p(n.findDOMNode(this.refs.placeholder)).position()),null==l?s():this.setState({offsetPos:a,animateTo:l,onAnimationEnd:s,animating:!0,dragging:!1})};onMouseMove=e=>{const t=this.refs.dragging;if(null==t)return;let n;n=this.isCardInBank(t)?null:this.findCorrectIndex(t,this.props.userInput.current),this.setState({mousePos:e,placeholderIndex:n})};findCorrectIndex=(e,t)=>{const r="horizontal"===this.props.layout,i=p(n.findDOMNode(this.refs.dragList)),o=i.offset().left,s=i.offset().top,a=p(n.findDOMNode(e)).offset().left-o,l=p(n.findDOMNode(e)).offset().top-s;let c=0,u=0,d=0;return r?t.forEach((e,t)=>{const r=n.findDOMNode(this.refs["sortable"+t]),i=p(r).outerWidth(!0);a>u+i/2&&(c+=1),u+=i}):t.forEach((e,t)=>{const r=n.findDOMNode(this.refs["sortable"+t]),i=p(r).outerHeight(!0);l>d+i/2&&(c+=1),d+=i}),c};isCardInBank=e=>{if(null==e)return!1;const t="horizontal"===this.props.layout,r=p(n.findDOMNode(e)),i=p(n.findDOMNode(this.refs.bank)),o=r.offset(),s=i.offset(),a=r.outerHeight(!0),l=i.outerHeight(!0),c=i.outerWidth(!0),u=r.outerWidth(!0);return t?o.top+a/2<s.top+l:o.left+u/2<s.left+c};setListValues=e=>{this.props.handleUserInput({current:e})};getPromptJSON(){return{type:"orderer",options:{options:(e=this.props).options.map(e=>e.content)},userInput:{values:e.userInput.current}};var e}getSerializedState(){const{userInput:e,...t}=this.props;return{...t,current:e.current.map(e=>({content:e}))}}render(){const t=this.state.dragging&&e.jsx(CI,{ref:"dragging",floating:!0,content:this.state.dragContent,startOffset:this.state.offsetPos,startMouse:this.state.grabPos,mouse:this.state.mousePos,width:this.state.dragWidth,onMouseUp:this.onRelease,onMouseMove:this.onMouseMove,linterContext:this.props.linterContext},this.state.dragKey||"draggingCard"),n=this.state.animating&&e.jsx(CI,{floating:!0,animating:!0,content:this.state.dragContent,startOffset:this.state.offsetPos,width:this.state.dragWidth,animateTo:this.state.animateTo,onAnimationEnd:this.state.onAnimationEnd,linterContext:this.props.linterContext},this.state.dragKey||"draggingCard"),r=this.props.userInput.current.map((t,n)=>e.jsx(CI,{ref:"sortable"+n,fakeRef:"sortable"+n,floating:!1,content:t,linterContext:this.props.linterContext,onMouseDown:this.state.animating?p.noop:this.onClick.bind(null,"current",n)},`sortableCard${n}`));if(null!=this.state.placeholderIndex){const t=e.jsx(SI,{ref:"placeholder",width:this.state.dragWidth,height:this.state.dragHeight},"placeholder");r.splice(this.state.placeholderIndex,0,t)}const i=r.length>0;r.push(t,n);const o=e.jsxs("div",{className:"perseus-clearfix draggable-box",children:[!i&&e.jsx(kI,{}),e.jsx("div",{ref:"dragList",children:r})]}),s=e.jsx("div",{ref:"bank",className:"bank perseus-clearfix",children:this.props.options.map((t,n)=>e.jsx(CI,{ref:"bank"+n,floating:!1,content:t.content,stack:!0,linterContext:this.props.linterContext,onMouseDown:this.state.animating?p.noop:this.onClick.bind(null,"bank",n),onMouseMove:this.onMouseMove,onMouseUp:this.onRelease},n))});return e.jsxs("div",{className:"draggy-boxy-thing orderer height-"+this.props.height+" layout-"+this.props.layout+" blank-background perseus-clearfix ",ref:"orderer",children:[s,o]})}}const II={name:"orderer",displayName:"Orderer",hidden:!0,widget:MI,isLintable:!0,getStartUserInput:function(){return{current:[]}},getUserInputFromSerializedState:function(e){return{current:e.current.map(e=>e.content)}}};class PI extends wt.Component{static contextType=Ld;static defaultProps={content:"",linterContext:j};isWidget=!0;render(){return e.jsx(wv,{content:this.props.content,apiOptions:this.props.apiOptions,linterContext:this.props.linterContext,strings:this.context.strings})}}const TI={name:"passage-ref-target",displayName:"PassageRefTarget",widget:PI,hidden:!0,isLintable:!0};class EI extends wt.Component{static contextType=Ld;iframeRef=wt.createRef();locale;isWidget=!0;state={url:null,banner:null,isFullScreen:!1};constructor(e){super(e),this.locale=this.getPhetCompatibleLocale(zd().kaLocale)}async componentDidMount(){await this.updateSimState(this.props.url)}async componentDidUpdate(e){e.url!==this.props.url&&await this.updateSimState(this.props.url)}getPhetCompatibleLocale=e=>{switch(e){case"pt-pt":return"pt";case"zh-hans":return"zh_CN";case"zh-hant":return"zh_TW";case"fa-af":return"fa_DA";default:return e}};getPromptJSON(){return rb("phet-simulation")}displayLoadFailure=()=>{this.setState({url:null,banner:{message:this.context.strings.simulationLoadFail,kind:"critical"}})};async updateSimState(e){const t=jI(e,this.locale);if(null===t)return void this.displayLoadFailure();if(!(await fetch(t)).ok)return void this.displayLoadFailure();const n=await this.showLocaleWarning(t);this.setState({url:t,banner:n?{message:this.context.strings.simulationLocaleWarning,kind:"warning"}:null})}async showLocaleWarning(e){if(!e)return!1;const t=/https:\/\/phet\.colorado\.edu\/sims\/html\/([a-zA-Z0-9-]+)\/.*/g.exec(e.toString());if(null===t)return!1;const n=t[1],r=await fetch(`https://phet.colorado.edu/sims/html/${n}/latest/string-map.json`);if(!r.ok)return!1;let i;try{i=await r.json()}catch{return!1}const o=Object.keys(i),s=this.locale.split("_")[0];for(const a of o)if(s===a.split("_")[0])return!1;return!0}toggleFullScreen=()=>{this.setState(e=>({isFullScreen:!e.isFullScreen}))};render(){const{isFullScreen:t,banner:n,url:r}=this.state,{isMobileApp:i}=this.props.apiOptions,o=t&&i,s=o?{...RI.appFullScreenWidgetContainer}:RI.widgetContainer,a=o?RI.appFullScreenIframeContainer:RI.iframeContainer;return e.jsxs(X,{style:s,children:[null!==n&&e.jsx(X,{style:{marginBottom:Sh},children:e.jsx(Se,{layout:"floating",kind:n.kind,text:n.message})}),o&&e.jsx(X,{style:RI.closeButtonContainer,children:e.jsx(he,{icon:dt,onClick:this.toggleFullScreen,kind:"tertiary",actionType:"neutral","aria-label":"Exit fullscreen",style:RI.closeButton})}),e.jsx(X,{style:a,children:e.jsx("iframe",{ref:this.iframeRef,title:this.props.description,sandbox:"allow-same-origin allow-scripts",className:C(RI.iframeResponsive),src:r?.toString(),allow:"fullscreen"})}),null!==r&&!o&&e.jsx(he,{icon:ht,onClick:i?this.toggleFullScreen:()=>{this.iframeRef.current?.requestFullscreen()},kind:"tertiary",actionType:"neutral","aria-label":"Fullscreen",style:{marginTop:5,marginBottom:5,alignSelf:"flex-end"}})]})}}const jI=(e,t)=>{if(!URL.canParse(e))return null;const n=new URL(e);return"https://phet.colorado.edu"!==n.origin?null:(n.searchParams.set("locale",t),n)},RI=k.create({widgetContainer:{borderRadius:6,borderWidth:1,borderColor:"#CCC",padding:W.medium_16,paddingBottom:0},iframeContainer:{position:"relative",overflow:"hidden",width:"100%",paddingTop:"56.25%"},iframeResponsive:{borderWidth:0,position:"absolute",top:0,left:0,bottom:0,right:0,width:"100%",height:"100%"},appFullScreenWidgetContainer:{position:"fixed",top:0,left:0,right:0,bottom:66,width:"100%",height:"auto",zIndex:1e3,backgroundColor:"white",display:"flex",flexDirection:"column"},appFullScreenIframeContainer:{position:"relative",overflow:"hidden",width:"100%",flex:1},closeButtonContainer:{position:"absolute",top:W.xSmall_8,right:W.xSmall_8,zIndex:1001},closeButton:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"50%"}}),AI={name:"phet-simulation",displayName:"PhET Simulation",widget:EI,isLintable:!0},NI=R.getDefaultWidgetOptions("plotter");class LI extends wt.Component{static contextType=Ld;_isMounted=!1;shouldSetupGraphie;graphieDiv=wt.createRef();graphie;horizHairline;hairlineRange;static defaultProps=NI;state={categoryHeights:{}};componentDidMount(){this._isMounted=!0,this.setupGraphie(this.props.userInput)}UNSAFE_componentWillReceiveProps(e){this.shouldSetupGraphie=r.any(["type","labels","categories","scaleY","maxY","snapsPerLine","picUrl","labelInterval","static"],t=>!r.isEqual(this.props[t],e[t]),this),r.isEqual(this.props.starting,e.starting)||r.isEqual(this.props.userInput,e.starting)||(this.shouldSetupGraphie=!0,this.props.handleUserInput(e.starting))}componentDidUpdate(e,t){this.shouldSetupGraphie=this.shouldSetupGraphie||!r.isEqual(this.state.categoryHeights,t.categoryHeights),this.shouldSetupGraphie&&this.setupGraphie(e.userInput)}componentWillUnmount(){this._isMounted=!1}DOT_PLOT_POINT_SIZE=()=>this.props.apiOptions.isMobile?6:4;DOT_PLOT_POINT_PADDING=()=>8;DOT_TICK_POINT_SIZE=()=>2;setupGraphie(e){const t=this;t.shouldSetupGraphie=!1,p(this.graphieDiv.current).empty();const n=bf.createGraphie(this.graphieDiv.current);t.graphie=n,t.graphie.pics=[],t.graphie.dotTicks=[];const i="bar"===t.props.type,o="line"===t.props.type,s="pic"===t.props.type,a="histogram"===t.props.type,l="dotplot"===t.props.type,c=s||l,u={},d=u,h=this.props.apiOptions.isMobile;d.graph={lines:[],bars:[],points:[],dividers:[]},d.scaleY=t.props.scaleY,d.dimX=t.props.categories.length;const f=h?[288,336]:t.props.plotDimensions;if(o)d.dimX+=h?-.2:1;else if(a)d.barPad=0,d.barWidth=1;else if(i)d.barPad=h?.08:.15,d.barWidth=1-2*d.barPad,d.dimX+=(h?-2:2)*d.barPad;else if(c){d.picBoxHeight=t.props.picBoxHeight,d.picBoxWidthPx=f[0]/t.props.categories.length;const e=f[0]-d.dimX*d.picBoxWidthPx;d.picPad=e/(2*d.dimX+2);const n=d.picBoxWidthPx+2*d.picPad;d.picPad=d.picPad/n,d.picBoxWidth=d.picBoxWidthPx/n,d.dimX+=2*d.picPad}l&&(d.picBoxHeight=2*this.DOT_PLOT_POINT_SIZE()+this.DOT_PLOT_POINT_PADDING()),d.dimY=Math.ceil(t.props.maxY/d.scaleY)*d.scaleY;let g=25;(i||o)&&h&&(g=0!==t.props.labels[1].length?17:11),l&&(g/=2),h&&c&&0===t.props.labels[1].length&&(g=0);let m=25,v=75;if(h&&(i||c)){const e=Math.max(0,...Object.values(t.state.categoryHeights));if(e){let t=25;c&&(t+=10),v=t+e}}if(d.scale=h?[(f[0]-4*g)/d.dimX,(f[1]-(m+v))/d.dimY]:r.map([d.dimX,d.dimY],function(e,t){return f[t]/e}),c&&(d.scale[1]=d.picBoxHeight/d.scaleY),g/=d.scale[0],m/=d.scale[1],v/=d.scale[1],n.init({range:[[-3*g,d.dimX+g],[-v,d.dimY+m]],scale:d.scale,isMobile:this.props.apiOptions.isMobile}),n.addMouseLayer({allowScratchpad:!0,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),!c){for(let e=h?d.scaleY:0;e<=d.dimY;e+=d.scaleY)n.label([0,e],Np.roundToApprox(e,2),"left",!0),n.style({stroke:h?"#e9ebec":"#000",strokeWidth:1,opacity:h?1:.3},function(){n.line([0,e],[d.dimX,e])})}(i||o)&&h&&!this.props.static&&(t.graphie.dragPrompt=n.label([d.dimX/2,d.dimY/2],this.context.strings.dragHandles,"center",!1).css("font-weight","bold").css("color",af.KA_GREEN).css("display","none")),t.setupCategories(u),c&&h&&(t.graphie.dotPrompt=n.label([d.dimX/2,d.dimY/2],this.context.strings.tapAddPoints,"center",!1).css("font-weight","bold").css("color",af.KA_GREEN).css("display","none")),c&&t.drawPicHeights(t.props.userInput,e),n.style({stroke:"#000",strokeWidth:2,opacity:1},function(){c?l?n.style({stroke:h?af.GRAY_G:"#000",strokeWidth:h?1:2},()=>n.line([h?0:.5,0],[d.dimX-(h?0:.5),0])):(n.line([0,0],[d.dimX,0]),0===t.props.labels[1].length&&h||n.style({stroke:h?af.GRAY_G:"#000",strokeWidth:h?1:2},()=>n.line([0,0],[0,d.dimY]))):(n.style({stroke:h?af.GRAY_G:"#000",strokeWidth:h?1:2},()=>n.line([h?3*-g:0,0],[d.dimX+(h?g:0),0])),(i||o)&&h||n.style({stroke:h?af.GRAY_G:"#000",strokeWidth:h?1:2},()=>n.line([0,0],[0,d.dimY])))}),n.label([d.dimX/2,h?-v:-35/d.scale[1]],t.props.labels[0],h?"above":"below",!1).css("font-weight","bold").css("color",h&&af.GRAY_F),n.label([(h?-35:-60)/d.scale[0],d.dimY/2],t.props.labels[1],"center",!1).css("font-weight","bold").css("color",h&&af.GRAY_F).addClass("rotate"),this.props.apiOptions.isMobile&&(this.horizHairline=new Ef(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.horizHairline.attr({stroke:af.INTERACTIVE}),this.horizHairline.hide(),this.hairlineRange=[[0,d.dimX],[0,d.dimY]])}showHairlines=e=>{this.props.apiOptions.isMobile&&(this.horizHairline.moveTo([this.hairlineRange[0][0],e[1]],[this.hairlineRange[0][1],e[1]]),this.horizHairline.show())};hideHairlines=()=>{this.props.apiOptions.isMobile&&this.horizHairline.hide()};labelCategory=(e,t)=>{const n=this.props.apiOptions.isMobile,r=this.graphie;let i=!1;const o=(t+="").match(/^\$(.*)\$$/);o&&(t=o[1],i=!0);const s=Math.PI/180*45,a=n&&!o;return new Promise(o=>{r.style({color:n?af.GRAY_G:"inherit",transform:a?"translateX(-50%) translateX(5px) translateY(-50%) rotate(-45deg)":"none",transformOrigin:"100%"},()=>{const l=r.label([e,n?-.5:0],t,"below",i),c=14+(a?Math.round(l.height()*Math.cos(s)+(l.width()+5)*Math.sin(s)):l.height());o({category:t,height:c})})})};setupCategories=e=>{const t=this,n=e,i=t.graphie,o=this.props.apiOptions.isMobile,s=[];"histogram"===t.props.type?(r.times(t.props.categories.length-1,function(n){t.setupBar({index:n,startHeight:t.props.userInput[n],config:e,isHistogram:!0})}),r.each(t.props.categories,function(e,r){const a=.5+r*n.barWidth;s.push(t.labelCategory(a,e));const l=6/n.scale[1];i.style({stroke:"#000",strokeWidth:o?1:2,opacity:1},function(){i.line([a,-l],[a,0])})})):r.each(t.props.categories,function(r,a){const l=t.props.userInput[a];let c;"bar"===t.props.type?c=t.setupBar({index:a,startHeight:l,config:e,isHistogram:!1}):"line"===t.props.type?c=t.setupLine(a,l,e):"pic"===t.props.type?c=t.setupPic(a,e):"dotplot"===t.props.type&&(c=t.setupDotplot(a,e));let u=0,d=-6/n.scale[1];"dotplot"!==t.props.type||o||(u=-d),"dotplot"===t.props.type?a%t.props.labelInterval!==0&&a!==t.props.categories.length-1||(s.push(t.labelCategory(c,r)),u*=1.5,d*=1.5):s.push(t.labelCategory(c,r)),i.style({stroke:o?af.GRAY_G:"#000",strokeWidth:o?1:2,opacity:1},function(){i.line([c,u],[c,d])})}),Promise.all(s).then(e=>{if(t._isMounted){const n={};e.forEach(({category:e,height:t})=>n[e]=t),t.setState({categoryHeights:n})}})};_clampValue=(e,t,n)=>Math.max(Math.min(e,n),t);_maybeShowDragPrompt=()=>{null!=this.graphie.dragPrompt&&(this.graphie.dragPrompt[0].style.display="inline")};_maybeHideDragPrompt=()=>{null!=this.graphie.dragPrompt&&(this.graphie.dragPrompt[0].style.display="none")};setupBar=e=>{const t=this.props.apiOptions.isMobile,n=e.index,r=e.startHeight,i=e.config,o=e.isHistogram,s=this,a=s.graphie,l=i.barWidth/2;let c;c=o?.5+n*i.barWidth+l:(t?l:.5+i.barPad)+n;const u=function(e,n){const r=a.scalePoint(0);if(i.graph.bars[e].scale(1,Math.max(t?.2:.01,n/i.scaleY),r[0],r[1]),o){const t=i.graph.dividers[e-1],o=i.graph.dividers[e];if(t){const o=Math.min(s.props.userInput[e-1],n);t.scale(1,Math.max(.01,o/i.scaleY),r[0],r[1])}if(o){const t=Math.min(s.props.userInput[e+1],n);o.scale(1,Math.max(.01,t/i.scaleY),r[0],r[1])}}};if(a.style({stroke:"none",fill:t?af.BLUE_C:af.LIGHT_BLUE,opacity:1},function(){i.graph.bars[n]=a.path([[c-l,0],[c-l,i.scaleY],[c+l,i.scaleY],[c+l,0],[c-l,0]])}),o&&n>0&&a.style({stroke:"#000",strokeWidth:1,opacity:.3},function(){i.graph.dividers.push(a.path([[c-l,0],[c-l,i.scaleY]]))}),t){const e=i.scaleY/s.props.snapsPerLine;i.graph.lines[n]=Xg.addMaybeMobileMovablePoint(this,{coord:[c,r],constraints:[(t,n,r)=>[c,this._clampValue(Math.round(t[1]/e)*e,0,i.dimY)]],onMoveStart:function(){i.graph.bars[n].attr({fill:af.INTERACTIVE})},onMove:function(){const e=i.graph.lines[n].coord()[1],t=[...s.props.userInput];t[n]=e,s.changeAndTrack(t),s._maybeHideDragPrompt(),u(n,e)},onMoveEnd:function(){i.graph.bars[n].attr({fill:af.BLUE_C})}}),i.graph.lines[n].state.visibleShape.wrapper.style.zIndex="1",s._maybeShowDragPrompt()}else i.graph.lines[n]=a.addMovableLineSegment({coordA:[c-l,r],coordZ:[c+l,r],snapY:i.scaleY/s.props.snapsPerLine,constraints:{constrainX:!0},normalStyle:{stroke:af.INTERACTIVE,"stroke-width":this.props.static?0:4}}),i.graph.lines[n].onMove=function(e,t){let r=this.coordA[1];(r<0||r>i.dimY)&&(r=Math.min(Math.max(r,0),i.dimY),this.coordA[1]=this.coordZ[1]=r,this.transform());const o=[...s.props.userInput];o[n]=r,s.changeAndTrack(o),u(n,r)};return u(n,r),c};setupLine=(e,t,n)=>{const r=this.props.apiOptions.isMobile,i=this,o=n,s=i.graphie,a=e+(r?.4:1);if(r){const r=n.scaleY/i.props.snapsPerLine;o.graph.points[e]=Xg.addMaybeMobileMovablePoint(this,{coord:[a,t],constraints:[(e,t,i)=>[a,this._clampValue(Math.round(e[1]/r)*r,0,n.dimY)]],onMove:function(){const t=o.graph.points[e].coord()[1],n=[...i.props.userInput];n[e]=t,i.changeAndTrack(n),i._maybeHideDragPrompt()}}),i._maybeShowDragPrompt(),e>0&&(o.graph.lines[e]=Xg.addMovableLine(s,{points:[o.graph.points[e-1],o.graph.points[e]],constraints:Xg.MovablePoint.constraints.fixed(),normalStyle:{stroke:af.BLUE_C,"stroke-width":2},highlightStyle:{stroke:af.BLUE_C,"stroke-width":2}}))}else o.graph.points[e]=s.addMovablePoint({coord:[a,t],constraints:{constrainX:!0},normalStyle:{fill:af.INTERACTIVE,stroke:af.INTERACTIVE},snapY:o.scaleY/i.props.snapsPerLine}),o.graph.points[e].onMove=function(t,n){n=Math.min(Math.max(n,0),o.dimY);const r=[...i.props.userInput];return r[e]=n,i.changeAndTrack(r),[t,n]},e>0&&(o.graph.lines[e]=s.addMovableLineSegment({pointA:o.graph.points[e-1],pointZ:o.graph.points[e],constraints:{fixed:!0},normalStyle:{stroke:"#9ab8ed","stroke-width":2}}));return a};setupDotplot=(e,t)=>{const n=this.graphie,r=this.props.apiOptions.isMobile;return this.setupTiledPlot(e,r?.5:1,t,(e,t)=>n.ellipse([e,t],[this.DOT_PLOT_POINT_SIZE()/n.scale[0],this.DOT_PLOT_POINT_SIZE()/n.scale[1]],{fill:af.INTERACTIVE,stroke:af.INTERACTIVE}))};setupPic=(e,t)=>{const n=this.graphie;return this.setupTiledPlot(e,0,t,(e,t)=>{const r=n.scalePoint([e,t]),i=this.props.picSize;return n.raphael.image(this.props.picUrl,r[0]-i/2,r[1]-i/2,i,i)})};setupTiledPlot=(e,t,n,i)=>{const o=this,s=n,a=o.graphie,l=a.pics,c=a.dotTicks,u=e+.5+s.picPad;a.mouselayer.canvas.style.touchAction="none",l[e]=[],c[e]=[];const d=Math.round(s.dimY/s.scaleY)+1;return r(d).times(function(n){const r=((n-=1)+.5)*s.scaleY,d=u-s.picBoxWidth/2,h=r+.5*s.scaleY,f=a.scalePoint([d,h+t]),g=a.mouselayer.rect(f[0],f[1],s.picBoxWidthPx,s.picBoxHeight);p(g[0]).css({fill:"#000",opacity:0,cursor:"pointer"}).on("vmousedown",function(n){n.preventDefault(),o.whichPicClicked=e,o.setPicHeight(e,h),p(document).on("vmouseup.plotTile",function(e){p(document).unbind(".plotTile")}),p(document).on("vmousemove.plotTile",function(e){e.preventDefault();const n=a.getMouseCoord(e)[1],r=Math.floor(n-t),i=(Math.max(-1,Math.floor(r/s.scaleY))+.5)*s.scaleY,l=Math.min(i+.5*s.scaleY,s.dimY);o.setPicHeight(o.whichPicClicked,l)})}),n<0||(l[e][n]=i(u,r+t),c[e][n]=a.ellipse([u,r+t],[o.DOT_TICK_POINT_SIZE()/a.scale[0],o.DOT_TICK_POINT_SIZE()/a.scale[1]],{fill:"#dee1e3",stroke:"#dee1e3"}))}),u};setPicHeight=(e,t)=>{const n=[...this.props.userInput];n[e]=t,this.drawPicHeights(n,this.props.userInput),this.changeAndTrack(n)};changeAndTrack=e=>{this.props.handleUserInput(e),this.props.trackInteraction()};_testInsertUserInput(e){this.props.handleUserInput(e)}drawPicHeights(e,t){const n=this,i=n.graphie,o=i.pics,s=this.props.apiOptions.isMobile;if(s){const t=e.every(e=>0===e);i.dotPrompt[0].style.display=t?"inline":"none"}r.each(o,function(o,a){r.each(o,function(r,o){const l=(o+1)*n.props.scaleY,c=l<=e[a];if("dotplot"===n.props.type){const e=l<=t[a];c&&!e&&r.animate({"stroke-width":8},75,()=>r.animate({"stroke-width":2},75))}p(r[0]).css({display:c?"inline":"none"}),i.dotTicks[a][o][0].style.display=c||!s?"none":"inline"})})}getPromptJSON(){return rb("plotter")}getSerializedState(){const{userInput:e,...t}=this.props;return{...t,values:this.props.userInput}}render(){const t={marginBottom:this.props.labels[0]?75:0};return e.jsx("div",{className:"perseus-widget-plotter graphie",ref:this.graphieDiv,style:t})}}const OI={name:"plotter",displayName:"Plotter",hidden:!0,widget:LI,getCorrectUserInput:function(e){return e.correct},getStartUserInput:function(e){return e.starting},getUserInputFromSerializedState:function(e){return e.values}};class DI extends wt.Component{static defaultProps={height:400};getPromptJSON(){return rb("python-program")}render(){const t=(n=this.props.programID,nb(`/python-program/${n}/embedded`));var n;const r={height:this.props.height,width:"100%"},i=["allow-popups","allow-same-origin","allow-scripts","allow-top-navigation"].join(" ");return e.jsx(X,{style:FI.container,children:e.jsx("iframe",{sandbox:i,src:t,style:r,allowFullScreen:!0})})}}const FI=k.create({container:{margin:"auto",width:"100%"}}),zI={name:"python-program",displayName:"Python Program",widget:DI};class BI extends wt.Component{_isMounted=!1;static defaultProps={correct:[],layout:"horizontal",padding:!0,problemNum:0,linterContext:j};componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}handleChange=e=>{this._isMounted&&(this.props.handleUserInput({options:this._getOptionsFromSortable(),changed:!0}),this.props.trackInteraction())};_getOptionsFromSortable(){return this.refs.sortable.getOptions()}getPromptJSON(){return{type:"sorter",userInput:{values:(e=this.props.userInput||{options:[],changed:!1}).options,changed:e.changed}};var e}moveOptionToIndex=(e,t)=>{this.refs.sortable.moveOptionToIndex(e,t)};getSerializedState(){const{userInput:e,...t}=this.props,n=e||{options:[],changed:!1};return{...t,changed:n.changed,options:n.options}}render(){const{apiOptions:t,userInput:n}=this.props,r=t.isMobile?8:5,i=n?.options||[];return e.jsx("div",{className:"perseus-widget-sorter perseus-clearfix",children:e.jsx(bM,{options:i,layout:this.props.layout,margin:r,padding:this.props.padding,onChange:this.handleChange,linterContext:this.props.linterContext,ref:"sortable"})})}}const $I={name:"sorter",displayName:"Sorter",widget:BI,isLintable:!0,getStartUserInput:function(e,t){return{options:pt(e,t),changed:!1}},getUserInputFromSerializedState:function(e){return{changed:e.changed,options:e.options}}},{assert:WI}=nf;function UI(e,t){return[""+e,""+t]}function HI(e){const t=function(e){return WI(Array.isArray(e)&&2===e.length),+e[0]}(e),n=function(e){return WI(Array.isArray(e)&&2===e.length),+e[1]}(e);return"answer"+t+","+n}class qI extends wt.Component{static contextType=Ld;headerRefs={};answerRefs={};static defaultProps={apiOptions:Bm.defaults,headers:[""],editableHeaders:!1,rows:4,columns:1,linterContext:j};_getRows(){return this.props.userInput.length}_getColumns(){return this.props.userInput[0].length}_getAnswersClone(){return JSON.parse(JSON.stringify(this.props.userInput))}onValueChange(e,t,n){const r=this._getAnswersClone();r[e][t]=n.target?n.target.value:n,this.props.handleUserInput(r),this.props.trackInteraction()}onHeaderChange(e,t){const n=this.props.headers.slice();n[e]=t.content,this.props.onChange({headers:n})}_handleFocus(e){this.props.onFocus(e)}_handleBlur(e){this.props.onBlur(e)}focus(){return this.focusInputPath(UI(0,0)),!0}focusInputPath(e){const t=HI(e),r=this.answerRefs[t];this.props.apiOptions.customKeypad?r.focus():n.findDOMNode(r).focus()}blurInputPath(e){const t=HI(e),r=this.answerRefs[t];this.props.apiOptions.customKeypad?r.blur():n.findDOMNode(r).blur()}getDOMNodeForPath(e){const t=HI(e),r=this.answerRefs[t];return n.findDOMNode(r)}getInputPaths(){const e=this._getRows(),t=this._getColumns(),n=[];for(let r=0;r<e;r++)for(let e=0;e<t;e++){const t=UI(r,e);n.push(t)}return n}getSerializedState(){const{userInput:e,editableHeaders:t,...n}=this.props;return{...n,answers:e}}render(){const t=this.props.headers;let n,r;const i={};return this.props.apiOptions.customKeypad?(n=iy,r={width:80},i.keypadElement=this.props.keypadElement):(n="input",r={}),e.jsxs("table",{className:"perseus-widget-table-of-values non-markdown",children:[e.jsx("thead",{children:e.jsx("tr",{children:t.map((t,n)=>this.props.editableHeaders?e.jsx("th",{children:e.jsx(this.props.Editor,{ref:e=>{this.headerRefs["columnHeader"+n]=e},apiOptions:this.props.apiOptions,content:t,widgetEnabled:!1,onChange:e=>this.onHeaderChange(n,e)})},n):e.jsx("th",{children:e.jsx(wv,{content:t,linterContext:this.props.linterContext,strings:this.context.strings})},n))})}),e.jsx("tbody",{children:this.props.userInput.map((t,o)=>e.jsx("tr",{children:t.map((t,s)=>e.jsx("td",{children:e.jsx(n,{ref:e=>{this.answerRefs[HI(UI(o,s))]=e},type:"text",value:t,disabled:this.props.apiOptions.readOnly,onFocus:()=>this._handleFocus(UI(o,s)),onBlur:()=>this._handleBlur(UI(o,s)),onChange:e=>this.onValueChange(o,s,e),style:r,...i})},s))},o))})]})}}const VI={name:"table",displayName:"Table (deprecated - use markdown table instead)",widget:qI,hidden:!0,isLintable:!0,getStartUserInput:function(e){const t=e.rows,n=e.columns;return Jd.stringArrayOfSize2D({rows:t,columns:n})},getUserInputFromSerializedState:function(e){return e.answers}},GI=/^https?:\/\//,YI=e=>{const t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);return t&&11===t[7].length?t[7]:"videoNotFound"},XI=t=>{const{location:n}=t,{useVideo:r}=$d(),[i,o]=GI.test(n)?[YI(n),"YOUTUBE_ID"]:[n,"READABLE_ID"],s=r(i,o),{strings:a}=Dd();switch(s.status){case"loading":return e.jsx(X,{children:a.loading});case"success":{const t=s.data?.video;return e.jsxs(X,{style:KI.transcriptLink,children:[e.jsx(Ae,{children:t?.title}),e.jsx(ft,{size:10}),e.jsx(gt,{href:"/transcript/"+(t?.contentId||"videoNotFound"),target:"_blank",className:"visited-no-recolor",children:a.videoTranscript})]})}default:return e.jsx(X,{children:a.somethingWrong})}},KI=k.create({transcriptLink:{flexDirection:"row",width:"100%",justifyContent:"center"}}),QI=/^https?:\/\//,ZI=/(khanacademy\.org|localhost)/,JI=/(vimeo\.com)/;class eP extends wt.Component{static contextType=Ld;isWidget=!0;getPromptJSON(){return rb("video")}render(){const{InitialRequestUrl:t}=zd(),n=this.props.location;if(!n)return e.jsx("div",{});let r;if(QI.test(n))r=n,JI.test(r)&&(-1===r.indexOf("?")?r+="?dnt=1":r+="&dnt=1");else{r="{host}/embed_video?slug={slug}&internal_video_only=1".replace("{slug}",n);let e="https://www.khanacademy.org";ZI.test(t.host)&&(e=t.origin),r=r.replace("{host}",e)}return e.jsxs(X,{children:[e.jsxs(Ah,{width:1280,height:720,children:[e.jsx(X,{style:qv.srOnly,children:this.context.strings.videoWrapper}),e.jsx("iframe",{className:"perseus-video-widget",sandbox:"allow-same-origin allow-scripts",width:1280,height:720,src:r,allowFullScreen:!0,allow:"autoplay"})]},n+this.props.alignment),e.jsx(XI,{location:n})]})}}const tP=[...Kx,...[ab,Jx,ub,hb,fb,vb,bb,Eb,Ab,Qb,Jb,nw,cw,Iw,nM,gM,SM,AM,OM,uI,_I,II,wx,kx,TI,AI,OI,zI,$I,VI,{name:"video",displayName:"Video",widget:eP}]],nP=()=>{tP.forEach(e=>{pv(e.name,e)}),fv("transformer","deprecated-standin"),fv("lights-puzzle","deprecated-standin"),fv("reaction-diagram","deprecated-standin"),fv("sequence","deprecated-standin"),fv("simulator","deprecated-standin"),fv("unit-input","deprecated-standin")},rP=new mt.MathJaxRenderer({shouldFixUnicodeLayout:!0,fontURL:"https://cdn.kastatic.org/fonts/mathjax",locale:"en"});function iP(e){return null!=e&&(oP.some(t=>e.matches(`[role=${t}]`))||iP(e.parentElement))}const oP=["button","checkbox","img","menuitemcheckbox","menuitemradio","meter","option","progressbar","radio","scrollbar","separator","slider","switch","tab","combobox"];nP();const sP={...{JIPT:{useJIPT:!1},graphieMovablesJiptLabels:{addLabel:(e,t)=>{}},svgImageJiptLabels:{addLabel:(e,t)=>{}},rendererTranslationComponents:{addComponent:e=>-1,removeComponentAtIndex:e=>{}},TeX:({children:t})=>e.jsx("span",{className:"mock-TeX",children:t}),staticUrl:e=>`mockStaticUrl(${e})`,useVideo:(e,t)=>"YoutubeId"===e&&"YOUTUBE_ID"===t?{status:"success",data:{video:{id:"YoutubeVideo",contentId:"contentId",youtubeId:"YoutubeId",title:"Youtube Video Title",__typename:"Video"}}}:"slug-video-id"===e&&"READABLE_ID"===t?{status:"success",data:{video:{title:"Slug Video Title",id:"VideoId",youtubeId:"YoutubeId",contentId:"contentId",__typename:"Video"}}}:{status:"loading"},InitialRequestUrl:{origin:"origin-test-interface",host:"host-test-interface",protocol:"protocol-test-interface"},isDevServer:!1,kaLocale:"en",Log:{log:()=>{},error:()=>{}}},TeX:function({children:t,onRender:n}){const r=wt.useRef(null),{domElement:i,addLabel:o}=wt.useMemo(()=>rP.render(t),[t]);return wt.useLayoutEffect(()=>{r.current&&(iP(r.current)&&o().catch(console.error),r.current.innerHTML="",r.current.appendChild(i))},[r,o,i]),wt.useEffect(()=>{rP.updateStyles(),n?.()},[t,n]),e.jsx("span",{ref:r})},staticUrl:e=>e},aP={analytics:{onAnalyticsEvent:async()=>{}},useVideo:()=>({status:"success",data:{video:null}}),analytics:{onAnalyticsEvent:async e=>{}}};function lP(e){return"points"===e.type&&e.earned>=e.total}const cP=Array(12).fill(0),uP=({visible:e,className:t})=>St.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},St.createElement("div",{className:"sonner-spinner"},cP.map((e,t)=>St.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),dP=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},St.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),hP=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},St.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),pP=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},St.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),fP=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},St.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),gP=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},St.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),St.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}));let mP=1;const vP=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:n,...r}=e,i="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:mP++,o=this.toasts.find(e=>e.id===i),s=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(t=>t.id===i?(this.publish({...t,...e,id:i,title:n}),{...t,...e,id:i,dismissible:s,title:n}):t):this.addToast({title:n,...r,dismissible:s,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;void 0!==t.loading&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let i,o=void 0!==n;const s=r.then(async e=>{i=["resolve",e];if(St.isValidElement(e))o=!1,this.create({id:n,type:"default",message:e});else if(yP(e)&&!e.ok){o=!1;const r="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,i="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description,s="object"==typeof r&&!St.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:i,...s})}else if(e instanceof Error){o=!1;const r="function"==typeof t.error?await t.error(e):t.error,i="function"==typeof t.description?await t.description(e):t.description,s="object"==typeof r&&!St.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:i,...s})}else if(void 0!==t.success){o=!1;const r="function"==typeof t.success?await t.success(e):t.success,i="function"==typeof t.description?await t.description(e):t.description,s="object"==typeof r&&!St.isValidElement(r)?r:{message:r};this.create({id:n,type:"success",description:i,...s})}}).catch(async e=>{if(i=["reject",e],void 0!==t.error){o=!1;const r="function"==typeof t.error?await t.error(e):t.error,i="function"==typeof t.description?await t.description(e):t.description,s="object"==typeof r&&!St.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:i,...s})}}).finally(()=>{o&&(this.dismiss(n),n=void 0),null==t.finally||t.finally.call(t)}),a=()=>new Promise((e,t)=>s.then(()=>"reject"===i[0]?t(i[1]):e(i[1])).catch(t));return"string"!=typeof n&&"number"!=typeof n?{unwrap:a}:Object.assign(n,{unwrap:a})},this.custom=(e,t)=>{const n=(null==t?void 0:t.id)||mP++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},yP=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,xP=(e,t)=>{const n=(null==t?void 0:t.id)||mP++;return vP.addToast({title:e,...t,id:n}),n},bP=Object.assign(xP,{success:vP.success,info:vP.info,warning:vP.warning,error:vP.error,custom:vP.custom,message:vP.message,promise:vP.promise,dismiss:vP.dismiss,loading:vP.loading},{getHistory:()=>vP.toasts,getToasts:()=>vP.getActiveToasts()});function wP(e){return void 0!==e.label}!function(e){if("undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const _P=3,SP=14;function kP(...e){return e.filter(Boolean).join(" ")}const CP=e=>{var t,n,r,i,o,s,a,l,c;const{invert:u,toast:d,unstyled:h,interacting:p,setHeights:f,visibleToasts:g,heights:m,index:v,toasts:y,expanded:x,removeToast:b,defaultRichColors:w,closeButton:_,style:S,cancelButtonStyle:k,actionButtonStyle:C,className:M="",descriptionClassName:I="",duration:P,position:T,gap:E,expandByDefault:j,classNames:R,icons:A,closeButtonAriaLabel:N="Close toast"}=e,[L,O]=St.useState(null),[D,F]=St.useState(null),[z,B]=St.useState(!1),[$,W]=St.useState(!1),[U,H]=St.useState(!1),[q,V]=St.useState(!1),[G,Y]=St.useState(!1),[X,K]=St.useState(0),[Q,Z]=St.useState(0),J=St.useRef(d.duration||P||4e3),ee=St.useRef(null),te=St.useRef(null),ne=0===v,re=v+1<=g,ie=d.type,oe=!1!==d.dismissible,se=d.className||"",ae=d.descriptionClassName||"",le=St.useMemo(()=>m.findIndex(e=>e.toastId===d.id)||0,[m,d.id]),ce=St.useMemo(()=>{var e;return null!=(e=d.closeButton)?e:_},[d.closeButton,_]),ue=St.useMemo(()=>d.duration||P||4e3,[d.duration,P]),de=St.useRef(0),he=St.useRef(0),pe=St.useRef(0),fe=St.useRef(null),[ge,me]=T.split("-"),ve=St.useMemo(()=>m.reduce((e,t,n)=>n>=le?e:e+t.height,0),[m,le]),ye=(()=>{const[e,t]=St.useState(document.hidden);return St.useEffect(()=>{const e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),xe=d.invert||u,be="loading"===ie;he.current=St.useMemo(()=>le*E+ve,[le,ve]),St.useEffect(()=>{J.current=ue},[ue]),St.useEffect(()=>{B(!0)},[]),St.useEffect(()=>{const e=te.current;if(e){const t=e.getBoundingClientRect().height;return Z(t),f(e=>[{toastId:d.id,height:t,position:d.position},...e]),()=>f(e=>e.filter(e=>e.toastId!==d.id))}},[f,d.id]),St.useLayoutEffect(()=>{if(!z)return;const e=te.current,t=e.style.height;e.style.height="auto";const n=e.getBoundingClientRect().height;e.style.height=t,Z(n),f(e=>e.find(e=>e.toastId===d.id)?e.map(e=>e.toastId===d.id?{...e,height:n}:e):[{toastId:d.id,height:n,position:d.position},...e])},[z,d.title,d.description,f,d.id,d.jsx,d.action,d.cancel]);const we=St.useCallback(()=>{W(!0),K(he.current),f(e=>e.filter(e=>e.toastId!==d.id)),setTimeout(()=>{b(d)},200)},[d,b,f,he]);St.useEffect(()=>{if(d.promise&&"loading"===ie||d.duration===1/0||"loading"===d.type)return;let e;return x||p||ye?(()=>{if(pe.current<de.current){const e=(new Date).getTime()-de.current;J.current=J.current-e}pe.current=(new Date).getTime()})():J.current!==1/0&&(de.current=(new Date).getTime(),e=setTimeout(()=>{null==d.onAutoClose||d.onAutoClose.call(d,d),we()},J.current)),()=>clearTimeout(e)},[x,p,d,ie,ye,we]),St.useEffect(()=>{d.delete&&(we(),null==d.onDismiss||d.onDismiss.call(d,d))},[we,d.delete]);const _e=d.icon||(null==A?void 0:A[ie])||(e=>{switch(e){case"success":return dP;case"info":return pP;case"warning":return hP;case"error":return fP;default:return null}})(ie);var Se,ke,Ce,Me;return St.createElement("li",{tabIndex:0,ref:te,className:kP(M,se,null==R?void 0:R.toast,null==d||null==(t=d.classNames)?void 0:t.toast,null==R?void 0:R.default,null==R?void 0:R[ie],null==d||null==(n=d.classNames)?void 0:n[ie]),"data-sonner-toast":"","data-rich-colors":null!=(Se=d.richColors)?Se:w,"data-styled":!Boolean(d.jsx||d.unstyled||h),"data-mounted":z,"data-promise":Boolean(d.promise),"data-swiped":G,"data-removed":$,"data-visible":re,"data-y-position":ge,"data-x-position":me,"data-index":v,"data-front":ne,"data-swiping":U,"data-dismissible":oe,"data-type":ie,"data-invert":xe,"data-swipe-out":q,"data-swipe-direction":D,"data-expanded":Boolean(x||j&&z),"data-testid":d.testId,style:{"--index":v,"--toasts-before":v,"--z-index":y.length-v,"--offset":`${$?X:he.current}px`,"--initial-height":j?"auto":`${Q}px`,...S,...d.style},onDragEnd:()=>{H(!1),O(null),fe.current=null},onPointerDown:e=>{2!==e.button&&!be&&oe&&(ee.current=new Date,K(he.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(H(!0),fe.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,n;if(q||!oe)return;fe.current=null;const r=Number((null==(e=te.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),i=Number((null==(t=te.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),o=(new Date).getTime()-(null==(n=ee.current)?void 0:n.getTime()),s="x"===L?r:i,a=Math.abs(s)/o;if(Math.abs(s)>=45||a>.11)return K(he.current),null==d.onDismiss||d.onDismiss.call(d,d),F("x"===L?r>0?"right":"left":i>0?"down":"up"),we(),void V(!0);var l,c;null==(l=te.current)||l.style.setProperty("--swipe-amount-x","0px"),null==(c=te.current)||c.style.setProperty("--swipe-amount-y","0px"),Y(!1),H(!1),O(null)},onPointerMove:t=>{var n,r,i;if(!fe.current||!oe)return;if((null==(n=window.getSelection())?void 0:n.toString().length)>0)return;const o=t.clientY-fe.current.y,s=t.clientX-fe.current.x;var a;const l=null!=(a=e.swipeDirections)?a:function(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}(T);!L&&(Math.abs(s)>1||Math.abs(o)>1)&&O(Math.abs(s)>Math.abs(o)?"x":"y");let c={x:0,y:0};const u=e=>1/(1.5+Math.abs(e)/20);if("y"===L){if(l.includes("top")||l.includes("bottom"))if(l.includes("top")&&o<0||l.includes("bottom")&&o>0)c.y=o;else{const e=o*u(o);c.y=Math.abs(e)<Math.abs(o)?e:o}}else if("x"===L&&(l.includes("left")||l.includes("right")))if(l.includes("left")&&s<0||l.includes("right")&&s>0)c.x=s;else{const e=s*u(s);c.x=Math.abs(e)<Math.abs(s)?e:s}(Math.abs(c.x)>0||Math.abs(c.y)>0)&&Y(!0),null==(r=te.current)||r.style.setProperty("--swipe-amount-x",`${c.x}px`),null==(i=te.current)||i.style.setProperty("--swipe-amount-y",`${c.y}px`)}},ce&&!d.jsx&&"loading"!==ie?St.createElement("button",{"aria-label":N,"data-disabled":be,"data-close-button":!0,onClick:be||!oe?()=>{}:()=>{we(),null==d.onDismiss||d.onDismiss.call(d,d)},className:kP(null==R?void 0:R.closeButton,null==d||null==(r=d.classNames)?void 0:r.closeButton)},null!=(ke=null==A?void 0:A.close)?ke:gP):null,(ie||d.icon||d.promise)&&null!==d.icon&&(null!==(null==A?void 0:A[ie])||d.icon)?St.createElement("div",{"data-icon":"",className:kP(null==R?void 0:R.icon,null==d||null==(i=d.classNames)?void 0:i.icon)},d.promise||"loading"===d.type&&!d.icon?d.icon||((null==A?void 0:A.loading)?St.createElement("div",{className:kP(null==R?void 0:R.loader,null==d||null==(Me=d.classNames)?void 0:Me.loader,"sonner-loader"),"data-visible":"loading"===ie},A.loading):St.createElement(uP,{className:kP(null==R?void 0:R.loader,null==d||null==(Ce=d.classNames)?void 0:Ce.loader),visible:"loading"===ie})):null,"loading"!==d.type?_e:null):null,St.createElement("div",{"data-content":"",className:kP(null==R?void 0:R.content,null==d||null==(o=d.classNames)?void 0:o.content)},St.createElement("div",{"data-title":"",className:kP(null==R?void 0:R.title,null==d||null==(s=d.classNames)?void 0:s.title)},d.jsx?d.jsx:"function"==typeof d.title?d.title():d.title),d.description?St.createElement("div",{"data-description":"",className:kP(I,ae,null==R?void 0:R.description,null==d||null==(a=d.classNames)?void 0:a.description)},"function"==typeof d.description?d.description():d.description):null),St.isValidElement(d.cancel)?d.cancel:d.cancel&&wP(d.cancel)?St.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||k,onClick:e=>{wP(d.cancel)&&oe&&(null==d.cancel.onClick||d.cancel.onClick.call(d.cancel,e),we())},className:kP(null==R?void 0:R.cancelButton,null==d||null==(l=d.classNames)?void 0:l.cancelButton)},d.cancel.label):null,St.isValidElement(d.action)?d.action:d.action&&wP(d.action)?St.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||C,onClick:e=>{wP(d.action)&&(null==d.action.onClick||d.action.onClick.call(d.action,e),e.defaultPrevented||we())},className:kP(null==R?void 0:R.actionButton,null==d||null==(c=d.classNames)?void 0:c.actionButton)},d.action.label):null)};function MP(){if("undefined"==typeof window)return"ltr";if("undefined"==typeof document)return"ltr";const e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function IP(e,t){const n={};return[e,t].forEach((e,t)=>{const r=1===t,i=r?"--mobile-offset":"--offset",o=r?"16px":"24px";function s(e){["top","right","bottom","left"].forEach(t=>{n[`${i}-${t}`]="number"==typeof e?`${e}px`:e})}"number"==typeof e||"string"==typeof e?s(e):"object"==typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?n[`${i}-${t}`]=o:n[`${i}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]}):s(o)}),n}const PP=St.forwardRef(function(e,t){const{id:r,invert:i,position:o="bottom-right",hotkey:s=["altKey","KeyT"],expand:a,closeButton:l,className:c,offset:u,mobileOffset:d,theme:h="light",richColors:p,duration:f,style:g,visibleToasts:m=_P,toastOptions:v,dir:y=MP(),gap:x=SP,icons:b,containerAriaLabel:w="Notifications"}=e,[_,S]=St.useState([]),k=St.useMemo(()=>r?_.filter(e=>e.toasterId===r):_.filter(e=>!e.toasterId),[_,r]),C=St.useMemo(()=>Array.from(new Set([o].concat(k.filter(e=>e.position).map(e=>e.position)))),[k,o]),[M,I]=St.useState([]),[P,T]=St.useState(!1),[E,j]=St.useState(!1),[R,A]=St.useState("system"!==h?h:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),N=St.useRef(null),L=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),O=St.useRef(null),D=St.useRef(!1),F=St.useCallback(e=>{S(t=>{var n;return(null==(n=t.find(t=>t.id===e.id))?void 0:n.delete)||vP.dismiss(e.id),t.filter(({id:t})=>t!==e.id)})},[]);return St.useEffect(()=>vP.subscribe(e=>{e.dismiss?requestAnimationFrame(()=>{S(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t))}):setTimeout(()=>{n.flushSync(()=>{S(t=>{const n=t.findIndex(t=>t.id===e.id);return-1!==n?[...t.slice(0,n),{...t[n],...e},...t.slice(n+1)]:[e,...t]})})})}),[_]),St.useEffect(()=>{if("system"!==h)return void A(h);if("system"===h&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?A("dark"):A("light")),"undefined"==typeof window)return;const e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",({matches:e})=>{A(e?"dark":"light")})}catch(t){e.addListener(({matches:e})=>{try{A(e?"dark":"light")}catch(t){}})}},[h]),St.useEffect(()=>{_.length<=1&&T(!1)},[_]),St.useEffect(()=>{const e=e=>{var t;var n;s.every(t=>e[t]||e.code===t)&&(T(!0),null==(n=N.current)||n.focus());"Escape"!==e.code||document.activeElement!==N.current&&!(null==(t=N.current)?void 0:t.contains(document.activeElement))||T(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s]),St.useEffect(()=>{if(N.current)return()=>{O.current&&(O.current.focus({preventScroll:!0}),O.current=null,D.current=!1)}},[N.current]),St.createElement("section",{ref:t,"aria-label":`${w} ${L}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((t,n)=>{var r;const[o,s]=t.split("-");return k.length?St.createElement("ol",{key:t,dir:"auto"===y?MP():y,tabIndex:-1,ref:N,className:c,"data-sonner-toaster":!0,"data-sonner-theme":R,"data-y-position":o,"data-x-position":s,style:{"--front-toast-height":`${(null==(r=M[0])?void 0:r.height)||0}px`,"--width":"356px","--gap":`${x}px`,...g,...IP(u,d)},onBlur:e=>{D.current&&!e.currentTarget.contains(e.relatedTarget)&&(D.current=!1,O.current&&(O.current.focus({preventScroll:!0}),O.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||D.current||(D.current=!0,O.current=e.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{E||T(!1)},onDragEnd:()=>T(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||j(!0)},onPointerUp:()=>j(!1)},k.filter(e=>!e.position&&0===n||e.position===t).map((n,r)=>{var o,s;return St.createElement(CP,{key:n.id,icons:b,index:r,toast:n,defaultRichColors:p,duration:null!=(o=null==v?void 0:v.duration)?o:f,className:null==v?void 0:v.className,descriptionClassName:null==v?void 0:v.descriptionClassName,invert:i,visibleToasts:m,closeButton:null!=(s=null==v?void 0:v.closeButton)?s:l,interacting:E,position:t,style:null==v?void 0:v.style,unstyled:null==v?void 0:v.unstyled,classNames:null==v?void 0:v.classNames,cancelButtonStyle:null==v?void 0:v.cancelButtonStyle,actionButtonStyle:null==v?void 0:v.actionButtonStyle,closeButtonAriaLabel:null==v?void 0:v.closeButtonAriaLabel,removeToast:F,toasts:k.filter(e=>e.position==n.position),heights:M.filter(e=>e.position==n.position),setHeights:I,expandByDefault:a,gap:x,expanded:P,swipeDirections:e.swipeDirections})})):null}))}),TP={async authenticatedFetch(e,t={}){const n=hr.getToken(),r={"Content-Type":"application/json",...t.headers};return n&&(r.Authorization=`Bearer ${n}`),_r.fetch(e,{...t,headers:r})},async get(e,t={}){return this.authenticatedFetch(e,{...t,method:"GET"})},async post(e,t,n={}){return this.authenticatedFetch(e,{...n,method:"POST",body:t?JSON.stringify(t):void 0})},async put(e,t,n={}){return this.authenticatedFetch(e,{...n,method:"PUT",body:t?JSON.stringify(t):void 0})}},EP="http://localhost:8000",jP=({onSkillChange:t})=>{const{user:n}=Mr(),[r,i]=wt.useState([]),[o,s]=wt.useState(0),[a,l]=wt.useState(!1),[c,u]=wt.useState(),[p,f]=wt.useState(!1),[g,m]=wt.useState(Date.now()),[v,y]=wt.useState(!1),[b,w]=wt.useState(!0),[_,S]=wt.useState(!1),[k,C]=wt.useState(null),M=wt.useRef(null),I=wt.useRef(null),P=n?.user_id||"mongodb_test_user";wt.useEffect(()=>{(async()=>{if(hr.getToken()){w(!0),S(!1),C(null);try{const e=await TP.get(`${EP}/api/questions/16`);if(!e.ok)throw new Error(`Failed to fetch questions: ${e.status}`);const t=await e.json();i(t),s(0),l(!1),f(!1),m(Date.now())}catch(BE){S(!0),C(BE instanceof Error?BE:new Error("Unknown error"))}finally{w(!1)}}else w(!1)})()},[P]),wt.useEffect(()=>{if(_){const e=k?.message||"Unknown error fetching questions";bP.error("Unable to load questions",{description:e})}},[_,k]),wt.useEffect(()=>{if(r.length>0&&!b){const e=r[o].dash_metadata||{};TP.post(`${EP}/api/question-displayed`,{question_index:o,metadata:e}).catch(e=>{})}},[o,r,b,P]),wt.useEffect(()=>{if(t){t("counting_100")}},[t]),wt.useEffect(()=>{if(p){y(!1);const e=setTimeout(()=>y(!0),50);return()=>clearTimeout(e)}},[p]),wt.useEffect(()=>{v&&I.current&&setTimeout(()=>{I.current&&I.current.scrollTo({top:I.current.scrollHeight,behavior:"smooth"})},100)},[v]);const T=r[o]||{},E=r.length>0?(o+1)/r.length*100:0;return e.jsx("div",{className:"framework-perseus relative flex min-h-screen w-full items-center justify-center py-4 md:py-6 px-3 md:px-4",children:e.jsxs(Cd,{className:"relative flex w-full max-w-4xl md:max-w-5xl h-auto md:h-[550px] lg:h-[600px] flex-col border-[4px] md:border-[5px] border-black dark:border-white shadow-[2px_2px_0_0_rgba(0,0,0,1)] md:shadow-[2px_2px_0_0_rgba(0,0,0,1)] dark:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)] md:dark:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)] bg-[#FFFDF5] dark:bg-[#000000] overflow-hidden transition-all duration-200",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 md:h-3 bg-[#FFFDF5] dark:bg-[#000000] border-b-[2px] md:border-b-[3px] border-black dark:border-white",children:e.jsx("div",{className:"h-full bg-[#C4B5FD] transition-all duration-500 ease-out",style:{width:`${E}%`}})}),e.jsx(Md,{className:"space-y-2 pt-6 md:pt-7 px-4 md:px-6 border-b-[3px] md:border-b-[4px] border-black dark:border-white bg-[#FFD93D]",children:e.jsxs("div",{className:"flex items-start justify-between gap-3 md:gap-4 flex-wrap",children:[e.jsxs("div",{className:"space-y-1.5 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("div",{className:"p-1.5 md:p-2 border-[2px] md:border-[3px] border-black dark:border-white bg-[#FFFDF5] dark:bg-[#000000]",children:e.jsx(yi,{className:"w-4 h-4 md:w-5 md:h-5 text-black dark:text-white font-bold"})}),e.jsx(Id,{className:"text-lg md:text-xl font-black text-black uppercase tracking-tight",children:"Practice Session"})]}),e.jsx(Pd,{className:"text-xs md:text-sm font-bold text-black uppercase tracking-wide",children:n?`Welcome, ${n.name}! Grade: ${n.current_grade}`:`User: ${P}`})]}),e.jsx("div",{className:"flex items-center gap-2 md:gap-3",children:!b&&r.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx("div",{className:"text-[10px] md:text-xs font-black uppercase tracking-wider text-black mb-0.5",children:"Progress"}),e.jsxs("div",{className:"text-xs md:text-sm font-black text-black",children:["Q ",e.jsx("span",{className:"text-[#FF6B6B]",children:o+1}),"/",r.length]})]}),e.jsx("div",{className:"px-3 md:px-4 py-2 md:py-3 border-[2px] md:border-[3px] border-black dark:border-white bg-[#FFFDF5] dark:bg-[#000000] shadow-[1px_1px_0_0_rgba(0,0,0,1)] md:shadow-[2px_2px_0_0_rgba(0,0,0,1)] dark:shadow-[1px_1px_0_0_rgba(255,255,255,0.3)]",children:e.jsxs("div",{className:"text-xl md:text-2xl font-black text-black dark:text-white",children:[Math.round(E),"%"]})})]})})]})}),e.jsx(Td,{className:"flex-1 overflow-hidden px-4 md:px-6 bg-[#FFFDF5] dark:bg-[#000000]",children:e.jsx("div",{ref:I,className:"relative h-full w-full overflow-auto scrollbar-thin scrollbar-thumb-black dark:scrollbar-thumb-white scrollbar-track-transparent",children:a?e.jsx("div",{className:"flex h-full items-center justify-center px-3 md:px-4 py-4 md:py-6 text-center",children:e.jsxs("div",{className:"max-w-sm md:max-w-md border-[4px] md:border-[5px] border-black dark:border-white bg-[#4ADE80] px-6 md:px-8 py-8 md:py-10 shadow-[2px_2px_0_0_rgba(0,0,0,1)] md:shadow-[3px_3px_0_0_rgba(0,0,0,1)] dark:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)]",children:[e.jsx("div",{className:"text-4xl md:text-6xl mb-3 md:mb-4",children:"🎉"}),e.jsx("p",{className:"text-xl md:text-2xl font-black text-black uppercase mb-2 tracking-tight",children:"Congratulations!"}),e.jsx("p",{className:"text-base md:text-lg font-bold text-black mb-3 md:mb-4",children:"You've successfully completed your test!"}),e.jsx("p",{className:"text-xs md:text-sm font-bold text-black uppercase tracking-wide",children:"Review questions or restart session"})]})}):b?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-3 md:gap-4",children:[e.jsxs("div",{className:"relative w-12 h-12 md:w-16 md:h-16",children:[e.jsx("div",{className:"absolute inset-0 border-[3px] md:border-[4px] border-black dark:border-white"}),e.jsx("div",{className:"absolute inset-0 border-[3px] md:border-[4px] border-transparent border-t-[#C4B5FD] animate-spin"})]}),e.jsx("p",{className:"text-xs md:text-sm font-black uppercase text-black dark:text-white tracking-wider animate-pulse",children:"Loading questions..."})]}):r.length>0?e.jsxs("div",{className:"space-y-4 md:space-y-6 py-3 md:py-4",children:[e.jsx("div",{className:"border-[3px] md:border-[4px] border-black dark:border-white bg-white dark:bg-neutral-800 p-4 md:p-5 lg:p-6 shadow-[2px_2px_0_0_rgba(0,0,0,1)] md:shadow-[2px_2px_0_0_rgba(0,0,0,1)] dark:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)] md:dark:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)]",children:e.jsx(Od,{locale:"en",strings:Rd,children:e.jsx(x,{children:e.jsx(Uv,{ref:M,problemNum:0,item:T,dependencies:aP,apiOptions:{},linterContext:{contentType:"",highlightLint:!0,paths:[],stack:[]},showSolutions:"none",hintsVisible:0,reviewMode:!1})})})}),p&&e.jsx("div",{className:"transform transition-all duration-300 "+(v?"translate-y-0 opacity-100":"translate-y-4 opacity-0"),children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 px-4 md:px-5 py-3 md:py-4 border-[3px] md:border-[4px] border-black dark:border-white shadow-[2px_2px_0_0_rgba(0,0,0,1)] md:shadow-[2px_2px_0_0_rgba(0,0,0,1)] dark:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)] md:dark:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)] "+(c?.correct?"bg-[#ADFF2F]":"bg-[#FF006E]"),children:[c?.correct?e.jsx("div",{className:"p-1 border-[2px] md:border-[3px] border-black dark:border-white bg-white dark:bg-neutral-900",children:e.jsx(hi,{className:"w-4 h-4 md:w-5 md:h-5 text-black dark:text-white flex-shrink-0 font-bold"})}):e.jsx("div",{className:"p-1 border-[2px] md:border-[3px] border-black dark:border-white bg-white",children:e.jsx(pi,{className:"w-4 h-4 md:w-5 md:h-5 text-black flex-shrink-0 font-bold"})}),e.jsx("span",{className:"text-sm md:text-base font-black uppercase tracking-tight "+(c?.correct?"text-black":"text-white"),children:c?.correct?"🎯 Excellent! That's correct!":"📚 Not quite. Keep trying!"})]})})]}):e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-2 md:space-y-3 border-[3px] md:border-[4px] border-black dark:border-white bg-white dark:bg-neutral-800 p-6 md:p-8 shadow-[2px_2px_0_0_rgba(0,0,0,1)] md:shadow-[2px_2px_0_0_rgba(0,0,0,1)] dark:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)]",children:[e.jsx("div",{className:"text-3xl md:text-4xl mb-1 md:mb-2",children:"📝"}),e.jsx("p",{className:"text-xs md:text-sm font-black uppercase text-black dark:text-white tracking-wider",children:"No questions available."})]})})})}),e.jsxs(Ed,{className:"flex justify-end gap-2 md:gap-3 px-4 md:px-6 pb-4 md:pb-5 pt-3 md:pt-4 border-t-[3px] md:border-t-[4px] border-black dark:border-white bg-white dark:bg-neutral-900",children:[e.jsx(ri,{type:"button",size:"sm",onClick:async()=>{if(M.current){const e=M.current.getUserInput(),t=T.question,n=function(e,t,n){if("points"===e.type)return{empty:!1,correct:lP(e),message:e.message,guess:t,state:n};if("invalid"===e.type)return{empty:!0,correct:!1,message:e.message,suppressAlmostThere:e.suppressAlmostThere,guess:t,state:n};throw new d("Invalid score type: "+e.type,h.InvalidInput,{metadata:{score:JSON.stringify(e),guess:JSON.stringify(t),state:JSON.stringify(n)}})}(vt(t,e,"en"),[M.current.getUserInputLegacy(),[]],M.current.getSerializedState().question),i=(Date.now()-g)/1e3;try{const e=r[o].dash_metadata||{};await TP.post(`${EP}/api/submit-answer`,{user_id:P,question_id:e.dash_question_id||`q_${o}`,skill_ids:e.skill_ids||["counting_1_10"],is_correct:n.correct,response_time_seconds:i})}catch(BE){}f(!0),u(n);try{const e=r[o],t=(e.dash_metadata||{}).dash_question_id||`q_${o}_${Date.now()}`;await TP.post("http://localhost:8002/question/answered",{question_id:t,is_correct:n.correct||!1})}catch(BE){}}},disabled:b||a||0===r.length,className:"transition-all duration-100 border-[2px] md:border-[3px] border-black dark:border-white bg-[#C4B5FD] hover:bg-[#C4B5FD] text-black font-black uppercase tracking-wide shadow-[1px_1px_0_0_rgba(0,0,0,1)] md:shadow-[2px_2px_0_0_rgba(0,0,0,1)] dark:shadow-[1px_1px_0_0_rgba(255,255,255,0.3)] hover:shadow-[2px_2px_0_0_rgba(0,0,0,1)] md:hover:shadow-[3px_3px_0_0_rgba(0,0,0,1)] dark:hover:shadow-[2px_2px_0_0_rgba(255,255,255,0.3)] md:dark:hover:shadow-[3px_3px_0_0_rgba(255,255,255,0.3)] disabled:opacity-50 disabled:hover:shadow-[2px_2px_0_0_rgba(0,0,0,1)] md:disabled:hover:shadow-[2px_2px_0_0_rgba(0,0,0,1)] text-xs md:text-sm h-9 md:h-10 px-4 md:px-5",children:"Submit"}),e.jsx(ri,{type:"button",variant:"outline",size:"sm",onClick:()=>{s(e=>{const t=e+1;return t>=r.length?(l(!0),e):(t===r.length-1&&l(!0),f(!1),y(!1),m(Date.now()),t)})},disabled:b||a||0===r.length,className:"transition-all duration-100 border-[2px] md:border-[3px] border-black dark:border-white bg-white dark:bg-neutral-800 hover:bg-[#FFD93D] dark:hover:bg-[#FFD93D] text-black dark:text-white dark:hover:text-black font-black uppercase tracking-wide shadow-[1px_1px_0_0_rgba(0,0,0,1)] md:shadow-[2px_2px_0_0_rgba(0,0,0,1)] dark:shadow-[1px_1px_0_0_rgba(255,255,255,0.3)] hover:shadow-none hover:translate-x-1 hover:translate-y-1 disabled:opacity-50 disabled:hover:translate-x-0 disabled:hover:translate-y-0 disabled:hover:shadow-[2px_2px_0_0_rgba(0,0,0,1)] md:disabled:hover:shadow-[2px_2px_0_0_rgba(0,0,0,1)] text-xs md:text-sm h-9 md:h-10 px-4 md:px-5",children:"Next →"})]})]})})},RP=({onSkillChange:t})=>e.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center bg-transparent",children:e.jsx("div",{className:"w-full h-full",id:"perseus-capture-area",children:e.jsx(jP,{onSkillChange:t})})});function AP(e,t,n,r,i,o,s){try{var a=e[o](s),l=a.value}catch(c){return void n(c)}a.done?t(l):Promise.resolve(l).then(r,i)}function NP(){return NP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NP.apply(this,arguments)}var LP={exports:{}};!function(){var e=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(BE){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),s=new P(r||[]);return o._invoke=function(e,t,n){var r=d;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===f){if("throw"===i)throw o;return E()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=C(s,n);if(a){if(a===g)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var l=u(e,t,n);if("normal"===l.type){if(r=n.done?f:h,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=f,n.method="throw",n.arg=l.arg)}}}(e,n,s),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(BE){return{type:"throw",arg:BE}}}e.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",f="completed",g={};function m(){}function v(){}function y(){}var x={};l(x,o,function(){return this});var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==n&&r.call(w,o)&&(x=w);var _=y.prototype=m.prototype=Object.create(x);function S(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){function n(i,o,s,a){var l=u(e[i],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then(function(e){n("next",e,s,a)},function(e){n("throw",e,s,a)}):t.resolve(d).then(function(e){c.value=e,s(c)},function(e){return n("throw",e,s,a)})}a(l.arg)}var i;this._invoke=function(e,r){function o(){return new t(function(t,i){n(e,r,t,i)})}return i=i?i.then(o,o):o()}}function C(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=u(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function T(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}return{next:E}}function E(){return{value:t,done:!0}}return v.prototype=y,l(_,"constructor",y),l(y,"constructor",v),v.displayName=l(y,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,a,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},S(k.prototype),l(k.prototype,s,function(){return this}),e.AsyncIterator=k,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var s=new k(c(t,n,r,i),o);return e.isGeneratorFunction(n)?s:s.next().then(function(e){return e.done?e.value:s.next()})},S(_),l(_,a,"Generator"),l(_,o,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return a.type="throw",a.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var l=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}(LP.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}();var OP=LP.exports,DP=function(e){var t=e.paths,n=e.id,r=e.strokeWidth,i=e.strokeColor,o=e.command,s=void 0===o?zP:o;if(1===t.length){var a=t[0],l=a.x,c=a.y,u=r/2;return wt.createElement("circle",{key:n,id:n,cx:l,cy:c,r:u,stroke:i,fill:i})}var d=t.reduce(function(e,t,n,r){return 0===n?"M "+t.x+","+t.y:e+" "+s(t,n,r)},"");return wt.createElement("path",{key:n,id:n,d:d,fill:"none",strokeLinecap:"round",stroke:i,strokeWidth:r})},FP=function(e){var t,n,r,i,o=e.current,s=e.next,a=e.previous,l=e.reverse,c=(t=a||o,r=(n=s||o).x-t.x,i=n.y-t.y,{length:Math.sqrt(Math.pow(r,2)+Math.pow(i,2)),angle:Math.atan2(i,r)}),u=c.angle+(l?Math.PI:0),d=.2*c.length;return[o.x+Math.cos(u)*d,o.y+Math.sin(u)*d]},zP=function(e,t,n){var r=null,i=null;switch(t){case 0:var o=FP({current:e});r=o[0],i=o[1];break;case 1:var s=FP({current:n[t-1],next:e});r=s[0],i=s[1];break;default:var a=FP({current:n[t-1],previous:n[t-2],next:e});r=a[0],i=a[1]}var l=FP({current:e,previous:n[t-1],next:n[t+1],reverse:!0});return"C "+r+","+i+" "+l[0]+","+l[1]+" "+e.x+", "+e.y},BP=function(e){var t=e.id,n=e.paths;return wt.createElement(wt.Fragment,null,n.map(function(e,n){return wt.createElement(DP,{key:t+"__"+n,paths:e.paths,id:t+"__"+n,strokeWidth:e.strokeWidth,strokeColor:e.strokeColor,command:zP})}))},$P=function(e){return new Promise(function(t,n){var r=new Image;r.addEventListener("load",function(){r.width>0&&t(r),n("Image not found")}),r.addEventListener("error",function(e){return n(e)}),r.src=e,r.setAttribute("crossorigin","anonymous")})};function WP(e){var t,n=null==(t=e.firstChild)?void 0:t.cloneNode(!0),r=e.offsetWidth,i=e.offsetHeight;return n.setAttribute("viewBox","0 0 "+r+" "+i),n.setAttribute("width",r.toString()),n.setAttribute("height",i.toString()),{svgCanvas:n,width:r,height:i}}var UP=wt.forwardRef(function(e,t){var n=e.paths,r=e.isDrawing,i=e.onPointerDown,o=e.onPointerMove,s=e.onPointerUp,a=e.id,l=void 0===a?"react-sketch-canvas":a,c=e.width,u=void 0===c?"100%":c,d=e.height,h=void 0===d?"100%":d,p=e.className,f=void 0===p?"react-sketch-canvas":p,g=e.canvasColor,m=void 0===g?"red":g,v=e.backgroundImage,y=void 0===v?"":v,x=e.exportWithBackgroundImage,b=void 0!==x&&x,w=e.preserveBackgroundImageAspectRatio,_=void 0===w?"none":w,S=e.allowOnlyPointerType,k=void 0===S?"all":S,C=e.style,M=void 0===C?{border:"0.0625rem solid #9c9c9c",borderRadius:"0.25rem"}:C,I=e.svgStyle,P=void 0===I?{}:I,T=wt.useRef(null),E=function(e){var t,n,r,i=null==(t=T.current)?void 0:t.getBoundingClientRect(),o=null!=(n=window.scrollX)?n:0,s=null!=(r=window.scrollY)?r:0;return i?{x:e.pageX-i.left-o,y:e.pageY-i.top-s}:{x:0,y:0}},j=function(e){"mouse"===e.pointerType&&0!==e.button||"all"!==k&&e.pointerType!==k||s()};wt.useImperativeHandle(t,function(){return{exportImage:function(e){return new Promise(function(){var t,n=(t=OP.mark(function t(n,r){var i,o,s,a,l,c,u,d;return OP.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i=T.current){t.next=4;break}throw Error("Canvas not rendered yet");case 4:return o=WP(i),s=o.svgCanvas,a=o.width,l=o.height,c="data:image/svg+xml;base64,"+btoa(s.outerHTML),t.next=8,$P(c);case 8:if(t.t0=t.sent,u=[t.t0],!b){t.next=21;break}return t.prev=11,t.next=14,$P(y);case 14:d=t.sent,u.push(d),t.next=21;break;case 18:t.prev=18,t.t1=t.catch(11);case 21:Promise.all(u).then(function(t){var r=document.createElement("canvas");r.setAttribute("width",a.toString()),r.setAttribute("height",l.toString());var i=r.getContext("2d");if(!i)throw Error("Canvas not rendered yet");t.reverse().forEach(function(e){i.drawImage(e,0,0)}),n(r.toDataURL("image/"+e))}).catch(function(e){throw e}),t.next=27;break;case 24:t.prev=24,t.t2=t.catch(0),r(t.t2);case 27:case"end":return t.stop()}},t,null,[[0,24],[11,18]])}),function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(e){AP(o,r,i,s,a,"next",e)}function a(e){AP(o,r,i,s,a,"throw",e)}s(void 0)})});return function(e,t){return n.apply(this,arguments)}}())},exportSvg:function(){return new Promise(function(e,t){try{var n,r=null!=(n=T.current)?n:null;if(null!==r){var i,o,s=WP(r).svgCanvas;if(b)return void e(s.outerHTML);null==(i=s.querySelector("#"+l+"__background"))||i.remove(),null==(o=s.querySelector("#"+l+"__canvas-background"))||o.setAttribute("fill",m),e(s.outerHTML)}t(new Error("Canvas not loaded"))}catch(a){t(a)}})}}}),wt.useEffect(function(){return document.addEventListener("pointerup",j),function(){document.removeEventListener("pointerup",j)}},[j]);var R=n.filter(function(e){return!e.drawMode}),A=0,N=n.reduce(function(e,t){return t.drawMode?(void 0===e[A]&&(e[A]=[]),e[A].push(t),e):(A+=1,e)},[[]]);return wt.createElement("div",{role:"presentation",ref:T,className:f,style:NP({touchAction:"none",width:u,height:h},M),"touch-action":"none",onPointerDown:function(e){if(!("all"!==k&&e.pointerType!==k||"mouse"===e.pointerType&&0!==e.button)){var t=E(e);i(t)}},onPointerMove:function(e){if(r&&("all"===k||e.pointerType===k)){var t=E(e);o(t)}},onPointerUp:j},wt.createElement("svg",{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:NP({width:"100%",height:"100%"},P),id:l},wt.createElement("g",{id:l+"__eraser-stroke-group",display:"none"},wt.createElement("rect",{id:l+"__mask-background",x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),R.map(function(e,t){return wt.createElement(DP,{key:l+"__eraser-"+t,id:l+"__eraser-"+t,paths:e.paths,strokeColor:"#000000",strokeWidth:e.strokeWidth})})),wt.createElement("defs",null,y&&wt.createElement("pattern",{id:l+"__background",x:"0",y:"0",width:"100%",height:"100%",patternUnits:"userSpaceOnUse"},wt.createElement("image",{x:"0",y:"0",width:"100%",height:"100%",xlinkHref:y,preserveAspectRatio:_})),R.map(function(e,t){return wt.createElement("mask",{id:l+"__eraser-mask-"+t,key:l+"__eraser-mask-"+t,maskUnits:"userSpaceOnUse"},wt.createElement("use",{href:"#"+l+"__mask-background"}),Array.from({length:R.length-t},function(e,n){return n+t}).map(function(e){return wt.createElement("use",{key:e.toString(),href:"#"+l+"__eraser-"+e.toString()})}))})),wt.createElement("g",{id:l+"__canvas-background-group"},wt.createElement("rect",{id:l+"__canvas-background",x:"0",y:"0",width:"100%",height:"100%",fill:y?"url(#"+l+"__background)":m})),N.map(function(e,t){return wt.createElement("g",{id:l+"__stroke-group-"+t,key:l+"__stroke-group-"+t,mask:"url(#"+l+"__eraser-mask-"+t+")"},wt.createElement(BP,{id:l,paths:e}))})))}),HP=wt.forwardRef(function(e,t){var n=e.id,r=void 0===n?"react-sketch-canvas":n,i=e.width,o=void 0===i?"100%":i,s=e.height,a=void 0===s?"100%":s,l=e.className,c=void 0===l?"":l,u=e.canvasColor,d=void 0===u?"white":u,h=e.strokeColor,p=void 0===h?"red":h,f=e.backgroundImage,g=void 0===f?"":f,m=e.exportWithBackgroundImage,v=void 0!==m&&m,y=e.preserveBackgroundImageAspectRatio,x=void 0===y?"none":y,b=e.strokeWidth,w=void 0===b?4:b,_=e.eraserWidth,S=void 0===_?8:_,k=e.allowOnlyPointerType,C=void 0===k?"all":k,M=e.style,I=void 0===M?{border:"0.0625rem solid #9c9c9c",borderRadius:"0.25rem"}:M,P=e.svgStyle,T=void 0===P?{}:P,E=e.onChange,j=void 0===E?function(e){}:E,R=e.onStroke,A=void 0===R?function(e,t){}:R,N=e.withTimestamp,L=void 0!==N&&N,O=wt.createRef(),D=wt.useState(!0),F=D[0],z=D[1],B=wt.useState(!1),$=B[0],W=B[1],U=wt.useState([]),H=U[0],q=U[1],V=wt.useState([]),G=V[0],Y=V[1],X=wt.useState([]),K=X[0],Q=X[1],Z=wt.useCallback(function(){var e,t,n=null!=(e=null==(t=K.slice(-1))?void 0:t[0])?e:null;null!==n&&A(n,!n.drawMode)},[$]);wt.useEffect(function(){Z()},[$]),wt.useEffect(function(){j(K)},[K]),wt.useImperativeHandle(t,function(){return{eraseMode:function(e){z(!e)},clearCanvas:function(){q([].concat(K)),Q([])},undo:function(){if(0!==H.length)return Q([].concat(H)),void q([]);Y(function(e){return[].concat(e,K.slice(-1))}),Q(function(e){return e.slice(0,-1)})},redo:function(){0!==G.length&&(Q(function(e){return[].concat(e,G.slice(-1))}),Y(function(e){return e.slice(0,-1)}))},exportImage:function(e){var t,n=null==(t=O.current)?void 0:t.exportImage;if(n)return n(e);throw Error("Export function called before canvas loaded")},exportSvg:function(){return new Promise(function(e,t){var n,r=null==(n=O.current)?void 0:n.exportSvg;r?r().then(function(t){e(t)}).catch(function(e){t(e)}):t(Error("Export function called before canvas loaded"))})},exportPaths:function(){return new Promise(function(e,t){try{e(K)}catch(n){t(n)}})},loadPaths:function(e){Q(function(t){return[].concat(t,e)})},getSketchingTime:function(){return new Promise(function(e,t){L||t(new Error("Set 'withTimestamp' prop to get sketching time"));try{e(K.reduce(function(e,t){var n,r,i=null!=(n=t.startTimestamp)?n:0;return e+((null!=(r=t.endTimestamp)?r:0)-i)},0))}catch(n){t(n)}})},resetCanvas:function(){q([]),Y([]),Q([])}}});return wt.createElement(UP,{ref:O,id:r,width:o,height:a,className:c,canvasColor:d,backgroundImage:g,exportWithBackgroundImage:v,preserveBackgroundImageAspectRatio:x,allowOnlyPointerType:C,style:I,svgStyle:T,paths:K,isDrawing:$,onPointerDown:function(e){W(!0),Y([]);var t={drawMode:F,strokeColor:F?p:"#000000",strokeWidth:F?w:S,paths:[e]};L&&(t=NP({},t,{startTimestamp:Date.now(),endTimestamp:0})),Q(function(e){return[].concat(e,[t])})},onPointerMove:function(e){if($){var t=K.slice(-1)[0],n=NP({},t,{paths:[].concat(t.paths,[e])});Q(function(e){return[].concat(e.slice(0,-1),[n])})}},onPointerUp:function(){var e,t;if($&&(W(!1),L)){var n=null!=(e=null==(t=K.slice(-1))?void 0:t[0])?e:null;if(null!==n){var r=NP({},n,{endTimestamp:Date.now()});Q(function(e){return[].concat(e.slice(0,-1),[r])})}}}})});function qP(e,[t,n]){return Math.min(n,Math.max(t,e))}function VP(e){const t=wt.useRef({value:e,previous:e});return wt.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var GP=["PageUp","PageDown"],YP=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],XP={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},KP="Slider",[QP,ZP,JP]=Bi(KP),[eT]=Ci(KP,[JP]),[tT,nT]=eT(KP),rT=wt.forwardRef((t,n)=>{const{name:r,min:i=0,max:o=100,step:s=1,orientation:a="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[i],value:d,onValueChange:h=()=>{},onValueCommit:p=()=>{},inverted:f=!1,form:g,...m}=t,v=wt.useRef(new Set),y=wt.useRef(0),x="horizontal"===a?sT:aT,[b=[],w]=Ti({prop:d,defaultProp:u,onChange:e=>{const t=[...v.current];t[y.current]?.focus(),h(e)}}),_=wt.useRef(b);function S(e,t,{commit:n}={commit:!1}){const r=function(e){return(String(e).split(".")[1]||"").length}(s),a=function(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}(Math.round((e-i)/s)*s+i,r),l=qP(a,[i,o]);w((e=[])=>{const r=function(e=[],t,n){const r=[...e];return r[n]=t,r.sort((e,t)=>e-t)}(e,l,t);if(function(e,t){if(t>0){const n=function(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}(e);return Math.min(...n)>=t}return!0}(r,c*s)){y.current=r.indexOf(l);const t=String(r)!==String(e);return t&&n&&p(r),t?r:e}return e})}return e.jsx(tT,{scope:t.__scopeSlider,name:r,disabled:l,min:i,max:o,valueIndexToChangeRef:y,thumbs:v.current,values:b,orientation:a,form:g,children:e.jsx(QP.Provider,{scope:t.__scopeSlider,children:e.jsx(QP.Slot,{scope:t.__scopeSlider,children:e.jsx(x,{"aria-disabled":l,"data-disabled":l?"":void 0,...m,ref:n,onPointerDown:Si(m.onPointerDown,()=>{l||(_.current=b)}),min:i,max:o,inverted:f,onSlideStart:l?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const n=e.map(e=>Math.abs(e-t)),r=Math.min(...n);return n.indexOf(r)}(b,e);S(e,t)},onSlideMove:l?void 0:function(e){S(e,y.current)},onSlideEnd:l?void 0:function(){const e=_.current[y.current];b[y.current]!==e&&p(b)},onHomeKeyDown:()=>!l&&S(i,0,{commit:!0}),onEndKeyDown:()=>!l&&S(o,b.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!l){const n=GP.includes(e.key)||e.shiftKey&&YP.includes(e.key)?10:1,r=y.current;S(b[r]+s*n*t,r,{commit:!0})}}})})})})});rT.displayName=KP;var[iT,oT]=eT(KP,{startEdge:"left",endEdge:"right",size:"width",direction:1}),sT=wt.forwardRef((t,n)=>{const{min:r,max:i,dir:o,inverted:s,onSlideStart:a,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=t,[h,p]=wt.useState(null),f=Hr(n,e=>p(e)),g=wt.useRef(void 0),m=Wi(o),v="ltr"===m,y=v&&!s||!v&&s;function x(e){const t=g.current||h.getBoundingClientRect(),n=yT([0,t.width],y?[r,i]:[i,r]);return g.current=t,n(e-t.left)}return e.jsx(iT,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:e.jsx(lT,{dir:m,"data-orientation":"horizontal",...d,ref:f,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{const t=x(e.clientX);a?.(t)},onSlideMove:e=>{const t=x(e.clientX);l?.(t)},onSlideEnd:()=>{g.current=void 0,c?.()},onStepKeyDown:e=>{const t=XP[y?"from-left":"from-right"].includes(e.key);u?.({event:e,direction:t?-1:1})}})})}),aT=wt.forwardRef((t,n)=>{const{min:r,max:i,inverted:o,onSlideStart:s,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,d=wt.useRef(null),h=Hr(n,d),p=wt.useRef(void 0),f=!o;function g(e){const t=p.current||d.current.getBoundingClientRect(),n=yT([0,t.height],f?[i,r]:[r,i]);return p.current=t,n(e-t.top)}return e.jsx(iT,{scope:t.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:e.jsx(lT,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{const t=g(e.clientY);s?.(t)},onSlideMove:e=>{const t=g(e.clientY);a?.(t)},onSlideEnd:()=>{p.current=void 0,l?.()},onStepKeyDown:e=>{const t=XP[f?"from-bottom":"from-top"].includes(e.key);c?.({event:e,direction:t?-1:1})}})})}),lT=wt.forwardRef((t,n)=>{const{__scopeSlider:r,onSlideStart:i,onSlideMove:o,onSlideEnd:s,onHomeKeyDown:a,onEndKeyDown:l,onStepKeyDown:c,...u}=t,d=nT(KP,r);return e.jsx(Ni.span,{...u,ref:n,onKeyDown:Si(t.onKeyDown,e=>{"Home"===e.key?(a(e),e.preventDefault()):"End"===e.key?(l(e),e.preventDefault()):GP.concat(YP).includes(e.key)&&(c(e),e.preventDefault())}),onPointerDown:Si(t.onPointerDown,e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),d.thumbs.has(t)?t.focus():i(e)}),onPointerMove:Si(t.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&o(e)}),onPointerUp:Si(t.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),s(e))})})}),cT="SliderTrack",uT=wt.forwardRef((t,n)=>{const{__scopeSlider:r,...i}=t,o=nT(cT,r);return e.jsx(Ni.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...i,ref:n})});uT.displayName=cT;var dT="SliderRange",hT=wt.forwardRef((t,n)=>{const{__scopeSlider:r,...i}=t,o=nT(dT,r),s=oT(dT,r),a=Hr(n,wt.useRef(null)),l=o.values.length,c=o.values.map(e=>vT(e,o.min,o.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return e.jsx(Ni.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...i,ref:a,style:{...t.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}})});hT.displayName=dT;var pT="SliderThumb",fT=wt.forwardRef((t,n)=>{const r=ZP(t.__scopeSlider),[i,o]=wt.useState(null),s=Hr(n,e=>o(e)),a=wt.useMemo(()=>i?r().findIndex(e=>e.ref.current===i):-1,[r,i]);return e.jsx(gT,{...t,ref:s,index:a})}),gT=wt.forwardRef((t,n)=>{const{__scopeSlider:r,index:i,name:o,...s}=t,a=nT(pT,r),l=oT(pT,r),[c,u]=wt.useState(null),d=Hr(n,e=>u(e)),h=!c||(a.form||!!c.closest("form")),p=sa(c),f=a.values[i],g=void 0===f?0:vT(f,a.min,a.max),m=function(e,t){return t>2?`Value ${e+1} of ${t}`:2===t?["Minimum","Maximum"][e]:void 0}(i,a.values.length),v=p?.[l.size],y=v?function(e,t,n){const r=e/2,i=yT([0,50],[0,r]);return(r-i(t)*n)*n}(v,g,l.direction):0;return wt.useEffect(()=>{if(c)return a.thumbs.add(c),()=>{a.thumbs.delete(c)}},[c,a.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${g}% + ${y}px)`},children:[e.jsx(QP.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(Ni.span,{role:"slider","aria-label":t["aria-label"]||m,"aria-valuemin":a.min,"aria-valuenow":f,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...s,ref:d,style:void 0===f?{display:"none"}:t.style,onFocus:Si(t.onFocus,()=>{a.valueIndexToChangeRef.current=i})})}),h&&e.jsx(mT,{name:o??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:f},i)]})});fT.displayName=pT;var mT=wt.forwardRef(({__scopeSlider:t,value:n,...r},i)=>{const o=wt.useRef(null),s=Hr(o,i),a=VP(n);return wt.useEffect(()=>{const e=o.current;if(!e)return;const t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"value").set;if(a!==n&&r){const t=new Event("input",{bubbles:!0});r.call(e,n),e.dispatchEvent(t)}},[a,n]),e.jsx(Ni.input,{style:{display:"none"},...r,ref:s,defaultValue:n})});function vT(e,t,n){return qP(100/(n-t)*(e-t),[0,100])}function yT(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}mT.displayName="RadioBubbleInput";var xT=rT,bT=uT,wT=hT,_T=fT;const ST=wt.forwardRef(({className:t,...n},r)=>e.jsxs(xT,{ref:r,className:rr("relative flex w-full touch-none select-none items-center",t),...n,children:[e.jsx(bT,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:e.jsx(wT,{className:"absolute h-full bg-primary"})}),e.jsx(_T,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));ST.displayName=xT.displayName;var kT=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((t,n)=>{const r=Yr(`Primitive.${n}`),i=wt.forwardRef((t,i)=>{const{asChild:o,...s}=t,a=o?r:n;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),e.jsx(a,{...s,ref:i})});return i.displayName=`Primitive.${n}`,{...t,[n]:i}},{}),CT=wt.forwardRef((t,n)=>e.jsx(kT.label,{...t,ref:n,onMouseDown:e=>{e.target.closest("button, input, select, textarea")||(t.onMouseDown?.(e),!e.defaultPrevented&&e.detail>1&&e.preventDefault())}}));CT.displayName="Label";var MT=CT;const IT=ti("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),PT=wt.forwardRef(({className:t,...n},r)=>e.jsx(MT,{ref:r,className:rr(IT(),t),...n}));PT.displayName=MT.displayName;const TT=()=>{const[t,n]=wt.useState("#000000"),[r,i]=wt.useState(4),[o,s]=wt.useState(!1),a=wt.useRef(null);return e.jsxs("div",{className:"relative h-full w-full",children:[e.jsxs("div",{className:"absolute right-3 top-3 z-20 flex flex-col gap-2 rounded-md border border-border bg-background/90 p-3 shadow-md backdrop-blur",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx(PT,{htmlFor:"scratchpad-color",className:"text-xs text-muted-foreground",children:"Stroke"}),e.jsx("input",{id:"scratchpad-color",type:"color",value:t,onChange:e=>n(e.target.value),className:"h-6 w-6 cursor-pointer rounded border border-input bg-transparent p-0"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-[10px] text-muted-foreground",children:[e.jsx("span",{children:"Width"}),e.jsxs("span",{children:[r,"px"]})]}),e.jsx(ST,{value:[r],min:1,max:20,step:1,onValueChange:([e])=>i(e),className:"w-40"})]}),e.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2",children:[e.jsx(ri,{type:"button",size:"icon",variant:o?"secondary":"outline",onClick:()=>{s(e=>{const t=!e;return a.current&&a.current.eraseMode(t),t})},className:"h-8 w-8",children:e.jsx("span",{className:"material-symbols-outlined text-base",children:o?"edit":"ink_eraser"})}),e.jsx(ri,{type:"button",size:"icon",variant:"outline",onClick:()=>{a.current?.clearCanvas()},className:"h-8 w-8",children:e.jsx("span",{className:"material-symbols-outlined text-base",children:"delete"})})]})]}),e.jsx(HP,{ref:a,className:"h-full w-full rounded-md border border-border bg-card/60 shadow-sm",strokeWidth:r,strokeColor:t,canvasColor:"rgba(255, 255, 255, 0.5)"})]})};var ET=(e,t,n,r,i,o,s,a)=>{let l=document.documentElement,c=["light","dark"];function u(t){(Array.isArray(e)?e:[e]).forEach(e=>{let n="class"===e,r=n&&o?i.map(e=>o[e]||e):i;n?(l.classList.remove(...r),l.classList.add(o&&o[t]?o[t]:t)):l.setAttribute(e,t)}),function(e){a&&c.includes(e)&&(l.style.colorScheme=e)}(t)}if(r)u(r);else try{let e=localStorage.getItem(t)||n;u(s&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e)}catch(d){}},jT=wt.createContext(void 0),RT={setTheme:e=>{},themes:[]};wt.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:o,value:s,themes:a,nonce:l,scriptProps:c})=>{let u=JSON.stringify([n,t,o,e,a,s,r,i]).slice(1,-1);return wt.createElement("script",{...c,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?l:"",dangerouslySetInnerHTML:{__html:`(${ET.toString()})(${u})`}})});const AT=({...t})=>{const{theme:n="system"}=null!=(r=wt.useContext(jT))?r:RT;var r;return e.jsx(PP,{theme:n,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},NT=wt.lazy(()=>Rt(()=>import("./SidePanel-DTujjSwT.js"),__vite__mapDeps([0,1,2,3,4,5]))),LT=wt.lazy(()=>Rt(()=>import("./GradingSidebar-zTJ7Ob68.js"),__vite__mapDeps([6,1,2,4]))),OT=wt.lazy(()=>Rt(()=>import("./ScratchpadCapture-BqidFs1Z.js"),__vite__mapDeps([7,1,2]))),DT=wt.lazy(()=>Rt(()=>import("./FloatingControlPanel-CkEYrN_h.js"),__vite__mapDeps([8,1,2,3,4,9,10])));function FT(){const t=wt.useRef(null);wt.useRef(null);const[n,r]=wt.useState(null),[i,o]=wt.useState(null),s=wt.useRef(null),[a,l]=wt.useState(!1),[c,u]=wt.useState(!1),[d,h]=wt.useState(!1),[p,f]=wt.useState(null),g=wt.useRef(null),{cameraEnabled:m,screenEnabled:v,toggleCamera:y,toggleScreen:x,cameraVideoRef:b,screenVideoRef:w}=(({onCameraFrame:e,onScreenFrame:t})=>{const[n,r]=wt.useState(!1),[i,o]=wt.useState(!1),s=wt.useRef(null),a=wt.useRef(null),l=wt.useRef(null),c=wt.useRef(null),u=wt.useRef(null),d=wt.useRef(null);wt.useEffect(()=>(l.current=document.createElement("canvas"),c.current=document.createElement("canvas"),u.current=document.createElement("video"),u.current.autoplay=!0,u.current.playsInline=!0,d.current=document.createElement("video"),d.current.autoplay=!0,d.current.playsInline=!0,()=>{h(),p()}),[]);const h=wt.useCallback(()=>{s.current&&(s.current.getTracks().forEach(e=>e.stop()),s.current=null)},[]),p=wt.useCallback(()=>{a.current&&(a.current.getTracks().forEach(e=>e.stop()),a.current=null)},[]),f=wt.useCallback(async()=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{width:1280,height:720}});s.current=e;const t=u.current;t.srcObject=e,await new Promise(e=>{t.onloadedmetadata=()=>{const n=l.current;n.width=t.videoWidth,n.height=t.videoHeight,e()}})}catch(e){r(!1)}},[e]),g=wt.useCallback(async()=>{try{const e=await navigator.mediaDevices.getDisplayMedia({video:{width:1280,height:720}});a.current=e;const t=d.current;t.srcObject=e,e.getVideoTracks()[0].onended=()=>{o(!1),p()},await new Promise(e=>{t.onloadedmetadata=()=>{const n=c.current;n.width=t.videoWidth,n.height=t.videoHeight,e()}})}catch(e){o(!1)}},[t,p]);return{cameraEnabled:n,screenEnabled:i,toggleCamera:wt.useCallback(async e=>{r(e),e?await f():h()},[f,h]),toggleScreen:wt.useCallback(async e=>{o(e),e?await g():p()},[g,p]),cameraVideoRef:u,screenVideoRef:d}})({}),_=(e=>{const t=wt.useRef(null),n=wt.useRef(null),r=e.cameraEnabled||!1,i=e.screenEnabled||!1,[o,s]=wt.useState(!1),a=wt.useCallback(()=>{const o=t.current;if(!o)return;const s=o.getContext("2d",{alpha:!1});if(!s)return;const a=e.height/3;if(s.fillStyle="white",s.fillRect(0,0,e.width,a),n.current)try{s.drawImage(n.current,0,0,e.width,a)}catch(l){}if(s.fillStyle="black",s.fillRect(0,a,e.width,a),i&&e.screenVideoRef?.current)try{const t=e.screenVideoRef.current;t.readyState>=2&&s.drawImage(t,0,a,e.width,a)}catch(l){}if(s.fillStyle="#404040",s.fillRect(0,2*a,e.width,a),r&&e.cameraVideoRef?.current)try{const t=e.cameraVideoRef.current;t.readyState>=2&&s.drawImage(t,0,2*a,e.width,a)}catch(l){}},[e.width,e.height,r,i,e.cameraVideoRef,e.screenVideoRef]),l=wt.useCallback(e=>{n.current=e},[]);return wt.useEffect(()=>{if(!o)return;let t;const n=1e3/e.fps;let r=0;const i=e=>{e-r>=n&&(a(),r=e),o&&(t=requestAnimationFrame(i))};return t=requestAnimationFrame(i),()=>{t&&cancelAnimationFrame(t)}},[o,a,e.fps]),{canvasRef:t,updateScratchpadFrame:l,setIsRunning:s,mixFrames:()=>a()}})({width:1280,height:2160,fps:10,quality:.85,cameraEnabled:m,screenEnabled:v,cameraVideoRef:b,screenVideoRef:w});wt.useEffect(()=>{g.current=_},[_]),wt.useEffect(()=>{if(_.canvasRef.current)return _.setIsRunning(!0),()=>{_.setIsRunning(!1)}},[_]);const S=()=>{c||h(!1),u(!c)};return wt.useEffect(()=>{s.current&&i&&(s.current.srcObject=i)},[i]),e.jsx(_i,{defaultTheme:"light",storageKey:"ai-tutor-theme",children:e.jsx("div",{className:"App",children:e.jsx(Pr,{children:e.jsxs(xr,{children:[e.jsx(_d,{sidebarOpen:c,onToggleSidebar:S}),e.jsx("div",{className:"streaming-console",children:e.jsxs(wt.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-full w-full",children:"Loading..."}),children:[e.jsx(NT,{open:c,onToggle:S}),e.jsx(LT,{open:d,onToggle:()=>{d||u(!1),h(!d)},currentSkill:p}),e.jsx("main",{style:{marginRight:c?"260px":"0",marginLeft:d?"260px":"40px",transition:"all 0.5s cubic-bezier(0.16, 1, 0.3, 1)"},children:e.jsxs("div",{className:"main-app-area",children:[e.jsxs("div",{className:"question-panel",children:[e.jsx(kd,{}),e.jsxs(OT,{onFrameCaptured:e=>{_.updateScratchpadFrame(e)},children:[e.jsx(RP,{onSkillChange:f}),a&&e.jsx("div",{className:"scratchpad-container",children:e.jsx(TT,{})})]})]}),e.jsx(DT,{renderCanvasRef:_.canvasRef,videoRef:t,supportsVideo:!0,onVideoStreamChange:r,onMixerStreamChange:o,enableEditingSettings:!0,onPaintClick:()=>l(!a),isPaintActive:a,cameraEnabled:m,screenEnabled:v,onToggleCamera:y,onToggleScreen:x,mediaMixerCanvasRef:_.canvasRef})]})})]})}),e.jsx(AT,{richColors:!0,closeButton:!0})]})})})})}nP(),Fd=sP;var zT=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},BT={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},$T=new class{#n=BT;#r=!1;setTimeoutProvider(e){this.#n=e}setTimeout(e,t){return this.#n.setTimeout(e,t)}clearTimeout(e){this.#n.clearTimeout(e)}setInterval(e,t){return this.#n.setInterval(e,t)}clearInterval(e){this.#n.clearInterval(e)}};var WT="undefined"==typeof window||"Deno"in globalThis;function UT(){}function HT(e){return"number"==typeof e&&e>=0&&e!==1/0}function qT(e,t){return Math.max(e+(t||0)-Date.now(),0)}function VT(e,t){return"function"==typeof e?e(t):e}function GT(e,t){return"function"==typeof e?e(t):e}function YT(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:s,stale:a}=e;if(s)if(r){if(t.queryHash!==KT(s,t.options))return!1}else if(!ZT(t.queryKey,s))return!1;if("all"!==n){const e=t.isActive();if("active"===n&&!e)return!1;if("inactive"===n&&e)return!1}return("boolean"!=typeof a||t.isStale()===a)&&((!i||i===t.state.fetchStatus)&&!(o&&!o(t)))}function XT(e,t){const{exact:n,status:r,predicate:i,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(QT(t.options.mutationKey)!==QT(o))return!1}else if(!ZT(t.options.mutationKey,o))return!1}return(!r||t.state.status===r)&&!(i&&!i(t))}function KT(e,t){return(t?.queryKeyHashFn||QT)(e)}function QT(e){return JSON.stringify(e,(e,t)=>rE(t)?Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}):t)}function ZT(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every(n=>ZT(e[n],t[n])))}var JT=Object.prototype.hasOwnProperty;function eE(e,t){if(e===t)return e;const n=nE(e)&&nE(t);if(!(n||rE(e)&&rE(t)))return t;const r=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,s=n?new Array(o):{};let a=0;for(let l=0;l<o;l++){const o=n?l:i[l],c=e[o],u=t[o];if(c===u){s[o]=c,(n?l<r:JT.call(e,o))&&a++;continue}if(null===c||null===u||"object"!=typeof c||"object"!=typeof u){s[o]=u;continue}const d=eE(c,u);s[o]=d,d===c&&a++}return r===o&&a===r?e:s}function tE(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function nE(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function rE(e){if(!iE(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!!iE(n)&&(!!n.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function iE(e){return"[object Object]"===Object.prototype.toString.call(e)}function oE(e,t,n){return"function"==typeof n.structuralSharing?n.structuralSharing(e,t):!1!==n.structuralSharing?eE(e,t):t}function sE(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function aE(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var lE=Symbol();function cE(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==lE?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}function uE(e,t){return"function"==typeof e?e(...t):!!e}var dE=new class extends zT{#i;#o;#s;constructor(){super(),this.#s=e=>{if(!WT&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#o||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#o?.(),this.#o=void 0)}setEventListener(e){this.#s=e,this.#o?.(),this.#o=e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()})}setFocused(e){this.#i!==e&&(this.#i=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return"boolean"==typeof this.#i?this.#i:"hidden"!==globalThis.document?.visibilityState}};function hE(){let e,t;const n=new Promise((n,r)=>{e=n,t=r});function r(e){Object.assign(n,e),delete n.resolve,delete n.reject}return n.status="pending",n.catch(()=>{}),n.resolve=t=>{r({status:"fulfilled",value:t}),e(t)},n.reject=e=>{r({status:"rejected",reason:e}),t(e)},n}var pE=function(e){setTimeout(e,0)};var fE=function(){let e=[],t=0,n=e=>{e()},r=e=>{e()},i=pE;const o=r=>{t?e.push(r):i(()=>{n(r)})};return{batch:o=>{let s;t++;try{s=o()}finally{t--,t||(()=>{const t=e;e=[],t.length&&i(()=>{r(()=>{t.forEach(e=>{n(e)})})})})()}return s},batchCalls:e=>(...t)=>{o(()=>{e(...t)})},schedule:o,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{r=e},setScheduler:e=>{i=e}}}(),gE=new class extends zT{#a=!0;#o;#s;constructor(){super(),this.#s=e=>{if(!WT&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#o||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#o?.(),this.#o=void 0)}setEventListener(e){this.#s=e,this.#o?.(),this.#o=e(this.setOnline.bind(this))}setOnline(e){this.#a!==e&&(this.#a=e,this.listeners.forEach(t=>{t(e)}))}isOnline(){return this.#a}};function mE(e){return Math.min(1e3*2**e,3e4)}function vE(e){return"online"!==(e??"online")||gE.isOnline()}var yE=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function xE(e){let t,n=!1,r=0;const i=hE(),o=()=>"pending"!==i.status,s=()=>dE.isFocused()&&("always"===e.networkMode||gE.isOnline())&&e.canRun(),a=()=>vE(e.networkMode)&&e.canRun(),l=e=>{o()||(t?.(),i.resolve(e))},c=e=>{o()||(t?.(),i.reject(e))},u=()=>new Promise(n=>{t=e=>{(o()||s())&&n(e)},e.onPause?.()}).then(()=>{t=void 0,o()||e.onContinue?.()}),d=()=>{if(o())return;let t;const i=0===r?e.initialPromise:void 0;try{t=i??e.fn()}catch(a){t=Promise.reject(a)}Promise.resolve(t).then(l).catch(t=>{if(o())return;const i=e.retry??(WT?0:3),a=e.retryDelay??mE,l="function"==typeof a?a(r,t):a,h=!0===i||"number"==typeof i&&r<i||"function"==typeof i&&i(r,t);var p;!n&&h?(r++,e.onFail?.(r,t),(p=l,new Promise(e=>{$T.setTimeout(e,p)})).then(()=>s()?void 0:u()).then(()=>{n?c(t):d()})):c(t)})};return{promise:i,status:()=>i.status,cancel:t=>{if(!o()){const n=new yE(t);c(n),e.onCancel?.(n)}},continue:()=>(t?.(),i),cancelRetry:()=>{n=!0},continueRetry:()=>{n=!1},canStart:a,start:()=>(a()?d():u().then(d),i)}}var bE=class{#l;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),HT(this.gcTime)&&(this.#l=$T.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(WT?1/0:3e5))}clearGcTimeout(){this.#l&&($T.clearTimeout(this.#l),this.#l=void 0)}},wE=class extends bE{#c;#u;#d;#h;#p;#f;#g;constructor(e){super(),this.#g=!1,this.#f=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#h=e.client,this.#d=this.#h.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#c=kE(this.options),this.state=e.state??this.#c,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#p?.promise}setOptions(e){if(this.options={...this.#f,...e},this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){const e=kE(this.options);void 0!==e.data&&(this.setState(SE(e.data,e.dataUpdatedAt)),this.#c=e)}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#d.remove(this)}setData(e,t){const n=oE(this.state.data,e,this.options);return this.#m({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#m({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#p?.promise;return this.#p?.cancel(e),t?t.then(UT).catch(UT):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#c)}isActive(){return this.observers.some(e=>!1!==GT(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===lE||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===VT(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!qT(this.state.dataUpdatedAt,e))}onFocus(){const e=this.observers.find(e=>e.shouldFetchOnWindowFocus());e?.refetch({cancelRefetch:!1}),this.#p?.continue()}onOnline(){const e=this.observers.find(e=>e.shouldFetchOnReconnect());e?.refetch({cancelRefetch:!1}),this.#p?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#d.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#p&&(this.#g?this.#p.cancel({revert:!0}):this.#p.cancelRetry()),this.scheduleGc()),this.#d.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#m({type:"invalidate"})}async fetch(e,t){if("idle"!==this.state.fetchStatus&&"rejected"!==this.#p?.status())if(void 0!==this.state.data&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#p)return this.#p.continueRetry(),this.#p.promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const n=new AbortController,r=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#g=!0,n.signal)})},i=()=>{const e=cE(this.options,t),n=(()=>{const e={client:this.#h,queryKey:this.queryKey,meta:this.meta};return r(e),e})();return this.#g=!1,this.options.persister?this.options.persister(e,n,this):e(n)},o=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#h,state:this.state,fetchFn:i};return r(e),e})();this.options.behavior?.onFetch(o,this),this.#u=this.state,"idle"!==this.state.fetchStatus&&this.state.fetchMeta===o.fetchOptions?.meta||this.#m({type:"fetch",meta:o.fetchOptions?.meta}),this.#p=xE({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:e=>{e instanceof yE&&e.revert&&this.setState({...this.#u,fetchStatus:"idle"}),n.abort()},onFail:(e,t)=>{this.#m({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#m({type:"pause"})},onContinue:()=>{this.#m({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const e=await this.#p.start();if(void 0===e)throw new Error(`${this.queryHash} data is undefined`);return this.setData(e),this.#d.config.onSuccess?.(e,this),this.#d.config.onSettled?.(e,this.state.error,this),e}catch(s){if(s instanceof yE){if(s.silent)return this.#p.promise;if(s.revert){if(void 0===this.state.data)throw s;return this.state.data}}throw this.#m({type:"error",error:s}),this.#d.config.onError?.(s,this),this.#d.config.onSettled?.(this.state.data,s,this),s}finally{this.scheduleGc()}}#m(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,..._E(t.data,this.options),fetchMeta:e.meta??null};case"success":const n={...t,...SE(e.data,e.dataUpdatedAt),dataUpdateCount:t.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#u=e.manual?n:void 0,n;case"error":const r=e.error;return{...t,error:r,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),fE.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),this.#d.notify({query:this,type:"updated",action:e})})}};function _E(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:vE(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}function SE(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function kE(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,n=void 0!==t,r=n?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function CE(e){return{onFetch:(t,n)=>{const r=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],s=t.state.data?.pageParams||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let n=!1;const c=cE(t.options,t.fetchOptions),u=async(e,r,i)=>{if(n)return Promise.reject();if(null==r&&e.pages.length)return Promise.resolve(e);const o=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:r,direction:i?"backward":"forward",meta:t.options.meta};var o;return o=e,Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(t.signal.aborted?n=!0:t.signal.addEventListener("abort",()=>{n=!0}),t.signal)}),e})(),s=await c(o),{maxPages:a}=t.options,l=i?aE:sE;return{pages:l(e.pages,s,a),pageParams:l(e.pageParams,r,a)}};if(i&&o.length){const e="backward"===i,t={pages:o,pageParams:s},n=(e?IE:ME)(r,t);a=await u(t,n,e)}else{const t=e??o.length;do{const e=0===l?s[0]??r.initialPageParam:ME(r,a);if(l>0&&null==e)break;a=await u(a,e),l++}while(l<t)}return a};t.options.persister?t.fetchFn=()=>t.options.persister?.(c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=c}}}function ME(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function IE(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var PE=class extends bE{#h;#v;#y;#p;constructor(e){super(),this.#h=e.client,this.mutationId=e.mutationId,this.#y=e.mutationCache,this.#v=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#v.includes(e)||(this.#v.push(e),this.clearGcTimeout(),this.#y.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#v=this.#v.filter(t=>t!==e),this.scheduleGc(),this.#y.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#v.length||("pending"===this.state.status?this.scheduleGc():this.#y.remove(this))}continue(){return this.#p?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#m({type:"continue"})},n={client:this.#h,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#p=xE({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{this.#m({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#m({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#y.canRun(this)});const r="pending"===this.state.status,i=!this.#p.canStart();try{if(r)t();else{this.#m({type:"pending",variables:e,isPaused:i}),await(this.#y.config.onMutate?.(e,this,n));const t=await(this.options.onMutate?.(e,n));t!==this.state.context&&this.#m({type:"pending",context:t,variables:e,isPaused:i})}const o=await this.#p.start();return await(this.#y.config.onSuccess?.(o,e,this.state.context,this,n)),await(this.options.onSuccess?.(o,e,this.state.context,n)),await(this.#y.config.onSettled?.(o,null,this.state.variables,this.state.context,this,n)),await(this.options.onSettled?.(o,null,e,this.state.context,n)),this.#m({type:"success",data:o}),o}catch(o){try{throw await(this.#y.config.onError?.(o,e,this.state.context,this,n)),await(this.options.onError?.(o,e,this.state.context,n)),await(this.#y.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this,n)),await(this.options.onSettled?.(void 0,o,e,this.state.context,n)),o}finally{this.#m({type:"error",error:o})}}finally{this.#y.runNext(this)}}#m(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),fE.batch(()=>{this.#v.forEach(t=>{t.onMutationUpdate(e)}),this.#y.notify({mutation:this,type:"updated",action:e})})}};var TE=class extends zT{constructor(e={}){super(),this.config=e,this.#x=new Set,this.#b=new Map,this.#w=0}#x;#b;#w;build(e,t,n){const r=new PE({client:e,mutationCache:this,mutationId:++this.#w,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){this.#x.add(e);const t=EE(e);if("string"==typeof t){const n=this.#b.get(t);n?n.push(e):this.#b.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#x.delete(e)){const t=EE(e);if("string"==typeof t){const n=this.#b.get(t);if(n)if(n.length>1){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}else n[0]===e&&this.#b.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=EE(e);if("string"==typeof t){const n=this.#b.get(t),r=n?.find(e=>"pending"===e.state.status);return!r||r===e}return!0}runNext(e){const t=EE(e);if("string"==typeof t){const n=this.#b.get(t)?.find(t=>t!==e&&t.state.isPaused);return n?.continue()??Promise.resolve()}return Promise.resolve()}clear(){fE.batch(()=>{this.#x.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#x.clear(),this.#b.clear()})}getAll(){return Array.from(this.#x)}find(e){const t={exact:!0,...e};return this.getAll().find(e=>XT(t,e))}findAll(e={}){return this.getAll().filter(t=>XT(e,t))}notify(e){fE.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return fE.batch(()=>Promise.all(e.map(e=>e.continue().catch(UT))))}};function EE(e){return e.options.scope?.id}var jE=class extends zT{constructor(e={}){super(),this.config=e,this.#_=new Map}#_;build(e,t,n){const r=t.queryKey,i=t.queryHash??KT(r,t);let o=this.get(i);return o||(o=new wE({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){this.#_.has(e.queryHash)||(this.#_.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#_.get(e.queryHash);t&&(e.destroy(),t===e&&this.#_.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){fE.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#_.get(e)}getAll(){return[...this.#_.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(e=>YT(t,e))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>YT(e,t)):t}notify(e){fE.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){fE.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){fE.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},RE=wt.createContext(void 0),AE=e=>{const t=wt.useContext(RE);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},NE=({client:t,children:n})=>(wt.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(RE.Provider,{value:t,children:n}));const LE=wt.lazy(()=>Rt(()=>import("./LoginPage-Y0A05nRl.js"),__vite__mapDeps([11,1,2,12]))),OE=wt.lazy(()=>Rt(()=>import("./LandingPageWrapper-B3Y0cDqB.js"),__vite__mapDeps([13,1,2,14]))),DE=Ot.createRoot(document.getElementById("root")),FE=new class{#S;#y;#f;#k;#C;#M;#I;#P;constructor(e={}){this.#S=e.queryCache||new jE,this.#y=e.mutationCache||new TE,this.#f=e.defaultOptions||{},this.#k=new Map,this.#C=new Map,this.#M=0}mount(){this.#M++,1===this.#M&&(this.#I=dE.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#S.onFocus())}),this.#P=gE.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#S.onOnline())}))}unmount(){this.#M--,0===this.#M&&(this.#I?.(),this.#I=void 0,this.#P?.(),this.#P=void 0)}isFetching(e){return this.#S.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#y.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#S.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#S.build(this,t),r=n.state.data;return void 0===r?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(VT(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return this.#S.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=this.#S.get(r.queryHash),o=i?.state.data,s=function(e,t){return"function"==typeof e?e(t):e}(t,o);if(void 0!==s)return this.#S.build(this,r).setData(s,{...n,manual:!0})}setQueriesData(e,t,n){return fE.batch(()=>this.#S.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#S.get(t.queryHash)?.state}removeQueries(e){const t=this.#S;fE.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const n=this.#S;return fE.batch(()=>(n.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=fE.batch(()=>this.#S.findAll(e).map(e=>e.cancel(n)));return Promise.all(r).then(UT).catch(UT)}invalidateQueries(e,t={}){return fE.batch(()=>(this.#S.findAll(e).forEach(e=>{e.invalidate()}),"none"===e?.refetchType?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=fE.batch(()=>this.#S.findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(UT)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(r).then(UT)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const n=this.#S.build(this,t);return n.isStaleByTime(VT(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(UT).catch(UT)}fetchInfiniteQuery(e){return e.behavior=CE(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(UT).catch(UT)}ensureInfiniteQueryData(e){return e.behavior=CE(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return gE.isOnline()?this.#y.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#S}getMutationCache(){return this.#y}getDefaultOptions(){return this.#f}setDefaultOptions(e){this.#f=e}setQueryDefaults(e,t){this.#k.set(QT(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#k.values()],n={};return t.forEach(t=>{ZT(e,t.queryKey)&&Object.assign(n,t.defaultOptions)}),n}setMutationDefaults(e,t){this.#C.set(QT(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#C.values()],n={};return t.forEach(t=>{ZT(e,t.mutationKey)&&Object.assign(n,t.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#f.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=KT(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===lE&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#f.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#S.clear(),this.#y.clear()}};var zE;DE.render(e.jsx(NE,{client:FE,children:e.jsx(Pt,{children:e.jsx(Ir,{children:e.jsx(wt.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}),children:e.jsxs(Tt,{children:[e.jsx(Et,{path:"/auth/setup",component:LE}),e.jsx(Et,{path:"/login",component:LE}),e.jsx(Et,{path:"/",exact:!0,component:()=>{const{isAuthenticated:t,isLoading:n}=Mr();return n?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#FFFDF5"},children:e.jsx("div",{children:"Loading..."})}):t?e.jsx(FT,{}):e.jsx(OE,{})}}),e.jsx(Et,{path:"/",component:FT})]})})})})})),(zE=console.log)&&zE instanceof Function&&Rt(async()=>{const{getCLS:e,getFID:t,getFCP:n,getLCP:r,getTTFB:i}=await import("./web-vitals-DbSUPk88.js");return{getCLS:e,getFID:t,getFCP:n,getLCP:r,getTTFB:i}},[]).then(({getCLS:e,getFID:t,getFCP:n,getLCP:r,getTTFB:i})=>{e(zE),t(zE),n(zE),r(zE),i(zE)});export{Ui as $,Bi as A,kd as B,Wi as C,rr as D,TP as E,Bt as F,or as G,gr as H,Ur as I,Ta as J,sl as K,PT as L,Ji as M,io as N,Xi as O,Ni as P,ki as Q,Gl as R,zT as S,hr as T,vi as U,vr as V,ca as W,Ca as X,VP as Y,Ma as Z,Rt as _,br as a,Ia as a0,qP as a1,Pa as a2,ui as a3,ri as b,ci as c,VT as d,HT as e,$T as f,dE as g,_E as h,WT as i,oE as j,fE as k,uE as l,AE as m,UT as n,Ci as o,hE as p,Ti as q,GT as r,tE as s,qT as t,Mr as u,fo as v,Si as w,Ea as x,Hr as y,Ii as z};
